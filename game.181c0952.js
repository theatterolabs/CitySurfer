var gameover33=0;let canRelive=true;let canHuaban=true;const tempFlag=true;window.urls={};const __respfusdkui={"10sdc0.xml":'<component size="750,1334" opaque="false">\n  <displayList>\n    <loader id="n0_gaau" name="loader" xy="374,1332" pivot="0.5,1" anchor="true" size="750,210" align="center" vAlign="bottom" fill="scaleMatchWidth">\n      <relation target="" sidePair="bottom-bottom,center-center"/>\n    </loader>\n  </displayList>\n</component>',"10sdc1.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n10_sded" name="n10" xy="0,-233" size="750,1800" type="rect" lineSize="0"/>\n    <image id="n2_wmv0" name="n2" src="10sdc2" xy="0,0" size="750,1334"/>\n    <image id="n1_wmv0" name="n1" src="10sdc3" xy="0,0" size="750,104"/>\n    <text id="n3_wmv0" name="n3" xy="276,24" size="201,56" font="方正粗圆简体" fontSize="45" text="5588游戏"/>\n    <list id="n7_wmv0" name="List_game" xy="0,407" size="750,927" overflow="scroll" defaultItem="ui://xcy52l6510sdc4"/>\n    <component id="n8_wmv0" name="Btn_close" src="10sdc7" xy="30,21"/>\n    <list id="n9_smaj" name="Img_banner" xy="0,106" size="750,300" layout="row" overflow="scroll" scroll="horizontal" scrollBarFlags="2" defaultItem="ui://xcy52l6510sdc9"/>\n  </displayList>\n</component>',"10sdc4.xml":'<component size="750,179">\n  <displayList>\n    <image id="n0_f90n" name="n0" src="10sdc3" xy="0,0" size="750,179"/>\n    <image id="n7_wmv0" name="n7" src="10sdc2" xy="0,177" size="750,2"/>\n    <text id="n3_f90n" name="Text_name" xy="160,27" size="231,46" font="FZCuYuan-M03S" fontSize="30" vAlign="middle" autoSize="none" text="小猪跑酷"/>\n    <text id="n4_f90n" name="Text_message" xy="160,73" size="394,71" font="FZCuYuan-M03S" fontSize="26" color="#7d7d7d" vAlign="middle" autoSize="none" text="化身猪猪侠，在游戏里面斗智斗勇!"/>\n    <loader id="n8_wmv0" name="icon" xy="19,27" size="125,125" fill="scale"/>\n    <text id="n9_wmv0" name="1" xy="478,27" size="100,46" font="FZCuYuan-M03S" fontSize="24" vAlign="middle" autoSize="none" text="人在玩"/>\n    <text id="n10_wmv0" name="Text_name2" xy="281,27" size="198,46" font="FZCuYuan-M03S" fontSize="24" color="#ff6420" align="right" vAlign="middle" autoSize="none" text="5000万"/>\n    <component id="n12_wmv0" name="btn_start" src="10sdc5" xy="564,51" size="169,76">\n      <Button title="开始" titleFontSize="32"/>\n    </component>\n  </displayList>\n</component>',"10sdc5.xml":'<component size="244,97" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="toSmall"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="toNormal"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="anniu_1" src="10sdc6" xy="0,0" pivot="0.5,0.5" size="244,97">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n6_9cpo" name="title" xy="-21,23" pivot="0.5,0.5" size="295,51" font="方正粗圆简体" fontSize="40" color="#772a00" align="center" vAlign="middle" ubb="true" autoSize="none" text="20元购买">\n      <relation target="n1" sidePair="center-center,middle-middle"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="toSmall">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n6_9cpo" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="toNormal">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n6_9cpo" tween="true" startValue="1,1" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n6_9cpo" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n6_9cpo" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n  <transition name="tishi">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="1.3,1.3" duration="8"/>\n    <item time="0" type="Scale" target="n6_9cpo" tween="true" startValue="1,1" endValue="1.3,1.3" duration="8"/>\n    <item time="8" type="Rotation" target="n6_9cpo" tween="true" startValue="0" endValue="4" duration="2"/>\n    <item time="8" type="Rotation" target="n1" tween="true" startValue="0" endValue="4" duration="2"/>\n    <item time="8" type="Scale" target="n1" tween="true" startValue="1.3,1.3" endValue="1.3,1.3" duration="14"/>\n    <item time="8" type="Scale" target="n6_9cpo" tween="true" startValue="1.3,1.3" endValue="1.3,1.3" duration="14"/>\n    <item time="10" type="Rotation" target="n1" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="10" type="Rotation" target="n6_9cpo" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="12" type="Rotation" target="n1" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="12" type="Rotation" target="n6_9cpo" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="14" type="Rotation" target="n1" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="14" type="Rotation" target="n6_9cpo" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="16" type="Rotation" target="n6_9cpo" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="16" type="Rotation" target="n1" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="18" type="Rotation" target="n1" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="18" type="Rotation" target="n6_9cpo" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="20" type="Rotation" target="n6_9cpo" tween="true" startValue="-4" endValue="0" duration="2"/>\n    <item time="20" type="Rotation" target="n1" tween="true" startValue="-4" endValue="0" duration="2"/>\n    <item time="22" type="Rotation" target="n6_9cpo" tween="true" startValue="0" endValue="0" duration="5" ease="Circ.Out"/>\n    <item time="22" type="Rotation" target="n1" tween="true" startValue="0" endValue="0" duration="5" ease="Circ.Out"/>\n    <item time="22" type="Scale" target="n6_9cpo" tween="true" startValue="1.3,1.3" endValue="1,1" duration="5"/>\n    <item time="22" type="Scale" target="n1" tween="true" startValue="1.3,1.3" endValue="1,1" duration="5"/>\n    <item time="48" type="Rotation" target="n6_9cpo" value="0"/>\n    <item time="48" type="Rotation" target="n1" value="0"/>\n  </transition>\n</component>',"10sdc7.xml":'<component size="61,57" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="toSmall"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="toNormal"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="anniu_1" src="10sdc8" xy="0,0" pivot="0.5,0.5" size="61,57">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n  </displayList>\n  <Button/>\n  <transition name="toSmall">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="toNormal">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n  <transition name="tishi">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="1.3,1.3" duration="8"/>\n    <item time="8" type="Rotation" target="n1" tween="true" startValue="0" endValue="4" duration="2"/>\n    <item time="8" type="Scale" target="n1" tween="true" startValue="1.3,1.3" endValue="1.3,1.3" duration="14"/>\n    <item time="10" type="Rotation" target="n1" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="12" type="Rotation" target="n1" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="14" type="Rotation" target="n1" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="16" type="Rotation" target="n1" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="18" type="Rotation" target="n1" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="20" type="Rotation" target="n1" tween="true" startValue="-4" endValue="0" duration="2"/>\n    <item time="22" type="Rotation" target="n1" tween="true" startValue="0" endValue="0" duration="5" ease="Circ.Out"/>\n    <item time="22" type="Scale" target="n1" tween="true" startValue="1.3,1.3" endValue="1,1" duration="5"/>\n    <item time="48" type="Rotation" target="n1" value="0"/>\n  </transition>\n</component>',"10sdc9.xml":'<component size="750,300">\n  <displayList>\n    <loader id="n10_smaj" name="icon" xy="0,0" size="750,300" fill="scale"/>\n  </displayList>\n</component>',"10sdcb.xml":'<component size="750,1334" opaque="false">\n  <displayList>\n    <image id="n0_10sdc" name="list_moregamebg" src="10sdcc" xy="25,1161" size="709,164" group="n3_10sdc" visible="false"/>\n    <list id="n1_10sdc" name="list_moregame" xy="0,1179" size="750,130" group="n3_10sdc" layout="row" overflow="scroll" scroll="horizontal" colGap="14" defaultItem="ui://xcy52l656o1rci" align="center" vAlign="middle"/>\n    <image id="n2_10sdc" name="list_moregameStr" src="10sdcd" xy="318,1126" size="113,25" group="n3_10sdc" visible="false"/>\n    <group id="n3_10sdc" name="boxList" xy="0,1126" size="750,200" advanced="true"/>\n    <component id="n7_10sdc" name="Btn_MoreGameLeft" src="10sdcg" xy="2,767"/>\n    <component id="n8_10sdc" name="Btn_MoreGameRight" src="10sdcg" xy="618,767"/>\n  </displayList>\n</component>',"10sdcg.xml":'<component size="131,78" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="toSmall"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="toNormal"/>\n  </controller>\n  <displayList>\n    <loader id="n2_mva0" name="icon" xy="40,24" pivot="0.5,0.5" size="50,30" autoSize="true"/>\n  </displayList>\n  <Button/>\n  <transition name="toSmall"/>\n  <transition name="toNormal"/>\n</component>',"6o1rci.xml":'<component size="130,130" mask="n2_f5go">\n  <displayList>\n    <loader id="n0_n9f9" name="icon" xy="0,0" size="130,130" fill="scale"/>\n    <graph id="n1_n9f9" name="n1" xy="0,0" size="130,130" visible="false" type="rect" fillColor="#ffff0000"/>\n    <graph id="n2_f5go" name="n2" xy="0,0" size="130,130" type="eclipse" lineSize="0"/>\n  </displayList>\n</component>',"package.xml":'<packageDescription id="xcy52l65" name="pfusdkui">\n  <resources>\n    <component id="10sdc5" name="BtnEnter" path="/组件/按钮/" size="244,97"/>\n    <component id="10sdc7" name="BtnClose" path="/组件/按钮/" size="61,57"/>\n    <component id="10sdcg" name="BtnMoregame" path="/组件/按钮/" size="131,78"/>\n    <image id="10sdc2" name="Img_bg_1" path="/切图/kp/" size="8,2" scale="9grid" scale9grid="1,0,6,2"/>\n    <image id="10sdc3" name="Img_bg_2" path="/切图/kp/" size="10,10" scale="9grid" scale9grid="2,2,6,6"/>\n    <image id="10sdc6" name="anniu_1" path="/切图/按钮/" size="177,84" scale="9grid" scale9grid="81,34,15,7"/>\n    <image id="10sdc8" name="Btn_xclose" path="/切图/kp/" size="61,57"/>\n    <image id="10sdcc" name="Img_zjmdt" path="/切图/主界面/" size="326,111" scale="9grid" scale9grid="150,50,26,11"/>\n    <image id="10sdcd" name="Img_hy" path="/切图/主界面/" size="113,25"/>\n    <component id="10sdc0" name="PfuBannerUI" path="/" size="750,1334" exported="true"/>\n    <component id="10sdc1" name="BoxListUI" path="/" size="750,1334" exported="true"/>\n    <component id="10sdc4" name="List_Child" path="/组件/按钮/" size="750,179" exported="true"/>\n    <component id="10sdc9" name="BannerImg" path="/组件/" size="750,300" exported="true"/>\n    <component id="10sdcb" name="MoreGameUI" path="/" size="750,1334" exported="true"/>\n    <component id="6o1rci" name="List_GameChild" path="/组件/" size="130,130" exported="true"/>\n    <atlas id="atlas0" size="512,256" file="atlas0.png"/>\n  </resources>\n</packageDescription>',"sprites.bytes":"//FairyGUI atlas sprites.\n10sdc2 0 0 113 8 2 0\n10sdc3 0 0 145 10 10 0\n10sdc6 0 328 0 177 84 0\n10sdc8 0 443 86 61 57 0\n10sdcc 0 0 0 326 111 0\n10sdcd 0 328 86 113 25 0"};const __resmain={"10ozi1e.xml":'<component size="750,1334" adaptationTest="FitSize">\n  <displayList>\n    <loader id="n13_10ozi" name="loaderBg" xy="375,667" pivot="0.5,0.5" anchor="true" size="750,1334" align="center" vAlign="middle" fill="scaleFree" playing="false"/>\n    <loader id="n10_qiv0" name="iosLogo" xy="42,52" size="675,201" visible="false" autoSize="true">\n      <relation target="" sidePair="center-center,top-top"/>\n    </loader>\n    <image id="n7_lex6" name="n7" src="10ozi1h" xy="54,994" size="642,49" group="n9_lex6">\n      <relation target="" sidePair="center-center"/>\n    </image>\n    <component id="n8_lex6" name="jindutiao" src="10ozi1i" xy="60,1001" size="630,34" group="n9_lex6">\n      <relation target="" sidePair="center-center"/>\n      <ProgressBar value="100" max="100"/>\n    </component>\n    <text id="n4_rl1j" name="Text_baifenbi" xy="344,1001" size="69,34" group="n9_lex6" font="黑体" fontSize="30" color="#ffffff" bold="true" text="100%">\n      <relation target="n8_lex6" sidePair="center-center"/>\n    </text>\n    <group id="n9_lex6" name="loadingBar" xy="54,994" size="642,49" visible="false" advanced="true">\n      <relation target="" sidePair="top-bottom"/>\n    </group>\n    <component id="n5_rl1j" name="startGame" src="10ozi1l" xy="193,941" size="364,141">\n      <relation target="" sidePair="center-center"/>\n      <relation target="n8_lex6" sidePair="bottom-top"/>\n      <Button title="开始游戏" titleFontSize="50"/>\n    </component>\n    <text id="n14_qkzo" name="n14" xy="50,944" size="1000,34" font="黑体" fontSize="30" color="#ffffff" autoSize="none" bold="true" text="The first load is slow, please be patient"/>\n  </displayList>\n  <transition name="XIN">\n    <item time="0" type="XY" target="n10_qiv0" value="42,107"/>\n    <item time="0" type="XY" target="n9_lex6" value="54,1204"/>\n  </transition>\n</component>',"10ozi1i.xml":'<component size="66,34" extention="ProgressBar" mask="n12_rylx">\n  <displayList>\n    <graph id="n7_s49a" name="bar" xy="0,0" size="66,46" alpha="0" type="rect" lineSize="0">\n      <relation target="" sidePair="width-width"/>\n    </graph>\n    <image id="n2" name="jindutiao1" src="10ozi1j" xy="0,0" size="66,34">\n      <relation target="n7_s49a" sidePair="width-width"/>\n      <relation target="n7_s49a" sidePair="right-right"/>\n    </image>\n    <image id="n12_rylx" name="jindutiao12" src="10ozi1j" xy="0,0" size="66,35">\n      <relation target="" sidePair="width-width"/>\n    </image>\n  </displayList>\n  <ProgressBar/>\n</component>',"10ozi1l.xml":'<component size="364,142" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="toSmall"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="toNormal"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="anniu_1" src="10ozi1m" xy="0,0" pivot="0.5,0.5" size="364,142">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n6_9cpo" name="title" xy="39,36" pivot="0.5,0.5" size="295,51" font="黑体" fontSize="40" color="#ffffff" align="center" vAlign="middle" ubb="true" autoSize="none" bold="true" text="20元购买">\n      <relation target="n1" sidePair="center-center,middle-middle"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="toSmall">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n6_9cpo" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="toNormal">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n6_9cpo" tween="true" startValue="1,1" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n6_9cpo" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n6_9cpo" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n  <transition name="tishi">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="1.3,1.3" duration="8"/>\n    <item time="0" type="Scale" target="n6_9cpo" tween="true" startValue="1,1" endValue="1.3,1.3" duration="8"/>\n    <item time="8" type="Rotation" target="n6_9cpo" tween="true" startValue="0" endValue="4" duration="2"/>\n    <item time="8" type="Rotation" target="n1" tween="true" startValue="0" endValue="4" duration="2"/>\n    <item time="8" type="Scale" target="n1" tween="true" startValue="1.3,1.3" endValue="1.3,1.3" duration="14"/>\n    <item time="8" type="Scale" target="n6_9cpo" tween="true" startValue="1.3,1.3" endValue="1.3,1.3" duration="14"/>\n    <item time="10" type="Rotation" target="n1" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="10" type="Rotation" target="n6_9cpo" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="12" type="Rotation" target="n1" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="12" type="Rotation" target="n6_9cpo" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="14" type="Rotation" target="n1" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="14" type="Rotation" target="n6_9cpo" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="16" type="Rotation" target="n6_9cpo" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="16" type="Rotation" target="n1" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="18" type="Rotation" target="n1" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="18" type="Rotation" target="n6_9cpo" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="20" type="Rotation" target="n6_9cpo" tween="true" startValue="-4" endValue="0" duration="2"/>\n    <item time="20" type="Rotation" target="n1" tween="true" startValue="-4" endValue="0" duration="2"/>\n    <item time="22" type="Rotation" target="n6_9cpo" tween="true" startValue="0" endValue="0" duration="5" ease="Circ.Out"/>\n    <item time="22" type="Rotation" target="n1" tween="true" startValue="0" endValue="0" duration="5" ease="Circ.Out"/>\n    <item time="22" type="Scale" target="n6_9cpo" tween="true" startValue="1.3,1.3" endValue="1,1" duration="5"/>\n    <item time="22" type="Scale" target="n1" tween="true" startValue="1.3,1.3" endValue="1,1" duration="5"/>\n    <item time="48" type="Rotation" target="n6_9cpo" value="0"/>\n    <item time="48" type="Rotation" target="n1" value="0"/>\n  </transition>\n</component>',"c5shi2d.xml":'<component size="750,300">\n  <displayList>\n    <loader id="n10_smaj" name="icon" xy="0,0" size="750,300" fill="scale"/>\n  </displayList>\n</component>',"c9mhi25.xml":'<component size="750,1334">\n  <displayList>\n    <image id="n2_wmv0" name="n2" src="c9mhi26" xy="0,0" size="750,1334"/>\n    <image id="n1_wmv0" name="n1" src="c9mhi27" xy="0,0" size="750,104"/>\n    <text id="n3_wmv0" name="n3" xy="276,24" size="199,62" font="微软雅黑" fontSize="45" text="5588游戏"/>\n    <list id="n7_wmv0" name="List_game" xy="0,407" size="750,927" overflow="scroll" defaultItem="ui://5buhelmpomxpi1x"/>\n    <list id="n9_mrww" name="Img_banner" xy="0,106" size="750,300" layout="row" overflow="scroll" scroll="horizontal" scrollBarFlags="2" defaultItem="ui://5buhelmpc5shi2d"/>\n    <component id="n10_c9mh" name="Btn_close" src="omxpi20" xy="16,19"/>\n  </displayList>\n</component>',"efo0i1p.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n0_efo0" name="n0" xy="0,-280" size="750,1959" type="rect"/>\n    <image id="n1_efo0" name="n1" src="efo0i1q" xy="15,883"/>\n    <image id="n2_efo0" name="n2" src="efo0i1r" xy="111,393" pivot="0.5,0.5"/>\n  </displayList>\n</component>',"gaaui1o.xml":'<component size="750,1334" opaque="false">\n  <displayList>\n    <loader id="n0_gaau" name="loader" xy="374,1334" pivot="0.5,1" anchor="true" size="750,210" align="center" vAlign="bottom" fill="scaleMatchWidth">\n      <relation target="" sidePair="bottom-bottom,center-center"/>\n    </loader>\n  </displayList>\n</component>',"omxpi1x.xml":'<component size="750,179">\n  <displayList>\n    <image id="n0_f90n" name="n0" src="omxpi1w" xy="0,0" size="750,179"/>\n    <image id="n7_wmv0" name="n7" src="omxpi1v" xy="0,177" size="750,2"/>\n    <text id="n3_f90n" name="Text_name" xy="175,27" size="198,46" font="迷你简大黑" fontSize="36" vAlign="middle" autoSize="none" text="小猪跑酷"/>\n    <text id="n4_f90n" name="Text_message" xy="175,73" size="399,71" font="迷你简大黑" fontSize="26" color="#7d7d7d" vAlign="middle" autoSize="none" text="化身猪猪侠，在游戏里面斗智斗勇!"/>\n    <loader id="n8_wmv0" name="icon" xy="30,27" size="125,125" fill="scale"/>\n    <text id="n9_wmv0" name="1" xy="446,27" size="100,46" font="迷你简大黑" fontSize="26" vAlign="middle" autoSize="none" text="人在玩"/>\n    <text id="n10_wmv0" name="Text_name2" xy="249,27" size="198,46" font="迷你简大黑" fontSize="26" color="#ff6420" align="right" vAlign="middle" autoSize="none" text="5000万"/>\n    <component id="n12_wmv0" name="btn_start" src="omxpi1y" xy="562,51" size="169,76">\n      <Button title="开始" titleFontSize="32"/>\n    </component>\n  </displayList>\n</component>',"omxpi1y.xml":'<component size="140,61" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="toSmall"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="toNormal"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="anniu_1" src="omxpi23" xy="0,0" pivot="0.5,0.5" size="140,61">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n6_9cpo" name="title" xy="7,9" pivot="0.5,0.5" size="126,42" font="迷你简大黑" fontSize="34" color="#fff1bf" align="center" vAlign="middle" ubb="true" autoSize="none" text="开始">\n      <relation target="n1" sidePair="center-center,middle-middle"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="toSmall">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n6_9cpo" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="toNormal">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n6_9cpo" tween="true" startValue="1,1" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n6_9cpo" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n6_9cpo" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n  <transition name="tishi">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="1.3,1.3" duration="8"/>\n    <item time="0" type="Scale" target="n6_9cpo" tween="true" startValue="1,1" endValue="1.3,1.3" duration="8"/>\n    <item time="8" type="Rotation" target="n6_9cpo" tween="true" startValue="0" endValue="4" duration="2"/>\n    <item time="8" type="Rotation" target="n1" tween="true" startValue="0" endValue="4" duration="2"/>\n    <item time="8" type="Scale" target="n1" tween="true" startValue="1.3,1.3" endValue="1.3,1.3" duration="14"/>\n    <item time="8" type="Scale" target="n6_9cpo" tween="true" startValue="1.3,1.3" endValue="1.3,1.3" duration="14"/>\n    <item time="10" type="Rotation" target="n1" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="10" type="Rotation" target="n6_9cpo" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="12" type="Rotation" target="n1" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="12" type="Rotation" target="n6_9cpo" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="14" type="Rotation" target="n1" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="14" type="Rotation" target="n6_9cpo" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="16" type="Rotation" target="n6_9cpo" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="16" type="Rotation" target="n1" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="18" type="Rotation" target="n1" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="18" type="Rotation" target="n6_9cpo" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="20" type="Rotation" target="n6_9cpo" tween="true" startValue="-4" endValue="0" duration="2"/>\n    <item time="20" type="Rotation" target="n1" tween="true" startValue="-4" endValue="0" duration="2"/>\n    <item time="22" type="Rotation" target="n6_9cpo" tween="true" startValue="0" endValue="0" duration="5" ease="Circ.Out"/>\n    <item time="22" type="Rotation" target="n1" tween="true" startValue="0" endValue="0" duration="5" ease="Circ.Out"/>\n    <item time="22" type="Scale" target="n6_9cpo" tween="true" startValue="1.3,1.3" endValue="1,1" duration="5"/>\n    <item time="22" type="Scale" target="n1" tween="true" startValue="1.3,1.3" endValue="1,1" duration="5"/>\n    <item time="48" type="Rotation" target="n1" value="0"/>\n    <item time="48" type="Rotation" target="n6_9cpo" value="0"/>\n  </transition>\n</component>',"omxpi20.xml":'<component size="70,70" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="toSmall"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="toNormal"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="anniu_1" src="omxpi24" xy="0,0" pivot="0.5,0.5" size="70,70">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n  </displayList>\n  <Button/>\n  <transition name="toSmall">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="toNormal">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n  <transition name="tishi">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="1.3,1.3" duration="8"/>\n    <item time="8" type="Rotation" target="n1" tween="true" startValue="0" endValue="4" duration="2"/>\n    <item time="8" type="Scale" target="n1" tween="true" startValue="1.3,1.3" endValue="1.3,1.3" duration="14"/>\n    <item time="10" type="Rotation" target="n1" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="12" type="Rotation" target="n1" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="14" type="Rotation" target="n1" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="16" type="Rotation" target="n1" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="18" type="Rotation" target="n1" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="20" type="Rotation" target="n1" tween="true" startValue="-4" endValue="0" duration="2"/>\n    <item time="22" type="Rotation" target="n1" tween="true" startValue="0" endValue="0" duration="5" ease="Circ.Out"/>\n    <item time="22" type="Scale" target="n1" tween="true" startValue="1.3,1.3" endValue="1,1" duration="5"/>\n    <item time="48" type="Rotation" target="n1" value="0"/>\n  </transition>\n</component>',"package.xml":'<packageDescription id="5buhelmp" name="Main">\n  <resources>\n    <component id="10ozi1i" name="jindutiao" path="/弹窗组件/组件/面板/" size="66,34"/>\n    <image id="10ozi1m" name="anniu_1" path="/切图/按钮/" size="364,142" scale="9grid" scale9grid="81,34,15,7"/>\n    <image id="c9mhi26" name="Img_bg_1(1)" path="/切图/kp/" size="8,2" scale="9grid" scale9grid="1,0,6,2"/>\n    <image id="c9mhi27" name="Img_bg_2(1)" path="/切图/kp/" size="10,10" scale="9grid" scale9grid="2,2,6,6"/>\n    <image id="efo0i1q" name="JKTS" path="/切图/Logo/" size="720,394"/>\n    <image id="efo0i1r" name="icon" path="/切图/Logo/" size="528,161"/>\n    <image id="omxpi1v" name="Img_bg_1" path="/切图/kp/" size="8,2" scale="9grid" scale9grid="1,0,6,2"/>\n    <image id="omxpi1w" name="Img_bg_2" path="/切图/kp/" size="10,10" scale="9grid" scale9grid="2,2,6,6"/>\n    <image id="omxpi23" name="Btnsmall" path="/切图/按钮/" size="140,61"/>\n    <image id="omxpi24" name="Btn_gb" path="/切图/按钮/" size="70,70"/>\n    <component id="10ozi1e" name="Loading" path="/" size="750,1334" exported="true"/>\n    <component id="10ozi1l" name="Btn_HS_DAN_2" path="/组件/按钮/" size="364,142" exported="true"/>\n    <component id="c5shi2d" name="BannerImg" path="/组件/按钮/" size="750,300" exported="true"/>\n    <component id="c9mhi25" name="kaiping" path="/" size="750,1334" exported="true"/>\n    <component id="efo0i1p" name="Logo" path="/" size="750,1334" exported="true"/>\n    <component id="gaaui1o" name="PfuBanner" path="/" size="750,1334" exported="true"/>\n    <component id="omxpi1x" name="List_game" path="/组件/按钮/" size="750,179" exported="true"/>\n    <component id="omxpi1y" name="btnhs" path="/组件/按钮/" size="140,61" exported="true"/>\n    <component id="omxpi20" name="Btn_HS_close" path="/组件/按钮/" size="70,70" exported="true"/>\n    <image id="10ozi1h" name="jindutiao_2" path="/切图/按钮/" size="91,49" exported="true" scale="9grid" scale9grid="29,0,7,46"/>\n    <image id="10ozi1j" name="jindutiao_1" path="/切图/按钮/" size="94,34" exported="true" scale="9grid" scale9grid="21,0,24,33"/>\n    <image id="10ozi1k" name="jindutiao_zhezhao" path="/切图/按钮/" size="66,46" exported="true" scale="9grid" scale9grid="20,0,26,46"/>\n    <image id="c9mhi2a" name="Btn_yellow" path="/切图/按钮/" size="316,122" exported="true"/>\n    <atlas id="atlas0" size="1024,1024" file="atlas0.png"/>\n  </resources>\n</packageDescription>',"sprites.bytes":"//FairyGUI atlas sprites.\n10ozi1h 0 896 36 91 49 0\n10ozi1j 0 896 0 94 34 0\n10ozi1k 0 896 159 66 46 0\n10ozi1m 0 530 396 364 142 0\nc9mhi26 0 992 12 8 2 0\nc9mhi27 0 992 0 10 10 0\nc9mhi2a 0 530 540 316 122 0\nefo0i1q 0 0 0 720 394 0\nefo0i1r 0 0 396 528 161 0\nomxpi1v 0 992 16 8 2 0\nomxpi1w 0 989 36 10 10 0\nomxpi23 0 848 540 140 61 0\nomxpi24 0 896 87 70 70 0"};const __resmap={"10ozi4.fnt":"info creator=UIBuilder resizable=true colored=true\nchar id=48 img=10ozi5 xoffset=0 yoffset=0 xadvance=0\nchar id=49 img=10ozi6 xoffset=0 yoffset=0 xadvance=0\nchar id=50 img=10ozi7 xoffset=0 yoffset=0 xadvance=0\nchar id=51 img=10ozi8 xoffset=0 yoffset=0 xadvance=0\nchar id=52 img=10ozi9 xoffset=0 yoffset=0 xadvance=0\nchar id=53 img=10ozia xoffset=0 yoffset=0 xadvance=0\nchar id=54 img=10ozib xoffset=0 yoffset=0 xadvance=0\nchar id=55 img=10ozic xoffset=0 yoffset=0 xadvance=0\nchar id=56 img=10ozid xoffset=0 yoffset=0 xadvance=0\nchar id=57 img=10ozie xoffset=0 yoffset=0 xadvance=0\nchar id=44 img=10ozif xoffset=0 yoffset=0 xadvance=0\nchar id=43 img=10ozig xoffset=0 yoffset=0 xadvance=0\nchar id=47 img=10ozih xoffset=0 yoffset=0 xadvance=0\n","10ozij.fnt":"info creator=UIBuilder resizable=true\nchar id=48 img=10ozik xoffset=0 yoffset=0 xadvance=0\nchar id=49 img=10ozil xoffset=0 yoffset=0 xadvance=0\nchar id=50 img=10ozim xoffset=0 yoffset=0 xadvance=0\nchar id=51 img=10ozin xoffset=0 yoffset=0 xadvance=0\nchar id=52 img=10ozio xoffset=0 yoffset=0 xadvance=0\nchar id=53 img=10ozip xoffset=0 yoffset=0 xadvance=0\nchar id=54 img=10oziq xoffset=0 yoffset=0 xadvance=0\nchar id=55 img=10ozir xoffset=0 yoffset=0 xadvance=0\nchar id=56 img=10ozis xoffset=0 yoffset=0 xadvance=0\nchar id=57 img=10ozit xoffset=0 yoffset=0 xadvance=0\nchar id=120 img=10oziu xoffset=0 yoffset=0 xadvance=0\n","10oziv.fnt":"info creator=UIBuilder resizable=true\nchar id=48 img=10oziw xoffset=0 yoffset=0 xadvance=0\nchar id=49 img=10ozix xoffset=0 yoffset=0 xadvance=0\nchar id=50 img=10oziy xoffset=0 yoffset=0 xadvance=0\nchar id=51 img=10oziz xoffset=0 yoffset=0 xadvance=0\nchar id=52 img=10ozi10 xoffset=0 yoffset=0 xadvance=0\nchar id=53 img=10ozi11 xoffset=0 yoffset=0 xadvance=0\nchar id=54 img=10ozi12 xoffset=0 yoffset=0 xadvance=0\nchar id=55 img=10ozi13 xoffset=0 yoffset=0 xadvance=0\nchar id=56 img=10ozi14 xoffset=0 yoffset=0 xadvance=0\nchar id=57 img=10ozi15 xoffset=0 yoffset=0 xadvance=0\nchar id=120 img=10ozi16 xoffset=0 yoffset=0 xadvance=0\n","at3iic0.xml":'<component size="236,129">\n  <displayList>\n    <component id="n0_mcxg" name="btnHuaBan" src="mcxgiby" xy="0,0"/>\n    <image id="n1_mcxg" name="texBg" src="cvkzibv" xy="41,81" pivot="0.5,0.5"/>\n  </displayList>\n</component>',"bh1pi75.xml":'<component size="195,64">\n  <displayList>\n    <image id="n36_w1o8" name="bg" src="10ozi3" xy="0,0" pivot="0.5,0.5" size="195,64">\n      <relation target="" sidePair="height-height,width-width"/>\n    </image>\n    <loader id="n41_f90n" name="texIcon" xy="7,0" pivot="0.5,0.5" size="70,61" url="ui://5fhlcwqaf95yi5t" fill="scale">\n      <relation target="n36_w1o8" sidePair="center-center,middle-middle"/>\n    </loader>\n    <text id="n40_w1o8" name="lbValue" xy="76,13" pivot="0.5,0.5" size="104,38" font="迷你简大黑" fontSize="30" color="#ffffff" align="center" vAlign="middle" leading="17" autoSize="none" text="99999">\n      <relation target="" sidePair=""/>\n    </text>\n  </displayList>\n  <transition name="icon" autoPlayRepeat="-1">\n    <item time="0" type="Scale" target="n41_f90n" tween="true" startValue="1,1" endValue="2,2" duration="9"/>\n    <item time="9" type="Scale" target="n41_f90n" tween="true" startValue="2,2" endValue="1,1" duration="8"/>\n    <item time="17" type="Scale" target="n41_f90n" tween="true" startValue="1,1" endValue="2,2" duration="9"/>\n    <item time="26" type="Scale" target="n41_f90n" tween="true" startValue="2,2" endValue="1,1" duration="10"/>\n  </transition>\n  <transition name="dikuang" autoPlayRepeat="-1">\n    <item time="0" type="Scale" target="n40_w1o8" value="1,1"/>\n    <item time="0" type="Scale" target="n36_w1o8" value="1,1"/>\n    <item time="24" type="Scale" target="n36_w1o8" value="1,1"/>\n    <item time="24" type="Scale" target="n40_w1o8" value="1,1"/>\n  </transition>\n</component>',"bkkmi78.xml":'<component size="159,52" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="bkkmi79" xy="0,0" pivot="0.5,0.5" size="159,52">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n9_bkkm" name="title" xy="11,8" size="105,36" font="迷你简大黑" fontSize="28" color="#ffffff" align="center" vAlign="middle" autoSize="none" text="Watch the video">\n      <relation target="" sidePair=""/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"bkkmi7g.xml":'<component size="14,52">\n  <displayList>\n    <image id="n0_bkkm" name="nengliang1" src="bkkmi7e" xy="1,1"/>\n    <image id="n1_bkkm" name="nengliang2" src="bkkmi7f" xy="0,0" pivot="0.5,0.5"/>\n  </displayList>\n  <transition name="t0">\n    <item time="0" type="Scale" target="n1_bkkm" tween="true" startValue="1,1" endValue="1.5,1.5" duration="9"/>\n    <item time="9" type="Scale" target="n1_bkkm" tween="true" startValue="1.5,1.5" endValue="1,1" duration="3"/>\n  </transition>\n</component>',"bkkmi7h.xml":'<component size="708,70">\n  <displayList>\n    <image id="n6_lffg" name="bg" src="kdf8ia0" xy="0,0" size="708,70"/>\n    <image id="n0_bkkm" name="bg2" src="f90ni3h" xy="10,8"/>\n    <loader id="n1_bkkm" name="texIcon" xy="13,16" size="85,71" scale="0.5,0.5" url="ui://5fhlcwqaf95yi62" fill="scaleFree"/>\n    <list id="n8_dm16" name="lstLevelGray" xy="115,6" size="340,54" grayed="true" layout="row" colGap="9" defaultItem="ui://5fhlcwqabkkmi7g">\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n    </list>\n    <list id="n2_bkkm" name="lstLevel" xy="115,6" size="340,54" layout="row" colGap="9" defaultItem="ui://5fhlcwqabkkmi7g">\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n    </list>\n    <component id="n3_bkkm" name="btnUpgrade2" src="bkkmi78" xy="537,7" size="159,52">\n      <Button title="升级" titleFontSize="26"/>\n    </component>\n    <component id="n7_vr7i" name="btnUpgrade1" src="f90ni3r" xy="537,7" size="159,52"/>\n    <image id="n5_bkkm" name="texCompltetd" src="f90ni3z" xy="591,-14" scale="0.7,0.7"/>\n  </displayList>\n</component>',"byssi5o.xml":'<component size="750,1334">\n  <displayList>\n    <image id="n0_f90n" name="n0" src="f90ni4h" xy="52,180" size="645,477"/>\n    <text id="n12_f90n" name="Text_title" xy="102,424" pivot="0.5,0.5" size="547,77" font="迷你简大黑" fontSize="29" color="#86614c" align="center" vAlign="middle" autoSize="none" text="Whether to continue the game during the pause"/>\n    <text id="n2_f90n" name="Text_mes" xy="311,323" pivot="0.5,0.5" size="129,74" font="迷你简大黑" fontSize="62" color="#9a2f05" text="time out"/>\n    <component id="n14_f90n" name="Btn_lan" src="f90ni53" xy="400,693" size="303,118">\n      <Button title="分享游戏"/>\n    </component>\n    <component id="n18_byss" name="Btn_huang" src="lqd4i2r" xy="47,693" size="303,118">\n      <Button title="Continue the game"/>\n    </component>\n    <component id="n20_mg17" name="Btn_5588game" src="mg17i9c" xy="223,871"/>\n  </displayList>\n</component>',"cvkzibf.xml":'<component size="750,1334">\n  <displayList>\n    <image id="n0_sda6" name="bg" src="sda6i1s" xy="0,-198" size="750,1836" visible="false" alpha="0">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <image id="n17_wlbv" name="bg2" xy="126,352" scale="4,4" visible="false">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </image>\n    <image id="n18_wlbv" name="bg3" xy="126,352" scale="4,4" visible="false">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </image>\n    <component id="n20_rj3m" name="contentTitle" src="v54ii96" xy="119,-17" visible="false"/>\n    <component id="n9_bh1p" name="contentCoin" src="bh1pi75" xy="12,46" size="177,64">\n      <relation target="" sidePair="top-top,left-left"/>\n    </component>\n    <component id="n10_uwv2" name="contentTeach" src="i1fpi7w" xy="262,330" visible="false"/>\n    <component id="n11_fzp9" name="contentScore" src="fzp9i8f" xy="197,47"/>\n    <list id="n13_d795" name="lstProps" xy="10,511" size="151,674" visible="false" overflow="scroll" lineGap="-16" defaultItem="ui://5fhlcwqad795i8i" align="center">\n      <item/>\n      <item/>\n      <item/>\n    </list>\n    <component id="n15_d795" name="contentRank" src="d795i8k" xy="568,169"/>\n    <component id="n16_d795" name="contentBeyound" src="d795i8p" xy="222,390" size="359,230"/>\n    <component id="n19_mg17" name="btn5588" src="v54ii9b" xy="0,263" visible="false"/>\n    <component id="n22_qkcf" name="tianfufadong" src="qkcfidz" xy="51,128" pivot="0.5,0.5" alpha="0"/>\n    <component id="n23_hudw" name="Com_watch" src="hudwiec" xy="900,909"/>\n    <component id="n25_smwe" name="Com_fast" src="smweiee" xy="-589,822"/>\n    <component id="n26_spa9" name="isFenxiang" src="o8w6idk" xy="880,1044"/>\n  </displayList>\n  <transition name="Ani_Gameflashwhite">\n    <item time="0" type="Alpha" target="n0_sda6" tween="true" startValue="0" endValue="1" duration="3"/>\n    <item time="0" type="Visible" target="n0_sda6" value="true"/>\n    <item time="5" type="Alpha" target="n0_sda6" tween="true" startValue="1" endValue="0" duration="3"/>\n    <item time="8" type="Visible" target="n0_sda6" value="false"/>\n  </transition>\n  <transition name="Ani_SuperStartflash">\n    <item time="0" type="Alpha" target="n0_sda6" tween="true" startValue="0" endValue="1" duration="6"/>\n    <item time="0" type="Visible" target="n0_sda6" value="true"/>\n    <item time="16" type="Alpha" target="n0_sda6" tween="true" startValue="1" endValue="0" duration="7"/>\n    <item time="23" type="Visible" target="n0_sda6" value="false"/>\n  </transition>\n  <transition name="teach_up">\n    <item time="0" type="Rotation" target="n10_uwv2" value="0"/>\n    <item time="0" type="XY" target="n10_uwv2" value="262,330.15"/>\n  </transition>\n  <transition name="teach_left">\n    <item time="0" type="Rotation" target="n10_uwv2" value="-90"/>\n    <item time="0" type="XY" target="n10_uwv2" value="262,330.15"/>\n  </transition>\n  <transition name="teach_right">\n    <item time="0" type="Rotation" target="n10_uwv2" value="90"/>\n    <item time="0" type="XY" target="n10_uwv2" value="262,330.15"/>\n  </transition>\n  <transition name="teach_down">\n    <item time="0" type="Rotation" target="n10_uwv2" value="180"/>\n    <item time="0" type="XY" target="n10_uwv2" value="149,330"/>\n  </transition>\n  <transition name="game_showProp">\n    <item time="0" type="XY" target="n25_smwe" tween="true" startValue="-670,822" endValue="131,822" duration="8"/>\n    <item time="56" type="XY" target="n25_smwe" tween="true" startValue="131,822" endValue="-670,822" duration="6"/>\n  </transition>\n  <transition name="Ani_SuperStartEndflash">\n    <item time="0" type="Alpha" target="n0_sda6" value="1"/>\n    <item time="0" type="Visible" target="n0_sda6" value="true"/>\n    <item time="10" type="Alpha" target="n0_sda6" tween="true" startValue="1" endValue="0" duration="7"/>\n    <item time="17" type="Visible" target="n0_sda6" value="false"/>\n  </transition>\n  <transition name="Ani_SpeedLine" autoPlayRepeat="-1">\n    <item time="0" type="Visible" target="n17_wlbv" value="true"/>\n    <item time="0" type="Visible" target="n18_wlbv" value="false"/>\n    <item time="1" type="Visible" target="n17_wlbv" value="false"/>\n    <item time="1" type="Visible" target="n18_wlbv" value="true"/>\n    <item time="2" type="Visible" target="n17_wlbv" value="true"/>\n    <item time="2" type="Visible" target="n18_wlbv" value="false"/>\n    <item time="3" type="Visible" target="n18_wlbv" value="true"/>\n    <item time="3" type="Visible" target="n17_wlbv" value="false"/>\n    <item time="4" type="Visible" target="n18_wlbv" value="false"/>\n    <item time="4" type="Visible" target="n17_wlbv" value="true"/>\n    <item time="5" type="Visible" target="n17_wlbv" value="false"/>\n    <item time="5" type="Visible" target="n18_wlbv" value="true"/>\n    <item time="6" type="Visible" target="n17_wlbv" value="true"/>\n    <item time="6" type="Visible" target="n18_wlbv" value="false"/>\n  </transition>\n  <transition name="Ani_SpeedLineHide" autoPlayRepeat="-1">\n    <item time="0" type="Visible" target="n17_wlbv" value="false"/>\n    <item time="0" type="Visible" target="n18_wlbv" value="false"/>\n  </transition>\n  <transition name="tianfufadong" autoPlayRepeat="-1">\n    <item time="0" type="Alpha" target="n22_qkcf" tween="true" startValue="0" endValue="1" duration="6"/>\n    <item time="0" type="Scale" target="n22_qkcf" tween="true" startValue="0,0" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n22_qkcf" tween="true" startValue="1.1,1.1" endValue="1,1" duration="2"/>\n    <item time="48" type="Alpha" target="n22_qkcf" tween="true" startValue="1" endValue="0" duration="6"/>\n    <item time="48" type="Scale" target="n22_qkcf" tween="true" startValue="1,1" endValue="0,0" duration="6"/>\n  </transition>\n  <transition name="watch_in">\n    <item time="0" type="XY" target="n23_hudw" tween="true" startValue="900,909" endValue="559,909" duration="6"/>\n    <item time="0" type="XY" target="n26_spa9" tween="true" startValue="880.52,1044.97" endValue="546,1044" duration="6"/>\n  </transition>\n</component>',"cvkzibg.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n4_m4ob" name="bg" xy="0,-111" size="750,1557" alpha="0.5" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <component id="n3_byss" name="contentHuaBan" src="mk6aian" xy="0,0" pivot="0.5,0.5">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </component>\n  </displayList>\n  <transition name="IN">\n    <item time="0" type="Scale" target="n3_byss" tween="true" startValue="0,0" endValue="1.11,1.11" duration="5"/>\n    <item time="5" type="Scale" target="n3_byss" tween="true" startValue="1.11,1.11" endValue="1,1" duration="2"/>\n  </transition>\n  <transition name="OUT">\n    <item time="0" type="Scale" target="n3_byss" tween="true" startValue="1,1" endValue="1.1,1.1" duration="3"/>\n    <item time="3" type="Scale" target="n3_byss" tween="true" startValue="1.1,1.1" endValue="0,0" duration="5"/>\n  </transition>\n</component>',"cvkzibj.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n3_m4ob" name="bg" xy="0,-192" size="750,1720" alpha="0.5" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <component id="n2_f90n" name="contentDaoJu" src="f90ni58" xy="0,0" pivot="0.5,0.5">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </component>\n  </displayList>\n  <transition name="IN">\n    <item time="0" type="Scale" target="n2_f90n" tween="true" startValue="0,0" endValue="1.11,1.11" duration="5"/>\n    <item time="5" type="Scale" target="n2_f90n" tween="true" startValue="1.11,1.11" endValue="1,1" duration="2"/>\n  </transition>\n  <transition name="OUT">\n    <item time="0" type="Scale" target="n2_f90n" tween="true" startValue="1,1" endValue="1.1,1.1" duration="3"/>\n    <item time="3" type="Scale" target="n2_f90n" tween="true" startValue="1.1,1.1" endValue="0,0" duration="5"/>\n  </transition>\n</component>',"cvkzibk.xml":'<component size="750,1334" adaptationTest="FitSize">\n  <displayList>\n    <graph id="n22_nogh" name="bg" xy="0,-188" size="750,1693" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <graph id="n43_tqlz" name="texTeachKeep" xy="0,-200" size="750,1892" visible="false" alpha="0.5" type="rect" fillColor="#ff000000"/>\n    <loader id="n21_nxh9" name="texBackground" xy="0,0" pivot="0.5,0.5" size="750,1334" align="center" vAlign="middle" fill="scaleMatchWidth">\n      <relation target="" sidePair="width-width,height-height"/>\n    </loader>\n    <image id="n61_ec8l" name="bg2" src="p3j2iam" xy="15,582"/>\n    <component id="n24_oct6" name="btnMoreGame" src="oct6i6y" xy="2,767" pivot="0.5,0.5">\n      <relation target="" sidePair="left-left,bottom-bottom"/>\n    </component>\n    <component id="n4_f90n" name="btnSign" src="f90ni3k" xy="405,1004" visible="false">\n      <relation target="" sidePair="right-right,top-top"/>\n      <Button icon="ui://5fhlcwqaf90ni39"/>\n    </component>\n    <component id="n8_f90n" name="contentCoin" src="f90ni3l" xy="11,45" size="313,64">\n      <relation target="" sidePair="top-top,center-center"/>\n    </component>\n    <component id="n11_f90n" name="btnStart" src="f90ni3o" xy="193,867" pivot="0.5,0.5">\n      <relation target="" sidePair="bottom-bottom,center-center"/>\n    </component>\n    <component id="n39_mq3w" name="btnStart1" src="mq3wi82" xy="193,867"/>\n    <component id="n40_mq3w" name="btnStart2" src="mq3wi80" xy="193,867"/>\n    <component id="n56_l5d5" name="btnStart4" src="f90ni53" xy="193,867" visible="false">\n      <Button title="分享试玩" titleFontSize="50"/>\n    </component>\n    <component id="n12_f90n" name="btnBuild" xy="20,914" visible="false">\n      <relation target="" sidePair="bottom-bottom,left-left"/>\n    </component>\n    <component id="n13_f90n" name="btnGashapon" xy="530,915" visible="false">\n      <relation target="" sidePair="right-right,bottom-bottom"/>\n    </component>\n    <component id="n15_f90n" name="btnBuyPlayer" src="f90ni3r" xy="253,729" visible="false">\n      <relation target="" sidePair="left-left,bottom-bottom"/>\n    </component>\n    <component id="n53_mg17" name="btnHuaban" src="mg17i9c" xy="229,740" pivot="0.5,0.5"/>\n    <component id="n16_f90n" name="btnTryPlayer" src="f90ni3t" xy="290,728" visible="false">\n      <relation target="" sidePair="right-right,bottom-bottom"/>\n      <Button title="Play"/>\n    </component>\n    <component id="n28_py12" name="btnUpgradePlayer" src="py12i71" xy="290,728" visible="false">\n      <relation target="" sidePair="right-right,bottom-bottom"/>\n      <Button title="升级"/>\n    </component>\n    <component id="n29_py12" name="btnPrepareToTryPlayer" src="py12i71" xy="290,728" visible="false">\n      <relation target="" sidePair="right-right,bottom-bottom"/>\n      <Button title="试玩 20:20"/>\n    </component>\n    <list id="n41_hcwg" name="lstPlayer" xy="0,165" size="750,495" layout="row" overflow="scroll" scroll="horizontal" scrollBarFlags="258" defaultItem="ui://5fhlcwqan76bi85" align="center" vAlign="middle" renderOrder="arch">\n      <relation target="" sidePair="center-center,bottom-bottom"/>\n      <item/>\n      <item/>\n      <item/>\n    </list>\n    <loader id="n19_f90n" name="graphPlayerIcon" xy="350,697" pivot="0.5,0.5" size="50,30" visible="false" autoSize="true">\n      <relation target="" sidePair="center-center,bottom-bottom"/>\n    </loader>\n    <list id="n20_f90n" name="lstProp" xy="231,785" size="289,60" visible="false" layout="row" overflow="scroll" colGap="25" defaultItem="ui://5fhlcwqaf90ni3u" align="center" vAlign="middle">\n      <relation target="" sidePair="center-center,bottom-bottom"/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n    </list>\n    <component id="n9_f90n" name="btnToLeft" src="f90ni3n" xy="27,599" group="n42_tqlz">\n      <relation target="" sidePair="left-left,bottom-bottom"/>\n    </component>\n    <component id="n10_f90n" name="btnToRight" src="f90ni3m" xy="680,599" group="n42_tqlz">\n      <relation target="" sidePair="right-right,bottom-bottom"/>\n    </component>\n    <group id="n42_tqlz" name="arrows" xy="27,599" size="696,55" visible="false" advanced="true"/>\n    <component id="n44_up33" name="contentTeach" src="i1fpi7z" xy="355,953" visible="false"/>\n    <list id="n46_wv3d" name="lstScene" xy="-102,301" size="954,518" group="n50_wv3d" layout="row" scroll="both" defaultItem="ui://5fhlcwqawv3di90">\n      <item/>\n      <item/>\n      <item/>\n    </list>\n    <text id="n47_wv3d" name="lbSceneTitle" xy="252,193" size="245,62" group="n50_wv3d" font="方正粗圆简体" fontSize="48" color="#ffffff" autoSize="none" strokeColor="#1a869d" strokeSize="3" text="Please select a scene"/>\n    <component id="n49_wv3d" name="btnUnlock" xy="186,816" group="n50_wv3d"/>\n    <group id="n50_wv3d" name="contnetScene" xy="-102,193" size="954,723" visible="false" advanced="true"/>\n    <component id="n54_rj3m" name="btnGifts" src="rj3mi9t" xy="630,253" visible="false"/>\n    <component id="n2_f90n" name="btnRank" src="f90ni3k" xy="20,129">\n      <relation target="" sidePair="left-left,top-top"/>\n      <Button icon="ui://5fhlcwqaf90ni2y"/>\n    </component>\n    <component id="n25_py12" name="btnMute" src="f90ni3k" xy="20,253">\n      <relation target="" sidePair="left-left,top-top"/>\n      <Button icon="ui://5fhlcwqapy12i6z"/>\n    </component>\n    <component id="n3_f90n" name="btnSound" src="f90ni3k" xy="20,253">\n      <relation target="" sidePair="left-left,top-top"/>\n      <Button icon="ui://5fhlcwqaf90ni3a"/>\n    </component>\n    <component id="n5_f90n" name="btnPublicNumber" src="f90ni3k" xy="325,1000" visible="false">\n      <relation target="" sidePair="right-right,top-top"/>\n      <Button icon="ui://5fhlcwqaf90ni3e"/>\n    </component>\n    <image id="n59_azd2" name="bg3" src="bkkmi7b" xy="10,753" size="730,371" group="n36_bkkm"/>\n    <image id="n60_azd2" name="bg4" src="bkkmi7b" xy="10,753" size="730,371" group="n36_bkkm"/>\n    <image id="n58_azd2" name="bg5" src="bkkmi7b" xy="10,753" size="730,371" group="n36_bkkm"/>\n    <image id="n30_bkkm" name="bg6" src="f90ni33" xy="459,311" size="68,72" group="n36_bkkm"/>\n    <image id="n32_bkkm" name="bg7" src="bkkmi7b" xy="10,753" size="730,371" group="n36_bkkm"/>\n    <image id="n31_bkkm" name="bg8" src="f90ni3x" xy="0,702" size="745,72" group="n36_bkkm"/>\n    <text id="n37_bkkm" name="lbBg" xy="273,706" size="205,61" group="n36_bkkm" font="迷你简大黑" fontSize="50" color="#ffffff" text="Role upgrade"/>\n    <list id="n35_bkkm" name="lstUpgrade" xy="20,802" size="708,323" group="n36_bkkm" lineGap="11" defaultItem="ui://5fhlcwqabkkmi7h">\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n    </list>\n    <component id="n55_kdf8" name="btnCloseUpgrade" src="f90ni47" xy="664,694" group="n36_bkkm"/>\n    <group id="n36_bkkm" name="contentLevelup" xy="0,311" size="745,814" visible="false" advanced="true"/>\n    <component id="n67_mcxg" name="contentHuaBan" src="mcxgibx" xy="543,85" scale="0.8,0.8"/>\n    <component id="n68_famj" name="btn_zp" src="famjicl" xy="635,961"/>\n    <component id="n69_famj" name="btn_ren" src="famjicm" xy="604,109" visible="false"/>\n    <component id="n70_kv5j" name="Com_tianfu" src="famjicx" xy="440,268" pivot="0.5,0.5"/>\n    <component id="n71_zlx1" name="btnMoreGame2" src="oct6i6y" xy="617,767" pivot="0.5,0.5">\n      <relation target="" sidePair="left-left,bottom-bottom"/>\n    </component>\n    <component id="n77_rn02" name="isFenxiang" src="o8w6idk" xy="3,1067" visible="false"/>\n    <image id="n74_rn02" name="list_moregamebg" src="rn02idn" xy="25,1177" size="709,157" group="n78_zd7d" visible="false"/>\n    <list id="n75_rn02" name="list_moregame" xy="0,1189" size="750,130" group="n78_zd7d" layout="row" overflow="scroll" scroll="horizontal" colGap="14" defaultItem="ui://5fhlcwqarn02idp" align="center" vAlign="middle"/>\n    <image id="n76_rn02" name="list_moregameStr" src="rn02ido" xy="318,1148" group="n78_zd7d" visible="false"/>\n    <group id="n78_zd7d" name="moreGamePanel" xy="0,1148" size="750,186" advanced="true"/>\n    <component id="n79_mgy6" name="Btnmianfeijinbi" src="mgy6iep" xy="12,872" visible="false"/>\n  </displayList>\n  <transition name="shake">\n    <item time="0" type="Scale" target="n30_bkkm" tween="true" startValue="1,1" endValue="1.3,1.3" duration="8"/>\n    <item time="8" type="Rotation" target="n30_bkkm" tween="true" startValue="0" endValue="4" duration="2"/>\n    <item time="8" type="Scale" target="n30_bkkm" tween="true" startValue="1.3,1.3" endValue="1.3,1.3" duration="14"/>\n    <item time="10" type="Rotation" target="n30_bkkm" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="12" type="Rotation" target="n30_bkkm" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="14" type="Rotation" target="n30_bkkm" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="16" type="Rotation" target="n30_bkkm" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="18" type="Rotation" target="n30_bkkm" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="20" type="Rotation" target="n30_bkkm" tween="true" startValue="-4" endValue="0" duration="2"/>\n    <item time="22" type="Rotation" target="n30_bkkm" tween="true" startValue="0" endValue="0" duration="5" ease="Circ.Out"/>\n    <item time="22" type="Scale" target="n30_bkkm" tween="true" startValue="1.3,1.3" endValue="1,1" duration="5"/>\n    <item time="48" type="Rotation" target="n30_bkkm" value="0"/>\n  </transition>\n  <transition name="start_shake">\n    <item time="0" type="Scale" target="n11_f90n" tween="true" startValue="1,1" endValue="1.3,1.3" duration="8"/>\n    <item time="8" type="Rotation" target="n11_f90n" tween="true" startValue="0" endValue="4" duration="2"/>\n    <item time="8" type="Scale" target="n11_f90n" tween="true" startValue="1.3,1.3" endValue="1.3,1.3" duration="14"/>\n    <item time="10" type="Rotation" target="n11_f90n" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="12" type="Rotation" target="n11_f90n" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="14" type="Rotation" target="n11_f90n" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="16" type="Rotation" target="n11_f90n" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="18" type="Rotation" target="n11_f90n" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="20" type="Rotation" target="n11_f90n" tween="true" startValue="-4" endValue="0" duration="2"/>\n    <item time="22" type="Rotation" target="n11_f90n" tween="true" startValue="0" endValue="0" duration="5" ease="Circ.Out"/>\n    <item time="22" type="Scale" target="n11_f90n" tween="true" startValue="1.3,1.3" endValue="1,1" duration="5"/>\n    <item time="48" type="Rotation" target="n11_f90n" value="0"/>\n  </transition>\n  <transition name="t2" autoPlay="true" autoPlayRepeat="-1">\n    <item time="0" type="Rotation" target="n24_oct6" value="0"/>\n    <item time="24" type="Rotation" target="n24_oct6" tween="true" startValue="0" endValue="-3" duration="4"/>\n    <item time="28" type="Rotation" target="n24_oct6" tween="true" startValue="-3" endValue="3" duration="4"/>\n    <item time="32" type="Rotation" target="n24_oct6" tween="true" startValue="3" endValue="-3" duration="4"/>\n    <item time="36" type="Rotation" target="n24_oct6" tween="true" startValue="-3" endValue="3" duration="4"/>\n    <item time="40" type="Rotation" target="n24_oct6" tween="true" startValue="3" endValue="-3" duration="4"/>\n    <item time="44" type="Rotation" target="n24_oct6" tween="true" startValue="-3" endValue="3" duration="4"/>\n    <item time="48" type="Rotation" target="n24_oct6" tween="true" startValue="3" endValue="0" duration="6"/>\n  </transition>\n  <transition name="t3" autoPlayRepeat="-1">\n    <item time="0" type="Rotation" target="n53_mg17" value="0"/>\n    <item time="24" type="Rotation" target="n53_mg17" tween="true" startValue="0" endValue="-3" duration="4"/>\n    <item time="28" type="Rotation" target="n53_mg17" tween="true" startValue="-3" endValue="3" duration="4"/>\n    <item time="32" type="Rotation" target="n53_mg17" tween="true" startValue="3" endValue="-3" duration="4"/>\n    <item time="36" type="Rotation" target="n53_mg17" tween="true" startValue="-3" endValue="3" duration="4"/>\n    <item time="40" type="Rotation" target="n53_mg17" tween="true" startValue="3" endValue="-3" duration="4"/>\n    <item time="44" type="Rotation" target="n53_mg17" tween="true" startValue="-3" endValue="3" duration="4"/>\n    <item time="48" type="Rotation" target="n53_mg17" tween="true" startValue="3" endValue="0" duration="6"/>\n  </transition>\n  <transition name="jianyin">\n    <item time="0" type="Alpha" target="n70_kv5j" tween="true" startValue="0" endValue="1" duration="6"/>\n    <item time="0" type="Visible" target="n70_kv5j" value="true"/>\n  </transition>\n  <transition name="t5" autoPlay="true" autoPlayRepeat="-1">\n    <item time="0" type="Rotation" target="n71_zlx1" value="0"/>\n    <item time="0" type="Rotation" target="n24_oct6" value="0"/>\n    <item time="24" type="Rotation" target="n24_oct6" tween="true" startValue="0" endValue="-3" duration="4"/>\n    <item time="24" type="Rotation" target="n71_zlx1" tween="true" startValue="0" endValue="-3" duration="4"/>\n    <item time="28" type="Rotation" target="n24_oct6" tween="true" startValue="-3" endValue="3" duration="4"/>\n    <item time="28" type="Rotation" target="n71_zlx1" tween="true" startValue="-3" endValue="3" duration="4"/>\n    <item time="32" type="Rotation" target="n24_oct6" tween="true" startValue="3" endValue="-3" duration="4"/>\n    <item time="32" type="Rotation" target="n71_zlx1" tween="true" startValue="3" endValue="-3" duration="4"/>\n    <item time="36" type="Rotation" target="n24_oct6" tween="true" startValue="-3" endValue="3" duration="4"/>\n    <item time="36" type="Rotation" target="n71_zlx1" tween="true" startValue="-3" endValue="3" duration="4"/>\n    <item time="40" type="Rotation" target="n71_zlx1" tween="true" startValue="3" endValue="-3" duration="4"/>\n    <item time="40" type="Rotation" target="n24_oct6" tween="true" startValue="3" endValue="-3" duration="4"/>\n    <item time="44" type="Rotation" target="n71_zlx1" tween="true" startValue="-3" endValue="3" duration="4"/>\n    <item time="44" type="Rotation" target="n24_oct6" tween="true" startValue="-3" endValue="3" duration="4"/>\n    <item time="48" type="Rotation" target="n24_oct6" tween="true" startValue="3" endValue="0" duration="6"/>\n    <item time="48" type="Rotation" target="n71_zlx1" tween="true" startValue="3" endValue="0" duration="6"/>\n  </transition>\n</component>',"cvkzibm.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n3_m4ob" name="bg" xy="0,0" size="750,1334" alpha="0.5" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <component id="n2_f90n" name="contentFuHuo" src="iip0i5r" xy="0,0" pivot="0.5,0.5">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </component>\n  </displayList>\n  <transition name="IN">\n    <item time="0" type="Scale" target="n2_f90n" tween="true" startValue="0,0" endValue="1.11,1.11" duration="5"/>\n    <item time="5" type="Scale" target="n2_f90n" tween="true" startValue="1.11,1.11" endValue="1,1" duration="2"/>\n  </transition>\n  <transition name="OUT">\n    <item time="0" type="Scale" target="n2_f90n" tween="true" startValue="1,1" endValue="1.1,1.1" duration="3"/>\n    <item time="3" type="Scale" target="n2_f90n" tween="true" startValue="1.1,1.1" endValue="0,0" duration="5"/>\n  </transition>\n</component>',"cvkzibn.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n3_m4ob" name="bg" xy="0,-254" size="750,1941" alpha="0.5" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <component id="n1_f90n" name="contentQianDao" src="f90ni3v" xy="0,0" pivot="0.5,0.5">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </component>\n  </displayList>\n  <transition name="IN">\n    <item time="0" type="Scale" target="n1_f90n" tween="true" startValue="0,0" endValue="1.11,1.11" duration="5"/>\n    <item time="5" type="Scale" target="n1_f90n" tween="true" startValue="1.11,1.11" endValue="1,1" duration="2"/>\n  </transition>\n  <transition name="OUT">\n    <item time="0" type="Scale" target="n1_f90n" tween="true" startValue="1,1" endValue="1.1,1.1" duration="3"/>\n    <item time="3" type="Scale" target="n1_f90n" tween="true" startValue="1.1,1.1" endValue="0,0" duration="5"/>\n  </transition>\n</component>',"cvkzibo.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n3_m4ob" name="bg" xy="-109,-170" size="984,1686" alpha="0.5" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <component id="n2_f90n" name="contentRank" src="f90ni4b" xy="0,0" pivot="0.5,0.5">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </component>\n  </displayList>\n  <transition name="IN">\n    <item time="0" type="Scale" target="n2_f90n" tween="true" startValue="0,0" endValue="1.11,1.11" duration="5"/>\n    <item time="5" type="Scale" target="n2_f90n" tween="true" startValue="1.11,1.11" endValue="1,1" duration="2"/>\n  </transition>\n  <transition name="OUT">\n    <item time="0" type="Scale" target="n2_f90n" tween="true" startValue="1,1" endValue="1.1,1.1" duration="3"/>\n    <item time="3" type="Scale" target="n2_f90n" tween="true" startValue="1.1,1.1" endValue="0,0" duration="5"/>\n  </transition>\n</component>',"cvkzibp.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n3_m4ob" name="bg" xy="0,-448" pivot="0.5,0.5" size="750,2188" alpha="0.5" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <component id="n2_f90n" name="contentFuHuo" src="f90ni4w" xy="0,0" pivot="0.5,0.5">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </component>\n  </displayList>\n  <transition name="IN">\n    <item time="0" type="Scale" target="n2_f90n" tween="true" startValue="0,0" endValue="1.11,1.11" duration="5"/>\n    <item time="5" type="Scale" target="n2_f90n" tween="true" startValue="1.11,1.11" endValue="1,1" duration="2"/>\n  </transition>\n  <transition name="OUT">\n    <item time="0" type="Scale" target="n2_f90n" tween="true" startValue="1,1" endValue="1.1,1.1" duration="3"/>\n    <item time="3" type="Scale" target="n2_f90n" tween="true" startValue="1.1,1.1" endValue="0,0" duration="5"/>\n  </transition>\n</component>',"cvkzibq.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n3_m4ob" name="bg" xy="0,-314" size="750,1955" alpha="0.8" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <component id="n2_f90n" name="contentScene" src="mg17i9e" xy="0,0" pivot="0.5,0.5">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </component>\n  </displayList>\n  <transition name="IN">\n    <item time="0" type="Scale" target="n2_f90n" tween="true" startValue="0,0" endValue="1.11,1.11" duration="5"/>\n    <item time="5" type="Scale" target="n2_f90n" tween="true" startValue="1.11,1.11" endValue="1,1" duration="2"/>\n  </transition>\n  <transition name="OUT">\n    <item time="0" type="Scale" target="n2_f90n" tween="true" startValue="1,1" endValue="1.1,1.1" duration="3"/>\n    <item time="3" type="Scale" target="n2_f90n" tween="true" startValue="1.1,1.1" endValue="0,0" duration="5"/>\n  </transition>\n</component>',"cvkzibr.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n3_m4ob" name="bg" xy="0,-314" size="750,1955" alpha="0.5" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <component id="n2_f90n" name="contentScore" src="ekmvi7j" xy="0,0" pivot="0.5,0.5">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </component>\n    <component id="n5_rj3m" name="contentGoToSR" src="v54ii96" xy="142,8" scale="0.7,0.7"/>\n    <component id="n6_rn02" name="isFenxiang" src="o8w6idk" xy="2,1035" visible="false"/>\n  </displayList>\n  <transition name="IN">\n    <item time="0" type="Scale" target="n2_f90n" tween="true" startValue="0,0" endValue="1.11,1.11" duration="5"/>\n    <item time="5" type="Scale" target="n2_f90n" tween="true" startValue="1.11,1.11" endValue="1,1" duration="2"/>\n  </transition>\n  <transition name="OUT">\n    <item time="0" type="Scale" target="n2_f90n" tween="true" startValue="1,1" endValue="1.1,1.1" duration="3"/>\n    <item time="3" type="Scale" target="n2_f90n" tween="true" startValue="1.1,1.1" endValue="0,0" duration="5"/>\n  </transition>\n</component>',"cvkzibs.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n4_m4ob" name="bg" xy="0,-182" size="750,1662" alpha="0.5" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <component id="n2_f95y" name="contentDailyGift" src="f95yi69" xy="0,0">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </component>\n  </displayList>\n  <transition name="IN">\n    <item time="0" type="Scale" target="n2_f95y" tween="true" startValue="0,0" endValue="1.11,1.11" duration="5"/>\n    <item time="5" type="Scale" target="n2_f95y" tween="true" startValue="1.11,1.11" endValue="1,1" duration="2"/>\n  </transition>\n  <transition name="OUT">\n    <item time="0" type="Scale" target="n2_f95y" tween="true" startValue="1,1" endValue="1.1,1.1" duration="3"/>\n    <item time="3" type="Scale" target="n2_f95y" tween="true" startValue="1.1,1.1" endValue="0,0" duration="5"/>\n  </transition>\n</component>',"cvkzibt.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n4_m4ob" name="bg" xy="0,-111" size="750,1557" alpha="0.5" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <component id="n3_byss" name="contentPause" src="byssi5o" xy="0,0" pivot="0.5,0.5">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </component>\n  </displayList>\n  <transition name="IN">\n    <item time="0" type="Scale" target="n3_byss" tween="true" startValue="0,0" endValue="1.11,1.11" duration="5"/>\n    <item time="5" type="Scale" target="n3_byss" tween="true" startValue="1.11,1.11" endValue="1,1" duration="2"/>\n  </transition>\n  <transition name="OUT">\n    <item time="0" type="Scale" target="n3_byss" tween="true" startValue="1,1" endValue="1.1,1.1" duration="3"/>\n    <item time="3" type="Scale" target="n3_byss" tween="true" startValue="1.1,1.1" endValue="0,0" duration="5"/>\n  </transition>\n</component>',"d795i8i.xml":'<component size="141,236">\n  <displayList>\n    <image id="n0_f90n" name="bg" src="d795i8j" xy="0,23" pivot="0.5,0.5" size="141,147"/>\n    <image id="n17_kdf8" name="texTip" src="kdf8iac" xy="106,16"/>\n    <text id="n1_f90n" name="lbTitle" xy="97,12" size="61,51" font="迷你简大黑" fontSize="30" color="#ffffff" align="center" vAlign="middle" autoSize="none" text="6"/>\n    <loader id="n3_f90n" name="texIcon" xy="33,53" size="76,85" url="ui://5fhlcwqaf90ni41"/>\n    <component id="n13_d795" name="btnBuy" src="py12i71" xy="0,166">\n      <Button title="500"/>\n    </component>\n    <component id="n20_l5d5" name="btnUse" src="py12i71" xy="0,166">\n      <Button title="Buy"/>\n    </component>\n  </displayList>\n</component>',"d795i8k.xml":'<component size="164,212">\n  <displayList>\n    <image id="n0_f90n" name="bg" src="d795i8n" xy="0,0" pivot="0.5,0.5" size="164,212"/>\n    <image id="n17_d795" name="bg2" src="l5d5iag" xy="38,58" size="88,96"/>\n    <image id="n22_l5d5" name="texRBG" src="l5d5iaf" xy="-12,30"/>\n    <graph id="n19_d795" name="texHead" xy="42,62" size="80,80" lineSize="0" corner="7"/>\n    <text id="n20_d795" name="lbcore" xy="0,156" size="164,45" font="迷你简大黑" fontSize="30" color="#a53e3e" align="center" vAlign="middle" autoSize="none" text="500M&#xA;"/>\n    <text id="n1_f90n" name="lbRank" xy="-8,23" size="61,72" font="hooge 05_55" fontSize="58" color="#ffffff" align="center" vAlign="middle" autoSize="none" text="6"/>\n    <text id="n21_d795" name="lbName" xy="33,0" size="106,36" font="迷你简大黑" fontSize="20" color="#734111" align="center" vAlign="middle" autoSize="none" text="大大大大"/>\n  </displayList>\n</component>',"d795i8p.xml":'<component size="300,240">\n  <displayList>\n    <image id="n17_d795" name="bg" src="kdf8iad" xy="89,6" size="122,125"/>\n    <image id="n22_d795" name="bg2" src="d795i8q" xy="-57,188"/>\n    <graph id="n19_d795" name="texHead" xy="98,15" size="103,103" lineSize="0" corner="7"/>\n    <text id="n20_d795" name="lbScore" xy="328,165" size="165,98" font="FZCuYuan-M03S" fontSize="80" color="#ffffff" vAlign="middle" autoSize="none" strokeColor="#000000" strokeSize="5" text="9"/>\n    <text id="n21_d795" name="lbName" xy="39,136" size="221,36" font="迷你简大黑" fontSize="28" color="#ffffff" align="center" vAlign="middle" autoSize="none" strokeColor="#000000" strokeSize="4" text="大大大大"/>\n  </displayList>\n</component>',"ekmvi7i.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n5_m4ob" name="Gray" xy="0,-288" size="750,1944" alpha="0.5" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <component id="n1_f90n" name="Com_guanggao" src="vre9i77" xy="0,0" pivot="0.5,0.5">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </component>\n  </displayList>\n  <transition name="IN">\n    <item time="0" type="Scale" target="n1_f90n" tween="true" startValue="0,0" endValue="1.11,1.11" duration="5"/>\n    <item time="5" type="Scale" target="n1_f90n" tween="true" startValue="1.11,1.11" endValue="1,1" duration="2"/>\n  </transition>\n  <transition name="OUT">\n    <item time="0" type="Scale" target="n1_f90n" tween="true" startValue="1,1" endValue="1.1,1.1" duration="3"/>\n    <item time="3" type="Scale" target="n1_f90n" tween="true" startValue="1.1,1.1" endValue="0,0" duration="5"/>\n  </transition>\n</component>',"ekmvi7j.xml":'<component size="750,1334">\n  <displayList>\n    <image id="n0_f90n" name="I" src="kdf8ia9" xy="53,141" size="641,736"/>\n    <image id="n29_kdf8" name="n29" src="kdf8iaa" xy="44,208"/>\n    <text id="n8_f90n" name="n8" xy="81,238" pivot="0.5,0.5" size="227,64" skew="-2,-2" font="迷你简大黑" fontSize="52" color="#ffffff" shadowColor="#000000" shadowOffset="1,2" text="Time score:"/>\n    <text id="n2_f90n" name="Text_score" xy="368,240" pivot="0.5,0.5" size="273,65" skew="-4,-4" font="迷你简大黑" fontSize="55" color="#fffd33" autoSize="none" shadowColor="#000000" shadowOffset="1,2" text="568856"/>\n    <list id="n7_f90n" name="List_lingqu" xy="96,490" size="640,228" layout="row" scroll="both" colGap="20" defaultItem="ui://5fhlcwqaf90ni5i">\n      <item/>\n      <item/>\n      <item/>\n    </list>\n    <component id="n19_f90n" name="Btn_dianji" src="f90ni5k" xy="207,722" size="336,35"/>\n    <component id="n26_fzp9" name="Btn_zailai" src="fzp9i8d" xy="266,1042" visible="false"/>\n    <component id="n27_gtjt" name="CoinPlane" src="gtjti8t" xy="186,367"/>\n    <component id="n28_mg17" name="Btn_5588game" src="mg17i9c" xy="70,899" visible="false"/>\n    <component id="n21_fzp9" name="Btn_DoubleCoin" src="f90ni55" xy="75,885" size="303,118">\n      <Button title="Double"/>\n    </component>\n    <component id="n32_o8w6" name="Btn_fanhui" src="o8w6idd" xy="55,39"/>\n    <component id="n33_o8w6" name="Btn_fenxiang" src="o8w6ide" xy="484,895"/>\n    <component id="n34_hnsw" name="Btn_ShareDouble" src="f90ni53" xy="395,895" pivot="0.5,0.5" size="303,118" visible="false">\n      <Button title="分享翻倍"/>\n    </component>\n  </displayList>\n</component>',"f90ni3k.xml":'<component size="94,98" pivot="0.5,0.5" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <loader id="n9_f90n" name="icon" xy="0,0" pivot="0.5,0.5" size="81,81" url="ui://5fhlcwqaf90ni2y"/>\n    <image id="n10_bkkm" name="texTips" src="f90ni33" xy="52,-12" pivot="0.5,0.5" scale="0.7,0.7" visible="false"/>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n9_f90n" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n9_f90n" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n9_f90n" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n9_f90n" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n9_f90n" tween="true" startValue="1,1"/>\n  </transition>\n  <transition name="shake">\n    <item time="0" type="Scale" target="n10_bkkm" tween="true" startValue="0.7,0.7" endValue="1,1" duration="8"/>\n    <item time="8" type="Rotation" target="n10_bkkm" tween="true" startValue="0" endValue="4" duration="2"/>\n    <item time="8" type="Scale" target="n10_bkkm" tween="true" startValue="1,1" endValue="1,1" duration="14"/>\n    <item time="10" type="Rotation" target="n10_bkkm" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="12" type="Rotation" target="n10_bkkm" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="14" type="Rotation" target="n10_bkkm" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="16" type="Rotation" target="n10_bkkm" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="18" type="Rotation" target="n10_bkkm" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="20" type="Rotation" target="n10_bkkm" tween="true" startValue="-4" endValue="0" duration="2"/>\n    <item time="22" type="Rotation" target="n10_bkkm" tween="true" startValue="0" endValue="0" duration="5" ease="Circ.Out"/>\n    <item time="22" type="Scale" target="n10_bkkm" tween="true" startValue="1,1" endValue="0.7,0.7" duration="5"/>\n    <item time="48" type="Rotation" target="n10_bkkm" value="0"/>\n  </transition>\n</component>',"f90ni3l.xml":'<component size="313,64">\n  <displayList>\n    <image id="n36_w1o8" name="bg" src="10ozi3" xy="0,0" pivot="0.5,0.5" size="313,64">\n      <relation target="" sidePair="height-height,width-width"/>\n    </image>\n    <image id="n41_f90n" name="texCoin" src="f90ni38" xy="0,1" pivot="0.5,0.5">\n      <relation target="n36_w1o8" sidePair="center-center,middle-middle"/>\n    </image>\n    <text id="n40_w1o8" name="lbCoin" xy="71,9" size="227,50" font="迷你简大黑" fontSize="40" color="#ffffff" align="right" vAlign="middle" leading="19" letterSpacing="3" autoSize="none" text="9999999">\n      <relation target="" sidePair=""/>\n    </text>\n  </displayList>\n</component>',"f90ni3m.xml":'<component size="43,55" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n8_lqd4" name="bg" src="f90ni2z" xy="0,0" pivot="0.5,0.5" size="43,55">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="5" type="Scale" target="n8_lqd4" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n  </transition>\n</component>',"f90ni3n.xml":'<component size="43,55" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n8_lqd4" name="bg" src="f90ni2x" xy="0,0" pivot="0.5,0.5" size="43,55">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="5" type="Scale" target="n8_lqd4" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n  </transition>\n</component>',"f90ni3o.xml":'<component size="364,142" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="f90ni2w" xy="0,0" pivot="0.5,0.5" size="364,142">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n2_mq3w" name="title" xy="42,15" pivot="0.5,0.5" size="277,101" font="迷你简大黑" fontSize="48" color="#fff1bf" align="center" vAlign="middle" autoSize="none" text="Start">\n      <relation target="" sidePair="width-width,height-height"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n2_mq3w" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n2_mq3w" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n2_mq3w" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n2_mq3w" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n    <item time="7" type="Scale" target="n2_mq3w" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"f90ni3r.xml":'<component size="244,60" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="f90ni3c" xy="0,0" pivot="0.5,0.5" size="244,60">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <image id="n9_f90n" name="texCoin" src="f90ni38" xy="12,6" pivot="0.5,0.5" size="51,38">\n      <relation target="n1" sidePair="left-left,middle-middle"/>\n    </image>\n    <text id="n8_lqd4" name="title" xy="73,-5" pivot="0.5,0.5" size="120,68" font="迷你简大黑" fontSize="28" color="#fff1bf" vAlign="middle" autoSize="none" singleLine="true" text="5000&#xA;">\n      <relation target="n9_f90n" sidePair="left-right,middle-middle"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n9_f90n" tween="true" startValue="0.8,0.8" endValue="0.6,0.6" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n9_f90n" tween="true" startValue="0.6,0.6" endValue="0.9,0.9" duration="4"/>\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n8_lqd4" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n9_f90n" tween="true" startValue="0.9,0.9" endValue="0.8,0.8" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"f90ni3t.xml":'<component size="140,61" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="bh1pi72" xy="0,0" pivot="0.5,0.5" size="140,61">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <image id="n9_bkkm" name="texTip" src="f90ni33" xy="146,-16" pivot="0.5,0.5" scale="0.7,0.7"/>\n    <text id="n8_lqd4" name="title" xy="4,0" pivot="0.5,0.5" size="97,54" font="迷你简大黑" fontSize="24" color="#fff1bf" align="center" vAlign="middle" leading="-2" autoSize="none" text="play50:50">\n      <relation target="" sidePair="width-width,height-height"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n8_lqd4" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n  <transition name="shake">\n    <item time="0" type="Scale" target="n9_bkkm" tween="true" startValue="0.7,0.7" endValue="1,1" duration="8"/>\n    <item time="8" type="Rotation" target="n9_bkkm" tween="true" startValue="0" endValue="4" duration="2"/>\n    <item time="8" type="Scale" target="n9_bkkm" tween="true" startValue="1,1" endValue="1,1" duration="14"/>\n    <item time="10" type="Rotation" target="n9_bkkm" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="12" type="Rotation" target="n9_bkkm" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="14" type="Rotation" target="n9_bkkm" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="16" type="Rotation" target="n9_bkkm" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="18" type="Rotation" target="n9_bkkm" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="20" type="Rotation" target="n9_bkkm" tween="true" startValue="-4" endValue="0" duration="2"/>\n    <item time="22" type="Rotation" target="n9_bkkm" tween="true" startValue="0" endValue="0" duration="5" ease="Circ.Out"/>\n    <item time="22" type="Scale" target="n9_bkkm" tween="true" startValue="1,1" endValue="0.7,0.7" duration="5"/>\n    <item time="48" type="Rotation" target="n9_bkkm" value="0"/>\n  </transition>\n</component>',"f90ni3u.xml":'<component size="51,53">\n  <displayList>\n    <image id="n0_f90n" name="bg" src="f90ni3h" xy="0,0"/>\n    <loader id="n1_f90n" name="texIcon" xy="7,8" size="38,38" url="ui://5fhlcwqaf95yi5s" fill="scale"/>\n  </displayList>\n</component>',"f90ni3v.xml":'<component size="750,1334">\n  <displayList>\n    <image id="n1_f90n" name="n1" src="l5d5iai" xy="52,141" size="645,685"/>\n    <image id="n0_f90n" name="n0" src="f90ni3x" xy="2,166" size="742,75"/>\n    <component id="n2_f90n" name="Btn_guanbi" src="f90ni47" xy="659,176"/>\n    <list id="n4_f90n" name="List_qd" xy="88,266" size="564,437" layout="flow_vt" overflow="scroll" lineGap="10" colGap="22" lineItemCount="2" defaultItem="ui://5fhlcwqaf90ni48">\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n    </list>\n    <text id="n7_f90n" name="n7" xy="222,168" size="305,61" font="迷你简大黑" fontSize="50" color="#ffffff" text="Continuous login to receive the package"/>\n    <component id="n13_l5d5" name="Btn_lingqu" src="mq3wi80" xy="223,847" size="303,118">\n      <Button title="领取奖励" titleFontSize="38"/>\n    </component>\n    <component id="n16_zuli" name="btn_lingqu2" src="lqd4i2r" xy="224,844"/>\n    <component id="n15_zuli" name="n15" src="zuliiel" xy="253,707"/>\n    <component id="n10_mg17" name="Btn_5588game" src="mg17i9c" xy="223,995"/>\n  </displayList>\n</component>',"f90ni47.xml":'<component size="78,86" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="10ozi1a" xy="0,0" pivot="0.5,0.5" size="78,86">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"f90ni48.xml":'<component size="171,201">\n  <displayList>\n    <image id="n0_f90n" name="bg" src="f90ni3w" xy="0,0" pivot="0.5,0.5" size="171,201">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <loader id="n3_f90n" name="texIcon" xy="39,62" size="92,75" url="ui://5fhlcwqaf90ni38">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </loader>\n    <image id="n6_l5d5" name="bg" src="l5d5iak" xy="4,28" pivot="0.5,0.5" size="162,144">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <image id="n4_f90n" name="texCompleted" src="f90ni3z" xy="30,61">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </image>\n    <text id="n5_l5d5" name="lbWc" xy="25,38" size="120,38" font="迷你简大黑" fontSize="30" color="#976e5e" align="center" vAlign="middle" autoSize="none" text="first day">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </text>\n    <text id="n1_f90n" name="lbTitle" xy="25,7" size="120,38" font="迷你简大黑" fontSize="30" color="#ff7e00" align="center" vAlign="middle" autoSize="none" text="first day">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </text>\n  </displayList>\n</component>',"f90ni4b.xml":'<component size="750,1334">\n  <displayList>\n    <image id="n0_f90n" name="n0" src="f90ni44" xy="52,100" size="645,893"/>\n    <image id="n1_f90n" name="n1" src="f90ni3x" xy="3,125" size="742,75"/>\n    <text id="n2_f90n" name="Text_title" xy="296,126" size="155,61" font="迷你简大黑" fontSize="50" color="#ffffff" text="Parkour list "/>\n    <component id="n4_f90n" name="btnClose" src="f90ni47" xy="661,134"/>\n    <list id="n5_f90n" name="lstRank" xy="80,209" size="584,708" lineGap="12" defaultItem="ui://5fhlcwqaf90ni4m">\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n    </list>\n    <component id="n7_qqzb" name="contentMyRank" src="qqzbi7m" xy="81,837"/>\n    <component id="n8_p1gh" name="btnXuanYao" src="lqd4i2r" xy="62,1000" size="303,118" visible="false">\n      <Button title="Show"/>\n    </component>\n    <component id="n9_mg17" name="btn5588" src="mg17i9c" xy="388,1000" visible="false"/>\n  </displayList>\n</component>',"f90ni4m.xml":'<component size="583,76">\n  <displayList>\n    <image id="n0_f90n" name="bg" src="f90ni4j" xy="0,0" size="583,76"/>\n    <image id="n8_kdf8" name="bg2" src="kdf8ia4" xy="10,7"/>\n    <image id="n5_f90n" name="bg3" src="f90ni4g" xy="71,3" size="66,74" scale="0.8,0.8"/>\n    <image id="n6_f90n" name="texHead" src="f90ni4f" xy="74,6" size="58,58" scale="0.8,0.8" visible="false"/>\n    <text id="n2_f90n" name="lbRank" xy="24,12" size="28,50" visible="false" font="迷你简大黑" fontSize="40" color="#ffffff" autoSize="none" text="5"/>\n    <text id="n3_f90n" name="lbName" xy="130,15" size="239,53" visible="false" font="迷你简大黑" fontSize="38" color="#9a2f05" vAlign="middle" autoSize="none" text="名字大名字大名字大"/>\n    <text id="n4_f90n" name="lbScore" xy="376,15" size="208,49" visible="false" font="迷你简大黑" fontSize="38" color="#6f331e" align="center" vAlign="middle" autoSize="none" text="1500000米"/>\n  </displayList>\n</component>',"f90ni4t.xml":'<component size="110,150">\n  <displayList>\n    <image id="n7_mk6a" name="bg" src="mk6aiau" xy="18,31"/>\n    <loader id="n11_lfgx" name="texHead" xy="23,36" size="81,82" fill="scale"/>\n    <image id="n9_mk6a" name="texHave" src="mk6aiat" xy="0,19"/>\n    <image id="n12_u58i" name="texUnhave" src="mk6aiar" xy="7,24"/>\n  </displayList>\n</component>',"f90ni4w.xml":'<component size="750,1334">\n  <displayList>\n    <image id="n0_f90n" name="n0" src="f90ni4h" xy="52,192" size="645,583"/>\n    <text id="n12_f90n" name="Text_title" xy="233,659" pivot="0.5,0.5" size="275,38" visible="false" font="FZCuYuan-M03S" fontSize="29" color="#254263" text="Countdown to watch video resurrection"/>\n    <component id="n4_f90n" name="Btn_guanbi" src="f90ni47" xy="625,181" pivot="0.5,0.5"/>\n    <component id="n14_f90n" name="Btn_lan" visible="false" src="f90ni53" xy="223,928" pivot="0.5,0.5" size="303,118">\n      <Button title="Challenge" titleFontSize="32"/>\n    </component>\n    <component id="n15_f90n" name="Btn_huang" src="f90ni55" xy="223,780" pivot="0.5,0.5" size="303,118">\n      <Button title="Revive"/>\n    </component>\n    <image id="n16_wv3d" name="n16" src="wv3di95" xy="217,294"/>\n    <image id="n8_f90n" name="n8" src="f90ni51" xy="162,479" size="428,46" group="n11_f90n">\n      <relation target="" sidePair="center-center"/>\n    </image>\n    <component id="n9_f90n" name="jindutiao" src="f90ni4y" xy="165,482" size="422,46" group="n11_f90n">\n      <relation target="" sidePair="center-center"/>\n      <ProgressBar value="100" max="100"/>\n    </component>\n    <text id="n10_f90n" name="Text_baifenbi" xy="338,485" size="86,39" group="n11_f90n" font="方正粗圆简体" fontSize="30" color="#ffffff" autoSize="none" strokeColor="#000000" text="100%">\n      <relation target="n9_f90n" sidePair="center-center"/>\n    </text>\n    <group id="n11_f90n" name="loadingBar" xy="162,479" size="428,49" visible="false" advanced="true">\n      <relation target="" sidePair="top-bottom"/>\n    </group>\n    <component id="n17_mg17" name="Btn_5588game" src="mg17i9c" xy="223,861" pivot="0.5,0.5" visible="false"/>\n    <component id="n18_qkcf" name="isFenxiang" src="o8w6idk" xy="2,1051"/>\n    <component id="n23_ydc3" name="Com_next" src="ydc3ie5" xy="75,565"/>\n  </displayList>\n  <transition name="t0" autoPlay="true" autoPlayRepeat="-1">\n    <item time="0" type="Scale" target="n17_mg17" tween="true" startValue="1,1" endValue="1.2,1.2" duration="12"/>\n    <item time="12" type="Scale" target="n17_mg17" tween="true" startValue="1.2,1.2" endValue="1,1" duration="12"/>\n    <item time="24" type="Scale" target="n17_mg17" tween="true" startValue="1,1" endValue="1.2,1.2" duration="12"/>\n    <item time="36" type="Scale" target="n17_mg17" tween="true" startValue="1.2,1.2" endValue="1,1" duration="12"/>\n    <item time="99" type="Scale" target="n17_mg17" value="1,1"/>\n  </transition>\n  <transition name="showTime">\n    <item time="0" type="Scale" target="n4_f90n" value="1,1"/>\n    <item time="0" type="Scale" target="n14_f90n" value="1,1"/>\n    <item time="0" type="Visible" target="n14_f90n" value="false"/>\n    <item time="0" type="Visible" target="n4_f90n" value="false"/>\n    <item time="10" type="Visible" target="n14_f90n" value="false"/>\n    <item time="81" type="Scale" target="n14_f90n" tween="true" startValue="0.7,0.7" endValue="1.1,1.1" duration="2"/>\n    <item time="81" type="Visible" target="n14_f90n" value="true"/>\n    <item time="84" type="Scale" target="n14_f90n" value="1,1"/>\n    <item time="117" type="Scale" target="n4_f90n" tween="true" startValue="0.7,0.7" endValue="1.1,1.1" duration="2"/>\n    <item time="117" type="Visible" target="n4_f90n" value="true"/>\n    <item time="120" type="Scale" target="n4_f90n" value="1,1"/>\n  </transition>\n</component>',"f90ni4y.xml":'<component size="72,40" extention="ProgressBar" mask="n15_ntbl">\n  <displayList>\n    <graph id="n13_ntbl" name="bar" xy="0,3" size="72,46" alpha="0" type="rect" lineSize="0">\n      <relation target="" sidePair="width-width"/>\n    </graph>\n    <image id="n14_ntbl" name="jindutiao1" src="f90ni50" xy="0,0" size="72,40">\n      <relation target="n13_ntbl" sidePair="width-width"/>\n      <relation target="n13_ntbl" sidePair="right-right"/>\n    </image>\n    <image id="n15_ntbl" name="jindutiao12" src="f90ni50" xy="0,0" size="72,40">\n      <relation target="" sidePair="width-width"/>\n    </image>\n  </displayList>\n  <ProgressBar/>\n</component>',"f90ni53.xml":'<component size="364,142" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="f90ni4z" xy="0,0" pivot="0.5,0.5" size="364,142">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n8_lqd4" name="title" xy="0,36" pivot="0.5,0.5" size="364,69" font="迷你简大黑" fontSize="40" color="#fff1bf" align="center" vAlign="middle" ubb="true" autoSize="none" text="标题">\n      <relation target="" sidePair="width-width,height-height"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n8_lqd4" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"f90ni55.xml":'<component size="364,142" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="mq3wi81" xy="0,0" pivot="0.5,0.5" size="364,142">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n8_lqd4" name="title" xy="5,0" pivot="0.5,0.5" size="287,142" font="迷你简大黑" fontSize="40" color="#fff1bf" align="center" vAlign="middle" autoSize="none" text="标题">\n      <relation target="" sidePair="width-width,height-height"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n8_lqd4" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"f90ni58.xml":'<component size="750,1334">\n  <displayList>\n    <image id="n1_f90n" name="n1" src="f90ni44" xy="52,100" pivot="0.5,0.5" size="645,893"/>\n    <image id="n0_f90n" name="n0" src="f90ni3x" xy="3,125" size="742,72"/>\n    <component id="n2_f90n" name="Btn_guanbi" src="f90ni47" xy="661,134" size="87,98"/>\n    <list id="n4_f90n" name="List_qd" xy="87,194" size="579,631" layout="flow_hz" lineGap="-50" colGap="30" lineItemCount="3" defaultItem="ui://5fhlcwqaf90ni59">\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n    </list>\n    <text id="n7_f90n" name="n7" xy="320,125" size="109,61" font="迷你简大黑" fontSize="50" color="#ffffff" text="Prop"/>\n    <component id="n11_mg17" name="Btn_5588game" src="mg17i9c" xy="223,1006"/>\n  </displayList>\n</component>',"f90ni59.xml":'<component size="171,350">\n  <displayList>\n    <image id="n0_f90n" name="bg" src="f90ni3w" xy="0,36" pivot="0.5,0.5" size="171,201"/>\n    <component id="n5_f90n" name="content" src="f90ni5b" xy="16,49"/>\n    <text id="n1_f90n" name="lbTitle" xy="17,179" size="137,27" font="迷你简大黑" fontSize="18" color="#884d2f" align="center" vAlign="middle" leading="0" letterSpacing="-2" autoSize="none" text="Start to get invincible">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </text>\n  </displayList>\n</component>',"f90ni5b.xml":'<component size="140,245">\n  <displayList>\n    <loader id="n1_f90n" name="texIcon" xy="32,40" pivot="0.5,0.5" size="76,74" url="ui://5fhlcwqaf90ni41" fill="scale"/>\n    <image id="n15_l5d5" name="texTip" src="kdf8iac" xy="129,-8"/>\n    <component id="n7_f90n" name="btnCoini" xy="177,50" size="163,80"/>\n    <text id="n9_bkkm" name="lbNum" xy="17,8" pivot="0.5,0.5" size="105,31" font="迷你简大黑" fontSize="24" color="#ff7e00" align="center" vAlign="middle" autoSize="none" text="x200"/>\n    <component id="n11_l5d5" name="btnUse" src="py12i71" xy="0,184">\n      <Button title="使用"/>\n    </component>\n    <component id="n12_l5d5" name="btnTry" src="f90ni3t" xy="0,184" size="140,61">\n      <Button title="免费"/>\n    </component>\n    <component id="n14_l5d5" name="btnTrying" src="py12i71" xy="0,184" grayed="true">\n      <Button title="已使用"/>\n    </component>\n  </displayList>\n</component>',"f90ni5i.xml":'<component size="172,222">\n  <displayList>\n    <image id="n0_f90n" name="bg" src="f90ni3w" xy="0,0" pivot="0.5,0.5" size="172,222"/>\n    <image id="n5_f90n" name="bg2" src="f90ni4g" xy="53,59"/>\n    <image id="n6_f90n" name="texHead" src="f90ni4f" xy="57,63" visible="false"/>\n    <text id="n3_f90n" name="lbName" xy="84,134" pivot="0.5,1" size="198,36" visible="false" font="迷你简大黑" fontSize="22" color="#884d2f" align="center" vAlign="middle" autoSize="none" text="名字大"/>\n    <text id="n4_f90n" name="lbScore" xy="84,170" size="203,24" visible="false" font="迷你简大黑" fontSize="18" color="#842222" align="center" vAlign="middle" autoSize="none" text="1500000米"/>\n    <text id="n7_th0n" name="lbRank" xy="86,14" size="95,39" visible="false" font="迷你简大黑" fontSize="30" color="#ff7e00" align="center" vAlign="middle" autoSize="none" text="First place"/>\n  </displayList>\n</component>',"f90ni5k.xml":'<component size="336,35" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="f90ni5h" xy="0,0" pivot="0.5,0.5" size="336,35">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"f95yi6p.xml":'<component size="221,40">\n  <displayList>\n    <text id="n25_iip0" name="bg" xy="6,-2" size="211,50" font="迷你简大黑" fontSize="40" color="#ffffff" underline="true" text="Skip>>"/>\n  </displayList>\n</component>',"famjic6.xml":'<component size="750,1134">\n  <displayList>\n    <image id="n0_famj" name="n0" src="famjich" xy="20,101" size="709,971"/>\n    <image id="n1_famj" name="n1" src="f90ni3x" xy="4,124" size="742,75"/>\n    <text id="n2_famj" name="Text_title" xy="250,125" size="105,61" font="迷你简大黑" fontSize="50" color="#ffffff"  text="Skateboard"/>\n    <image id="n4_famj" name="n4" src="famjica" xy="50,735" size="650,97"/>\n    <image id="n5_famj" name="n5" src="famjic8" xy="223,651" size="304,73"/>\n    <image id="n7_famj" name="n7" src="famjic9" xy="52,692"/>\n    <text id="n6_famj" name="Text_name" xy="180,650" size="400,61" font="迷你简大黑" fontSize="40" color="#a66407" align="center" vAlign="middle" autoSize="none" text="Skateboard name"/>\n    <text id="n8_famj" name="Text_1" xy="63,694" size="77,45" font="迷你简大黑" fontSize="34" color="#8c551f" text="skill"/>\n    <text id="n9_famj" name="Text_talent" xy="64,757" size="619,45" font="迷你简大黑" fontSize="36" color="#fff0e4" autoSize="none" text="Talent description"/>\n    <component id="n15_famj" name="btnGetHuaban" src="famjicc" xy="46,880">\n      <Button title="Buy"/>\n    </component>\n    <component id="n32_fs6g" name="btnGetHuaban2" src="fs6gida" xy="46,880">\n      <Button title="去获得"/>\n    </component>\n    <component id="n17_famj" name="btnShare" src="famjice" xy="507,880">\n      <Button title="Show" titleFontSize="30"/>\n    </component>\n    <component id="n3_famj" name="btnClose" src="f90ni47" xy="662,133"/>\n    <list id="n19_fs6g" name="huabanList" xy="44,216" size="661,424" layout="row" overflow="scroll" scroll="horizontal" scrollBarFlags="258" defaultItem="ui://5fhlcwqafs6gid8" align="center" vAlign="middle" renderOrder="arch">\n      <relation target="" sidePair="center-center,bottom-bottom"/>\n      <item/>\n      <item/>\n      <item/>\n    </list>\n    <component id="n35_yqmd" name="btnUse" src="t2jnic5" xy="256,878" size="237,93">\n      <Button title="Pick" titleFontSize="36"/>\n    </component>\n    <component id="n36_yqmd" name="btnUsed" src="yqmdidu" xy="256,878" size="237,93" touchable="false">\n      <Button title="Selected" titleFontSize="36"/>\n    </component>\n    <component id="n38_qro6" name="selectTip" src="qro6idv" xy="421,555"/>\n    <component id="n40_qkcf" name="selectTipL" src="qro6idv" xy="193,555"/>\n    <component id="n41_qkcf" name="selectTipR" src="qro6idv" xy="632,555"/>\n    <text id="n39_qro6" name="lbTimer" xy="279,841" pivot="0.5,0.5" size="173,31" font="迷你简大黑" fontSize="24" color="#d58200" letterSpacing="2" text="the remaining time20:20">\n      <relation target="" sidePair=""/>\n    </text>\n    <component id="n42_mgy6" name="btnTry" src="mq3wi80" xy="256,880" scale="0.65,0.65"/>\n    <component id="n44_hnsw" name="btnShareTry" src="f90ni3o" xy="256,880" scale="0.65,0.65" visible="false">\n      <Button title="分享试玩"/>\n    </component>\n  </displayList>\n</component>',"famjicc.xml":'<component size="197,89" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="famjicb" xy="0,0" pivot="0.5,0.5" size="197,89">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n2_mq3w" name="title" xy="25,22" pivot="0.5,0.5" size="146,45" font="迷你简大黑" fontSize="36" color="#fff1bf" align="center" vAlign="middle" letterSpacing="2" autoSize="none" text="Play">\n      <relation target="" sidePair="width-width,height-height"/>\n    </text>\n    <image id="n3_famj" name="icon" src="k6rcid6" xy="15,-37" size="59,60" scale="0.6,0.6"/>\n    <text id="n4_famj" name="value" xy="59,-44" pivot="0.5,0.5" size="146,45" font="迷你简大黑" fontSize="28" color="#d58200" vAlign="bottom" letterSpacing="2" autoSize="none" text="10000">\n      <relation target="n1" sidePair="width-width,height-height"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n2_mq3w" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n2_mq3w" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="4" type="Scale" target="n2_mq3w" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n2_mq3w" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n2_mq3w" tween="true" startValue="1,1"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"famjice.xml":'<component size="197,89" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="famjicd" xy="0,0" pivot="0.5,0.5" size="197,89">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n2_mq3w" name="title" xy="25,22" pivot="0.5,0.5" size="146,45" font="迷你简大黑" fontSize="36" color="#fff1bf" align="center" vAlign="middle" letterSpacing="2" autoSize="none" text="Play">\n      <relation target="" sidePair="width-width,height-height"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n2_mq3w" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n2_mq3w" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="4" type="Scale" target="n2_mq3w" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n2_mq3w" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n2_mq3w" tween="true" startValue="1,1"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"famjicf.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n3_m4ob" name="bg" xy="0,0" size="750,1334" alpha="0.5" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <component id="n2_f90n" name="contentFuHuo" src="famjic6" xy="0,0" pivot="0.5,0.5">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </component>\n    <component id="n4_rn02" name="isFenxiang" src="o8w6idk" xy="51,992" scale="0.8,0.8"/>\n  </displayList>\n  <transition name="IN">\n    <item time="0" type="Scale" target="n2_f90n" tween="true" startValue="0,0" endValue="1.11,1.11" duration="5"/>\n    <item time="5" type="Scale" target="n2_f90n" tween="true" startValue="1.11,1.11" endValue="1,1" duration="2"/>\n  </transition>\n  <transition name="OUT">\n    <item time="0" type="Scale" target="n2_f90n" tween="true" startValue="1,1" endValue="1.1,1.1" duration="3"/>\n    <item time="3" type="Scale" target="n2_f90n" tween="true" startValue="1.1,1.1" endValue="0,0" duration="5"/>\n  </transition>\n</component>',"famjicl.xml":'<component size="102,138" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="famjicj" xy="0,0" pivot="0.5,0.5" size="102,138">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"famjicm.xml":'<component size="132,145" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="famjick" xy="0,0" pivot="0.5,0.5" size="132,145">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"famjics.xml":'<component size="750,1334">\n  <displayList>\n    <image id="n0_famj" name="n0" src="famjicq" xy="145,67"/>\n    <text id="n1_famj" name="Text_title" xy="268,85" size="213,64" font="迷你简大黑" fontSize="52" color="#ffffff" text="Festive turntable"/>\n    <component id="n3_famj" name="Com_qian_1" src="famjict" xy="123,199">\n      <Label icon="ui://5fhlcwqaf90ni38"/>\n    </component>\n    <component id="n4_famj" name="Com_qian_2" src="famjict" xy="378,199">\n      <Label icon="ui://5fhlcwqafamjicu"/>\n    </component>\n    <component id="n11_k6rc" name="Com_lunpan" src="k6rcid2" xy="140,350" pivot="0.5,0.5" size="470,470" scale="1.04,1.04"/>\n    <image id="n10_k6rc" name="ranbg" src="k6rcicy" xy="76,285" pivot="0.5,0.5" size="598,598"/>\n    <image id="n6_famj" name="go" src="famjico" xy="310,490"/>\n    <component id="n9_famj" name="Btn_guanbi" src="f90ni47" xy="659,133"/>\n    <component id="n8_famj" name="btn_haoyou" src="famjice" xy="391,949" size="298,114">\n      <Button title="好友助力" titleFontSize="34"/>\n    </component>\n    <component id="n14_kfet" name="btn_free" src="kfetieq" xy="391,949" size="298,114">\n      <Button title="免费转一次"/>\n    </component>\n    <component id="n15_kfet" name="btn_kan" src="f90ni55" xy="53,945" pivot="0.5,0.5" size="303,118">\n      <Button title="转一次"/>\n    </component>\n  </displayList>\n  <transition name="t1">\n    <item time="0" type="Rotation" target="n11_k6rc" value="0"/>\n  </transition>\n</component>',"famjict.xml":'<component size="250,63" extention="Label">\n  <displayList>\n    <image id="n36_w1o8" name="bg" src="famjicp" xy="0,0" pivot="0.5,0.5" size="250,63">\n      <relation target="" sidePair="height-height,width-width"/>\n    </image>\n    <loader id="n41_f90n" name="icon" xy="-2,3" pivot="0.5,0.5" size="70,61" url="ui://5fhlcwqafamjicu" fill="scale">\n      <relation target="n36_w1o8" sidePair="center-center,middle-middle"/>\n    </loader>\n    <text id="n40_w1o8" name="lbValue" xy="56,9" pivot="0.5,0.5" size="178,50" font="迷你简大黑" fontSize="38" color="#ffffff" align="right" vAlign="middle" leading="17" autoSize="none" text="99999">\n      <relation target="" sidePair=""/>\n    </text>\n  </displayList>\n  <transition name="icon" autoPlayRepeat="-1">\n    <item time="0" type="Scale" target="n41_f90n" tween="true" startValue="1,1" endValue="2,2" duration="9"/>\n    <item time="9" type="Scale" target="n41_f90n" tween="true" startValue="2,2" endValue="1,1" duration="8"/>\n    <item time="17" type="Scale" target="n41_f90n" tween="true" startValue="1,1" endValue="2,2" duration="9"/>\n    <item time="26" type="Scale" target="n41_f90n" tween="true" startValue="2,2" endValue="1,1" duration="10"/>\n  </transition>\n  <transition name="dikuang" autoPlayRepeat="-1">\n    <item time="0" type="Scale" target="n40_w1o8" value="1,1"/>\n    <item time="0" type="Scale" target="n36_w1o8" value="1,1"/>\n    <item time="24" type="Scale" target="n36_w1o8" value="1,1"/>\n    <item time="24" type="Scale" target="n40_w1o8" value="1,1"/>\n  </transition>\n</component>',"famjicv.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n4_m4ob" name="bg" xy="0,-111" size="750,1557" alpha="0.5" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <component id="n3_byss" name="contentHuaBan" src="famjics" xy="0,0" pivot="0.5,0.5">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </component>\n  </displayList>\n  <transition name="IN">\n    <item time="0" type="Scale" target="n3_byss" tween="true" startValue="0,0" endValue="1.11,1.11" duration="5"/>\n    <item time="5" type="Scale" target="n3_byss" tween="true" startValue="1.11,1.11" endValue="1,1" duration="2"/>\n  </transition>\n  <transition name="OUT">\n    <item time="0" type="Scale" target="n3_byss" tween="true" startValue="1,1" endValue="1.1,1.1" duration="3"/>\n    <item time="3" type="Scale" target="n3_byss" tween="true" startValue="1.1,1.1" endValue="0,0" duration="5"/>\n  </transition>\n</component>',"famjicx.xml":'<component size="233,137">\n  <displayList>\n    <image id="n0_famj" name="n0" src="famjicw" xy="0,-1" pivot="0.5,0.5" scale="-1,1"/>\n    <text id="n1_famj" name="title" xy="8,4" pivot="0.5,0.5" size="220,86" font="迷你简大黑" fontSize="23" color="#8d541c" vAlign="middle" leading="2" letterSpacing="4" autoSize="none" text="Skateboard attribute description text"/>\n  </displayList>\n</component>',"fs6gid8.xml":'<component size="222,424" pivot="0.5,1">\n  <displayList>\n    <graph id="n1_fs6g" name="holder" xy="0,116" size="222,289" visible="false" type="rect" lineSize="0"/>\n    <loader id="n2_fs6g" name="holderIcon" xy="-111,-35" size="445,491" fill="scale"/>\n  </displayList>\n  <transition name="t0" autoPlayRepeat="-1"/>\n</component>',"fs6gid9.xml":'<component size="197,89" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="famjicb" xy="0,0" pivot="0.5,0.5" size="197,89">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n2_mq3w" name="title" xy="25,22" pivot="0.5,0.5" size="146,45" font="迷你简大黑" fontSize="36" color="#fff1bf" align="center" vAlign="middle" letterSpacing="2" autoSize="none" text="Play">\n      <relation target="" sidePair="width-width,height-height"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n2_mq3w" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n2_mq3w" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="4" type="Scale" target="n2_mq3w" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n2_mq3w" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n2_mq3w" tween="true" startValue="1,1"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"fs6gida.xml":'<component size="197,89" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="famjicb" xy="0,0" pivot="0.5,0.5" size="197,89">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n2_mq3w" name="title" xy="25,22" pivot="0.5,0.5" size="146,45" font="迷你简大黑" fontSize="36" color="#fff1bf" align="center" vAlign="middle" letterSpacing="2" autoSize="none" text="Play">\n      <relation target="" sidePair="width-width,height-height"/>\n    </text>\n    <image id="n3_famj" name="icon" src="k6rcid3" xy="10,-41" scale="0.6,0.6"/>\n    <text id="n4_famj" name="value" xy="59,-44" pivot="0.5,0.5" size="146,45" font="迷你简大黑" fontSize="28" color="#d58200" vAlign="middle" letterSpacing="2" autoSize="none" text="10000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n2_mq3w" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n2_mq3w" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="4" type="Scale" target="n2_mq3w" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n2_mq3w" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n2_mq3w" tween="true" startValue="1,1"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"fzp9i8d.xml":'<component size="217,41" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="fzp9i87" xy="0,0" pivot="0.5,0.5" size="217,41">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"fzp9i8f.xml":'<component size="210,64">\n  <displayList>\n    <image id="n36_w1o8" name="bg" src="10ozi3" xy="0,0" pivot="0.5,0.5" size="210,64">\n      <relation target="" sidePair="height-height,width-width"/>\n    </image>\n    <text id="n40_w1o8" name="lbScore" xy="52,13" size="105,38" font="迷你简大黑" fontSize="30" color="#ffffff" align="center" vAlign="middle" leading="19" autoSize="none" text="9999999">\n      <relation target="n36_w1o8" sidePair="center-center,middle-middle"/>\n    </text>\n    <text id="n42_bh1p" name="lbMul" xy="3,0" size="88,64" visible="false" font="ui://5fhlcwqa10ozij" fontSize="60" text="x5"/>\n  </displayList>\n</component>',"gtjti8t.xml":'<component size="360,65">\n  <displayList>\n    <image id="n42_gtjt" name="texCoin" src="f90ni38" xy="231,3" pivot="0.5,0.5" size="83,61" scale="1.2,1.2"/>\n    <text id="n43_gtjt" name="lbCoin" xy="14,-5" pivot="0.5,0.5" size="189,84" font="迷你简大黑" fontSize="70" color="#9a2f05" align="right" vAlign="middle" autoSize="none" text="+565">\n      <relation target="n42_gtjt" sidePair="left-right,middle-middle"/>\n    </text>\n  </displayList>\n  <transition name="text">\n    <item time="0" type="Scale" target="n43_gtjt" tween="true" startValue="1,1" endValue="1.2,1.2" duration="5"/>\n    <item time="0" type="Size" target="n42_gtjt" tween="true" startValue="83,61" endValue="108,79" duration="5"/>\n    <item time="5" type="Scale" target="n43_gtjt" tween="true" startValue="1.2,1.2" endValue="1.2,1.2" duration="20"/>\n    <item time="5" type="Size" target="n42_gtjt" tween="true" startValue="108,79" endValue="108,79" duration="20"/>\n    <item time="25" type="Scale" target="n43_gtjt" tween="true" startValue="1.2,1.2" endValue="0.8,0.8" duration="3"/>\n    <item time="25" type="Size" target="n42_gtjt" tween="true" startValue="108,79" endValue="66,53" duration="3"/>\n    <item time="28" type="Scale" target="n43_gtjt" tween="true" startValue="0.8,0.8" endValue="1,1" duration="4"/>\n    <item time="28" type="Size" target="n42_gtjt" tween="true" startValue="66,53" endValue="83,61" duration="4"/>\n  </transition>\n</component>',"hudwie7.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n3_m4ob" name="Gray" xy="0,-254" size="750,1941" alpha="0.01" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <component id="n1_f90n" name="Com_qiandao" src="hudwie8" xy="0,0" pivot="0.5,0.5">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </component>\n  </displayList>\n  <transition name="IN">\n    <item time="0" type="Scale" target="n1_f90n" tween="true" startValue="0,0" endValue="1.11,1.11" duration="5"/>\n    <item time="5" type="Scale" target="n1_f90n" tween="true" startValue="1.11,1.11" endValue="1,1" duration="2"/>\n  </transition>\n  <transition name="OUT">\n    <item time="0" type="Scale" target="n1_f90n" tween="true" startValue="1,1" endValue="1.1,1.1" duration="3"/>\n    <item time="3" type="Scale" target="n1_f90n" tween="true" startValue="1.1,1.1" endValue="0,0" duration="5"/>\n  </transition>\n</component>',"hudwie8.xml":'<component size="750,1334">\n  <displayList>\n    <image id="n0_f90n" name="n0" src="10ozi3" xy="100,601" pivot="0.5,0.5" size="545,69"/>\n    <text id="n12_f90n" name="Text_title" xy="102,599" pivot="0.5,0.5" size="547,77" font="FZCuYuan-M03S" fontSize="32" align="center" vAlign="middle" autoSize="none" text="The video has been exhausted today"/>\n  </displayList>\n</component>',"hudwiec.xml":'<component size="164,150">\n  <displayList>\n    <image id="n17_d795" name="bg2" src="l5d5iag" xy="38,1" size="88,96"/>\n    <image id="n26_tg0b" name="texLight" src="cvkzibw" xy="-63,-71" pivot="0.5,0.5" scale="0.4,0.4"/>\n    <component id="n24_hudw" name="btn_kanshipin" src="bkkmi78" xy="2,83">\n      <Button title="Watch the video" titleFontSize="20"/>\n    </component>\n    <image id="n25_smwe" name="icon" src="mk6aiaq" xy="-76,-28" pivot="0.5,0.5" scale="0.35,0.35" skew="-20,-20"/>\n  </displayList>\n  <transition name="t0" autoPlay="true" autoPlayRepeat="-1">\n    <item time="0" type="Rotation" target="n26_tg0b" tween="true" startValue="0" endValue="360" duration="72" ease="Linear"/>\n    <item time="0" type="Scale" target="n25_smwe" tween="true" startValue="0.35,0.35" endValue="0.5,0.5" duration="5"/>\n    <item time="5" type="Scale" target="n25_smwe" tween="true" startValue="0.5,0.5" endValue="0.35,0.35" duration="5"/>\n    <item time="10" type="Scale" target="n25_smwe" tween="true" startValue="0.35,0.35" endValue="0.4,0.4" duration="5"/>\n    <item time="15" type="Scale" target="n25_smwe" tween="true" startValue="0.4,0.4" endValue="0.35,0.35" duration="5"/>\n    <item time="72" type="Scale" target="n25_smwe" value="0.35,0.35"/>\n  </transition>\n</component>',"i1fpi7w.xml":'<component size="350,500" pivot="0.5,0.5">\n  <displayList>\n    <image id="n0_twvi" name="n0" src="i1fpi7v" xy="28,25" pivot="0.5,0.5"/>\n    <image id="n1_twvi" name="n1" src="i1fpi7v" xy="28,108" pivot="0.5,0.5"/>\n    <image id="n2_twvi" name="n2" src="i1fpi7v" xy="28,191" pivot="0.5,0.5"/>\n    <image id="n3_hmbl" name="n3" src="i1fpi7u" xy="212,290"/>\n  </displayList>\n  <transition name="Move" autoPlay="true" autoPlayRepeat="-1">\n    <item time="0" type="Alpha" target="n3_hmbl" tween="true" startValue="1" endValue="1" duration="19"/>\n    <item time="0" type="Alpha" target="n2_twvi" tween="true" startValue="1" endValue="0.5" duration="5"/>\n    <item time="0" type="Alpha" target="n1_twvi" tween="true" startValue="0" endValue="1" duration="5"/>\n    <item time="0" type="Alpha" target="n0_twvi" tween="true" startValue="0" endValue="0" duration="5"/>\n    <item time="0" type="XY" target="n3_hmbl" tween="true" startValue="212,290" endValue="212,290" duration="6"/>\n    <item time="5" type="Alpha" target="n1_twvi" tween="true" startValue="1" endValue="1" duration="5"/>\n    <item time="5" type="Alpha" target="n2_twvi" tween="true" startValue="0.5" endValue="0.2" duration="5"/>\n    <item time="5" type="Alpha" target="n0_twvi" tween="true" startValue="0" endValue="0.5" duration="5"/>\n    <item time="6" type="XY" target="n3_hmbl" tween="true" startValue="212,290" endValue="212,22" duration="9"/>\n    <item time="10" type="Alpha" target="n2_twvi" tween="true" startValue="0.2" endValue="0.2" duration="5"/>\n    <item time="10" type="Alpha" target="n1_twvi" tween="true" startValue="1" endValue="0.5" duration="5"/>\n    <item time="10" type="Alpha" target="n0_twvi" tween="true" startValue="0.5" endValue="1" duration="5"/>\n    <item time="15" type="Alpha" target="n2_twvi" tween="true" startValue="0.2" endValue="0" duration="4"/>\n    <item time="15" type="Alpha" target="n1_twvi" tween="true" startValue="0.5" endValue="0.2" duration="4"/>\n    <item time="15" type="Alpha" target="n0_twvi" tween="true" startValue="1" endValue="0.5" duration="4"/>\n    <item time="15" type="XY" target="n3_hmbl" tween="true" startValue="212,22" endValue="212,22" duration="7" ease="Expo.Out"/>\n    <item time="19" type="Alpha" target="n0_twvi" tween="true" startValue="0.5" endValue="0.2" duration="4"/>\n    <item time="19" type="Alpha" target="n3_hmbl" tween="true" startValue="1" endValue="0" duration="7"/>\n    <item time="19" type="Alpha" target="n2_twvi" tween="true" startValue="0" endValue="0" duration="4"/>\n    <item time="19" type="Alpha" target="n1_twvi" tween="true" startValue="0.2" endValue="0" duration="4"/>\n    <item time="23" type="Alpha" target="n1_twvi" tween="true" startValue="0" endValue="0" duration="3"/>\n    <item time="23" type="Alpha" target="n0_twvi" tween="true" startValue="0.2" endValue="0" duration="3"/>\n    <item time="23" type="Alpha" target="n2_twvi" tween="true" startValue="0" endValue="0" duration="3"/>\n  </transition>\n</component>',"i1fpi7z.xml":'<component size="150,150" pivot="0.8,0.5">\n  <displayList>\n    <image id="n3_hmbl" name="hand" src="i1fpi7u" xy="10,3" pivot="0.2,0.2"/>\n  </displayList>\n  <transition name="chuo" autoPlay="true" autoPlayRepeat="-1">\n    <item time="0" type="Scale" target="n3_hmbl" tween="true" startValue="1,1" endValue="0.7,0.7" duration="5"/>\n    <item time="5" type="Scale" target="n3_hmbl" tween="true" startValue="0.7,0.7" endValue="1,1" duration="4"/>\n  </transition>\n</component>',"i447ic2.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n4_m4ob" name="bg" xy="0,-111" size="750,1557" alpha="0.8" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <image id="n5_i447" name="texGuangyun" src="cvkzibw" xy="128,242" pivot="0.5,0.5" size="497,474"/>\n    <loader id="n6_i447" name="texHuabanIcon" xy="178,386" size="362,209" url="ui://5fhlcwqamk6aiaq" fill="scale"/>\n    <component id="n8_i447" name="btnSure" src="f90ni3o" xy="231,804" size="293,114">\n      <Button title="OK " titleFontSize="30"/>\n    </component>\n    <image id="n9_i447" name="n9" src="i447ic4" xy="178,213"/>\n  </displayList>\n  <transition name="IN"/>\n  <transition name="OUT"/>\n  <transition name="t2" autoPlay="true" autoPlayRepeat="-1">\n    <item time="0" type="Rotation" target="n5_i447" tween="true" startValue="0" endValue="360" duration="72" ease="Linear"/>\n  </transition>\n</component>',"iip0i5r.xml":'<component size="750,1334">\n  <displayList>\n    <image id="n0_f90n" name="n0" src="f90ni4h" xy="52,180" size="645,477"/>\n    <text id="n2_f90n" name="Text_mes" xy="247,351" pivot="0.5,0.5" size="261,74" font="迷你简大黑" fontSize="62" color="#9a2f05" text="Continue the game"/>\n    <component id="n20_mg17" name="Btn_5588game" src="mg17i9c" xy="223,871"/>\n    <component id="n22_l5d5" name="btn_share" src="f90ni53" xy="47,693" size="303,118">\n      <Button title="分享"/>\n    </component>\n    <component id="n23_l5d5" name="btn_resume" src="lqd4i2r" xy="400,693">\n      <Button title="继续"/>\n    </component>\n  </displayList>\n</component>',"k6rcid2.xml":'<component size="470,470">\n  <displayList>\n    <component id="n4_k6rc" name="one" src="k6rcid7" xy="117,0"/>\n    <component id="n5_k6rc" name="two" src="k6rcid7" xy="380,15" skew="60,60"/>\n    <component id="n6_k6rc" name="three" src="k6rcid7" xy="498,250" skew="120,120"/>\n    <component id="n7_k6rc" name="four" src="k6rcid7" xy="354,470" skew="180,180"/>\n    <component id="n9_k6rc" name="five" src="k6rcid7" xy="91,455" skew="240,240"/>\n    <component id="n10_k6rc" name="six" src="k6rcid7" xy="-27,220" skew="300,300"/>\n  </displayList>\n</component>',"k6rcid7.xml":'<component size="236,237">\n  <displayList>\n    <loader id="n0_k6rc" name="Img_lp_bg" xy="0,0" size="236,237" url="ui://5fhlcwqak6rcid1"/>\n    <loader id="n1_k6rc" name="icon" xy="73,9" size="89,71" url="ui://5fhlcwqak6rcid5" align="center" vAlign="middle"/>\n    <text id="n2_k6rc" name="title" xy="87,98" pivot="0.5,0.5" size="53,40" font="迷你简大黑" fontSize="32" color="#975500" align="center" vAlign="middle" text="x99"/>\n  </displayList>\n</component>',"kfetieq.xml":'<component size="364,142" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="f90ni4z" xy="0,0" pivot="0.5,0.5" size="364,142">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n8_lqd4" name="title" xy="0,36" pivot="0.5,0.5" size="364,69" font="迷你简大黑" fontSize="40" color="#fff1bf" align="center" vAlign="middle" ubb="true" autoSize="none" text="标题">\n      <relation target="" sidePair="width-width,height-height"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n8_lqd4" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"lqd4i2n.xml":'<component size="244,60" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="f90ni3c" xy="0,0" pivot="0.5,0.5" size="244,60">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n8_lqd4" name="title" xy="0,7" pivot="0.5,0.5" size="244,36" font="迷你简大黑" fontSize="28" color="#ffffff" align="center" vAlign="middle" letterSpacing="4" autoSize="none" text="标题">\n      <relation target="" sidePair="width-width,height-height"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n8_lqd4" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"lqd4i2r.xml":'<component size="303,118" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="f90ni2w" xy="0,0" pivot="0.5,0.5" size="303,118">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n8_lqd4" name="title" xy="0,0" pivot="0.5,0.5" size="303,118" font="迷你简大黑" fontSize="40" color="#fff1bf" align="center" vAlign="middle" autoSize="none" text="标题">\n      <relation target="" sidePair="width-width,height-height"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n8_lqd4" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"mcxgibx.xml":'<component size="238,243">\n  <displayList>\n    <image id="n2_mcxg" name="texLight" src="cvkzibw" xy="-3,0" pivot="0.5,0.5" size="244,243"/>\n    <component id="n0_mcxg" name="btnHuaBan" src="at3iic0" xy="1,62" pivot="0.5,0.5"/>\n  </displayList>\n  <transition name="zhuan" autoPlay="true" autoPlayRepeat="-1">\n    <item time="0" type="Rotation" target="n2_mcxg" tween="true" startValue="0" endValue="360" duration="72" ease="Linear"/>\n  </transition>\n  <transition name="shan" autoPlay="true" autoPlayRepeat="-1">\n    <item time="0" type="Scale" target="n0_mcxg" tween="true" startValue="1,1" endValue="1.3,1.3" duration="5"/>\n    <item time="5" type="Scale" target="n0_mcxg" tween="true" startValue="1.3,1.3" endValue="1,1" duration="5"/>\n    <item time="10" type="Scale" target="n0_mcxg" tween="true" startValue="1,1" endValue="1.15,1.15" duration="5"/>\n    <item time="15" type="Scale" target="n0_mcxg" tween="true" startValue="1.15,1.15" endValue="1,1" duration="5"/>\n    <item time="72" type="Scale" target="n0_mcxg" value="1,1"/>\n  </transition>\n</component>',"mcxgiby.xml":'<component size="236,118" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="mk6aiaq" xy="0,0" pivot="0.5,0.5" size="236,118">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"mg17i9c.xml":'<component size="296,108" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="mg17i9d" xy="0,0" pivot="0.5,0.5" size="296,108">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n3_famj" name="title" xy="95,15" pivot="0.5,0.5" size="105,55" font="迷你简大黑" fontSize="45" color="#fff1bf" align="center" vAlign="middle" leading="2" letterSpacing="4" text="Skateboard">\n      <relation target="n1" sidePair=""/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"mg17i9e.xml":'<component size="750,1334">\n  <displayList>\n    <list id="n3_mg17" name="List_scenes" xy="1,313" size="748,508" layout="row" overflow="scroll" scroll="horizontal" scrollBarFlags="258" defaultItem="ui://5fhlcwqawv3di90" align="center" vAlign="middle" renderOrder="arch">\n      <item/>\n      <item/>\n      <item/>\n    </list>\n    <text id="n4_mg17" name="n4" xy="181,149" size="388,84" font="迷你简大黑" fontSize="70" color="#ffffff" leading="6" letterSpacing="5" autoSize="none" text="Please select a scene"/>\n    <component id="n9_mg17" name="Btn_left" src="f90ni3n" xy="20,564"/>\n    <component id="n10_mg17" name="Btn_right" src="f90ni3m" xy="687,565"/>\n    <component id="n8_mg17" name="Btn_5588game" src="mg17i9c" xy="202,994" pivot="0.5,0.5" size="364,142"/>\n    <component id="n14_l5d5" name="Btn_close" src="f90ni47" xy="666,199"/>\n    <component id="n15_l5d5" name="Btn_lock" src="f90ni3o" xy="193,841">\n      <Button title="解锁场景" titleFontSize="48"/>\n    </component>\n  </displayList>\n  <transition name="t0" autoPlay="true" autoPlayRepeat="-1">\n    <item time="0" type="Scale" target="n8_mg17" tween="true" startValue="1,1" endValue="1.2,1.2" duration="12"/>\n    <item time="12" type="Scale" target="n8_mg17" tween="true" startValue="1.2,1.2" endValue="1,1" duration="12"/>\n    <item time="24" type="Scale" target="n8_mg17" tween="true" startValue="1,1" endValue="1.2,1.2" duration="12"/>\n    <item time="36" type="Scale" target="n8_mg17" tween="true" startValue="1.2,1.2" endValue="1,1" duration="12"/>\n    <item time="99" type="Scale" target="n8_mg17" value="1,1"/>\n  </transition>\n</component>',"mgy6iel.xml":'<component size="750,1334">\n  <displayList>\n    <image id="n0_f90n" name="n0" src="kdf8ia5" xy="39,168" size="645,717"/>\n    <image id="n6_f95y" name="n6" src="kdf8ia6" xy="36,124"/>\n    <loader id="n7_f95y" name="Com_icon" xy="350,474" size="50,50" url="ui://5fhlcwqaf95yi63" align="center" vAlign="middle"/>\n    <component id="n8_f95y" name="Com_qian" src="f90ni3l" xy="14,47" size="313,64" visible="false"/>\n    <component id="n12_f95y" name="Btn_gankan" src="f90ni55" xy="193,901" size="364,142">\n      <Button title="get it right now"/>\n    </component>\n    <text id="n16_m4ob" name="Text_shuliang" xy="296,550" size="165,94" font="迷你简大黑" fontSize="80" color="#ffe75d" strokeColor="#8f3c00" strokeSize="8" text="x500"/>\n    <component id="n11_f95y" name="Btn_tiaoguo" src="f95yi6p" xy="268,1064"/>\n    <component id="n18_mg17" name="Btb_5588game" src="mg17i9c" xy="387,895" visible="false"/>\n    <component id="n19_mkif" name="Btn_ImGain" src="f90ni53" xy="63,895" size="303,118" visible="false">\n      <Button title="get it right now"/>\n    </component>\n    <text id="n20_o8w6" name="Text_shuliang" xy="188,160" size="374,61" font="迷你简大黑" fontSize="55" color="#ffffff" align="center" vAlign="middle" autoSize="none" text="Gold coin gift package"/>\n    <text id="n21_mgy6" name="1" xy="174,694" size="286,43" font="迷你简大黑" fontSize="34" color="#6a3c1d" text="Number of Remaining Receipts Today:"/>\n    <text id="n22_mgy6" name="Text_cishu" xy="476,694" size="22,43" font="迷你简大黑" fontSize="34" color="#6a3c1d" text="8"/>\n  </displayList>\n</component>',"mgy6ien.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n3_m4ob" name="bg" xy="0,-314" size="750,1955" alpha="0.5" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <component id="n2_f90n" name="contentScore" src="mgy6iel" xy="0,0" pivot="0.5,0.5">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </component>\n  </displayList>\n  <transition name="IN">\n    <item time="0" type="Scale" target="n2_f90n" tween="true" startValue="0,0" endValue="1.11,1.11" duration="5"/>\n    <item time="5" type="Scale" target="n2_f90n" tween="true" startValue="1.11,1.11" endValue="1,1" duration="2"/>\n  </transition>\n  <transition name="OUT">\n    <item time="0" type="Scale" target="n2_f90n" tween="true" startValue="1,1" endValue="1.1,1.1" duration="3"/>\n    <item time="3" type="Scale" target="n2_f90n" tween="true" startValue="1.1,1.1" endValue="0,0" duration="5"/>\n  </transition>\n</component>',"mgy6iep.xml":'<component size="98,135" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="mgy6ieo" xy="0,0" pivot="0.5,0.5" size="98,135">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"mk6aian.xml":'<component size="750,1334">\n  <displayList>\n    <image id="n0_f90n" name="n0" src="mk6aiav" xy="65,101" size="612,733"/>\n    <image id="n10_mk6a" name="n10" src="mk6aiap" xy="84,148"/>\n    <image id="n1_f90n" name="n1" src="mk6aias" xy="94,229" size="520,397"/>\n    <image id="n16_mk6a" name="n16" src="mk6aiaw" xy="138,644" size="474,132"/>\n    <image id="n23_u58i" name="n23" src="cvkzibw" xy="164,261" size="391,243"/>\n    <component id="n4_f90n" name="Btn_guanbi" src="f90ni47" xy="623,108"/>\n    <component id="n9_mg17" name="Btn_5588game" src="mg17i9c" xy="388,1000" visible="false"/>\n    <text id="n12_mk6a" name="n12" xy="161,532" size="117,36" skew="0,-2" fontSize="28" color="#86614c" text="Successful invitation"/>\n    <text id="n13_mk6a" name="n13" xy="186,575" size="117,36" skew="0,-2" fontSize="28" color="#86614c" text="You can get"/>\n    <text id="n14_mk6a" name="Text_quota" xy="285,520" size="27,49" fontSize="40" color="#ef5151" text="1"/>\n    <text id="n15_mk6a" name="Text_name" xy="477,553" size="85,49" skew="0,-2" fontSize="40" color="#3f9522" vAlign="middle" text="飞影"/>\n    <text id="n17_mk6a" name="n17" xy="304,564" size="141,43" visible="false" font="迷你简大黑" fontSize="34" color="#86614c" text="Player list"/>\n    <text id="n18_mk6a" name="Text_number" xy="536,618" size="41,37" font="迷你简大黑" fontSize="28" color="#ef5151" text="4/6"/>\n    <list id="n19_mk6a" name="lstFriend" xy="319,631" size="437,262" layout="flow_hz" lineGap="-20" colGap="52" defaultItem="ui://5fhlcwqaf90ni4t">\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n      <item/>\n    </list>\n    <component id="n20_mk6a" name="Btn_friend" src="f90ni53" xy="235,843" scale="0.8,0.8">\n      <Button title="Invite" titleFontSize="50"/>\n    </component>\n    <loader id="n21_lfgx" name="texHuaBanIcon" xy="187,300" size="387,174" url="ui://5fhlcwqamk6aiaq"/>\n    <loader id="n22_u58i" name="texTalent" xy="478,409" size="156,102" url="ui://5fhlcwqau58iic1" fill="scale"/>\n    <text id="n24_u58i" name="lbTalent" xy="302,562" size="113,44" skew="0,-2" fontSize="35" color="#ef5151" vAlign="middle" text="Secondary jump "/>\n    <text id="n25_u58i" name="n25" xy="410,564" size="89,36" skew="0,-2" fontSize="28" color="#86614c" text="Skateboard:">\n      <relation target="n24_u58i" sidePair="left-right"/>\n    </text>\n    <text id="n27_u58i" name="n27" xy="316,525" size="229,36" skew="0,-2" fontSize="28" color="#86614c" text="friend enters the game"/>\n  </displayList>\n</component>',"mq3wi80.xml":'<component size="364,142" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="mq3wi81" xy="0,0" pivot="0.5,0.5" size="364,142">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n2_mq3w" name="title" xy="105,31" pivot="0.5,0.5" size="113,64" font="迷你简大黑" fontSize="52" color="#fff1bf" letterSpacing="2" text="Play">\n      <relation target="" sidePair="width-width,height-height"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n2_mq3w" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n2_mq3w" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="4" type="Scale" target="n2_mq3w" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n2_mq3w" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n2_mq3w" tween="true" startValue="1,1"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"mq3wi82.xml":'<component size="364,142" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="f90ni2w" xy="0,0" pivot="0.5,0.5" size="364,142">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n2_mq3w" name="title" xy="80,21" pivot="0.5,0.5" size="202,56" font="迷你简大黑" fontSize="45" color="#fff1bf" align="center" vAlign="middle" leading="2" letterSpacing="4" text="Start playing">\n      <relation target="n1" sidePair=""/>\n    </text>\n    <text id="n3_mq3w" name="lbTimer" xy="94,77" pivot="0.5,0.5" size="173,31" font="迷你简大黑" fontSize="24" color="#fff1bf" letterSpacing="2" text="the remaining time20:20">\n      <relation target="" sidePair=""/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n2_mq3w" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n3_mq3w" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n2_mq3w" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n3_mq3w" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n3_mq3w" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="4" type="Scale" target="n2_mq3w" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n3_mq3w" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n2_mq3w" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n    <item time="7" type="Scale" target="n2_mq3w" tween="true" startValue="1,1"/>\n    <item time="7" type="Scale" target="n3_mq3w" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"n76bi85.xml":'<component size="250,512" pivot="0.5,1">\n  <displayList>\n    <loader id="n0_n76b" name="texIcon" xy="1,206" pivot="0.5,1" size="239,288" url="ui://5fhlcwqan76bi84" align="center" vAlign="middle" fill="scaleMatchHeight"/>\n    <graph id="n1_fs6g" name="holder" xy="0,206" size="250,289" type="rect" lineSize="0"/>\n  </displayList>\n  <transition name="t0" autoPlayRepeat="-1"/>\n</component>',"o8w6idd.xml":'<component size="107,96" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n8_lqd4" name="bg" src="o8w6idb" xy="0,0" pivot="0.5,0.5" size="107,96">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="5" type="Scale" target="n8_lqd4" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n  </transition>\n</component>',"o8w6ide.xml":'<component size="153,118" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n8_lqd4" name="bg" src="o8w6idc" xy="0,0" pivot="0.5,0.5" size="153,118">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="5" type="Scale" target="n8_lqd4" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n  </transition>\n</component>',"o8w6idg.xml":'<component size="750,1334">\n  <displayList>\n    <image id="n0_f90n" name="n0" src="kdf8ia5" xy="39,137" size="645,717"/>\n    <image id="n6_f95y" name="n6" src="kdf8ia6" xy="36,95"/>\n    <image id="n21_o8w6" name="n21" src="f90ni3w" xy="289,379" pivot="0.5,0.5" scale="1.5,1.5"/>\n    <loader id="n7_f95y" name="Com_icon" xy="270,386" size="207,208" url="ui://5fhlcwqaf95yi63" align="center" vAlign="middle" fill="scale"/>\n    <component id="n12_f95y" name="Btn_gankan" src="f90ni55" xy="223,859" pivot="0.5,0.5" size="303,118">\n      <Button title="Get"/>\n    </component>\n    <text id="n16_m4ob" name="Text_miaoshu" xy="129,656" size="471,43" font="迷你简大黑" fontSize="35" color="#86614c" align="center" autoSize="none" text="Prop description"/>\n    <component id="n17_mqn6" name="Btn_Share" src="f90ni53" xy="223,994" pivot="0.5,0.5" size="303,118">\n      <Button title="Show"/>\n    </component>\n    <component id="n18_mg17" name="Btb_5588game" src="mg17i9c" xy="387,895" visible="false"/>\n    <component id="n19_mkif" name="Btn_ImGain" src="f90ni53" xy="63,895" size="303,118" visible="false">\n      <Button title="get it right now"/>\n    </component>\n    <text id="n20_o8w6" name="Text_1" xy="220,267" size="257,44" font="迷你简大黑" fontSize="35" color="#86614c" text="Receive together?"/>\n    <text id="n22_o8w6" name="Text_shuliang" xy="188,135" size="374,61" font="迷你简大黑" fontSize="50" color="#ffffff" align="center" vAlign="middle" autoSize="none" text="Prop name"/>\n    <component id="n23_o8w6" name="isFenxiang" src="o8w6idk" xy="3,1067" pivot="0.5,0.5"/>\n    <component id="n24_qkcf" name="btnClose" src="f90ni47" xy="637,116" pivot="0.5,0.5"/>\n  </displayList>\n  <transition name="showTime">\n    <item time="0" type="Scale" target="n17_mqn6" value="1,1"/>\n    <item time="0" type="Scale" target="n24_qkcf" value="1,1"/>\n    <item time="0" type="Visible" target="n24_qkcf" value="false"/>\n    <item time="0" type="Visible" target="n17_mqn6" value="false"/>\n    <item time="81" type="Scale" target="n17_mqn6" tween="true" startValue="0.7,0.7" endValue="1.1,1.1" duration="2"/>\n    <item time="81" type="Visible" target="n17_mqn6" value="true"/>\n    <item time="84" type="Scale" target="n17_mqn6" value="1,1"/>\n    <item time="117" type="Scale" target="n24_qkcf" tween="true" startValue="0.7,0.7" endValue="1.1,1.1" duration="2"/>\n    <item time="117" type="Visible" target="n24_qkcf" value="true"/>\n    <item time="120" type="Scale" target="n24_qkcf" value="1,1"/>\n  </transition>\n</component>',"o8w6idk.xml":'<component size="200,49">\n  <displayList>\n    <image id="n0_o8w6" name="n0" src="o8w6idi" xy="4,8"/>\n    <image id="n1_o8w6" name="Img_xz" src="o8w6idj" xy="0,0"/>\n    <text id="n2_o8w6" name="Text_shuliang" xy="52,7" size="145,44" font="迷你简大黑" fontSize="35" color="#86614c" text="Sharing friends"/>\n  </displayList>\n</component>',"o8w6idm.xml":'<component size="750,1334">\n  <displayList>\n    <graph id="n4_m4ob" name="bg" xy="0,-111" size="750,1557" alpha="0.5" type="rect" fillColor="#ff000000">\n      <relation target="" sidePair="width-width,height-height"/>\n    </graph>\n    <component id="n3_byss" name="contentHuaBan" src="o8w6idg" xy="0,0" pivot="0.5,0.5">\n      <relation target="" sidePair="center-center,middle-middle"/>\n    </component>\n  </displayList>\n  <transition name="IN">\n    <item time="0" type="Scale" target="n3_byss" tween="true" startValue="0,0" endValue="1.11,1.11" duration="5"/>\n    <item time="5" type="Scale" target="n3_byss" tween="true" startValue="1.11,1.11" endValue="1,1" duration="2"/>\n  </transition>\n  <transition name="OUT">\n    <item time="0" type="Scale" target="n3_byss" tween="true" startValue="1,1" endValue="1.1,1.1" duration="3"/>\n    <item time="3" type="Scale" target="n3_byss" tween="true" startValue="1.1,1.1" endValue="0,0" duration="5"/>\n  </transition>\n</component>',"oct6i6y.xml":'<component size="131,78" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="oct6i6x" xy="0,0" pivot="0.5,0.5" size="131,78">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <loader id="n2_mva0" name="texIcon" xy="40,24" pivot="0.5,0.5" size="50,30" autoSize="true"/>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"package.xml":'<packageDescription id="5fhlcwqa" name="Game">\n  <resources>\n    <component id="at3iic0" name="huaban2" path="/组件/" size="236,129"/>\n    <component id="bkkmi7g" name="lv" path="/组件/" size="14,52"/>\n    <component id="bkkmi7h" name="levelItem" path="/组件/" size="708,70"/>\n    <component id="byssi5o" name="zanting" path="/弹窗组件/组件/" size="750,1334"/>\n    <component id="d795i8i" name="propItme" path="/组件/" size="141,236"/>\n    <component id="d795i8k" name="rankItem1" path="/组件/" size="164,212"/>\n    <component id="d795i8p" name="rankItem2" path="/组件/" size="300,240"/>\n    <component id="ekmvi7j" name="game_defen" path="/弹窗组件/组件/" size="750,1334"/>\n    <component id="f90ni3k" name="btnXiaoan" path="/组件/" size="94,98"/>\n    <component id="f90ni3l" name="score1" path="/组件/" size="313,64"/>\n    <component id="f90ni3u" name="iconSmall" path="/组件/" size="51,53"/>\n    <component id="f90ni3v" name="qiandao" path="/弹窗组件/组件/" size="750,1334"/>\n    <component id="f90ni48" name="qianDaoBiaoQian" path="/组件/" size="171,201"/>\n    <component id="f90ni4b" name="paihang" path="/弹窗组件/组件/" size="750,1334"/>\n    <component id="f90ni4m" name="rankItem5" path="/组件/" size="583,76"/>\n    <component id="f90ni4w" name="fuhuo" path="/弹窗组件/组件/" size="750,1334"/>\n    <component id="f90ni4y" name="jindutiao" path="/弹窗组件/组件/面板/" size="72,40"/>\n    <component id="f90ni58" name="daoju" path="/弹窗组件/组件/" size="750,1334"/>\n    <component id="f90ni5b" name="iconBig2" path="/组件/" size="140,245"/>\n    <component id="famjic6" name="huabanPanel" path="/弹窗组件/组件/" size="750,1134"/>\n    <component id="famjics" name="lunpan" path="/弹窗组件/组件/" size="750,1334"/>\n    <component id="fzp9i8f" name="score4" path="/组件/" size="210,64"/>\n    <component id="gtjti8t" name="score" path="/组件/" size="360,65"/>\n    <component id="hudwie8" name="tishi" path="/弹窗组件/组件/" size="750,1334"/>\n    <component id="hudwiec" name="gameItem" path="/组件/" size="164,150"/>\n    <component id="iip0i5r" name="pauseCom" path="/弹窗组件/组件/" size="750,1334"/>\n    <component id="mg17i9e" name="xzchangjing" path="/弹窗组件/组件/" size="750,1334"/>\n    <component id="mgy6iel" name="jinbilibao" path="/弹窗组件/组件/" size="750,1334"/>\n    <component id="mk6aian" name="libao" path="/弹窗组件/组件/" size="750,1334"/>\n    <component id="o8w6idg" name="daojulingqu" path="/弹窗组件/组件/" size="750,1334"/>\n    <component id="qkcfidz" name="tianfufadong" path="/切图/游戏中/" size="670,184"/>\n    <component id="qqzbi7m" name="rankItem4" path="/组件/" size="588,80"/>\n    <component id="qro6idv" name="huabantip" path="/组件/" size="49,53"/>\n    <component id="smweiee" name="Com_fast" path="/组件/" size="484,250"/>\n    <component id="vre9i77" name="kanguangao_1" path="/弹窗组件/组件/" size="750,1334"/>\n    <image id="10ozi10" name="shuzibaise_4" path="/切图/数字/" size="53,76"/>\n    <image id="10ozi11" name="shuzibaise_5" path="/切图/数字/" size="53,76"/>\n    <image id="10ozi12" name="shuzibaise_6" path="/切图/数字/" size="53,76"/>\n    <image id="10ozi13" name="shuzibaise_7" path="/切图/数字/" size="53,76"/>\n    <image id="10ozi14" name="shuzibaise_8" path="/切图/数字/" size="53,76"/>\n    <image id="10ozi15" name="shuzibaise_9" path="/切图/数字/" size="53,76"/>\n    <image id="10ozi16" name="shuzibaise_x" path="/切图/数字/" size="53,76"/>\n    <image id="10ozi1a" name="anniu_guanbi" path="/切图/按钮/" size="78,86"/>\n    <image id="10ozi3" name="defendiban" path="/切图/按钮/" size="105,64" scale="9grid" scale9grid="32,0,16,65"/>\n    <image id="10ozi5" name="fzcy_0" path="/切图/数字/" size="34,60"/>\n    <image id="10ozi6" name="fzcy_1" path="/切图/数字/" size="34,60"/>\n    <image id="10ozi7" name="fzcy_2" path="/切图/数字/" size="34,60"/>\n    <image id="10ozi8" name="fzcy_3" path="/切图/数字/" size="34,60"/>\n    <image id="10ozi9" name="fzcy_4" path="/切图/数字/" size="34,60"/>\n    <image id="10ozia" name="fzcy_5" path="/切图/数字/" size="34,60"/>\n    <image id="10ozib" name="fzcy_6" path="/切图/数字/" size="34,60"/>\n    <image id="10ozic" name="fzcy_7" path="/切图/数字/" size="34,60"/>\n    <image id="10ozid" name="fzcy_8" path="/切图/数字/" size="34,60"/>\n    <image id="10ozie" name="fzcy_9" path="/切图/数字/" size="34,60"/>\n    <image id="10ozif" name="fzcy_douhao" path="/切图/数字/" size="34,60"/>\n    <image id="10ozig" name="fzcy_jiahao" path="/切图/数字/" size="34,60"/>\n    <image id="10ozih" name="fzcy_xie" path="/切图/数字/" size="34,60"/>\n    <image id="10ozik" name="shuzi_0" path="/切图/数字/" size="53,76"/>\n    <image id="10ozil" name="shuzi_1" path="/切图/数字/" size="53,76"/>\n    <image id="10ozim" name="shuzi_2" path="/切图/数字/" size="53,76"/>\n    <image id="10ozin" name="shuzi_3" path="/切图/数字/" size="53,76"/>\n    <image id="10ozio" name="shuzi_4" path="/切图/数字/" size="53,76"/>\n    <image id="10ozip" name="shuzi_5" path="/切图/数字/" size="53,76"/>\n    <image id="10oziq" name="shuzi_6" path="/切图/数字/" size="53,76"/>\n    <image id="10ozir" name="shuzi_7" path="/切图/数字/" size="53,76"/>\n    <image id="10ozis" name="shuzi_8" path="/切图/数字/" size="53,76"/>\n    <image id="10ozit" name="shuzi_9" path="/切图/数字/" size="53,76"/>\n    <image id="10oziu" name="shuzi_x" path="/切图/数字/" size="53,76"/>\n    <image id="10oziw" name="shuzibaise_0" path="/切图/数字/" size="53,76"/>\n    <image id="10ozix" name="shuzibaise_1" path="/切图/数字/" size="53,76"/>\n    <image id="10oziy" name="shuzibaise_2" path="/切图/数字/" size="53,76"/>\n    <image id="10oziz" name="shuzibaise_3" path="/切图/数字/" size="53,76"/>\n    <image id="bh1pi72" name="Btn_yellow_small_1" path="/切图/按钮/" size="140,61"/>\n    <image id="bkkmi79" name="Btn_green" path="/切图/按钮/" size="159,52"/>\n    <image id="bkkmi7b" name="Img_di_2" path="/切图/主界面/" size="161,133" scale="9grid" scale9grid="50,50,61,33"/>\n    <image id="cvkzibv" name="Img_lqhb_1" path="/切图/主界面/" size="164,48"/>\n    <image id="cvkzibw" name="Img_lqhb_2" path="/切图/主界面/" size="288,243"/>\n    <image id="d795i8j" name="Img_game_list" path="/切图/游戏中/" size="141,147"/>\n    <image id="d795i8n" name="Img_txd" path="/切图/游戏中/" size="164,212"/>\n    <image id="d795i8q" name="Img_cyhy" path="/切图/游戏中/" size="376,51"/>\n    <image id="f90ni2w" name="Btn_cf" path="/切图/按钮/" size="364,142"/>\n    <image id="f90ni2x" name="Btn_left" path="/切图/按钮/" size="43,55"/>\n    <image id="f90ni2y" name="Btn_ph" path="/切图/按钮/" size="94,98"/>\n    <image id="f90ni2z" name="Btn_right" path="/切图/按钮/" size="42,55"/>\n    <image id="f90ni38" name="Icon_3" path="/切图/图标/" size="83,61"/>\n    <image id="f90ni3a" name="Btn_sy" path="/切图/按钮/" size="90,96"/>\n    <image id="f90ni3b" name="Btn_yellow_small" path="/切图/按钮/" size="140,61"/>\n    <image id="f90ni3c" name="Btn_green_small" path="/切图/按钮/" size="244,60"/>\n    <image id="f90ni3e" name="Btn_gzh" path="/切图/按钮/" size="94,98"/>\n    <image id="f90ni3h" name="Img_icon_bg" path="/切图/9宫格/" size="50,50"/>\n    <image id="f90ni3w" name="Img_swck" path="/切图/9宫格/" size="171,201" scale="9grid" scale9grid="80,80,16,17"/>\n    <image id="f90ni3x" name="Img_title_1" path="/切图/9宫格/" size="104,72" scale="9grid" scale9grid="50,0,4,72"/>\n    <image id="f90ni3z" name="Img_dui" path="/切图/按钮/" size="102,106"/>\n    <image id="f90ni41" name="Icon_2" path="/切图/图标/" size="76,74"/>\n    <image id="f90ni44" name="Img_bg_1" path="/切图/9宫格/" size="645,893" scale9grid="80,204,22,408"/>\n    <image id="f90ni4f" name="Img_txmb" path="/切图/排行榜/" size="58,58"/>\n    <image id="f90ni4g" name="Img_txbg" path="/切图/9宫格/" size="66,74" scale="9grid" scale9grid="30,30,28,28"/>\n    <image id="f90ni4h" name="Img_bg_2" path="/切图/9宫格/" size="645,477" scale="9grid" scale9grid="0,360,645,7"/>\n    <image id="f90ni4j" name="Img_paihang" path="/切图/排行榜/" size="327,76" scale="9grid" scale9grid="70,0,17,76"/>\n    <image id="f90ni4z" name="Btn_blue" path="/切图/按钮/" size="364,142"/>\n    <image id="f90ni5h" name="Btn_dianji" path="/切图/得分/" size="336,35"/>\n    <image id="f95yi5s" name="p_icon__citie" path="/切图/图标/" size="75,77"/>\n    <image id="f95yi5t" name="p_icon_2jinkuai" path="/切图/图标/" size="130,130"/>\n    <image id="f95yi62" name="p_icon_jinkuai" path="/切图/图标/" size="111,83"/>\n    <image id="f95yi63" name="p_icon_jinkuaidui" path="/切图/图标/" size="270,218"/>\n    <image id="famjic8" name="Img_huaban_3" path="/切图/滑板/" size="74,73" scale="9grid" scale9grid="30,0,14,73"/>\n    <image id="famjic9" name="Img_huaban_2" path="/切图/滑板/" size="98,45" scale="9grid" scale9grid="40,0,18,45"/>\n    <image id="famjica" name="Img_huaban_1" path="/切图/滑板/" size="88,97" scale="9grid" scale9grid="30,40,28,17"/>\n    <image id="famjicb" name="btn_th" path="/切图/按钮/" size="197,89"/>\n    <image id="famjicd" name="btn_zi_1" path="/切图/按钮/" size="197,89"/>\n    <image id="famjich" name="Img_huaban_4" path="/切图/滑板/" size="709,945"/>\n    <image id="famjicj" name="Btn_zp" path="/切图/按钮/" size="102,138"/>\n    <image id="famjick" name="Btn_rhb" path="/切图/按钮/" size="132,145"/>\n    <image id="famjico" name="Img_zp_1" path="/切图/转盘/" size="129,166"/>\n    <image id="famjicp" name="Img_zp_4" path="/切图/转盘/" size="110,63" scale="9grid" scale9grid="50,0,10,63"/>\n    <image id="famjicq" name="Img_zp_2" path="/切图/转盘/" size="460,127"/>\n    <image id="famjicu" name="Icon_4" path="/切图/图标/" size="49,59"/>\n    <image id="famjicw" name="Img_tianfu" path="/切图/主界面/" size="233,137"/>\n    <image id="fzp9i87" name="Btn_zailai" path="/切图/得分/" size="217,41"/>\n    <image id="i447ic4" name="title" path="/切图/礼包/" size="418,82"/>\n    <image id="k6rcicy" name="Img_lp_bg" path="/切图/转盘/" size="574,574"/>\n    <image id="k6rcid1" name="Img_lp_d3" path="/切图/转盘/" size="236,237"/>\n    <image id="k6rcid3" name="Img_iconlp_1" path="/切图/转盘/" size="51,63"/>\n    <image id="k6rcid5" name="Img_iconlp_3" path="/切图/转盘/" size="89,71"/>\n    <image id="k6rcid6" name="Img_iconlp_2" path="/切图/转盘/" size="65,71"/>\n    <image id="kdf8ia0" name="Img_list_bg" path="/切图/主界面/" size="101,70" scale="9grid" scale9grid="30,30,41,10"/>\n    <image id="kdf8ia4" name="img_pm" path="/切图/排行榜/" size="53,53"/>\n    <image id="kdf8ia5" name="Img_mr_bg" path="/切图/每日大礼包/" size="645,717"/>\n    <image id="kdf8ia6" name="Img_mr_bg2" path="/切图/每日大礼包/" size="682,268"/>\n    <image id="kdf8ia9" name="Img_df_bg" path="/切图/得分/" size="641,736"/>\n    <image id="kdf8iaa" name="Img_df_bg2" path="/切图/得分/" size="635,111"/>\n    <image id="kdf8iac" name="Img_game_list_1" path="/切图/9宫格/" size="45,49"/>\n    <image id="kdf8iad" name="Img_big_tx" path="/切图/按钮/" size="122,125"/>\n    <image id="l5d5iaf" name="Img_dx" path="/切图/游戏中/" size="64,67"/>\n    <image id="l5d5iag" name="Img_txbg_2" path="/切图/9宫格/" size="88,96"/>\n    <image id="l5d5iai" name="Img_qd_bg" path="/切图/签到/" size="645,685"/>\n    <image id="l5d5iak" name="Img_qd_2" path="/切图/签到/" size="163,165"/>\n    <image id="mg17i9d" name="Btn_5588_big" path="/切图/按钮/" size="296,108"/>\n    <image id="mgy6ieo" name="Btn_mianfeijinbi" path="/切图/按钮/" size="98,135"/>\n    <image id="mk6aiap" name="Img_libao_3" path="/切图/礼包/" size="582,106"/>\n    <image id="mk6aiar" name="Img_libao_wyq" path="/切图/礼包/" size="55,41"/>\n    <image id="mk6aias" name="Img_libao_4" path="/切图/礼包/" size="501,346"/>\n    <image id="mk6aiat" name="Img_libao_yyq" path="/切图/礼包/" size="80,50"/>\n    <image id="mk6aiau" name="Img_libao_5" path="/切图/礼包/" size="88,96"/>\n    <image id="mk6aiav" name="Img_libao_1" path="/切图/礼包/" size="612,857"/>\n    <image id="mk6aiaw" name="Img_libao_2" path="/切图/礼包/" size="61,72" scale="9grid" scale9grid="25,30,11,12"/>\n    <image id="mq3wi81" name="Btn_cf_1" path="/切图/按钮/" size="364,142"/>\n    <image id="o8w6idb" name="Btn_zhuye" path="/切图/按钮/" size="107,96"/>\n    <image id="o8w6idc" name="Btn_fx" path="/切图/按钮/" size="153,118"/>\n    <image id="o8w6idi" name="Btn_xz_1" path="/切图/按钮/" size="41,41"/>\n    <image id="o8w6idj" name="Btn_xz_2" path="/切图/按钮/" size="49,49"/>\n    <image id="oct6i6x" name="Btn_gdyx" path="/切图/按钮/" size="131,78"/>\n    <image id="p3j2iam" name="Img_touying" path="/切图/主界面/" size="720,160"/>\n    <image id="py12i6z" name="Btn_jingyin" path="/切图/按钮/" size="90,96"/>\n    <image id="qkcfidw" name="w1" path="/切图/游戏中/" size="266,61"/>\n    <image id="qkcfidx" name="w2" path="/切图/游戏中/" size="471,164"/>\n    <image id="qqzbi7k" name="Img_zj" path="/切图/排行榜/" size="288,80" scale="9grid" scale9grid="38,0,2,80"/>\n    <image id="rj3mi9n" name="Img_shigong" path="/切图/创建场景/" size="132,69"/>\n    <image id="rj3mi9s" name="Img_scenes_1" path="/切图/创建场景/" size="290,406"/>\n    <image id="rj3mi9u" name="Img_lw" path="/切图/按钮/" size="94,98"/>\n    <image id="rn02idn" name="Img_zjmdt" path="/切图/主界面/" size="326,111" scale="9grid" scale9grid="150,50,26,11"/>\n    <image id="rn02ido" name="Img_hy" path="/切图/主界面/" size="113,25"/>\n    <image id="sda6i1s" name="white_n9" path="/切图/9宫格/" size="100,100" scale="9grid" scale9grid="25,25,50,50"/>\n    <image id="smweieg" name="Img_game_bg" path="/切图/游戏中/" size="484,250"/>\n    <image id="smweieh" name="Img_fast" path="/切图/游戏中/" size="280,100"/>\n    <image id="smweiei" name="Btn_lv_kanshipin" path="/切图/按钮/" size="193,76"/>\n    <image id="u58iic1" name="Img_libao_t2" path="/切图/礼包/" size="141,101"/>\n    <image id="v54ii97" name="Img_zs" path="/切图/9宫格/" size="380,68"/>\n    <image id="v54ii9a" name="Btn_5588" path="/切图/按钮/" size="103,127"/>\n    <image id="wv3di8w" name="Img_ch_5" path="/切图/创建场景/" size="88,96"/>\n    <image id="wv3di8y" name="Img_ch_1" path="/切图/创建场景/" size="43,63" scale="9grid" scale9grid="20,0,3,63"/>\n    <image id="wv3di8z" name="Img_ch_2" path="/切图/创建场景/" size="332,486" scale="9grid" scale9grid="40,0,22,383"/>\n    <image id="wv3di95" name="helpme" path="/切图/复活/" size="282,215"/>\n    <image id="yqmdidr" name="Img_xz_2" path="/切图/滑板/" size="49,53"/>\n    <image id="yqmdids" name="Img_xz_1" path="/切图/滑板/" size="49,53"/>\n    <image id="yqmdidt" name="Btn_lan" path="/切图/按钮/" size="227,99"/>\n    <component id="bh1pi75" name="score3" path="/组件/" size="195,64" exported="true"/>\n    <component id="bkkmi78" name="btnGreen1" path="/组件/" size="159,52" exported="true"/>\n    <component id="cvkzibf" name="GameUI" path="/" size="750,1334" exported="true"/>\n    <component id="cvkzibg" name="GiftUI" path="/" size="750,1334" exported="true"/>\n    <component id="cvkzibj" name="ItemUi" path="/" size="750,1334" exported="true"/>\n    <component id="cvkzibk" name="MainUI" path="/" size="750,1334" exported="true"/>\n    <component id="cvkzibm" name="PauseUI" path="/" size="750,1334" exported="true"/>\n    <component id="cvkzibn" name="QiandaoUI" path="/" size="750,1334" exported="true"/>\n    <component id="cvkzibo" name="RankUI" path="/" size="750,1334" exported="true"/>\n    <component id="cvkzibp" name="ReviveUI" path="/" size="750,1334" exported="true"/>\n    <component id="cvkzibq" name="Scene" path="/" size="750,1334" exported="true"/>\n    <component id="cvkzibr" name="ScoreUI" path="/" size="750,1334" exported="true"/>\n    <component id="cvkzibs" name="SevenDayUI" path="/" size="750,1334" exported="true"/>\n    <component id="cvkzibt" name="TimeoutUI" path="/" size="750,1334" exported="true"/>\n    <component id="ekmvi7i" name="DialogUI" path="/弹窗组件/" size="750,1334" exported="true"/>\n    <component id="f90ni3m" name="btnRight" path="/组件/" size="43,55" exported="true"/>\n    <component id="f90ni3n" name="btnLeft" path="/组件/" size="43,55" exported="true"/>\n    <component id="f90ni3o" name="btnGo1" path="/组件/" size="364,142" exported="true"/>\n    <component id="f90ni3r" name="btnGreenSmall" path="/组件/" size="244,60" exported="true"/>\n    <component id="f90ni3t" name="btnYellowSmall" path="/组件/" size="140,61" exported="true"/>\n    <component id="f90ni47" name="btnGuanBi" path="/组件/" size="78,86" exported="true"/>\n    <component id="f90ni4t" name="iconTx" path="/组件/" size="110,150" exported="true"/>\n    <component id="f90ni53" name="btnBlue" path="/组件/" size="364,142" exported="true"/>\n    <component id="f90ni55" name="btnYellowBig" path="/组件/" size="364,142" exported="true"/>\n    <component id="f90ni59" name="item1" path="/组件/" size="171,350" exported="true"/>\n    <component id="f90ni5i" name="rankItem3" path="/组件/" size="172,222" exported="true"/>\n    <component id="f90ni5k" name="btnDianJi" path="/组件/" size="336,35" exported="true"/>\n    <component id="f95yi6p" name="btnDianJiTiaoGuo" path="/组件/" size="221,40" exported="true"/>\n    <component id="famjicc" name="btntuhuang" path="/组件/" size="197,89" exported="true"/>\n    <component id="famjice" name="btnzi1" path="/组件/" size="197,89" exported="true"/>\n    <component id="famjicf" name="Huaban" path="/" size="750,1334" exported="true"/>\n    <component id="famjicl" name="btnzp" path="/组件/" size="102,138" exported="true"/>\n    <component id="famjicm" name="btnxhb" path="/组件/" size="132,145" exported="true"/>\n    <component id="famjict" name="scorelp" path="/组件/" size="250,63" exported="true"/>\n    <component id="famjicv" name="LunpanUi" path="/" size="750,1334" exported="true"/>\n    <component id="famjicx" name="Com_tianfu" path="/组件/" size="233,137" exported="true"/>\n    <component id="fs6gid8" name="huabanItem" path="/组件/" size="222,424" exported="true"/>\n    <component id="fs6gid9" name="btntuhuang1" path="/组件/" size="197,89" exported="true"/>\n    <component id="fs6gida" name="btntuhuangSp" path="/组件/" size="197,89" exported="true"/>\n    <component id="fzp9i8d" name="btnZaiLai" path="/组件/" size="217,41" exported="true"/>\n    <component id="hudwie7" name="Tips" path="/" size="750,1334" exported="true"/>\n    <component id="i1fpi7w" name="zhiyin" path="/组件/" size="350,500" exported="true"/>\n    <component id="i1fpi7z" name="zhiyin_1" path="/组件/" size="150,150" exported="true"/>\n    <component id="i447ic2" name="GiftTiShiUI" path="/" size="750,1334" exported="true"/>\n    <component id="k6rcid2" name="roll" path="/组件/" size="470,470" exported="true"/>\n    <component id="k6rcid7" name="zujian_lp" path="/组件/" size="236,237" exported="true"/>\n    <component id="kfetieq" name="btnBlue3" path="/组件/" size="364,142" exported="true"/>\n    <component id="lqd4i2n" name="btnGreen" path="/组件/" size="244,60" exported="true"/>\n    <component id="lqd4i2r" name="btnYellow" path="/组件/" size="303,118" exported="true"/>\n    <component id="mcxgibx" name="huabangift" path="/组件/" size="238,243" exported="true"/>\n    <component id="mcxgiby" name="btnHuaBan" path="/组件/" size="236,118" exported="true"/>\n    <component id="mg17i9c" name="btnBig5588" path="/组件/" size="296,108" exported="true"/>\n    <component id="mgy6ien" name="JinbilibaoUI" path="/" size="750,1334" exported="true"/>\n    <component id="mgy6iep" name="btnMianfeijinbi" path="/组件/" size="98,135" exported="true"/>\n    <component id="mq3wi80" name="btnGo2" path="/组件/" size="364,142" exported="true"/>\n    <component id="mq3wi82" name="btnGo3" path="/组件/" size="364,142" exported="true"/>\n    <component id="n76bi85" name="playerIconItem" path="/组件/" size="250,512" exported="true"/>\n    <component id="o8w6idd" name="btnzhuye" path="/组件/" size="107,96" exported="true"/>\n    <component id="o8w6ide" name="btnfenxiang" path="/组件/" size="153,118" exported="true"/>\n    <component id="o8w6idk" name="Comfenxiang" path="/组件/" size="200,49" exported="true"/>\n    <component id="o8w6idm" name="HuodeUI" path="/" size="750,1334" exported="true"/>\n    <component id="oct6i6y" name="btnMoregame" path="/组件/" size="131,78" exported="true"/>\n    <component id="py12i71" name="btnYellowSmall1" path="/组件/" size="140,61" exported="true"/>\n    <component id="rj3mi9t" name="btnGift" path="/组件/" size="94,98" exported="true"/>\n    <component id="rn02idp" name="list_moregameChild" path="/组件/" size="130,130" exported="true"/>\n    <component id="smweiej" name="btnlvkan" path="/组件/" size="193,76" exported="true"/>\n    <component id="smweiek" name="btntuhuangxiao" path="/组件/" size="193,73" exported="true"/>\n    <component id="t2jnic5" name="btnBlue2" path="/组件/" size="233,84" exported="true"/>\n    <component id="v54ii96" name="zhishi" path="/组件/" size="500,200" exported="true"/>\n    <component id="v54ii9b" name="btn5588" path="/组件/" size="103,127" exported="true"/>\n    <component id="wv3di90" name="sceneItem" path="/组件/" size="250,496" exported="true"/>\n    <component id="ydc3ie5" name="Com_next" path="/组件/" size="600,110" exported="true"/>\n    <component id="yqmdidu" name="btnlan" path="/组件/" size="227,99" exported="true"/>\n    <font id="10ozi4" name="fzcy_number" path="/切图/数字/" size="0,0" exported="true" file="10ozi4.fnt"/>\n    <font id="10ozij" name="shuzi" path="/切图/数字/" size="0,0" exported="true" file="10ozij.fnt"/>\n    <font id="10oziv" name="shuzibaise" path="/切图/数字/" size="0,0" exported="true" file="10oziv.fnt"/>\n    <image id="bkkmi7e" name="Img_t_1" path="/切图/主界面/" size="12,50" exported="true"/>\n    <image id="bkkmi7f" name="Img_t_2" path="/切图/主界面/" size="14,52" exported="true"/>\n    <image id="f90ni33" name="Img_tips" path="/切图/主界面/" size="68,72" exported="true"/>\n    <image id="f90ni50" name="Img_tiao" path="/切图/复活/" size="72,40" exported="true" scale="9grid" scale9grid="30,10,12,20"/>\n    <image id="f90ni51" name="Img_tiaobg" path="/切图/复活/" size="72,46" exported="true" scale="9grid" scale9grid="30,20,12,6"/>\n    <image id="f90ni52" name="jindutiao_zhezhao" path="/切图/复活/" size="66,46" exported="true" scale="9grid" scale9grid="20,0,26,46"/>\n    <image id="i1fpi7u" name="zhiyin2" path="/切图/主界面/" size="129,144" exported="true"/>\n    <image id="i1fpi7v" name="zhiyin1" path="/切图/主界面/" size="177,121" exported="true"/>\n    <image id="mk6aiaq" name="Img_libao_x" path="/切图/礼包/" size="315,153" exported="true"/>\n    <atlas id="atlas0" size="512,512" file="atlas0.png"/>\n    <atlas id="atlas100" size="1024,1024" file="atlas0_1.png"/>\n    <atlas id="atlas101" size="1024,1024" file="atlas0_2.png"/>\n    <atlas id="atlas102" size="1024,1024" file="atlas0_3.png"/>\n    <atlas id="atlas103" size="1024,1024" file="atlas0_4.png"/>\n    <atlas id="atlas104" size="1024,1024" file="atlas0_5.png"/>\n    <atlas id="atlas105" size="1024,1024" file="atlas0_6.png"/>\n    <atlas id="atlas106" size="1024,512" file="atlas0_7.png"/>\n    <atlas id="atlas107" size="1024,1024" file="atlas0_8.png"/>\n    <atlas id="atlas108" size="1024,256" file="atlas0_9.png"/>\n    <atlas id="atlas109" size="1024,1024" file="atlas0_10.png"/>\n    <atlas id="atlas110" size="1024,1024" file="atlas0_11.png"/>\n  </resources>\n</packageDescription>',"py12i71.xml":'<component size="140,61" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="f90ni3b" xy="0,0" pivot="0.5,0.5" size="140,61">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n8_lqd4" name="title" xy="0,14" pivot="0.5,0.5" size="140,27" font="迷你简大黑" fontSize="24" color="#fff1bf" align="center" vAlign="middle" leading="-2" autoSize="none" text="play50:50">\n      <relation target="" sidePair="width-width,height-height"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n8_lqd4" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"qkcfidz.xml":'<component size="670,184">\n  <displayList>\n    <image id="n22_qkcf" name="n22" src="qkcfidx" xy="82,20"/>\n    <text id="n23_qkcf" name="desc" xy="135,37" size="350,76" fontSize="38" color="#ffffff" align="center" vAlign="middle" autoSize="none" text="一二三四，五六七八"/>\n    <image id="n21_qkcf" name="n21" src="qkcfidw" xy="-1,-17"/>\n  </displayList>\n</component>',"qqzbi7m.xml":'<component size="588,80">\n  <displayList>\n    <image id="n7_qqzb" name="bg" src="qqzbi7k" xy="0,0" size="588,80"/>\n    <image id="n10_kdf8" name="bg2" src="f90ni4g" xy="71,3" size="66,74" scale="0.8,0.8"/>\n    <image id="n8_kdf8" name="bg3" src="kdf8ia4" xy="10,7"/>\n    <image id="n11_kdf8" name="texHead" src="f90ni4f" xy="74,6" size="58,58" scale="0.8,0.8" visible="false"/>\n    <text id="n9_kdf8" name="lbRank" xy="24,12" size="28,50" visible="false" font="迷你简大黑" fontSize="40" color="#ffffff" autoSize="none" text="5"/>\n    <text id="n12_kdf8" name="lbName" xy="130,20" size="239,53" visible="false" font="迷你简大黑" fontSize="38" color="#8d2c02" vAlign="middle" autoSize="none" text="名字大名字大名字大"/>\n    <text id="n13_kdf8" name="lbScore" xy="376,20" size="208,49" visible="false" font="迷你简大黑" fontSize="38" color="#ffffff" align="center" vAlign="middle" autoSize="none" text="1500000米"/>\n  </displayList>\n</component>',"qro6idv.xml":'<component size="49,53">\n  <displayList>\n    <image id="n38_qro6" name="unselect" src="yqmdidr" xy="0,0"/>\n    <image id="n37_qro6" name="select" src="yqmdids" xy="0,0"/>\n  </displayList>\n</component>',"rj3mi9t.xml":'<component size="94,98" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n2_mq3w" name="bg" src="rj3mi9u" xy="0,0" pivot="0.5,0.5" size="94,98"/>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n2_mq3w" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n2_mq3w" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n2_mq3w" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n2_mq3w" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n2_mq3w" tween="true" startValue="1,1"/>\n  </transition>\n  <transition name="shake">\n    <item time="0" type="Scale" target="n2_mq3w" tween="true" startValue="1,1" endValue="1.3,1.3" duration="8"/>\n    <item time="8" type="Rotation" target="n2_mq3w" tween="true" startValue="0" endValue="4" duration="2"/>\n    <item time="8" type="Scale" target="n2_mq3w" tween="true" startValue="1.3,1.3" endValue="1.3,1.3" duration="14"/>\n    <item time="10" type="Rotation" target="n2_mq3w" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="12" type="Rotation" target="n2_mq3w" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="14" type="Rotation" target="n2_mq3w" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="16" type="Rotation" target="n2_mq3w" tween="true" startValue="-4" endValue="4" duration="2"/>\n    <item time="18" type="Rotation" target="n2_mq3w" tween="true" startValue="4" endValue="-4" duration="2"/>\n    <item time="20" type="Rotation" target="n2_mq3w" tween="true" startValue="-4" endValue="0" duration="2"/>\n    <item time="22" type="Rotation" target="n2_mq3w" tween="true" startValue="0" endValue="0" duration="5" ease="Circ.Out"/>\n    <item time="22" type="Scale" target="n2_mq3w" tween="true" startValue="1.3,1.3" endValue="1,1" duration="5"/>\n    <item time="48" type="Rotation" target="n2_mq3w" value="0"/>\n  </transition>\n</component>',"rn02idp.xml":'<component size="130,130" mask="n2_f5go">\n  <displayList>\n    <loader id="n0_n9f9" name="icon" xy="0,0" size="130,130" fill="scale"/>\n    <graph id="n1_n9f9" name="n1" xy="0,0" size="130,130" visible="false" type="rect" fillColor="#ffff0000"/>\n    <graph id="n2_f5go" name="n2" xy="0,0" size="130,130" type="eclipse" lineSize="0"/>\n  </displayList>\n</component>',"smweiee.xml":'<component size="484,250">\n  <displayList>\n    <image id="n0_smwe" name="n0" src="smweieg" xy="0,0"/>\n    <image id="n1_smwe" name="n1" src="smweieh" xy="11,15"/>\n    <text id="n2_smwe" name="Text_title" xy="274,60" size="191,41" font="迷你简大黑" fontSize="32" color="#976e5e" autoSize="none" text="Rush 2500m"/>\n    <component id="n4_smwe" name="Btn_video" src="smweiej" xy="268,134">\n      <Button title="Watch video collection"/>\n    </component>\n    <component id="n5_smwe" name="Btn_jiage" src="smweiek" xy="43,134">\n      <Button title="50000"/>\n    </component>\n  </displayList>\n  <transition name="ani_one">\n    <item time="0" type="Visible" target="n5_smwe" value="false"/>\n    <item time="0" type="Visible" target="n4_smwe" value="true"/>\n    <item time="0" type="XY" target="n4_smwe" value="157,134"/>\n  </transition>\n  <transition name="ani_double">\n    <item time="0" type="Visible" target="n5_smwe" value="true"/>\n    <item time="0" type="Visible" target="n4_smwe" value="true"/>\n    <item time="0" type="XY" target="n4_smwe" value="265,134"/>\n  </transition>\n</component>',"smweiej.xml":'<component size="193,76" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="smweiei" xy="0,0" pivot="0.5,0.5" size="193,76">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n8_lqd4" name="title" xy="-20,18" pivot="0.5,0.5" size="159,33" font="迷你简大黑" fontSize="24" color="#fff1bf" align="right" vAlign="middle" autoSize="none" text="Watch video collection">\n      <relation target="" sidePair="width-width,height-height"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n8_lqd4" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"smweiek.xml":'<component size="193,73" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="famjicb" xy="0,0" pivot="0.5,0.5" size="193,73">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <image id="n3_famj" name="icon" src="k6rcid6" xy="24,17" size="59,60" scale="0.5,0.5"/>\n    <text id="n4_famj" name="title" xy="69,18" pivot="0.5,0.5" size="115,29" font="迷你简大黑" fontSize="22" color="#fff1bf" vAlign="bottom" letterSpacing="2" autoSize="none" text="10000">\n      <relation target="n1" sidePair="width-width,height-height"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"t2jnic5.xml":'<component size="233,84" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="f90ni4z" xy="0,0" pivot="0.5,0.5" size="233,84">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n8_lqd4" name="title" xy="-6,13" pivot="0.5,0.5" size="233,50" font="迷你简大黑" fontSize="30" color="#fff1bf" align="center" vAlign="middle" ubb="true" autoSize="none" text="标题">\n      <relation target="" sidePair="width-width,height-height"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n8_lqd4" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"v54ii96.xml":'<component size="500,200" pivot="0.8,0.5">\n  <displayList>\n    <image id="n4_v54i" name="bg" src="v54ii97" xy="12,22" size="360,68"/>\n  </displayList>\n  <transition name="chuo" autoPlay="true" autoPlayRepeat="-1">\n    <item time="0" type="XY" target="n4_v54i" tween="true" startValue="12,22" endValue="131,22" duration="10"/>\n    <item time="10" type="XY" target="n4_v54i" tween="true" startValue="131,22" endValue="12,22" duration="10"/>\n  </transition>\n</component>',"v54ii9b.xml":'<component size="103,127" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="pressed"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="v54ii9a" xy="0,0" pivot="0.5,0.5" size="103,127">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"vre9i77.xml":'<component size="750,1334">\n  <displayList>\n    <image id="n0_f90n" name="n0" src="f90ni4h" xy="52,247" size="645,477"/>\n    <text id="n2_f90n" name="Text_title" xy="313,338" pivot="0.5,0.5" size="123,64" font="迷你简大黑" fontSize="52" color="#9a2f05" align="center" vAlign="middle" text="Prompt"/>\n    <component id="n4_f90n" name="Btn_guanbi" src="f90ni47" xy="637,234"/>\n    <text id="n8_vre9" name="Text_content" xy="96,413" size="559,157" font="迷你简大黑" fontSize="30" color="#86614c" align="center" vAlign="middle" leading="12" autoSize="none" text="我是一行文字我是一行文字我是一行文字我是一行文字"/>\n    <component id="n10_vre9" name="btn_enter" src="lqd4i2r" xy="223,739">\n      <Button title="OK "/>\n    </component>\n  </displayList>\n</component>',"wv3di90.xml":'<component size="250,496" pivot="0.5,0.5">\n  <displayList>\n    <image id="n2_wv3d" name="bg" src="wv3di8z" xy="19,89" size="215,319"/>\n    <image id="n10_mg17" name="bg2" src="wv3di8y" xy="17,89" size="215,63"/>\n    <loader id="n7_wv3d" name="texIcon" xy="19,89" size="215,319" url="ui://5fhlcwqarj3mi9s" align="center" vAlign="middle" fill="scaleFree"/>\n    <graph id="n16_l5d5" name="texMb" xy="19,89" size="215,319" group="n9_mg17" alpha="0.7" type="rect" lineSize="0" lineColor="#ffffffff" fillColor="#ff000000"/>\n    <image id="n4_wv3d" name="texLock" src="wv3di8w" xy="91,195" size="67,96" group="n9_mg17"/>\n    <image id="n12_mg17" name="texCoin" src="f90ni38" xy="157,339" size="62,61" group="n9_mg17" scale="0.65,0.65"/>\n    <image id="n15_rj3m" name="texBuilding" src="rj3mi9n" xy="69,197" pivot="0.5,0.5" size="111,69" group="n9_mg17"/>\n    <text id="n13_mg17" name="lbCoin" xy="53,338" size="93,50" group="n9_mg17" font="迷你简大黑" fontSize="34" color="#ffffff" align="right" autoSize="none" text="500"/>\n    <group id="n9_mg17" name="contentLock" xy="19,89" size="215,319" advanced="true"/>\n    <text id="n14_yma1" name="lbName" xy="22,96" size="209,50" font="迷你简大黑" fontSize="40" color="#f7e9de" align="center" vAlign="middle" autoSize="none" text="China Town"/>\n  </displayList>\n</component>',"ydc3ie5.xml":'<component size="600,110">\n  <displayList>\n      </displayList>\n</component>',"yqmdidu.xml":'<component size="227,99" extention="Button">\n  <controller name="button" pages="0,up,1,down,2,over,3,selectedOver" selected="0">\n    <action type="play_transition" fromPage="" toPage="1" transition="press"/>\n    <action type="play_transition" fromPage="1" toPage="" transition="release"/>\n  </controller>\n  <displayList>\n    <image id="n1" name="bg" src="yqmdidt" xy="0,0" pivot="0.5,0.5" size="227,99">\n      <relation target="" sidePair="width-width,height-height"/>\n    </image>\n    <text id="n8_lqd4" name="title" xy="-6,13" pivot="0.5,0.5" size="227,65" font="迷你简大黑" fontSize="30" color="#fff1bf" align="center" vAlign="middle" ubb="true" autoSize="none" text="标题">\n      <relation target="" sidePair="width-width,height-height"/>\n    </text>\n  </displayList>\n  <Button/>\n  <transition name="press">\n    <item time="0" type="Scale" target="n1" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="1,1" endValue="0.8,0.8" duration="2"/>\n  </transition>\n  <transition name="release">\n    <item time="0" type="Scale" target="n8_lqd4" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="0" type="Scale" target="n1" tween="true" startValue="0.8,0.8" endValue="1.1,1.1" duration="4"/>\n    <item time="4" type="Scale" target="n1" tween="true" startValue="1.1,1.1" endValue="0.9,0.9" duration="1"/>\n    <item time="5" type="Scale" target="n8_lqd4" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="5" type="Scale" target="n1" tween="true" startValue="0.9,0.9" endValue="1,1" duration="2"/>\n    <item time="7" type="Scale" target="n1" tween="true" startValue="1,1"/>\n  </transition>\n</component>',"sprites.bytes":"//FairyGUI atlas sprites.\n10ozi10 0 402 303 53 76 0\n10ozi11 0 80 0 53 76 0\n10ozi12 0 135 78 53 76 0\n10ozi13 0 184 242 53 76 0\n10ozi14 0 242 320 53 76 0\n10ozi15 0 77 164 53 76 0\n10ozi16 0 80 78 53 76 0\n10ozi1a 0 0 0 78 86 0\n10ozi3 100 878 364 105 64 0\n10ozi5 0 462 181 34 60 0\n10ozi6 0 385 62 34 60 0\n10ozi7 0 385 0 34 60 0\n10ozi8 0 421 0 34 60 0\n10ozi9 0 349 248 34 60 0\n10ozia 0 462 57 34 60 0\n10ozib 0 349 124 34 60 0\n10ozic 0 349 62 34 60 0\n10ozid 0 349 186 34 60 0\n10ozie 0 352 310 34 60 0\n10ozif 0 421 62 34 60 0\n10ozig 0 462 119 34 60 0\n10ozih 0 349 0 34 60 0\n10ozik 0 457 381 53 76 0\n10ozil 0 402 381 53 76 0\n10ozim 0 74 318 53 76 0\n10ozin 0 297 312 53 76 0\n10ozio 0 187 164 53 76 0\n10ozip 0 294 234 53 76 0\n10oziq 0 294 156 53 76 0\n10ozir 0 294 0 53 76 0\n10ozis 0 129 318 53 76 0\n10ozit 0 294 78 53 76 0\n10oziu 0 457 303 53 76 0\n10oziw 0 239 242 53 76 0\n10ozix 0 184 320 53 76 0\n10oziy 0 132 164 53 76 0\n10oziz 0 135 0 53 76 0\nbh1pi72 100 461 891 140 61 0\nbkkmi79 100 163 837 159 52 0\nbkkmi7b 100 0 837 161 133 0\nbkkmi7e 0 478 243 12 50 0\nbkkmi7f 0 462 243 14 52 0\ncvkzibv 100 838 123 164 48 0\ncvkzibw 101 334 552 288 243 0\nd795i8j 100 165 670 141 147 0\nd795i8n 100 0 456 164 212 0\nd795i8q 101 0 129 376 51 0\nf90ni2w 101 0 182 364 142 0\nf90ni2x 0 242 110 43 55 0\nf90ni2y 100 673 776 94 98 0\nf90ni2z 0 462 0 42 55 0\nf90ni33 0 0 408 68 72 0\nf90ni38 100 859 957 83 61 0\nf90ni3a 100 437 227 90 96 0\nf90ni3b 100 461 954 140 61 0\nf90ni3c 100 284 165 244 60 0\nf90ni3e 100 769 718 94 98 0\nf90ni3h 0 402 459 50 50 0\nf90ni3w 100 238 409 171 201 0\nf90ni3x 100 776 504 104 72 0\nf90ni3z 100 882 504 102 106 0\nf90ni41 0 0 88 76 74 0\nf90ni44 109 0 0 645 893 0\nf90ni4f 0 402 243 58 58 0\nf90ni4g 0 70 408 66 74 0\nf90ni4h 106 0 0 645 477 0\nf90ni4j 101 0 851 327 76 0\nf90ni4z 101 378 154 364 142 0\nf90ni50 0 0 366 72 40 0\nf90ni51 0 0 318 72 46 0\nf90ni52 0 138 408 66 46 0\nf90ni5h 101 0 326 336 35 0\nf95yi5s 0 0 164 75 77 0\nf95yi5t 100 411 439 130 130 0\nf95yi62 100 765 364 111 83 0\nf95yi63 100 566 0 270 218 0\nfamjic8 0 0 243 74 73 0\nfamjic9 100 838 173 98 45 0\nfamjica 100 769 818 88 97 0\nfamjicb 100 238 227 197 89 0\nfamjicd 100 238 318 197 89 0\nfamjich 110 0 0 709 945 0\nfamjicj 100 772 578 102 138 0\nfamjick 100 308 612 132 145 0\nfamjico 100 442 571 129 166 0\nfamjicp 100 878 439 110 63 0\nfamjicq 101 0 0 460 127 0\nfamjicu 0 190 0 49 59 0\nfamjicw 100 530 220 233 137 0\nfzp9i87 100 765 321 217 41 0\ni1fpi7u 100 442 739 129 144 0\ni1fpi7v 100 838 0 177 121 0\ni447ic4 101 462 0 418 82 0\nk6rcicy 102 0 0 574 574 0\nk6rcid1 100 0 217 236 237 0\nk6rcid3 0 131 242 51 63 0\nk6rcid5 100 865 786 89 71 0\nk6rcid6 0 206 408 65 71 0\nkdf8ia0 100 876 612 101 70 0\nkdf8ia4 0 76 243 53 53 0\nkdf8ia5 103 0 270 645 717 0\nkdf8ia6 103 0 0 682 268 0\nkdf8ia9 104 0 0 641 736 0\nkdf8iaa 104 0 738 635 111 0\nkdf8iac 0 190 61 45 49 0\nkdf8iad 100 543 439 122 125 0\nl5d5iaf 0 273 408 64 67 0\nl5d5iag 100 859 859 88 96 0\nl5d5iai 107 0 0 645 685 0\nl5d5iak 100 0 670 163 165 0\nmg17i9d 101 334 442 296 108 0\nmgy6ieo 100 573 718 98 135 0\nmk6aiap 105 0 859 582 106 0\nmk6aiaq 101 657 851 315 153 0\nmk6aiar 0 138 456 55 41 0\nmk6aias 102 0 576 501 346 0\nmk6aiat 100 0 972 80 50 0\nmk6aiau 100 769 917 88 96 0\nmk6aiav 105 0 0 612 857 0\nmk6aiaw 0 339 408 61 72 0\nmq3wi81 101 366 298 364 142 0\no8w6idb 100 667 449 107 96 0\no8w6idc 100 163 891 153 118 0\no8w6idi 0 190 112 41 41 0\no8w6idj 0 454 459 49 49 0\noct6i6x 100 632 359 131 78 0\np3j2iam 108 0 0 720 160 0\npy12i6z 100 573 566 90 96 0\nqkcfidw 100 284 102 266 61 0\nqkcfidx 102 503 828 471 164 0\nqqzbi7k 101 0 929 288 80 0\nrj3mi9n 100 308 759 132 69 0\nrj3mi9s 101 632 442 290 406 0\nrj3mi9u 100 673 676 94 98 0\nrn02idn 101 329 851 326 111 0\nrn02ido 100 318 994 113 25 0\nsda6i1s 100 876 684 100 100 0\nsmweieg 102 503 576 484 250 0\nsmweieh 100 284 0 280 100 0\nsmweiei 100 437 359 193 76 0\nu58iic1 100 318 891 141 101 0\nv54ii97 101 462 84 380 68 0\nv54ii9a 100 667 547 103 127 0\nwv3di8w 100 603 876 88 96 0\nwv3di8y 0 242 167 43 63 0\nwv3di8z 101 0 363 332 486 0\nwv3di95 100 0 0 282 215 0\nyqmdidr 0 241 55 49 53 0\nyqmdids 0 242 0 49 53 0\nyqmdidt 100 765 220 227 99 0"};(function t(e,n){if(typeof exports==="object"&&typeof module==="object")module.exports=n();else if(typeof define==="function"&&define.amd)define([],n);else{var i=n();for(var r in i)(typeof exports==="object"?exports:e)[r]=i[r];}})(window,function(){return function(t){var e={};function n(i){if(e[i]){return e[i].exports;}
var r=e[i]={i:i,l:false,exports:{}};t[i].call(r.exports,r,r.exports,n);r.l=true;return r.exports;}
n.m=t;n.c=e;n.d=function(t,e,i){if(!n.o(t,e)){Object.defineProperty(t,e,{enumerable:true,get:i});}};n.r=function(t){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});}
Object.defineProperty(t,"__esModule",{value:true});};n.t=function(t,e){if(e&1)t=n(t);if(e&8)return t;if(e&4&&typeof t==="object"&&t&&t.__esModule)return t;var i=Object.create(null);n.r(i);Object.defineProperty(i,"default",{enumerable:true,value:t});if(e&2&&typeof t!="string")for(var r in t)n.d(i,r,function(e){return t[e];}.bind(null,r));return i;};n.n=function(t){var e=t&&t.__esModule?function e(){return t["default"];}:function e(){return t;};n.d(e,"a",e);return e;};n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e);};n.p="/Users/mofier/site-home/vx-to-h5/dist/public";return n(n.s=7);}([function(t,e,n){"use strict";t.exports=new Proxy({},{get:function t(e,n){var i=e[n];if(typeof i!=="undefined"&&i!==null){return i;}
i=window.PlatformAPI&&window.PlatformAPI[n];if(Object.prototype.toString.call(i)==="[object Function]"){i=i.bind(window.PlatformAPI);}
return i;},set:function t(e,n,i){e[n]=i;return true;}});},function(t,e){function n(t){return t&&t.__esModule?t:{default:t};}
t.exports=n;},function(t,e){function n(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){n=function t(e){return typeof e;};}else{n=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e;};}
return n(t);}
function i(e){if(typeof Symbol==="function"&&n(Symbol.iterator)==="symbol"){t.exports=i=function t(e){return n(e);};}else{t.exports=i=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e);};}
return i(e);}
t.exports=i;},function(t,e,n){var i;i=function(){return this;}();try{i=i||Function("return this")()||(1,eval)("this");}catch(t){if(true)i=window;}
t.exports=i;},function(t,e,n){"use strict";},function(module,exports,__webpack_require__){(function(process,Promise,global,setImmediate){!function(t){if(true)module.exports=t();else{var e;}}(function(){var define,module,exports;return function t(e,n,i){function r(o,s){if(!n[o]){if(!e[o]){var l=typeof _dereq_=="function"&&_dereq_;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u;}
var h=n[o]={exports:{}};e[o][0].call(h.exports,function(t){var n=e[o][1][t];return r(n?n:t);},h,h.exports,t,e,n,i);}
return n[o].exports;}
var a=typeof _dereq_=="function"&&_dereq_;for(var o=0;o<i.length;o++)r(i[o]);return r;}({1:[function(t,e,n){"use strict";e.exports=function(t){var e=t._SomePromiseArray;function n(t){var n=new e(t);var i=n.promise();n.setHowMany(1);n.setUnwrap();n.init();return i;}
t.any=function(t){return n(t);};t.prototype.any=function(){return n(this);};};},{}],2:[function(t,e,n){"use strict";var i;try{throw new Error();}catch(t){i=t;}
var r=t("./schedule");var a=t("./queue");var o=t("./util");function s(){this._customScheduler=false;this._isTickUsed=false;this._lateQueue=new a(16);this._normalQueue=new a(16);this._haveDrainedQueues=false;this._trampolineEnabled=true;var t=this;this.drainQueues=function(){t._drainQueues();};this._schedule=r;}
s.prototype.setScheduler=function(t){var e=this._schedule;this._schedule=t;this._customScheduler=true;return e;};s.prototype.hasCustomScheduler=function(){return this._customScheduler;};s.prototype.enableTrampoline=function(){this._trampolineEnabled=true;};s.prototype.disableTrampolineIfNecessary=function(){if(o.hasDevTools){this._trampolineEnabled=false;}};s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues;};s.prototype.fatalError=function(t,e){if(e){process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n");process.exit(2);}else{this.throwLater(t);}};s.prototype.throwLater=function(t,e){if(arguments.length===1){e=t;t=function(){throw e;};}
if(typeof setTimeout!=="undefined"){setTimeout(function(){t(e);},0);}else try{this._schedule(function(){t(e);});}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n");}};function l(t,e,n){this._lateQueue.push(t,e,n);this._queueTick();}
function u(t,e,n){this._normalQueue.push(t,e,n);this._queueTick();}
function h(t){this._normalQueue._pushOne(t);this._queueTick();}
if(!o.hasDevTools){s.prototype.invokeLater=l;s.prototype.invoke=u;s.prototype.settlePromises=h;}else{s.prototype.invokeLater=function(t,e,n){if(this._trampolineEnabled){l.call(this,t,e,n);}else{this._schedule(function(){setTimeout(function(){t.call(e,n);},100);});}};s.prototype.invoke=function(t,e,n){if(this._trampolineEnabled){u.call(this,t,e,n);}else{this._schedule(function(){t.call(e,n);});}};s.prototype.settlePromises=function(t){if(this._trampolineEnabled){h.call(this,t);}else{this._schedule(function(){t._settlePromises();});}};}
function c(t){while(t.length()>0){_(t);}}
function _(t){var e=t.shift();if(typeof e!=="function"){e._settlePromises();}else{var n=t.shift();var i=t.shift();e.call(n,i);}}
s.prototype._drainQueues=function(){c(this._normalQueue);this._reset();this._haveDrainedQueues=true;c(this._lateQueue);};s.prototype._queueTick=function(){if(!this._isTickUsed){this._isTickUsed=true;this._schedule(this.drainQueues);}};s.prototype._reset=function(){this._isTickUsed=false;};e.exports=s;e.exports.firstLineError=i;},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,i){var r=false;var a=function(t,e){this._reject(e);};var o=function(t,e){e.promiseRejectionQueued=true;e.bindingPromise._then(a,a,null,this,t);};var s=function(t,e){if((this._bitField&50397184)===0){this._resolveCallback(e.target);}};var l=function(t,e){if(!e.promiseRejectionQueued)this._reject(t);};t.prototype.bind=function(a){if(!r){r=true;t.prototype._propagateFrom=i.propagateFromFunction();t.prototype._boundValue=i.boundValueFunction();}
var u=n(a);var h=new t(e);h._propagateFrom(this,1);var c=this._target();h._setBoundTo(u);if(u instanceof t){var _={promiseRejectionQueued:false,promise:h,target:c,bindingPromise:u};c._then(e,o,undefined,h,_);u._then(s,l,undefined,h,_);h._setOnCancel(u);}else{h._resolveCallback(c);}
return h;};t.prototype._setBoundTo=function(t){if(t!==undefined){this._bitField=this._bitField|2097152;this._boundTo=t;}else{this._bitField=this._bitField&~2097152;}};t.prototype._isBound=function(){return(this._bitField&2097152)===2097152;};t.bind=function(e,n){return t.resolve(n).bind(e);};};},{}],4:[function(t,e,n){"use strict";var i;if(typeof Promise!=="undefined")i=Promise;function r(){try{if(Promise===a)Promise=i;}catch(t){}
return a;}
var a=t("./promise")();a.noConflict=r;e.exports=a;},{"./promise":22}],5:[function(t,e,n){"use strict";var i=Object.create;if(i){var r=i(null);var a=i(null);r[" size"]=a[" size"]=0;}
e.exports=function(e){var n=t("./util");var i=n.canEvaluate;var r=n.isIdentifier;var a;var o;if(false){var s,l,u;}
function h(t,i){var r;if(t!=null)r=t[i];if(typeof r!=="function"){var a="Object "+n.classString(t)+" has no method '"+n.toString(i)+"'";throw new e.TypeError(a);}
return r;}
function c(t){var e=this.pop();var n=h(t,e);return n.apply(t,this);}
e.prototype.call=function(t){var e=[].slice.call(arguments,1);if(false){var n;}
e.push(t);return this._then(c,undefined,undefined,e,undefined);};function _(t){return t[this];}
function f(t){var e=+this;if(e<0)e=Math.max(0,e+t.length);return t[e];}
e.prototype.get=function(t){var e=typeof t==="number";var n;if(!e){if(i){var r=o(t);n=r!==null?r:_;}else{n=_;}}else{n=f;}
return this._then(n,undefined,undefined,t,undefined);};};},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,i,r){var a=t("./util");var o=a.tryCatch;var s=a.errorObj;var l=e._async;e.prototype["break"]=e.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");var t=this;var e=t;while(t._isCancellable()){if(!t._cancelBy(e)){if(e._isFollowing()){e._followee().cancel();}else{e._cancelBranched();}
break;}
var n=t._cancellationParent;if(n==null||!n._isCancellable()){if(t._isFollowing()){t._followee().cancel();}else{t._cancelBranched();}
break;}else{if(t._isFollowing())t._followee().cancel();t._setWillBeCancelled();e=t;t=n;}}};e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--;};e.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===undefined||this._branchesRemainingToCancel<=0;};e.prototype._cancelBy=function(t){if(t===this){this._branchesRemainingToCancel=0;this._invokeOnCancel();return true;}else{this._branchHasCancelled();if(this._enoughBranchesHaveCancelled()){this._invokeOnCancel();return true;}}
return false;};e.prototype._cancelBranched=function(){if(this._enoughBranchesHaveCancelled()){this._cancel();}};e.prototype._cancel=function(){if(!this._isCancellable())return;this._setCancelled();l.invoke(this._cancelPromises,this,undefined);};e.prototype._cancelPromises=function(){if(this._length()>0)this._settlePromises();};e.prototype._unsetOnCancel=function(){this._onCancelField=undefined;};e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled();};e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled();};e.prototype._doInvokeOnCancel=function(t,e){if(a.isArray(t)){for(var n=0;n<t.length;++n){this._doInvokeOnCancel(t[n],e);}}else if(t!==undefined){if(typeof t==="function"){if(!e){var i=o(t).call(this._boundValue());if(i===s){this._attachExtraTrace(i.e);l.throwLater(i.e);}}}else{t._resultCancelled(this);}}};e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel();l.invoke(this._doInvokeOnCancel,this,t);};e.prototype._invokeInternalOnCancel=function(){if(this._isCancellable()){this._doInvokeOnCancel(this._onCancel(),true);this._unsetOnCancel();}};e.prototype._resultCancelled=function(){this.cancel();};};},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util");var i=t("./es5").keys;var r=n.tryCatch;var a=n.errorObj;function o(t,o,s){return function(l){var u=s._boundValue();t:for(var h=0;h<t.length;++h){var c=t[h];if(c===Error||c!=null&&c.prototype instanceof Error){if(l instanceof c){return r(o).call(u,l);}}else if(typeof c==="function"){var _=r(c).call(u,l);if(_===a){return _;}else if(_){return r(o).call(u,l);}}else if(n.isObject(l)){var f=i(c);for(var d=0;d<f.length;++d){var p=f[d];if(c[p]!=l[p]){continue t;}}
return r(o).call(u,l);}}
return e;};}
return o;};},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){var e=false;var n=[];t.prototype._promiseCreated=function(){};t.prototype._pushContext=function(){};t.prototype._popContext=function(){return null;};t._peekContext=t.prototype._peekContext=function(){};function i(){this._trace=new i.CapturedTrace(a());}
i.prototype._pushContext=function(){if(this._trace!==undefined){this._trace._promiseCreated=null;n.push(this._trace);}};i.prototype._popContext=function(){if(this._trace!==undefined){var t=n.pop();var e=t._promiseCreated;t._promiseCreated=null;return e;}
return null;};function r(){if(e)return new i();}
function a(){var t=n.length-1;if(t>=0){return n[t];}
return undefined;}
i.CapturedTrace=null;i.create=r;i.deactivateLongStackTraces=function(){};i.activateLongStackTraces=function(){var n=t.prototype._pushContext;var r=t.prototype._popContext;var o=t._peekContext;var s=t.prototype._peekContext;var l=t.prototype._promiseCreated;i.deactivateLongStackTraces=function(){t.prototype._pushContext=n;t.prototype._popContext=r;t._peekContext=o;t.prototype._peekContext=s;t.prototype._promiseCreated=l;e=false;};e=true;t.prototype._pushContext=i.prototype._pushContext;t.prototype._popContext=i.prototype._popContext;t._peekContext=t.prototype._peekContext=a;t.prototype._promiseCreated=function(){var t=this._peekContext();if(t&&t._promiseCreated==null)t._promiseCreated=this;};};return i;};},{}],9:[function(t,e,n){"use strict";e.exports=function(e,n){var i=e._getDomain;var r=e._async;var a=t("./errors").Warning;var o=t("./util");var s=t("./es5");var l=o.canAttachTrace;var u;var h;var c=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/;var _=/\((?:timers\.js):\d+:\d+\)/;var f=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/;var d=null;var p=null;var m=false;var g;var y=!!(o.env("BLUEBIRD_DEBUG")!=0&&(true||false));var v=!!(o.env("BLUEBIRD_WARNINGS")!=0&&(y||o.env("BLUEBIRD_WARNINGS")));var I=!!(o.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(y||o.env("BLUEBIRD_LONG_STACK_TRACES")));var x=o.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(v||!!o.env("BLUEBIRD_W_FORGOTTEN_RETURN"));e.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=t._bitField&~1048576|524288;};e.prototype._ensurePossibleRejectionHandled=function(){if((this._bitField&524288)!==0)return;this._setRejectionIsUnhandled();var t=this;setTimeout(function(){t._notifyUnhandledRejection();},1);};e.prototype._notifyUnhandledRejectionIsHandled=function(){J("rejectionHandled",u,undefined,this);};e.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456;};e.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0;};e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified();J("unhandledRejection",h,t,this);}};e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144;};e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&~262144;};e.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0;};e.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576;};e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&~1048576;if(this._isUnhandledRejectionNotified()){this._unsetUnhandledRejectionIsNotified();this._notifyUnhandledRejectionIsHandled();}};e.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0;};e.prototype._warn=function(t,e,n){return z(t,e,n||this);};e.onPossiblyUnhandledRejection=function(t){var e=i();h=typeof t==="function"?e===null?t:o.domainBind(e,t):undefined;};e.onUnhandledRejectionHandled=function(t){var e=i();u=typeof t==="function"?e===null?t:o.domainBind(e,t):undefined;};var T=function(){};e.longStackTraces=function(){if(r.haveItemsQueued()&&!st.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");}
if(!st.longStackTraces&&tt()){var t=e.prototype._captureStackTrace;var i=e.prototype._attachExtraTrace;var a=e.prototype._dereferenceTrace;st.longStackTraces=true;T=function(){if(r.haveItemsQueued()&&!st.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");}
e.prototype._captureStackTrace=t;e.prototype._attachExtraTrace=i;e.prototype._dereferenceTrace=a;n.deactivateLongStackTraces();r.enableTrampoline();st.longStackTraces=false;};e.prototype._captureStackTrace=U;e.prototype._attachExtraTrace=G;e.prototype._dereferenceTrace=B;n.activateLongStackTraces();r.disableTrampolineIfNecessary();}};e.hasLongStackTraces=function(){return st.longStackTraces&&tt();};var S=function(){try{if(typeof CustomEvent==="function"){var t=new CustomEvent("CustomEvent");o.global.dispatchEvent(t);return function(t,e){var n={detail:e,cancelable:true};s.defineProperty(n,"promise",{value:e.promise});s.defineProperty(n,"reason",{value:e.reason});var i=new CustomEvent(t.toLowerCase(),n);return!o.global.dispatchEvent(i);};}else if(typeof Event==="function"){var t=new Event("CustomEvent");o.global.dispatchEvent(t);return function(t,e){var n=new Event(t.toLowerCase(),{cancelable:true});n.detail=e;s.defineProperty(n,"promise",{value:e.promise});s.defineProperty(n,"reason",{value:e.reason});return!o.global.dispatchEvent(n);};}else{var t=document.createEvent("CustomEvent");t.initCustomEvent("testingtheevent",false,true,{});o.global.dispatchEvent(t);return function(t,e){var n=document.createEvent("CustomEvent");n.initCustomEvent(t.toLowerCase(),false,true,e);return!o.global.dispatchEvent(n);};}}catch(t){}
return function(){return false;};}();var b=function(){if(o.isNode){return function(){return process.emit.apply(process,arguments);};}else{if(!o.global){return function(){return false;};}
return function(t){var e="on"+t.toLowerCase();var n=o.global[e];if(!n)return false;n.apply(o.global,[].slice.call(arguments,1));return true;};}}();function w(t,e){return{promise:e};}
var D={promiseCreated:w,promiseFulfilled:w,promiseRejected:w,promiseResolved:w,promiseCancelled:w,promiseChained:function(t,e,n){return{promise:e,child:n};},warning:function(t,e){return{warning:e};},unhandledRejection:function(t,e,n){return{reason:e,promise:n};},rejectionHandled:w};var C=function(t){var e=false;try{e=b.apply(null,arguments);}catch(t){r.throwLater(t);e=true;}
var n=false;try{n=S(t,D[t].apply(null,arguments));}catch(t){r.throwLater(t);n=true;}
return n||e;};e.config=function(t){t=Object(t);if("longStackTraces"in t){if(t.longStackTraces){e.longStackTraces();}else if(!t.longStackTraces&&e.hasLongStackTraces()){T();}}
if("warnings"in t){var n=t.warnings;st.warnings=!!n;x=st.warnings;if(o.isObject(n)){if("wForgottenReturn"in n){x=!!n.wForgottenReturn;}}}
if("cancellation"in t&&t.cancellation&&!st.cancellation){if(r.haveItemsQueued()){throw new Error("cannot enable cancellation after promises are in use");}
e.prototype._clearCancellationData=R;e.prototype._propagateFrom=L;e.prototype._onCancel=A;e.prototype._setOnCancel=O;e.prototype._attachCancellationCallback=M;e.prototype._execute=P;V=L;st.cancellation=true;}
if("monitoring"in t){if(t.monitoring&&!st.monitoring){st.monitoring=true;e.prototype._fireEvent=C;}else if(!t.monitoring&&st.monitoring){st.monitoring=false;e.prototype._fireEvent=E;}}
return e;};function E(){return false;}
e.prototype._fireEvent=E;e.prototype._execute=function(t,e,n){try{t(e,n);}catch(t){return t;}};e.prototype._onCancel=function(){};e.prototype._setOnCancel=function(t){};e.prototype._attachCancellationCallback=function(t){};e.prototype._captureStackTrace=function(){};e.prototype._attachExtraTrace=function(){};e.prototype._dereferenceTrace=function(){};e.prototype._clearCancellationData=function(){};e.prototype._propagateFrom=function(t,e){};function P(t,e,n){var i=this;try{t(e,n,function(t){if(typeof t!=="function"){throw new TypeError("onCancel must be a function, got: "+o.toString(t));}
i._attachCancellationCallback(t);});}catch(t){return t;}}
function M(t){if(!this._isCancellable())return this;var e=this._onCancel();if(e!==undefined){if(o.isArray(e)){e.push(t);}else{this._setOnCancel([e,t]);}}else{this._setOnCancel(t);}}
function A(){return this._onCancelField;}
function O(t){this._onCancelField=t;}
function R(){this._cancellationParent=undefined;this._onCancelField=undefined;}
function L(t,e){if((e&1)!==0){this._cancellationParent=t;var n=t._branchesRemainingToCancel;if(n===undefined){n=0;}
t._branchesRemainingToCancel=n+1;}
if((e&2)!==0&&t._isBound()){this._setBoundTo(t._boundTo);}}
function F(t,e){if((e&2)!==0&&t._isBound()){this._setBoundTo(t._boundTo);}}
var V=F;function N(){var t=this._boundTo;if(t!==undefined){if(t instanceof e){if(t.isFulfilled()){return t.value();}else{return undefined;}}}
return t;}
function U(){this._trace=new at(this._peekContext());}
function G(t,e){if(l(t)){var n=this._trace;if(n!==undefined){if(e)n=n._parent;}
if(n!==undefined){n.attachExtraTrace(t);}else if(!t.__stackCleaned__){var i=q(t);o.notEnumerableProp(t,"stack",i.message+"\n"+i.stack.join("\n"));o.notEnumerableProp(t,"__stackCleaned__",true);}}}
function B(){this._trace=undefined;}
function k(t,e,n,i,r){if(t===undefined&&e!==null&&x){if(r!==undefined&&r._returnedNonUndefined())return;if((i._bitField&65535)===0)return;if(n)n=n+" ";var a="";var o="";if(e._trace){var s=e._trace.stack.split("\n");var l=X(s);for(var u=l.length-1;u>=0;--u){var h=l[u];if(!_.test(h)){var c=h.match(f);if(c){a="at "+c[1]+":"+c[2]+":"+c[3]+" ";}
break;}}
if(l.length>0){var d=l[0];for(var u=0;u<s.length;++u){if(s[u]===d){if(u>0){o="\n"+s[u-1];}
break;}}}}
var p="a promise was created in a "+n+"handler "+a+"but was not returned from it, "+"see http://goo.gl/rRqMUw"+o;i._warn(p,true,e);}}
function H(t,e){var n=t+" is deprecated and will be removed in a future version.";if(e)n+=" Use "+e+" instead.";return z(n);}
function z(t,n,i){if(!st.warnings)return;var r=new a(t);var o;if(n){i._attachExtraTrace(r);}else if(st.longStackTraces&&(o=e._peekContext())){o.attachExtraTrace(r);}else{var s=q(r);r.stack=s.message+"\n"+s.stack.join("\n");}
if(!C("warning",r)){Z(r,"",true);}}
function j(t,e){for(var n=0;n<e.length-1;++n){e[n].push("From previous event:");e[n]=e[n].join("\n");}
if(n<e.length){e[n]=e[n].join("\n");}
return t+"\n"+e.join("\n");}
function W(t){for(var e=0;e<t.length;++e){if(t[e].length===0||e+1<t.length&&t[e][0]===t[e+1][0]){t.splice(e,1);e--;}}}
function K(t){var e=t[0];for(var n=1;n<t.length;++n){var i=t[n];var r=e.length-1;var a=e[r];var o=-1;for(var s=i.length-1;s>=0;--s){if(i[s]===a){o=s;break;}}
for(var s=o;s>=0;--s){var l=i[s];if(e[r]===l){e.pop();r--;}else{break;}}
e=i;}}
function X(t){var e=[];for(var n=0;n<t.length;++n){var i=t[n];var r="    (No stack trace)"===i||d.test(i);var a=r&&et(i);if(r&&!a){if(m&&i.charAt(0)!==" "){i="    "+i;}
e.push(i);}}
return e;}
function Y(t){var e=t.stack.replace(/\s+$/g,"").split("\n");for(var n=0;n<e.length;++n){var i=e[n];if("    (No stack trace)"===i||d.test(i)){break;}}
if(n>0&&t.name!="SyntaxError"){e=e.slice(n);}
return e;}
function q(t){var e=t.stack;var n=t.toString();e=typeof e==="string"&&e.length>0?Y(t):["    (No stack trace)"];return{message:n,stack:t.name=="SyntaxError"?e:X(e)};}
function Z(t,e,n){if(typeof console!=="undefined"){var i;if(o.isObject(t)){var r=t.stack;i=e+p(r,t);}else{i=e+String(t);}
if(typeof g==="function"){g(i,n);}else if(typeof console.log==="function"||typeof console.log==="object"){console.log(i);}}}
function J(t,e,n,i){var a=false;try{if(typeof e==="function"){a=true;if(t==="rejectionHandled"){e(i);}else{e(n,i);}}}catch(t){r.throwLater(t);}
if(t==="unhandledRejection"){if(!C(t,n,i)&&!a){Z(n,"Unhandled rejection ");}}else{C(t,i);}}
function $(t){var e;if(typeof t==="function"){e="[function "+(t.name||"anonymous")+"]";}else{e=t&&typeof t.toString==="function"?t.toString():o.toString(t);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(e)){try{var i=JSON.stringify(t);e=i;}catch(t){}}
if(e.length===0){e="(empty array)";}}
return "(<"+Q(e)+">, no stack trace)";}
function Q(t){var e=41;if(t.length<e){return t;}
return t.substr(0,e-3)+"...";}
function tt(){return typeof ot==="function";}
var et=function(){return false;};var nt=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function it(t){var e=t.match(nt);if(e){return{fileName:e[1],line:parseInt(e[2],10)};}}
function rt(t,e){if(!tt())return;var n=t.stack.split("\n");var i=e.stack.split("\n");var r=-1;var a=-1;var o;var s;for(var l=0;l<n.length;++l){var u=it(n[l]);if(u){o=u.fileName;r=u.line;break;}}
for(var l=0;l<i.length;++l){var u=it(i[l]);if(u){s=u.fileName;a=u.line;break;}}
if(r<0||a<0||!o||!s||o!==s||r>=a){return;}
et=function(t){if(c.test(t))return true;var e=it(t);if(e){if(e.fileName===o&&(r<=e.line&&e.line<=a)){return true;}}
return false;};}
function at(t){this._parent=t;this._promisesCreated=0;var e=this._length=1+(t===undefined?0:t._length);ot(this,at);if(e>32)this.uncycle();}
o.inherits(at,Error);n.CapturedTrace=at;at.prototype.uncycle=function(){var t=this._length;if(t<2)return;var e=[];var n={};for(var i=0,r=this;r!==undefined;++i){e.push(r);r=r._parent;}
t=this._length=i;for(var i=t-1;i>=0;--i){var a=e[i].stack;if(n[a]===undefined){n[a]=i;}}
for(var i=0;i<t;++i){var o=e[i].stack;var s=n[o];if(s!==undefined&&s!==i){if(s>0){e[s-1]._parent=undefined;e[s-1]._length=1;}
e[i]._parent=undefined;e[i]._length=1;var l=i>0?e[i-1]:this;if(s<t-1){l._parent=e[s+1];l._parent.uncycle();l._length=l._parent._length+1;}else{l._parent=undefined;l._length=1;}
var u=l._length+1;for(var h=i-2;h>=0;--h){e[h]._length=u;u++;}
return;}}};at.prototype.attachExtraTrace=function(t){if(t.__stackCleaned__)return;this.uncycle();var e=q(t);var n=e.message;var i=[e.stack];var r=this;while(r!==undefined){i.push(X(r.stack.split("\n")));r=r._parent;}
K(i);W(i);o.notEnumerableProp(t,"stack",j(n,i));o.notEnumerableProp(t,"__stackCleaned__",true);};var ot=function t(){var e=/^\s*at\s*/;var n=function(t,e){if(typeof t==="string")return t;if(e.name!==undefined&&e.message!==undefined){return e.toString();}
return $(e);};if(typeof Error.stackTraceLimit==="number"&&typeof Error.captureStackTrace==="function"){Error.stackTraceLimit+=6;d=e;p=n;var i=Error.captureStackTrace;et=function(t){return c.test(t);};return function(t,e){Error.stackTraceLimit+=6;i(t,e);Error.stackTraceLimit-=6;};}
var r=new Error();if(typeof r.stack==="string"&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0){d=/@/;p=n;m=true;return function t(e){e.stack=new Error().stack;};}
var a;try{throw new Error();}catch(t){a="stack"in t;}
if(!("stack"in r)&&a&&typeof Error.stackTraceLimit==="number"){d=e;p=n;return function t(e){Error.stackTraceLimit+=6;try{throw new Error();}catch(t){e.stack=t.stack;}
Error.stackTraceLimit-=6;};}
p=function(t,e){if(typeof t==="string")return t;if((typeof e==="object"||typeof e==="function")&&e.name!==undefined&&e.message!==undefined){return e.toString();}
return $(e);};return null;}([]);if(typeof console!=="undefined"&&typeof console.warn!=="undefined"){g=function(t){console.warn(t);};if(o.isNode&&process.stderr.isTTY){g=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n");};}else if(!o.isNode&&typeof new Error().stack==="string"){g=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red");};}}
var st={warnings:v,longStackTraces:false,cancellation:false,monitoring:false};if(I)e.longStackTraces();return{longStackTraces:function(){return st.longStackTraces;},warnings:function(){return st.warnings;},cancellation:function(){return st.cancellation;},monitoring:function(){return st.monitoring;},propagateFromFunction:function(){return V;},boundValueFunction:function(){return N;},checkForgottenReturns:k,setBounds:rt,warn:z,deprecated:H,CapturedTrace:at,fireDomEvent:S,fireGlobalEvent:b};};},{"./errors":12,"./es5":13,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value;}
function n(){throw this.reason;}
t.prototype["return"]=t.prototype.thenReturn=function(n){if(n instanceof t)n.suppressUnhandledRejections();return this._then(e,undefined,undefined,{value:n},undefined);};t.prototype["throw"]=t.prototype.thenThrow=function(t){return this._then(n,undefined,undefined,{reason:t},undefined);};t.prototype.catchThrow=function(t){if(arguments.length<=1){return this._then(undefined,n,undefined,{reason:t},undefined);}else{var e=arguments[1];var i=function(){throw e;};return this.caught(t,i);}};t.prototype.catchReturn=function(n){if(arguments.length<=1){if(n instanceof t)n.suppressUnhandledRejections();return this._then(undefined,e,undefined,{value:n},undefined);}else{var i=arguments[1];if(i instanceof t)i.suppressUnhandledRejections();var r=function(){return i;};return this.caught(n,r);}};};},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.reduce;var i=t.all;function r(){return i(this);}
function a(t,i){return n(t,i,e,e);}
t.prototype.each=function(t){return n(this,t,e,0)._then(r,undefined,undefined,this,undefined);};t.prototype.mapSeries=function(t){return n(this,t,e,e);};t.each=function(t,i){return n(t,i,e,0)._then(r,undefined,undefined,t,undefined);};t.mapSeries=a;};},{}],12:[function(t,e,n){"use strict";var i=t("./es5");var r=i.freeze;var a=t("./util");var o=a.inherits;var s=a.notEnumerableProp;function l(t,e){function n(i){if(!(this instanceof n))return new n(i);s(this,"message",typeof i==="string"?i:e);s(this,"name",t);if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor);}else{Error.call(this);}}
o(n,Error);return n;}
var u,h;var c=l("Warning","warning");var _=l("CancellationError","cancellation error");var f=l("TimeoutError","timeout error");var d=l("AggregateError","aggregate error");try{u=TypeError;h=RangeError;}catch(t){u=l("TypeError","type error");h=l("RangeError","range error");}
var p=("join pop push shift unshift slice filter forEach some "+"every map indexOf lastIndexOf reduce reduceRight sort reverse").split(" ");for(var m=0;m<p.length;++m){if(typeof Array.prototype[p[m]]==="function"){d.prototype[p[m]]=Array.prototype[p[m]];}}
i.defineProperty(d.prototype,"length",{value:0,configurable:false,writable:true,enumerable:true});d.prototype["isOperational"]=true;var g=0;d.prototype.toString=function(){var t=Array(g*4+1).join(" ");var e="\n"+t+"AggregateError of:"+"\n";g++;t=Array(g*4+1).join(" ");for(var n=0;n<this.length;++n){var i=this[n]===this?"[Circular AggregateError]":this[n]+"";var r=i.split("\n");for(var a=0;a<r.length;++a){r[a]=t+r[a];}
i=r.join("\n");e+=i+"\n";}
g--;return e;};function y(t){if(!(this instanceof y))return new y(t);s(this,"name","OperationalError");s(this,"message",t);this.cause=t;this["isOperational"]=true;if(t instanceof Error){s(this,"message",t.message);s(this,"stack",t.stack);}else if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor);}}
o(y,Error);var v=Error["__BluebirdErrorTypes__"];if(!v){v=r({CancellationError:_,TimeoutError:f,OperationalError:y,RejectionError:y,AggregateError:d});i.defineProperty(Error,"__BluebirdErrorTypes__",{value:v,writable:false,enumerable:false,configurable:false});}
e.exports={Error:Error,TypeError:u,RangeError:h,CancellationError:v.CancellationError,OperationalError:v.OperationalError,TimeoutError:v.TimeoutError,AggregateError:v.AggregateError,Warning:c};},{"./es5":13,"./util":36}],13:[function(t,e,n){var i=function(){"use strict";return this===undefined;}();if(i){e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:i,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!!(!n||n.writable||n.set);}};}else{var r={}.hasOwnProperty;var a={}.toString;var o={}.constructor.prototype;var s=function(t){var e=[];for(var n in t){if(r.call(t,n)){e.push(n);}}
return e;};var l=function(t,e){return{value:t[e]};};var u=function(t,e,n){t[e]=n.value;return t;};var h=function(t){return t;};var c=function(t){try{return Object(t).constructor.prototype;}catch(t){return o;}};var _=function(t){try{return a.call(t)==="[object Array]";}catch(t){return false;}};e.exports={isArray:_,keys:s,names:s,defineProperty:u,getDescriptor:l,freeze:h,getPrototypeOf:c,isES5:i,propertyIsWritable:function(){return true;}};}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,i){return n(this,t,i,e);};t.filter=function(t,i,r){return n(t,i,r,e);};};},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n,i){var r=t("./util");var a=e.CancellationError;var o=r.errorObj;var s=t("./catch_filter")(i);function l(t,e,n){this.promise=t;this.type=e;this.handler=n;this.called=false;this.cancelPromise=null;}
l.prototype.isFinallyHandler=function(){return this.type===0;};function u(t){this.finallyHandler=t;}
u.prototype._resultCancelled=function(){h(this.finallyHandler);};function h(t,e){if(t.cancelPromise!=null){if(arguments.length>1){t.cancelPromise._reject(e);}else{t.cancelPromise._cancel();}
t.cancelPromise=null;return true;}
return false;}
function c(){return f.call(this,this.promise._target()._settledValue());}
function _(t){if(h(this,t))return;o.e=t;return o;}
function f(t){var r=this.promise;var s=this.handler;if(!this.called){this.called=true;var l=this.isFinallyHandler()?s.call(r._boundValue()):s.call(r._boundValue(),t);if(l===i){return l;}else if(l!==undefined){r._setReturnedNonUndefined();var f=n(l,r);if(f instanceof e){if(this.cancelPromise!=null){if(f._isCancelled()){var d=new a("late cancellation observer");r._attachExtraTrace(d);o.e=d;return o;}else if(f.isPending()){f._attachCancellationCallback(new u(this));}}
return f._then(c,_,undefined,this,undefined);}}}
if(r.isRejected()){h(this);o.e=t;return o;}else{h(this);return t;}}
e.prototype._passThrough=function(t,e,n,i){if(typeof t!=="function")return this.then();return this._then(n,i,undefined,new l(this,e,t),undefined);};e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThrough(t,0,f,f);};e.prototype.tap=function(t){return this._passThrough(t,1,f);};e.prototype.tapCatch=function(t){var n=arguments.length;if(n===1){return this._passThrough(t,1,undefined,f);}else{var i=new Array(n-1),a=0,o;for(o=0;o<n-1;++o){var l=arguments[o];if(r.isObject(l)){i[a++]=l;}else{return e.reject(new TypeError("tapCatch statement predicate: "+"expecting an object but got "+r.classString(l)));}}
i.length=a;var u=arguments[o];return this._passThrough(s(i,u,this),1,undefined,f);}};return l;};},{"./catch_filter":7,"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,a,o){var s=t("./errors");var l=s.TypeError;var u=t("./util");var h=u.errorObj;var c=u.tryCatch;var _=[];function f(t,n,i){for(var a=0;a<n.length;++a){i._pushContext();var o=c(n[a])(t);i._popContext();if(o===h){i._pushContext();var s=e.reject(h.e);i._popContext();return s;}
var l=r(o,i);if(l instanceof e)return l;}
return null;}
function d(t,n,r,a){if(o.cancellation()){var s=new e(i);var l=this._finallyPromise=new e(i);this._promise=s.lastly(function(){return l;});s._captureStackTrace();s._setOnCancel(this);}else{var u=this._promise=new e(i);u._captureStackTrace();}
this._stack=a;this._generatorFunction=t;this._receiver=n;this._generator=undefined;this._yieldHandlers=typeof r==="function"?[r].concat(_):_;this._yieldedPromise=null;this._cancellationPhase=false;}
u.inherits(d,a);d.prototype._isResolved=function(){return this._promise===null;};d.prototype._cleanup=function(){this._promise=this._generator=null;if(o.cancellation()&&this._finallyPromise!==null){this._finallyPromise._fulfill();this._finallyPromise=null;}};d.prototype._promiseCancelled=function(){if(this._isResolved())return;var t=typeof this._generator["return"]!=="undefined";var n;if(!t){var i=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=i;this._promise._attachExtraTrace(i);this._promise._pushContext();n=c(this._generator["throw"]).call(this._generator,i);this._promise._popContext();}else{this._promise._pushContext();n=c(this._generator["return"]).call(this._generator,undefined);this._promise._popContext();}
this._cancellationPhase=true;this._yieldedPromise=null;this._continue(n);};d.prototype._promiseFulfilled=function(t){this._yieldedPromise=null;this._promise._pushContext();var e=c(this._generator.next).call(this._generator,t);this._promise._popContext();this._continue(e);};d.prototype._promiseRejected=function(t){this._yieldedPromise=null;this._promise._attachExtraTrace(t);this._promise._pushContext();var e=c(this._generator["throw"]).call(this._generator,t);this._promise._popContext();this._continue(e);};d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null;t.cancel();}};d.prototype.promise=function(){return this._promise;};d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=undefined;this._promiseFulfilled(undefined);};d.prototype._continue=function(t){var n=this._promise;if(t===h){this._cleanup();if(this._cancellationPhase){return n.cancel();}else{return n._rejectCallback(t.e,false);}}
var i=t.value;if(t.done===true){this._cleanup();if(this._cancellationPhase){return n.cancel();}else{return n._resolveCallback(i);}}else{var a=r(i,this._promise);if(!(a instanceof e)){a=f(a,this._yieldHandlers,this._promise);if(a===null){this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(i))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));return;}}
a=a._target();var o=a._bitField;if((o&50397184)===0){this._yieldedPromise=a;a._proxy(this,null);}else if((o&33554432)!==0){e._async.invoke(this._promiseFulfilled,this,a._value());}else if((o&16777216)!==0){e._async.invoke(this._promiseRejected,this,a._reason());}else{this._promiseCancelled();}}};e.coroutine=function(t,e){if(typeof t!=="function"){throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");}
var n=Object(e).yieldHandler;var i=d;var r=new Error().stack;return function(){var e=t.apply(this,arguments);var a=new i(undefined,undefined,n,r);var o=a.promise();a._generator=e;a._promiseFulfilled(undefined);return o;};};e.coroutine.addYieldHandler=function(t){if(typeof t!=="function"){throw new l("expecting a function but got "+u.classString(t));}
_.push(t);};e.spawn=function(t){o.deprecated("Promise.spawn()","Promise.coroutine()");if(typeof t!=="function"){return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");}
var i=new d(t,this);var r=i.promise();i._run(e.spawn);return r;};};},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,a,o){var s=t("./util");var l=s.canEvaluate;var u=s.tryCatch;var h=s.errorObj;var c;if(false){var _,f,d,p,m,g,y;}
e.join=function(){var t=arguments.length-1;var e;if(t>0&&typeof arguments[t]==="function"){e=arguments[t];if(false){var i,r,a,o,s,l,u,h;}}
var c=[].slice.call(arguments);if(e)c.pop();var h=new n(c).promise();return e!==undefined?h.spread(e):h;};};},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,a,o){var s=e._getDomain;var l=t("./util");var u=l.tryCatch;var h=l.errorObj;var c=e._async;function _(t,e,n,i){this.constructor$(t);this._promise._captureStackTrace();var r=s();this._callback=r===null?e:l.domainBind(r,e);this._preservedValues=i===a?new Array(this.length()):null;this._limit=n;this._inFlight=0;this._queue=[];c.invoke(this._asyncInit,this,undefined);}
l.inherits(_,n);_.prototype._asyncInit=function(){this._init$(undefined,-2);};_.prototype._init=function(){};_.prototype._promiseFulfilled=function(t,n){var i=this._values;var a=this.length();var s=this._preservedValues;var l=this._limit;if(n<0){n=n*-1-1;i[n]=t;if(l>=1){this._inFlight--;this._drainQueue();if(this._isResolved())return true;}}else{if(l>=1&&this._inFlight>=l){i[n]=t;this._queue.push(n);return false;}
if(s!==null)s[n]=t;var c=this._promise;var _=this._callback;var f=c._boundValue();c._pushContext();var d=u(_).call(f,t,n,a);var p=c._popContext();o.checkForgottenReturns(d,p,s!==null?"Promise.filter":"Promise.map",c);if(d===h){this._reject(d.e);return true;}
var m=r(d,this._promise);if(m instanceof e){m=m._target();var g=m._bitField;if((g&50397184)===0){if(l>=1)this._inFlight++;i[n]=m;m._proxy(this,(n+1)*-1);return false;}else if((g&33554432)!==0){d=m._value();}else if((g&16777216)!==0){this._reject(m._reason());return true;}else{this._cancel();return true;}}
i[n]=d;}
var y=++this._totalResolved;if(y>=a){if(s!==null){this._filter(i,s);}else{this._resolve(i);}
return true;}
return false;};_.prototype._drainQueue=function(){var t=this._queue;var e=this._limit;var n=this._values;while(t.length>0&&this._inFlight<e){if(this._isResolved())return;var i=t.pop();this._promiseFulfilled(n[i],i);}};_.prototype._filter=function(t,e){var n=e.length;var i=new Array(n);var r=0;for(var a=0;a<n;++a){if(t[a])i[r++]=e[a];}
i.length=r;this._resolve(i);};_.prototype.preservedValues=function(){return this._preservedValues;};function f(t,n,r,a){if(typeof n!=="function"){return i("expecting a function but got "+l.classString(n));}
var o=0;if(r!==undefined){if(typeof r==="object"&&r!==null){if(typeof r.concurrency!=="number"){return e.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(r.concurrency)));}
o=r.concurrency;}else{return e.reject(new TypeError("options argument must be an object but it is "+l.classString(r)));}}
o=typeof o==="number"&&isFinite(o)&&o>=1?o:0;return new _(t,n,o,a).promise();}
e.prototype.map=function(t,e){return f(this,t,e,null);};e.map=function(t,e,n,i){return f(t,e,n,i);};};},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,a){var o=t("./util");var s=o.tryCatch;e.method=function(t){if(typeof t!=="function"){throw new e.TypeError("expecting a function but got "+o.classString(t));}
return function(){var i=new e(n);i._captureStackTrace();i._pushContext();var r=s(t).apply(this,arguments);var o=i._popContext();a.checkForgottenReturns(r,o,"Promise.method",i);i._resolveFromSyncValue(r);return i;};};e.attempt=e["try"]=function(t){if(typeof t!=="function"){return r("expecting a function but got "+o.classString(t));}
var i=new e(n);i._captureStackTrace();i._pushContext();var l;if(arguments.length>1){a.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1];var h=arguments[2];l=o.isArray(u)?s(t).apply(h,u):s(t).call(h,u);}else{l=s(t)();}
var c=i._popContext();a.checkForgottenReturns(l,c,"Promise.try",i);i._resolveFromSyncValue(l);return i;};e.prototype._resolveFromSyncValue=function(t){if(t===o.errorObj){this._rejectCallback(t.e,false);}else{this._resolveCallback(t,true);}};};},{"./util":36}],20:[function(t,e,n){"use strict";var i=t("./util");var r=i.maybeWrapAsError;var a=t("./errors");var o=a.OperationalError;var s=t("./es5");function l(t){return t instanceof Error&&s.getPrototypeOf(t)===Error.prototype;}
var u=/^(?:name|message|stack|cause)$/;function h(t){var e;if(l(t)){e=new o(t);e.name=t.name;e.message=t.message;e.stack=t.stack;var n=s.keys(t);for(var r=0;r<n.length;++r){var a=n[r];if(!u.test(a)){e[a]=t[a];}}
return e;}
i.markAsOriginatingFromRejection(t);return t;}
function c(t,e){return function(n,i){if(t===null)return;if(n){var a=h(r(n));t._attachExtraTrace(a);t._reject(a);}else if(!e){t._fulfill(i);}else{var o=[].slice.call(arguments,1);t._fulfill(o);}
t=null;};}
e.exports=c;},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util");var i=e._async;var r=n.tryCatch;var a=n.errorObj;function o(t,e){var o=this;if(!n.isArray(t))return s.call(o,t,e);var l=r(e).apply(o._boundValue(),[null].concat(t));if(l===a){i.throwLater(l.e);}}
function s(t,e){var n=this;var o=n._boundValue();var s=t===undefined?r(e).call(o,null):r(e).call(o,null,t);if(s===a){i.throwLater(s.e);}}
function l(t,e){var n=this;if(!t){var o=new Error(t+"");o.cause=t;t=o;}
var s=r(e).call(n._boundValue(),t);if(s===a){i.throwLater(s.e);}}
e.prototype.asCallback=e.prototype.nodeify=function(t,e){if(typeof t=="function"){var n=s;if(e!==undefined&&Object(e).spread){n=o;}
this._then(n,l,undefined,this,t);}
return this;};};},{"./util":36}],22:[function(t,e,n){"use strict";e.exports=function(){var n=function(){return new f("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n");};var i=function(){return new M.PromiseInspection(this._target());};var r=function(t){return M.reject(new f(t));};function a(){}
var o={};var s=t("./util");var l;if(s.isNode){l=function(){var t=process.domain;if(t===undefined)t=null;return t;};}else{l=function(){return null;};}
s.notEnumerableProp(M,"_getDomain",l);var u=t("./es5");var h=t("./async");var c=new h();u.defineProperty(M,"_async",{value:c});var _=t("./errors");var f=M.TypeError=_.TypeError;M.RangeError=_.RangeError;var d=M.CancellationError=_.CancellationError;M.TimeoutError=_.TimeoutError;M.OperationalError=_.OperationalError;M.RejectionError=_.OperationalError;M.AggregateError=_.AggregateError;var p=function(){};var m={};var g={};var y=t("./thenables")(M,p);var v=t("./promise_array")(M,p,y,r,a);var I=t("./context")(M);var x=I.create;var T=t("./debuggability")(M,I);var S=T.CapturedTrace;var b=t("./finally")(M,y,g);var w=t("./catch_filter")(g);var D=t("./nodeback");var C=s.errorObj;var E=s.tryCatch;function P(t,e){if(t==null||t.constructor!==M){throw new f("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");}
if(typeof e!=="function"){throw new f("expecting a function but got "+s.classString(e));}}
function M(t){if(t!==p){P(this,t);}
this._bitField=0;this._fulfillmentHandler0=undefined;this._rejectionHandler0=undefined;this._promise0=undefined;this._receiver0=undefined;this._resolveFromExecutor(t);this._promiseCreated();this._fireEvent("promiseCreated",this);}
M.prototype.toString=function(){return "[object Promise]";};M.prototype.caught=M.prototype["catch"]=function(t){var e=arguments.length;if(e>1){var n=new Array(e-1),i=0,a;for(a=0;a<e-1;++a){var o=arguments[a];if(s.isObject(o)){n[i++]=o;}else{return r("Catch statement predicate: "+"expecting an object but got "+s.classString(o));}}
n.length=i;t=arguments[a];return this.then(undefined,w(n,t,this));}
return this.then(undefined,t);};M.prototype.reflect=function(){return this._then(i,i,undefined,this,undefined);};M.prototype.then=function(t,e){if(T.warnings()&&arguments.length>0&&typeof t!=="function"&&typeof e!=="function"){var n=".then() only accepts functions but was passed: "+s.classString(t);if(arguments.length>1){n+=", "+s.classString(e);}
this._warn(n);}
return this._then(t,e,undefined,undefined,undefined);};M.prototype.done=function(t,e){var n=this._then(t,e,undefined,undefined,undefined);n._setIsFinal();};M.prototype.spread=function(t){if(typeof t!=="function"){return r("expecting a function but got "+s.classString(t));}
return this.all()._then(t,undefined,undefined,m,undefined);};M.prototype.toJSON=function(){var t={isFulfilled:false,isRejected:false,fulfillmentValue:undefined,rejectionReason:undefined};if(this.isFulfilled()){t.fulfillmentValue=this.value();t.isFulfilled=true;}else if(this.isRejected()){t.rejectionReason=this.reason();t.isRejected=true;}
return t;};M.prototype.all=function(){if(arguments.length>0){this._warn(".all() was passed arguments but it does not take any");}
return new v(this).promise();};M.prototype.error=function(t){return this.caught(s.originatesFromRejection,t);};M.getNewLibraryCopy=e.exports;M.is=function(t){return t instanceof M;};M.fromNode=M.fromCallback=function(t){var e=new M(p);e._captureStackTrace();var n=arguments.length>1?!!Object(arguments[1]).multiArgs:false;var i=E(t)(D(e,n));if(i===C){e._rejectCallback(i.e,true);}
if(!e._isFateSealed())e._setAsyncGuaranteed();return e;};M.all=function(t){return new v(t).promise();};M.cast=function(t){var e=y(t);if(!(e instanceof M)){e=new M(p);e._captureStackTrace();e._setFulfilled();e._rejectionHandler0=t;}
return e;};M.resolve=M.fulfilled=M.cast;M.reject=M.rejected=function(t){var e=new M(p);e._captureStackTrace();e._rejectCallback(t,true);return e;};M.setScheduler=function(t){if(typeof t!=="function"){throw new f("expecting a function but got "+s.classString(t));}
return c.setScheduler(t);};M.prototype._then=function(t,e,n,i,r){var a=r!==undefined;var o=a?r:new M(p);var u=this._target();var h=u._bitField;if(!a){o._propagateFrom(this,3);o._captureStackTrace();if(i===undefined&&(this._bitField&2097152)!==0){if(!((h&50397184)===0)){i=this._boundValue();}else{i=u===this?undefined:this._boundTo;}}
this._fireEvent("promiseChained",this,o);}
var _=l();if(!((h&50397184)===0)){var f,m,g=u._settlePromiseCtx;if((h&33554432)!==0){m=u._rejectionHandler0;f=t;}else if((h&16777216)!==0){m=u._fulfillmentHandler0;f=e;u._unsetRejectionIsUnhandled();}else{g=u._settlePromiseLateCancellationObserver;m=new d("late cancellation observer");u._attachExtraTrace(m);f=e;}
c.invoke(g,u,{handler:_===null?f:typeof f==="function"&&s.domainBind(_,f),promise:o,receiver:i,value:m});}else{u._addCallbacks(t,e,o,i,_);}
return o;};M.prototype._length=function(){return this._bitField&65535;};M.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0;};M.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864;};M.prototype._setLength=function(t){this._bitField=this._bitField&-65536|t&65535;};M.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432;this._fireEvent("promiseFulfilled",this);};M.prototype._setRejected=function(){this._bitField=this._bitField|16777216;this._fireEvent("promiseRejected",this);};M.prototype._setFollowing=function(){this._bitField=this._bitField|67108864;this._fireEvent("promiseResolved",this);};M.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304;};M.prototype._isFinal=function(){return(this._bitField&4194304)>0;};M.prototype._unsetCancelled=function(){this._bitField=this._bitField&~65536;};M.prototype._setCancelled=function(){this._bitField=this._bitField|65536;this._fireEvent("promiseCancelled",this);};M.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608;};M.prototype._setAsyncGuaranteed=function(){if(c.hasCustomScheduler())return;this._bitField=this._bitField|134217728;};M.prototype._receiverAt=function(t){var e=t===0?this._receiver0:this[t*4-4+3];if(e===o){return undefined;}else if(e===undefined&&this._isBound()){return this._boundValue();}
return e;};M.prototype._promiseAt=function(t){return this[t*4-4+2];};M.prototype._fulfillmentHandlerAt=function(t){return this[t*4-4+0];};M.prototype._rejectionHandlerAt=function(t){return this[t*4-4+1];};M.prototype._boundValue=function(){};M.prototype._migrateCallback0=function(t){var e=t._bitField;var n=t._fulfillmentHandler0;var i=t._rejectionHandler0;var r=t._promise0;var a=t._receiverAt(0);if(a===undefined)a=o;this._addCallbacks(n,i,r,a,null);};M.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e);var i=t._rejectionHandlerAt(e);var r=t._promiseAt(e);var a=t._receiverAt(e);if(a===undefined)a=o;this._addCallbacks(n,i,r,a,null);};M.prototype._addCallbacks=function(t,e,n,i,r){var a=this._length();if(a>=65535-4){a=0;this._setLength(0);}
if(a===0){this._promise0=n;this._receiver0=i;if(typeof t==="function"){this._fulfillmentHandler0=r===null?t:s.domainBind(r,t);}
if(typeof e==="function"){this._rejectionHandler0=r===null?e:s.domainBind(r,e);}}else{var o=a*4-4;this[o+2]=n;this[o+3]=i;if(typeof t==="function"){this[o+0]=r===null?t:s.domainBind(r,t);}
if(typeof e==="function"){this[o+1]=r===null?e:s.domainBind(r,e);}}
this._setLength(a+1);return a;};M.prototype._proxy=function(t,e){this._addCallbacks(undefined,undefined,e,t,null);};M.prototype._resolveCallback=function(t,e){if((this._bitField&117506048)!==0)return;if(t===this)return this._rejectCallback(n(),false);var i=y(t,this);if(!(i instanceof M))return this._fulfill(t);if(e)this._propagateFrom(i,2);var r=i._target();if(r===this){this._reject(n());return;}
var a=r._bitField;if((a&50397184)===0){var o=this._length();if(o>0)r._migrateCallback0(this);for(var s=1;s<o;++s){r._migrateCallbackAt(this,s);}
this._setFollowing();this._setLength(0);this._setFollowee(r);}else if((a&33554432)!==0){this._fulfill(r._value());}else if((a&16777216)!==0){this._reject(r._reason());}else{var l=new d("late cancellation observer");r._attachExtraTrace(l);this._reject(l);}};M.prototype._rejectCallback=function(t,e,n){var i=s.ensureErrorObject(t);var r=i===t;if(!r&&!n&&T.warnings()){var a="a promise was rejected with a non-error: "+s.classString(t);this._warn(a,true);}
this._attachExtraTrace(i,e?r:false);this._reject(t);};M.prototype._resolveFromExecutor=function(t){if(t===p)return;var e=this;this._captureStackTrace();this._pushContext();var n=true;var i=this._execute(t,function(t){e._resolveCallback(t);},function(t){e._rejectCallback(t,n);});n=false;this._popContext();if(i!==undefined){e._rejectCallback(i,true);}};M.prototype._settlePromiseFromHandler=function(t,e,n,i){var r=i._bitField;if((r&65536)!==0)return;i._pushContext();var a;if(e===m){if(!n||typeof n.length!=="number"){a=C;a.e=new f("cannot .spread() a non-array: "+s.classString(n));}else{a=E(t).apply(this._boundValue(),n);}}else{a=E(t).call(e,n);}
var o=i._popContext();r=i._bitField;if((r&65536)!==0)return;if(a===g){i._reject(n);}else if(a===C){i._rejectCallback(a.e,false);}else{T.checkForgottenReturns(a,o,"",i,this);i._resolveCallback(a);}};M.prototype._target=function(){var t=this;while(t._isFollowing())t=t._followee();return t;};M.prototype._followee=function(){return this._rejectionHandler0;};M.prototype._setFollowee=function(t){this._rejectionHandler0=t;};M.prototype._settlePromise=function(t,e,n,r){var o=t instanceof M;var s=this._bitField;var l=(s&134217728)!==0;if((s&65536)!==0){if(o)t._invokeInternalOnCancel();if(n instanceof b&&n.isFinallyHandler()){n.cancelPromise=t;if(E(e).call(n,r)===C){t._reject(C.e);}}else if(e===i){t._fulfill(i.call(n));}else if(n instanceof a){n._promiseCancelled(t);}else if(o||t instanceof v){t._cancel();}else{n.cancel();}}else if(typeof e==="function"){if(!o){e.call(n,r,t);}else{if(l)t._setAsyncGuaranteed();this._settlePromiseFromHandler(e,n,r,t);}}else if(n instanceof a){if(!n._isResolved()){if((s&33554432)!==0){n._promiseFulfilled(r,t);}else{n._promiseRejected(r,t);}}}else if(o){if(l)t._setAsyncGuaranteed();if((s&33554432)!==0){t._fulfill(r);}else{t._reject(r);}}};M.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler;var n=t.promise;var i=t.receiver;var r=t.value;if(typeof e==="function"){if(!(n instanceof M)){e.call(i,r,n);}else{this._settlePromiseFromHandler(e,i,r,n);}}else if(n instanceof M){n._reject(r);}};M.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value);};M.prototype._settlePromise0=function(t,e,n){var i=this._promise0;var r=this._receiverAt(0);this._promise0=undefined;this._receiver0=undefined;this._settlePromise(i,t,r,e);};M.prototype._clearCallbackDataAtIndex=function(t){var e=t*4-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=undefined;};M.prototype._fulfill=function(t){var e=this._bitField;if((e&117506048)>>>16)return;if(t===this){var i=n();this._attachExtraTrace(i);return this._reject(i);}
this._setFulfilled();this._rejectionHandler0=t;if((e&65535)>0){if((e&134217728)!==0){this._settlePromises();}else{c.settlePromises(this);}
this._dereferenceTrace();}};M.prototype._reject=function(t){var e=this._bitField;if((e&117506048)>>>16)return;this._setRejected();this._fulfillmentHandler0=t;if(this._isFinal()){return c.fatalError(t,s.isNode);}
if((e&65535)>0){c.settlePromises(this);}else{this._ensurePossibleRejectionHandled();}};M.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var i=this._fulfillmentHandlerAt(n);var r=this._promiseAt(n);var a=this._receiverAt(n);this._clearCallbackDataAtIndex(n);this._settlePromise(r,i,a,e);}};M.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var i=this._rejectionHandlerAt(n);var r=this._promiseAt(n);var a=this._receiverAt(n);this._clearCallbackDataAtIndex(n);this._settlePromise(r,i,a,e);}};M.prototype._settlePromises=function(){var t=this._bitField;var e=t&65535;if(e>0){if((t&16842752)!==0){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t);this._rejectPromises(e,n);}else{var i=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,i,t);this._fulfillPromises(e,i);}
this._setLength(0);}
this._clearCancellationData();};M.prototype._settledValue=function(){var t=this._bitField;if((t&33554432)!==0){return this._rejectionHandler0;}else if((t&16777216)!==0){return this._fulfillmentHandler0;}};function A(t){this.promise._resolveCallback(t);}
function O(t){this.promise._rejectCallback(t,false);}
M.defer=M.pending=function(){T.deprecated("Promise.defer","new Promise");var t=new M(p);return{promise:t,resolve:A,reject:O};};s.notEnumerableProp(M,"_makeSelfResolutionError",n);t("./method")(M,p,y,r,T);t("./bind")(M,p,y,T);t("./cancel")(M,v,r,T);t("./direct_resolve")(M);t("./synchronous_inspection")(M);t("./join")(M,v,y,p,c,l);M.Promise=M;M.version="3.5.3";t("./map.js")(M,v,r,y,p,T);t("./call_get.js")(M);t("./using.js")(M,r,y,x,p,T);t("./timers.js")(M,p,T);t("./generators.js")(M,r,p,y,a,T);t("./nodeify.js")(M);t("./promisify.js")(M,p);t("./props.js")(M,v,y,r);t("./race.js")(M,p,y,r);t("./reduce.js")(M,v,r,y,p,T);t("./settle.js")(M,v,T);t("./some.js")(M,v,r);t("./filter.js")(M,p);t("./each.js")(M,p);t("./any.js")(M);s.toFastProperties(M);s.toFastProperties(M.prototype);function R(t){var e=new M(p);e._fulfillmentHandler0=t;e._rejectionHandler0=t;e._promise0=t;e._receiver0=t;}
R({a:1});R({b:2});R({c:3});R(1);R(function(){});R(undefined);R(false);R(new M(p));T.setBounds(h.firstLineError,s.lastLineError);return M;};},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,a){var o=t("./util");var s=o.isArray;function l(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map();}}
function u(t){var i=this._promise=new e(n);if(t instanceof e){i._propagateFrom(t,3);}
i._setOnCancel(this);this._values=t;this._length=0;this._totalResolved=0;this._init(undefined,-2);}
o.inherits(u,a);u.prototype.length=function(){return this._length;};u.prototype.promise=function(){return this._promise;};u.prototype._init=function t(n,a){var s=i(this._values,this._promise);if(s instanceof e){s=s._target();var u=s._bitField;this._values=s;if((u&50397184)===0){this._promise._setAsyncGuaranteed();return s._then(t,this._reject,undefined,this,a);}else if((u&33554432)!==0){s=s._value();}else if((u&16777216)!==0){return this._reject(s._reason());}else{return this._cancel();}}
s=o.asArray(s);if(s===null){var h=r("expecting an array or an iterable object but got "+o.classString(s)).reason();this._promise._rejectCallback(h,false);return;}
if(s.length===0){if(a===-5){this._resolveEmptyArray();}else{this._resolve(l(a));}
return;}
this._iterate(s);};u.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n;this._values=this.shouldCopyValues()?new Array(n):this._values;var r=this._promise;var a=false;var o=null;for(var s=0;s<n;++s){var l=i(t[s],r);if(l instanceof e){l=l._target();o=l._bitField;}else{o=null;}
if(a){if(o!==null){l.suppressUnhandledRejections();}}else if(o!==null){if((o&50397184)===0){l._proxy(this,s);this._values[s]=l;}else if((o&33554432)!==0){a=this._promiseFulfilled(l._value(),s);}else if((o&16777216)!==0){a=this._promiseRejected(l._reason(),s);}else{a=this._promiseCancelled(s);}}else{a=this._promiseFulfilled(l,s);}}
if(!a)r._setAsyncGuaranteed();};u.prototype._isResolved=function(){return this._values===null;};u.prototype._resolve=function(t){this._values=null;this._promise._fulfill(t);};u.prototype._cancel=function(){if(this._isResolved()||!this._promise._isCancellable())return;this._values=null;this._promise._cancel();};u.prototype._reject=function(t){this._values=null;this._promise._rejectCallback(t,false);};u.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){this._resolve(this._values);return true;}
return false;};u.prototype._promiseCancelled=function(){this._cancel();return true;};u.prototype._promiseRejected=function(t){this._totalResolved++;this._reject(t);return true;};u.prototype._resultCancelled=function(){if(this._isResolved())return;var t=this._values;this._cancel();if(t instanceof e){t.cancel();}else{for(var n=0;n<t.length;++n){if(t[n]instanceof e){t[n].cancel();}}}};u.prototype.shouldCopyValues=function(){return true;};u.prototype.getActualLength=function(t){return t;};return u;};},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){var i={};var r=t("./util");var a=t("./nodeback");var o=r.withAppended;var s=r.maybeWrapAsError;var l=r.canEvaluate;var u=t("./errors").TypeError;var h="Async";var c={__isPromisified__:true};var _=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"];var f=new RegExp("^(?:"+_.join("|")+")$");var d=function(t){return r.isIdentifier(t)&&t.charAt(0)!=="_"&&t!=="constructor";};function p(t){return!f.test(t);}
function m(t){try{return t.__isPromisified__===true;}catch(t){return false;}}
function g(t,e,n){var i=r.getDataPropertyOrDefault(t,e+n,c);return i?m(i):false;}
function y(t,e,n){for(var i=0;i<t.length;i+=2){var r=t[i];if(n.test(r)){var a=r.replace(n,"");for(var o=0;o<t.length;o+=2){if(t[o]===a){throw new u("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e));}}}}}
function v(t,e,n,i){var a=r.inheritedDataKeys(t);var o=[];for(var s=0;s<a.length;++s){var l=a[s];var u=t[l];var h=i===d?true:d(l,u,t);if(typeof u==="function"&&!m(u)&&!g(t,l,e)&&i(l,u,t,h)){o.push(l,u);}}
y(o,e,n);return o;}
var I=function(t){return t.replace(/([$])/,"\\$");};var x;if(false){var T,S,b,w;}
function D(t,l,u,h,c,_){var f=function(){return this;}();var d=t;if(typeof d==="string"){t=h;}
function p(){var r=l;if(l===i)r=this;var u=new e(n);u._captureStackTrace();var h=typeof d==="string"&&this!==f?this[d]:t;var c=a(u,_);try{h.apply(r,o(arguments,c));}catch(t){u._rejectCallback(s(t),true,true);}
if(!u._isFateSealed())u._setAsyncGuaranteed();return u;}
r.notEnumerableProp(p,"__isPromisified__",true);return p;}
var C=l?x:D;function E(t,e,n,a,o){var s=new RegExp(I(e)+"$");var l=v(t,e,s,n);for(var u=0,h=l.length;u<h;u+=2){var c=l[u];var _=l[u+1];var f=c+e;if(a===C){t[f]=C(c,i,c,_,e,o);}else{var d=a(_,function(){return C(c,i,c,_,e,o);});r.notEnumerableProp(d,"__isPromisified__",true);t[f]=d;}}
r.toFastProperties(t);return t;}
function P(t,e,n){return C(t,e,undefined,t,null,n);}
e.promisify=function(t,e){if(typeof t!=="function"){throw new u("expecting a function but got "+r.classString(t));}
if(m(t)){return t;}
e=Object(e);var n=e.context===undefined?i:e.context;var a=!!e.multiArgs;var o=P(t,n,a);r.copyDescriptors(t,o,p);return o;};e.promisifyAll=function(t,e){if(typeof t!=="function"&&typeof t!=="object"){throw new u("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");}
e=Object(e);var n=!!e.multiArgs;var i=e.suffix;if(typeof i!=="string")i=h;var a=e.filter;if(typeof a!=="function")a=d;var o=e.promisifier;if(typeof o!=="function")o=C;if(!r.isIdentifier(i)){throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");}
var s=r.inheritedDataKeys(t);for(var l=0;l<s.length;++l){var c=t[s[l]];if(s[l]!=="constructor"&&r.isClass(c)){E(c.prototype,i,a,o,n);E(c,i,a,o,n);}}
return E(t,i,a,o,n);};};},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,i,r){var a=t("./util");var o=a.isObject;var s=t("./es5");var l;if(typeof Map==="function")l=Map;var u=function(){var t=0;var e=0;function n(n,i){this[t]=n;this[t+e]=i;t++;}
return function i(r){e=r.size;t=0;var a=new Array(r.size*2);r.forEach(n,a);return a;};}();var h=function(t){var e=new l();var n=t.length/2|0;for(var i=0;i<n;++i){var r=t[n+i];var a=t[i];e.set(r,a);}
return e;};function c(t){var e=false;var n;if(l!==undefined&&t instanceof l){n=u(t);e=true;}else{var i=s.keys(t);var r=i.length;n=new Array(r*2);for(var a=0;a<r;++a){var o=i[a];n[a]=t[o];n[a+r]=o;}}
this.constructor$(n);this._isMap=e;this._init$(undefined,e?-6:-3);}
a.inherits(c,n);c.prototype._init=function(){};c.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var i;if(this._isMap){i=h(this._values);}else{i={};var r=this.length();for(var a=0,o=this.length();a<o;++a){i[this._values[a+r]]=this._values[a];}}
this._resolve(i);return true;}
return false;};c.prototype.shouldCopyValues=function(){return false;};c.prototype.getActualLength=function(t){return t>>1;};function _(t){var n;var a=i(t);if(!o(a)){return r("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n");}else if(a instanceof e){n=a._then(e.props,undefined,undefined,undefined,undefined);}else{n=new c(a).promise();}
if(a instanceof e){n._propagateFrom(a,2);}
return n;}
e.prototype.props=function(){return _(this);};e.props=function(t){return _(t);};};},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function i(t,e,n,i,r){for(var a=0;a<r;++a){n[a+i]=t[a+e];t[a+e]=void 0;}}
function r(t){this._capacity=t;this._length=0;this._front=0;}
r.prototype._willBeOverCapacity=function(t){return this._capacity<t;};r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t;this._length=e+1;};r.prototype.push=function(t,e,n){var i=this.length()+3;if(this._willBeOverCapacity(i)){this._pushOne(t);this._pushOne(e);this._pushOne(n);return;}
var r=this._front+i-3;this._checkCapacity(i);var a=this._capacity-1;this[r+0&a]=t;this[r+1&a]=e;this[r+2&a]=n;this._length=i;};r.prototype.shift=function(){var t=this._front,e=this[t];this[t]=undefined;this._front=t+1&this._capacity-1;this._length--;return e;};r.prototype.length=function(){return this._length;};r.prototype._checkCapacity=function(t){if(this._capacity<t){this._resizeTo(this._capacity<<1);}};r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front;var r=this._length;var a=n+r&e-1;i(this,0,this,e,a);};e.exports=r;},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,i,r){var a=t("./util");var o=function(t){return t.then(function(e){return s(e,t);});};function s(t,s){var l=i(t);if(l instanceof e){return o(l);}else{t=a.asArray(t);if(t===null)return r("expecting an array or an iterable object but got "+a.classString(t));}
var u=new e(n);if(s!==undefined){u._propagateFrom(s,3);}
var h=u._fulfill;var c=u._reject;for(var _=0,f=t.length;_<f;++_){var d=t[_];if(d===undefined&&!(_ in t)){continue;}
e.cast(d)._then(h,c,undefined,u,null);}
return u;}
e.race=function(t){return s(t,undefined);};e.prototype.race=function(){return s(this,undefined);};};},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,a,o){var s=e._getDomain;var l=t("./util");var u=l.tryCatch;function h(t,n,i,r){this.constructor$(t);var o=s();this._fn=o===null?n:l.domainBind(o,n);if(i!==undefined){i=e.resolve(i);i._attachCancellationCallback(this);}
this._initialValue=i;this._currentCancellable=null;if(r===a){this._eachValues=Array(this._length);}else if(r===0){this._eachValues=null;}else{this._eachValues=undefined;}
this._promise._captureStackTrace();this._init$(undefined,-5);}
l.inherits(h,n);h.prototype._gotAccum=function(t){if(this._eachValues!==undefined&&this._eachValues!==null&&t!==a){this._eachValues.push(t);}};h.prototype._eachComplete=function(t){if(this._eachValues!==null){this._eachValues.push(t);}
return this._eachValues;};h.prototype._init=function(){};h.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==undefined?this._eachValues:this._initialValue);};h.prototype.shouldCopyValues=function(){return false;};h.prototype._resolve=function(t){this._promise._resolveCallback(t);this._values=null;};h.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();if(this._isResolved())return;this._resultCancelled$();if(this._currentCancellable instanceof e){this._currentCancellable.cancel();}
if(this._initialValue instanceof e){this._initialValue.cancel();}};h.prototype._iterate=function(t){this._values=t;var n;var i;var r=t.length;if(this._initialValue!==undefined){n=this._initialValue;i=0;}else{n=e.resolve(t[0]);i=1;}
this._currentCancellable=n;if(!n.isRejected()){for(;i<r;++i){var a={accum:null,value:t[i],index:i,length:r,array:this};n=n._then(f,undefined,undefined,a,undefined);}}
if(this._eachValues!==undefined){n=n._then(this._eachComplete,undefined,undefined,this,undefined);}
n._then(c,c,undefined,n,this);};e.prototype.reduce=function(t,e){return _(this,t,e,null);};e.reduce=function(t,e,n,i){return _(t,e,n,i);};function c(t,e){if(this.isFulfilled()){e._resolve(t);}else{e._reject(t);}}
function _(t,e,n,r){if(typeof e!=="function"){return i("expecting a function but got "+l.classString(e));}
var a=new h(t,e,n,r);return a.promise();}
function f(t){this.accum=t;this.array._gotAccum(t);var n=r(this.value,this.array._promise);if(n instanceof e){this.array._currentCancellable=n;return n._then(d,undefined,undefined,this,undefined);}else{return d.call(this,n);}}
function d(t){var n=this.array;var i=n._promise;var r=u(n._fn);i._pushContext();var a;if(n._eachValues!==undefined){a=r.call(i._boundValue(),t,this.index,this.length);}else{a=r.call(i._boundValue(),this.accum,t,this.index,this.length);}
if(a instanceof e){n._currentCancellable=a;}
var s=i._popContext();o.checkForgottenReturns(a,s,n._eachValues!==undefined?"Promise.each":"Promise.reduce",i);return a;}};},{"./util":36}],29:[function(t,e,n){"use strict";var i=t("./util");var r;var a=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n");};var o=i.getNativePromise();if(i.isNode&&typeof MutationObserver==="undefined"){var s=global.setImmediate;var l=process.nextTick;r=i.isRecentNode?function(t){s.call(global,t);}:function(t){l.call(process,t);};}else if(typeof o==="function"&&typeof o.resolve==="function"){var u=o.resolve();r=function(t){u.then(t);};}else if(typeof MutationObserver!=="undefined"&&!(true&&window.navigator&&(window.navigator.standalone||window.cordova))){r=function(){var t=document.createElement("div");var e={attributes:true};var n=false;var i=document.createElement("div");var r=new MutationObserver(function(){t.classList.toggle("foo");n=false;});r.observe(i,e);var a=function(){if(n)return;n=true;i.classList.toggle("foo");};return function n(i){var r=new MutationObserver(function(){r.disconnect();i();});r.observe(t,e);a();};}();}else if(typeof setImmediate!=="undefined"){r=function(t){setImmediate(t);};}else if(typeof setTimeout!=="undefined"){r=function(t){setTimeout(t,0);};}else{r=a;}
e.exports=r;},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,i){var r=e.PromiseInspection;var a=t("./util");function o(t){this.constructor$(t);}
a.inherits(o,n);o.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){this._resolve(this._values);return true;}
return false;};o.prototype._promiseFulfilled=function(t,e){var n=new r();n._bitField=33554432;n._settledValueField=t;return this._promiseResolved(e,n);};o.prototype._promiseRejected=function(t,e){var n=new r();n._bitField=16777216;n._settledValueField=t;return this._promiseResolved(e,n);};e.settle=function(t){i.deprecated(".settle()",".reflect()");return new o(t).promise();};e.prototype.settle=function(){return e.settle(this);};};},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,i){var r=t("./util");var a=t("./errors").RangeError;var o=t("./errors").AggregateError;var s=r.isArray;var l={};function u(t){this.constructor$(t);this._howMany=0;this._unwrap=false;this._initialized=false;}
r.inherits(u,n);u.prototype._init=function(){if(!this._initialized){return;}
if(this._howMany===0){this._resolve([]);return;}
this._init$(undefined,-5);var t=s(this._values);if(!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()){this._reject(this._getRangeError(this.length()));}};u.prototype.init=function(){this._initialized=true;this._init();};u.prototype.setUnwrap=function(){this._unwrap=true;};u.prototype.howMany=function(){return this._howMany;};u.prototype.setHowMany=function(t){this._howMany=t;};u.prototype._promiseFulfilled=function(t){this._addFulfilled(t);if(this._fulfilled()===this.howMany()){this._values.length=this.howMany();if(this.howMany()===1&&this._unwrap){this._resolve(this._values[0]);}else{this._resolve(this._values);}
return true;}
return false;};u.prototype._promiseRejected=function(t){this._addRejected(t);return this._checkOutcome();};u.prototype._promiseCancelled=function(){if(this._values instanceof e||this._values==null){return this._cancel();}
this._addRejected(l);return this._checkOutcome();};u.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){var t=new o();for(var e=this.length();e<this._values.length;++e){if(this._values[e]!==l){t.push(this._values[e]);}}
if(t.length>0){this._reject(t);}else{this._cancel();}
return true;}
return false;};u.prototype._fulfilled=function(){return this._totalResolved;};u.prototype._rejected=function(){return this._values.length-this.length();};u.prototype._addRejected=function(t){this._values.push(t);};u.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t;};u.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected();};u.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e);};u.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0));};function h(t,e){if((e|0)!==e||e<0){return i("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");}
var n=new u(t);var r=n.promise();n.setHowMany(e);n.init();return r;}
e.some=function(t,e){return h(t,e);};e.prototype.some=function(t){return h(this,t);};e._SomePromiseArray=u;};},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){if(t!==undefined){t=t._target();this._bitField=t._bitField;this._settledValueField=t._isFateSealed()?t._settledValue():undefined;}else{this._bitField=0;this._settledValueField=undefined;}}
e.prototype._settledValue=function(){return this._settledValueField;};var n=e.prototype.value=function(){if(!this.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");}
return this._settledValue();};var i=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");}
return this._settledValue();};var r=e.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0;};var a=e.prototype.isRejected=function(){return(this._bitField&16777216)!==0;};var o=e.prototype.isPending=function(){return(this._bitField&50397184)===0;};var s=e.prototype.isResolved=function(){return(this._bitField&50331648)!==0;};e.prototype.isCancelled=function(){return(this._bitField&8454144)!==0;};t.prototype.__isCancelled=function(){return(this._bitField&65536)===65536;};t.prototype._isCancelled=function(){return this._target().__isCancelled();};t.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0;};t.prototype.isPending=function(){return o.call(this._target());};t.prototype.isRejected=function(){return a.call(this._target());};t.prototype.isFulfilled=function(){return r.call(this._target());};t.prototype.isResolved=function(){return s.call(this._target());};t.prototype.value=function(){return n.call(this._target());};t.prototype.reason=function(){var t=this._target();t._unsetRejectionIsUnhandled();return i.call(t);};t.prototype._value=function(){return this._settledValue();};t.prototype._reason=function(){this._unsetRejectionIsUnhandled();return this._settledValue();};t.PromiseInspection=e;};},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){var i=t("./util");var r=i.errorObj;var a=i.isObject;function o(t,i){if(a(t)){if(t instanceof e)return t;var o=l(t);if(o===r){if(i)i._pushContext();var s=e.reject(o.e);if(i)i._popContext();return s;}else if(typeof o==="function"){if(h(t)){var s=new e(n);t._then(s._fulfill,s._reject,undefined,s,null);return s;}
return c(t,o,i);}}
return t;}
function s(t){return t.then;}
function l(t){try{return s(t);}catch(t){r.e=t;return r;}}
var u={}.hasOwnProperty;function h(t){try{return u.call(t,"_promise0");}catch(t){return false;}}
function c(t,a,o){var s=new e(n);var l=s;if(o)o._pushContext();s._captureStackTrace();if(o)o._popContext();var u=true;var h=i.tryCatch(a).call(t,c,_);u=false;if(s&&h===r){s._rejectCallback(h.e,true,true);s=null;}
function c(t){if(!s)return;s._resolveCallback(t);s=null;}
function _(t){if(!s)return;s._rejectCallback(t,u,true);s=null;}
return l;}
return o;};},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,i){var r=t("./util");var a=e.TimeoutError;function o(t){this.handle=t;}
o.prototype._resultCancelled=function(){clearTimeout(this.handle);};var s=function(t){return l(+this).thenReturn(t);};var l=e.delay=function(t,r){var a;var l;if(r!==undefined){a=e.resolve(r)._then(s,null,null,t,undefined);if(i.cancellation()&&r instanceof e){a._setOnCancel(r);}}else{a=new e(n);l=setTimeout(function(){a._fulfill();},+t);if(i.cancellation()){a._setOnCancel(new o(l));}
a._captureStackTrace();}
a._setAsyncGuaranteed();return a;};e.prototype.delay=function(t){return l(t,this);};var u=function(t,e,n){var i;if(typeof e!=="string"){if(e instanceof Error){i=e;}else{i=new a("operation timed out");}}else{i=new a(e);}
r.markAsOriginatingFromRejection(i);t._attachExtraTrace(i);t._reject(i);if(n!=null){n.cancel();}};function h(t){clearTimeout(this.handle);return t;}
function c(t){clearTimeout(this.handle);throw t;}
e.prototype.timeout=function(t,e){t=+t;var n,r;var a=new o(setTimeout(function t(){if(n.isPending()){u(n,e,r);}},t));if(i.cancellation()){r=this.then();n=r._then(h,c,undefined,a,undefined);n._setOnCancel(a);}else{n=this._then(h,c,undefined,a,undefined);}
return n;};};},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,a,o){var s=t("./util");var l=t("./errors").TypeError;var u=t("./util").inherits;var h=s.errorObj;var c=s.tryCatch;var _={};function f(t){setTimeout(function(){throw t;},0);}
function d(t){var e=i(t);if(e!==t&&typeof t._isDisposable==="function"&&typeof t._getDisposer==="function"&&t._isDisposable()){e._setDisposable(t._getDisposer());}
return e;}
function p(t,n){var r=0;var o=t.length;var s=new e(a);function l(){if(r>=o)return s._fulfill();var a=d(t[r++]);if(a instanceof e&&a._isDisposable()){try{a=i(a._getDisposer().tryDispose(n),t.promise);}catch(t){return f(t);}
if(a instanceof e){return a._then(l,f,null,null,null);}}
l();}
l();return s;}
function m(t,e,n){this._data=t;this._promise=e;this._context=n;}
m.prototype.data=function(){return this._data;};m.prototype.promise=function(){return this._promise;};m.prototype.resource=function(){if(this.promise().isFulfilled()){return this.promise().value();}
return _;};m.prototype.tryDispose=function(t){var e=this.resource();var n=this._context;if(n!==undefined)n._pushContext();var i=e!==_?this.doDispose(e,t):null;if(n!==undefined)n._popContext();this._promise._unsetDisposable();this._data=null;return i;};m.isDisposer=function(t){return t!=null&&typeof t.resource==="function"&&typeof t.tryDispose==="function";};function g(t,e,n){this.constructor$(t,e,n);}
u(g,m);g.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e);};function y(t){if(m.isDisposer(t)){this.resources[this.index]._setDisposable(t);return t.promise();}
return t;}
function v(t){this.length=t;this.promise=null;this[t-1]=null;}
v.prototype._resultCancelled=function(){var t=this.length;for(var n=0;n<t;++n){var i=this[n];if(i instanceof e){i.cancel();}}};e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var r=arguments[t-1];if(typeof r!=="function"){return n("expecting a function but got "+s.classString(r));}
var a;var l=true;if(t===2&&Array.isArray(arguments[0])){a=arguments[0];t=a.length;l=false;}else{a=arguments;t--;}
var u=new v(t);for(var _=0;_<t;++_){var f=a[_];if(m.isDisposer(f)){var d=f;f=f.promise();f._setDisposable(d);}else{var g=i(f);if(g instanceof e){f=g._then(y,null,null,{resources:u,index:_},undefined);}}
u[_]=f;}
var I=new Array(u.length);for(var _=0;_<I.length;++_){I[_]=e.resolve(u[_]).reflect();}
var x=e.all(I).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected()){h.e=n.error();return h;}else if(!n.isFulfilled()){x.cancel();return;}
t[e]=n.value();}
T._pushContext();r=c(r);var i=l?r.apply(undefined,t):r(t);var a=T._popContext();o.checkForgottenReturns(i,a,"Promise.using",T);return i;});var T=x.lastly(function(){var t=new e.PromiseInspection(x);return p(u,t);});u.promise=T;T._setOnCancel(u);return T;};e.prototype._setDisposable=function(t){this._bitField=this._bitField|131072;this._disposer=t;};e.prototype._isDisposable=function(){return(this._bitField&131072)>0;};e.prototype._getDisposer=function(){return this._disposer;};e.prototype._unsetDisposable=function(){this._bitField=this._bitField&~131072;this._disposer=undefined;};e.prototype.disposer=function(t){if(typeof t==="function"){return new g(t,this,r());}
throw new l();};};},{"./errors":12,"./util":36}],36:[function(_dereq_,module,exports){"use strict";var es5=_dereq_("./es5");var canEvaluate=typeof navigator=="undefined";var errorObj={e:{}};var tryCatchTarget;var globalObject=typeof self!=="undefined"?self:true?window:undefined;function tryCatcher(){try{var t=tryCatchTarget;tryCatchTarget=null;return t.apply(this,arguments);}catch(t){errorObj.e=t;return errorObj;}}
function tryCatch(t){tryCatchTarget=t;return tryCatcher;}
var inherits=function(t,e){var n={}.hasOwnProperty;function i(){this.constructor=t;this.constructor$=e;for(var i in e.prototype){if(n.call(e.prototype,i)&&i.charAt(i.length-1)!=="$"){this[i+"$"]=e.prototype[i];}}}
i.prototype=e.prototype;t.prototype=new i();return t.prototype;};function isPrimitive(t){return t==null||t===true||t===false||typeof t==="string"||typeof t==="number";}
function isObject(t){return typeof t==="function"||typeof t==="object"&&t!==null;}
function maybeWrapAsError(t){if(!isPrimitive(t))return t;return new Error(safeToString(t));}
function withAppended(t,e){var n=t.length;var i=new Array(n+1);var r;for(r=0;r<n;++r){i[r]=t[r];}
i[r]=e;return i;}
function getDataPropertyOrDefault(t,e,n){if(es5.isES5){var i=Object.getOwnPropertyDescriptor(t,e);if(i!=null){return i.get==null&&i.set==null?i.value:n;}}else{return{}.hasOwnProperty.call(t,e)?t[e]:undefined;}}
function notEnumerableProp(t,e,n){if(isPrimitive(t))return t;var i={value:n,configurable:true,enumerable:false,writable:true};es5.defineProperty(t,e,i);return t;}
function thrower(t){throw t;}
var inheritedDataKeys=function(){var t=[Array.prototype,Object.prototype,Function.prototype];var e=function(e){for(var n=0;n<t.length;++n){if(t[n]===e){return true;}}
return false;};if(es5.isES5){var n=Object.getOwnPropertyNames;return function(t){var i=[];var r=Object.create(null);while(t!=null&&!e(t)){var a;try{a=n(t);}catch(t){return i;}
for(var o=0;o<a.length;++o){var s=a[o];if(r[s])continue;r[s]=true;var l=Object.getOwnPropertyDescriptor(t,s);if(l!=null&&l.get==null&&l.set==null){i.push(s);}}
t=es5.getPrototypeOf(t);}
return i;};}else{var i={}.hasOwnProperty;return function(n){if(e(n))return[];var r=[];t:for(var a in n){if(i.call(n,a)){r.push(a);}else{for(var o=0;o<t.length;++o){if(i.call(t[o],a)){continue t;}}
r.push(a);}}
return r;};}}();var thisAssignmentPattern=/this\s*\.\s*\S+\s*=/;function isClass(t){try{if(typeof t==="function"){var e=es5.names(t.prototype);var n=es5.isES5&&e.length>1;var i=e.length>0&&!(e.length===1&&e[0]==="constructor");var r=thisAssignmentPattern.test(t+"")&&es5.names(t).length>0;if(n||i||r){return true;}}
return false;}catch(t){return false;}}
function toFastProperties(obj){function FakeConstructor(){}
FakeConstructor.prototype=obj;var receiver=new FakeConstructor();function ic(){return typeof receiver.foo;}
ic();ic();return obj;eval(obj);}
var rident=/^[a-z$_][a-z$_0-9]*$/i;function isIdentifier(t){return rident.test(t);}
function filledRange(t,e,n){var i=new Array(t);for(var r=0;r<t;++r){i[r]=e+r+n;}
return i;}
function safeToString(t){try{return t+"";}catch(t){return "[no string representation]";}}
function isError(t){return t instanceof Error||t!==null&&typeof t==="object"&&typeof t.message==="string"&&typeof t.name==="string";}
function markAsOriginatingFromRejection(t){try{notEnumerableProp(t,"isOperational",true);}catch(t){}}
function originatesFromRejection(t){if(t==null)return false;return t instanceof Error["__BluebirdErrorTypes__"].OperationalError||t["isOperational"]===true;}
function canAttachTrace(t){return isError(t)&&es5.propertyIsWritable(t,"stack");}
var ensureErrorObject=function(){if(!("stack"in new Error())){return function(t){if(canAttachTrace(t))return t;try{throw new Error(safeToString(t));}catch(t){return t;}};}else{return function(t){if(canAttachTrace(t))return t;return new Error(safeToString(t));};}}();function classString(t){return{}.toString.call(t);}
function copyDescriptors(t,e,n){var i=es5.names(t);for(var r=0;r<i.length;++r){var a=i[r];if(n(a)){try{es5.defineProperty(e,a,es5.getDescriptor(t,a));}catch(t){}}}}
var asArray=function(t){if(es5.isArray(t)){return t;}
return null;};if(typeof Symbol!=="undefined"&&Symbol.iterator){var ArrayFrom=typeof Array.from==="function"?function(t){return Array.from(t);}:function(t){var e=[];var n=t[Symbol.iterator]();var i;while(!(i=n.next()).done){e.push(i.value);}
return e;};asArray=function(t){if(es5.isArray(t)){return t;}else if(t!=null&&typeof t[Symbol.iterator]==="function"){return ArrayFrom(t);}
return null;};}
var isNode=typeof process!=="undefined"&&classString(process).toLowerCase()==="[object process]";var hasEnvVariables=typeof process!=="undefined"&&typeof process.env!=="undefined";function env(t){return hasEnvVariables?process.env[t]:undefined;}
function getNativePromise(){if(typeof Promise==="function"){try{var t=new Promise(function(){});if({}.toString.call(t)==="[object Promise]"){return Promise;}}catch(t){}}}
function domainBind(t,e){return t.bind(e);}
var ret={isClass:isClass,isIdentifier:isIdentifier,inheritedDataKeys:inheritedDataKeys,getDataPropertyOrDefault:getDataPropertyOrDefault,thrower:thrower,isArray:es5.isArray,asArray:asArray,notEnumerableProp:notEnumerableProp,isPrimitive:isPrimitive,isObject:isObject,isError:isError,canEvaluate:canEvaluate,errorObj:errorObj,tryCatch:tryCatch,inherits:inherits,withAppended:withAppended,maybeWrapAsError:maybeWrapAsError,toFastProperties:toFastProperties,filledRange:filledRange,toString:safeToString,canAttachTrace:canAttachTrace,ensureErrorObject:ensureErrorObject,originatesFromRejection:originatesFromRejection,markAsOriginatingFromRejection:markAsOriginatingFromRejection,classString:classString,copyDescriptors:copyDescriptors,hasDevTools:typeof chrome!=="undefined"&&chrome&&typeof chrome.loadTimes==="function",isNode:isNode,hasEnvVariables:hasEnvVariables,env:env,global:globalObject,getNativePromise:getNativePromise,domainBind:domainBind};ret.isRecentNode=ret.isNode&&function(){var t=process.versions.node.split(".").map(Number);return t[0]===0&&t[1]>10||t[0]>0;}();if(ret.isNode)ret.toFastProperties(process);try{throw new Error();}catch(t){ret.lastLineError=t;}
module.exports=ret;},{"./es5":13}]},{},[4])(4);});if(true&&window!==null){window.P=window.Promise;}else if(typeof self!=="undefined"&&self!==null){self.P=self.Promise;}}).call(this,__webpack_require__(6),__webpack_require__(5),__webpack_require__(3),__webpack_require__(16).setImmediate);},function(t,e){var n=t.exports={};var i;var r;function a(){throw new Error("setTimeout has not been defined");}
function o(){throw new Error("clearTimeout has not been defined");}
(function(){try{if(typeof setTimeout==="function"){i=setTimeout;}else{i=a;}}catch(t){i=a;}
try{if(typeof clearTimeout==="function"){r=clearTimeout;}else{r=o;}}catch(t){r=o;}})();function s(t){if(i===setTimeout){return setTimeout(t,0);}
if((i===a||!i)&&setTimeout){i=setTimeout;return setTimeout(t,0);}
try{return i(t,0);}catch(e){try{return i.call(null,t,0);}catch(e){return i.call(this,t,0);}}}
function l(t){if(r===clearTimeout){return clearTimeout(t);}
if((r===o||!r)&&clearTimeout){r=clearTimeout;return clearTimeout(t);}
try{return r(t);}catch(e){try{return r.call(null,t);}catch(e){return r.call(this,t);}}}
var u=[];var h=false;var c;var _=-1;function f(){if(!h||!c){return;}
h=false;if(c.length){u=c.concat(u);}else{_=-1;}
if(u.length){d();}}
function d(){if(h){return;}
var t=s(f);h=true;var e=u.length;while(e){c=u;u=[];while(++_<e){if(c){c[_].run();}}
_=-1;e=u.length;}
c=null;h=false;l(t);}
n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1){for(var n=1;n<arguments.length;n++){e[n-1]=arguments[n];}}
u.push(new p(t,e));if(u.length===1&&!h){s(d);}};function p(t,e){this.fun=t;this.array=e;}
p.prototype.run=function(){this.fun.apply(null,this.array);};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function m(){}
n.on=m;n.addListener=m;n.once=m;n.off=m;n.removeListener=m;n.removeAllListeners=m;n.emit=m;n.prependListener=m;n.prependOnceListener=m;n.listeners=function(t){return[];};n.binding=function(t){throw new Error("process.binding is not supported");};n.cwd=function(){return "/";};n.chdir=function(t){throw new Error("process.chdir is not supported");};n.umask=function(){return 0;};},function(t,e,n){"use strict";(function(t){n(4);n(12);n(15);var e=t.getLaunchOptionsSync();console.log("query:"+e.query),e.query&&console.log("queryJson:"+JSON.stringify(e.query));console.log("referrerInfo:"+e.referrerInfo),e.referrerInfo&&console.log("referrerInfoJson:"+JSON.stringify(e.referrerInfo));}).call(this,n(0));},function(t,e,n){"use strict";var i=n(1);var r=i(n(2));Object.defineProperty(e,"__esModule",{value:true});var a=n(9);var o={platform:"H5",toast:null,showToast:function t(e){if((0,r.default)(e)===(0,r.default)("")){a.vhs.showToast({content:e});}else{e.title&&!e.content&&(e.content=e.title);a.vhs.showToast(e);}},showModal:function t(e){a.vhs.showModal(e);},getItem:function t(e){return localStorage.getItem(e);},setItem:function t(e,n){return localStorage.setItem(e,n);},requestOpenId:function t(){return "";},createVideoAd:function t(e,n){console.log("视频播放回调");n&&n();},createInterstitialAd:function t(e,n){console.log("插屏回调");n&&n();},initAd:function t(e,n){console.log("initAd--data",e);n&&n();},getLocaleType:function t(){return "zh";},setStorageSync:function t(e,n){localStorage.setItem(e,JSON.stringify(n));},setStorage:function t(e){var n=e.key,i=e.data,r=e.success;setTimeout(function(){localStorage.setItem(n,JSON.stringify(i));r&&r();},0);},getOpenDataContext:function t(){return{postMessage:function t(e){console.log("open data context post message : ",e);}};},getSystemInfoSync:function t(){return{screenWidth:window.innerWidth,screenHeight:window.innerHeight,windowWidth:window.innerWidth,windowHeight:window.innerHeight,SDKVersion:"9.9.9"};},getLaunchOptionsSync:function t(){return{query:{}};},clearStorage:function t(e){setTimeout(function(){localStorage.clear();e.success&&e.success();},0);},clearStorageSync:function t(){localStorage.clear();},getStorage:function t(e){var n=e.key,i=e.success;setTimeout(function(){var t=localStorage.getItem(n);try{i&&i(JSON.parse(t));}catch(e){i&&i(t);}},0);},getStorageSync:function t(e){var n=localStorage.getItem(e);try{return JSON.parse(n);}catch(t){return n;}},removeStorage:function t(e){var n=e.key,i=e.success;setTimeout(function(){localStorage.removeItem(n);i&&i();},0);},removeStorageSync:function t(e){localStorage.removeItem(e);},getStorageInfo:function t(e){var n=e.success;setTimeout(function(){n&&n({});},0);},getStorageInfoSync:function t(){return{};},request:function t(e){var n=e.url;var i=e.success;var r=e.fail;var a=e.complete;var t=new XMLHttpRequest();t.onreadystatechange=function(){var e;try{e=JSON.parse(t.responseText);}catch(n){e=t.responseText;}
e={data:e};if(4==t.readyState&&200<=t.status&&400>t.status){i&&i(e);a&&a(e);}else{r&&r(e);a&&a(e);}};t.open(e.method||"GET",n);t.send(JSON.stringify(e.data));},getVideoAdPlayInfoToday:function t(){return{playTimes:-1,maxTimes:-1,valid:true};},updateShareMenu:function t(e){e&&e.success&&e.success({});},getPlayerInfo:function t(){return{nickname:"test",nickName:"test",avatarUrl:"https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike80%2C5%2C5%2C80%2C26/sign=4d7b267a0ae93901420f856c1a853f82/7a899e510fb30f2473057259c395d143ac4b03c8.jpg"};},setCloudStats:function t(e,n){o.setStorageSync("__cloudObject",JSON.stringify(e));n&&n();},getCloudStats:function t(e){e.success&&e.success(o.getStorageSync("__cloudObject"));},login:function t(e){e.success&&e.success({code:"1"});},getUserInfo:function t(e){e.success&&e.success({userInfo:window["PlatformAPI"].getPlayerInfo()});},shareAppMessage:function t(e){e.success&&e.success({});},onShow:function t(e){if(window["cc"]){var n=window["cc"];n.game.on(n.game.EVENT_SHOW,function(){e({query:{}});});}else{if(window["Laya"]||window["laya"]){var i=window["Laya"];i.stage.on(i.Event.VISIBILITY_CHANGE,null,function(t){if(i.stage._isVisibility){e({query:{}});}});}else{console.error("未知引擎, 需要在此处手动添加某种监听返回前台的方法!");debugger;}}},getWXUserInfo:function t(){return{userInfo:window["PlatformAPI"].getPlayerInfo()};},createInnerAudioContext:function t(){return new Audio();},createCanvas:function t(){return document.createElement("canvas");},createImage:function t(){return new Image();},toTempFilePath:function t(e){var n=Math.max(0,(e.height*1.91-e.width)/2);e.width=Math.max(e.width,e.height*1.91);var i=window["cc"];var r=function t(){i&&i.director.off(i.Director.EVENT_AFTER_DRAW,t);var r=document.querySelectorAll("canvas")[0];if(!r){console.error("查找canvas失败, 请修改上方代码, 手动定位主canvas");debugger;return;}
var a=r.toDataURL("image/png");var o=new Image();o.onload=function(){var t=document.createElement("canvas");t.width=e.destWidth;t.height=e.destHeight;var i=t.getContext("2d");i.drawImage(o,e.x,e.y,e.width,e.height,n,0,t.width,t.height);var r=t.toDataURL("image/png");e.success&&e.success(r);};o.src=a;};if(i){i.director.on(i.Director.EVENT_AFTER_DRAW,r);}else{r();}},getSetting:function t(e){e&&e.success&&e.success({authSetting:{"scope.userInfo":true}});}};e.default=o;},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.vhs={showToast:function t(e){var n=this;var i=function t(){var e=n.getValidMetaWidthScale();var i=document.getElementsByTagName("body")[0];var r=document.createElement("div");r.id="vhs-main-toast";r.style.visibility="hidden";r.style.minWidth="45%";r.style.maxWidth="55%";r.style.left="0";r.style.right="0";r.style.marginLeft="auto";r.style.marginRight="auto";r.style.backgroundColor="#333";r.style.color="#fff";r.style.textAlign="center";r.style.borderRadius=5*e+"px";r.style.padding=10*e+"px";r.style.position="fixed";r.style.zIndex="10";r.style.top="35%";r.style.fontSize=16*e+"px";i.appendChild(r);};var r=function t(){var e=document.getElementById("vhs-main-toast");e.parentNode.removeChild(e);};var a=3e3;if(e.duration){a=e.duration;}
if(e.content){i();var o=document.getElementById("vhs-main-toast");o.innerHTML=e.content;o.style.visibility="visible";setTimeout(function(){r();if(e.complete)e.complete();},a);}},getValidMetaWidthScale:function t(){var e=1;var n=document.getElementsByTagName("meta");var i=0;for(var r=n.length-1;r>=0;r--){var a=n[r];var o=a.getAttribute("content");if(o==null||o.indexOf("width")==-1||o=="null")continue;var s=o.split(",");for(var l=0,u=s.length;l<u;l++){var h=s[l];if(h.indexOf("width")==-1){continue;}
var c=h.split("=");i=+c[c.length-1];}
if(i>0){break;}}
var _=375;if(i!=0){e=i/_;}
return e;},showModal:function t(e){var n=this;var i=function t(){var e=n.getValidMetaWidthScale();var i=document.getElementsByTagName("body")[0];var r=document.createElement("div");r.id="vhs-modal-bg-cover";r.style.backgroundColor="rgba(51, 51, 51, 0.85)";r.style.width="100%";r.style.height="100%";r.style.position="fixed";r.style.zIndex="999";r.style.top="0";i.appendChild(r);var a=document.createElement("div");a.id="vhs-modal-warp";a.style.visibility="visible";a.style.minWidth="50%";a.style.maxWidth="66.8%";a.style.backgroundColor="#fff";a.style.color="#333";a.style.textAlign="center";a.style.borderRadius=5*e+"px";a.style.paddingTop=10*e+"px";a.style.position="fixed";a.style.zIndex="10";a.style.left="0";a.style.right="0";a.style.marginLeft="auto";a.style.marginRight="auto";a.style.top="44%";a.style.fontSize=15*e+"px";a.style.borderStyle="solid";a.style.borderColor="#e1e0e4";a.style.borderWidth=1*e+"px";r.appendChild(a);var o=document.createElement("div");a.appendChild(o);var s=document.createElement("p");s.id="vhs-modal-title";s.style.fontSize=16*e+"px";s.style.marginTop="0px";s.style.marginBottom="0px";o.appendChild(s);var l=document.createElement("div");l.id="vhs-modal-content";l.style.paddingTop=10*e+"px";l.style.paddingBottom=15*e+"px";l.style.paddingLeft=10*e+"px";l.style.paddingRight=10*e+"px";l.style.fontSize=14*e+"px";l.style.color="rgb(95, 92, 92)";o.appendChild(l);var u=document.createElement("div");u.id="vhs-modal-action";u.style.bottom=9*e+"px";u.style.width="100%";u.style.borderTop="1px solid rgb(191, 190, 190)";u.style.height=41*e+"px";a.appendChild(u);var h=document.createElement("div");h.id="vhs-modal-cancel";h.style.float="left";h.style.width="50%";h.style.color="red";h.style.height=41*e+"px";h.style.lineHeight=41*e+"px";u.appendChild(h);var c=document.createElement("div");c.id="vhs-modal-confirm";c.style.float="right";c.style.width="49%";c.style.height=41*e+"px";c.style.lineHeight=41*e+"px";c.style.borderLeft="1px solid rgb(191, 190, 190)";u.appendChild(c);};var r=function t(){var e=document.getElementById("vhs-modal-bg-cover");e.parentNode.removeChild(e);};var a=function t(){var e=n.getValidMetaWidthScale();var i=document.getElementById("vhs-modal-warp");var r=window.outerHeight;i.style.top=(r*e-i.clientHeight)/2+"px";console.log((r*e-i.clientHeight)/2+"px");};if(e.content){i();var o=document.getElementById("vhs-modal-title");o.innerText=e.title||"Tips";var s=document.getElementById("vhs-modal-content");s.innerText=e.content;var l=document.getElementById("vhs-modal-cancel");l.innerHTML=e.cancelTitle||"Cancel";a();l.onclick=function(){if(e.cancel){e.cancel();}
if(e.success)e.success({cancel:true});if(e.complete)e.complete({cancel:true});r();};var u=document.getElementById("vhs-modal-confirm");u.innerHTML=e.confirmTitle||"Confirm";u.onclick=function(){if(e.confirm)e.confirm();if(e.success)e.success({confirm:true});if(e.complete)e.complete({confirm:true});r();};}}};},function(t,e,n){"use strict";var i=n(1);var r=i(n(2));Object.defineProperty(e,"__esModule",{value:true});var a="https://fb.sanshengshi.xyz";var o=null;var s=null;var l=null;var u=null;var h=function t(e){FBInstant.getRewardedVideoAsync(l).then(function(t){s=t;return t.loadAsync();}).then(function(){e();}).catch(function(t){e();});};var c=function t(e){FBInstant.getInterstitialAdAsync(u).then(function(t){o=t;return t.loadAsync();}).then(function(){e();}).catch(function(t){e();});};var _={platform:"FBInstant",share:function t(e){if(e===void 0){e=function t(){};}
var n=SSSGameConfig.getRandomShareUnit();var i=PlatformAPI.getItem(n.imageUrl);var r=function t(n){FBInstant.shareAsync({intent:"REQUEST",image:n.image,text:n.title,data:{}}).then(function(t){console.log("shareResult",t);e();}).catch(function(t){console.error("shareResult",t);});};if(i){r({image:i,title:n.title});}else{PlatformAPI.request({url:"https://fb.sanshengshi.xyz/event/fb/image.html?url="+n.imageUrl,success:function t(e){console.log(e);var i=e.data.message;PlatformAPI.setItem(n.imageUrl,i);r({image:i,title:n.title});}});}},onHide:function t(e){FBInstant.onPause(e);},createShortcut:function t(){FBInstant.canCreateShortcutAsync().then(function(t){if(t){FBInstant.createShortcutAsync();}});},createVideoAd:function t(e,n){if(s){s&&s.showAsync().then(function(){h(function(){});n();}).catch(function(t){n();});}else{console.log("视频播放失败");_.createInterstitialAd(e,n);}},createInterstitialAd:function t(e,n){if(o){o.showAsync().then(function(){c(function(){});n();}).catch(function(t){n();});}else{console.log("插屏播放失败");n();}},initAd:function t(e){u=e.img_ad;l=e.video_ad;if(FBInstant.getSupportedAPIs().indexOf("getRewardedVideoAsync")!==-1){s||h(function(){});}
if(FBInstant.getSupportedAPIs().indexOf("getInterstitialAdAsync")!==-1){o||c(function(){});}},chooseAsync:function t(e){var n=function t(){var n=SSSGameConfig.getRandomShareUnit(e);var i=PlatformAPI.getItem(n.imageUrl);var r=function t(e){var r={action:"CUSTOM",image:e.image,text:e.title,template:"",notification:"PUSH"};FBInstant.updateAsync(r).then(function(){console.log("Message was sent successfully");}).catch(function(t){console.error(t);});if(i){t({image:i,title:n.title});}else{PlatformAPI.request({url:"https://fb.sanshengshi.xyz/event/fb/image.html?url="+n.imageUrl,success:function e(i){console.log(i);var r=i.data.message;PlatformAPI.setItem(n.imageUrl,r);t({image:r,title:n.title});}});}};};FBInstant.context.chooseAsync().then(n).catch(n);},getLocaleType:function t(){var e=FBInstant.getLocale();if(e==="zh_CN"){return "zh";}else{return "en";}},shareAppMessage:function t(e){_.share(e.success);},navigateToMiniProgram:function t(e){PlatformAPI.request({method:"POST",url:a+"/game/fb/sharelog.html",data:{fb:e.extraData.boxname,index:e.btnIndex,type:1,player_id:FBInstant.player.getID()}});FBInstant.switchGameAsync(e.appId,e.extraData).then(function(){PlatformAPI.request({method:"POST",url:a+"/game/fb/sharelog.html",data:{fb:e.extraData.boxname,index:e.btnIndex,type:2,player_id:FBInstant.player.getID()}});e.success&&e.success();}).catch(function(t){e.fail&&e.fail();});},setUserCloudStorage:function t(e){var n={};e.KVDataList.forEach(function(t){n[t.key]=t.value;});FBInstant.player.setStatsAsync(n).then(e.success);},getPlayerInfo:function t(){return{nickname:FBInstant.player.getName(),nickName:FBInstant.player.getName(),avatarUrl:FBInstant.player.getPhoto()};},setCloudStats:function t(e,n){FBInstant.player.setStatsAsync(e).then(function(){n&&n();});},getCloudStats:function t(e){},shareWithImage:function t(e,n,i){if(typeof i!=="function"){i=function t(){};}
FBInstant.shareAsync({intent:"REQUEST",image:e,text:SSSGameConfig.getRandomShareUnit().title,data:{}}).then(function(t){console.log("shareResult",t);i({});}).catch(function(t){console.error("shareResult",t);});},updateLeaderboard:function t(e,n,i){if((0,r.default)(i)!==(0,r.default)("")){i=JSON.stringify(i);}
FBInstant.getLeaderboardAsync(e).then(function(t){return t.setScoreAsync(n,i);}).catch(function(t){console.error(t);});}};e.default=_;},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:true});var i=n(4);var r=window["wx"];var a={platform:"Wechat",postMessage:function t(e,n){r.getOpenDataContext().postMessage({msgName:e,msgData:n});},share:function t(e){var n=window["SSSGameConfig"].getRandomShareUnit();n.success=e||function(){};r.shareAppMessage(n);},getItem:function t(e){return r.getStorageSync(e);},setItem:function t(e,n){r.setStorageSync(e,n);},onShareAppMessage:function t(e){r.onShareAppMessage(function(){return e();});r.showShareMenu();},requestOpenId:function t(e){r.login({success:function t(n){var i=n.code;r.request({url:"https://nodet.sanshengshi.ltd/vx/login.json",method:"post",data:{code:i},header:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-VX-APPID":"wx33705e8a861671b0"},success:function t(n){e(n.data.user.openId);}});}});},createBannerAd:function t(e){i.default.createBannerAd(e);},onShow:function t(e){r.onShow(e);},onHide:function t(e){r.onHide(e);},initAd:function e(n){var a=i.default;var o={};var s={};var l={};n.adv_info.forEach(function(t){if(t.adv_type=="video"){s[t.adv_data]={id:t.adv_id,maxPlayTimes:+t.adv_show_time||Infinity};}else{o[t.adv_data]={id:t.adv_id,showTime:+t.adv_show_time,hideTime:+t.adv_hide_time};t.adv_width&&(l[t.adv_id]=t.adv_width);}});var u=function t(){var e=new Date();return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();};var h=null;var c=false;var _=null;var f={};var d=false;var p=3;var m={delayHideTimer:null,showInterval:null,hideInterval:null};var g=function t(){if(!c){return;}
clearTimeout(m.delayHideTimer);m.delayHideTimer=null;clearInterval(m.showInterval);m.showInterval=null;clearInterval(m.hideInterval);m.hideInterval=null;c=false;_=null;};var y=function e(n){if(!t||!r.createBannerAd){return function(){};}
var i=l[n]||(window.innerWidth>window.innerHeight?300:window.innerWidth);var a=r.createBannerAd({adUnitId:n,style:{left:(window.innerWidth-i)/2,top:0,width:i}});a.onResize(function(t){var e=t.width,n=t.height;a.style.top=window.innerHeight-n;});a.onError(function(t){console.error("加载广告失败!",t);});a.show();return a;};var v=function t(e){if(!e)g();if(!h)return;try{h.offResize();h.destroy();h.offError();h=null;}catch(t){console.error("closeCurrentBannerAd failed !");console.error(t);h=null;}};var I=function t(e,n){if(n===void 0){n=true;}
v(!n);h=y(e);};var x=function t(e){a["create"+e+"BannerAd"]=function(){var t=o[e];if(!t.id){console.error(e+" BannerAd 的adv_id没有配置");return;}else{if(t.showTime&&t.hideTime){console.log("创建循环广告",e,t.showTime+t.hideTime,t.showTime);S(e,t.showTime+t.hideTime,t.showTime);}else{I(t.id);}}};};for(var T in o){x(T);}
a.createBannerAd=function(t){if(!a["create"+t+"BannerAd"]){console.log("广告 "+t+" 没有配置");return;}
a["create"+t+"BannerAd"]();};var S=function t(e,n,i,r){if(r===void 0){r=true;}
v();if(n<1e3){console.error("创建间隔太短了! 时间单位是毫秒, 当前为 "+n+"毫秒");}
r&&I(o[e].id,_!=e);m.showInterval=setInterval(function(){I(o[e].id,_!=e);},n);m.delayHideTimer=setTimeout(function(){m.hideInterval=setInterval(function(){v(true);},n);v(true);},i);c=true;_=e;};var b=function e(n,i,r,a,o,s){var l=t.createRewardedVideoAd({adUnitId:n});var u=function t(){l.offClose();l.offError();o();};var h=function e(n){t.hideLoading();console.error("视频广告加载失败",n);a();u();f[s]=(f[s]||0)+1;};l.onClose(function(t){t&&t.isEnded?i():r();u();});l.onError(h);t.showLoading({title:"视频加载中",mask:true});l.load().then(function(){t.hideLoading();return l.show();});};var w=t.getStorageSync("VideoAdPlayLastDay");var D=u();var C=false;if(w!=D){w=D;t.setStorageSync("VideoAdPlayLastDay",w);C=true;}
var E={};a.getVideoAdPlayInfoToday=function(t){if(!s[t]){return{playTimes:-1,maxTimes:-1,valid:false};}
var e=s[t].maxPlayTimes;var n=E[t];if(f[t]&&f[t]>=p){return{playTimes:n,maxTimes:e,valid:false};}
return{playTimes:n,maxTimes:e,valid:e-n>0};};var P=function e(n){if(C){t.setStorageSync(n+"VideoAdPlayTimesToday",0);E[n]=0;}else{E[n]=+t.getStorageSync(n+"VideoAdPlayTimesToday");}
a["create"+n+"VideoAd"]=function(e,i,r,a){if(!s[n].id){console.error("视频 "+n+" 未配置 adUnitId!");r&&r();a&&a();return;}
if(E[n]>=s[n].maxPlayTimes){t.showModal({title:"Prompt ",content:"今日次数已用完"});r&&r();a&&a();return;}
if(d)return;d=true;var o=function t(){d=false;a&&a();};if(!i){i=function e(){t.showModal({title:"Prompt ",content:"视频未播放完"});};}
if(!r){r=function e(){t.showModal({title:"Prompt ",content:"视频加载失败, 请稍后再试"});};}
b(s[n].id,function(){E[n]++;t.setStorageSync(n+"VideoAdPlayTimesToday",E[n]);e&&e();},i,r,o,n);};};for(var T in s){P(T);}
a.createVideoAd=function(t,e,n,i,r){if(!a["create"+t+"VideoAd"]){console.log("广告 "+t+" 没有配置");return;}
a["create"+t+"VideoAd"](e,n,i,r);};a.closeCurrentBannerAd=v;}};e.default=a;}).call(this,n(0));},function(t,e,n){"use strict";},function(t,e,n){"use strict";t.exports=function(){return window.PlatformAPI.createBannerAd.apply(window.PlatformAPI,arguments);};},function(t,e,n){"use strict";t.exports=function(){return window.SSSGameConfig.setSSSmoregameBtn.apply(window.SSSGameConfig,arguments);};},function(module,exports,__webpack_require__){"use strict";(function(wx,Promise,module){var _interopRequireDefault=__webpack_require__(1);var _typeof2=_interopRequireDefault(__webpack_require__(2));function md5(t){return rstr2hex(rstr_md5(str2rstr_utf8(t))).toUpperCase();}
function hex_hmac_md5(t,e){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(t),str2rstr_utf8(e)));}
function rstr_md5(t){return binl2rstr(binl_md5(rstr2binl(t),8*t.length));}
function rstr_hmac_md5(t,e){var n=rstr2binl(t);16<n.length&&(n=binl_md5(n,8*t.length));for(var i=Array(16),r=Array(16),a=0;a<16;a++){i[a]=909522486^n[a],r[a]=1549556828^n[a];}
var o=binl_md5(i.concat(rstr2binl(e)),512+8*e.length);return binl2rstr(binl_md5(r.concat(o),640));}
function rstr2hex(t){for(var e,n=hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",r=0;r<t.length;r++){e=t.charCodeAt(r),i+=n.charAt(e>>>4&15)+n.charAt(15&e);}
return i;}
function str2rstr_utf8(t){for(var e,n,i="",r=-1;++r<t.length;){e=t.charCodeAt(r),n=r+1<t.length?t.charCodeAt(r+1):0,55296<=e&&e<=56319&&56320<=n&&n<=57343&&(e=65536+((1023&e)<<10)+(1023&n),r++),e<=127?i+=String.fromCharCode(e):e<=2047?i+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?i+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(i+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));}
return i;}
function rstr2binl(t){for(var e=Array(t.length>>2),n=0;n<e.length;n++){e[n]=0;}
for(n=0;n<8*t.length;n+=8){e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;}
return e;}
function binl2rstr(t){for(var e="",n=0;n<32*t.length;n+=8){e+=String.fromCharCode(t[n>>5]>>>n%32&255);}
return e;}
function binl_md5(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,i=-271733879,r=-1732584194,a=271733878,o=0;o<t.length;o+=16){var s=n,l=i,u=r,h=a;i=md5_ii(i=md5_ii(i=md5_ii(i=md5_ii(i=md5_hh(i=md5_hh(i=md5_hh(i=md5_hh(i=md5_gg(i=md5_gg(i=md5_gg(i=md5_gg(i=md5_ff(i=md5_ff(i=md5_ff(i=md5_ff(i,r=md5_ff(r,a=md5_ff(a,n=md5_ff(n,i,r,a,t[o+0],7,-680876936),i,r,t[o+1],12,-389564586),n,i,t[o+2],17,606105819),a,n,t[o+3],22,-1044525330),r=md5_ff(r,a=md5_ff(a,n=md5_ff(n,i,r,a,t[o+4],7,-176418897),i,r,t[o+5],12,1200080426),n,i,t[o+6],17,-1473231341),a,n,t[o+7],22,-45705983),r=md5_ff(r,a=md5_ff(a,n=md5_ff(n,i,r,a,t[o+8],7,1770035416),i,r,t[o+9],12,-1958414417),n,i,t[o+10],17,-42063),a,n,t[o+11],22,-1990404162),r=md5_ff(r,a=md5_ff(a,n=md5_ff(n,i,r,a,t[o+12],7,1804603682),i,r,t[o+13],12,-40341101),n,i,t[o+14],17,-1502002290),a,n,t[o+15],22,1236535329),r=md5_gg(r,a=md5_gg(a,n=md5_gg(n,i,r,a,t[o+1],5,-165796510),i,r,t[o+6],9,-1069501632),n,i,t[o+11],14,643717713),a,n,t[o+0],20,-373897302),r=md5_gg(r,a=md5_gg(a,n=md5_gg(n,i,r,a,t[o+5],5,-701558691),i,r,t[o+10],9,38016083),n,i,t[o+15],14,-660478335),a,n,t[o+4],20,-405537848),r=md5_gg(r,a=md5_gg(a,n=md5_gg(n,i,r,a,t[o+9],5,568446438),i,r,t[o+14],9,-1019803690),n,i,t[o+3],14,-187363961),a,n,t[o+8],20,1163531501),r=md5_gg(r,a=md5_gg(a,n=md5_gg(n,i,r,a,t[o+13],5,-1444681467),i,r,t[o+2],9,-51403784),n,i,t[o+7],14,1735328473),a,n,t[o+12],20,-1926607734),r=md5_hh(r,a=md5_hh(a,n=md5_hh(n,i,r,a,t[o+5],4,-378558),i,r,t[o+8],11,-2022574463),n,i,t[o+11],16,1839030562),a,n,t[o+14],23,-35309556),r=md5_hh(r,a=md5_hh(a,n=md5_hh(n,i,r,a,t[o+1],4,-1530992060),i,r,t[o+4],11,1272893353),n,i,t[o+7],16,-155497632),a,n,t[o+10],23,-1094730640),r=md5_hh(r,a=md5_hh(a,n=md5_hh(n,i,r,a,t[o+13],4,681279174),i,r,t[o+0],11,-358537222),n,i,t[o+3],16,-722521979),a,n,t[o+6],23,76029189),r=md5_hh(r,a=md5_hh(a,n=md5_hh(n,i,r,a,t[o+9],4,-640364487),i,r,t[o+12],11,-421815835),n,i,t[o+15],16,530742520),a,n,t[o+2],23,-995338651),r=md5_ii(r,a=md5_ii(a,n=md5_ii(n,i,r,a,t[o+0],6,-198630844),i,r,t[o+7],10,1126891415),n,i,t[o+14],15,-1416354905),a,n,t[o+5],21,-57434055),r=md5_ii(r,a=md5_ii(a,n=md5_ii(n,i,r,a,t[o+12],6,1700485571),i,r,t[o+3],10,-1894986606),n,i,t[o+10],15,-1051523),a,n,t[o+1],21,-2054922799),r=md5_ii(r,a=md5_ii(a,n=md5_ii(n,i,r,a,t[o+8],6,1873313359),i,r,t[o+15],10,-30611744),n,i,t[o+6],15,-1560198380),a,n,t[o+13],21,1309151649),r=md5_ii(r,a=md5_ii(a,n=md5_ii(n,i,r,a,t[o+4],6,-145523070),i,r,t[o+11],10,-1120210379),n,i,t[o+2],15,718787259),a,n,t[o+9],21,-343485551),n=safe_add(n,s),i=safe_add(i,l),r=safe_add(r,u),a=safe_add(a,h);}
return Array(n,i,r,a);}
function md5_cmn(t,e,n,i,r,a){return safe_add(bit_rol(safe_add(safe_add(e,t),safe_add(i,a)),r),n);}
function md5_ff(t,e,n,i,r,a,o){return md5_cmn(e&n|~e&i,t,e,r,a,o);}
function md5_gg(t,e,n,i,r,a,o){return md5_cmn(e&i|n&~i,t,e,r,a,o);}
function md5_hh(t,e,n,i,r,a,o){return md5_cmn(e^n^i,t,e,r,a,o);}
function md5_ii(t,e,n,i,r,a,o){return md5_cmn(n^(e|~i),t,e,r,a,o);}
function safe_add(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n;}
function bit_rol(t,e){return t<<e|t>>>32-e;}
var Laya=window.Laya=function(t,e){var n={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function t(e,i){return 1==arguments.length?n.__presubstr.call(this,e):n.__presubstr.call(this,e,i>0?i:this.length+i);},__init:function t(e){e.forEach(function(t){t.__init$&&t.__init$();});},__isClass:function t(e){return e&&(e.__isclass||e==Object||e==String||e==Array);},__newvec:function t(e,n){var i=[];i.length=e;for(var r=0;r<e;r++){i[r]=n;}
return i;},__extend:function t(e,i){function r(){n.un(this,"constructor",e);}
for(var a in i){if(i.hasOwnProperty(a)){var o=Object.getOwnPropertyDescriptor(i,a),s=o.get,l=o.set;s||l?s&&l?Object.defineProperty(e,a,o):(s&&Object.defineProperty(e,a,s),l&&Object.defineProperty(e,a,l)):e[a]=i[a];}}
r.prototype=i.prototype,e.prototype=new r(),n.un(e.prototype,"__imps",n.__copy({},i.prototype.__imps));},__copy:function t(e,n){if(!n)return null;e=e||{};for(var i in n){e[i]=n[i];}
return e;},__package:function e(i,r){if(!n.__packages[i]){n.__packages[i]=!0;var a=t,o=i.split(".");if(o.length>1)for(var s=0,l=o.length-1;s<l;s++){var u=a[o[s]];a=u||(a[o[s]]={});}
a[o[o.length-1]]||(a[o[o.length-1]]=r||{});}},__hasOwnProperty:function t(e,n){function i(t,e){if(Object.hasOwnProperty.call(e.prototype,t))return!0;var n=e.prototype.__super;return null==n?null:i(t,n);}
return n=n||this,Object.hasOwnProperty.call(n,e)||i(e,n.__class);},__typeof:function t(e,n){if(!e||!n)return!1;if(n===String)return "string"==typeof e;if(n===Number)return "number"==typeof e;if(n.__interface__)n=n.__interface__;else if("string"!=typeof n)return e instanceof n;return e.__imps&&e.__imps[n]||e.__class==n;},__as:function t(e,n){return this.__typeof(e,n)?e:null;},__int:function t(e){return e?parseInt(e):0;},interface:function e(i,r){n.__package(i,{});var a=n.__internals,o=a[i]=a[i]||{self:i};if(r){var s=r.split(",");o.extend=[];for(c=0;c<s.length;c++){var l=s[c];a[l]=a[l]||{self:l},o.extend.push(a[l]);}}
for(var u=t,h=i.split("."),c=0;c<h.length-1;c++){u=u[h[c]];}
u[h[h.length-1]]={__interface__:i};},class:function e(i,r,a,o){if(a&&n.__extend(i,a),r)if(n.__package(r,i),n.__classmap[r]=i,r.indexOf(".")>0){if(0==r.indexOf("laya.")){var s=r.split(".");o=o||s[s.length-1],n[o]&&console.log("Warning!,this class["+o+"] already exist:",n[o]),n[o]=i;}}else "Main"==r?t.Main=i:(n[r]&&console.log("Error!,this class["+r+"] already exist:",n[r]),n[r]=i);var l=n.un,u=i.prototype;l(u,"hasOwnProperty",n.__hasOwnProperty),l(u,"__class",i),l(u,"__super",a),l(u,"__className",r),l(i,"__super",a),l(i,"__className",r),l(i,"__isclass",!0),l(i,"super",function(t){this.__super.call(t);});},imps:function t(e,i){function r(t){var e,i;if((e=n.__internals[t])&&(a[t]=!0,i=e.extend))for(var o=0;o<i.length;o++){r(i[o].self);}}
if(!i)return null;var a=e.__imps||n.un(e,"__imps",{});for(var o in i){r(o);}},superSet:function t(e,n,i,r){var a=e.prototype["_$set_"+i];a&&a.call(n,r);},superGet:function t(e,n,i){var r=e.prototype["_$get_"+i];return r?r.call(n):null;},getset:function t(e,i,r,a,o){e?(a&&(i["_$GET_"+r]=a),o&&(i["_$SET_"+r]=o)):(a&&n.un(i,"_$get_"+r,a),o&&n.un(i,"_$set_"+r,o)),a&&o?Object.defineProperty(i,r,{get:a,set:o,enumerable:!1,configurable:!0}):(a&&Object.defineProperty(i,r,{get:a,enumerable:!1,configurable:!0}),o&&Object.defineProperty(i,r,{set:o,enumerable:!1,configurable:!0}));},static:function t(e,n){for(var i=0,r=n.length;i<r;i+=2){"length"==n[i]?e.length=n[i+1].call(e):function(){var t=n[i],r=n[i+1];Object.defineProperty(e,t,{get:function e(){return delete this[t],this[t]=r.call(this);},set:function e(n){delete this[t],this[t]=n;},enumerable:!0,configurable:!0});}();}},un:function t(e,i,r){return r||(r=e[i]),n.__propun.value=r,Object.defineProperty(e,i,n.__propun),r;},uns:function t(e,i){i.forEach(function(t){n.un(e,t);});}};return t.console=t.console||{log:function t(){}},t.trace=t.console.log,Error.prototype.throwError=function(){throw arguments;},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),n;}(window,document);!function(t,e,n){n.un,n.uns,n.static,n.class,n.getset,n.__newvec;}(window,document,Laya),function(t,e,n){n.un,n.uns;var i=n.static,r=n.class,a=n.getset;n.__newvec;n.interface("laya.runtime.IMarket"),n.interface("laya.filters.IFilter"),n.interface("laya.display.ILayout"),n.interface("laya.resource.IDispose"),n.interface("laya.runtime.IPlatform"),n.interface("laya.resource.IDestroy"),n.interface("laya.runtime.IConchNode"),n.interface("laya.filters.IFilterAction"),n.interface("laya.runtime.ICPlatformClass"),n.interface("laya.resource.ICreateResource"),n.interface("laya.runtime.IConchRenderObject"),n.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var o=function(){function e(){}
return r(e,"laya.utils.RunDriver"),e.FILTER_ACTIONS=[],e.pixelRatio=-1,e._charSizeTestDiv=null,e.now=function(){return Date.now();},e.getWindow=function(){return t;},e.getPixelRatio=function(){if(e.pixelRatio<0){var t=N.context,n=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;(e.pixelRatio=(N.window.devicePixelRatio||1)/n)<1&&(e.pixelRatio=1);}
return e.pixelRatio;},e.getIncludeStr=function(t){return null;},e.createShaderCondition=function(t){var e="(function() {return "+t+";})";return n._runScript(e);},e.fontMap=[],e.measureText=function(t,n){var i=e.hanzi.test(t);if(i&&e.fontMap[n])return e.fontMap[n];var r=N.context;r.font=n;var a=r.measureText(t);return i&&(e.fontMap[n]=a),a;},e.getWebGLContext=function(t){},e.beginFlush=function(){},e.endFinish=function(){},e.addToAtlas=null,e.flashFlushImage=function(t){},e.drawToCanvas=function(t,e,n,i,r,a){var o=vt.create("2D"),s=new R(n,i,o);return L.renders[e]._fun(t,s,r,a),o;},e.createParticleTemplate2D=null,e.createGLTextur=null,e.createWebGLContext2D=null,e.changeWebGLSize=function(t,e){},e.createRenderSprite=function(t,e){return new L(t,e);},e.createFilterAction=function(t){return new x();},e.createGraphics=function(){return new d();},e.clear=function(t){O._context.ctx.clear();},e.cancelLoadByUrl=function(t){},e.clearAtlas=function(t){},e.isAtlas=function(t){return!1;},e.addTextureToAtlas=function(t){},e.getTexturePixels=function(t,e,n,i,r){return null;},e.skinAniSprite=function(){return null;},e.update3DLoop=function(){},i(e,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$");}]),e;}(),s=(a(1,n,"alertGlobalError",null,function(t){var e=0;N.window.onerror=t?function(t,n,i,r,a){e++<5&&a&&alert("出错啦，请把此信息截图给研发商\n"+t+"\n"+a.stack||false);}:null;}),n.init=function(t,e,i){for(var r=[],a=2,o=arguments.length;a<o;a++){r.push(arguments[a]);}
if(!n._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=n._arrayBufferSlice),n._isinit=!0,N.__init__(),F.__init__(),d.__init__(),n.timer=new X(),n.scaleTimer=new X(),n.loader=new st(),J.__init__();for(var a=0,s=r.length;a<s;a++){r[a].enable&&r[a].enable();}
return _.__init__(),c.__init__(),V.__init__(),G.beginCheck(),n._currentStage=n.stage=new gt(),n.stage.conchModel&&n.stage.conchModel.setRootNode(),n.getUrlPath(),n.render=new O(0,0),n.stage.size(t,e),L.__init__(),g.__init__(),y.instance.__init__(n.stage,O.canvas),xt.__init__(),E.autoStopMusic=!0,P.__init__(),O.canvas;}},n.getUrlPath=function(){var t=N.window.location,e=t.pathname;e=":"==e.charAt(2)?e.substring(1):e,A.rootPath=A.basePath=A.getPath("file:"==t.protocol?e:t.protocol+"//"+t.host+t.pathname);},n._arrayBufferSlice=function(t,e){var n=new Uint8Array(this,t,e-t),i=new Uint8Array(n.length);return i.set(n),i.buffer;},n._runScript=function(t){return N.window["e"+String.fromCharCode(118)+"al"](t);},n.stage=null,n.timer=null,n.scaleTimer=null,n.loader=null,n.version="1.7.19.1beta",n.render=null,n._currentStage=null,n._isinit=!1,n.MiniAdpter={init:function e(){t.navigator&&t.navigator.userAgent&&t.navigator.userAgent.indexOf("MiniGame")>-1&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0");}},i(n,["conchMarket",function(){return this.conchMarket=t.conch?conchMarket:null;},"PlatformClass",function(){return this.PlatformClass=t.PlatformClass;}]),function(){function t(){}
return r(t,"Config"),t.WebGLTextCacheCount=500,t.atlasEnable=!1,t.showCanvasMark=!1,t.animationInterval=50,t.isAntialias=!1,t.isAlpha=!1,t.premultipliedAlpha=!0,t.isStencil=!0,t.preserveDrawingBuffer=!1,t;}()),l=function(){function t(){this._events=null;}
var e;r(t,"laya.events.EventDispatcher");var n=t.prototype;return n.hasListener=function(t){return!!(this._events&&this._events[t]);},n.event=function(t,e){if(!this._events||!this._events[t])return!1;var n=this._events[t];if(n.run)n.once&&delete this._events[t],null!=e?n.runWith(e):n.run();else{for(var i=0,r=n.length;i<r;i++){var a=n[i];a&&(null!=e?a.runWith(e):a.run()),a&&!a.once||(n.splice(i,1),i--,r--);}
0===n.length&&this._events&&delete this._events[t];}
return!0;},n.on=function(t,e,n,i){return this._createListener(t,e,n,i,!1);},n.once=function(t,e,n,i){return this._createListener(t,e,n,i,!0);},n._createListener=function(t,n,i,r,a,o){void 0===o&&(o=!0),o&&this.off(t,n,i,a);var s=e.create(n||this,i,r,a);this._events||(this._events={});var l=this._events;return l[t]?l[t].run?l[t]=[l[t],s]:l[t].push(s):l[t]=s,this;},n.off=function(t,e,n,i){if(void 0===i&&(i=!1),!this._events||!this._events[t])return this;var r=this._events[t];if(null!=n)if(r.run)e&&r.caller!==e||r.method!==n||i&&!r.once||(delete this._events[t],r.recover());else{for(var a=0,o=0,s=r.length;o<s;o++){var l=r[o];l?!l||e&&l.caller!==e||l.method!==n||i&&!l.once||(a++,r[o]=null,l.recover()):a++;}
a===s&&delete this._events[t];}
return this;},n.offAll=function(t){var e=this._events;if(!e)return this;if(t)this._recoverHandlers(e[t]),delete e[t];else{for(var n in e){this._recoverHandlers(e[n]);}
this._events=null;}
return this;},n._recoverHandlers=function(t){if(t)if(t.run)t.recover();else for(var e=t.length-1;e>-1;e--){t[e]&&(t[e].recover(),t[e]=null);}},n.isMouseEvent=function(e){return t.MOUSE_EVENTS[e];},t.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},t.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0}),e=function(t){function e(t,n,i,r){e.__super.call(this,t,n,i,r);}
r(e,"",u);return e.prototype.recover=function(){this._id>0&&(this._id=0,e._pool.push(this.clear()));},e.create=function(t,n,i,r){return void 0===r&&(r=!0),e._pool.length?e._pool.pop().setTo(t,n,i,r):new e(t,n,i,r);},e._pool=[],e;}();},t;}(),u=function(){function t(t,e,n,i){this.once=!1,this._id=0,void 0===i&&(i=!1),this.setTo(t,e,n,i);}
r(t,"laya.utils.Handler");var e=t.prototype;return e.setTo=function(e,n,i,r){return this._id=t._gid++,this.caller=e,this.method=n,this.args=i,this.once=r,this;},e.run=function(){if(null==this.method)return null;var t=this._id,e=this.method.apply(this.caller,this.args);return this._id===t&&this.once&&this.recover(),e;},e.runWith=function(t){if(null==this.method)return null;var e=this._id;if(null==t)var n=this.method.apply(this.caller,this.args);else n=this.args||t.unshift?this.args?this.method.apply(this.caller,this.args.concat(t)):this.method.apply(this.caller,t):this.method.call(this.caller,t);return this._id===e&&this.once&&this.recover(),n;},e.clear=function(){return this.caller=null,this.method=null,this.args=null,this;},e.recover=function(){this._id>0&&(this._id=0,t._pool.push(this.clear()));},t.create=function(e,n,i,r){return void 0===r&&(r=!0),t._pool.length?t._pool.pop().setTo(e,n,i,r):new t(e,n,i,r);},t._pool=[],t._gid=1,t;}(),h=function(){function t(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0;}
r(t,"laya.display.BitmapFont");var e=t.prototype;return e.loadFont=function(t,e){this._path=t,this._complete=e,n.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],u.create(this,this.onLoaded));},e.onLoaded=function(){this.parseFont(ot.getRes(this._path),ot.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null);},e.parseFont=function(t,e){if(null!=t&&null!=e){this._texture=e;var n=t.getElementsByTagName("info");if(!n[0].getAttributeNode)return this.parseFont2(t,e);this.fontSize=parseInt(n[0].getAttributeNode("size").nodeValue);var i=n[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])];var r;r=t.getElementsByTagName("char");var a=0;for(a=0;a<r.length;a++){var o=r[a],s=parseInt(o.getAttributeNode("id").nodeValue),l=parseInt(o.getAttributeNode("xoffset").nodeValue)/1,u=parseInt(o.getAttributeNode("yoffset").nodeValue)/1,h=parseInt(o.getAttributeNode("xadvance").nodeValue)/1,c=new C();c.x=parseInt(o.getAttributeNode("x").nodeValue),c.y=parseInt(o.getAttributeNode("y").nodeValue),c.width=parseInt(o.getAttributeNode("width").nodeValue),c.height=parseInt(o.getAttributeNode("height").nodeValue);var _=ut.create(e,c.x,c.y,c.width,c.height,l,u);this._maxWidth=Math.max(this._maxWidth,h+this.letterSpacing),this._fontCharDic[s]=_,this._fontWidthMap[s]=h;}}},e.parseFont2=function(t,e){if(null!=t&&null!=e){this._texture=e;var n=t.getElementsByTagName("info");this.fontSize=parseInt(n[0].attributes.size.nodeValue);var i=n[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])];var r=t.getElementsByTagName("char"),a=0;for(a=0;a<r.length;a++){var o=r[a].attributes,s=parseInt(o.id.nodeValue),l=parseInt(o.xoffset.nodeValue)/1,u=parseInt(o.yoffset.nodeValue)/1,h=parseInt(o.xadvance.nodeValue)/1,c=new C();c.x=parseInt(o.x.nodeValue),c.y=parseInt(o.y.nodeValue),c.width=parseInt(o.width.nodeValue),c.height=parseInt(o.height.nodeValue);var _=ut.create(e,c.x,c.y,c.width,c.height,l,u);this._maxWidth=Math.max(this._maxWidth,h+this.letterSpacing),this._fontCharDic[s]=_,this._fontWidthMap[s]=h;}}},e.getCharTexture=function(t){return this._fontCharDic[t.charCodeAt(0)];},e.destroy=function(){if(this._texture){for(var t in this._fontCharDic){var e=this._fontCharDic[t];e&&e.destroy();}
this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null;}},e.setSpaceWidth=function(t){this._spaceWidth=t;},e.getCharWidth=function(t){var e=t.charCodeAt(0);return this._fontWidthMap[e]?this._fontWidthMap[e]+this.letterSpacing:" "==t?this._spaceWidth+this.letterSpacing:0;},e.getTextWidth=function(t){for(var e=0,n=0,i=t.length;n<i;n++){e+=this.getCharWidth(t.charAt(n));}
return e;},e.getMaxWidth=function(){return this._maxWidth;},e.getMaxHeight=function(){return this.fontSize;},e.drawText=function(t,e,n,i,r,a){var o,s=this.getTextWidth(t),l=0;"center"===r&&(l=(a-s)/2),"right"===r&&(l=a-s);for(var u=0,h=0,c=t.length;h<c;h++){(o=this.getCharTexture(t.charAt(h)))&&(e.graphics.drawTexture(o,n+u+l,i),u+=this.getCharWidth(t.charAt(h)));}},t;}(),c=function(){function t(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=t._TF_EMPTY;}
r(t,"laya.display.css.Style");var e=t.prototype;return e.getTransform=function(){return this._tf;},e.setTransform=function(e){this._tf="none"!==e&&e?e:t._TF_EMPTY;},e.setTranslateX=function(e){this._tf===t._TF_EMPTY&&(this._tf=new f()),this._tf.translateX=e;},e.setTranslateY=function(e){this._tf===t._TF_EMPTY&&(this._tf=new f()),this._tf.translateY=e;},e.setScaleX=function(e){this._tf===t._TF_EMPTY&&(this._tf=new f()),this._tf.scaleX=e;},e.setScale=function(e,n){this._tf===t._TF_EMPTY&&(this._tf=new f()),this._tf.scaleX=e,this._tf.scaleY=n;},e.setScaleY=function(e){this._tf===t._TF_EMPTY&&(this._tf=new f()),this._tf.scaleY=e;},e.setRotate=function(e){this._tf===t._TF_EMPTY&&(this._tf=new f()),this._tf.rotate=e;},e.setSkewX=function(e){this._tf===t._TF_EMPTY&&(this._tf=new f()),this._tf.skewX=e;},e.setSkewY=function(e){this._tf===t._TF_EMPTY&&(this._tf=new f()),this._tf.skewY=e;},e.destroy=function(){this.scrollRect=null;},e.render=function(t,e,n,i){},e.getCSSStyle=function(){return tt.EMPTY;},e._enableLayout=function(){return!1;},a(0,e,"scaleX",function(){return this._tf.scaleX;},function(t){this.setScaleX(t);}),a(0,e,"transform",function(){return this.getTransform();},function(t){this.setTransform(t);}),a(0,e,"translateX",function(){return this._tf.translateX;},function(t){this.setTranslateX(t);}),a(0,e,"translateY",function(){return this._tf.translateY;},function(t){this.setTranslateY(t);}),a(0,e,"scaleY",function(){return this._tf.scaleY;},function(t){this.setScaleY(t);}),a(0,e,"block",function(){return 0!=(1&this._type);}),a(0,e,"skewY",function(){return this._tf.skewY;},function(t){this.setSkewY(t);}),a(0,e,"rotate",function(){return this._tf.rotate;},function(t){this.setRotate(t);}),a(0,e,"skewX",function(){return this._tf.skewX;},function(t){this.setSkewX(t);}),a(0,e,"paddingLeft",function(){return 0;}),a(0,e,"paddingTop",function(){return 0;}),a(0,e,"absolute",function(){return!0;}),t.__init__=function(){t._TF_EMPTY=new f(),t.EMPTY=new t();},t.EMPTY=null,t._TF_EMPTY=null,t;}(),_=function(){function t(e){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=k.create(t.defaultColor),this.family=t.defaultFamily,this.stroke=t._STROKE,this.size=t.defaultSize,e&&e!==t.EMPTY&&e.copyTo(this);}
r(t,"laya.display.css.Font");var e=t.prototype;return e.set=function(t){this._text=null;for(var e=t.split(" "),n=0,i=e.length;n<i;n++){var r=e[n];switch(r){case "italic":this.italic=!0;continue;case "bold":this.bold=!0;continue;}
r.indexOf("px")>0&&(this.size=parseInt(r),this.family=e[n+1],n++);}},e.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family;},e.copyTo=function(e){e._type=this._type,e._text=this._text,e._weight=this._weight,e._color=this._color,e.family=this.family,e.stroke=this.stroke!=t._STROKE?this.stroke.slice():t._STROKE,e.indent=this.indent,e.size=this.size;},a(0,e,"password",function(){return 0!=(1024&this._type);},function(t){t?this._type|=1024:this._type&=-1025;}),a(0,e,"color",function(){return this._color.strColor;},function(t){this._color=k.create(t);}),a(0,e,"italic",function(){return 0!=(512&this._type);},function(t){t?this._type|=512:this._type&=-513;}),a(0,e,"bold",function(){return 0!=(2048&this._type);},function(t){t?this._type|=2048:this._type&=-2049;}),a(0,e,"weight",function(){return ""+this._weight;},function(t){var e=0;switch(t){case "normal":break;case "bold":this.bold=!0,e=700;break;case "bolder":e=800;break;case "lighter":e=100;break;default:e=parseInt(t);}
this._weight=e,this._text=null;}),a(0,e,"decoration",function(){return this._decoration?this._decoration.value:"none";},function(t){var e=t.split(" ");switch(this._decoration||(this._decoration={}),e[0]){case "_":this._decoration.type="underline";break;case "-":this._decoration.type="line-through";break;case "overline":this._decoration.type="overline";break;default:this._decoration.type=e[0];}
e[1]&&(this._decoration.color=k.create(e)),this._decoration.value=t;}),t.__init__=function(){t.EMPTY=new t(null);},t.EMPTY=null,t.defaultColor="#000000",t.defaultSize=12,t.defaultFamily="Arial",t.defaultFont="12px Arial",t._STROKE=[0,"#000000"],t._ITALIC=512,t._PASSWORD=1024,t._BOLD=2048,t;}(),f=function(){function t(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0;}
return r(t,"laya.display.css.TransformInfo"),t;}(),d=function(){function e(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,O.isConchNode){this._nativeObj=new t._conchGraphics(),this.id=this._nativeObj.conchID;}}
r(e,"laya.display.Graphics");var i=e.prototype;return i.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null;},i.clear=function(t){void 0===t&&(t=!1);var n=0,i=0;if(t){var r=this._one;if(this._cmds){for(i=this._cmds.length,n=0;n<i;n++){!(r=this._cmds[n])||r.callee!==O._context._drawTexture&&r.callee!==O._context._drawTextureWithTransform||(r[0]=null,e._cache.push(r));}
this._cmds.length=0;}else r&&(!r||r.callee!==O._context._drawTexture&&r.callee!==O._context._drawTextureWithTransform||(r[0]=null,e._cache.push(r)));}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(n=0,i=this._vectorgraphArray.length;n<i;n++){Z.getInstance().deleteShape(this._vectorgraphArray[n]);}
this._vectorgraphArray.length=0;}},i._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset();},i._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new p(),this._graphicBounds._graphics=this);},i._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint();},i._isOnlyOne=function(){return!this._cmds||0===this._cmds.length;},i.getBounds=function(t){return void 0===t&&(t=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(t);},i.getBoundPoints=function(t){return void 0===t&&(t=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(t);},i._addCmd=function(t){this._cmds=this._cmds||[],t.callee=t.shift(),this._cmds.push(t);},i.setFilters=function(t){this._saveToCmd(O._context._setFilters,t);},i.drawTexture=function(t,n,i,r,a,o,s){if(void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===a&&(a=0),void 0===s&&(s=1),!t||s<.01)return null;r||(r=t.sourceWidth),a||(a=t.sourceHeight),s=s<0?0:s>1?1:s;var l=!O.isWebGL&&(N.onFirefox||N.onEdge||N.onIE||N.onSafari)?.5:0,u=r/t.sourceWidth,h=a/t.sourceHeight;if(r=t.width*u,a=t.height*h,t.loaded&&(r<=0||a<=0))return null;n+=t.offsetX*u,i+=t.offsetY*h,this._sp&&(this._sp._renderType|=512);var c;return n-=l,i-=l,r+=2*l,a+=2*l,e._cache.length?((c=e._cache.pop())[0]=t,c[1]=n,c[2]=i,c[3]=r,c[4]=a,c[5]=o,c[6]=s):c=[t,n,i,r,a,o,s],c.callee=o||1!=s?O._context._drawTextureWithTransform:O._context._drawTexture,null!=this._one||o||1!=s?this._saveToCmd(c.callee,c):(this._one=c,this._render=this._renderOneImg),t.loaded||t.once("loaded",this,this._textureLoaded,[t,c]),this._repaint(),c;},i.cleanByTexture=function(t,e,n,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),!t)return this.clear();if(this._one&&this._render===this._renderOneImg){i||(i=t.sourceWidth),r||(r=t.sourceHeight);var a=i/t.sourceWidth,o=r/t.sourceHeight;i=t.width*a,r=t.height*o,e+=t.offsetX*a,n+=t.offsetY*o,this._one[0]=t,this._one[1]=e,this._one[2]=n,this._one[3]=i,this._one[4]=r,this._repaint();}else this.clear(),t&&this.drawTexture(t,e,n,i,r);},i.drawTextures=function(t,e){t&&this._saveToCmd(O._context._drawTextures,[t,e]);},i.fillTexture=function(t,e,n,i,r,a,o){if(void 0===i&&(i=0),void 0===r&&(r=0),void 0===a&&(a="repeat"),t){var s=[t,e,n,i,r,a,o||D.EMPTY,{}];t.loaded||t.once("loaded",this,this._textureLoaded,[t,s]),this._saveToCmd(O._context._fillTexture,s);}},i._textureLoaded=function(t,e){e[3]=e[3]||t.width,e[4]=e[4]||t.height,this._repaint();},i.fillCircle=function(t,e,n,i,r,a,o){n.bitmap.enableMerageInAtlas=!1;var s=new Float32Array(2*(o+1)),l=new Float32Array(2*(o+1)),u=new Uint16Array(3*o),h=2*Math.PI/o,c=0;s[0]=i,s[1]=r,l[0]=i/n.width,l[1]=r/n.height;for(var _=2,f=0;f<o;f++){var d=a*Math.cos(c)+i,p=a*Math.sin(c)+r;s[_]=d,s[_+1]=p,l[_]=d/n.width,l[_+1]=p/n.height,c+=h,_+=2;}
for(_=0,f=0;f<o;f++){u[_++]=0,u[_++]=f+1,u[_++]=f+2>=o+1?1:f+2;}
this.drawTriangles(n,t,e,s,l,u);},i.drawTriangles=function(t,e,n,i,r,a,o,s,l,u){void 0===s&&(s=1),this._saveToCmd(O._context.drawTriangles,[t,e,n,i,r,a,o,s,l,u]);},i._saveToCmd=function(t,e){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=e,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(e)),e.callee=t,this._repaint(),e;},i.clipRect=function(t,e,n,i){this._saveToCmd(O._context._clipRect,[t,e,n,i]);},i.fillText=function(t,e,n,i,r,a,o){void 0===o&&(o=0),this._saveToCmd(O._context._fillText,[t,e,n,i||_.defaultFont,r,a]);},i.fillBorderText=function(t,e,n,i,r,a,o,s){this._saveToCmd(O._context._fillBorderText,[t,e,n,i||_.defaultFont,r,a,o,s]);},i.strokeText=function(t,e,n,i,r,a,o){this._saveToCmd(O._context._strokeText,[t,e,n,i||_.defaultFont,r,a,o]);},i.alpha=function(t){t=t<0?0:t>1?1:t,this._saveToCmd(O._context._alpha,[t]);},i.setAlpha=function(t){t=t<0?0:t>1?1:t,this._saveToCmd(O._context._setAlpha,[t]);},i.transform=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),this._saveToCmd(O._context._transform,[t,e,n]);},i.rotate=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),this._saveToCmd(O._context._rotate,[t,e,n]);},i.scale=function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=0),this._saveToCmd(O._context._scale,[t,e,n,i]);},i.translate=function(t,e){this._saveToCmd(O._context._translate,[t,e]);},i.save=function(){this._saveToCmd(O._context._save,[]);},i.restore=function(){this._saveToCmd(O._context._restore,[]);},i.replaceText=function(t){this._repaint();var e=this._cmds;if(e){for(var n=e.length-1;n>-1;n--){if(this._isTextCmd(e[n].callee))return e[n][0].toUpperCase?e[n][0]=t:e[n][0].setText(t),!0;}}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=t:this._one[0].setText(t),!0;return!1;},i._isTextCmd=function(t){return t===O._context._fillText||t===O._context._fillBorderText||t===O._context._strokeText;},i.replaceTextColor=function(t){this._repaint();var e=this._cmds;if(e)for(var n=e.length-1;n>-1;n--){this._isTextCmd(e[n].callee)&&(e[n][4]=t,e[n][0].toUpperCase||(e[n][0].changed=!0));}else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=t,this._one[0].toUpperCase||(this._one[0].changed=!0));},i.loadImage=function(t,e,i,r,a,o){function s(t){t&&(l.drawTexture(t,e,i,r,a),null!=o&&o.call(l._sp,t));}
var l=this;void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===a&&(a=0);var h=ot.getRes(t);h?s(h):n.loader.load(t,u.create(null,s),null,"image");},i._renderEmpty=function(t,e,n,i){},i._renderAll=function(t,e,n,i){for(var r,a=this._cmds,o=0,s=a.length;o<s;o++){(r=a[o]).callee.call(e,n,i,r);}},i._renderOne=function(t,e,n,i){this._one.callee.call(e,n,i,this._one);},i._renderOneImg=function(t,e,n,i){this._one.callee.call(e,n,i,this._one),2305!==t._renderType&&(t._renderType|=1);},i.drawLine=function(t,e,n,i,r,a){void 0===a&&(a=1);var o=0;O.isWebGL&&(o=Z.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(o));var s=a%2==0?0:.5,l=[t+s,e+s,n+s,i+s,r,a,o];this._saveToCmd(O._context._drawLine,l);},i.drawLines=function(t,e,n,i,r){void 0===r&&(r=1);var a=0;if(n&&!(n.length<4)){O.isWebGL&&(a=Z.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(a));var o=r%2==0?0:.5,s=[t+o,e+o,n,i,r,a];this._saveToCmd(O._context._drawLines,s);}},i.drawCurves=function(t,e,n,i,r){void 0===r&&(r=1);var a=[t,e,n,i,r];this._saveToCmd(O._context._drawCurves,a);},i.drawRect=function(t,e,n,i,r,a,o){void 0===o&&(o=1);var s=a?o/2:0,l=a?o:0,u=[t+s,e+s,n-l,i-l,r,a,o];this._saveToCmd(O._context._drawRect,u);},i.drawCircle=function(t,e,n,i,r,a){void 0===a&&(a=1);var o=r?a/2:0,s=0;O.isWebGL&&(s=Z.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(s));var l=[t,e,n-o,i,r,a,s];this._saveToCmd(O._context._drawCircle,l);},i.drawPie=function(t,e,n,i,r,a,o,s){void 0===s&&(s=1);var l=o?s/2:0,u=o?s:0,h=0;O.isWebGL&&(h=Z.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(h));var c=[t+l,e+l,n-u,i,r,a,o,s,h];c[3]=q.toRadian(i),c[4]=q.toRadian(r),this._saveToCmd(O._context._drawPie,c);},i.drawPoly=function(t,e,n,i,r,a){void 0===a&&(a=1);var o=0,s=!1;O.isWebGL&&(o=Z.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(o),s=!(n.length>6));var l=r?a%2==0?0:.5:0,u=[t+l,e+l,n,i,r,a,o,s];this._saveToCmd(O._context._drawPoly,u);},i.drawPath=function(t,e,n,i,r){var a=[t,e,n,i,r];this._saveToCmd(O._context._drawPath,a);},a(0,i,"cmds",function(){return this._cmds;},function(t){this._sp&&(this._sp._renderType|=512),this._cmds=t,this._render=this._renderAll,this._repaint();}),e.__init__=function(){if(O.isConchNode){for(var t=laya.display.Graphics.prototype,e=N.window.ConchGraphics.prototype,n=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],i=0,r=n.length;i<=r;i++){var a=n[i];t[a]=e[a];}
t._saveToCmd=null,e.drawImageS&&(t.drawTextures=function(t,e){if(t&&t.loaded&&t.bitmap&&t.source){var n=t.uv,i=t.bitmap.width,r=t.bitmap.height;this.drawImageS(t.bitmap.source,n[0]*i,n[1]*r,(n[2]-n[0])*i,(n[5]-n[3])*r,t.offsetX,t.offsetY,t.width,t.height,e);}}),t.drawTexture=function(t,e,n,i,r,a,o){if(void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=1),t)if(t.loaded){if(t.loaded&&t.bitmap&&t.source&&(i||(i=t.sourceWidth),r||(r=t.sourceHeight),o=o<0?0:o>1?1:o,i=i-t.sourceWidth+t.width,r=r-t.sourceHeight+t.height,!(i<=0||r<=0))){e+=t.offsetX,n+=t.offsetY;var s=t.uv,l=t.bitmap.width,u=t.bitmap.height;this.drawImageM(t.bitmap.source,s[0]*l,s[1]*u,(s[2]-s[0])*l,(s[5]-s[3])*u,e,n,i,r,a,o),this._repaint();}}else t.once("loaded",this,function(){this.drawTexture(t,e,n,i,r,a);});},t.fillTexture=function(t,e,n,i,r,a,o){if(void 0===i&&(i=0),void 0===r&&(r=0),void 0===a&&(a="repeat"),t&&t.loaded){var s,l=O._context.ctx,u=t.bitmap.width,h=t.bitmap.height,c=t.uv;s=t.uv!=ut.DEF_UV?l.createPattern(t.bitmap.source,a,c[0]*u,c[1]*h,(c[2]-c[0])*u,(c[5]-c[3])*h):l.createPattern(t.bitmap.source,a);var _=0,f=0;o&&(e+=o.x%t.width,n+=o.y%t.height,_-=o.x%t.width,f-=o.y%t.height),this._fillImage(s,e,n,_,f,i,r);}};}},e._cache=[],e;}(),p=function(){function t(){this._cacheBoundsType=!1;}
r(t,"laya.display.GraphicsBounds");var e=t.prototype;return e.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null;},e.reset=function(){this._temp&&(this._temp.length=0);},e.getBounds=function(t){return void 0===t&&(t=!1),(!this._bounds||!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._bounds=C._getWrapRec(this.getBoundPoints(t),this._bounds)),this._cacheBoundsType=t,this._bounds;},e.getBoundPoints=function(t){return void 0===t&&(t=!1),(!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(t)),this._cacheBoundsType=t,this._rstBoundPoints=q.copyArray(this._rstBoundPoints,this._temp);},e._getCmdPoints=function(e){void 0===e&&(e=!1);var n,i=O._context,r=this._graphics.cmds;if(n=this._temp||(this._temp=[]),n.length=0,r||null==this._graphics._one||(t._tempCmds.length=0,t._tempCmds.push(this._graphics._one),r=t._tempCmds),!r)return n;var a;(a=t._tempMatrixArrays).length=0;var o=t._initMatrix;o.identity();for(var s,l,u=t._tempMatrix,h=NaN,c=NaN,_=NaN,f=NaN,d=NaN,p=NaN,m=0,g=r.length;m<g;m++){if((s=r[m]).callee)switch(s.callee){case i._save:case 7:a.push(o),o=o.clone();break;case i._restore:case 8:o=a.pop();break;case i._scale:case 5:u.identity(),u.translate(-s[2],-s[3]),u.scale(s[0],s[1]),u.translate(s[2],s[3]),this._switchMatrix(o,u);break;case i._rotate:case 3:u.identity(),u.translate(-s[1],-s[2]),u.rotate(s[0]),u.translate(s[1],s[2]),this._switchMatrix(o,u);break;case i._translate:case 6:u.identity(),u.translate(s[0],s[1]),this._switchMatrix(o,u);break;case i._transform:case 4:u.identity(),u.translate(-s[1],-s[2]),u.concat(s[0]),u.translate(s[1],s[2]),this._switchMatrix(o,u);break;case 16:case 24:t._addPointArrToRst(n,C._getBoundPointS(s[0],s[1],s[2],s[3]),o);break;case 17:o.copyTo(u),u.concat(s[4]),t._addPointArrToRst(n,C._getBoundPointS(s[0],s[1],s[2],s[3]),u);break;case i._drawTexture:l=s[0],e?s[3]&&s[4]?t._addPointArrToRst(n,C._getBoundPointS(s[1],s[2],s[3],s[4]),o):(l=s[0],t._addPointArrToRst(n,C._getBoundPointS(s[1],s[2],l.width,l.height),o)):(h=(s[3]||l.sourceWidth)/l.width,c=(s[4]||l.sourceHeight)/l.height,_=h*l.sourceWidth,f=c*l.sourceHeight,d=l.offsetX>0?l.offsetX:0,p=l.offsetY>0?l.offsetY:0,d*=h,p*=c,t._addPointArrToRst(n,C._getBoundPointS(s[1]-d,s[2]-p,_,f),o));break;case i._fillTexture:s[3]&&s[4]?t._addPointArrToRst(n,C._getBoundPointS(s[1],s[2],s[3],s[4]),o):(l=s[0],t._addPointArrToRst(n,C._getBoundPointS(s[1],s[2],l.width,l.height),o));break;case i._drawTextureWithTransform:var y;s[5]?(o.copyTo(u),u.concat(s[5]),y=u):y=o,e?s[3]&&s[4]?t._addPointArrToRst(n,C._getBoundPointS(s[1],s[2],s[3],s[4]),y):(l=s[0],t._addPointArrToRst(n,C._getBoundPointS(s[1],s[2],l.width,l.height),y)):(l=s[0],h=(s[3]||l.sourceWidth)/l.width,c=(s[4]||l.sourceHeight)/l.height,_=h*l.sourceWidth,f=c*l.sourceHeight,d=l.offsetX>0?l.offsetX:0,p=l.offsetY>0?l.offsetY:0,d*=h,p*=c,t._addPointArrToRst(n,C._getBoundPointS(s[1]-d,s[2]-p,_,f),y));break;case i._drawRect:case 13:t._addPointArrToRst(n,C._getBoundPointS(s[0],s[1],s[2],s[3]),o);break;case i._drawCircle:case i._fillCircle:case 14:t._addPointArrToRst(n,C._getBoundPointS(s[0]-s[2],s[1]-s[2],s[2]+s[2],s[2]+s[2]),o);break;case i._drawLine:case 20:t._tempPoints.length=0;var v=NaN;v=.5*s[5],s[0]==s[2]?t._tempPoints.push(s[0]+v,s[1],s[2]+v,s[3],s[0]-v,s[1],s[2]-v,s[3]):s[1]==s[3]?t._tempPoints.push(s[0],s[1]+v,s[2],s[3]+v,s[0],s[1]-v,s[2],s[3]-v):t._tempPoints.push(s[0],s[1],s[2],s[3]),t._addPointArrToRst(n,t._tempPoints,o);break;case i._drawCurves:case 22:t._addPointArrToRst(n,T.I.getBezierPoints(s[2]),o,s[0],s[1]);break;case i._drawPoly:case i._drawLines:case 18:t._addPointArrToRst(n,s[2],o,s[0],s[1]);break;case i._drawPath:case 19:t._addPointArrToRst(n,this._getPathPoints(s[2]),o,s[0],s[1]);break;case i._drawPie:case 15:t._addPointArrToRst(n,this._getPiePoints(s[0],s[1],s[2],s[3],s[4]),o);}}
return n.length>200?n=q.copyArray(n,C._getWrapRec(n)._getBoundPoints()):n.length>8&&(n=S.scanPList(n)),n;},e._switchMatrix=function(t,e){e.concat(t),e.copyTo(t);},e._getPiePoints=function(e,n,i,r,a){var o=t._tempPoints;t._tempPoints.length=0,o.push(e,n);var s=(a-r)%(2*Math.PI)/10,l=NaN,u=r;for(l=0;l<=10;l++){o.push(e+i*Math.cos(u),n+i*Math.sin(u)),u+=s;}
return o;},e._getPathPoints=function(e){var n=0,i=0,r=t._tempPoints;r.length=0,i=e.length;var a;for(n=0;n<i;n++){(a=e[n]).length>1&&(r.push(a[1],a[2]),a.length>3&&r.push(a[3],a[4]));}
return r;},t._addPointArrToRst=function(e,n,i,r,a){void 0===r&&(r=0),void 0===a&&(a=0);var o=0,s=0;for(s=n.length,o=0;o<s;o+=2){t._addPointToRst(e,n[o]+r,n[o+1]+a,i);}},t._addPointToRst=function(t,e,n,i){var r=D.TEMP;r.setTo(e||0,n||0),i.transformPoint(r),t.push(r.x,r.y);},t._tempPoints=[],t._tempMatrixArrays=[],t._tempCmds=[],i(t,["_tempMatrix",function(){return this._tempMatrix=new w();},"_initMatrix",function(){return this._initMatrix=new w();}]),t;}(),m=function(){function t(){}
r(t,"laya.events.Event");var e=t.prototype;return e.setTo=function(t,e,n){return this.type=t,this.currentTarget=e,this.target=n,this;},e.stopPropagation=function(){this._stoped=!0;},a(0,e,"stageY",function(){return n.stage.mouseY;}),a(0,e,"charCode",function(){return this.nativeEvent.charCode;}),a(0,e,"touches",function(){var t=this.nativeEvent.touches;if(t)for(var e=n.stage,i=0,r=t.length;i<r;i++){var a=t[i],o=D.TEMP;o.setTo(a.clientX,a.clientY),e._canvasTransform.invertTransformPoint(o),e.transform.invertTransformPoint(o),a.stageX=o.x,a.stageY=o.y;}
return t;}),a(0,e,"keyLocation",function(){return this.nativeEvent.keyLocation;}),a(0,e,"ctrlKey",function(){return this.nativeEvent.ctrlKey;}),a(0,e,"altKey",function(){return this.nativeEvent.altKey;}),a(0,e,"shiftKey",function(){return this.nativeEvent.shiftKey;}),a(0,e,"stageX",function(){return n.stage.mouseX;}),t.EMPTY=new t(),t.MOUSE_DOWN="mousedown",t.MOUSE_UP="mouseup",t.CLICK="click",t.RIGHT_MOUSE_DOWN="rightmousedown",t.RIGHT_MOUSE_UP="rightmouseup",t.RIGHT_CLICK="rightclick",t.MOUSE_MOVE="mousemove",t.MOUSE_OVER="mouseover",t.MOUSE_OUT="mouseout",t.MOUSE_WHEEL="mousewheel",t.ROLL_OVER="mouseover",t.ROLL_OUT="mouseout",t.DOUBLE_CLICK="doubleclick",t.CHANGE="change",t.CHANGED="changed",t.RESIZE="resize",t.ADDED="added",t.REMOVED="removed",t.DISPLAY="display",t.UNDISPLAY="undisplay",t.ERROR="error",t.COMPLETE="complete",t.LOADED="loaded",t.PROGRESS="progress",t.INPUT="input",t.RENDER="render",t.OPEN="open",t.MESSAGE="message",t.CLOSE="close",t.KEY_DOWN="keydown",t.KEY_PRESS="keypress",t.KEY_UP="keyup",t.FRAME="enterframe",t.DRAG_START="dragstart",t.DRAG_MOVE="dragmove",t.DRAG_END="dragend",t.ENTER="enter",t.SELECT="select",t.BLUR="blur",t.FOCUS="focus",t.VISIBILITY_CHANGE="visibilitychange",t.FOCUS_CHANGE="focuschange",t.PLAYED="played",t.PAUSED="paused",t.STOPPED="stopped",t.START="start",t.END="end",t.ENABLE_CHANGED="enablechanged",t.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",t.COMPONENT_ADDED="componentadded",t.COMPONENT_REMOVED="componentremoved",t.LAYER_CHANGED="layerchanged",t.HIERARCHY_LOADED="hierarchyloaded",t.RECOVERED="recovered",t.RELEASED="released",t.LINK="link",t.LABEL="label",t.FULL_SCREEN_CHANGE="fullscreenchange",t.DEVICE_LOST="devicelost",t.MESH_CHANGED="meshchanged",t.MATERIAL_CHANGED="materialchanged",t.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",t.ANIMATION_CHANGED="animationchanged",t.TRIGGER_ENTER="triggerenter",t.TRIGGER_STAY="triggerstay",t.TRIGGER_EXIT="triggerexit",t.TRAIL_FILTER_CHANGE="trailfilterchange",t.DOMINO_FILTER_CHANGE="dominofilterchange",t;}(),g=(function(){function t(){}
r(t,"laya.events.Keyboard"),t.NUMBER_0=48,t.NUMBER_1=49,t.NUMBER_2=50,t.NUMBER_3=51,t.NUMBER_4=52,t.NUMBER_5=53,t.NUMBER_6=54,t.NUMBER_7=55,t.NUMBER_8=56,t.NUMBER_9=57,t.A=65,t.B=66,t.C=67,t.D=68,t.E=69,t.F=70,t.G=71,t.H=72,t.I=73,t.J=74,t.K=75,t.L=76,t.M=77,t.N=78,t.O=79,t.P=80,t.Q=81,t.R=82,t.S=83,t.T=84,t.U=85,t.V=86,t.W=87,t.X=88,t.Y=89,t.Z=90,t.F1=112,t.F2=113,t.F3=114,t.F4=115,t.F5=116,t.F6=117,t.F7=118,t.F8=119,t.F9=120,t.F10=121,t.F11=122,t.F12=123,t.F13=124,t.F14=125,t.F15=126,t.NUMPAD=21,t.NUMPAD_0=96,t.NUMPAD_1=97,t.NUMPAD_2=98,t.NUMPAD_3=99,t.NUMPAD_4=100,t.NUMPAD_5=101,t.NUMPAD_6=102,t.NUMPAD_7=103,t.NUMPAD_8=104,t.NUMPAD_9=105,t.NUMPAD_ADD=107,t.NUMPAD_DECIMAL=110,t.NUMPAD_DIVIDE=111,t.NUMPAD_ENTER=108,t.NUMPAD_MULTIPLY=106,t.NUMPAD_SUBTRACT=109,t.SEMICOLON=186,t.EQUAL=187,t.COMMA=188,t.MINUS=189,t.PERIOD=190,t.SLASH=191,t.BACKQUOTE=192,t.LEFTBRACKET=219,t.BACKSLASH=220,t.RIGHTBRACKET=221,t.QUOTE=222,t.ALTERNATE=18,t.BACKSPACE=8,t.CAPS_LOCK=20,t.COMMAND=15,t.CONTROL=17,t.DELETE=46,t.ENTER=13,t.ESCAPE=27,t.PAGE_UP=33,t.PAGE_DOWN=34,t.END=35,t.HOME=36,t.LEFT=37,t.UP=38,t.RIGHT=39,t.DOWN=40,t.SHIFT=16,t.SPACE=32,t.TAB=9,t.INSERT=45;}(),function(){function t(){}
return r(t,"laya.events.KeyBoardManager"),t.__init__=function(){t._addEvent("keydown"),t._addEvent("keypress"),t._addEvent("keyup");},t._addEvent=function(t){N.document.addEventListener(t,function(e){laya.events.KeyBoardManager._dispatch(e,t);},!0);},t._dispatch=function(e,i){if(t.enabled){t._event._stoped=!1,t._event.nativeEvent=e,t._event.keyCode=e.keyCode||e.which||e.charCode,"keydown"===i?t._pressKeys[t._event.keyCode]=!0:"keyup"===i&&(t._pressKeys[t._event.keyCode]=null);for(var r=n.stage.focus&&null!=n.stage.focus.event&&n.stage.focus.displayedInStage?n.stage.focus:n.stage,a=r;a;){a.event(i,t._event.setTo(i,a,r)),a=a.parent;}}},t.hasKeyDown=function(e){return t._pressKeys[e];},t._pressKeys={},t.enabled=!0,i(t,["_event",function(){return this._event=new m();}]),t;}()),y=(function(){function t(){}
r(t,"laya.events.KeyLocation"),t.STANDARD=0,t.LEFT=1,t.RIGHT=2,t.NUM_PAD=3;}(),function(){function t(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new m(),this._matrix=new w(),this._point=new D(),this._rect=new C(),this._prePoint=new D(),this._curTouchID=NaN;}
r(t,"laya.events.MouseManager");var e=t.prototype;return e.__init__=function(e,n){var i=this;this._stage=e;var r=this,a=this._eventList;n.oncontextmenu=function(e){if(t.enabled)return!1;},n.addEventListener("mousedown",function(e){t.enabled&&(N.onIE||e.preventDefault(),a.push(e),r.mouseDownTime=N.now());}),n.addEventListener("mouseup",function(e){t.enabled&&(e.preventDefault(),a.push(e),r.mouseDownTime=-N.now());},!0),n.addEventListener("mousemove",function(e){if(t.enabled){e.preventDefault();var n=N.now();if(n-r._lastMoveTimer<10)return;r._lastMoveTimer=n,a.push(e);}},!0),n.addEventListener("mouseout",function(e){t.enabled&&a.push(e);}),n.addEventListener("mouseover",function(e){t.enabled&&a.push(e);}),n.addEventListener("touchstart",function(e){t.enabled&&(a.push(e),t._isFirstTouch||xt.isInputting||e.preventDefault(),r.mouseDownTime=N.now());}),n.addEventListener("touchend",function(e){t.enabled?(t._isFirstTouch||xt.isInputting||e.preventDefault(),t._isFirstTouch=!1,a.push(e),r.mouseDownTime=-N.now()):i._curTouchID=NaN;},!0),n.addEventListener("touchmove",function(e){t.enabled&&(e.preventDefault(),a.push(e));},!0),n.addEventListener("touchcancel",function(e){t.enabled?(e.preventDefault(),a.push(e)):i._curTouchID=NaN;},!0),n.addEventListener("mousewheel",function(e){t.enabled&&a.push(e);}),n.addEventListener("DOMMouseScroll",function(e){t.enabled&&a.push(e);});},e.initEvent=function(t,e){this._event._stoped=!1,this._event.nativeEvent=e||t,this._target=null,this._point.setTo(t.pageX||t.clientX,t.pageY||t.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=t.identifier||0,this._tTouchID=this._event.touchId;var n;(n=v.I._event)._stoped=!1,n.nativeEvent=this._event.nativeEvent,n.touchId=this._event.touchId;},e.checkMouseWheel=function(t){this._event.delta=t.wheelDelta?.025*t.wheelDelta:-t.detail;for(var e=v.I.getLastOvers(),n=0,i=e.length;n<i;n++){var r=e[n];r.event("mousewheel",this._event.setTo("mousewheel",r,this._target));}},e.onMouseMove=function(t){v.I.onMouseMove(t,this._tTouchID);},e.onMouseDown=function(t){if(xt.isInputting&&n.stage.focus&&n.stage.focus.focus&&!n.stage.focus.contains(this._target)){var e=n.stage.focus._tf||n.stage.focus,i=t._tf||t;i instanceof laya.display.Input&&i.multiline==e.multiline?e._focusOut():e.focus=!1;}
v.I.onMouseDown(t,this._tTouchID,this._isLeftMouse);},e.onMouseUp=function(t){v.I.onMouseUp(t,this._tTouchID,this._isLeftMouse);},e.check=function(t,e,n,i){this._point.setTo(e,n),t.fromParentPoint(this._point),e=this._point.x,n=this._point.y;var r=t.scrollRect;if(r&&(this._rect.setTo(r.x,r.y,r.width,r.height),!this._rect.contains(e,n)))return!1;if(!this.disableMouseEvent){if(t.hitTestPrior&&!t.mouseThrough&&!this.hitTest(t,e,n))return!1;for(var a=t._childs.length-1;a>-1;a--){var o=t._childs[a];if(!o.destroyed&&o.mouseEnabled&&o.visible&&this.check(o,e,n,i))return!0;}}
var s=!(!t.hitTestPrior||t.mouseThrough||this.disableMouseEvent)||this.hitTest(t,e,n);return s?(this._target=t,i.call(this,t)):i===this.onMouseUp&&t===this._stage&&(this._target=this._stage,i.call(this,this._target)),s;},e.hitTest=function(t,e,n){var i=!1;if(t.scrollRect&&(e-=t.scrollRect.x,n-=t.scrollRect.y),t.hitArea instanceof laya.utils.HitArea)return t.hitArea.isHit(e,n);if(t.width>0&&t.height>0||t.mouseThrough||t.hitArea)if(t.mouseThrough)i=t.getGraphicBounds().contains(e,n);else{var r=this._rect;t.hitArea?r=t.hitArea:r.setTo(0,0,t.width,t.height),i=r.contains(e,n);}
return i;},e.runEvent=function(){var e=this._eventList.length;if(e){for(var n,i=0,r=0,a=0;i<e;){var o=this._eventList[i];switch("mousemove"!==o.type&&(this._prePoint.x=this._prePoint.y=-1e6),o.type){case "mousedown":this._touchIDs[0]=this._id++,t._isTouchRespond?t._isTouchRespond=!1:(this._isLeftMouse=0===o.button,this.initEvent(o),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case "mouseup":this._isLeftMouse=0===o.button,this.initEvent(o),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case "mousemove":Math.abs(this._prePoint.x-o.clientX)+Math.abs(this._prePoint.y-o.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=o.clientX,this._prePoint.y=o.clientY,this.initEvent(o),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case "touchstart":t._isTouchRespond=!0,this._isLeftMouse=!0;var s=o.changedTouches;for(r=0,a=s.length;r<a;r++){n=s[r],(t.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=n.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[n.identifier]=this._id++,this.initEvent(n,o),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));}
break;case "touchend":case "touchcancel":t._isTouchRespond=!0,this._isLeftMouse=!0;var l=o.changedTouches;for(r=0,a=l.length;r<a;r++){if(n=l[r],t.multiTouchEnabled||n.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(n,o);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null);}}
break;case "touchmove":var u=o.changedTouches;for(r=0,a=u.length;r<a;r++){n=u[r],(t.multiTouchEnabled||n.identifier==this._curTouchID)&&(this.initEvent(n,o),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));}
break;case "wheel":case "mousewheel":case "DOMMouseScroll":this.checkMouseWheel(o);break;case "mouseout":v.I.stageMouseOut();break;case "mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage));}
i++;}
this._eventList.length=0;}},t.enabled=!0,t.multiTouchEnabled=!0,t._isTouchRespond=!1,t._isFirstTouch=!0,i(t,["instance",function(){return this.instance=new t();}]),t;}()),v=function(){function t(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new m();}
r(t,"laya.events.TouchManager");var e=t.prototype;return e._clearTempArrs=function(){t._oldArr.length=0,t._newArr.length=0,t._tEleArr.length=0;},e.getTouchFromArr=function(t,e){var n=0,i=0;i=e.length;var r;for(n=0;n<i;n++){if((r=e[n]).id==t)return r;}
return null;},e.removeTouchFromArr=function(t,e){var n=0;for(n=e.length-1;n>=0;n--){e[n].id==t&&e.splice(n,1);}},e.createTouchO=function(t,e){var n;return n=W.getItem("TouchData")||{},n.id=e,n.tar=t,n;},e.onMouseDown=function(e,n,i){if(void 0===i&&(i=!1),this.enable){var r,a,o;r=this.getTouchFromArr(n,this.preOvers),o=this.getEles(e,null,t._tEleArr),r?r.tar=e:(a=this.createTouchO(e,n),this.preOvers.push(a)),N.onMobile&&this.sendEvents(o,"mouseover",n);var s;s=i?this.preDowns:this.preRightDowns,(r=this.getTouchFromArr(n,s))?r.tar=e:(a=this.createTouchO(e,n),s.push(a)),this.sendEvents(o,i?"mousedown":"rightmousedown",n),this._clearTempArrs();}},e.sendEvents=function(t,e,n){void 0===n&&(n=0);var i=0,r=0;r=t.length,this._event._stoped=!1;var a;a=t[0];var o;for(i=0;i<r;i++){if((o=t[i]).destroyed)return;if(o.event(e,this._event.setTo(e,o,a)),this._event._stoped)break;}},e.getEles=function(t,e,n){for(n?n.length=0:n=[];t&&t!=e;){n.push(t),t=t.parent;}
return n;},e.checkMouseOutAndOverOfMove=function(e,n,i){if(void 0===i&&(i=0),n!=e){var r,a,o=0,s=0;if(n.contains(e))a=this.getEles(e,n,t._tEleArr),this.sendEvents(a,"mouseover",i);else if(e.contains(n))a=this.getEles(n,e,t._tEleArr),this.sendEvents(a,"mouseout",i);else{(a=t._tEleArr).length=0;var l;l=this.getEles(n,null,t._oldArr);var u;u=this.getEles(e,null,t._newArr),s=l.length;var h=0;for(o=0;o<s;o++){if(r=l[o],(h=u.indexOf(r))>=0){u.splice(h,u.length-h);break;}
a.push(r);}
a.length>0&&this.sendEvents(a,"mouseout",i),u.length>0&&this.sendEvents(u,"mouseover",i);}}},e.onMouseMove=function(e,n){if(this.enable){var i,r;(i=this.getTouchFromArr(n,this.preOvers))?(this.checkMouseOutAndOverOfMove(e,i.tar),i.tar=e,r=this.getEles(e,null,t._tEleArr)):(r=this.getEles(e,null,t._tEleArr),this.sendEvents(r,"mouseover",n),this.preOvers.push(this.createTouchO(e,n))),this.sendEvents(r,"mousemove",n),this._clearTempArrs();}},e.getLastOvers=function(){return t._tEleArr.length=0,this.preOvers.length>0&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,t._tEleArr):(t._tEleArr.push(n.stage),t._tEleArr);},e.stageMouseOut=function(){var t;t=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(t,"mouseout",0);},e.onMouseUp=function(e,n,i){if(void 0===i&&(i=!1),this.enable){var r,a,o,s,l,u=0,h=0,c=N.onMobile;a=this.getEles(e,null,t._tEleArr),this.sendEvents(a,i?"mouseup":"rightmouseup",n);var _;if(_=i?this.preDowns:this.preRightDowns,r=this.getTouchFromArr(n,_)){var f=!1,d=N.now();if(f=d-this._lastClickTime<300,this._lastClickTime=d,e==r.tar)l=a;else for(o=this.getEles(r.tar,null,t._oldArr),(l=t._newArr).length=0,h=o.length,u=0;u<h;u++){s=o[u],a.indexOf(s)>=0&&l.push(s);}
l.length>0&&this.sendEvents(l,i?"click":"rightclick",n),i&&f&&this.sendEvents(l,"doubleclick",n),this.removeTouchFromArr(n,_),r.tar=null,W.recover("TouchData",r);}else;(r=this.getTouchFromArr(n,this.preOvers))&&c&&((l=this.getEles(r.tar,null,l))&&l.length>0&&this.sendEvents(l,"mouseout",n),this.removeTouchFromArr(n,this.preOvers),r.tar=null,W.recover("TouchData",r)),this._clearTempArrs();}},t._oldArr=[],t._newArr=[],t._tEleArr=[],i(t,["I",function(){return this.I=new t();}]),t;}(),I=function(){function t(){this._action=null;}
r(t,"laya.filters.Filter");var e=t.prototype;return n.imps(e,{"laya.filters.IFilter":!0}),e.callNative=function(t){},a(0,e,"type",function(){return-1;}),a(0,e,"action",function(){return this._action;}),t.BLUR=16,t.COLOR=32,t.GLOW=8,t._filterStart=null,t._filterEnd=null,t._EndTarget=null,t._recycleScope=null,t._filter=null,t._useSrc=null,t._endSrc=null,t._useOut=null,t._endOut=null,t;}(),x=function(){function t(){this.data=null;}
r(t,"laya.filters.ColorFilterAction");var e=t.prototype;return n.imps(e,{"laya.filters.IFilterAction":!0}),e.apply=function(t){var e=t.ctx.ctx,n=t.ctx.ctx.canvas;if(0==n.width||0==n.height)return n;for(var i,r=e.getImageData(0,0,n.width,n.height),a=r.data,o=0,s=a.length;o<s;o+=4){i=this.getColor(a[o],a[o+1],a[o+2],a[o+3]),0!=a[o+3]&&(a[o]=i[0],a[o+1]=i[1],a[o+2]=i[2],a[o+3]=i[3]);}
return e.putImageData(r,0,0),t;},e.getColor=function(t,e,n,i){var r=[];if(this.data._mat&&this.data._alpha){var a=this.data._mat,o=this.data._alpha;r[0]=a[0]*t+a[1]*e+a[2]*n+a[3]*i+o[0],r[1]=a[4]*t+a[5]*e+a[6]*n+a[7]*i+o[1],r[2]=a[8]*t+a[9]*e+a[10]*n+a[11]*i+o[2],r[3]=a[12]*t+a[13]*e+a[14]*n+a[15]*i+o[3];}
return r;},t;}(),T=(function(){function t(){}
r(t,"laya.maths.Arith"),t.formatR=function(t){return t>Math.PI&&(t-=2*Math.PI),t<-Math.PI&&(t+=2*Math.PI),t;},t.isPOT=function(t,e){return t>0&&0==(t&t-1)&&e>0&&0==(e&e-1);},t.setMatToArray=function(t,e){t.a,t.b,t.c,t.d,t.tx,t.ty,e[0]=t.a,e[1]=t.b,e[4]=t.c,e[5]=t.d,e[12]=t.tx,e[13]=t.ty;};}(),function(){function t(){this._controlPoints=[new D(),new D(),new D()],this._calFun=this.getPoint2;}
r(t,"laya.maths.Bezier");var e=t.prototype;return e._switchPoint=function(t,e){var n=this._controlPoints.shift();n.setTo(t,e),this._controlPoints.push(n);},e.getPoint2=function(t,e){var n=this._controlPoints[0],i=this._controlPoints[1],r=this._controlPoints[2],a=Math.pow(1-t,2)*n.x+2*t*(1-t)*i.x+Math.pow(t,2)*r.x,o=Math.pow(1-t,2)*n.y+2*t*(1-t)*i.y+Math.pow(t,2)*r.y;e.push(a,o);},e.getPoint3=function(t,e){var n=this._controlPoints[0],i=this._controlPoints[1],r=this._controlPoints[2],a=this._controlPoints[3],o=Math.pow(1-t,3)*n.x+3*i.x*t*(1-t)*(1-t)+3*r.x*t*t*(1-t)+a.x*Math.pow(t,3),s=Math.pow(1-t,3)*n.y+3*i.y*t*(1-t)*(1-t)+3*r.y*t*t*(1-t)+a.y*Math.pow(t,3);e.push(o,s);},e.insertPoints=function(t,e){var n=NaN,i=NaN;for(i=1/(t=t>0?t:5),n=0;n<=1;n+=i){this._calFun(n,e);}},e.getBezierPoints=function(t,e,n){void 0===e&&(e=5),void 0===n&&(n=2);var i=0,r=0;if((r=t.length)<2*(n+1))return[];var a;switch(a=[],n){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[];}
for(;this._controlPoints.length<=n;){this._controlPoints.push(new D());}
for(i=0;i<2*n;i+=2){this._switchPoint(t[i],t[i+1]);}
for(i=2*n;i<r;i+=2){this._switchPoint(t[i],t[i+1]),i/2%n==0&&this.insertPoints(e,a);}
return a;},i(t,["I",function(){return this.I=new t();}]),t;}()),S=function(){function t(){}
return r(t,"laya.maths.GrahamScan"),t.multiply=function(t,e,n){return(t.x-n.x)*(e.y-n.y)-(e.x-n.x)*(t.y-n.y);},t.dis=function(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y);},t._getPoints=function(e,n,i){for(void 0===n&&(n=!1),t._mPointList||(t._mPointList=[]);t._mPointList.length<e;){t._mPointList.push(new D());}
return i||(i=[]),i.length=0,n?t.getFrom(i,t._mPointList,e):t.getFromR(i,t._mPointList,e),i;},t.getFrom=function(t,e,n){var i=0;for(i=0;i<n;i++){t.push(e[i]);}
return t;},t.getFromR=function(t,e,n){var i=0;for(i=0;i<n;i++){t.push(e.pop());}
return t;},t.pListToPointList=function(e,n){void 0===n&&(n=!1);var i=0,r=e.length/2,a=t._getPoints(r,n,t._tempPointList);for(i=0;i<r;i++){a[i].setTo(e[i+i],e[i+i+1]);}
return a;},t.pointListToPlist=function(e){var n,i=0,r=e.length,a=t._temPList;for(a.length=0,i=0;i<r;i++){n=e[i],a.push(n.x,n.y);}
return a;},t.scanPList=function(e){return q.copyArray(e,t.pointListToPlist(t.scan(t.pListToPointList(e,!0))));},t.scan=function(e){var n,i,r,a=0,o=0,s=0,l=e.length,u={};for((i=t._temArr).length=0,a=(l=e.length)-1;a>=0;a--){r=(n=e[a]).x+"_"+n.y,u.hasOwnProperty(r)||(u[r]=!0,i.push(n));}
for(l=i.length,q.copyArray(e,i),a=1;a<l;a++){(e[a].y<e[s].y||e[a].y==e[s].y&&e[a].x<e[s].x)&&(s=a);}
for(n=e[0],e[0]=e[s],e[s]=n,a=1;a<l-1;a++){for(s=a,o=a+1;o<l;o++){(t.multiply(e[o],e[s],e[0])>0||0==t.multiply(e[o],e[s],e[0])&&t.dis(e[0],e[o])<t.dis(e[0],e[s]))&&(s=o);}
n=e[a],e[a]=e[s],e[s]=n;}
if(i=t._temArr,i.length=0,e.length<3)return q.copyArray(i,e);for(i.push(e[0],e[1],e[2]),a=3;a<l;a++){for(;i.length>=2&&t.multiply(e[a],i[i.length-1],i[i.length-2])>=0;){i.pop();}
e[a]&&i.push(e[a]);}
return i;},t._mPointList=null,t._tempPointList=[],t._temPList=[],t._temArr=[],t;}(),b=function(){function t(){}
return r(t,"laya.maths.MathUtil"),t.subtractVector3=function(t,e,n){n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2];},t.lerp=function(t,e,n){return t*(1-n)+e*n;},t.scaleVector3=function(t,e,n){n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e;},t.lerpVector3=function(t,e,n,i){var r=t[0],a=t[1],o=t[2];i[0]=r+n*(e[0]-r),i[1]=a+n*(e[1]-a),i[2]=o+n*(e[2]-o);},t.lerpVector4=function(t,e,n,i){var r=t[0],a=t[1],o=t[2],s=t[3];i[0]=r+n*(e[0]-r),i[1]=a+n*(e[1]-a),i[2]=o+n*(e[2]-o),i[3]=s+n*(e[3]-s);},t.slerpQuaternionArray=function(t,e,n,i,r,a,o){var s,l,u,h,c,_=t[e+0],f=t[e+1],d=t[e+2],p=t[e+3],m=n[i+0],g=n[i+1],y=n[i+2],v=n[i+3];return(l=_*m+f*g+d*y+p*v)<0&&(l=-l,m=-m,g=-g,y=-y,v=-v),1-l>1e-6?(s=Math.acos(l),u=Math.sin(s),h=Math.sin((1-r)*s)/u,c=Math.sin(r*s)/u):(h=1-r,c=r),a[o+0]=h*_+c*m,a[o+1]=h*f+c*g,a[o+2]=h*d+c*y,a[o+3]=h*p+c*v,a;},t.getRotation=function(t,e,n,i){return Math.atan2(i-e,n-t)/Math.PI*180;},t.sortBigFirst=function(t,e){return t==e?0:e>t?1:-1;},t.sortSmallFirst=function(t,e){return t==e?0:e>t?-1:1;},t.sortNumBigFirst=function(t,e){return parseFloat(e)-parseFloat(t);},t.sortNumSmallFirst=function(t,e){return parseFloat(t)-parseFloat(e);},t.sortByKey=function(e,n,i){void 0===n&&(n=!1),void 0===i&&(i=!0);var r;return r=n?i?t.sortNumBigFirst:t.sortBigFirst:i?t.sortNumSmallFirst:t.sortSmallFirst,function(t,n){return r(t[e],n[e]);};},t;}(),w=function(){function t(t,e,n,i,r,a){this.inPool=!1,this.bTransform=!1,void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),void 0===r&&(r=0),void 0===a&&(a=0),this.a=t,this.b=e,this.c=n,this.d=i,this.tx=r,this.ty=a,this._checkTransform();}
r(t,"laya.maths.Matrix");var e=t.prototype;return e.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this;},e._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d;},e.setTranslate=function(t,e){return this.tx=t,this.ty=e,this;},e.translate=function(t,e){return this.tx+=t,this.ty+=e,this;},e.scale=function(t,e){this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this.bTransform=!0;},e.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),i=this.a,r=this.c,a=this.tx;this.a=i*e-this.b*n,this.b=i*n+this.b*e,this.c=r*e-this.d*n,this.d=r*n+this.d*e,this.tx=a*e-this.ty*n,this.ty=a*n+this.ty*e,this.bTransform=!0;},e.skew=function(t,e){var n=Math.tan(t),i=Math.tan(e),r=this.a,a=this.b;return this.a+=i*this.c,this.b+=i*this.d,this.c+=n*r,this.d+=n*a,this;},e.invertTransformPoint=function(t){var e=this.a,n=this.b,i=this.c,r=this.d,a=this.tx,o=e*r-n*i,s=r/o,l=-n/o,u=-i/o,h=e/o,c=(i*this.ty-r*a)/o,_=-(e*this.ty-n*a)/o;return t.setTo(s*t.x+u*t.y+c,l*t.x+h*t.y+_);},e.transformPoint=function(t){return t.setTo(this.a*t.x+this.c*t.y+this.tx,this.b*t.x+this.d*t.y+this.ty);},e.transformPointN=function(t){return t.setTo(this.a*t.x+this.c*t.y,this.b*t.x+this.d*t.y);},e.transformPointArray=function(t,e){for(var n=t.length,i=0;i<n;i+=2){var r=t[i],a=t[i+1];e[i]=this.a*r+this.c*a+this.tx,e[i+1]=this.b*r+this.d*a+this.ty;}
return e;},e.transformPointArrayScale=function(t,e){for(var n=t.length,i=0;i<n;i+=2){var r=t[i],a=t[i+1];e[i]=this.a*r+this.c*a,e[i+1]=this.b*r+this.d*a;}
return e;},e.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b);},e.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d);},e.invert=function(){var t=this.a,e=this.b,n=this.c,i=this.d,r=this.tx,a=t*i-e*n;return this.a=i/a,this.b=-e/a,this.c=-n/a,this.d=t/a,this.tx=(n*this.ty-i*r)/a,this.ty=-(t*this.ty-e*r)/a,this;},e.setTo=function(t,e,n,i,r,a){return this.a=t,this.b=e,this.c=n,this.d=i,this.tx=r,this.ty=a,this;},e.concat=function(t){var e=this.a,n=this.c,i=this.tx;return this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d,this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this;},e.scaleEx=function(t,e){var n=this.a,i=this.b,r=this.c,a=this.d;0!==i||0!==r?(this.a=t*n,this.b=t*i,this.c=e*r,this.d=e*a):(this.a=t*n,this.b=0*a,this.c=0*n,this.d=e*a),this.bTransform=!0;},e.rotateEx=function(t){var e=Math.cos(t),n=Math.sin(t),i=this.a,r=this.b,a=this.c,o=this.d;0!==r||0!==a?(this.a=e*i+n*a,this.b=e*r+n*o,this.c=-n*i+e*a,this.d=-n*r+e*o):(this.a=e*i,this.b=n*o,this.c=-n*i,this.d=e*o),this.bTransform=!0;},e.clone=function(){var e=t.create();return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e.bTransform=this.bTransform,e;},e.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t.bTransform=this.bTransform,t;},e.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty;},e.destroy=function(){if(!this.inPool){var e=t._cache;this.inPool=!0,e._length||(e._length=0),e[e._length++]=this,this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1;}},t.mul=function(t,e,n){var i=t.a,r=t.b,a=t.c,o=t.d,s=t.tx,l=t.ty,u=e.a,h=e.b,c=e.c,_=e.d,f=e.tx,d=e.ty;return 0!==h||0!==c?(n.a=i*u+r*c,n.b=i*h+r*_,n.c=a*u+o*c,n.d=a*h+o*_,n.tx=u*s+c*l+f,n.ty=h*s+_*l+d):(n.a=i*u,n.b=r*_,n.c=a*u,n.d=o*_,n.tx=u*s+f,n.ty=_*l+d),n;},t.mul16=function(t,e,n){var i=t.a,r=t.b,a=t.c,o=t.d,s=t.tx,l=t.ty,u=e.a,h=e.b,c=e.c,_=e.d,f=e.tx,d=e.ty;return 0!==h||0!==c?(n[0]=i*u+r*c,n[1]=i*h+r*_,n[4]=a*u+o*c,n[5]=a*h+o*_,n[12]=u*s+c*l+f,n[13]=h*s+_*l+d):(n[0]=i*u,n[1]=r*_,n[4]=a*u,n[5]=o*_,n[12]=u*s+f,n[13]=_*l+d),n;},t.mulPre=function(t,e,n,i,r,a,o,s){var l=t.a,u=t.b,h=t.c,c=t.d,_=t.tx,f=t.ty;return 0!==n||0!==i?(s.a=l*e+u*i,s.b=l*n+u*r,s.c=h*e+c*i,s.d=h*n+c*r,s.tx=e*_+i*f+a,s.ty=n*_+r*f+o):(s.a=l*e,s.b=u*r,s.c=h*e,s.d=c*r,s.tx=e*_+a,s.ty=r*f+o),s;},t.mulPos=function(t,e,n,i,r,a,o,s){var l=t.a,u=t.b,h=t.c,c=t.d,_=t.tx,f=t.ty;return 0!==u||0!==h?(s.a=e*l+n*h,s.b=e*u+n*c,s.c=i*l+r*h,s.d=i*u+r*c,s.tx=l*a+h*o+_,s.ty=u*a+c*o+f):(s.a=e*l,s.b=n*c,s.c=i*l,s.d=r*c,s.tx=l*a+_,s.ty=c*o+f),s;},t.preMul=function(t,e,n){var i=t.a,r=t.b,a=t.c,o=t.d,s=e.a,l=e.b,u=e.c,h=e.d,c=e.tx,_=e.ty;return n.a=s*i,n.b=n.c=0,n.d=h*o,n.tx=c*i+t.tx,n.ty=_*o+t.ty,0===l&&0===u&&0===r&&0===a||(n.a+=l*a,n.d+=u*r,n.b+=s*r+l*o,n.c+=u*i+h*a,n.tx+=_*a,n.ty+=c*r),n;},t.preMulXY=function(t,e,n,i){var r=t.a,a=t.b,o=t.c,s=t.d;return i.a=r,i.b=a,i.c=o,i.d=s,i.tx=e*r+t.tx+n*o,i.ty=n*s+t.ty+e*a,i;},t.create=function(){var e=t._cache,n=e._length?e[--e._length]:new t();return n.inPool=!1,n;},t.EMPTY=new t(),t.TEMP=new t(),t._cache=[],t;}(),D=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e;}
r(t,"laya.maths.Point");var e=t.prototype;return e.setTo=function(t,e){return this.x=t,this.y=e,this;},e.distance=function(t,e){return Math.sqrt((this.x-t)*(this.x-t)+(this.y-e)*(this.y-e));},e.toString=function(){return this.x+","+this.y;},e.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t>0){var e=1/t;this.x*=e,this.y*=e;}},t.TEMP=new t(),t.EMPTY=new t(),t;}(),C=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=e,this.width=n,this.height=i;}
r(t,"laya.maths.Rectangle");var e=t.prototype;return e.setTo=function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this;},e.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this;},e.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.right&&e>=this.y&&e<this.bottom;},e.intersects=function(t){return!(t.x>this.x+this.width||t.x+t.width<this.x||t.y>this.y+this.height||t.y+t.height<this.y);},e.intersection=function(e,n){return this.intersects(e)?(n||(n=new t()),n.x=Math.max(this.x,e.x),n.y=Math.max(this.y,e.y),n.width=Math.min(this.right,e.right)-n.x,n.height=Math.min(this.bottom,e.bottom)-n.y,n):null;},e.union=function(e,n){return n||(n=new t()),this.clone(n),e.width<=0||e.height<=0?n:(n.addPoint(e.x,e.y),n.addPoint(e.right,e.bottom),this);},e.clone=function(e){return e||(e=new t()),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e;},e.toString=function(){return this.x+","+this.y+","+this.width+","+this.height;},e.equals=function(t){return!(!t||t.x!==this.x||t.y!==this.y||t.width!==this.width||t.height!==this.height);},e.addPoint=function(t,e){return this.x>t&&(this.width+=this.x-t,this.x=t),this.y>e&&(this.height+=this.y-e,this.y=e),this.width<t-this.x&&(this.width=t-this.x),this.height<e-this.y&&(this.height=e-this.y),this;},e._getBoundPoints=function(){var e=t._temB;return e.length=0,0==this.width||0==this.height?e:(e.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),e);},e.isEmpty=function(){return this.width<=0||this.height<=0;},a(0,e,"right",function(){return this.x+this.width;}),a(0,e,"bottom",function(){return this.y+this.height;}),t._getBoundPointS=function(e,n,i,r){var a=t._temA;return a.length=0,0==i||0==r?a:(a.push(e,n,e+i,n,e,n+r,e+i,n+r),a);},t._getWrapRec=function(e,n){if(!e||e.length<1)return n?n.setTo(0,0,0,0):t.TEMP.setTo(0,0,0,0);n=n||new t();var i,r,a,o,s,l=e.length,u=D.TEMP;for(a=s=-(r=o=99999),i=0;i<l;i+=2){u.x=e[i],u.y=e[i+1],r=r<u.x?r:u.x,o=o<u.y?o:u.y,a=a>u.x?a:u.x,s=s>u.y?s:u.y;}
return n.setTo(r,o,a-r,s-o);},t.EMPTY=new t(),t.TEMP=new t(),t._temB=[],t._temA=[],t;}(),E=function(){function t(){}
return r(t,"laya.media.SoundManager"),a(1,t,"useAudioMusic",function(){return t._useAudioMusic;},function(e){t._useAudioMusic=e,t._musicClass=e?et:null;}),a(1,t,"autoStopMusic",function(){return t._autoStopMusic;},function(e){n.stage.off("blur",null,t._stageOnBlur),n.stage.off("focus",null,t._stageOnFocus),n.stage.off("visibilitychange",null,t._visibilityChange),t._autoStopMusic=e,e&&(n.stage.on("blur",null,t._stageOnBlur),n.stage.on("focus",null,t._stageOnFocus),n.stage.on("visibilitychange",null,t._visibilityChange));}),a(1,t,"muted",function(){return t._muted;},function(e){e!=t._muted&&(e&&t.stopAllSound(),t.musicMuted=e,t._muted=e);}),a(1,t,"musicMuted",function(){return t._musicMuted;},function(e){e!=t._musicMuted&&(e?(t._tMusic&&t._musicChannel&&!t._musicChannel.isStopped?t._musicChannel.pause():t._musicChannel=null,t._musicMuted=e):(t._musicMuted=e,t._tMusic&&t._musicChannel&&t._musicChannel.resume()));}),a(1,t,"soundMuted",function(){return t._soundMuted;},function(e){t._soundMuted=e;}),t.addChannel=function(e){t._channels.indexOf(e)>=0||t._channels.push(e);},t.removeChannel=function(e){var n=0;for(n=t._channels.length-1;n>=0;n--){t._channels[n]==e&&t._channels.splice(n,1);}},t.disposeSoundIfNotUsed=function(e){var n=0;for(n=t._channels.length-1;n>=0;n--){if(t._channels[n].url==e)return;}
t.destroySound(e);},t._visibilityChange=function(){n.stage.isVisibility?t._stageOnFocus():t._stageOnBlur();},t._stageOnBlur=function(){t._isActive=!1,t._musicChannel&&(t._musicChannel.isStopped||(t._blurPaused=!0,t._musicChannel.pause())),t.stopAllSound(),n.stage.once("mousedown",null,t._stageOnFocus);},t._recoverWebAudio=function(){rt.ctx&&"running"!=rt.ctx.state&&rt.ctx.resume&&rt.ctx.resume();},t._stageOnFocus=function(){t._isActive=!0,t._recoverWebAudio(),n.stage.off("mousedown",null,t._stageOnFocus),t._blurPaused&&t._musicChannel&&t._musicChannel.isStopped&&(t._blurPaused=!1,t._musicChannel.resume());},t.playSound=function(e,i,r,a,o){if(void 0===i&&(i=1),void 0===o&&(o=0),!t._isActive||!e)return null;if(t._muted)return null;if(t._recoverWebAudio(),(e=A.formatURL(e))==t._tMusic){if(t._musicMuted)return null;}else{if(O.isConchApp){var s=q.getFileExtension(e);if("wav"!=s&&"ogg"!=s)return alert("The sound only supports wav or ogg format,for optimal performance reason,please refer to the official website document."),null;}
if(t._soundMuted)return null;}
var l;N.onMiniGame||(l=n.loader.getRes(e)),a||(a=t._soundClass),l||((l=new a()).load(e),ot.cacheRes(e,l));var u;return(u=l.play(o,i))?(u.url=e,u.volume=e==t._tMusic?t.musicVolume:t.soundVolume,u.completeHandler=r,u):null;},t.destroySound=function(t){var e=n.loader.getRes(t);e&&(ot.clearRes(t),e.dispose());},t.playMusic=function(e,n,i,r){return void 0===n&&(n=0),void 0===r&&(r=0),e=A.formatURL(e),t._tMusic=e,t._musicChannel&&t._musicChannel.stop(),t._musicChannel=t.playSound(e,n,i,t._musicClass,r);},t.stopSound=function(e){e=A.formatURL(e);var n,i=0;for(i=t._channels.length-1;i>=0;i--){(n=t._channels[i]).url==e&&n.stop();}},t.stopAll=function(){t._tMusic=null;var e=0;for(e=t._channels.length-1;e>=0;e--){t._channels[e].stop();}},t.stopAllSound=function(){var e,n=0;for(n=t._channels.length-1;n>=0;n--){(e=t._channels[n]).url!=t._tMusic&&e.stop();}},t.stopMusic=function(){t._musicChannel&&t._musicChannel.stop(),t._tMusic=null;},t.setSoundVolume=function(e,n){if(n)n=A.formatURL(n),t._setVolume(n,e);else{t.soundVolume=e;var i,r=0;for(r=t._channels.length-1;r>=0;r--){(i=t._channels[r]).url!=t._tMusic&&(i.volume=e);}}},t.setMusicVolume=function(e){t.musicVolume=e,t._setVolume(t._tMusic,e);},t._setVolume=function(e,n){e=A.formatURL(e);var i,r=0;for(r=t._channels.length-1;r>=0;r--){(i=t._channels[r]).url==e&&(i.volume=n);}},t.musicVolume=1,t.soundVolume=1,t.playbackRate=1,t._useAudioMusic=!0,t._muted=!1,t._soundMuted=!1,t._musicMuted=!1,t._tMusic=null,t._musicChannel=null,t._channels=[],t._autoStopMusic=!1,t._blurPaused=!1,t._isActive=!0,t._soundClass=null,t._musicClass=null,t.autoReleaseSound=!0,t;}(),P=function(){function e(){}
var n;return r(e,"laya.net.LocalStorage"),e.__init__=function(){e._baseClass||(e._baseClass=n,n.init()),e.items=e._baseClass.items,e.support=e._baseClass.support;},e.setItem=function(t,n){e._baseClass.setItem(t,n);},e.getItem=function(t){return e._baseClass.getItem(t);},e.setJSON=function(t,n){e._baseClass.setJSON(t,n);},e.getJSON=function(t){return e._baseClass.getJSON(t);},e.removeItem=function(t){e._baseClass.removeItem(t);},e.clear=function(){e._baseClass.clear();},e._baseClass=null,e.items=null,e.support=!1,e.__init$=function(){n=function(){function e(){}
return r(e,""),e.init=function(){try{e.items=t.localStorage,e.setItem("laya","1"),e.removeItem("laya"),e.support=!0;}catch(t){}
e.support||console.log("LocalStorage is not supprot or browser is private mode.");},e.setItem=function(t,n){try{e.support&&e.items.setItem(t,n);}catch(t){console.warn("set localStorage failed",t);}},e.getItem=function(t){return e.support?e.items.getItem(t):null;},e.setJSON=function(t,n){try{e.support&&e.items.setItem(t,JSON.stringify(n));}catch(t){console.warn("set localStorage failed",t);}},e.getJSON=function(t){return JSON.parse(e.support?e.items.getItem(t):null);},e.removeItem=function(t){e.support&&e.items.removeItem(t);},e.clear=function(){e.support&&e.items.clear();},e.items=null,e.support=!1,e;}();},e;}(),M=(function(){function t(){}
r(t,"laya.net.ResourceVersion"),t.enable=function(e,i,r){void 0===r&&(r=2),laya.net.ResourceVersion.type=r,n.loader.load(e,u.create(null,t.onManifestLoaded,[i]),null,"json"),A.customFormat=t.addVersionPrefix;},t.onManifestLoaded=function(e,n){t.manifest=n,e.run(),n||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。");},t.addVersionPrefix=function(e){return t.manifest&&t.manifest[e]?2==t.type?t.manifest[e]:t.manifest[e]+"/"+e:e;},t.FOLDER_VERSION=1,t.FILENAME_VERSION=2,t.manifest=null,t.type=1;}(),function(){function t(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null;}
r(t,"laya.net.TTFLoader");var e=t.prototype;return e.load=function(t){this._url=t;var e=t.split(".ttf")[0].split("/");this.fontName=e[e.length-1],N.window.conch?this._loadConch():N.window.FontFace?this._loadWithFontFace():this._loadWithCSS();},e._loadConch=function(){this._http=new at(),this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer");},e._onHttpLoaded=function(t){N.window.conch.setFontFaceFromBuffer(this.fontName,t),this._clearHttp(),this._complete();},e._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null);},e._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null);},e._complete=function(){n.timer.clear(this,this._complete),n.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null);},e._checkComplete=function(){o.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete();},e._loadWithFontFace=function(){var t=new N.window.FontFace(this.fontName,"url('"+this._url+"')");N.window.document.fonts.add(t);var e=this;t.loaded.then(function(){e._complete();}),t.load();},e._createDiv=function(){this._div=N.createElement("div"),this._div.innerHTML="laya";var t=this._div.style;t.fontFamily=this.fontName,t.position="absolute",t.left="-100px",t.top="-100px",N.document.body.appendChild(this._div);},e._loadWithCSS=function(){var t=this,e=N.createElement("style");e.type="text/css",N.document.body.appendChild(e),e.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=o.measureText("LayaTTFFont",this._fontTxt).width;var i=this;e.onload=function(){n.timer.once(1e4,i,t._complete);},n.timer.loop(20,this,this._checkComplete),this._createDiv();},t._testString="LayaTTFFont",t;}()),A=function(){function t(e){this._url=null,this._path=null,this._url=t.formatURL(e),this._path=t.getPath(e);}
r(t,"laya.net.URL");var e=t.prototype;return a(0,e,"path",function(){return this._path;}),a(0,e,"url",function(){return this._url;}),t.formatURL=function(e,n){if(!e)return "null path";if(e.indexOf(":")>0)return e;null!=t.customFormat&&(e=t.customFormat(e,n));var i=e.charAt(0);if("."===i)return t.formatRelativePath((n||t.basePath)+e);if("~"===i)return t.rootPath+e.substring(1);if("d"===i){if(0===e.indexOf("data:image"))return e;}else if("/"===i)return e;return(n||t.basePath)+e;},t.formatRelativePath=function(t){for(var e=t.split("/"),n=0,i=e.length;n<i;n++){".."==e[n]&&(e.splice(n-1,2),n-=2);}
return e.join("/");},t.isAbsolute=function(t){return t.indexOf(":")>0||"/"==t.charAt(0);},t.getPath=function(t){var e=t.lastIndexOf("/");return e>0?t.substr(0,e+1):"";},t.getFileName=function(t){var e=t.lastIndexOf("/");return e>0?t.substr(e+1):t;},t.version={},t.basePath="",t.rootPath="",t.customFormat=function(e){var n=t.version[e];return!O.isConchApp&&n&&(e+="?v="+n),e;},t;}(),O=function(){function e(t,i){function r(){n.stage._loop(),N.window.requestAnimationFrame(r);}
this._timeId=0;var a=e._mainCanvas.source.style;a.position="absolute",a.top=a.left="0px",a.background="#000000",e._mainCanvas.source.id="layaCanvas";var o=laya.renders.Render.isWebGL;e._mainCanvas.source.width=t,e._mainCanvas.source.height=i,o&&e.WebGL.init(e._mainCanvas,t,i),N.container.appendChild(e._mainCanvas.source),(e._context=new R(t,i,o?null:e._mainCanvas)).ctx.setIsMainContext(),N.window.requestAnimationFrame(r),n.stage.on("visibilitychange",this,this._onVisibilitychange);}
r(e,"laya.renders.Render");var i=e.prototype;return i._onVisibilitychange=function(){n.stage.isVisibility?0!=this._timeId&&N.window.clearInterval(this._timeId):this._timeId=N.window.setInterval(this._enterFrame,1e3);},i._enterFrame=function(t){n.stage._loop();},a(1,e,"context",function(){return e._context;}),a(1,e,"canvas",function(){return e._mainCanvas.source;}),e._context=null,e._mainCanvas=null,e.WebGL=null,e.isConchNode=!1,e.isConchApp=!1,e.isConchWebGL=!1,e.isWebGL=!1,e.is3DMode=!1,e.optimizeTextureMemory=function(t,e){return!0;},e.__init$=function(){t.ConchRenderType=t.ConchRenderType||1,t.ConchRenderType|=t.conch?4:0,e.isConchNode=5==(5&t.ConchRenderType),e.isConchApp=4==(4&t.ConchRenderType),e.isConchWebGL=6==t.ConchRenderType;},e;}(),R=function(){function t(e,n,i){this.x=0,this.y=0,this._drawTexture=function(t,e,n){n[0].loaded&&this.ctx.drawTexture(n[0],n[1],n[2],n[3],n[4],t,e);},this._fillTexture=function(t,e,n){n[0].loaded&&this.ctx.fillTexture(n[0],n[1]+t,n[2]+e,n[3],n[4],n[5],n[6],n[7]);},this._drawTextureWithTransform=function(t,e,n){n[0].loaded&&this.ctx.drawTextureWithTransform(n[0],n[1],n[2],n[3],n[4],n[5],t,e,n[6]);},this._fillQuadrangle=function(t,e,n){this.ctx.fillQuadrangle(n[0],n[1],n[2],n[3],n[4]);},this._drawRect=function(t,e,n){var i=this.ctx;null!=n[4]&&(i.fillStyle=n[4],i.fillRect(t+n[0],e+n[1],n[2],n[3],null)),null!=n[5]&&(i.strokeStyle=n[5],i.lineWidth=n[6],i.strokeRect(t+n[0],e+n[1],n[2],n[3],n[6]));},this._drawPie=function(t,e,n){var i=this.ctx;O.isWebGL&&i.setPathId(n[8]),i.beginPath(),O.isWebGL?(i.movePath(n[0]+t,n[1]+e),i.moveTo(0,0)):i.moveTo(t+n[0],e+n[1]),i.arc(t+n[0],e+n[1],n[2],n[3],n[4]),i.closePath(),this._fillAndStroke(n[5],n[6],n[7],!0);},this._clipRect=function(t,e,n){this.ctx.clipRect(t+n[0],e+n[1],n[2],n[3]);},this._fillRect=function(t,e,n){this.ctx.fillRect(t+n[0],e+n[1],n[2],n[3],n[4]);},this._drawCircle=function(e,n,i){var r=this.ctx;O.isWebGL&&r.setPathId(i[6]),K.drawCall++,r.beginPath(),O.isWebGL&&r.movePath(i[0]+e,i[1]+n),r.arc(i[0]+e,i[1]+n,i[2],0,t.PI2),r.closePath(),this._fillAndStroke(i[3],i[4],i[5],!0);},this._fillCircle=function(e,n,i){K.drawCall++;var r=this.ctx;r.beginPath(),r.fillStyle=i[3],r.arc(i[0]+e,i[1]+n,i[2],0,t.PI2),r.fill();},this._setShader=function(t,e,n){this.ctx.setShader(n[0]);},this._drawLine=function(t,e,n){var i=this.ctx;O.isWebGL&&i.setPathId(n[6]),i.beginPath(),i.strokeStyle=n[4],i.lineWidth=n[5],O.isWebGL?(i.movePath(t,e),i.moveTo(n[0],n[1]),i.lineTo(n[2],n[3])):(i.moveTo(t+n[0],e+n[1]),i.lineTo(t+n[2],e+n[3])),i.stroke();},this._drawLines=function(t,e,n){var i=this.ctx;O.isWebGL&&i.setPathId(n[5]),i.beginPath(),t+=n[0],e+=n[1],O.isWebGL&&i.movePath(t,e),i.strokeStyle=n[3],i.lineWidth=n[4];var r=n[2],a=2,o=r.length;if(O.isWebGL)for(i.moveTo(r[0],r[1]);a<o;){i.lineTo(r[a++],r[a++]);}else for(i.moveTo(t+r[0],e+r[1]);a<o;){i.lineTo(t+r[a++],e+r[a++]);}
i.stroke();},this._drawLinesWebGL=function(t,e,n){this.ctx.drawLines(t+this.x+n[0],e+this.y+n[1],n[2],n[3],n[4]);},this._drawCurves=function(t,e,n){this.ctx.drawCurves(t,e,n);},this._draw=function(t,e,n){n[0].call(null,this,t,e);},this._transformByMatrix=function(t,e,n){this.ctx.transformByMatrix(n[0]);},this._setTransform=function(t,e,n){this.ctx.setTransform(n[0],n[1],n[2],n[3],n[4],n[5]);},this._setTransformByMatrix=function(t,e,n){this.ctx.setTransformByMatrix(n[0]);},this._save=function(t,e,n){this.ctx.save();},this._restore=function(t,e,n){this.ctx.restore();},this._translate=function(t,e,n){this.ctx.translate(n[0],n[1]);},this._transform=function(t,e,n){this.ctx.translate(n[1]+t,n[2]+e);var i=n[0];this.ctx.transform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.ctx.translate(-t-n[1],-e-n[2]);},this._rotate=function(t,e,n){this.ctx.translate(n[1]+t,n[2]+e),this.ctx.rotate(n[0]),this.ctx.translate(-t-n[1],-e-n[2]);},this._scale=function(t,e,n){this.ctx.translate(n[2]+t,n[3]+e),this.ctx.scale(n[0],n[1]),this.ctx.translate(-t-n[2],-e-n[3]);},this._alpha=function(t,e,n){this.ctx.globalAlpha*=n[0];},this._setAlpha=function(t,e,n){this.ctx.globalAlpha=n[0];},this._fillText=function(t,e,n){this.ctx.fillText(n[0],n[1]+t,n[2]+e,n[3],n[4],n[5]);},this._strokeText=function(t,e,n){this.ctx.strokeText(n[0],n[1]+t,n[2]+e,n[3],n[4],n[5],n[6]);},this._fillBorderText=function(t,e,n){this.ctx.fillBorderText(n[0],n[1]+t,n[2]+e,n[3],n[4],n[5],n[6],n[7]);},this._blendMode=function(t,e,n){this.ctx.globalCompositeOperation=n[0];},this._beginClip=function(t,e,n){this.ctx.beginClip&&this.ctx.beginClip(t+n[0],e+n[1],n[2],n[3]);},this._setIBVB=function(t,e,n){this.ctx.setIBVB(n[0]+t,n[1]+e,n[2],n[3],n[4],n[5],n[6],n[7]);},this._fillTrangles=function(t,e,n){this.ctx.fillTrangles(n[0],n[1]+t,n[2]+e,n[3],n[4]);},this._drawPath=function(t,e,n){var i=this.ctx;O.isWebGL&&i.setPathId(-1),i.beginPath(),t+=n[0],e+=n[1],O.isWebGL&&i.movePath(t,e);for(var r=n[2],a=0,o=r.length;a<o;a++){var s=r[a];switch(s[0]){case "moveTo":O.isWebGL?i.moveTo(s[1],s[2]):i.moveTo(t+s[1],e+s[2]);break;case "lineTo":O.isWebGL?i.lineTo(s[1],s[2]):i.lineTo(t+s[1],e+s[2]);break;case "arcTo":O.isWebGL?i.arcTo(s[1],s[2],s[3],s[4],s[5]):i.arcTo(t+s[1],e+s[2],t+s[3],e+s[4],s[5]);break;case "closePath":i.closePath();}}
var l=n[3];null!=l&&(i.fillStyle=l.fillStyle,i.fill());var u=n[4];null!=u&&(i.strokeStyle=u.strokeStyle,i.lineWidth=u.lineWidth||1,i.lineJoin=u.lineJoin,i.lineCap=u.lineCap,i.miterLimit=u.miterLimit,i.stroke());},this.drawPoly=function(t,e,n){this.ctx.drawPoly(t+this.x+n[0],e+this.y+n[1],n[2],n[3],n[4],n[5],n[6]);},this._drawPoly=function(t,e,n){var i=this.ctx,r=n[2],a=2,o=r.length;if(O.isWebGL)for(i.setPathId(n[6]),i.beginPath(),t+=n[0],e+=n[1],i.movePath(t,e),i.moveTo(r[0],r[1]);a<o;){i.lineTo(r[a++],r[a++]);}else for(i.beginPath(),t+=n[0],e+=n[1],i.moveTo(t+r[0],e+r[1]);a<o;){i.lineTo(t+r[a++],e+r[a++]);}
i.closePath(),this._fillAndStroke(n[3],n[4],n[5],n[7]);},this._drawSkin=function(t,e,n){var i=n[0];if(i){var r=this.ctx;i.render(r,t,e);}},this._drawParticle=function(t,e,n){this.ctx.drawParticle(t+this.x,e+this.y,n[0]);},this._setFilters=function(t,e,n){this.ctx.setFilters(n);},i?this.ctx=i.getContext("2d"):(i=vt.create("3D"),this.ctx=o.createWebGLContext2D(i),i._setContext(this.ctx)),i.size(e,n),this.canvas=i;}
r(t,"laya.renders.RenderContext");var e=t.prototype;return e.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null);},e.drawTexture=function(t,e,n,i,r){t.loaded&&this.ctx.drawTexture(t,e,n,i,r,this.x,this.y);},e._drawTextures=function(t,e,n){n[0].loaded&&this.ctx.drawTextures(n[0],n[1],t+this.x,e+this.y);},e.drawTextureWithTransform=function(t,e,n,i,r,a,o){t.loaded&&this.ctx.drawTextureWithTransform(t,e,n,i,r,a,this.x,this.y,o);},e.fillQuadrangle=function(t,e,n,i,r){this.ctx.fillQuadrangle(t,e,n,i,r);},e.drawCanvas=function(t,e,n,i,r){this.ctx.drawCanvas(t,e+this.x,n+this.y,i,r);},e.drawRect=function(t,e,n,i,r,a){void 0===a&&(a=1);var o=this.ctx;o.strokeStyle=r,o.lineWidth=a,o.strokeRect(t+this.x,e+this.y,n,i,a);},e._fillAndStroke=function(t,e,n,i){void 0===i&&(i=!1);var r=this.ctx;null!=t&&(r.fillStyle=t,O.isWebGL?r.fill(i):r.fill()),null!=e&&n>0&&(r.strokeStyle=e,r.lineWidth=n,r.stroke());},e.clipRect=function(t,e,n,i){this.ctx.clipRect(t+this.x,e+this.y,n,i);},e.fillRect=function(t,e,n,i,r){this.ctx.fillRect(t+this.x,e+this.y,n,i,r);},e.drawCircle=function(e,n,i,r,a){void 0===a&&(a=1),K.drawCall++;var o=this.ctx;o.beginPath(),o.strokeStyle=r,o.lineWidth=a,o.arc(e+this.x,n+this.y,i,0,t.PI2),o.stroke();},e.drawTriangles=function(t,e,n){if(O.isWebGL)this.ctx.drawTriangles(n[0],t+n[1],e+n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]);else{var i=n[5],r=0,a=i.length,o=this.ctx;for(r=0;r<a;r+=3){var s=2*i[r],l=2*i[r+1],u=2*i[r+2];o.drawTriangle(n[0],n[3],n[4],s,l,u,n[6],!0);}}},e.fillCircle=function(e,n,i,r){K.drawCall++;var a=this.ctx;a.beginPath(),a.fillStyle=r,a.arc(e+this.x,n+this.y,i,0,t.PI2),a.fill();},e.setShader=function(t){this.ctx.setShader(t);},e.drawLine=function(t,e,n,i,r,a){void 0===a&&(a=1);var o=this.ctx;o.beginPath(),o.strokeStyle=r,o.lineWidth=a,o.moveTo(this.x+t,this.y+e),o.lineTo(this.x+n,this.y+i),o.stroke();},e.clear=function(){this.ctx.clear();},e.transformByMatrix=function(t){this.ctx.transformByMatrix(t);},e.setTransform=function(t,e,n,i,r,a){this.ctx.setTransform(t,e,n,i,r,a);},e.setTransformByMatrix=function(t){this.ctx.setTransformByMatrix(t);},e.save=function(){this.ctx.save();},e.restore=function(){this.ctx.restore();},e.translate=function(t,e){this.ctx.translate(t,e);},e.transform=function(t,e,n,i,r,a){this.ctx.transform(t,e,n,i,r,a);},e.rotate=function(t){this.ctx.rotate(t);},e.scale=function(t,e){this.ctx.scale(t,e);},e.alpha=function(t){this.ctx.globalAlpha*=t;},e.setAlpha=function(t){this.ctx.globalAlpha=t;},e.fillWords=function(t,e,n,i,r,a){void 0===a&&(a=0),this.ctx.fillWords(t,e,n,i,r,a);},e.fillBorderWords=function(t,e,n,i,r,a,o){this.ctx.fillBorderWords(t,e,n,i,r,a,o);},e.fillText=function(t,e,n,i,r,a){this.ctx.fillText(t,e+this.x,n+this.y,i,r,a);},e.strokeText=function(t,e,n,i,r,a,o){this.ctx.strokeText(t,e+this.x,n+this.y,i,r,a,o);},e.blendMode=function(t){this.ctx.globalCompositeOperation=t;},e.flush=function(){this.ctx.flush&&this.ctx.flush();},e.addRenderObject=function(t){this.ctx.addRenderObject(t);},e.beginClip=function(t,e,n,i){this.ctx.beginClip&&this.ctx.beginClip(t,e,n,i);},e.endClip=function(){this.ctx.endClip&&this.ctx.endClip();},e.fillTrangles=function(t,e,n){this.ctx.fillTrangles(n[0],n[1],n[2],n[3],n.length>4?n[4]:null);},t.PI2=2*Math.PI,t;}(),L=function(){function t(e,n){switch(this._next=n||t.NORENDER,e){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=I._filter);case 69905:return void(this._fun=t._initRenderFun);}
this.onCreate(e);}
r(t,"laya.renders.RenderSprite");var e=t.prototype;return e.onCreate=function(t){},e._style=function(t,e,n,i){t._style.render(t,e,n,i);var r=this._next;r._fun.call(r,t,e,n,i);},e._no=function(t,e,n,i){},e._custom=function(t,e,n,i){t.customRender(e,n,i);var r=t._style._tf;this._next._fun.call(this._next,t,e,n-r.translateX,i-r.translateY);},e._clip=function(e,n,i,r){var a=this._next;if(a!=t.NORENDER){var o=e._style.scrollRect;n.ctx.save(),n.ctx.clipRect(i,r,o.width,o.height),a._fun.call(a,e,n,i-o.x,r-o.y),n.ctx.restore();}},e._blend=function(t,e,n,i){var r=t._style;r.blendMode&&(e.ctx.globalCompositeOperation=r.blendMode);var a=this._next;a._fun.call(a,t,e,n,i),e.ctx.globalCompositeOperation="source-over";},e._mask=function(t,e,n,i){var r=this._next;r._fun.call(r,t,e,n,i);var a=t.mask;a&&(e.ctx.globalCompositeOperation="destination-in",(a.numChildren>0||!a.graphics._isOnlyOne())&&(a.cacheAsBitmap=!0),a.render(e,n-t.pivotX,i-t.pivotY)),e.ctx.globalCompositeOperation="source-over";},e._graphics=function(t,e,n,i){var r=t._style._tf;t._graphics&&t._graphics._render(t,e,n-r.translateX,i-r.translateY);var a=this._next;a._fun.call(a,t,e,n,i);},e._image=function(t,e,n,i){var r=t._style;e.ctx.drawTexture2(n,i,r._tf.translateX,r._tf.translateY,t.transform,r.alpha,r.blendMode,t._graphics._one);},e._image2=function(t,e,n,i){var r=t._style._tf;e.ctx.drawTexture2(n,i,r.translateX,r.translateY,t.transform,1,null,t._graphics._one);},e._alpha=function(t,e,n,i){var r;if((r=t._style.alpha)>.01||t._needRepaint()){var a=e.ctx.globalAlpha;e.ctx.globalAlpha*=r;var o=this._next;o._fun.call(o,t,e,n,i),e.ctx.globalAlpha=a;}},e._transform=function(e,n,i,r){var a=e.transform,o=this._next;a&&o!=t.NORENDER?(n.save(),n.transform(a.a,a.b,a.c,a.d,a.tx+i,a.ty+r),o._fun.call(o,e,n,0,0),n.restore()):o._fun.call(o,e,n,i,r);},e._childs=function(t,e,n,i){var r=t._style,a=r._tf;if(n=n-a.translateX+r.paddingLeft,i=i-a.translateY+r.paddingTop,r._calculation){var o=t._getWords();if(o){var s=r;s&&(s.stroke?e.fillBorderWords(o,n,i,s.font,s.color,s.strokeColor,s.stroke):e.fillWords(o,n,i,s.font,s.color,"none"!=s.textDecoration&&s.underLine?1:0));}}
var l,u=t._childs,h=u.length;if(t.viewport||t.optimizeScrollRect&&t._style.scrollRect){var c=t.viewport||t._style.scrollRect,_=c.x,f=c.y,d=c.right,p=c.bottom,m=NaN,g=NaN;for(y=0;y<h;++y){(l=u[y]).visible&&(m=l._x)<d&&m+l.width>_&&(g=l._y)<p&&g+l.height>f&&l.render(e,n,i);}}else for(var y=0;y<h;++y){(l=u[y])._style.visible&&l.render(e,n,i);}},e._canvas=function(t,e,n,i){var r=t._$P.cacheCanvas;if(r){"bitmap"===r.type?K.canvasBitmap++:K.canvasNormal++;var a=r.ctx;if(t._needRepaint()||!a)this._canvas_repaint(t,e,n,i);else{var o=r._cacheRec;e.drawCanvas(a.canvas,n+o.x,i+o.y,o.width,o.height);}}else this._next._fun.call(this._next,t,e,n,i);},e._canvas_repaint=function(t,e,i,r){var a=t._$P.cacheCanvas,o=this._next;if(a){var s,l,u,h,c=a.ctx,_=t._needRepaint()||!c,f=a.type;if("bitmap"===f?K.canvasBitmap++:K.canvasNormal++,_){a._cacheRec||(a._cacheRec=new C());var d,p;O.isWebGL&&"bitmap"!==f?a._cacheRec.setTo(-t.pivotX,-t.pivotY,1,1):((h=t.getSelfBounds()).x=h.x-t.pivotX,h.y=h.y-t.pivotY,h.x=h.x-16,h.y=h.y-16,h.width=h.width+32,h.height=h.height+32,h.x=Math.floor(h.x+i)-i,h.y=Math.floor(h.y+r)-r,h.width=Math.floor(h.width),h.height=Math.floor(h.height),a._cacheRec.copyFrom(h)),h=a._cacheRec;var m=O.isWebGL?1:N.pixelRatio*n.stage.clientScaleX,g=O.isWebGL?1:N.pixelRatio*n.stage.clientScaleY;if(!O.isWebGL){var y,v=1,I=1;for(y=t;y&&y!=n.stage;){v*=y.scaleX,I*=y.scaleY,y=y.parent;}
O.isWebGL?(v<1&&(m*=v),I<1&&(g*=I)):(v>1&&(m*=v),I>1&&(g*=I));}
if(t.scrollRect){var x=t.scrollRect;h.x-=x.x,h.y-=x.y;}
if(d=h.width*m,p=h.height*g,l=h.x,u=h.y,O.isWebGL&&"bitmap"===f&&(d>2048||p>2048))return console.warn("cache bitmap size larger than 2048,cache ignored"),a.ctx&&(W.recover("RenderContext",a.ctx),a.ctx.canvas.size(0,0),a.ctx=null),void o._fun.call(o,t,e,i,r);c||(c=a.ctx=W.getItem("RenderContext")||new R(d,p,vt.create("AUTO"))),c.ctx.sprite=t,(s=c.canvas).clear(),(s.width!=d||s.height!=p)&&s.size(d,p),"bitmap"===f?s.context.asBitmap=!0:"normal"===f&&(s.context.asBitmap=!1);var T;if(1!=m||1!=g){var S=c.ctx;S.save(),S.scale(m,g),!O.isConchWebGL&&O.isConchApp&&(T=t._$P.cf)&&S.setFilterMatrix&&S.setFilterMatrix(T._mat,T._alpha),o._fun.call(o,t,c,-l,-u),S.restore(),O.isConchApp&&!O.isConchWebGL||t._applyFilters();}else S=c.ctx,!O.isConchWebGL&&O.isConchApp&&(T=t._$P.cf)&&S.setFilterMatrix&&S.setFilterMatrix(T._mat,T._alpha),o._fun.call(o,t,c,-l,-u),O.isConchApp&&!O.isConchWebGL||t._applyFilters();t._$P.staticCache&&(a.reCache=!1),K.canvasReCache++;}else l=(h=a._cacheRec).x,u=h.y,s=c.canvas;e.drawCanvas(s,i+l,r+u,h.width,h.height);}else o._fun.call(o,t,c,i,r);},t.__init__=function(){var e,n=0,i=0;for(e=o.createRenderSprite(69905,null),i=t.renders.length=4096,n=0;n<i;n++){t.renders[n]=e;}
t.renders[0]=o.createRenderSprite(0,null),function(e,n){for(var i=0,r=0;r<e.length;r++){i|=e[r],t.renders[i]=n;}}([1,512,4,2],new t(1,null)),t.renders[513]=o.createRenderSprite(513,null),t.renders[517]=new t(517,null);},t._initRenderFun=function(e,n,i,r){var a=e._renderType;(t.renders[a]=t._getTypeRender(a))._fun(e,n,i,r);},t._getTypeRender=function(t){for(var e=null,n=2048;n>1;){n&t&&(e=o.createRenderSprite(n,e)),n>>=1;}
return e;},t.IMAGE=1,t.ALPHA=2,t.TRANSFORM=4,t.BLEND=8,t.CANVAS=16,t.FILTERS=32,t.MASK=64,t.CLIP=128,t.STYLE=256,t.GRAPHICS=512,t.CUSTOM=1024,t.CHILDS=2048,t.INIT=69905,t.renders=[],t.NORENDER=new t(0,null),t;}(),F=function(){function t(){this._repaint=!1;}
r(t,"laya.resource.Context");var e=t.prototype;return e.replaceReset=function(){var e=0,n=0;n=t.replaceKeys.length;var i;for(e=0;e<n;e++){i=t.replaceKeys[e],this[t.newKeys[e]]=this[i];}},e.replaceResotre=function(){this.__restore(),this.__reset();},e.setIsMainContext=function(){},e.drawTextures=function(t,e,n,i){K.drawCall+=e.length/2;for(var r=t.width,a=t.height,o=0,s=e.length;o<s;o+=2){this.drawTexture(t,e[o],e[o+1],r,a,n,i);}},e.drawCanvas=function(t,e,n,i,r){K.drawCall++,this.drawImage(t.source,e,n,i,r);},e.fillRect=function(t,e,n,i,r){K.drawCall++,r&&(this.fillStyle=r),this.__fillRect(t,e,n,i);},e.fillText=function(t,e,n,i,r,a){K.drawCall++,arguments.length>3&&null!=i&&(this.font=i,this.fillStyle=r,this.textAlign=a,this.textBaseline="top"),this.__fillText(t,e,n);},e.fillBorderText=function(t,e,n,i,r,a,o,s){K.drawCall++,this.font=i,this.fillStyle=r,this.textBaseline="top",this.strokeStyle=a,this.lineWidth=o,this.textAlign=s,this.__strokeText(t,e,n),this.__fillText(t,e,n);},e.strokeText=function(t,e,n,i,r,a,o){K.drawCall++,arguments.length>3&&null!=i&&(this.font=i,this.strokeStyle=r,this.lineWidth=a,this.textAlign=o,this.textBaseline="top"),this.__strokeText(t,e,n);},e.transformByMatrix=function(t){this.transform(t.a,t.b,t.c,t.d,t.tx,t.ty);},e.setTransformByMatrix=function(t){this.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty);},e.clipRect=function(t,e,n,i){K.drawCall++,this.beginPath(),this.rect(t,e,n,i),this.clip();},e.drawTexture=function(t,e,n,i,r,a,o){K.drawCall++;var s=t.uv,l=t.bitmap.width,u=t.bitmap.height;this.drawImage(t.source,s[0]*l,s[1]*u,(s[2]-s[0])*l,(s[5]-s[3])*u,e+a,n+o,i,r);},e.drawTextureWithTransform=function(t,e,n,i,r,a,o,s,l){K.drawCall++;var u=t.uv,h=t.bitmap.width,c=t.bitmap.height;this.save(),1!=l&&(this.globalAlpha*=l),a?(this.transform(a.a,a.b,a.c,a.d,a.tx+o,a.ty+s),this.drawImage(t.source,u[0]*h,u[1]*c,(u[2]-u[0])*h,(u[5]-u[3])*c,e,n,i,r)):this.drawImage(t.source,u[0]*h,u[1]*c,(u[2]-u[0])*h,(u[5]-u[3])*c,e+o,n+s,i,r),this.restore();},e.drawTexture2=function(t,e,n,i,r,a,o,s){var l=s[0];if(l.loaded&&l.bitmap&&l.source){K.drawCall++;var u=1!==a;if(u){var h=this.globalAlpha;this.globalAlpha*=a;}
var c=l.uv,_=l.bitmap.width,f=l.bitmap.height;r?(this.save(),this.transform(r.a,r.b,r.c,r.d,r.tx+t,r.ty+e),this.drawImage(l.source,c[0]*_,c[1]*f,(c[2]-c[0])*_,(c[5]-c[3])*f,s[1]-n,s[2]-i,s[3],s[4]),this.restore()):this.drawImage(l.source,c[0]*_,c[1]*f,(c[2]-c[0])*_,(c[5]-c[3])*f,s[1]-n+t,s[2]-i+e,s[3],s[4]),u&&(this.globalAlpha=h);}},e.fillTexture=function(t,e,n,i,r,a,o,s){if(!s.pat){if(t.uv!=ut.DEF_UV){var l=new vt("2D");l.getContext("2d"),l.size(t.width,t.height),l.context.drawTexture(t,0,0,t.width,t.height,0,0),t=new ut(l);}
s.pat=this.createPattern(t.bitmap.source,a);}
var u=e,h=n,c=0,_=0;o&&(u+=o.x%t.width,h+=o.y%t.height,c-=o.x%t.width,_-=o.y%t.height),this.translate(u,h),this.fillRect(c,_,i,r,s.pat),this.translate(-u,-h);},e.drawTriangle=function(t,e,n,i,r,a,o,s){var l=t.bitmap,u=l.source,h=t.width,c=t.height,_=l.width,f=l.height,d=n[i]*_,p=n[r]*_,m=n[a]*_,g=n[i+1]*f,y=n[r+1]*f,v=n[a+1]*f,I=e[i],x=e[r],T=e[a],S=e[i+1],b=e[r+1],w=e[a+1];if(s){var D=(I+x+T)/3,C=(S+b+w)/3,E=I-D,P=S-C,M=Math.sqrt(E*E+P*P);I=D+E/M*(M+1),S=C+P/M*(M+1),P=b-C,x=D+(E=x-D)/(M=Math.sqrt(E*E+P*P))*(M+1),b=C+P/M*(M+1),P=w-C,T=D+(E=T-D)/(M=Math.sqrt(E*E+P*P))*(M+1),w=C+P/M*(M+1);}
this.save(),o&&this.transform(o.a,o.b,o.c,o.d,o.tx,o.ty),this.beginPath(),this.moveTo(I,S),this.lineTo(x,b),this.lineTo(T,w),this.closePath(),this.clip();var A=1/(d*y+g*m+p*v-y*m-g*p-d*v),O=I*y+g*T+x*v-y*T-g*x-I*v,R=d*x+I*m+p*T-x*m-I*p-d*T,L=d*y*T+g*x*m+I*p*v-I*y*m-g*p*T-d*x*v,F=S*y+g*w+b*v-y*w-g*b-S*v,V=d*b+S*m+p*w-b*m-S*p-d*w,N=d*y*w+g*b*m+S*p*v-S*y*m-g*p*w-d*b*v;this.transform(O*A,F*A,R*A,V*A,L*A,N*A),this.drawImage(u,t.uv[0]*_,t.uv[1]*f,h,c,t.uv[0]*_,t.uv[1]*f,h,c),this.restore();},e.flush=function(){return 0;},e.fillWords=function(t,e,n,i,r,a){i&&(this.font=i),r&&(this.fillStyle=r);this.textBaseline="top",this.textAlign="left";for(var o=0,s=t.length;o<s;o++){var l=t[o];if(this.__fillText(l.char,l.x+e,l.y+n),1===a){var u=l.height,h=.5*l.style.letterSpacing;h||(h=0),this.beginPath(),this.strokeStyle=r,this.lineWidth=1,this.moveTo(e+l.x-h+.5,n+l.y+u+.5),this.lineTo(e+l.x+l.width+h+.5,n+l.y+u+.5),this.stroke();}}},e.fillBorderWords=function(t,e,n,i,r,a,o){i&&(this.font=i),r&&(this.fillStyle=r),this.textBaseline="top",this.lineWidth=o,this.textAlign="left",this.strokeStyle=a;for(var s=0,l=t.length;s<l;s++){var u=t[s];this.__strokeText(u.char,u.x+e,u.y+n),this.__fillText(u.char,u.x+e,u.y+n);}},e.destroy=function(){this.canvas.width=this.canvas.height=0;},e.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1;},e.drawCurves=function(t,e,n){this.beginPath(),this.strokeStyle=n[3],this.lineWidth=n[4];var i=n[2];t+=n[0],e+=n[1],this.moveTo(t+i[0],e+i[1]);for(var r=2,a=i.length;r<a;){this.quadraticCurveTo(t+i[r++],e+i[r++],t+i[r++],e+i[r++]);}
this.stroke();},t.__init__=function(t){var e=laya.resource.Context.prototype;if(!(t=t||CanvasRenderingContext2D.prototype).inited){t.inited=!0,t.__fillText=t.fillText,t.__fillRect=t.fillRect,t.__strokeText=t.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(n){t[n]=e[n];});}},t.replaceCanvasGetSet=function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);if(!n||!n.configurable)return!1;var i,r={};for(i in n){"set"!=i&&(r[i]=n[i]);}
var a=n.set;return r.set=function(t){a.call(this,t);var e=this.getContext("2d");e&&"__reset"in e&&e.__reset();},Object.defineProperty(t,e,r),!0;},t.replaceGetSet=function(e,n){var i=Object.getOwnPropertyDescriptor(e,n);if(!i||!i.configurable)return!1;var r,a={};for(r in i){"set"!=r&&(a[r]=i[r]);}
var o=i.set,s="___"+n+"__";return t.newKeys.push(s),a.set=function(t){t!=this[s]&&(this[s]=t,o.call(this,t));},Object.defineProperty(e,n,a),!0;},t._default=new t(),t.newKeys=[],i(t,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"];}]),t;}(),V=function(){function t(e){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++t._uniqueIDCounter,this._name=e||"Content Manager",t._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,t._resourceManagers.push(this),this._resources=[];}
r(t,"laya.resource.ResourceManager");var e=t.prototype;return n.imps(e,{"laya.resource.IDispose":!0}),e.getResourceByIndex=function(t){return this._resources[t];},e.getResourcesLength=function(){return this._resources.length;},e.addResource=function(t){t.resourceManager&&t.resourceManager.removeResource(t);return-1===this._resources.indexOf(t)&&(t._resourceManager=this,this._resources.push(t),this.addSize(t.memorySize),!0);},e.removeResource=function(t){var e=this._resources.indexOf(t);return-1!==e&&(this._resources.splice(e,1),t._resourceManager=null,this._memorySize-=t.memorySize,!0);},e.unload=function(){for(var t=this._resources.slice(0,this._resources.length),e=0;e<t.length;e++){t[e].destroy();}
t.length=0;},e.dispose=function(){if(this===t._systemResourceManager)throw new Error("systemResourceManager不能被释放！");t._resourceManagers.splice(t._resourceManagers.indexOf(this),1),t._isResourceManagersSorted=!1;for(var e=this._resources.slice(0,this._resources.length),n=0;n<e.length;n++){var i=e[n];i.resourceManager.removeResource(i),i.destroy();}
e.length=0;},e.addSize=function(t){t&&(this.autoRelease&&t>0&&this._memorySize+t>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=t);},e.garbageCollection=function(t){var e=this._resources;(e=e.slice()).sort(function(t,e){if(!t||!e)throw new Error("a或b不能为空！");return t.released&&e.released?0:t.released?1:e.released?-1:t._lastUseFrameCount-e._lastUseFrameCount;});for(var n=K.loopCount,i=0,r=e.length;i<r;i++){var a=e[i];if(!(n-a._lastUseFrameCount>1))return void(this._memorySize>=t&&(this._isOverflow=!0));if(a.releaseResource(),this._memorySize<t)return void(this._isOverflow=!1);}},a(0,e,"id",function(){return this._id;}),a(0,e,"name",function(){return this._name;},function(e){!e&&""===e||this._name===e||(this._name=e,t._isResourceManagersSorted=!1);}),a(0,e,"memorySize",function(){return this._memorySize;}),a(1,t,"systemResourceManager",function(){return t._systemResourceManager;}),t.__init__=function(){t.currentResourceManager=t.systemResourceManager;},t.getLoadedResourceManagerByIndex=function(e){return t._resourceManagers[e];},t.getLoadedResourceManagersCount=function(){return t._resourceManagers.length;},t.recreateContentManagers=function(e){void 0===e&&(e=!1);for(var n=t.currentResourceManager,i=0;i<t._resourceManagers.length;i++){t.currentResourceManager=t._resourceManagers[i];for(var r=0;r<t.currentResourceManager._resources.length;r++){t.currentResourceManager._resources[r].releaseResource(e),t.currentResourceManager._resources[r].activeResource(e);}}
t.currentResourceManager=n;},t.releaseContentManagers=function(e){void 0===e&&(e=!1);for(var n=t.currentResourceManager,i=0;i<t._resourceManagers.length;i++){t.currentResourceManager=t._resourceManagers[i];for(var r=0;r<t.currentResourceManager._resources.length;r++){var a=t.currentResourceManager._resources[r];!a.released&&a.releaseResource(e);}}
t.currentResourceManager=n;},t._uniqueIDCounter=0,t._isResourceManagersSorted=!1,t._resourceManagers=[],i(t,["_systemResourceManager",function(){return this._systemResourceManager=new t("System Resource Manager");},"currentResourceManager",function(){return this.currentResourceManager=t._systemResourceManager;}]),t;}(),N=(function(){function t(){}
r(t,"laya.system.System"),t.changeDefinition=function(t,e){n[t]=e;var i=t+"=classObj";n._runScript(i);},t.__init__=function(){O.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice());};}(),function(){function i(){}
return r(i,"laya.utils.Browser"),a(1,i,"pixelRatio",function(){return i.__init__(),i.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")>-1?2:o.getPixelRatio();}),a(1,i,"height",function(){return i.__init__(),(n.stage&&n.stage.canvasRotation?i.clientWidth:i.clientHeight)*i.pixelRatio;}),a(1,i,"clientWidth",function(){return i.__init__(),i.window.innerWidth||i.document.body.clientWidth;}),a(1,i,"window",function(){return i.__init__(),i._window;}),a(1,i,"clientHeight",function(){return i.__init__(),i.window.innerHeight||i.document.body.clientHeight||i.document.documentElement.clientHeight;}),a(1,i,"width",function(){return i.__init__(),(n.stage&&n.stage.canvasRotation?i.clientHeight:i.clientWidth)*i.pixelRatio;}),a(1,i,"container",function(){return i.__init__(),i._container||((i._container=i.createElement("div")).id="layaContainer",i.document.body.appendChild(i._container)),i._container;},function(t){i._container=t;}),a(1,i,"document",function(){return i.__init__(),i._document;}),i.__init__=function(){if(!i._window){i._window=o.getWindow(),i._document=i.window.document,i._window.addEventListener("message",function(t){laya.utils.Browser._onMessage(t);},!1),i.document.__createElement=i.document.createElement,t.requestAnimationFrame=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60);};var n=t.document.body.style;n["-webkit-user-select"]="none",n["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",i.userAgent=i.window.navigator.userAgent,i.onIOS=!!(i.u=i.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),i.onMobile=i.u.indexOf("Mobile")>-1,i.onIPhone=i.u.indexOf("iPhone")>-1,i.onMac=i.u.indexOf("Mac OS X")>-1,i.onIPad=i.u.indexOf("iPad")>-1,i.onAndroid=i.u.indexOf("Android")>-1||i.u.indexOf("Adr")>-1,i.onWP=i.u.indexOf("Windows Phone")>-1,i.onQQBrowser=i.u.indexOf("QQBrowser")>-1,i.onMQQBrowser=i.u.indexOf("MQQBrowser")>-1||i.u.indexOf("Mobile")>-1&&i.u.indexOf("QQ")>-1,i.onIE=!!i.window.ActiveXObject||"ActiveXObject"in i.window,i.onWeiXin=i.u.indexOf("MicroMessenger")>-1,i.onPC=!i.onMobile,i.onSafari=i.u.indexOf("Safari")>-1,i.onFirefox=i.u.indexOf("Firefox")>-1,i.onEdge=i.u.indexOf("Edge")>-1,i.onMiniGame=i.u.indexOf("MiniGame")>-1,i.onLimixiu=i.u.indexOf("limixiu")>-1,i.httpProtocol="http:"==i.window.location.protocol,i.onMiniGame&&null==i.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),i.webAudioEnabled=!!(i.window.AudioContext||i.window.webkitAudioContext||i.window.mozAudioContext),i.soundType=i.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",it=i.webAudioEnabled?rt:et,i.webAudioEnabled&&rt.initWebAudio(),et._initMusicAudio(),i.enableTouch="ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch,t.focus(),E._soundClass=it,E._musicClass=et,O._mainCanvas=O._mainCanvas||vt.create("2D"),i.canvas||(i.canvas=vt.create("2D"),i.context=i.canvas.getContext("2d"));}},i._onMessage=function(t){if(t.data&&"size"==t.data.name){if(i.window.innerWidth=t.data.width,i.window.innerHeight=t.data.height,i.window.__innerHeight=t.data.clientHeight,!i.document.createEvent)return void console.warn("no document.createEvent");var e=i.document.createEvent("HTMLEvents");return e.initEvent("resize",!1,!1),void i.window.dispatchEvent(e);}},i.createElement=function(t){return i.__init__(),i.document.__createElement(t);},i.getElementById=function(t){return i.__init__(),i.document.getElementById(t);},i.removeElement=function(t){t&&t.parentNode&&t.parentNode.removeChild(t);},i.now=function(){return o.now();},i._window=null,i._document=null,i._container=null,i.userAgent=null,i.u=null,i.onIOS=!1,i.onMac=!1,i.onMobile=!1,i.onIPhone=!1,i.onIPad=!1,i.onAndroid=!1,i.onWP=!1,i.onQQBrowser=!1,i.onMQQBrowser=!1,i.onSafari=!1,i.onFirefox=!1,i.onEdge=!1,i.onIE=!1,i.onWeiXin=!1,i.onMiniGame=!1,i.onLimixiu=!1,i.onPC=!1,i.httpProtocol=!1,i.webAudioEnabled=!1,i.soundType=null,i.enableTouch=!1,i.canvas=null,i.context=null,i.__init$=function(){},i;}()),U=function(){function t(t){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,t?(this._u8d_=new Uint8Array(t),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_);}
r(t,"laya.utils.Byte");var e=t.prototype;return e.___resizeBuffer=function(t){try{var e=new Uint8Array(t);null!=this._u8d_&&(this._u8d_.length<=t?e.set(this._u8d_):e.set(this._u8d_.subarray(0,t))),this._u8d_=e,this._d_=new DataView(e.buffer);}catch(e){throw "___resizeBuffer err:"+t;}},e.getString=function(){return this.rUTF(this.getUint16());},e.getFloat32Array=function(t,e){var n=t+e;n=n>this._length?this._length:n;var i=new Float32Array(this._d_.buffer.slice(t,n));return this._pos_=n,i;},e.getUint8Array=function(t,e){var n=t+e;n=n>this._length?this._length:n;var i=new Uint8Array(this._d_.buffer.slice(t,n));return this._pos_=n,i;},e.getInt16Array=function(t,e){var n=t+e;n=n>this._length?this._length:n;var i=new Int16Array(this._d_.buffer.slice(t,n));return this._pos_=n,i;},e.getFloat32=function(){if(this._pos_+4>this._length)throw "getFloat32 error - Out of bounds";var t=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,t;},e.getFloat64=function(){if(this._pos_+8>this._length)throw "getFloat64 error - Out of bounds";var t=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,t;},e.writeFloat32=function(t){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,t,this._xd_),this._pos_+=4;},e.writeFloat64=function(t){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,t,this._xd_),this._pos_+=8;},e.getInt32=function(){if(this._pos_+4>this._length)throw "getInt32 error - Out of bounds";var t=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,t;},e.getUint32=function(){if(this._pos_+4>this._length)throw "getUint32 error - Out of bounds";var t=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,t;},e.writeInt32=function(t){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,t,this._xd_),this._pos_+=4;},e.writeUint32=function(t){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,t,this._xd_),this._pos_+=4;},e.getInt16=function(){if(this._pos_+2>this._length)throw "getInt16 error - Out of bounds";var t=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,t;},e.getUint16=function(){if(this._pos_+2>this._length)throw "getUint16 error - Out of bounds";var t=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,t;},e.writeUint16=function(t){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,t,this._xd_),this._pos_+=2;},e.writeInt16=function(t){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,t,this._xd_),this._pos_+=2;},e.getUint8=function(){if(this._pos_+1>this._length)throw "getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++);},e.writeUint8=function(t){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,t),this._pos_++;},e._getUInt8=function(t){return this._d_.getUint8(t);},e._getUint16=function(t){return this._d_.getUint16(t,this._xd_);},e._getMatrix=function(){return new w(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32());},e.rUTF=function(t){for(var e="",n=this._pos_+t,i=0,r=String.fromCharCode,a=this._u8d_;this._pos_<n;){(i=a[this._pos_++])<128?0!=i&&(e+=r(i)):e+=r(i<224?(63&i)<<6|127&a[this._pos_++]:i<240?(31&i)<<12|(127&a[this._pos_++])<<6|127&a[this._pos_++]:(15&i)<<18|(127&a[this._pos_++])<<12|a[this._pos_++]<<6&127|127&a[this._pos_++]),0;}
return e;},e.getCustomString=function(t){for(var e="",n=0,i=0,r=String.fromCharCode,a=this._u8d_;t>0;){if((i=a[this._pos_])<128)e+=r(i),this._pos_++,t--;else for(n=i-128,this._pos_++,t-=n;n>0;){i=a[this._pos_++],e+=r(a[this._pos_++]<<8|i),n--;}}
return e;},e.clear=function(){this._pos_=0,this.length=0;},e.__getBuffer=function(){return this._d_.buffer;},e.writeUTFBytes=function(t){for(var e=0,n=(t+="").length;e<n;e++){var i=t.charCodeAt(e);i<=127?this.writeByte(i):i<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|i>>6,128|63&i],this._pos_),this._pos_+=2):i<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|i>>12,128|i>>6&63,128|63&i],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i],this._pos_),this._pos_+=4);}},e.writeUTFString=function(t){var e=this.pos;this.writeUint16(1),this.writeUTFBytes(t);var n=this.pos-e-2;if(n>=65536)throw "writeUTFString byte len more than 65536";this._d_.setUint16(e,n,this._xd_);},e.readUTFString=function(){return this.readUTFBytes(this.getUint16());},e.getUTFString=function(){return this.readUTFString();},e.readUTFBytes=function(t){if(void 0===t&&(t=-1),0==t)return "";var e=this.bytesAvailable;if(t>e)throw "readUTFBytes error - Out of bounds";return t=t>0?t:e,this.rUTF(t);},e.getUTFBytes=function(t){return void 0===t&&(t=-1),this.readUTFBytes(t);},e.writeByte=function(t){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,t),this._pos_+=1;},e.readByte=function(){if(this._pos_+1>this._length)throw "readByte error - Out of bounds";return this._d_.getInt8(this._pos_++);},e.getByte=function(){return this.readByte();},e.ensureWrite=function(t){this._length<t&&(this._length=t),this._allocated_<t&&(this.length=t);},e.writeArrayBuffer=function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),e<0||n<0)throw "writeArrayBuffer error - Out of bounds";0==n&&(n=t.byteLength-e),this.ensureWrite(this._pos_+n);var i=new Uint8Array(t);this._u8d_.set(i.subarray(e,e+n),this._pos_),this._pos_+=n;},a(0,e,"buffer",function(){var t=this._d_.buffer;return t.byteLength==this.length?t:t.slice(0,this.length);}),a(0,e,"endian",function(){return this._xd_?"littleEndian":"bigEndian";},function(t){this._xd_="littleEndian"==t;}),a(0,e,"length",function(){return this._length;},function(t){this._allocated_<t?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(t,2*this._allocated_))):this._allocated_>t&&this.___resizeBuffer(this._allocated_=t),this._length=t;}),a(0,e,"pos",function(){return this._pos_;},function(t){this._pos_=t;}),a(0,e,"bytesAvailable",function(){return this._length-this._pos_;}),t.getSystemEndian=function(){if(!t._sysEndian){var e=new ArrayBuffer(2);new DataView(e).setInt16(0,256,!0),t._sysEndian=256===new Int16Array(e)[0]?"littleEndian":"bigEndian";}
return t._sysEndian;},t.BIG_ENDIAN="bigEndian",t.LITTLE_ENDIAN="littleEndian",t._sysEndian=null,t;}(),G=function(){function t(){}
return r(t,"laya.utils.CacheManager"),t.regCacheByFunction=function(e,n){t.unRegCacheByFunction(e,n);var i;i={tryDispose:e,getCacheList:n},t._cacheList.push(i);},t.unRegCacheByFunction=function(e,n){var i=0,r=0;for(r=t._cacheList.length,i=0;i<r;i++){if(t._cacheList[i].tryDispose==e&&t._cacheList[i].getCacheList==n)return void t._cacheList.splice(i,1);}},t.forceDispose=function(){var e=0,n=t._cacheList.length;for(e=0;e<n;e++){t._cacheList[e].tryDispose(!0);}},t.beginCheck=function(e){void 0===e&&(e=15e3),n.timer.loop(e,null,t._checkLoop);},t.stopCheck=function(){n.timer.clear(null,t._checkLoop);},t._checkLoop=function(){var e=t._cacheList;if(!(e.length<1)){var n=N.now(),i=0,r=0;for(r=i=e.length;i>0&&(t._index++,t._index=t._index%r,e[t._index].tryDispose(!1),!(N.now()-n>t.loopTimeLimit));){i--;}}},t.loopTimeLimit=2,t._cacheList=[],t._index=0,t;}(),B=function(){function t(){}
return r(t,"laya.utils.ClassUtils"),t.regClass=function(e,n){t._classMap[e]=n;},t.getRegClass=function(e){return t._classMap[e];},t.getInstance=function(e){var n=t.getClass(e);return n?new n():(console.warn("[error] Undefined class:",e),null);},t.createByJson=function(e,n,i,r,a){"string"==typeof e&&(e=JSON.parse(e));var o=e.props;if(!n&&!(n=a?a.runWith(e):t.getInstance(o.runtime||e.type)))return null;var s=e.child;if(s)for(var l=0,u=s.length;l<u;l++){var h=s[l];if("render"!==h.props.name&&"render"!==h.props.renderType||!n._$set_itemRender){if("Graphic"==h.type)t.addGraphicsToSprite(h,n);else if(t.isDrawType(h.type))t.addGraphicToSprite(h,n,!0);else{var c=t.createByJson(h,null,i,r,a);"Script"==h.type?c.hasOwnProperty("owner")?c.owner=n:c.hasOwnProperty("target")&&(c.target=n):"mask"==h.props.renderType?n.mask=c:n.addChild(c);}}else n.itemRender=h;}
if(o)for(var _ in o){var f=o[_];"var"===_&&i?i[f]=n:f instanceof Array&&"function"==typeof n[_]?n[_].apply(n,f):n[_]=f;}
return r&&e.customProps&&r.runWith([n,e]),n.created&&n.created(),n;},t.addGraphicsToSprite=function(e,n){var i;if((i=e.child)&&!(i.length<1)){var r;r=t._getGraphicsFromSprite(e,n);var a=0,o=0;e.props&&(a=t._getObjVar(e.props,"x",0),o=t._getObjVar(e.props,"y",0)),0!=a&&0!=o&&r.translate(a,o);var s=0,l=0;for(l=i.length,s=0;s<l;s++){t._addGraphicToGraphics(i[s],r);}
0!=a&&0!=o&&r.translate(-a,-o);}},t.addGraphicToSprite=function(e,n,i){void 0===i&&(i=!1);var r;r=i?t._getGraphicsFromSprite(e,n):n.graphics,t._addGraphicToGraphics(e,r);},t._getGraphicsFromSprite=function(t,e){var n;if(!t||!t.props)return e.graphics;var i;switch(i=t.props.renderType){case "hit":case "unHit":var r;e.hitArea||(e.hitArea=new j()),(r=e.hitArea)[i]||(r[i]=new d()),n=r[i];}
return n||(n=e.graphics),n;},t._getTransformData=function(e){var n;(e.hasOwnProperty("pivotX")||e.hasOwnProperty("pivotY"))&&(n=n||new w()).translate(-t._getObjVar(e,"pivotX",0),-t._getObjVar(e,"pivotY",0));var i=t._getObjVar(e,"scaleX",1),r=t._getObjVar(e,"scaleY",1),a=t._getObjVar(e,"rotation",0);t._getObjVar(e,"skewX",0),t._getObjVar(e,"skewY",0);return 1==i&&1==r&&0==a||((n=n||new w()).scale(i,r),n.rotate(.0174532922222222*a)),n;},t._addGraphicToGraphics=function(e,n){var i;if(i=e.props){var r;if(r=t.DrawTypeDic[e.type]){var a;a=n;var o,s=t._getParams(i,r[1],r[2],r[3]);((o=t._tM)||1!=t._alpha)&&(a.save(),o&&a.transform(o),1!=t._alpha&&a.alpha(t._alpha)),a[r[0]].apply(a,s),(o||1!=t._alpha)&&a.restore();}}},t._adptLineData=function(t){return t[2]=parseFloat(t[0])+parseFloat(t[2]),t[3]=parseFloat(t[1])+parseFloat(t[3]),t;},t._adptTextureData=function(t){return t[0]=ot.getRes(t[0]),t;},t._adptLinesData=function(e){return e[2]=t._getPointListByStr(e[2]),e;},t.isDrawType=function(e){return "Image"!=e&&t.DrawTypeDic.hasOwnProperty(e);},t._getParams=function(e,n,i,r){void 0===i&&(i=0);var a;(a=t._temParam).length=n.length;var o=0,s=0;for(s=n.length,o=0;o<s;o++){a[o]=t._getObjVar(e,n[o][0],n[o][1]);}
t._alpha=t._getObjVar(e,"alpha",1);var l;return(l=t._getTransformData(e))?(i||(i=0),l.translate(a[i],a[i+1]),a[i]=a[i+1]=0,t._tM=l):t._tM=null,r&&t[r]&&(a=t[r](a)),a;},t._getPointListByStr=function(t){var e,n=0,i=0;for(i=(e=t.split(",")).length,n=0;n<i;n++){e[n]=parseFloat(e[n]);}
return e;},t._getObjVar=function(t,e,n){return t.hasOwnProperty(e)?t[e]:n;},t._temParam=[],t._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},t.getClass=function(e){var i=t._classMap[e]||e;return "string"==typeof i?n.__classmap[i]:i;},t._tM=null,t._alpha=NaN,i(t,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]};}]),t;}(),k=function(){function t(e){if(this._color=[],"string"==typeof e){this.strColor=e,null===e&&(e="#000000"),"#"==e.charAt(0)&&(e=e.substr(1));var n=e.length;if(3==n||4==n){for(var i="",r=0;r<n;r++){i+=e[r]+e[r];}
e=i;}
var a=this.numColor=parseInt(e,16);if(8==e.length)return void(this._color=[parseInt(e.substr(0,2),16)/255,((16711680&a)>>16)/255,((65280&a)>>8)/255,(255&a)/255]);}else a=this.numColor=e,this.strColor=q.toHexColor(a);this._color=[((16711680&a)>>16)/255,((65280&a)>>8)/255,(255&a)/255,1],this._color.__id=++t._COLODID;}
return r(t,"laya.utils.Color"),t._initDefault=function(){t._DEFAULT={};for(var e in t._COLOR_MAP){t._SAVE[e]=t._DEFAULT[e]=new t(t._COLOR_MAP[e]);}
return t._DEFAULT;},t._initSaveMap=function(){t._SAVE_SIZE=0,t._SAVE={};for(var e in t._DEFAULT){t._SAVE[e]=t._DEFAULT[e];}},t.create=function(e){var n=t._SAVE[e+""];return null!=n?n:(t._SAVE_SIZE<1e3||t._initSaveMap(),t._SAVE[e+""]=new t(e));},t._SAVE={},t._SAVE_SIZE=0,t._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},t._DEFAULT=t._initDefault(),t._COLODID=1,t;}(),H=(function(){function t(){this._values=[],this._keys=[];}
r(t,"laya.utils.Dictionary");var e=t.prototype;e.set=function(t,e){var n=this.indexOf(t);n>=0?this._values[n]=e:(this._keys.push(t),this._values.push(e));},e.indexOf=function(t){var e=this._keys.indexOf(t);return e>=0?e:(t="string"==typeof t?Number(t):"number"==typeof t?t.toString():t,this._keys.indexOf(t));},e.get=function(t){var e=this.indexOf(t);return e<0?null:this._values[e];},e.remove=function(t){var e=this.indexOf(t);return e>=0&&(this._keys.splice(e,1),this._values.splice(e,1),!0);},e.clear=function(){this._values.length=0,this._keys.length=0;},a(0,e,"values",function(){return this._values;}),a(0,e,"keys",function(){return this._keys;});}(),function(){function t(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0;}
r(t,"laya.utils.Dragging");var e=t.prototype;return e.start=function(t,e,i,r,a,o,s,l){void 0===l&&(l=.92),this.clearTimer(),this.target=t,this.area=e,this.hasInertia=i,this.elasticDistance=e?r:0,this.elasticBackTime=a,this.data=o,this._disableMouseEvent=s,this.ratio=l,1!=t.globalScaleX||1!=t.globalScaleY?this._parent=t.parent:this._parent=n.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,n.stage.on("mouseup",this,this.onStageMouseUp),n.stage.on("mouseout",this,this.onStageMouseUp),n.timer.frameLoop(1,this,this.loop);},e.clearTimer=function(){n.timer.clear(this,this.loop),n.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null);},e.stop=function(){this._dragging&&(y.instance.disableMouseEvent=!1,n.stage.off("mouseup",this,this.onStageMouseUp),n.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear());},e.loop=function(){var t=this._parent.getMousePoint(),e=t.x,i=t.y,r=e-this._lastX,a=i-this._lastY;if(this._clickOnly){if(!(Math.abs(r*n.stage._canvasTransform.getScaleX())>1||Math.abs(a*n.stage._canvasTransform.getScaleY())>1))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),y.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1);}else this._offsets.push(r,a);0===r&&0===a||(this._lastX=e,this._lastY=i,this.target.x+=r*this._elasticRateX,this.target.y+=a*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data));},e.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var t=this.area.x-this.target.x;else t=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-t/this.elasticDistance),this.target.y<this.area.y)var e=this.area.y-this.target.y;else e=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-e/this.elasticDistance);}},e.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height);},e.onStageMouseUp=function(t){if(y.instance.disableMouseEvent=!1,n.stage.off("mouseup",this,this.onStageMouseUp),n.stage.off("mouseout",this,this.onStageMouseUp),n.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var e=this._offsets.length,i=Math.min(e,6),r=this._offsets.length-i,a=e-1;a>r;a--){this._offsetY+=this._offsets[a--],this._offsetX+=this._offsets[a];}
this._offsetX=this._offsetX/i*2,this._offsetY=this._offsetY/i*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=this._offsetX>0?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=this._offsetY>0?this.maxOffset:-this.maxOffset),n.timer.frameLoop(1,this,this.tweenMove);}else this.elasticDistance>0?this.checkElastic():this.clear();},e.checkElastic=function(){var t=NaN,e=NaN;if(this.target.x<this.area.x?t=this.area.x:this.target.x>this.area.x+this.area.width&&(t=this.area.x+this.area.width),this.target.y<this.area.y?e=this.area.y:this.target.y>this.area.y+this.area.height&&(e=this.area.y+this.area.height),isNaN(t)&&isNaN(e))this.clear();else{var n={};isNaN(t)||(n.x=t),isNaN(e)||(n.y=e),this._tween=Y.to(this.target,n,this.elasticBackTime,z.sineOut,u.create(this,this.clear),0,!1,!1);}},e.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(n.timer.clear(this,this.tweenMove),this.elasticDistance>0?this.checkElastic():this.clear());},e.clear=function(){if(this.target){this.clearTimer();var t=this.target;this.target=null,this._parent=null,t.event("dragend",this.data);}},t;}()),z=function(){function t(){}
return r(t,"laya.utils.Ease"),t.linearNone=function(t,e,n,i){return n*t/i+e;},t.linearIn=function(t,e,n,i){return n*t/i+e;},t.linearInOut=function(t,e,n,i){return n*t/i+e;},t.linearOut=function(t,e,n,i){return n*t/i+e;},t.bounceIn=function(e,n,i,r){return i-t.bounceOut(r-e,0,i,r)+n;},t.bounceInOut=function(e,n,i,r){return e<.5*r?.5*t.bounceIn(2*e,0,i,r)+n:.5*t.bounceOut(2*e-r,0,i,r)+.5*i+n;},t.bounceOut=function(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e;},t.backIn=function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e;},t.backInOut=function(t,e,n,i,r){return void 0===r&&(r=1.70158),(t/=.5*i)<1?.5*n*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e;},t.backOut=function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e;},t.elasticIn=function(e,n,i,r,a,o){void 0===a&&(a=0),void 0===o&&(o=0);var s;return 0==e?n:1==(e/=r)?n+i:(o||(o=.3*r),!a||i>0&&a<i||i<0&&a<-i?(a=i,s=o/4):s=o/t.PI2*Math.asin(i/a),-a*Math.pow(2,10*(e-=1))*Math.sin((e*r-s)*t.PI2/o)+n);},t.elasticInOut=function(e,n,i,r,a,o){void 0===a&&(a=0),void 0===o&&(o=0);var s;return 0==e?n:2==(e/=.5*r)?n+i:(o||(o=r*(.3*1.5)),!a||i>0&&a<i||i<0&&a<-i?(a=i,s=o/4):s=o/t.PI2*Math.asin(i/a),e<1?a*Math.pow(2,10*(e-=1))*Math.sin((e*r-s)*t.PI2/o)*-.5+n:a*Math.pow(2,-10*(e-=1))*Math.sin((e*r-s)*t.PI2/o)*.5+i+n);},t.elasticOut=function(e,n,i,r,a,o){void 0===a&&(a=0),void 0===o&&(o=0);var s;return 0==e?n:1==(e/=r)?n+i:(o||(o=.3*r),!a||i>0&&a<i||i<0&&a<-i?(a=i,s=o/4):s=o/t.PI2*Math.asin(i/a),a*Math.pow(2,-10*e)*Math.sin((e*r-s)*t.PI2/o)+i+n);},t.strongIn=function(t,e,n,i){return n*(t/=i)*t*t*t*t+e;},t.strongInOut=function(t,e,n,i){return(t/=.5*i)<1?.5*n*t*t*t*t*t+e:.5*n*((t-=2)*t*t*t*t+2)+e;},t.strongOut=function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e;},t.sineInOut=function(t,e,n,i){return .5*-n*(Math.cos(Math.PI*t/i)-1)+e;},t.sineIn=function(e,n,i,r){return-i*Math.cos(e/r*t.HALF_PI)+i+n;},t.sineOut=function(e,n,i,r){return i*Math.sin(e/r*t.HALF_PI)+n;},t.quintIn=function(t,e,n,i){return n*(t/=i)*t*t*t*t+e;},t.quintInOut=function(t,e,n,i){return(t/=.5*i)<1?.5*n*t*t*t*t*t+e:.5*n*((t-=2)*t*t*t*t+2)+e;},t.quintOut=function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e;},t.quartIn=function(t,e,n,i){return n*(t/=i)*t*t*t+e;},t.quartInOut=function(t,e,n,i){return(t/=.5*i)<1?.5*n*t*t*t*t+e:.5*-n*((t-=2)*t*t*t-2)+e;},t.quartOut=function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e;},t.cubicIn=function(t,e,n,i){return n*(t/=i)*t*t+e;},t.cubicInOut=function(t,e,n,i){return(t/=.5*i)<1?.5*n*t*t*t+e:.5*n*((t-=2)*t*t+2)+e;},t.cubicOut=function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e;},t.quadIn=function(t,e,n,i){return n*(t/=i)*t+e;},t.quadInOut=function(t,e,n,i){return(t/=.5*i)<1?.5*n*t*t+e:.5*-n*(--t*(t-2)-1)+e;},t.quadOut=function(t,e,n,i){return-n*(t/=i)*(t-2)+e;},t.expoIn=function(t,e,n,i){return 0==t?e:n*Math.pow(2,10*(t/i-1))+e-.001*n;},t.expoInOut=function(t,e,n,i){return 0==t?e:t==i?e+n:(t/=.5*i)<1?.5*n*Math.pow(2,10*(t-1))+e:.5*n*(2-Math.pow(2,-10*--t))+e;},t.expoOut=function(t,e,n,i){return t==i?e+n:n*(1-Math.pow(2,-10*t/i))+e;},t.circIn=function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e;},t.circInOut=function(t,e,n,i){return(t/=.5*i)<1?.5*-n*(Math.sqrt(1-t*t)-1)+e:.5*n*(Math.sqrt(1-(t-=2)*t)+1)+e;},t.circOut=function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e;},t.HALF_PI=.5*Math.PI,t.PI2=2*Math.PI,t;}(),j=function(){function t(){this._hit=null,this._unHit=null;}
r(t,"laya.utils.HitArea");var e=t.prototype;return e.isHit=function(e,n){return!!t.isHitGraphic(e,n,this.hit)&&!t.isHitGraphic(e,n,this.unHit);},e.contains=function(t,e){return this.isHit(t,e);},a(0,e,"hit",function(){return this._hit||(this._hit=new d()),this._hit;},function(t){this._hit=t;}),a(0,e,"unHit",function(){return this._unHit||(this._unHit=new d()),this._unHit;},function(t){this._unHit=t;}),t.isHitGraphic=function(e,n,i){if(!i)return!1;var r;if(!(r=i.cmds)&&i._one&&((r=t._cmds).length=1,r[0]=i._one),!r)return!1;var a=0,o=0;o=r.length;var s;for(a=0;a<o;a++){if(s=r[a]){var l=O._context;switch(s.callee){case l._translate:case 6:e-=s[0],n-=s[1];}
if(t.isHitCmd(e,n,s))return!0;}}
return!1;},t.isHitCmd=function(e,n,i){if(!i)return!1;var r=O._context,a=!1;switch(i.callee){case r._drawRect:case 13:t._rec.setTo(i[0],i[1],i[2],i[3]),a=t._rec.contains(e,n);break;case r._drawCircle:case r._fillCircle:case 14:a=(e-=i[0])*e+(n-=i[1])*n<i[2]*i[2];break;case r._drawPoly:case 18:e-=i[0],n-=i[1],a=t.ptInPolygon(e,n,i[2]);}
return a;},t.ptInPolygon=function(e,n,i){var r;(r=t._ptPoint).setTo(e,n);var a=0,o=NaN,s=NaN,l=NaN,u=NaN,h=0;h=i.length;for(var c=0;c<h;c+=2){if(o=i[c],s=i[c+1],l=i[(c+2)%h],u=i[(c+3)%h],s!=u&&!(r.y<Math.min(s,u)||r.y>=Math.max(s,u))){(r.y-s)*(l-o)/(u-s)+o>r.x&&a++;}}
return a%2==1;},t._cmds=[],i(t,["_rec",function(){return this._rec=new C();},"_ptPoint",function(){return this._ptPoint=new D();}]),t;}(),W=(function(){function t(e,n,i,r){this.char=e,this.charNum=e.charCodeAt(0),this._x=this._y=0,this.width=n,this.height=i,this.style=r,this.isWord=!t._isWordRegExp.test(e);}
r(t,"laya.utils.HTMLChar");var e=t.prototype;n.imps(e,{"laya.display.ILayout":!0}),e.setSprite=function(t){this._sprite=t;},e.getSprite=function(){return this._sprite;},e._isChar=function(){return!0;},e._getCSSStyle=function(){return this.style;},a(0,e,"width",function(){return this._w;},function(t){this._w=t;}),a(0,e,"x",function(){return this._x;},function(t){this._sprite&&(this._sprite.x=t),this._x=t;}),a(0,e,"y",function(){return this._y;},function(t){this._sprite&&(this._sprite.y=t),this._y=t;}),a(0,e,"height",function(){return this._h;},function(t){this._h=t;}),t._isWordRegExp=new RegExp("[\\w.]","");}(),function(){function t(){}
r(t,"laya.utils.Log"),t.enable=function(){t._logdiv||(t._logdiv=N.window.document.createElement("div"),N.window.document.body.appendChild(t._logdiv),t._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;");},t.toggle=function(){var e=t._logdiv.style;"1px"==e.width?e.width=e.height="50%":e.width=e.height="1px";},t.print=function(e){t._logdiv&&(t._count>=t.maxCount&&t.clear(),t._count++,t._logdiv.innerText+=e+"\n",t._logdiv.scrollTop=t._logdiv.scrollHeight);},t.clear=function(){t._logdiv.innerText="",t._count=0;},t._logdiv=null,t._count=0,t.maxCount=20;}(),function(){function t(){}
r(t,"laya.utils.Mouse"),a(1,t,"cursor",function(){return t._style.cursor;},function(e){t._style.cursor=e;}),t.hide=function(){"none"!=t.cursor&&(t._preCursor=t.cursor,t.cursor="none");},t.show=function(){"none"==t.cursor&&(t.cursor=t._preCursor?t._preCursor:"auto");},t._preCursor=null,i(t,["_style",function(){return this._style=N.document.body.style;}]);}(),function(){function t(){}
return r(t,"laya.utils.Pool"),t.getPoolBySign=function(e){return t._poolDic[e]||(t._poolDic[e]=[]);},t.clearBySign=function(e){t._poolDic[e]&&(t._poolDic[e].length=0);},t.recover=function(e,n){n.__InPool||(n.__InPool=!0,t.getPoolBySign(e).push(n));},t.getItemByClass=function(e,n){var i=t.getPoolBySign(e),r=i.length?i.pop():new n();return r.__InPool=!1,r;},t.getItemByCreateFun=function(e,n){var i=t.getPoolBySign(e),r=i.length?i.pop():n();return r.__InPool=!1,r;},t.getItem=function(e){var n=t.getPoolBySign(e),i=n.length?n.pop():null;return i&&(i.__InPool=!1),i;},t._poolDic={},t.InPoolSign="__InPool",t;}()),K=(function(){function t(){this.sign=null,this.maxCount=1e3;}
r(t,"laya.utils.PoolCache");var e=t.prototype;e.getCacheList=function(){return W.getPoolBySign(this.sign);},e.tryDispose=function(t){var e;(e=W.getPoolBySign(this.sign)).length>this.maxCount&&e.splice(this.maxCount,e.length-this.maxCount);},t.addPoolCacheManager=function(e,n){void 0===n&&(n=100);var i;(i=new t()).sign=e,i.maxCount=n,G.regCacheByFunction(q.bind(i.tryDispose,i),q.bind(i.getCacheList,i));};}(),function(){function t(){}
return r(t,"laya.utils.Stat"),a(1,t,"onclick",null,function(e){t._sp&&t._sp.on("click",t._sp,e),t._canvas&&(t._canvas.source.onclick=e,t._canvas.source.style.pointerEvents="");}),t.show=function(e,n){void 0===e&&(e=0),void 0===n&&(n=0),!O.isConchApp||O.isConchWebGL?(O.isConchWebGL||N.onMiniGame||N.onLimixiu||(t._useCanvas=!0),t._show=!0,t._fpsData.length=60,t._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},t._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},t._view[2]={title:"DrawCall",value:"drawCall",color:"white",units:"int"},t._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},O.isWebGL?(t._view[4]={title:"Shader",value:"shaderCall",color:"white",units:"int"},O.is3DMode?(t._view[0].title="FPS(3D)",t._view[5]={title:"TriFaces",value:"trianglesFaces",color:"white",units:"int"},t._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},t._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"}):(t._view[0].title="FPS(WebGL)",t._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"})):t._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"},t._useCanvas?t.createUIPre(e,n):t.createUI(e,n),t.enable()):N.window.conch.showFPS&&N.window.conch.showFPS(e,n);},t.createUIPre=function(e,n){var i=N.pixelRatio;t._width=130*i,t._vx=75*i,t._height=i*(12*t._view.length+3*i)+4,t._fontSize=12*i;for(var r=0;r<t._view.length;r++){t._view[r].x=4,t._view[r].y=r*t._fontSize+2*i;}
t._canvas||((t._canvas=new vt("2D")).size(t._width,t._height),(t._ctx=t._canvas.getContext("2d")).textBaseline="top",t._ctx.font=t._fontSize+"px Sans-serif",t._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+e+"px;top:"+n+"px;width:"+t._width/i+"px;height:"+t._height/i+"px;"),t._first=!0,t.loop(),t._first=!1,N.container.appendChild(t._canvas.source);},t.createUI=function(e,n){var i=t._sp,r=N.pixelRatio;i||(i=new ct(),(t._leftText=new mt()).pos(5,5),t._leftText.color="#ffffff",i.addChild(t._leftText),(t._txt=new mt()).pos(80*r,5),t._txt.color="#ffffff",i.addChild(t._txt),t._sp=i),i.pos(e,n);for(var a="",o=0;o<t._view.length;o++){a+=t._view[o].title+"\n";}
t._leftText.text=a;var s=138*r,l=r*(12*t._view.length+3*r)+4;t._txt.fontSize=t._fontSize*r,t._leftText.fontSize=t._fontSize*r,i.size(s,l),i.graphics.clear(),i.graphics.setAlpha(.5),i.graphics.drawRect(0,0,s,l,"#999999"),i.graphics.setAlpha(1),t.loop();},t.enable=function(){n.timer.frameLoop(1,t,t.loop);},t.hide=function(){t._show=!1,n.timer.clear(t,t.loop),t._canvas&&N.removeElement(t._canvas.source);},t.clear=function(){t.trianglesFaces=t.drawCall=t.shaderCall=t.spriteCount=t.spriteRenderUseCacheCount=t.treeNodeCollision=t.treeSpriteCollision=t.canvasNormal=t.canvasBitmap=t.canvasReCache=0;},t.loop=function(){t._count++;var e=N.now();if(!(e-t._timer<1e3)){var n=t._count;if(t.FPS=Math.round(1e3*n/(e-t._timer)),t._show){t.trianglesFaces=Math.round(t.trianglesFaces/n),t._useCanvas?(t.drawCall=Math.round(t.drawCall/n)-2,t.shaderCall=Math.round(t.shaderCall/n),t.spriteCount=Math.round(t.spriteCount/n)-1):(t.drawCall=Math.round(t.drawCall/n)-2,t.shaderCall=Math.round(t.shaderCall/n)-4,t.spriteCount=Math.round(t.spriteCount/n)-4),t.spriteRenderUseCacheCount=Math.round(t.spriteRenderUseCacheCount/n),t.canvasNormal=Math.round(t.canvasNormal/n),t.canvasBitmap=Math.round(t.canvasBitmap/n),t.canvasReCache=Math.ceil(t.canvasReCache/n),t.treeNodeCollision=Math.round(t.treeNodeCollision/n),t.treeSpriteCollision=Math.round(t.treeSpriteCollision/n);var i=t.FPS>0?Math.floor(1e3/t.FPS).toString():" ";t._fpsStr=t.FPS+(t.renderSlow?" slow":"")+" "+i,t._spriteStr=t.spriteCount+(t.spriteRenderUseCacheCount?"/"+t.spriteRenderUseCacheCount:""),t._canvasStr=t.canvasReCache+"/"+t.canvasNormal+"/"+t.canvasBitmap,t.currentMemorySize=V.systemResourceManager.memorySize,t._useCanvas?t.renderInfoPre():t.renderInfo(),t.clear();}
t._count=0,t._timer=e;}},t.renderInfoPre=function(){if(t._canvas){var e=t._ctx;e.clearRect(t._first?0:t._vx,0,t._width,t._height);for(var n=0;n<t._view.length;n++){var i=t._view[n];t._first&&(e.fillStyle="white",e.fillText(i.title,i.x,i.y,null,null,null)),e.fillStyle=i.color;var r=t[i.value];"M"==i.units&&(r=Math.floor(r/1048576*100)/100+" M"),e.fillText(r+"",i.x+t._vx,i.y,null,null,null);}}},t.renderInfo=function(){for(var e="",n=0;n<t._view.length;n++){var i=t._view[n],r=t[i.value];"M"==i.units&&(r=Math.floor(r/1048576*100)/100+" M"),"K"==i.units&&(r=Math.floor(r/1024*100)/100+" K"),e+=r+"\n";}
t._txt.text=e;},t.FPS=0,t.loopCount=0,t.shaderCall=0,t.drawCall=0,t.trianglesFaces=0,t.spriteCount=0,t.spriteRenderUseCacheCount=0,t.treeNodeCollision=0,t.treeSpriteCollision=0,t.canvasNormal=0,t.canvasBitmap=0,t.canvasReCache=0,t.renderSlow=!1,t.currentMemorySize=0,t._fpsStr=null,t._canvasStr=null,t._spriteStr=null,t._fpsData=[],t._timer=0,t._count=0,t._view=[],t._fontSize=12,t._txt=null,t._leftText=null,t._sp=null,t._show=!1,t._useCanvas=!1,t._canvas=null,t._ctx=null,t._first=!1,t._vx=NaN,t._width=0,t._height=100,t;}()),X=(function(){function t(){this._strsToID={},this._idToStrs=[],this._length=0;}
r(t,"laya.utils.StringKey");var e=t.prototype;e.add=function(t){var e=this._strsToID[t];return null!=e?e:(this._idToStrs[this._length]=t,this._strsToID[t]=this._length++);},e.getID=function(t){var e=this._strsToID[t];return null==e?-1:e;},e.getName=function(t){var e=this._idToStrs[t];return null==e?void 0:e;};}(),function(){function t(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map=[],this._laters=[],this._handlers=[],this._temp=[],this._count=0,this.currTimer=this._now(),this._lastTimer=this._now(),this._init();}
var e;r(t,"laya.utils.Timer");var i=t.prototype;return i._init=function(){n.timer&&n.timer.frameLoop(1,this,this._update);},i._now=function(){return Date.now();},i._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var t=this.currFrame=this.currFrame+this.scale,e=this._now();this._delta=(e-this._lastTimer)*this.scale;var n=this.currTimer=this.currTimer+this._delta;this._lastTimer=e;var i=this._handlers;for(this._count=0,o=0,s=i.length;o<s;o++){if(null!==(l=i[o]).method){var r=l.userFrame?t:n;if(r>=l.exeTime)if(l.repeat){if(l.jumpFrame)for(;r>=l.exeTime;){l.exeTime+=l.delay,l.run(!1);}else l.exeTime+=l.delay,l.run(!1),r>l.exeTime&&(l.exeTime+=Math.ceil((r-l.exeTime)/l.delay)*l.delay);}else l.run(!0);}else this._count++;}
(this._count>30||t%200==0)&&this._clearHandlers();for(var a=this._laters,o=0,s=a.length-1;o<=s;o++){var l=a[o];null!==l.method&&(this._map[l.key]=null,l.run(!1)),this._recoverHandler(l),o===s&&(s=a.length-1);}
a.length=0;}},i._clearHandlers=function(){for(var t=this._handlers,e=0,n=t.length;e<n;e++){var i=t[e];null!==i.method?this._temp.push(i):this._recoverHandler(i);}
this._handlers=this._temp,this._temp=t,this._temp.length=0;},i._recoverHandler=function(e){this._map[e.key]==e&&(this._map[e.key]=null),e.clear(),t._pool.push(e);},i._create=function(n,i,r,a,o,s,l){if(!r)return o.apply(a,s),null;if(l){var u=this._getHandler(a,o);if(u)return u.repeat=i,u.userFrame=n,u.delay=r,u.caller=a,u.method=o,u.args=s,u.exeTime=r+(n?this.currFrame:this.currTimer+this._now()-this._lastTimer),u;}
return u=t._pool.length>0?t._pool.pop():new e(),u.repeat=i,u.userFrame=n,u.delay=r,u.caller=a,u.method=o,u.args=s,u.exeTime=r+(n?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(u),this._handlers.push(u),u;},i._indexHandler=function(t){var e=t.caller,n=t.method,i=e?e.$_GID||(e.$_GID=q.getGID()):0,r=n.$_TID||(n.$_TID=1e5*this._mid++);t.key=i+r,this._map[t.key]=t;},i.once=function(t,e,n,i,r){void 0===r&&(r=!0),this._create(!1,!1,t,e,n,i,r);},i.loop=function(t,e,n,i,r,a){void 0===r&&(r=!0),void 0===a&&(a=!1);var o=this._create(!1,!0,t,e,n,i,r);o&&(o.jumpFrame=a);},i.frameOnce=function(t,e,n,i,r){void 0===r&&(r=!0),this._create(!0,!1,t,e,n,i,r);},i.frameLoop=function(t,e,n,i,r){void 0===r&&(r=!0),this._create(!0,!0,t,e,n,i,r);},i.toString=function(){return "callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+t._pool.length;},i.clear=function(t,e){var n=this._getHandler(t,e);n&&(this._map[n.key]=null,n.key=0,n.clear());},i.clearAll=function(t){if(t)for(var e=0,n=this._handlers.length;e<n;e++){var i=this._handlers[e];i.caller===t&&(this._map[i.key]=null,i.key=0,i.clear());}},i._getHandler=function(t,e){var n=t?t.$_GID||(t.$_GID=q.getGID()):0,i=e.$_TID||(e.$_TID=1e5*this._mid++);return this._map[n+i];},i.callLater=function(n,i,r){if(null==this._getHandler(n,i)){if(t._pool.length)var a=t._pool.pop();else a=new e();a.caller=n,a.method=i,a.args=r,this._indexHandler(a),this._laters.push(a);}},i.runCallLater=function(t,e){var n=this._getHandler(t,e);n&&null!=n.method&&(this._map[n.key]=null,n.run(!0));},i.runTimer=function(t,e){this.runCallLater(t,e);},a(0,i,"delta",function(){return this._delta;}),t._pool=[],t.__init$=function(){e=function(){function t(){this.key=0,this.repeat=!1,this.delay=0,this.userFrame=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1;}
r(t,"");var e=t.prototype;return e.clear=function(){this.caller=null,this.method=null,this.args=null;},e.run=function(t){var e=this.caller;if(e&&e.destroyed)return this.clear();var n=this.method,i=this.args;t&&this.clear(),null!=n&&(i?n.apply(e,i):n.call(e));},t;}();},t;}()),Y=function(){function t(){this.gid=0;}
r(t,"laya.utils.Tween");var e=t.prototype;return e.to=function(t,e,n,i,r,a,o){return void 0===a&&(a=0),void 0===o&&(o=!1),this._create(t,e,n,i,r,a,o,!0,!1,!0);},e.from=function(t,e,n,i,r,a,o){return void 0===a&&(a=0),void 0===o&&(o=!1),this._create(t,e,n,i,r,a,o,!1,!1,!0);},e._create=function(e,i,r,a,o,s,l,u,h,c){if(!e)throw new Error("Tween:target is null");this._target=e,this._duration=r,this._ease=a||i.ease||t.easeNone,this._complete=o||i.complete,this._delay=s,this._props=[],this._usedTimer=0,this._startTimer=N.now(),this._usedPool=h,this._delayParam=null,this.update=i.update;var _=e.$_GID||(e.$_GID=q.getGID());return t.tweenMap[_]?(l&&t.clearTween(e),t.tweenMap[_].push(this)):t.tweenMap[_]=[this],c?s<=0?this.firstStart(e,i,u):(this._delayParam=[e,i,u],n.scaleTimer.once(s,this,this.firstStart,this._delayParam)):this._initProps(e,i,u),this;},e.firstStart=function(t,e,n){this._delayParam=null,t.destroyed?this.clear():(this._initProps(t,e,n),this._beginLoop());},e._initProps=function(t,e,n){for(var i in e){if("number"==typeof t[i]){var r=n?t[i]:e[i],a=n?e[i]:t[i];this._props.push([i,r,a-r]),n||(t[i]=r);}}},e._beginLoop=function(){n.scaleTimer.frameLoop(1,this,this._doEase);},e._doEase=function(){this._updateEase(N.now());},e._updateEase=function(e){var n=this._target;if(n){if(n.destroyed)return t.clearTween(n);var i=this._usedTimer=e-this._startTimer-this._delay;if(!(i<0)){if(i>=this._duration)return this.complete();for(var r=i>0?this._ease(i,0,1,this._duration):0,a=this._props,o=0,s=a.length;o<s;o++){var l=a[o];n[l[0]]=l[1]+r*l[2];}
this.update&&this.update.run();}}},e.complete=function(){if(this._target){n.scaleTimer.runTimer(this,this.firstStart);for(var t=this._target,e=this._props,i=this._complete,r=0,a=e.length;r<a;r++){var o=e[r];t[o[0]]=o[1]+o[2];}
this.update&&this.update.run(),this.clear(),i&&i.run();}},e.pause=function(){n.scaleTimer.clear(this,this._beginLoop),n.scaleTimer.clear(this,this._doEase),n.scaleTimer.clear(this,this.firstStart);var t=NaN;(t=N.now()-this._startTimer-this._delay)<0&&(this._usedTimer=t);},e.setStartTime=function(t){this._startTimer=t;},e.clear=function(){this._target&&(this._remove(),this._clear());},e._clear=function(){this.pause(),n.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,W.recover("tween",this));},e.recover=function(){this._usedPool=!0,this._clear();},e._remove=function(){var e=t.tweenMap[this._target.$_GID];if(e)for(var n=0,i=e.length;n<i;n++){if(e[n]===this){e.splice(n,1);break;}}},e.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=N.now(),this._delayParam)n.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var t=this._props,e=0,i=t.length;e<i;e++){var r=t[e];this._target[r[0]]=r[1];}
n.scaleTimer.once(this._delay,this,this._beginLoop);}},e.resume=function(){this._usedTimer>=this._duration||(this._startTimer=N.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?n.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop());},a(0,e,"progress",null,function(t){var e=t*this._duration;this._startTimer=N.now()-this._delay-e;}),t.to=function(e,n,i,r,a,o,s,l){return void 0===o&&(o=0),void 0===s&&(s=!1),void 0===l&&(l=!0),W.getItemByClass("tween",t)._create(e,n,i,r,a,o,s,!0,l,!0);},t.from=function(e,n,i,r,a,o,s,l){return void 0===o&&(o=0),void 0===s&&(s=!1),void 0===l&&(l=!0),W.getItemByClass("tween",t)._create(e,n,i,r,a,o,s,!1,l,!0);},t.clearAll=function(e){if(e&&e.$_GID){var n=t.tweenMap[e.$_GID];if(n){for(var i=0,r=n.length;i<r;i++){n[i]._clear();}
n.length=0;}}},t.clear=function(t){t.clear();},t.clearTween=function(e){t.clearAll(e);},t.easeNone=function(t,e,n,i){return n*t/i+e;},t.tweenMap={},t;}(),q=function(){function t(){}
return r(t,"laya.utils.Utils"),t.toRadian=function(e){return e*t._pi2;},t.toAngle=function(e){return e*t._pi;},t.toHexColor=function(t){if(t<0||isNaN(t))return null;for(var e=t.toString(16);e.length<6;){e="0"+e;}
return "#"+e;},t.getGID=function(){return t._gid++;},t.concatArray=function(t,e){if(!e)return t;if(!t)return e;var n=0,i=e.length;for(n=0;n<i;n++){t.push(e[n]);}
return t;},t.clearArray=function(t){return t?(t.length=0,t):t;},t.copyArray=function(t,e){if(t||(t=[]),!e)return t;t.length=e.length;var n=0,i=e.length;for(n=0;n<i;n++){t[n]=e[n];}
return t;},t.getGlobalRecByPoints=function(t,e,n,i,r){var a;a=new D(e,n),a=t.localToGlobal(a);var o;return o=new D(i,r),o=t.localToGlobal(o),C._getWrapRec([a.x,a.y,o.x,o.y]);},t.getGlobalPosAndScale=function(e){return t.getGlobalRecByPoints(e,0,0,1,1);},t.bind=function(t,e){return t.bind(e);},t.measureText=function(t,e){return o.measureText(t,e);},t.updateOrder=function(t){if(!t||t.length<2)return!1;for(var e,n=1,i=0,r=t.length,a=NaN;n<r;){for(e=t[i=n],a=t[i]._zOrder;--i>-1&&t[i]._zOrder>a;){t[i+1]=t[i];}
t[i+1]=e,n++;}
var o=e.parent.conchModel;if(o)if(null!=o.updateZOrder)o.updateZOrder();else{for(n=0;n<r;n++){o.removeChild(t[n].conchModel);}
for(n=0;n<r;n++){o.addChildAt(t[n].conchModel,n);}}
return!0;},t.transPointList=function(t,e,n){var i=0,r=t.length;for(i=0;i<r;i+=2){t[i]+=e,t[i+1]+=n;}},t.parseInt=function(t,e){void 0===e&&(e=0);var n=N.window.parseInt(t,e);return isNaN(n)?0:n;},t.getFileExtension=function(e){t._extReg.lastIndex=e.lastIndexOf(".");var n=t._extReg.exec(e);return n&&n.length>1?n[1].toLowerCase():null;},t.getTransformRelativeToWindow=function(t,e,i){var r=n.stage,a=laya.utils.Utils.getGlobalPosAndScale(t),o=r._canvasTransform.clone(),s=o.tx,l=o.ty;o.rotate(-Math.PI/180*n.stage.canvasDegree),o.scale(n.stage.clientScaleX,n.stage.clientScaleY);var u=n.stage.canvasDegree%180!=0,h=NaN,c=NaN;u?(h=i+a.y,c=e+a.x,h*=o.d,c*=o.a,90==n.stage.canvasDegree?(h=s-h,c+=l):(h+=s,c=l-c)):(h=e+a.x,c=i+a.y,h*=o.a,c*=o.d,h+=s,c+=l);var _=NaN,f=NaN;return u?(_=o.d*a.height,f=o.a*a.width):(_=o.a*a.width,f=o.d*a.height),{x:h,y:c,scaleX:_,scaleY:f};},t.fitDOMElementInArea=function(e,i,r,a,o,s){e._fitLayaAirInitialized||(e._fitLayaAirInitialized=!0,e.style.transformOrigin=e.style.webKittransformOrigin="left top",e.style.position="absolute");var l=t.getTransformRelativeToWindow(i,r,a);e.style.transform=e.style.webkitTransform="scale("+l.scaleX+","+l.scaleY+") rotate("+n.stage.canvasDegree+"deg)",e.style.width=o+"px",e.style.height=s+"px",e.style.left=l.x+"px",e.style.top=l.y+"px";},t.isOkTextureList=function(t){if(!t)return!1;var e,n=0,i=t.length;for(n=0;n<i;n++){if(!(e=t[n])||!e.source)return!1;}
return!0;},t.isOKCmdList=function(t){if(!t)return!1;var e,n,i=0,r=t.length,a=O._context;for(i=0;i<r;i++){switch((e=t[i]).callee){case a._drawTexture:case a._fillTexture:case a._drawTextureWithTransform:if(!(n=e[0])||!n.source)return!1;}}
return!0;},t._gid=1,t._pi=180/Math.PI,t._pi2=Math.PI/180,t._extReg=/\.(\w+)\??/g,t.parseXMLFromString=function(t){var e;if(t=t.replace(/>\s+</g,"><"),(e=new DOMParser().parseFromString(t,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors")>-1)throw new Error(e.firstChild.firstChild.textContent);return e;},t;}(),Z=function(){function t(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],O.isWebGL&&G.regCacheByFunction(q.bind(this.startDispose,this),q.bind(this.getCacheList,this));}
r(t,"laya.utils.VectorGraphManager");var e=t.prototype;return e.getId=function(){return this._id++;},e.addShape=function(t,e){this.shapeDic[t]=e,this.useDic[t]||(this.useDic[t]=!0);},e.addLine=function(t,e){this.shapeLineDic[t]=e,this.shapeLineDic[t]||(this.shapeLineDic[t]=!0);},e.getShape=function(t){this._checkKey&&null!=this.useDic[t]&&(this.useDic[t]=!0);},e.deleteShape=function(t){this.shapeDic[t]&&(this.shapeDic[t]=null,delete this.shapeDic[t]),this.shapeLineDic[t]&&(this.shapeLineDic[t]=null,delete this.shapeLineDic[t]),null!=this.useDic[t]&&delete this.useDic[t];},e.getCacheList=function(){var t,e=[];for(t in this.shapeDic){e.push(this.shapeDic[t]);}
for(t in this.shapeLineDic){e.push(this.shapeLineDic[t]);}
return e;},e.startDispose=function(t){var e;for(e in this.useDic){this.useDic[e]=!1;}
this._checkKey=!0;},e.endDispose=function(){if(this._checkKey){var t;for(t in this.useDic){this.useDic[t]||this.deleteShape(t);}
this._checkKey=!1;}},t.getInstance=function(){return t.instance=t.instance||new t();},t.instance=null,t;}(),J=function(){function t(){this._obj=null,this._obj=t.supportWeakMap?new N.window.WeakMap():{},t.supportWeakMap||t._maps.push(this);}
r(t,"laya.utils.WeakObject");var e=t.prototype;return e.set=function(e,n){if(null!=e)if(t.supportWeakMap){var i=e;"string"!=typeof e&&"number"!=typeof e||(i=t._keys[e])||(i=t._keys[e]={k:e}),this._obj.set(i,n);}else "string"==typeof e||"number"==typeof e?this._obj[e]=n:(e.$_GID||(e.$_GID=q.getGID()),this._obj[e.$_GID]=n);},e.get=function(e){if(null==e)return null;if(t.supportWeakMap){var n="string"==typeof e||"number"==typeof e?t._keys[e]:e;return n?this._obj.get(n):null;}
return "string"==typeof e||"number"==typeof e?this._obj[e]:this._obj[e.$_GID];},e.del=function(e){if(null!=e)if(t.supportWeakMap){var n="string"==typeof e||"number"==typeof e?t._keys[e]:e;if(!n)return;this._obj.delete(n);}else "string"==typeof e||"number"==typeof e?delete this._obj[e]:delete this._obj[this._obj.$_GID];},e.has=function(e){if(null==e)return!1;if(t.supportWeakMap){var n="string"==typeof e||"number"==typeof e?t._keys[e]:e;return this._obj.has(n);}
return "string"==typeof e||"number"==typeof e?null!=this._obj[e]:null!=this._obj[this._obj.$_GID];},t.__init__=function(){(t.supportWeakMap=null!=N.window.WeakMap)||n.timer.loop(t.delInterval,null,t.clearCache);},t.clearCache=function(){for(var e=0,n=t._maps.length;e<n;e++){t._maps[e]._obj={};}},t.supportWeakMap=!1,t.delInterval=3e5,t._keys={},t._maps=[],i(t,["I",function(){return this.I=new t();}]),t;}(),$=function(){function t(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null;}
r(t,"laya.utils.WordText");var e=t.prototype;return e.setText=function(t){this.changed=!0,this._text=t;},e.toString=function(){return this._text;},e.charCodeAt=function(t){return this._text?this._text.charCodeAt(t):NaN;},e.charAt=function(t){return this._text?this._text.charAt(t):null;},a(0,e,"length",function(){return this._text?this._text.length:0;}),t;}(),Q=function(t){function e(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,e.__super.call(this),this._childs=e.ARRAY_EMPTY,this._$P=e.PROP_EMPTY,this.timer=n.scaleTimer,this.conchModel=O.isConchNode?this.createConchModel():null;}
r(e,"laya.display.Node",l);var i=e.prototype;return i._setBit=function(t,e){if(1==t){this._getBit(t)!=e&&this._updateDisplayedInstage();}
e?this._bits|=t:this._bits&=~t;},i._getBit=function(t){return 0!=(this._bits&t);},i._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1);},i._setUpNoticeType=function(t){var e=this;for(e._setBit(t,!0),e=e.parent;e;){if(e._getBit(t))return;e._setBit(t,!0),e=e.parent;}},i.on=function(t,e,n,i){return "display"!==t&&"undisplay"!==t||this._getBit(1)||this._setUpNoticeType(1),this._createListener(t,e,n,i,!1);},i.once=function(t,e,n,i){return "display"!==t&&"undisplay"!==t||this._getBit(1)||this._setUpNoticeType(1),this._createListener(t,e,n,i,!0);},i.createConchModel=function(){return null;},i.destroy=function(t){void 0===t&&(t=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(t?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this);},i.destroyChildren=function(){if(this._childs)for(var t=this._childs.length-1;t>-1;t--){this._childs[t].destroy(!0);}},i.addChild=function(t){if(!t||this.destroyed||t===this)return t;if(t.zOrder&&this._set$P("hasZorder",!0),t._parent===this){var n=this.getChildIndex(t);n!==this._childs.length-1&&(this._childs.splice(n,1),this._childs.push(t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,this._childs.length-1)),this._childChanged());}else t.parent&&t.parent.removeChild(t),this._childs===e.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(t),this.conchModel&&this.conchModel.addChildAt(t.conchModel,this._childs.length-1),t.parent=this,this._childChanged();return t;},i.addChildren=function(t){for(var e=arguments,n=0,i=e.length;n<i;){this.addChild(e[n++]);}},i.addChildAt=function(t,n){if(!t||this.destroyed||t===this)return t;if(t.zOrder&&this._set$P("hasZorder",!0),n>=0&&n<=this._childs.length){if(t._parent===this){var i=this.getChildIndex(t);this._childs.splice(i,1),this._childs.splice(n,0,t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,n)),this._childChanged();}else t.parent&&t.parent.removeChild(t),this._childs===e.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(n,0,t),this.conchModel&&this.conchModel.addChildAt(t.conchModel,n),t.parent=this;return t;}
throw new Error("appendChildAt:The index is out of bounds");},i.getChildIndex=function(t){return this._childs.indexOf(t);},i.getChildByName=function(t){var e=this._childs;if(e)for(var n=0,i=e.length;n<i;n++){var r=e[n];if(r.name===t)return r;}
return null;},i._get$P=function(t){return this._$P[t];},i._set$P=function(t,n){return this.destroyed||(this._$P===e.PROP_EMPTY&&(this._$P={}),this._$P[t]=n),n;},i.getChildAt=function(t){return this._childs[t];},i.setChildIndex=function(t,e){var n=this._childs;if(e<0||e>=n.length)throw new Error("setChildIndex:The index is out of bounds.");var i=this.getChildIndex(t);if(i<0)throw new Error("setChildIndex:node is must child of this object.");return n.splice(i,1),n.splice(e,0,t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,e)),this._childChanged(),t;},i._childChanged=function(t){},i.removeChild=function(t){if(!this._childs)return t;var e=this._childs.indexOf(t);return this.removeChildAt(e);},i.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this;},i.removeChildByName=function(t){var e=this.getChildByName(t);return e&&this.removeChild(e),e;},i.removeChildAt=function(t){var e=this.getChildAt(t);return e&&(this._childs.splice(t,1),this.conchModel&&this.conchModel.removeChild(e.conchModel),e.parent=null),e;},i.removeChildren=function(t,n){if(void 0===t&&(t=0),void 0===n&&(n=2147483647),this._childs&&this._childs.length>0){var i=this._childs;if(0===t&&n>=o){var r=i;this._childs=e.ARRAY_EMPTY;}else r=i.splice(t,n-t);for(var a=0,o=r.length;a<o;a++){r[a].parent=null,this.conchModel&&this.conchModel.removeChild(r[a].conchModel);}}
return this;},i.replaceChild=function(t,e){var n=this._childs.indexOf(e);return n>-1?(this._childs.splice(n,1,t),this.conchModel&&(this.conchModel.removeChild(e.conchModel),this.conchModel.addChildAt(t.conchModel,n)),e.parent=null,t.parent=this,t):null;},i._updateDisplayedInstage=function(){var t;t=this;var e=n.stage;for(this._displayedInStage=!1;t;){if(t._getBit(1)){this._displayedInStage=t._displayedInStage;break;}
if(t==e||t._displayedInStage){this._displayedInStage=!0;break;}
t=t.parent;}},i._setDisplay=function(t){this._displayedInStage!==t&&(this._displayedInStage=t,t?this.event("display"):this.event("undisplay"));},i._displayChild=function(t,e){var n=t._childs;if(n)for(var i=0,r=n.length;i<r;i++){var a=n[i];a._getBit(1)&&(a._childs.length>0?this._displayChild(a,e):a._setDisplay(e));}
t._setDisplay(e);},i.contains=function(t){if(t===this)return!0;for(;t;){if(t.parent===this)return!0;t=t.parent;}
return!1;},i.timerLoop=function(t,e,n,i,r,a){void 0===r&&(r=!0),void 0===a&&(a=!1),this.timer.loop(t,e,n,i,r,a);},i.timerOnce=function(t,e,n,i,r){void 0===r&&(r=!0),this.timer._create(!1,!1,t,e,n,i,r);},i.frameLoop=function(t,e,n,i,r){void 0===r&&(r=!0),this.timer._create(!0,!0,t,e,n,i,r);},i.frameOnce=function(t,e,n,i,r){void 0===r&&(r=!0),this.timer._create(!0,!1,t,e,n,i,r);},i.clearTimer=function(t,e){this.timer.clear(t,e);},a(0,i,"numChildren",function(){return this._childs.length;}),a(0,i,"destroyed",function(){return this._destroyed;}),a(0,i,"parent",function(){return this._parent;},function(t){this._parent!==t&&(t?(this._parent=t,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),t.displayedInStage&&this._displayChild(this,!0)),t._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=t));}),a(0,i,"displayedInStage",function(){return this._getBit(1)?this._displayedInStage:(this._setUpNoticeType(1),this._displayedInStage);}),e.ARRAY_EMPTY=[],e.PROP_EMPTY={},e.NOTICE_DISPLAY=1,e.MOUSEENABLE=2,e;}(),tt=function(t){function e(t){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,e.__super.call(this),this._padding=e._PADDING,this._spacing=e._SPACING,this._aligns=e._ALIGNS,this._font=_.EMPTY,this._ower=t;}
r(e,"laya.display.css.CSSStyle",t);var n=e.prototype;return n.destroy=function(){this._ower=null,this._font=null,this._rect=null;},n.inherit=function(t){this._font=t._font,this._spacing=t._spacing===e._SPACING?e._SPACING:t._spacing.slice(),this.lineHeight=t.lineHeight;},n._widthAuto=function(){return 0!=(262144&this._type);},n.widthed=function(t){return 0!=(8&this._type);},n._calculation=function(t,e){function n(t,e,n){return t*n[0]+e*n[1]+n[2];}
function i(t){var e=a.width,i=r.width;o.width&&(r.width=n(e,i,o.width)),o.height&&(r.height=n(e,i,o.height)),o.left&&(r.x=n(e,i,o.left)),o.top&&(r.y=n(e,i,o.top));}
if(e.indexOf("%")<0)return!1;var r=this._ower,a=r.parent,o=this._rect;null===o&&(a._getCSSStyle()._type|=524288,a.on("resize",this,i),this._rect=o={input:{}});var s=e.split(" ");return s[0]=parseFloat(s[0])/100,1==s.length?s[1]=s[2]=0:(s[1]=parseFloat(s[1])/100,s[2]=parseFloat(s[2])),o[t]=s,o.input[t]=e,i(),!0;},n.heighted=function(t){return 0!=(8192&this._type);},n.size=function(t,e){var n=this._ower,i=!1;-1!==t&&t!=this._ower.width&&(this._type|=8,this._ower.width=t,i=!0),-1!==e&&e!=this._ower.height&&(this._type|=8192,this._ower.height=e,i=!0),i&&(n._layoutLater(),524288&this._type&&n.event("resize",this));},n._getAlign=function(){return this._aligns[0];},n._getValign=function(){return this._aligns[1];},n._getCssFloat=function(){return 0!=(32768&this._type)?32768:0;},n._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new _(this._font));},n.render=function(t,e,n,i){var r=t.width,a=t.height;n-=t.pivotX,i-=t.pivotY,this._bgground&&null!=this._bgground.color&&e.ctx.fillRect(n,i,r,a,this._bgground.color),this._border&&this._border.color&&e.drawRect(n,i,r,a,this._border.color.strColor,this._border.size);},n.getCSSStyle=function(){return this;},n.cssText=function(t){this.attrs(e.parseOneCSS(t,";"));},n.attrs=function(t){if(t)for(var e=0,n=t.length;e<n;e++){var i=t[e];this[i[0]]=i[1];}},n.setTransform=function(t){"none"===t?this._tf=c._TF_EMPTY:this.attrs(e.parseOneCSS(t,","));},n.translate=function(t,e){this._tf===c._TF_EMPTY&&(this._tf=new f()),this._tf.translateX=t,this._tf.translateY=e;},n.scale=function(t,e){this._tf===c._TF_EMPTY&&(this._tf=new f()),this._tf.scaleX=t,this._tf.scaleY=e;},n._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type);},a(0,n,"block",t.prototype._$get_block,function(t){t?this._type|=1:this._type&=-2;}),a(0,n,"valign",function(){return e._valigndef[this._aligns[1]];},function(t){this._aligns===e._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=e._valigndef[t];}),a(0,n,"height",null,function(t){if(this._type|=8192,"string"==typeof t){if(this._calculation("height",t))return;t=parseInt(t);}
this.size(-1,t);}),a(0,n,"width",null,function(t){if(this._type|=8,"string"==typeof t){var e=t.indexOf("auto");if(e>=0&&(this._type|=262144,t=t.substr(0,e)),this._calculation("width",t))return;t=parseInt(t);}
this.size(t,-1);}),a(0,n,"fontWeight",function(){return this._font.weight;},function(t){this._createFont().weight=t;}),a(0,n,"left",null,function(t){var e=this._ower;if("string"==typeof t){if("center"===t?t="50% -50% 0":"right"===t&&(t="100% -100% 0"),this._calculation("left",t))return;t=parseInt(t);}
e.x=t;}),a(0,n,"_translate",null,function(t){this.translate(t[0],t[1]);}),a(0,n,"absolute",function(){return 0!=(4&this._type);}),a(0,n,"top",null,function(t){var e=this._ower;if("string"==typeof t){if("middle"===t?t="50% -50% 0":"bottom"===t&&(t="100% -100% 0"),this._calculation("top",t))return;t=parseInt(t);}
e.y=t;}),a(0,n,"align",function(){return e._aligndef[this._aligns[0]];},function(t){this._aligns===e._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=e._aligndef[t];}),a(0,n,"bold",function(){return this._font.bold;},function(t){this._createFont().bold=t;}),a(0,n,"padding",function(){return this._padding;},function(t){this._padding=t;}),a(0,n,"leading",function(){return this._spacing[1];},function(t){"string"==typeof t&&(t=parseInt(t+"")),this._spacing===e._SPACING&&(this._spacing=[0,0]),this._spacing[1]=t;}),a(0,n,"lineElement",function(){return 0!=(65536&this._type);},function(t){t?this._type|=65536:this._type&=-65537;}),a(0,n,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left";},function(t){this.lineElement=!1,"right"===t?this._type|=32768:this._type&=-32769;}),a(0,n,"textDecoration",function(){return this._font.decoration;},function(t){this._createFont().decoration=t;}),a(0,n,"whiteSpace",function(){return 131072&this._type?"nowrap":"";},function(t){"nowrap"===t&&(this._type|=131072),"none"===t&&(this._type&=-131073);}),a(0,n,"background",null,function(t){t?(this._bgground||(this._bgground={}),this._bgground.color=t,this._ower.conchModel&&this._ower.conchModel.bgColor(t),this._type|=16384,this._ower._renderType|=256):this._bgground=null;}),a(0,n,"wordWrap",function(){return 0==(131072&this._type);},function(t){t?this._type&=-131073:this._type|=131072;}),a(0,n,"color",function(){return this._font.color;},function(t){this._createFont().color=t;}),a(0,n,"password",function(){return this._font.password;},function(t){this._createFont().password=t;}),a(0,n,"backgroundColor",function(){return this._bgground?this._bgground.color:null;},function(t){"none"===t?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=t),this._ower.conchModel&&this._ower.conchModel.bgColor(t),this._ower._renderType|=256;}),a(0,n,"font",function(){return this._font.toString();},function(t){this._createFont().set(t);}),a(0,n,"weight",null,function(t){this._createFont().weight=t;}),a(0,n,"letterSpacing",function(){return this._spacing[0];},function(t){"string"==typeof t&&(t=parseInt(t+"")),this._spacing===e._SPACING&&(this._spacing=[0,0]),this._spacing[0]=t;}),a(0,n,"fontSize",function(){return this._font.size;},function(t){this._createFont().size=t;}),a(0,n,"italic",function(){return this._font.italic;},function(t){this._createFont().italic=t;}),a(0,n,"fontFamily",function(){return this._font.family;},function(t){this._createFont().family=t;}),a(0,n,"stroke",function(){return this._font.stroke[0];},function(t){this._createFont().stroke===_._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=t;}),a(0,n,"strokeColor",function(){return this._font.stroke[1];},function(t){this._createFont().stroke===_._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=t;}),a(0,n,"border",function(){return this._border?this._border.value:"";},function(t){if("none"!=t){this._border||(this._border={}),this._border.value=t;var e=t.split(" ");if(this._border.color=k.create(e[e.length-1]),1==e.length)return this._border.size=1,void(this._border.type="solid");var n=0;e[0].indexOf("px")>0?(this._border.size=parseInt(e[0]),n++):this._border.size=1,this._border.type=e[n],this._ower._renderType|=256;}else this._border=null;}),a(0,n,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null;},function(t){t?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==t?null:k.create(t),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null;}),a(0,n,"position",function(){return 4&this._type?"absolute":"";},function(t){"absolute"==t?this._type|=4:this._type&=-5;}),a(0,n,"display",null,function(t){switch(t){case "":this._type&=-3,this.visible=!0;break;case "none":this._type|=2,this.visible=!1,this._ower._layoutLater();}}),a(0,n,"paddingLeft",function(){return this.padding[3];}),a(0,n,"paddingTop",function(){return this.padding[0];}),a(0,n,"_scale",null,function(t){this._ower.scale(t[0],t[1]);}),a(0,n,"_rotate",null,function(t){this._ower.rotation=t;}),e.parseOneCSS=function(t,n){for(var i,r=[],a=t.split(n),o=0,s=a.length;o<s;o++){var l=a[o],u=l.indexOf(":"),h=l.substr(0,u).replace(/^\s+|\s+$/g,"");if(0!=h.length){var c=l.substr(u+1).replace(/^\s+|\s+$/g,""),_=[h,c];switch(h){case "italic":case "bold":_[1]="true"==c;break;case "line-height":_[0]="lineHeight",_[1]=parseInt(c);break;case "font-size":_[0]="fontSize",_[1]=parseInt(c);break;case "padding":(i=c.split(" ")).length>1||(i[1]=i[2]=i[3]=i[0]),_[1]=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])];break;case "rotate":_[0]="_rotate",_[1]=parseFloat(c);break;case "scale":i=c.split(" "),_[0]="_scale",_[1]=[parseFloat(i[0]),parseFloat(i[1])];break;case "translate":i=c.split(" "),_[0]="_translate",_[1]=[parseInt(i[0]),parseInt(i[1])];break;default:(_[0]=e._CSSTOVALUE[h])||(_[0]=h);}
r.push(_);}}
return r;},e.parseCSS=function(t,n){for(var i;null!=(i=e._parseCSSRegExp.exec(t));){e.styleSheets[i[1]]=e.parseOneCSS(i[2],";");}},e.EMPTY=new e(null),e._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},e._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),e._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},e._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},e.styleSheets={},e.ALIGN_CENTER=1,e.ALIGN_RIGHT=2,e.VALIGN_MIDDLE=1,e.VALIGN_BOTTOM=2,e._CSS_BLOCK=1,e._DISPLAY_NONE=2,e._ABSOLUTE=4,e._WIDTH_SET=8,e._PADDING=[0,0,0,0],e._RECT=[-1,-1,-1,-1],e._SPACING=[0,0],e._ALIGNS=[0,0,0],e.ADDLAYOUTED=512,e._NEWFONT=4096,e._HEIGHT_SET=8192,e._BACKGROUND_SET=16384,e._FLOAT_RIGHT=32768,e._LINE_ELEMENT=65536,e._NOWARP=131072,e._WIDTHAUTO=262144,e._LISTERRESZIE=524288,e;}(c),et=function(t){function e(){this.url=null,this.audio=null,this.loaded=!1,e.__super.call(this);}
r(e,"laya.media.h5audio.AudioSound",l);var n=e.prototype;return n.dispose=function(){var t=e._audioCache[this.url];t&&(t.src="",delete e._audioCache[this.url]);},n.load=function(t){function n(){r(),o.loaded=!0,o.event("complete");}
function i(){a.load=null,r(),o.event("error");}
function r(){a.removeEventListener("canplaythrough",n),a.removeEventListener("error",i);}
t=A.formatURL(t),this.url=t;var a;if(t==E._tMusic?(e._initMusicAudio(),(a=e._musicAudio).src!=t&&(e._audioCache[a.src]=null,a=null)):a=e._audioCache[t],a&&a.readyState>=2)this.event("complete");else{a||(t==E._tMusic?(e._initMusicAudio(),a=e._musicAudio):a=N.createElement("audio"),e._audioCache[t]=a,a.src=t),a.addEventListener("canplaythrough",n),a.addEventListener("error",i);var o=this;this.audio=a,a.load?a.load():i();}},n.play=function(t,n){if(void 0===t&&(t=0),void 0===n&&(n=0),!this.url)return null;var i;if(!(i=this.url==E._tMusic?e._musicAudio:e._audioCache[this.url]))return null;var r;r=W.getItem("audio:"+this.url),O.isConchApp?r||((r=N.createElement("audio")).src=this.url):this.url==E._tMusic?(e._initMusicAudio(),(r=e._musicAudio).src=this.url):r=r||i.cloneNode(!0);var a=new _t(r);return a.url=this.url,a.loops=n,a.startTime=t,a.play(),E.addChannel(a),a;},a(0,n,"duration",function(){var t;return(t=e._audioCache[this.url])?t.duration:0;}),e._initMusicAudio=function(){e._musicAudio||(e._musicAudio||(e._musicAudio=N.createElement("audio")),O.isConchApp||N.document.addEventListener("mousedown",e._makeMusicOK));},e._makeMusicOK=function(){N.document.removeEventListener("mousedown",e._makeMusicOK),e._musicAudio.src?e._musicAudio.play():(e._musicAudio.src="",e._musicAudio.load());},e._audioCache={},e._musicAudio=null,e;}(),nt=function(t){function e(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.completeHandler=null,e.__super.call(this);}
r(e,"laya.media.SoundChannel",l);var n=e.prototype;return n.play=function(){},n.stop=function(){},n.pause=function(){},n.resume=function(){},n.__runComplete=function(t){t&&t.run();},a(0,n,"volume",function(){return 1;},function(t){}),a(0,n,"position",function(){return 0;}),a(0,n,"duration",function(){return 0;}),e;}(),it=function(t){function e(){e.__super.call(this);}
r(e,"laya.media.Sound",l);var n=e.prototype;return n.load=function(t){},n.play=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),null;},n.dispose=function(){},a(0,n,"duration",function(){return 0;}),e;}(),rt=function(t){function e(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,e.__super.call(this);}
r(e,"laya.media.webaudio.WebAudioSound",l);var n=e.prototype;return n.load=function(t){var n=this;if(t=A.formatURL(t),this.url=t,this.audioBuffer=e._dataCache[t],this.audioBuffer)this._loaded(this.audioBuffer);else if(e.e.on("loaded:"+t,this,this._loaded),e.e.on("err:"+t,this,this._err),!e.__loadingSound[t]){e.__loadingSound[t]=!0;var i=new N.window.XMLHttpRequest();i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){n._disposed?n._removeLoadEvents():(n.data=i.response,e.buffs.push({buffer:n.data,url:n.url}),e.decode());},i.onerror=function(t){n._err();},i.send();}},n._err=function(){this._removeLoadEvents(),e.__loadingSound[this.url]=!1,this.event("error");},n._loaded=function(t){this._removeLoadEvents(),this._disposed||(this.audioBuffer=t,e._dataCache[this.url]=this.audioBuffer,this.loaded=!0,this.event("complete"));},n._removeLoadEvents=function(){e.e.off("loaded:"+this.url,this,this._loaded),e.e.off("err:"+this.url,this,this._err);},n.__playAfterLoaded=function(){if(this.__toPlays){var t,e=0,n=0;n=(t=this.__toPlays).length;var i;for(e=0;e<n;e++){(i=t[e])[2]&&!i[2].isStopped&&this.play(i[0],i[1],i[2]);}
this.__toPlays.length=0;}},n.play=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),n=n||new ft(),this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([t,e,n]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),n.url=this.url,n.loops=e,n.audioBuffer=this.audioBuffer,n.startTime=t,n.play(),E.addChannel(n),n;},n.dispose=function(){this._disposed=!0,delete e._dataCache[this.url],delete e.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[];},a(0,n,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0;}),e.decode=function(){e.buffs.length<=0||e.isDecoding||(e.isDecoding=!0,e.tInfo=e.buffs.shift(),e.ctx.decodeAudioData(e.tInfo.buffer,e._done,e._fail));},e._done=function(t){e.e.event("loaded:"+e.tInfo.url,t),e.isDecoding=!1,e.decode();},e._fail=function(){e.e.event("err:"+e.tInfo.url,null),e.isDecoding=!1,e.decode();},e._playEmptySound=function(){if(null!=e.ctx){var t=e.ctx.createBufferSource();t.buffer=e._miniBuffer,t.connect(e.ctx.destination),t.start(0,0,0);}},e._unlock=function(){e._unlocked||(e._playEmptySound(),"running"==e.ctx.state&&(N.document.removeEventListener("mousedown",e._unlock,!0),N.document.removeEventListener("touchend",e._unlock,!0),e._unlocked=!0));},e.initWebAudio=function(){"running"!=e.ctx.state&&(e._unlock(),N.document.addEventListener("mousedown",e._unlock,!0),N.document.addEventListener("touchend",e._unlock,!0));},e._dataCache={},e.buffs=[],e.isDecoding=!1,e._unlocked=!1,e.tInfo=null,e.__loadingSound={},i(e,["window",function(){return this.window=N.window;},"webAudioEnabled",function(){return this.webAudioEnabled=e.window.AudioContext||e.window.webkitAudioContext||e.window.mozAudioContext;},"ctx",function(){return this.ctx=e.webAudioEnabled?new(e.window.AudioContext||e.window.webkitAudioContext||e.window.mozAudioContext)():void 0;},"_miniBuffer",function(){return this._miniBuffer=e.ctx.createBuffer(1,1,22050);},"e",function(){return this.e=new l();}]),e;}(),at=function(t){function e(){this._responseType=null,this._data=null,e.__super.call(this),this._http=new N.window.XMLHttpRequest();}
r(e,"laya.net.HttpRequest",l);var n=e.prototype;return n.send=function(t,e,n,i,r){void 0===n&&(n="get"),void 0===i&&(i="text"),this._responseType=i,this._data=null;var a=this,o=this._http;if(o.open(n,t,!0),r)for(var s=0;s<r.length;s++){o.setRequestHeader(r[s++],r[s]);}else O.isConchApp||(e&&"string"!=typeof e?o.setRequestHeader("Content-Type","application/json"):o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));o.responseType="arraybuffer"!==i?"text":"arraybuffer",o.onerror=function(t){a._onError(t);},o.onabort=function(t){a._onAbort(t);},o.onprogress=function(t){a._onProgress(t);},o.onload=function(t){a._onLoad(t);},o.send(e);},n._onProgress=function(t){t&&t.lengthComputable&&this.event("progress",t.loaded/t.total);},n._onAbort=function(t){this.error("Request was aborted by user");},n._onError=function(t){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText);},n._onLoad=function(t){var e=this._http,n=void 0!==e.status?e.status:200;200===n||204===n||0===n?this.complete():this.error("["+e.status+"]"+e.statusText+":"+e.responseURL);},n.error=function(t){this.clear(),this.event("error",t);},n.complete=function(){this.clear();var t=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=q.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText;}catch(e){t=!1,this.error(e.message);}
t&&this.event("complete",this._data instanceof Array?[this._data]:this._data);},n.clear=function(){var t=this._http;t.onerror=t.onabort=t.onprogress=t.onload=null;},a(0,n,"url",function(){return this._http.responseURL;}),a(0,n,"http",function(){return this._http;}),a(0,n,"data",function(){return this._data;}),e;}(),ot=function(t){function e(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,e.__super.call(this);}
r(e,"laya.net.Loader",l);var i=e.prototype;return i.load=function(t,n,i,r,a){if(void 0===i&&(i=!0),void 0===a&&(a=!1),this._url=t,0===t.indexOf("data:image")?this._type=n="image":(this._type=n||(n=this.getTypeFromUrl(t)),t=A.formatURL(t)),this._cache=i,this._data=null,!a&&e.loadedMap[t])return this._data=e.loadedMap[t],this.event("progress",1),void this.event("complete",this._data);if(r&&e.setGroup(t,r),null!=e.parserMap[n])return this._customParse=!0,void(e.parserMap[n]instanceof laya.utils.Handler?e.parserMap[n].runWith(this):e.parserMap[n].call(null,this));if("image"===n||"htmlimage"===n||"nativeimage"===n)return this._loadImage(t);if("sound"===n)return this._loadSound(t);if("ttf"===n)return this._loadTTF(t);var o;switch(n){case "atlas":case "plf":o="json";break;case "font":o="xml";break;case "pkm":o="arraybuffer";break;default:o=n;}
e.preLoadedMap[t]?this.onLoaded(e.preLoadedMap[t]):(this._http||(this._http=new at(),this._http.on("progress",this,this.onProgress),this._http.on("error",this,this.onError),this._http.on("complete",this,this.onLoaded)),this._http.send(t,null,"get",o));},i.getTypeFromUrl=function(t){var n=q.getFileExtension(t);return n?e.typeMap[n]:(console.warn("Not recognize the resources suffix",t),"text");},i._loadTTF=function(t){t=A.formatURL(t);var e=new M();e.complete=u.create(this,this.onLoaded),e.load(t);},i._loadImage=function(t){function n(){i.onload=null,i.onerror=null,delete e.imgCache[t];}
t=A.formatURL(t);var i,r=this,a=function t(){n(),r.onLoaded(i);},o=function t(){n(),r.event("error","Load image failed");};"nativeimage"===this._type?((i=new N.window.Image()).crossOrigin="",i.onload=a,i.onerror=o,i.src=t,e.imgCache[t]=i):new Tt.create(t,{onload:a,onerror:o,onCreate:function n(r){i=r,e.imgCache[t]=r;}});},i._loadSound=function(t){function e(){n.offAll();}
var n=new E._soundClass(),i=this;n.on("complete",this,function(){e(),i.onLoaded(n);}),n.on("error",this,function(){e(),n.dispose(),i.event("error","Load sound failed");}),n.load(t);},i.onProgress=function(t){"atlas"===this._type?this.event("progress",.3*t):this.event("progress",t);},i.onError=function(t){this.event("error",t);},i.onLoaded=function(t){var n=this._type;if("plf"==n)this.parsePLFData(t),this.complete(t);else if("image"===n){var i=new ut(t);i.url=this._url,this.complete(i);}else if("sound"===n||"htmlimage"===n||"nativeimage"===n)this.complete(t);else if("atlas"===n){if(!t.src&&!t._setContext){if(!this._data){if(this._data=t,t.meta&&t.meta.image)for(var r=t.meta.image.split(","),a=this._url.indexOf("/")>=0?"/":"\\",o=this._url.lastIndexOf(a),s=o>=0?this._url.substr(0,o+1):"",l=0,u=r.length;l<u;l++){r[l]=s+r[l];}else r=[this._url.replace(".json",".png")];r.reverse(),t.toLoads=r,t.pics=[];}
return this.event("progress",.3+1/r.length*.6),this._loadImage(r.pop());}
if(this._data.pics.push(t),this._data.toLoads.length>0)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var c=this._data.frames,_=this._url.split("?")[0],f=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:_.substring(0,_.lastIndexOf("."))+"/",d=this._data.pics,p=A.formatURL(this._url),m=e.atlasMap[p]||(e.atlasMap[p]=[]);m.dir=f;var g=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale){g=parseFloat(this._data.meta.scale);for(var y in c){var v=c[y],I=d[v.frame.idx?v.frame.idx:0],x=A.formatURL(f+y);I.scaleRate=g,e.cacheRes(x,ut.create(I,v.frame.x,v.frame.y,v.frame.w,v.frame.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.sourceSize.w,v.sourceSize.h)),e.loadedMap[x].url=x,m.push(x);}}else for(y in c){I=d[(v=c[y]).frame.idx?v.frame.idx:0],x=A.formatURL(f+y),e.cacheRes(x,ut.create(I,v.frame.x,v.frame.y,v.frame.w,v.frame.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.sourceSize.w,v.sourceSize.h)),e.loadedMap[x].url=x,m.push(x);}
delete this._data.pics,this.complete(this._data);}else if("font"==n){if(!t.src)return this._data=t,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var T=new h();T.parseFont(this._data,t);var S=this._url.split(".fnt")[0].split("/"),b=S[S.length-1];mt.registerBitmapFont(b,T),this._data=T,this.complete(this._data);}else if("pkm"==n){var w=Tt.create(t,this._url),D=new ut(w);D.url=this._url,this.complete(D);}else this.complete(t);},i.parsePLFData=function(t){var n,i,r;for(n in t){switch(r=t[n],n){case "json":case "text":for(i in r){e.preLoadedMap[A.formatURL(i)]=r[i];}
break;default:for(i in r){e.preLoadedMap[A.formatURL(i)]=r[i];}}}},i.complete=function(t){this._data=t,this._customParse?this.event("loaded",t instanceof Array?[t]:t):(e._loaders.push(this),e._isWorking||e.checkNext());},i.endLoad=function(t){t&&(this._data=t),this._cache&&e.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data);},a(0,i,"url",function(){return this._url;}),a(0,i,"data",function(){return this._data;}),a(0,i,"cache",function(){return this._cache;}),a(0,i,"type",function(){return this._type;}),e.checkNext=function(){e._isWorking=!0;for(var t=N.now();e._startIndex<e._loaders.length;){if(N.now(),e._loaders[e._startIndex].endLoad(),e._startIndex++,N.now()-t>e.maxTimeOut)return console.warn("loader callback cost a long time:"+(N.now()-t)+" url="+e._loaders[e._startIndex-1].url),void n.timer.frameOnce(1,null,e.checkNext);}
e._loaders.length=0,e._startIndex=0,e._isWorking=!1;},e.clearRes=function(t,n){void 0===n&&(n=!1),t=A.formatURL(t);var i=e.getAtlas(t);if(i){for(var r=0,a=i.length;r<a;r++){var o=i[r],s=e.getRes(o);delete e.loadedMap[o],s&&s.destroy(n);}
i.length=0,delete e.atlasMap[t],delete e.loadedMap[t];}else{var l=e.loadedMap[t];l&&(delete e.loadedMap[t],l instanceof laya.resource.Texture&&l.bitmap&&l.destroy(n));}},e.clearTextureRes=function(t){t=A.formatURL(t);var e=laya.net.Loader.getAtlas(t),n=e&&e.length>0?laya.net.Loader.getRes(e[0]):laya.net.Loader.getRes(t);n&&n.bitmap&&(O.isConchApp?n.bitmap.source.releaseTexture&&n.bitmap.source.releaseTexture():null==n.bitmap._atlaser&&n.bitmap.releaseResource(!0));},e.getRes=function(t){return e.loadedMap[A.formatURL(t)];},e.getAtlas=function(t){return e.atlasMap[A.formatURL(t)];},e.cacheRes=function(t,n){t=A.formatURL(t),null!=e.loadedMap[t]?console.warn("Resources already exist,is repeated loading:",t):e.loadedMap[t]=n;},e.setGroup=function(t,n){e.groupMap[n]||(e.groupMap[n]=[]),e.groupMap[n].push(t);},e.clearResByGroup=function(t){if(e.groupMap[t]){var n=e.groupMap[t],i=0,r=n.length;for(i=0;i<r;i++){e.clearRes(n[i]);}
n.length=0;}},e.TEXT="text",e.JSON="json",e.XML="xml",e.BUFFER="arraybuffer",e.IMAGE="image",e.SOUND="sound",e.ATLAS="atlas",e.FONT="font",e.TTF="ttf",e.PLF="plf",e.PKM="pkm",e.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},e.parserMap={},e.groupMap={},e.maxTimeOut=100,e.loadedMap={},e.preLoadedMap={},e.atlasMap={},e._loaders=[],e._isWorking=!1,e._startIndex=0,e.imgCache={},e;}(),st=function(t){function e(){this.retryNum=1,this.retryDelay=0,this.maxLoader=5,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},e.__super.call(this);for(var t=0;t<this._maxPriority;t++){this._resInfos[t]=[];}}
var a;r(e,"laya.net.LoaderManager",l);var o=e.prototype;return o.create=function(t,e,n,i,r,a,o,s){if(void 0===a&&(a=1),void 0===o&&(o=!0),t instanceof Array){var l=t,h=l.length,c=0;if(n)var _=u.create(n.caller,n.method,n.args,!1);for(var f=0;f<h;f++){var d=l[f];"string"==typeof d&&(d=l[f]={url:d}),d.progress=0;}
for(f=0;f<h;f++){d=l[f];var p=n?u.create(null,function(t,e){t.progress=e;for(var n=0,i=0;i<h;i++){n+=l[i].progress;}
var r=n/h;_.runWith(r);},[d],!1):null,m=n||e?u.create(null,function(t,n){c++,t.progress=1,c===h&&e&&e.run();},[d]):null;this._create(d.url,m,p,d.clas||i,d.params||r,d.priority||a,o,d.group||s);}
return!0;}
return this._create(t,e,n,i,r,a,o,s);},o._create=function(t,i,r,a,o,s,l,h){void 0===s&&(s=1),void 0===l&&(l=!0);var c=A.formatURL(t),_=this.getRes(c);if(_)!_.hasOwnProperty("loaded")||_.loaded?(r&&r.runWith(1),i&&i.run()):i&&n.loader._createListener(t,i.caller,i.method,i.args,!0,!1);else{var f=q.getFileExtension(t),d=e.createMap[f];if(!d)throw new Error("LoaderManager:unknown file("+t+") extension with: "+f+".");a||(a=d[0]);var p=d[1];"atlas"==f?this.load(t,i,r,p,s,l):(a===ut&&(p="htmlimage"),(_=a?new a():null).hasOwnProperty("_loaded")&&(_._loaded=!1),_._setUrl(t),h&&_._setGroup(h),this._createLoad(_,t,u.create(null,function(e){_&&!_.destroyed&&e&&_.onAsynLoaded.call(_,t,e,o),i&&i.run(),n.loader.event(t);}),r,p,s,!1,h,!0),l&&this.cacheRes(c,_));}
return _;},o.load=function(t,i,r,o,s,l,u,h){var c=this;if(void 0===s&&(s=1),void 0===l&&(l=!0),void 0===h&&(h=!1),t instanceof Array)return this._loadAssets(t,i,r,o,s,l,u);var _=ot.getRes(t);if(null!=_)n.timer.frameOnce(1,null,function(){r&&r.runWith(1),i&&i.runWith(_),c._loaderCount||c.event("complete");});else{var f=e._resMap[t];f?(i&&f._createListener("complete",i.caller,i.method,i.args,!1,!1),r&&f._createListener("progress",r.caller,r.method,r.args,!1,!1)):((f=this._infoPool.length?this._infoPool.pop():new a()).url=t,f.type=o,f.cache=l,f.group=u,f.ignoreCache=h,i&&f.on("complete",i.caller,i.method,i.args),r&&f.on("progress",r.caller,r.method,r.args),e._resMap[t]=f,s=s<this._maxPriority?s:this._maxPriority-1,this._resInfos[s].push(f),this._next());}
return this;},o._createLoad=function(t,i,r,o,s,l,u,h,c){var _=this;if(void 0===l&&(l=1),void 0===u&&(u=!0),void 0===c&&(c=!1),i instanceof Array)return this._loadAssets(i,r,o,s,l,u,h);var f=ot.getRes(i);if(null!=f)n.timer.frameOnce(1,null,function(){o&&o.runWith(1),r&&r.runWith(f),_._loaderCount||_.event("complete");});else{var d=e._resMap[i];d?(r&&d._createListener("complete",r.caller,r.method,r.args,!1,!1),o&&d._createListener("progress",o.caller,o.method,o.args,!1,!1)):((d=this._infoPool.length?this._infoPool.pop():new a()).url=i,d.clas=t,d.type=s,d.cache=u,d.group=h,d.ignoreCache=c,r&&d.on("complete",r.caller,r.method,r.args),o&&d.on("progress",o.caller,o.method,o.args),e._resMap[i]=d,l=l<this._maxPriority?l:this._maxPriority-1,this._resInfos[l].push(d),this._next());}
return this;},o._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var t=0;t<this._maxPriority;t++){for(var e=this._resInfos[t];e.length>0;){var n=e.shift();if(n)return this._doLoad(n);}}
this._loaderCount||this.event("complete");}},o._doLoad=function(t){function e(e){n.offAll(),n._data=null,n._customParse=!1,i._loaders.push(n),i._endLoad(t,e instanceof Array?[e]:e),i._loaderCount--,i._next();}
this._loaderCount++;var n=this._loaders.length?this._loaders.pop():new ot();n.on("complete",null,e),n.on("progress",null,function(e){t.event("progress",e);}),n.on("error",null,function(t){e(null);});var i=this;n._class=t.clas,n.load(t.url,t.type,t.cache,t.group,t.ignoreCache);},o._endLoad=function(t,i){var r=t.url;if(null==i){var a=this._failRes[r]||0;if(a<this.retryNum)return console.warn("[warn]Retry to load:",r),this._failRes[r]=a+1,void n.timer.once(this.retryDelay,this,this._addReTry,[t],!1);console.warn("[error]Failed to load:",r),this.event("error",r);}
this._failRes[r]&&(this._failRes[r]=0),delete e._resMap[r],t.event("complete",i),t.offAll(),this._infoPool.push(t);},o._addReTry=function(t){this._resInfos[this._maxPriority-1].push(t),this._next();},o.clearRes=function(t,e){void 0===e&&(e=!1),ot.clearRes(t,e);},o.getRes=function(t){return ot.getRes(t);},o.cacheRes=function(t,e){ot.cacheRes(t,e);},o.clearTextureRes=function(t){ot.clearTextureRes(t);},o.setGroup=function(t,e){ot.setGroup(t,e);},o.clearResByGroup=function(t){ot.clearResByGroup(t);},o.clearUnLoaded=function(){for(var t=0;t<this._maxPriority;t++){for(var n=this._resInfos[t],i=n.length-1;i>-1;i--){var r=n[i];r&&(r.offAll(),this._infoPool.push(r));}
n.length=0;}
this._loaderCount=0,e._resMap={};},o.cancelLoadByUrls=function(t){if(t)for(var e=0,n=t.length;e<n;e++){this.cancelLoadByUrl(t[e]);}},o.cancelLoadByUrl=function(t){for(var n=0;n<this._maxPriority;n++){for(var i=this._resInfos[n],r=i.length-1;r>-1;r--){var a=i[r];a&&a.url===t&&(i[r]=null,a.offAll(),this._infoPool.push(a));}}
e._resMap[t]&&delete e._resMap[t];},o._loadAssets=function(t,e,n,i,r,a,o){void 0===r&&(r=1),void 0===a&&(a=!0);for(var s=t.length,l=0,h=0,c=[],_=!0,f=0;f<s;f++){var d=t[f];"string"==typeof d&&(d={url:d,type:i,size:1,priority:r}),d.size||(d.size=1),d.progress=0,h+=d.size,c.push(d);var p=n?u.create(null,function(t,e){if(null!=n){t.progress=e;for(var i=0,r=0;r<c.length;r++){var a=c[r];i+=a.size*a.progress;}
var o=i/h;n.runWith(o);}},[d],!1):null,m=e||n?u.create(null,function(t,n){l++,t.progress=1,n||(_=!1),l===s&&e&&e.runWith(_);},[d]):null;this.load(d.url,m,p,d.type,d.priority||1,a,d.group||o);}
return this;},e.cacheRes=function(t,e){ot.cacheRes(t,e);},e._resMap={},i(e,["createMap",function(){return this.createMap={atlas:[null,"atlas"]};}]),e.__init$=function(){a=function(t){function e(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,e.__super.call(this);}
return r(e,"",l),e;}();},e;}(),lt=(function(t){function e(t){e.__super.call(this),t||(t=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var n=0,i=0,r=0;r<20;r++){r%5!=4?this._mat[n++]=t[r]:this._alpha[i++]=t[r];}
this._action=o.createFilterAction(32),this._action.data=this;}
r(e,"laya.filters.ColorFilter",I);var i=e.prototype;n.imps(i,{"laya.filters.IFilter":!0}),i.callNative=function(t){t._$P.cf=this;t.conchModel&&t.conchModel.setFilterMatrix&&t.conchModel.setFilterMatrix(this._mat,this._alpha);},a(0,i,"type",function(){return 32;}),a(0,i,"action",function(){return this._action;});}(),function(t){function e(t,n,i){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===n&&(n=0),e.__super.call(this),this._byteClass=i||U,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,t&&n>0&&n<65535&&this.connect(t,n);}
r(e,"laya.net.Socket",l);var n=e.prototype;n.connect=function(t,e){var n="ws://"+t+":"+e;n="https:"==N.window.location.protocol?"wss://"+t+":"+e:"ws://"+t+":"+e,this.connectByUrl(n);},n.connectByUrl=function(t){var e=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new N.window.WebSocket(t,this.protocols):this._socket=new N.window.WebSocket(t),this._socket.binaryType="arraybuffer",this._output=new this._byteClass(),this._output.endian=this.endian,this._input=new this._byteClass(),this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(t){e._onOpen(t);},this._socket.onmessage=function(t){e._onMessage(t);},this._socket.onclose=function(t){e._onClose(t);},this._socket.onerror=function(t){e._onError(t);};},n.cleanSocket=function(){try{this._socket.close();}catch(t){}
this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null;},n.close=function(){if(null!=this._socket)try{this._socket.close();}catch(t){}},n._onOpen=function(t){this._connected=!0,this.event("open",t);},n._onMessage=function(t){if(t&&t.data){var e=t.data;if(this.disableInput&&e)this.event("message",e);else{this._input.length>0&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var n=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,e&&("string"==typeof e?this._input.writeUTFBytes(e):this._input.writeArrayBuffer(e),this._addInputPosition=this._input.pos,this._input.pos=n),this.event("message",e);}}},n._onClose=function(t){this._connected=!1,this.event("close",t);},n._onError=function(t){this.event("error",t);},n.send=function(t){this._socket.send(t);},n.flush=function(){if(this._output&&this._output.length>0){var t;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length));}catch(e){t=e;}
this._output.endian=this.endian,this._output.clear(),t&&this.event("error",t);}},a(0,n,"input",function(){return this._input;}),a(0,n,"output",function(){return this._output;}),a(0,n,"connected",function(){return this._connected;}),a(0,n,"endian",function(){return this._endian;},function(t){this._endian=t,null!=this._input&&(this._input.endian=t),null!=this._output&&(this._output.endian=t);}),e.LITTLE_ENDIAN="littleEndian",e.BIG_ENDIAN="bigEndian";}(),function(t){function e(){this.worker=null,e.__super.call(this);var t=this;this.worker=new N.window.Worker(e.workerPath),this.worker.onmessage=function(e){t.workerMessage(e.data);};}
r(e,"laya.net.WorkerLoader",l);var n=e.prototype;n.workerMessage=function(t){if(t)switch(t.type){case "Image":this.imageLoaded(t);break;case "Msg":this.event("image_msg",t.msg);}},n.imageLoaded=function(t){if(t&&t.buffer&&t.buffer.length<10)return e._enable=!1,this._myTrace("buffer lost when postmessage ,disable workerloader"),this.event(t.url,null),void this.event("image_err",t.url+"\n"+t.msg);if(!t.dataType)return this.event(t.url,null),void this.event("image_err",t.url+"\n"+t.msg);var n,i,r;switch(t.dataType){case "buffer":(r=(i=(n=new vt("2D")).source.getContext("2d")).createImageData(t.width,t.height)).data.set(t.buffer),n.size(r.width,r.height),i.putImageData(r,0,0),n.memorySize=0;break;case "imagedata":i=(n=new vt("2D")).source.getContext("2d"),r=t.imagedata,n.size(r.width,r.height),i.putImageData(r,0,0),r=t.imagedata,n.memorySize=0;break;case "imageBitmap":r=t.imageBitmap,O.isWebGL?n=r:(i=(n=new vt("2D")).source.getContext("2d"),n.size(r.width,r.height),i.drawImage(r,0,0),n.src=t.url);}
O.isWebGL&&(n=new laya.webgl.resource.WebGLImage(n,t.url)),this.event(t.url,n);},n._myTrace=function(t){var e=arguments,n=[],i=0,r=e.length;for(i=0;i<r;i++){n.push(e[i]);}
this.event("image_msg",n.join(" "));},n.loadImage=function(t){var e;(e={}).type="load",e.url=t,this.worker.postMessage(e);},n._loadImage=function(t){var n=this;if(!e._enable||t.toLowerCase().indexOf(".png")<0)e._preLoadFun.call(n,t);else{t=A.formatURL(t);var i=function i(r){laya.net.WorkerLoader.I.off(t,n,i),r?n.onLoaded(r):e._preLoadFun.call(n,t);};laya.net.WorkerLoader.I.on(t,n,i),laya.net.WorkerLoader.I.loadImage(t);}},a(1,e,"enable",function(){return e._enable;},function(t){e.disableJSDecode&&!N.window.createImageBitmap||(e._enable=t)&&null==e._preLoadFun&&(e._enable=e.__init__());}),e.__init__=function(){return null==e._preLoadFun&&!!N.window.Worker&&(e._preLoadFun=ot.prototype._loadImage,ot.prototype._loadImage=e.prototype._loadImage,e.I||(e.I=new e()),!0);},e.workerSupported=function(){return!!N.window.Worker;},e.IMAGE_LOADED="image_loaded",e.IMAGE_ERR="image_err",e.IMAGE_MSG="image_msg",e.I=null,e._preLoadFun=null,e._enable=!1,e.workerPath="libs/worker.js",e.disableJSDecode=!0;}(),function(t){function e(){e.__super.call(this),this._$1__id=++e._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,e._idResourcesMap[this.id]=this,this._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,V.currentResourceManager&&V.currentResourceManager.addResource(this);}
r(e,"laya.resource.Resource",l);var i=e.prototype;return n.imps(i,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),i._setUrl=function(t){if(this._url!==t){var n;this._url&&((n=e._urlResourcesMap[this._url]).splice(n.indexOf(this),1),0===n.length&&delete e._urlResourcesMap[this._url]),t&&((n=e._urlResourcesMap[t])||(e._urlResourcesMap[t]=n=[]),n.push(this)),this._url=t;}},i._getGroup=function(){return this._group;},i._setGroup=function(t){if(this._group!==t){var n;this._group&&((n=e._groupResourcesMap[this._group]).splice(n.indexOf(this),1),0===n.length&&delete e._groupResourcesMap[this._group]),t&&((n=e._groupResourcesMap[t])||(e._groupResourcesMap[t]=n=[]),n.push(this)),this._group=t;}},i._addReference=function(){this._referenceCount++;},i._removeReference=function(){this._referenceCount--;},i._clearReference=function(){this._referenceCount=0;},i._endLoaded=function(){this.__loaded=!0,this.event("loaded",this);},i.recreateResource=function(){this.completeCreate();},i.disposeResource=function(){},i.activeResource=function(t){void 0===t&&(t=!1),this._lastUseFrameCount=K.loopCount,!this._destroyed&&this.__loaded&&(this._released||t)&&this.recreateResource();},i.releaseResource=function(t){return void 0===t&&(t=!1),!(!t&&this.lock)&&!(this._released&&!t)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0);},i.onAsynLoaded=function(t,e,n){throw new Error("Resource: must override this function!");},i.destroy=function(){if(!this._destroyed){null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete e._idResourcesMap[this.id];var t;this._url&&((t=e._urlResourcesMap[this._url])&&(t.splice(t.indexOf(this),1),0===t.length&&delete e._urlResourcesMap[this.url]),ot.clearRes(this._url),this.__loaded||o.cancelLoadByUrl(this._url)),this._group&&((t=e._groupResourcesMap[this._group]).splice(t.indexOf(this),1),0===t.length&&delete e._groupResourcesMap[this.url]);}},i.completeCreate=function(){this._released=!1,this.event("recovered",this);},i.dispose=function(){this.destroy();},a(0,i,"memorySize",function(){return this._memorySize;},function(t){var e=t-this._memorySize;this._memorySize=t,this.resourceManager&&this.resourceManager.addSize(e);}),a(0,i,"_loaded",null,function(t){this.__loaded=t;}),a(0,i,"loaded",function(){return this.__loaded;}),a(0,i,"id",function(){return this._$1__id;}),a(0,i,"destroyed",function(){return this._destroyed;}),a(0,i,"group",function(){return this._getGroup();},function(t){this._setGroup(t);}),a(0,i,"resourceManager",function(){return this._resourceManager;}),a(0,i,"url",function(){return this._url;}),a(0,i,"released",function(){return this._released;}),a(0,i,"referenceCount",function(){return this._referenceCount;}),e.getResourceByID=function(t){return e._idResourcesMap[t];},e.getResourceByURL=function(t,n){return void 0===n&&(n=0),e._urlResourcesMap[t][n];},e.getResourceCountByURL=function(t){return e._urlResourcesMap[t].length;},e.destroyUnusedResources=function(t){var n;if(t){var i=e._groupResourcesMap[t];if(i)for(var r=i.slice(),a=0,o=r.length;a<o;a++){(n=r[a]).lock||0!==n._referenceCount||n.destroy();}}else for(var s in e._idResourcesMap){(n=e._idResourcesMap[s]).lock||0!==n._referenceCount||n.destroy();}},e._uniqueIDCounter=0,e._idResourcesMap={},e._urlResourcesMap={},e._groupResourcesMap={},e;}()),ut=function(e){function i(t,e){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,i.__super.call(this),t&&null!=t._addReference&&t._addReference(),this.setTo(t,e);}
r(i,"laya.resource.Texture",l);var s=i.prototype;return s._setUrl=function(t){this.url=t;},s.setTo=function(e,n){if(e instanceof t.HTMLElement){var r=vt.create("2D",e);this.bitmap=r;}else this.bitmap=e;if(this.uv=n||i.DEF_UV,e){this._w=e.width,this._h=e.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=this._w>0;var a=this;if(this._loaded)o.addToAtlas&&o.addToAtlas(a);else{var s=e;s instanceof laya.resource.HTMLImage&&s.image&&s.image.addEventListener("load",function(t){o.addToAtlas&&o.addToAtlas(a);},!1);}}},s.active=function(){this.bitmap&&this.bitmap.activeResource();},s.destroy=function(t){if(void 0===t&&(t=!1),this.bitmap&&this.bitmap.referenceCount>0){var e=this.bitmap;t?(O.isConchApp&&e.source&&e.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,e.dispose(),e._clearReference()):(e._removeReference(),0==e.referenceCount&&(O.isConchApp&&e.source&&e.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,e.dispose())),this.url&&this===n.loader.getRes(this.url)&&n.loader.clearRes(this.url,t),this._loaded=!1;}},s.load=function(t){var e=this;this._loaded=!1,t=A.customFormat(t);var n=this.bitmap||(this.bitmap=Tt.create(t));n&&n._addReference();var i=this;n.onload=function(){n.onload=null,i._loaded=!0,e.sourceWidth=e._w=n.width,e.sourceHeight=e._h=n.height,i.event("loaded",this),o.addToAtlas&&o.addToAtlas(i);};},s.addTextureToAtlas=function(t){o.addTextureToAtlas(this);},s.getPixels=function(t,e,n,i){if(O.isConchApp){var r=this.bitmap;if(r.source&&r.source.getImageData){var a=r.source.getImageData(t,e,n,i),s=new Uint8Array(a);return Array.from(s);}
return null;}
if(O.isWebGL)return o.getTexturePixels(this,t,e,n,i);N.canvas.size(n,i),N.canvas.clear(),N.context.drawTexture(this,-t,-e,this.width,this.height,0,0);return N.context.getImageData(0,0,n,i).data;},s.onAsynLoaded=function(t,e){e&&e._addReference(),this.setTo(e,this.uv);},a(0,s,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null;}),a(0,s,"loaded",function(){return this._loaded;}),a(0,s,"released",function(){return!this.bitmap||this.bitmap.released;}),a(0,s,"width",function(){return this._w?this._w:this.uv&&this.uv!==i.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width;},function(t){this._w=t,this.sourceWidth||(this.sourceWidth=t);}),a(0,s,"repeat",function(){return!O.isWebGL||!this.bitmap||this.bitmap.repeat;},function(t){t&&O.isWebGL&&this.bitmap&&(this.bitmap.repeat=t,t&&(this.bitmap.enableMerageInAtlas=!1));}),a(0,s,"height",function(){return this._h?this._h:this.uv&&this.uv!==i.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height;},function(t){this._h=t,this.sourceHeight||(this.sourceHeight=t);}),a(0,s,"isLinearSampling",function(){return!O.isWebGL||9728!=this.bitmap.minFifter;},function(t){!t&&O.isWebGL&&(t||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1));}),i.moveUV=function(t,e,n){for(var i=0;i<8;i+=2){n[i]+=t,n[i+1]+=e;}
return n;},i.create=function(t,e,n,r,a,s,l,u,h){void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0),void 0===h&&(h=0);var c=t instanceof laya.resource.Texture,_=c?t.uv:i.DEF_UV,f=c?t.bitmap:t,d=o.isAtlas(f);if(d){var p=f._atlaser,m=t._atlasID;if(-1==m)throw new Error("create texture error");f=p._inAtlasTextureBitmapValue[m],_=p._inAtlasTextureOriUVValue[m];}
var g=new i(f,null);f.width&&e+r>f.width&&(r=f.width-e),f.height&&n+a>f.height&&(a=f.height-n),g.width=r,g.height=a,g.offsetX=s,g.offsetY=l,g.sourceWidth=u||r,g.sourceHeight=h||a;var y=1/f.width,v=1/f.height;e*=y,n*=v,r*=y,a*=v;var I=g.uv[0],x=g.uv[1],T=g.uv[4],S=g.uv[5],b=T-I,w=S-x,D=i.moveUV(_[0],_[1],[e,n,e+r,n,e+r,n+a,e,n+a]);g.uv=[I+D[0]*b,x+D[1]*w,T-(1-D[2])*b,x+D[3]*w,T-(1-D[4])*b,S-(1-D[5])*w,I+D[6]*b,S-(1-D[7])*w],d&&g.addTextureToAtlas();var C=f.scaleRate;return C&&1!=C?(g.sourceWidth/=C,g.sourceHeight/=C,g.width/=C,g.height/=C,g.scaleRate=C,g.offsetX/=C,g.offsetY/=C):g.scaleRate=1,g;},i.createFromTexture=function(t,e,n,r,a){var o=t.scaleRate;1!=o&&(e*=o,n*=o,r*=o,a*=o);var s=C.TEMP.setTo(e-t.offsetX,n-t.offsetY,r,a),l=s.intersection(i._rect1.setTo(0,0,t.width,t.height),i._rect2);if(!l)return null;var u=i.create(t,l.x,l.y,l.width,l.height,l.x-s.x,l.y-s.y,r,a);return u.bitmap._removeReference(),u;},i.DEF_UV=[0,0,1,0,1,1,0,1],i.INV_UV=[0,1,1,1,1,0,0,0],i._rect1=new C(),i._rect2=new C(),i;}(),ht=function(t){function e(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,e.__super.call(this);}
var i;r(e,"laya.utils.TimeLine",l);var o=e.prototype;return o.to=function(t,e,n,i,r){return void 0===r&&(r=0),this._create(t,e,n,i,r,!0);},o.from=function(t,e,n,i,r){return void 0===r&&(r=0),this._create(t,e,n,i,r,!1);},o._create=function(t,e,n,r,a,o){var s=W.getItemByClass("tweenData",i);return s.isTo=o,s.type=0,s.target=t,s.duration=n,s.data=e,s.startTime=this._startTime+a,s.endTime=s.startTime+s.duration,s.ease=r,this._startTime=Math.max(s.endTime,this._startTime),this._tweenDataList.push(s),this._startTimeSort=!0,this._endTimeSort=!0,this;},o.addLabel=function(t,e){var n=W.getItemByClass("tweenData",i);return n.type=1,n.data=t,n.endTime=n.startTime=this._startTime+e,this._labelDic||(this._labelDic={}),this._labelDic[t]=n,this._tweenDataList.push(n),this;},o.removeLabel=function(t){if(this._labelDic&&this._labelDic[t]){var e=this._labelDic[t];if(e){var n=this._tweenDataList.indexOf(e);n>-1&&this._tweenDataList.splice(n,1);}
delete this._labelDic[t];}},o.gotoTime=function(t){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var e,n;for(var i in this._firstTweenDic){if(n=this._firstTweenDic[i])for(var r in n){n.diyTarget.hasOwnProperty(r)&&(n.diyTarget[r]=n[r]);}}
for(i in this._tweenDic){(e=this._tweenDic[i]).clear(),delete this._tweenDic[i];}
this._index=0,this._gidIndex=0,this._currTime=t,this._lastTime=N.now();var a;null==this._endTweenDataList||this._endTimeSort?(this._endTimeSort=!1,this._endTweenDataList=a=this._tweenDataList.concat(),a.sort(function(t,e){return t.endTime>e.endTime?1:t.endTime<e.endTime?-1:0;})):a=this._endTweenDataList;for(var o,s=0,l=a.length;s<l;s++){if(0==(o=a[s]).type){if(!(t>=o.endTime))break;this._index=Math.max(this._index,s+1);var h=o.data;if(o.isTo)for(var c in h){o.target[c]=h[c];}}}
for(s=0,l=this._tweenDataList.length;s<l;s++){0==(o=this._tweenDataList[s]).type&&t>=o.startTime&&t<o.endTime&&(this._index=Math.max(this._index,s+1),this._gidIndex++,(e=W.getItemByClass("tween",Y))._create(o.target,o.data,o.duration,o.ease,u.create(this,this._animComplete,[this._gidIndex]),0,!1,o.isTo,!0,!1),e.setStartTime(this._currTime-(t-o.startTime)),e._updateEase(this._currTime),e.gid=this._gidIndex,this._tweenDic[this._gidIndex]=e);}}},o.gotoLabel=function(t){if(null!=this._labelDic){var e=this._labelDic[t];e&&this.gotoTime(e.startTime);}},o.pause=function(){n.timer.clear(this,this._update);},o.resume=function(){this.play(this._currTime,this._loopKey);},o.play=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(t,e){return t.startTime>e.startTime?1:t.startTime<e.startTime?-1:0;});for(var i=0,r=this._tweenDataList.length;i<r;i++){var a=this._tweenDataList[i];if(null!=a&&0==a.type){var o=a.target,s=o.$_GID||(o.$_GID=q.getGID()),l=null;null==this._firstTweenDic[s]?((l={}).diyTarget=o,this._firstTweenDic[s]=l):l=this._firstTweenDic[s];for(var u in a.data){null==l[u]&&(l[u]=o[u]);}}}}
"string"==typeof t?this.gotoLabel(t):this.gotoTime(t),this._loopKey=e,this._lastTime=N.now(),n.timer.frameLoop(1,this,this._update);}},o._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var t in this._tweenDic){(r=this._tweenDic[t]).complete();}
return this._complete(),void this.pause();}
if(this._complete(),!this._tweenDataList)return;this.gotoTime(0);}
var e=N.now(),n=e-this._lastTime,i=this._currTime+=n*this.scale;this._lastTime=e;for(t in this._tweenDic){(r=this._tweenDic[t])._updateEase(i);}
var r;if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var a=this._tweenDataList[this._index];i>=a.startTime&&(this._index++,0==a.type?(this._gidIndex++,(r=W.getItemByClass("tween",Y))._create(a.target,a.data,a.duration,a.ease,u.create(this,this._animComplete,[this._gidIndex]),0,!1,a.isTo,!0,!1),r.setStartTime(i),r.gid=this._gidIndex,this._tweenDic[this._gidIndex]=r,r._updateEase(i)):this.event("label",a.data));}},o._animComplete=function(t){this._tweenDic[t]&&delete this._tweenDic[t];},o._complete=function(){this.event("complete");},o.reset=function(){var t;if(this._labelDic)for(t in this._labelDic){delete this._labelDic[t];}
for(t in this._tweenDic){this._tweenDic[t].clear(),delete this._tweenDic[t];}
for(t in this._firstTweenDic){delete this._firstTweenDic[t];}
if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var e=0,i=0;for(i=this._tweenDataList.length,e=0;e<i;e++){this._tweenDataList[e]&&this._tweenDataList[e].destroy();}}
this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,n.timer.clear(this,this._update);},o.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null;},a(0,o,"index",function(){return this._frameIndex;},function(t){this._frameIndex=t,this.gotoTime(this._frameIndex/this._frameRate*1e3);}),a(0,o,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total;}),e.to=function(t,n,i,r,a){return void 0===a&&(a=0),new e().to(t,n,i,r,a);},e.from=function(t,n,i,r,a){return void 0===a&&(a=0),new e().from(t,n,i,r,a);},e.__init$=function(){i=function(){function t(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null;}
r(t,"");return t.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,W.recover("tweenData",this);},t;}();},e;}(),ct=function(e){function s(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,s.__super.call(this),this._style=c.EMPTY;}
r(s,"laya.display.Sprite",e);var l=s.prototype;return n.imps(l,{"laya.display.ILayout":!0}),l.createConchModel=function(){return new ConchNode();},l.destroy=function(t){void 0===t&&(t=!0),this._releaseMem(),e.prototype.destroy.call(this,t),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null;},l.updateZOrder=function(){q.updateOrder(this._childs)&&this.repaint();},l.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1;},l.setBounds=function(t){this._set$P("uBounds",t);},l.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new C()),C._getWrapRec(this._boundPointsToParent(),this._$P.mBounds);},l.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new C()),C._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds));},l._boundPointsToParent=function(t){void 0===t&&(t=!1);var e=0,n=0;this._style&&(e=this._style._tf.translateX,n=this._style._tf.translateY,t=t||0!==this._style._tf.rotate,this._style.scrollRect&&(e+=this._style.scrollRect.x,n+=this._style.scrollRect.y));var i=this._getBoundPointsM(t);if(!i||i.length<1)return i;if(8!=i.length&&(i=t?S.scanPList(i):C._getWrapRec(i,C.TEMP)._getBoundPoints()),!this.transform)return q.transPointList(i,this._x-e,this._y-n),i;var r=D.TEMP,a=0,o=i.length;for(a=0;a<o;a+=2){r.x=i[a],r.y=i[a+1],this.toParentPoint(r),i[a]=r.x,i[a+1]=r.y;}
return i;},l.getGraphicBounds=function(t){return void 0===t&&(t=!1),this._graphics?this._graphics.getBounds(t):C.TEMP.setTo(0,0,0,0);},l._getBoundPointsM=function(t){if(void 0===t&&(t=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var e=q.clearArray(this._$P.temBM),n=C.TEMP;return n.copyFrom(this.scrollRect),q.concatArray(e,n._getBoundPoints()),e;}
for(var i,r,a,o=this._graphics?this._graphics.getBoundPoints():q.clearArray(this._$P.temBM),s=0,l=(a=this._childs).length;s<l;s++){(i=a[s])instanceof laya.display.Sprite&&1==i.visible&&(r=i._boundPointsToParent(t))&&(o=o?q.concatArray(o,r):r);}
return o;},l.getStyle=function(){return this._style===c.EMPTY&&(this._style=new c()),this._style;},l.setStyle=function(t){this._style=t;},l._adjustTransform=function(){this._tfChanged=!1;var t,e=this._style._tf,n=e.scaleX,i=e.scaleY;if(e.rotate||1!==n||1!==i||e.skewX||e.skewY){(t=this._transform||(this._transform=w.create())).bTransform=!0;var r=.0174532922222222*(e.rotate-e.skewX),a=.0174532922222222*(e.rotate+e.skewY),o=Math.cos(a),s=Math.sin(a),l=Math.sin(r),u=Math.cos(r);return t.a=n*o,t.b=n*s,t.c=-i*l,t.d=i*u,t.tx=t.ty=0,t;}
return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,t;},l.pos=function(t,e,n){if(void 0===n&&(n=!1),this._x!==t||this._y!==e){if(this.destroyed)return this;if(n){this._x=t,this._y=e,this.conchModel&&this.conchModel.pos(this._x,this._y);var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint());}else this.x=t,this.y=e;}
return this;},l.pivot=function(t,e){return this.pivotX=t,this.pivotY=e,this;},l.size=function(t,e){return this.width=t,this.height=e,this;},l.scale=function(t,e,n){void 0===n&&(n=!1);var i=this.getStyle(),r=i._tf;if(r.scaleX!=t||r.scaleY!=e){if(this.destroyed)return this;if(n){i.setScale(t,e),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(t,e),this._renderType|=4;var a=this._parent;a&&0===a._repaint&&(a._repaint=1,a.parentRepaint());}else this.scaleX=t,this.scaleY=e;}
return this;},l.skew=function(t,e){return this.skewX=t,this.skewY=e,this;},l.render=function(t,e,n){K.spriteCount++,L.renders[this._renderType]._fun(this,t,e+this._x,n+this._y),this._repaint=0;},l.drawToCanvas=function(t,e,n,i){if(O.isConchNode){var r=vt.create("2D");return new R(t,e,r).ctx.setCanvasType(1),this.conchModel.drawToCanvas(r.source,n,i),r;}
return o.drawToCanvas(this,this._renderType,t,e,n,i);},l.customRender=function(t,e,n){this._renderType|=1024;},l._applyFilters=function(){if(!O.isWebGL){var t;if((t=this._$P.filters)&&!(t.length<1))for(var e=0,n=t.length;e<n;e++){t[e].action.apply(this._$P.cacheCanvas);}}},l._isHaveGlowFilter=function(){var t=0,e=0;if(this.filters)for(t=0;t<this.filters.length;t++){if(8==this.filters[t].type)return!0;}
for(t=0,e=this._childs.length;t<e;t++){if(this._childs[t]._isHaveGlowFilter())return!0;}
return!1;},l.localToGlobal=function(t,e){void 0===e&&(e=!1),!0===e&&(t=new D(t.x,t.y));for(var i=this;i&&i!=n.stage;){t=i.toParentPoint(t),i=i.parent;}
return t;},l.globalToLocal=function(t,e){void 0===e&&(e=!1),e&&(t=new D(t.x,t.y));for(var i=this,r=[];i&&i!=n.stage;){r.push(i),i=i.parent;}
for(var a=r.length-1;a>=0;){t=(i=r[a]).fromParentPoint(t),a--;}
return t;},l.toParentPoint=function(t){if(!t)return t;t.x-=this.pivotX,t.y-=this.pivotY,this.transform&&this._transform.transformPoint(t),t.x+=this._x,t.y+=this._y;var e=this._style.scrollRect;return e&&(t.x-=e.x,t.y-=e.y),t;},l.fromParentPoint=function(t){if(!t)return t;t.x-=this._x,t.y-=this._y;var e=this._style.scrollRect;return e&&(t.x+=e.x,t.y+=e.y),this.transform&&this._transform.invertTransformPoint(t),t.x+=this.pivotX,t.y+=this.pivotY,t;},l.on=function(t,n,i,r){return 1!==this._mouseEnableState&&this.isMouseEvent(t)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(t,n,i,r,!1)):e.prototype.on.call(this,t,n,i,r);},l.once=function(t,n,i,r){return 1!==this._mouseEnableState&&this.isMouseEvent(t)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(t,n,i,r,!0)):e.prototype.once.call(this,t,n,i,r);},l._$2__onDisplay=function(){if(1!==this._mouseEnableState){var t=this;for(t=t.parent;t&&1!==t._mouseEnableState&&!t._getBit(2);){t.mouseEnabled=!0,t._setBit(2,!0),t=t.parent;}}},l.loadImage=function(t,e,n,i,r,a){var o=this;return void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),this.graphics.loadImage(t,e,n,i,r,function(t){o.destroyed||(o.size(e+(i||t.width),n+(r||t.height)),o.repaint(),a&&a.runWith(t));}),this;},l.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint();},l._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache;},l._childChanged=function(t){this._childs.length?this._renderType|=2048:this._renderType&=-2049,t&&this._get$P("hasZorder")&&n.timer.callLater(this,this.updateZOrder),this.repaint();},l.parentRepaint=function(){var t=this._parent;t&&0===t._repaint&&(t._repaint=1,t.parentRepaint());},l.startDrag=function(t,e,n,i,r,a,o){void 0===e&&(e=!1),void 0===n&&(n=0),void 0===i&&(i=300),void 0===a&&(a=!1),void 0===o&&(o=.92),this._$P.dragging||this._set$P("dragging",new H()),this._$P.dragging.start(this,t,e,n,i,r,a,o);},l.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop();},l._releaseMem=function(){if(this._$P){var t=this._$P.cacheCanvas;t&&t.ctx&&(W.recover("RenderContext",t.ctx),t.ctx.canvas.size(0,0),t.ctx=null);var e=this._$P._filterCache;e&&(e.destroy(),e.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null;}},l._setDisplay=function(t){t||this._releaseMem(),e.prototype._setDisplay.call(this,t);},l.hitTestPoint=function(t,e){var n=this.globalToLocal(D.TEMP.setTo(t,e));t=n.x,e=n.y;return(this._$P.hitArea?this._$P.hitArea:this._width>0&&this._height>0?C.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(t,e);},l.getMousePoint=function(){return this.globalToLocal(D.TEMP.setTo(n.stage.mouseX,n.stage.mouseY));},l._getWords=function(){return null;},l._addChildsToLayout=function(t){var e=this._getWords();if(null==e&&0==this._childs.length)return!1;if(e)for(var n=0,i=e.length;n<i;n++){t.push(e[n]);}
return this._childs.forEach(function(e,n,i){e._style._enableLayout()&&e._addToLayout(t);}),!0;},l._addToLayout=function(t){this._style.absolute||(this._style.block?t.push(this):this._addChildsToLayout(t)&&(this.x=this.y=0));},l._isChar=function(){return!1;},l._getCSSStyle=function(){return this._style.getCSSStyle();},l._setAttributes=function(t,e){switch(t){case "x":this.x=parseFloat(e);break;case "y":this.y=parseFloat(e);break;case "width":this.width=parseFloat(e);break;case "height":this.height=parseFloat(e);break;default:this[t]=e;}},l._layoutLater=function(){this.parent&&this.parent._layoutLater();},a(0,l,"optimizeScrollRect",function(){return this._optimizeScrollRect;},function(t){this._optimizeScrollRect!=t&&(this._optimizeScrollRect=t,this.conchModel&&this.conchModel.optimizeScrollRect(t));}),a(0,l,"customRenderEnable",null,function(t){if(t&&(this._renderType|=1024,O.isConchNode)){s.CustomList.push(this);var e=new vt("2d");e._setContext(new CanvasRenderingContext2D()),this.customContext=new R(0,0,e),e.context.setCanvasType&&e.context.setCanvasType(2),this.conchModel.custom(e.context);}}),a(0,l,"cacheAsBitmap",function(){return "none"!==this.cacheAs;},function(t){this.cacheAs=t?this._$P.hasFilter?"none":"normal":"none";}),a(0,l,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type;},function(t){var e=this._$P.cacheCanvas;if(t!==(e?e.type:"none")){if("none"!==t)this._getBit(1)||this._setUpNoticeType(1),e||(e=this._set$P("cacheCanvas",W.getItemByClass("cacheCanvas",Object))),e.type=t,e.reCache=!0,this._renderType|=16,"bitmap"==t&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(e){var n=e;n&&n.ctx&&(W.recover("RenderContext",n.ctx),n.ctx.canvas.size(0,0),n.ctx=null),W.recover("cacheCanvas",e);}
this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0);}
this.repaint();}}),a(0,l,"zOrder",function(){return this._zOrder;},function(t){this._zOrder!=t&&(this._zOrder=t,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(t),this._parent&&(t&&this._parent._set$P("hasZorder",!0),n.timer.callLater(this._parent,this.updateZOrder)));}),a(0,l,"rotation",function(){return this._style._tf.rotate;},function(t){var e=this.getStyle();if(e._tf.rotate!==t){e.setRotate(t),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(t),this._renderType|=4;var n=this._parent;n&&0===n._repaint&&(n._repaint=1,n.parentRepaint());}}),a(0,l,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width;},function(t){this._width!==t&&(this._width=t,this.conchModel&&this.conchModel.size(t,this._height),this.repaint());}),a(0,l,"x",function(){return this._x;},function(t){if(this._x!==t){if(this.destroyed)return;this._x=t,this.conchModel&&this.conchModel.pos(t,this._y);var e=this._parent;e&&0===e._repaint&&(e._repaint=1,e.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint());}}),a(0,l,"globalScaleY",function(){for(var t=1,e=this;e&&e!==n.stage;){t*=e.scaleY,e=e.parent;}
return t;}),a(0,l,"hitArea",function(){return this._$P.hitArea;},function(t){this._set$P("hitArea",t);}),a(0,l,"staticCache",function(){return this._$P.staticCache;},function(t){this._set$P("staticCache",t),t||this.reCache();}),a(0,l,"texture",function(){return this._texture;},function(t){this._texture!=t&&(this._texture=t,this.graphics.cleanByTexture(t,0,0));}),a(0,l,"y",function(){return this._y;},function(t){if(this._y!==t){if(this.destroyed)return;this._y=t,this.conchModel&&this.conchModel.pos(this._x,t);var e=this._parent;e&&0===e._repaint&&(e._repaint=1,e.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint());}}),a(0,l,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height;},function(t){this._height!==t&&(this._height=t,this.conchModel&&this.conchModel.size(this._width,t),this.repaint());}),a(0,l,"blendMode",function(){return this._style.blendMode;},function(t){this.getStyle().blendMode=t,this.conchModel&&this.conchModel.blendMode(t),t&&"source-over"!=t?this._renderType|=8:this._renderType&=-9,this.parentRepaint();}),a(0,l,"scaleX",function(){return this._style._tf.scaleX;},function(t){var e=this.getStyle();if(e._tf.scaleX!==t){e.setScaleX(t),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(t,e._tf.scaleY),this._renderType|=4;var n=this._parent;n&&0===n._repaint&&(n._repaint=1,n.parentRepaint());}}),a(0,l,"scaleY",function(){return this._style._tf.scaleY;},function(t){var e=this.getStyle();if(e._tf.scaleY!==t){e.setScaleY(t),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(e._tf.scaleX,t),this._renderType|=4;var n=this._parent;n&&0===n._repaint&&(n._repaint=1,n.parentRepaint());}}),a(0,l,"stage",function(){return n.stage;}),a(0,l,"skewX",function(){return this._style._tf.skewX;},function(t){var e=this.getStyle();if(e._tf.skewX!==t){e.setSkewX(t),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(t,e._tf.skewY),this._renderType|=4;var n=this._parent;n&&0===n._repaint&&(n._repaint=1,n.parentRepaint());}}),a(0,l,"scrollRect",function(){return this._style.scrollRect;},function(t){this.getStyle().scrollRect=t,this.repaint(),t?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(t.x,t.y,t.width,t.height)):(this._renderType&=-129,this.conchModel&&(s.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)));}),a(0,l,"skewY",function(){return this._style._tf.skewY;},function(t){var e=this.getStyle();if(e._tf.skewY!==t){e.setSkewY(t),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(e._tf.skewX,t),this._renderType|=4;var n=this._parent;n&&0===n._repaint&&(n._repaint=1,n.parentRepaint());}}),a(0,l,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform;},function(t){this._tfChanged=!1,this._transform=t,t&&(this._x=t.tx,this._y=t.ty,t.tx=t.ty=0,this.conchModel&&this.conchModel.transform(t.a,t.b,t.c,t.d,this._x,this._y)),t?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint();}),a(0,l,"pivotX",function(){return this._style._tf.translateX;},function(t){this.getStyle().setTranslateX(t),this.conchModel&&this.conchModel.pivot(t,this._style._tf.translateY),this.repaint();}),a(0,l,"pivotY",function(){return this._style._tf.translateY;},function(t){this.getStyle().setTranslateY(t),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,t),this.repaint();}),a(0,l,"alpha",function(){return this._style.alpha;},function(t){this._style&&this._style.alpha!==t&&(t=t<0?0:t>1?1:t,this.getStyle().alpha=t,this.conchModel&&this.conchModel.alpha(t),1!==t?this._renderType|=2:this._renderType&=-3,this.parentRepaint());}),a(0,l,"visible",function(){return this._style.visible;},function(t){this._style&&this._style.visible!==t&&(this.getStyle().visible=t,this.conchModel&&this.conchModel.visible(t),this.parentRepaint());}),a(0,l,"graphics",function(){return this._graphics||(this.graphics=o.createGraphics());},function(t){this._graphics&&(this._graphics._sp=null),this._graphics=t,t?(this._renderType&=-2,this._renderType|=512,t._sp=this,this.conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(s.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint();}),a(0,l,"filters",function(){return this._$P.filters;},function(t){t&&0===t.length&&(t=null),this._$P.filters!=t&&(this._set$P("filters",t?t.slice():null),O.isConchApp&&(this.conchModel&&(s.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),O.isWebGL&&(t&&t.length?this._renderType|=32:this._renderType&=-33),t&&t.length>0?(this._getBit(1)||this._setUpNoticeType(1),O.isWebGL&&1==t.length&&t[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(O.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint());}),a(0,l,"parent",e.prototype._$get_parent,function(t){n.superSet(Q,this,"parent",t),t&&this._getBit(2)&&this._$2__onDisplay();}),a(0,l,"mask",function(){return this._$P._mask;},function(t){t&&this.mask&&this.mask._$P.maskParent||(t?(this.cacheAs="bitmap",this._set$P("_mask",t),t._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",t),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(t?t.conchModel:null),this._renderType|=64,this.parentRepaint());}),a(0,l,"mouseEnabled",function(){return this._mouseEnableState>1;},function(t){this._mouseEnableState=t?2:1;}),a(0,l,"globalScaleX",function(){for(var t=1,e=this;e&&e!==n.stage;){t*=e.scaleX,e=e.parent;}
return t;}),a(0,l,"mouseX",function(){return this.getMousePoint().x;}),a(0,l,"mouseY",function(){return this.getMousePoint().y;}),s.fromImage=function(t){return new s().loadImage(t);},s.CustomList=[],i(s,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=t.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):"";}]),s;}(Q),_t=function(t){function e(t){this._audio=null,this._onEnd=null,this._resumePlay=null,e.__super.call(this),this._onEnd=q.bind(this.__onEnd,this),this._resumePlay=q.bind(this.__resumePlay,this),t.addEventListener("ended",this._onEnd),this._audio=t;}
r(e,"laya.media.h5audio.AudioSoundChannel",nt);var i=e.prototype;return i.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(n.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");this.loops>0&&this.loops--,this.startTime=0,this.play();},i.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,N.container.appendChild(this._audio),this._audio.play();}catch(t){this.event("error");}},i.play=function(){this.isStopped=!1;try{this._audio.playbackRate=E.playbackRate,this._audio.currentTime=this.startTime;}catch(t){return void this._audio.addEventListener("canplay",this._resumePlay);}
E.addChannel(this),N.container.appendChild(this._audio),"play"in this._audio&&this._audio.play();},i.stop=function(){this.isStopped=!0,E.removeChannel(this),this.completeHandler=null,this._audio&&("pause"in this._audio&&O.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),N.onIE||this._audio!=et._musicAudio&&W.recover("audio:"+this.url,this._audio),N.removeElement(this._audio),this._audio=null);},i.pause=function(){this.isStopped=!0,E.removeChannel(this),"pause"in this._audio&&this._audio.pause();},i.resume=function(){this._audio&&(this.isStopped=!1,E.addChannel(this),"play"in this._audio&&this._audio.play());},a(0,i,"position",function(){return this._audio?this._audio.currentTime:0;}),a(0,i,"duration",function(){return this._audio?this._audio.duration:0;}),a(0,i,"volume",function(){return this._audio?this._audio.volume:1;},function(t){this._audio&&(this._audio.volume=t);}),e;}(),ft=function(t){function e(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=rt.ctx,e.__super.call(this),this._onPlayEnd=q.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode();}
r(e,"laya.media.webaudio.WebAudioSoundChannel",nt);var i=e.prototype;return i.play=function(){if(E.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var t=this.context,e=this.gain,n=t.createBufferSource();this.bufferSource=n,n.buffer=this.audioBuffer,n.connect(e),e&&e.disconnect(),e.connect(t.destination),n.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=N.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(n.loop=!0),n.playbackRate.setTargetAtTime?n.playbackRate.setTargetAtTime(E.playbackRate,this.context.currentTime,.1):n.playbackRate.value=E.playbackRate,n.start(0,this.startTime),this._currentTime=0;}},i.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(n.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");this.loops>0&&this.loops--,this.startTime=0,this.play();},i._clearBufferSource=function(){if(this.bufferSource){var t=this.bufferSource;t.stop?t.stop(0):t.noteOff(0),t.disconnect(0),t.onended=null,e._tryCleanFailed||this._tryClearBuffer(t),this.bufferSource=null;}},i._tryClearBuffer=function(t){if(N.onMac)try{t.buffer=rt._miniBuffer;}catch(t){e._tryCleanFailed=!0;}else try{t.buffer=null;}catch(t){e._tryCleanFailed=!0;}},i.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,E.removeChannel(this),this.completeHandler=null,E.autoReleaseSound&&n.timer.once(5e3,null,E.disposeSoundIfNotUsed,[this.url],!1);},i.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,E.removeChannel(this),E.autoReleaseSound&&n.timer.once(5e3,null,E.disposeSoundIfNotUsed,[this.url],!1);},i.resume=function(){this.startTime=this._pauseTime,this.play();},a(0,i,"position",function(){return this.bufferSource?(N.now()-this._startTime)/1e3+this.startTime:0;}),a(0,i,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0;}),a(0,i,"volume",function(){return this._volume;},function(t){this.isStopped||(this._volume=t,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(t,this.context.currentTime,.1):this.gain.gain.value=t);}),e._tryCleanFailed=!1,e;}(),dt=function(t){function e(){e.__super.call(this),this._w=0,this._h=0;}
r(e,"laya.resource.Bitmap",lt);var n=e.prototype;return a(0,n,"width",function(){return this._w;}),a(0,n,"height",function(){return this._h;}),a(0,n,"source",function(){return this._source;}),e;}(),pt=function(t){function e(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,e.__super.call(this),this._interval=s.animationInterval,this._setUpNoticeType(1);}
r(e,"laya.display.AnimationPlayerBase",t);var n=e.prototype;return n.play=function(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=!0),void 0===n&&(n=""),void 0===i&&(i=!0),this._isPlaying=!0,this.index="string"==typeof t?this._getFrameByLabel(t):t,this.loop=e,this._actionName=n,this._isReverse=1==this.wrapMode,this.interval>0&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0);},n._getFrameByLabel=function(t){var e=0;for(e=0;e<this._count;e++){if(this._labels[e]&&this._labels[e].indexOf(t)>=0)return e;}
return 0;},n._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=this._count>0?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete");}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=this._count-2>=0?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete");}
this.index=this._index;},n._setControlNode=function(t){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),this._controlNode=t,t&&t!=this&&(t.on("display",this,this._checkResumePlaying),t.on("undisplay",this,this._checkResumePlaying));},n._setDisplay=function(e){t.prototype._setDisplay.call(this,e),this._checkResumePlaying();},n._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop));},n.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop);},n.addLabel=function(t,e){this._labels||(this._labels={}),this._labels[e]||(this._labels[e]=[]),this._labels[e].push(t);},n.removeLabel=function(t){if(t){if(this._labels)for(var e in this._labels){this._removeLabelFromLabelList(this._labels[e],t);}}else this._labels=null;},n._removeLabelFromLabelList=function(t,e){if(t)for(var n=t.length-1;n>=0;n--){t[n]==e&&t.splice(n,1);}},n.gotoAndStop=function(t){this.index="string"==typeof t?this._getFrameByLabel(t):t,this.stop();},n._displayToIndex=function(t){},n.clear=function(){this.stop(),this._labels=null;},a(0,n,"interval",function(){return this._interval;},function(t){this._interval!=t&&(this._frameRateChanged=!0,this._interval=t,this._isPlaying&&t>0&&this.timerLoop(t,this,this._frameLoop,null,!0,!0));}),a(0,n,"isPlaying",function(){return this._isPlaying;}),a(0,n,"index",function(){return this._index;},function(t){if(this._index=t,this._displayToIndex(t),this._labels&&this._labels[t])for(var e=this._labels[t],n=0,i=e.length;n<i;n++){this.event("label",e[n]);}}),a(0,n,"count",function(){return this._count;}),e.WRAP_POSITIVE=0,e.WRAP_REVERSE=1,e.WRAP_PINGPONG=2,e;}(ct),mt=function(t){function e(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,e.__super.call(this),this.overflow=e.VISIBLE,this._style=new tt(this),this._style.wordWrap=!1;}
r(e,"laya.display.Text",t);var o=e.prototype;return o.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._lines=null,this._words&&(this._words.length=0,this._words=null);},o._getBoundPointsM=function(t){void 0===t&&(t=!1);var e=C.TEMP;return e.setTo(0,0,this.width,this.height),e._getBoundPoints();},o.getGraphicBounds=function(t){void 0===t&&(t=!1);var e=C.TEMP;return e.setTo(0,0,this.width,this.height),e;},o._getCSSStyle=function(){return this._style;},o.lang=function(t,n,i,r,a,o,s,l,u,h,c){if(t=e.langPacks&&e.langPacks[t]?e.langPacks[t]:t,arguments.length<2)this._text=t;else{for(var _=0,f=arguments.length;_<f;_++){t=t.replace("{"+_+"}",arguments[_+1]);}
this._text=t;}},o._isPassWordMode=function(){var t=this._style.password;return "Prompt"in this&&this.Prompt==this._text&&(t=!1),t;},o._getPassWordTxt=function(t){var e;e="";for(var n=t.length;n>0;n--){e+="●";}
return e;},o.renderText=function(t,e){var n=this.graphics;n.clear(!0);var i=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(N.onIPhone?laya.display.Text._fontFamilyMap[this.font]||this.font:this.font);N.context.font=i;var r=this.padding,a=r[3],o="left",s=this._lines,l=this.leading+this._charSize.height,u=this._currBitmapFont;u&&(l=this.leading+u.getMaxHeight());var h=r[0];if(!u&&this._width>0&&this._textWidth<=this._width&&("right"==this.align?(o="right",a=this._width-r[1]):"center"==this.align&&(o="center",a=.5*this._width+r[3]-r[1])),this._height>0){var c=this._textHeight>this._height?"top":this.valign;"middle"===c?h=.5*(this._height-e*l)+r[0]-r[2]:"bottom"===c&&(h=this._height-e*l-r[2]);}
var _=this._style;if(u&&u.autoScaleSize)var f=u.fontSize/this.fontSize;if(this._clipPoint)if(n.save(),u&&u.autoScaleSize){var d=0,p=0;d=this._width?this._width-r[3]-r[1]:this._textWidth,p=this._height?this._height-r[0]-r[2]:this._textHeight,d*=f,p*=f,n.clipRect(r[3],r[0],d,p);}else n.clipRect(r[3],r[0],this._width?this._width-r[3]-r[1]:this._textWidth,this._height?this._height-r[0]-r[2]:this._textHeight);var m=_.password;"Prompt"in this&&this.Prompt==this._text&&(m=!1);for(var g=0,y=0,v=Math.min(this._lines.length,e+t)||1,I=t;I<v;I++){var x,T=s[I];if(m){var S=T.length;T="";for(var b=S;b>0;b--){T+="●";}}
if(g=a-(this._clipPoint?this._clipPoint.x:0),y=h+l*I-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(o,g,y,I),u){var w=this.width;u.autoScaleSize&&(w=this.width*f),u.drawText(T,this,g,y,this.align,w);}else O.isWebGL?(this._words||(this._words=[]),(x=this._words.length>I-t?this._words[I-t]:new $()).setText(T)):x=T,_.stroke?n.fillBorderText(x,g,y,i,this.color,_.strokeColor,_.stroke,o):n.fillText(x,g,y,i,this.color,o);}
if(u&&u.autoScaleSize){var D=1/f;this.scale(D,D);}
this._clipPoint&&n.restore(),this._startX=a,this._startY=h;},o.drawUnderline=function(t,e,n,i){var r=this._lineWidths[i];switch(t){case "center":e-=r/2;break;case "right":e-=r;}
n+=this._charSize.height,this._graphics.drawLine(e,n,e+r,n,this.underlineColor||this.color,1);},o.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);N.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new D(0,0)):this._clipPoint=null;var t=this._lines.length;if(this.overflow!=e.VISIBLE){var n=this.overflow==e.HIDDEN?Math.floor:Math.ceil;t=Math.min(t,n((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)));}
var i=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(i,t),this.repaint();},o.evalTextSize=function(){var t=NaN,e=NaN;t=Math.max.apply(this,this._lineWidths),e=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],t==this._textWidth&&e==this._textHeight||(this._textWidth=t,this._textHeight=e,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight));},o.checkEnabledViewportOrNot=function(){return this.overflow==e.SCROLL&&(this._width>0&&this._textWidth>this._width||this._height>0&&this._textHeight>this._height);},o.changeText=function(t){this._text!==t&&(this.lang(t+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset());},o.parseLines=function(t){var n=this.wordWrap||this.overflow==e.HIDDEN;if(n)var i=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var r=N.context.measureText(e._testWord);this._charSize.width=r.width,this._charSize.height=r.height||this.fontSize;}
for(var a=t.replace(/\r\n/g,"\n").split("\n"),o=0,s=a.length;o<s;o++){var l=a[o];n?this.parseLine(l,i):(this._lineWidths.push(this.getTextWidth(l)),this._lines.push(l));}},o.parseLine=function(t,n){N.context;var i,r=this._lines,a=0,o=NaN,s=NaN,l=0;if((o=this.getTextWidth(t))<=n)return r.push(t),void this._lineWidths.push(o);o=this._charSize.width,0==(a=Math.floor(n/o))&&(a=1),s=o=this.getTextWidth(t.substring(0,a));for(var u=a,h=t.length;u<h;u++){if(o=this.getTextWidth(t.charAt(u)),(s+=o)>n)if(this.wordWrap){var c=t.substring(l,u);if(c.charCodeAt(c.length-1)<255?(i=/(?:\w|-)+$/.exec(c))&&(u=i.index+l,0==i.index?u+=c.length:c=t.substring(l,u)):e.RightToLeft&&(i=/([\u0600-\u06FF])+$/.exec(c))&&(u=i.index+l,0==i.index?u+=c.length:c=t.substring(l,u)),r.push(c),this._lineWidths.push(s-o),l=u,!(u+a<h)){r.push(t.substring(l,h)),this._lineWidths.push(this.getTextWidth(r[r.length-1])),l=-1;break;}
u+=a,s=o=this.getTextWidth(t.substring(l,u)),u--;}else if(this.overflow==e.HIDDEN)return r.push(t.substring(0,u)),void this._lineWidths.push(this.getTextWidth(r[r.length-1]));}
this.wordWrap&&-1!=l&&(r.push(t.substring(l,h)),this._lineWidths.push(this.getTextWidth(r[r.length-1])));},o.getTextWidth=function(t){return this._currBitmapFont?this._currBitmapFont.getTextWidth(t):N.context.measureText(t).width;},o.getWordWrapWidth=function(){var t=this.padding,e=NaN;return(e=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(e=this.wordWrap?100:N.width),e<=0&&(e=100),e-t[3]-t[1];},o.getCharPoint=function(t,e){this._isChanged&&n.timer.runCallLater(this,this.typeset);for(var i=0,r=this._lines,a=0,o=0,s=r.length;o<s;o++){if(i+=r[o].length,t<i){var l=o;break;}
a=i;}
var u=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;N.context.font=u;var h=this.getTextWidth(this._text.substring(a,t));return(e||new D()).setTo(this._startX+h-(this._clipPoint?this._clipPoint.x:0),this._startY+l*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0));},a(0,o,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3];},function(t){t!=this._width&&(n.superSet(ct,this,"width",t),this.isChanged=!0);}),a(0,o,"textWidth",function(){return this._isChanged&&n.timer.runCallLater(this,this.typeset),this._textWidth;}),a(0,o,"height",function(){return this._height?this._height:this.textHeight+this.padding[0]+this.padding[2];},function(t){t!=this._height&&(n.superSet(ct,this,"height",t),this.isChanged=!0);}),a(0,o,"textHeight",function(){return this._isChanged&&n.timer.runCallLater(this,this.typeset),this._textHeight;}),a(0,o,"padding",function(){return this._getCSSStyle().padding;},function(t){this._getCSSStyle().padding=t,this.isChanged=!0;}),a(0,o,"bold",function(){return this._getCSSStyle().bold;},function(t){this._getCSSStyle().bold=t,this.isChanged=!0;}),a(0,o,"text",function(){return this._text||"";},function(t){this._text!==t&&(this.lang(t+""),this.isChanged=!0,this.event("change"));}),a(0,o,"color",function(){return this._getCSSStyle().color;},function(t){this._getCSSStyle().color!=t&&(this._getCSSStyle().color=t,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0);}),a(0,o,"font",function(){return this._getCSSStyle().fontFamily;},function(t){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),e._bitmapFonts&&e._bitmapFonts[t]&&(this._currBitmapFont=e._bitmapFonts[t]),this._getCSSStyle().fontFamily=t,this.isChanged=!0;}),a(0,o,"fontSize",function(){return this._getCSSStyle().fontSize;},function(t){this._getCSSStyle().fontSize=t,this.isChanged=!0;}),a(0,o,"italic",function(){return this._getCSSStyle().italic;},function(t){this._getCSSStyle().italic=t,this.isChanged=!0;}),a(0,o,"align",function(){return this._getCSSStyle().align;},function(t){this._getCSSStyle().align=t,this.isChanged=!0;}),a(0,o,"valign",function(){return this._getCSSStyle().valign;},function(t){this._getCSSStyle().valign=t,this.isChanged=!0;}),a(0,o,"wordWrap",function(){return this._getCSSStyle().wordWrap;},function(t){this._getCSSStyle().wordWrap=t,this.isChanged=!0;}),a(0,o,"leading",function(){return this._getCSSStyle().leading;},function(t){this._getCSSStyle().leading=t,this.isChanged=!0;}),a(0,o,"bgColor",function(){return this._getCSSStyle().backgroundColor;},function(t){this._getCSSStyle().backgroundColor=t,this.isChanged=!0;}),a(0,o,"borderColor",function(){return this._getCSSStyle().borderColor;},function(t){this._getCSSStyle().borderColor=t,this.isChanged=!0;}),a(0,o,"stroke",function(){return this._getCSSStyle().stroke;},function(t){this._getCSSStyle().stroke=t,this.isChanged=!0;}),a(0,o,"strokeColor",function(){return this._getCSSStyle().strokeColor;},function(t){this._getCSSStyle().strokeColor=t,this.isChanged=!0;}),a(0,o,"isChanged",null,function(t){this._isChanged!==t&&(this._isChanged=t,t&&n.timer.callLater(this,this.typeset));}),a(0,o,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0;},function(t){if(!(this.overflow!=e.SCROLL||this.textWidth<this._width)&&this._clipPoint){t=t<this.padding[3]?this.padding[3]:t;var n=this._textWidth-this._width;t=t>n?n:t;var i=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=t,this.renderText(this._lastVisibleLineIndex,i);}}),a(0,o,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0;},function(t){if(!(this.overflow!=e.SCROLL||this.textHeight<this._height)&&this._clipPoint){t=t<this.padding[0]?this.padding[0]:t;var n=this._textHeight-this._height,i=(t=t>n?n:t)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=i;var r=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=t,this.renderText(i,r);}}),a(0,o,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width;}),a(0,o,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height;}),a(0,o,"lines",function(){return this._isChanged&&this.typeset(),this._lines;}),a(0,o,"underlineColor",function(){return this._underlineColor;},function(t){this._underlineColor=t,this._isChanged=!0,this.typeset();}),e.registerBitmapFont=function(t,n){e._bitmapFonts||(e._bitmapFonts={}),e._bitmapFonts[t]=n;},e.unregisterBitmapFont=function(t,n){if(void 0===n&&(n=!0),e._bitmapFonts&&e._bitmapFonts[t]){var i=e._bitmapFonts[t];n&&i.destroy(),delete e._bitmapFonts[t];}},e.setTextRightToLeft=function(){var t;(t=N.canvas.source.style).display="none",t.position="absolute",t.direction="rtl",O._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,N.document.body.appendChild(N.canvas.source);},e.supportFont=function(t){N.context.font="10px sans-serif";var e=N.context.measureText("abcji").width;N.context.font="10px "+t;var n=N.context.measureText("abcji").width;return console.log(e,n),e!==n;},e._testWord="游",e.langPacks=null,e.VISIBLE="visible",e.SCROLL="scroll",e.HIDDEN="hidden",e.CharacterCache=!0,e.RightToLeft=!1,e._bitmapFonts=null,i(e,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"};}]),e;}(ct),gt=function(t){function e(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",e.__super.call(this),this.offset=new D(),this._canvasTransform=new w(),this._previousOrientation=N.window.orientation;var t=this;this.transform=w.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var n=N.window,i=this;n.addEventListener("focus",function(){t._isFocused=!0,i.event("focus"),i.event("focuschange");}),n.addEventListener("blur",function(){t._isFocused=!1,i.event("blur"),i.event("focuschange"),i._isInputting()&&(xt.inputElement.target.focus=!1);});var r="visibilityState",a="visibilitychange",o=n.document;void 0!==o.hidden?(a="visibilitychange",r="visibilityState"):void 0!==o.mozHidden?(a="mozvisibilitychange",r="mozVisibilityState"):void 0!==o.msHidden?(a="msvisibilitychange",r="msVisibilityState"):void 0!==o.webkitHidden&&(a="webkitvisibilitychange",r="webkitVisibilityState"),n.document.addEventListener(a,function(){"hidden"==N.document[r]?i._setStageVisible(!1):i._setStageVisible(!0);}),n.document.addEventListener("qbrowserVisibilityChange",function(t){i._setStageVisible(!t.hidden);}),n.addEventListener("resize",function(){var e=N.window.orientation;null!=e&&e!=t._previousOrientation&&i._isInputting()&&(xt.inputElement.target.focus=!1),t._previousOrientation=e,i._isInputting()||i._resetCanvas();}),n.addEventListener("orientationchange",function(t){i._resetCanvas();}),this.on("mousemove",this,this._onmouseMove),N.onMobile&&this.on("mousedown",this,this._onmouseMove);}
r(e,"laya.display.Stage",t);var s=e.prototype;return s._setStageVisible=function(t){this._isVisibility!=t&&(this._isVisibility=t,this._isVisibility||this._isInputting()&&(xt.inputElement.target.focus=!1),this.event("visibilitychange"));},s._isInputting=function(){return N.onMobile&&xt.isInputting;},s._changeCanvasSize=function(){this.setScreenSize(N.clientWidth*N.pixelRatio,N.clientHeight*N.pixelRatio);},s._resetCanvas=function(){if(this.screenAdaptationEnabled){var t=O._mainCanvas;t.source.style;t.size(1,1),n.timer.once(100,this,this._changeCanvasSize);}},s.setScreenSize=function(t,e){var n=!1;if("none"!==this._screenMode){if(n=(t/e<1?"vertical":"horizontal")!==this._screenMode){var i=e;e=t,t=i;}}
this.canvasRotation=n;var r=O._mainCanvas,a=r.source.style,s=this._canvasTransform.identity(),l=this._scaleMode,u=t/this.designWidth,h=e/this.designHeight,c=this.designWidth,_=this.designHeight,f=t,d=e,p=N.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,l){case "noscale":u=h=1,f=this.designWidth,d=this.designHeight;break;case "showall":u=h=Math.min(u,h),c=f=Math.round(this.designWidth*u),_=d=Math.round(this.designHeight*h);break;case "noborder":u=h=Math.max(u,h),f=Math.round(this.designWidth*u),d=Math.round(this.designHeight*h);break;case "full":u=h=1,this._width=c=t,this._height=_=e;break;case "fixedwidth":h=u,this._height=_=Math.round(e/u);break;case "fixedheight":u=h,this._width=c=Math.round(t/h);break;case "fixedauto":t/e<this.designWidth/this.designHeight?(h=u,this._height=_=Math.round(e/u)):(u=h,this._width=c=Math.round(t/h));}
this.conchModel&&this.conchModel.size(this._width,this._height),u*=this.scaleX,h*=this.scaleY,1===u&&1===h?this.transform.identity():(this.transform.a=this._formatData(u/(f/c)),this.transform.d=this._formatData(h/(d/_)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),r.size(c,_),o.changeWebGLSize(c,_),s.scale(f/c/p,d/_/p),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(t-f)/p:this.offset.x=.5*(t-f)/p,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(e-d)/p:this.offset.y=.5*(e-d)/p,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),s.translate(this.offset.x,this.offset.y),this.canvasDegree=0,n&&("horizontal"===this._screenMode?(s.rotate(Math.PI/2),s.translate(e/p,0),this.canvasDegree=90):(s.rotate(-Math.PI/2),s.translate(0,t/p),this.canvasDegree=-90)),s.a=this._formatData(s.a),s.d=this._formatData(s.d),s.tx=this._formatData(s.tx),s.ty=this._formatData(s.ty),a.transformOrigin=a.webkitTransformOrigin=a.msTransformOrigin=a.mozTransformOrigin=a.oTransformOrigin="0px 0px 0px",a.transform=a.webkitTransform=a.msTransform=a.mozTransform=a.oTransform="matrix("+s.toString()+")",s.translate(parseInt(a.left)||0,parseInt(a.top)||0),this.visible=!0,this._repaint=1,this.event("resize");},s._formatData=function(t){return Math.abs(t)<1e-6?0:Math.abs(1-t)<.001?t>0?1:-1:t;},s.getMousePoint=function(){return D.TEMP.setTo(this.mouseX,this.mouseY);},s.repaint=function(){this._repaint=1;},s.parentRepaint=function(){},s._loop=function(){return this.render(O.context,0,0),!0;},s._onmouseMove=function(t){this._mouseMoveTime=N.now();},s.getTimeFromFrameStart=function(){return N.now()-this._frameStartTime;},s.render=function(e,i,r){if("sleep"===this._frameRate&&!O.isConchApp){var a=N.now();if(!(a-this._frameStartTime>=1e3))return;this._frameStartTime=a;}
if(this._renderCount++,O.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=N.now();var s="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),l=this._renderCount%2==0;if(K.renderSlow=!s,s||l||O.isConchApp){K.loopCount++,y.instance.runEvent(),n.timer._update(),o.update3DLoop();var u,h=0,c=0;if(O.isConchNode)for(h=0,c=this._scenes.length;h<c;h++){(u=this._scenes[h])&&u._updateSceneConch();}else for(h=0,c=this._scenes.length;h<c;h++){(u=this._scenes[h])&&u._updateScene();}
if(O.isConchNode){var _=ct.CustomList;for(h=0,c=_.length;h<c;h++){var f=_[h];f.customRender(f.customContext,0,0);}
return;}}
O.isConchNode||!this.renderingEnabled||!s&&l||(O.isWebGL?(e.clear(),t.prototype.render.call(this,e,i,r),K._show&&K._sp&&K._sp.render(e,i,r),o.clear(this._bgColor),o.beginFlush(),e.flush(),o.endFinish(),Z.instance&&Z.getInstance().endDispose()):(o.clear(this._bgColor),t.prototype.render.call(this,e,i,r),K._show&&K._sp&&K._sp.render(e,i,r)));}else this._renderCount%5==0&&(K.loopCount++,y.instance.runEvent(),n.timer._update());},s._requestFullscreen=function(){var t=N.document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen();},s._fullScreenChanged=function(){n.stage.event("fullscreenchange");},s.exitFullscreen=function(){var t=N.document;t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen();},a(0,s,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1;}),a(0,s,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight;}),a(0,s,"frameRate",function(){return this._frameRate;},function(t){if(this._frameRate=t,O.isConchApp)switch(this._frameRate){case "slow":N.window.conch&&N.window.conchConfig.setSlowFrame&&N.window.conchConfig.setSlowFrame(!0);break;case "fast":N.window.conch&&N.window.conchConfig.setSlowFrame&&N.window.conchConfig.setSlowFrame(!1);break;case "mouse":N.window.conch&&N.window.conchConfig.setMouseFrame&&N.window.conchConfig.setMouseFrame(2e3);break;case "sleep":N.window.conch&&N.window.conchConfig.setLimitFPS&&N.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.");}}),a(0,s,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1;}),a(0,s,"width",t.prototype._$get_width,function(t){this.designWidth=t,n.superSet(ct,this,"width",t),n.timer.callLater(this,this._changeCanvasSize);}),a(0,s,"alignH",function(){return this._alignH;},function(t){this._alignH=t,n.timer.callLater(this,this._changeCanvasSize);}),a(0,s,"isFocused",function(){return this._isFocused;}),a(0,s,"height",t.prototype._$get_height,function(t){this.designHeight=t,n.superSet(ct,this,"height",t),n.timer.callLater(this,this._changeCanvasSize);}),a(0,s,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||w.create();},t.prototype._$set_transform),a(0,s,"isVisibility",function(){return this._isVisibility;}),a(0,s,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth;}),a(0,s,"scaleMode",function(){return this._scaleMode;},function(t){this._scaleMode=t,n.timer.callLater(this,this._changeCanvasSize);}),a(0,s,"alignV",function(){return this._alignV;},function(t){this._alignV=t,n.timer.callLater(this,this._changeCanvasSize);}),a(0,s,"bgColor",function(){return this._bgColor;},function(t){this._bgColor=t,this.conchModel&&this.conchModel.bgColor(t),O.isWebGL&&(t?e._wgColor=k.create(t)._color:N.onMiniGame||(e._wgColor=null)),N.onLimixiu?e._wgColor=k.create(t)._color:O.canvas.style.background=t||"none";}),a(0,s,"mouseX",function(){return Math.round(y.instance.mouseX/this.clientScaleX);}),a(0,s,"mouseY",function(){return Math.round(y.instance.mouseY/this.clientScaleY);}),a(0,s,"screenMode",function(){return this._screenMode;},function(t){this._screenMode=t;}),a(0,s,"visible",t.prototype._$get_visible,function(t){if(this.visible!==t){n.superSet(ct,this,"visible",t);O._mainCanvas.source.style.visibility=t?"visible":"hidden";}}),a(0,s,"fullScreenEnabled",null,function(t){var e=N.document,n=O.canvas;t?(n.addEventListener("mousedown",this._requestFullscreen),n.addEventListener("touchstart",this._requestFullscreen),e.addEventListener("fullscreenchange",this._fullScreenChanged),e.addEventListener("mozfullscreenchange",this._fullScreenChanged),e.addEventListener("webkitfullscreenchange",this._fullScreenChanged),e.addEventListener("msfullscreenchange",this._fullScreenChanged)):(n.removeEventListener("mousedown",this._requestFullscreen),n.removeEventListener("touchstart",this._requestFullscreen),e.removeEventListener("fullscreenchange",this._fullScreenChanged),e.removeEventListener("mozfullscreenchange",this._fullScreenChanged),e.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),e.removeEventListener("msfullscreenchange",this._fullScreenChanged));}),e.SCALE_NOSCALE="noscale",e.SCALE_EXACTFIT="exactfit",e.SCALE_SHOWALL="showall",e.SCALE_NOBORDER="noborder",e.SCALE_FULL="full",e.SCALE_FIXED_WIDTH="fixedwidth",e.SCALE_FIXED_HEIGHT="fixedheight",e.SCALE_FIXED_AUTO="fixedauto",e.ALIGN_LEFT="left",e.ALIGN_RIGHT="right",e.ALIGN_CENTER="center",e.ALIGN_TOP="top",e.ALIGN_MIDDLE="middle",e.ALIGN_BOTTOM="bottom",e.SCREEN_NONE="none",e.SCREEN_HORIZONTAL="horizontal",e.SCREEN_VERTICAL="vertical",e.FRAME_FAST="fast",e.FRAME_SLOW="slow",e.FRAME_MOUSE="mouse",e.FRAME_SLEEP="sleep",e.FRAME_MOUSE_THREDHOLD=2e3,i(e,["_wgColor",function(){return this._wgColor=[0,0,0,1];}]),e;}(ct),yt=(function(t){function e(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,e.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange);}
r(e,"laya.media.SoundNode",ct);var n=e.prototype;n._onParentChange=function(){this.target=this.parent;},n.play=function(t,e){void 0===t&&(t=1),isNaN(t)&&(t=1),this.url&&(this.stop(),this._channel=E.playSound(this.url,t,e));},n.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null;},n._setPlayAction=function(t,e,n,i){void 0===i&&(i=!0),this[n]&&t&&(i?t.on(e,this,this[n]):t.off(e,this,this[n]));},n._setPlayActions=function(t,e,n,i){if(void 0===i&&(i=!0),t&&e){var r=e.split(","),a=0,o=0;for(o=r.length,a=0;a<o;a++){this._setPlayAction(t,r[a],n,i);}}},a(0,n,"playEvent",null,function(t){this._playEvents=t,t&&this._tar&&this._setPlayActions(this._tar,t,"play");}),a(0,n,"target",null,function(t){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=t,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0));}),a(0,n,"stopEvent",null,function(t){this._stopEvents=t,t&&this._tar&&this._setPlayActions(this._tar,t,"stop");});}(),function(t){function e(){this._src=null,this._onload=null,this._onerror=null,e.__super.call(this);}
r(e,"laya.resource.FileBitmap",dt);var n=e.prototype;return a(0,n,"src",function(){return this._src;},function(t){this._src=t;}),a(0,n,"onload",null,function(t){}),a(0,n,"onerror",null,function(t){}),e;}()),vt=function(t){function e(t,n){this._is2D=!1,e.__super.call(this);var i=this;if(this._source=this,"2D"===t||"AUTO"===t&&!O.isWebGL){this._is2D=!0,this._source=n||N.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var r=this;r.getContext=function(t,e){if(i._ctx)return i._ctx;var n=i._ctx=i._source.getContext(t,e);return n&&(n._canvas=r,O.isFlash||N.onLimixiu||(n.size=function(t,e){})),n;};}
this.lock=!0;}
r(e,"laya.resource.HTMLCanvas",dt);var n=e.prototype;return n.clear=function(){this._ctx&&this._ctx.clear();},n.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this);},n.release=function(){},n._setContext=function(t){this._ctx=t;},n.getContext=function(t,n){return this._ctx?this._ctx:this._ctx=e._createContext(this);},n.getMemSize=function(){return 0;},n.size=function(t,e){(this._w!=t||this._h!=e||this._source&&(this._source.width!=t||this._source.height!=e))&&(this._w=t,this._h=e,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(t,e),this._source&&(this._source.height=e,this._source.width=t));},n.getCanvas=function(){return this._source;},n.toBase64=function(t,e,n){if(this._source)if(O.isConchApp&&this._source.toBase64)this._source.toBase64(t,e,n);else{var i=this._source.toDataURL(t,e);n.call(this,i);}},a(0,n,"context",function(){return this._ctx;}),a(0,n,"asBitmap",null,function(t){}),e.create=function(t,n){return new e(t,n);},e.TYPE2D="2D",e.TYPE3D="3D",e.TYPEAUTO="AUTO",e._createContext=null,e;}(),It=(function(t){function e(t,n,i,r,a,o,s,l){throw e.__super.call(this),new Error("不允许new！");}
r(e,"laya.resource.HTMLSubImage",dt),e.create=function(t,n,i,r,a,o,s,l){return void 0===l&&(l=!1),new e(t,n,i,r,a,o,s,l);};}(),function(t){function e(){this._frames=null,this._url=null,e.__super.call(this),this._setControlNode(this);}
r(e,"laya.display.Animation",t);var i=e.prototype;i.destroy=function(t){void 0===t&&(t=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,t),this._frames=null,this._labels=null;},i.play=function(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=!0),void 0===n&&(n=""),void 0===i&&(i=!0),n&&this._setFramesFromCache(n,i),this._isPlaying=!0,this.index="string"==typeof t?this._getFrameByLabel(t):t,this.loop=e,this._actionName=n,this._isReverse=1==this.wrapMode,this._frames&&this.interval>0&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0);},i._setFramesFromCache=function(t,n){if(void 0===n&&(n=!1),this._url&&(t=this._url+"#"+t),t&&e.framesMap[t]){var i;return(i=e.framesMap[t])instanceof Array?(this._frames=e.framesMap[t],this._count=this._frames.length):(i.nodeRoot&&(e.framesMap[t]=this._parseGraphicAnimationByData(i),i=e.framesMap[t]),this._frames=i.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=i.interval),this._labels=this._copyLabels(i.labels)),!0;}
return n&&console.log("ani not found:",t),!1;},i._copyLabels=function(t){if(!t)return null;var e;e={};var n;for(n in t){e[n]=q.copyArray([],t[n]);}
return e;},i._frameLoop=function(){this._style.visible&&this._style.alpha>.01&&t.prototype._frameLoop.call(this);},i._displayToIndex=function(t){this._frames&&(this.graphics=this._frames[t]);},i.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null;},i.loadImages=function(t,n){return void 0===n&&(n=""),this._url="",this._setFramesFromCache(n)||(this.frames=e.framesMap[n]?e.framesMap[n]:e.createFrames(t,n)),this;},i.loadAtlas=function(t,i,r){function a(n){t===n&&(o.frames=e.framesMap[r]?e.framesMap[r]:e.createFrames(t,r),i&&i.run());}
void 0===r&&(r=""),this._url="";var o=this;return o._setFramesFromCache(r)||(ot.getAtlas(t)?a(t):n.loader.load(t,u.create(null,a,[t]),null,"atlas")),this;},i.loadAnimation=function(t,e,i){this._url=t;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,e&&e.run()):!i||ot.getAtlas(i)?this._loadAnimationData(t,e,i):n.loader.load(i,u.create(this,this._loadAnimationData,[t,e,i]),null,"atlas"),this;},i._loadAnimationData=function(t,i,r){function a(n){if(ot.getRes(n)&&t===n){var r;if(e.framesMap[t+"#"])s._setFramesFromCache(o._actionName,!0),o.index=0,o._checkResumePlaying();else{var a=s._parseGraphicAnimation(ot.getRes(t));if(!a)return;var l,u=a.animationList,h=0,c=u.length;for(h=0;h<c;h++){r=u[h],e.framesMap[t+"#"+r.name]=r,l||(l=r);}
l&&(e.framesMap[t+"#"]=l,s._setFramesFromCache(o._actionName,!0),o.index=0),o._checkResumePlaying();}
i&&i.run();}}
var o=this;if(!r||ot.getAtlas(r)){var s=this;ot.getRes(t)?a(t):n.loader.load(t,u.create(null,a,[t]),null,"json"),ot.clearRes(t);}else console.warn("atlas load fail:"+r);},i._parseGraphicAnimation=function(t){return St.parseAnimationData(t);},i._parseGraphicAnimationByData=function(t){return St.parseAnimationByData(t);},a(0,i,"frames",function(){return this._frames;},function(t){this._frames=t,t&&(this._count=t.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index);}),a(0,i,"autoPlay",null,function(t){t?this.play():this.stop();}),a(0,i,"source",null,function(t){t.indexOf(".ani")>-1?this.loadAnimation(t):t.indexOf(".json")>-1||t.indexOf("als")>-1||t.indexOf("atlas")>-1?this.loadAtlas(t):this.loadImages(t.split(","));}),a(0,i,"autoAnimation",null,function(t){this.play(0,!0,t,!1);}),e.createFrames=function(t,n){var i,r,a=0,s=0;if("string"==typeof t){var l=ot.getAtlas(t);if(l&&l.length)for(i=[],a=0,s=l.length;a<s;a++){(r=new o.createGraphics()).drawTexture(ot.getRes(l[a]),0,0),i.push(r);}}else if(t instanceof Array)for(i=[],a=0,s=t.length;a<s;a++){(r=new o.createGraphics()).loadImage(t[a],0,0),i.push(r);}
return n&&(e.framesMap[n]=i),i;},e.clearCache=function(t){var n,i=e.framesMap,r=t+"#";for(n in i){n!==t&&0!=n.indexOf(r)||delete e.framesMap[n];}},e.framesMap={};}(pt),function(t){function e(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,e.__super.call(this),null==e._sortIndexFun&&(e._sortIndexFun=b.sortByKey("index",!1,!0));}
r(e,"laya.display.FrameAnimation",t);var n=e.prototype;return n._setUp=function(t,e){this._labels=null,this._animationNewFrames=null,this._targetDic=t,this._animationData=e,this.interval=1e3/e.frameRate,e.parsed?(this._count=e.count,this._labels=e.labels,this._animationNewFrames=e.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),e.parsed=!0,e.labels=this._labels,e.count=this._count,e.animationNewFrames=this._animationNewFrames;},n.clear=function(){t.prototype.clear.call(this),this._targetDic=null,this._animationData=null;},n._displayToIndex=function(t){if(this._animationData){t<0&&(t=0),t>this._count&&(t=this._count);var e=this._animationData.nodes,n=0,i=e.length;for(n=0;n<i;n++){this._displayNodeToFrame(e[n],t);}}},n._displayNodeToFrame=function(t,e,n){n||(n=this._targetDic);var i=n[t.target];if(i){var r,a,o,s=t.frames,l=t.keys,u=0,h=l.length;for(u=0;u<h;u++){o=(a=s[r=l[u]]).length>e?a[e]:a[a.length-1],i[r]=o;}}},n._calculateDatas=function(){if(this._animationData){var t,e=this._animationData.nodes,n=0,i=e.length;for(this._count=0,n=0;n<i;n++){t=e[n],this._calculateNodeKeyFrames(t);}
this._count+=1;}},n._calculateNodeKeyFrames=function(t){var n,i,r=t.keyframes,a=t.target;t.frames||(t.frames={}),t.keys?t.keys.length=0:t.keys=[],t.initValues||(t.initValues={});for(n in r){i=r[n],t.frames[n]||(t.frames[n]=[]),this._targetDic&&this._targetDic[a]&&(t.initValues[n]=this._targetDic[a][n]),i.sort(e._sortIndexFun),t.keys.push(n),this._calculateNodePropFrames(i,t.frames[n],n,a);}},n.resetToInitState=function(){if(this._targetDic&&this._animationData){var t,e,n=this._animationData.nodes,i=0,r=n.length;for(i=0;i<r;i++){if(t=n[i],e=t.initValues){var a=this._targetDic[t.target];if(a){var o;for(o in e){a[o]=e[o];}}}}}},n._calculateNodePropFrames=function(t,e,n,i){var r=0,a=t.length-1;for(e.length=t[a].index+1,r=0;r<a;r++){this._dealKeyFrame(t[r]),this._calculateFrameValues(t[r],t[r+1],e);}
0==a&&(e[0]=t[0].value,this._animationNewFrames&&(this._animationNewFrames[t[0].index]=!0)),this._dealKeyFrame(t[r]);},n._dealKeyFrame=function(t){t.label&&""!=t.label&&this.addLabel(t.label,t.index);},n._calculateFrameValues=function(t,e,n){var i,r=0,a=t.index,o=e.index,s=t.value,l=e.value-t.value,u=o-a;if(o>this._count&&(this._count=o),t.tween)for(null==(i=z[t.tweenMethod])&&(i=z.linearNone),r=a;r<o;r++){n[r]=i(r-a,s,l,u),this._animationNewFrames&&(this._animationNewFrames[r]=!0);}else for(r=a;r<o;r++){n[r]=s;}
this._animationNewFrames&&(this._animationNewFrames[t.index]=!0,this._animationNewFrames[e.index]=!0),n[e.index]=e.value;},e._sortIndexFun=null,e;}(pt)),xt=function(t){function e(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",e.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=mt.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay);}
r(e,"laya.display.Input",t);var o=e.prototype;return o.setSelection=function(t,e){this.focus=!0,laya.display.Input.inputElement.selectionStart=t,laya.display.Input.inputElement.selectionEnd=e;},o._onUnDisplay=function(t){this.focus=!1;},o._onMouseDown=function(t){this.focus=!0;},o._syncInputTransform=function(){var t=this.nativeInput,i=q.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),r=this._width-this.padding[1]-this.padding[3],a=this._height-this.padding[0]-this.padding[2];O.isConchApp?(t.setScale(i.scaleX,i.scaleY),t.setSize(r,a),t.setPos(i.x,i.y)):(e.inputContainer.style.transform=e.inputContainer.style.webkitTransform="scale("+i.scaleX+","+i.scaleY+") rotate("+n.stage.canvasDegree+"deg)",t.style.width=r+"px",t.style.height=a+"px",e.inputContainer.style.left=i.x+"px",e.inputContainer.style.top=i.y+"px");},o.select=function(){this.nativeInput.select();},o._setInputMethod=function(){e.input.parentElement&&e.inputContainer.removeChild(e.input),e.area.parentElement&&e.inputContainer.removeChild(e.area),e.inputElement=this._multiline?e.area:e.input,e.inputContainer.appendChild(e.inputElement),mt.RightToLeft&&(e.inputElement.style.direction="rtl");},o._focusIn=function(){laya.display.Input.isInputting=!0;var t=this.nativeInput;this._focus=!0;var e=t.style;e.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),t.readOnly=!this._editable,O.isConchApp&&(t.setType(this._type),t.setForbidEdit(!this._editable)),t.maxLength=this._maxChars;this.padding;if(t.type=this._type,t.value=this._content,t.placeholder=this._prompt,n.stage.off("keydown",this,this._onKeyDown),n.stage.on("keydown",this,this._onKeyDown),n.stage.focus=this,this.event("focus"),N.onPC&&t.focus(),!N.onMiniGame){this._text;this._text=null;}
this.typeset(),t.setColor(this._originColor),t.setFontSize(this.fontSize),t.setFontFace(N.onIPhone?mt._fontFamilyMap[this.font]||this.font:this.font),O.isConchApp&&t.setMultiAble&&t.setMultiAble(this._multiline),e.lineHeight=this.leading+this.fontSize+"px",e.fontStyle=this.italic?"italic":"normal",e.fontWeight=this.bold?"bold":"normal",e.textAlign=this.align,e.padding="0 0",this._syncInputTransform(),!O.isConchApp&&N.onPC&&n.timer.frameLoop(1,this,this._syncInputTransform);},o._setPromptColor=function(){(e.promptStyleDOM=N.getElementById("promptStyle"))||((e.promptStyleDOM=N.createElement("style")).setAttribute("id","promptStyle"),N.document.head.appendChild(e.promptStyleDOM)),e.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}";},o._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(n.superSet(mt,this,"text",this._content),n.superSet(mt,this,"color",this._originColor)):(n.superSet(mt,this,"text",this._prompt),n.superSet(mt,this,"color",this._promptColor)),n.stage.off("keydown",this,this._onKeyDown),n.stage.focus=null,this.event("blur"),O.isConchApp&&this.nativeInput.blur(),N.onPC&&n.timer.clear(this,this._syncInputTransform);},o._onKeyDown=function(t){13===t.keyCode&&(N.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"));},o.changeText=function(e){this._content=e,this._focus?(this.nativeInput.value=e||"",this.event("change")):t.prototype.changeText.call(this,e);},a(0,o,"color",t.prototype._$get_color,function(t){this._focus&&this.nativeInput.setColor(t),n.superSet(mt,this,"color",this._content?t:this._promptColor),this._originColor=t;}),a(0,o,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0;},function(t){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。");}),a(0,o,"multiline",function(){return this._multiline;},function(t){this._multiline=t,this.valign=t?"top":"middle";}),a(0,o,"maxChars",function(){return this._maxChars;},function(t){t<=0&&(t=1e5),this._maxChars=t;}),a(0,o,"text",function(){return this._focus?this.nativeInput.value:this._content||"";},function(t){n.superSet(mt,this,"color",this._originColor),t+="",this._focus?(this.nativeInput.value=t||"",this.event("change")):(this._multiline||(t=t.replace(/\r?\n/g,"")),this._content=t,t?n.superSet(mt,this,"text",t):(n.superSet(mt,this,"text",this._prompt),n.superSet(mt,this,"color",this.promptColor)));}),a(0,o,"nativeInput",function(){return this._multiline?e.area:e.input;}),a(0,o,"Prompt",function(){return this._prompt;},function(t){!this._text&&t&&n.superSet(mt,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?n.superSet(mt,this,"text",this._text==this._prompt?t:this._text):n.superSet(mt,this,"text",t),this._prompt=mt.langPacks&&mt.langPacks[t]?mt.langPacks[t]:t;}),a(0,o,"focus",function(){return this._focus;},function(t){var n=this.nativeInput;this._focus!==t&&(t?(n.target?n.target._focusOut():this._setInputMethod(),n.target=this,this._focusIn()):(n.target=null,this._focusOut(),N.document.body.scrollTop=0,n.blur(),O.isConchApp?n.setPos(-1e4,-1e4):e.inputContainer.contains(n)&&e.inputContainer.removeChild(n)));}),a(0,o,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:"";},function(t){t?((t="[^"+t+"]").indexOf("^^")>-1&&(t=t.replace("^^","")),this._restrictPattern=new RegExp(t,"g")):this._restrictPattern=null;}),a(0,o,"editable",function(){return this._editable;},function(t){this._editable=t,O.isConchApp&&e.input.setForbidEdit(!t);}),a(0,o,"promptColor",function(){return this._promptColor;},function(t){this._promptColor=t,this._content||n.superSet(mt,this,"color",t);}),a(0,o,"type",function(){return this._type;},function(t){this._getCSSStyle().password="password"==t,this._type=t,O.isConchApp&&this.nativeInput.setType(t);}),a(0,o,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0;},function(t){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。");}),a(0,o,"asPassword",function(){return this._getCSSStyle().password;},function(t){this._getCSSStyle().password=t,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0;}),e.__init__=function(){e._createInputElement(),N.onMobile&&O.canvas.addEventListener(e.IOS_IFRAME?N.onMiniGame?"touchend":"click":"touchend",e._popupInputMethod);},e._popupInputMethod=function(t){if(laya.display.Input.isInputting){laya.display.Input.inputElement.focus();}},e._createInputElement=function(){e._initInput(e.area=N.createElement("textarea")),e._initInput(e.input=N.createElement("input")),(e.inputContainer=N.createElement("div")).style.position="absolute",e.inputContainer.style.zIndex=1e5,N.container.appendChild(e.inputContainer),e.inputContainer.setPos=function(t,n){e.inputContainer.style.left=t+"px",e.inputContainer.style.top=n+"px";};},e._initInput=function(t){var n=t.style;n.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",n.resize="none",n.backgroundColor="transparent",n.border="none",n.outline="none",n.zIndex=1,t.addEventListener("input",e._processInputting),t.addEventListener("mousemove",e._stopEvent),t.addEventListener("mousedown",e._stopEvent),t.addEventListener("touchmove",e._stopEvent),t.setFontFace=function(e){t.style.fontFamily=e;},O.isConchApp||(t.setColor=function(e){t.style.color=e;},t.setFontSize=function(e){t.style.fontSize=e+"px";});},e._processInputting=function(t){var e=laya.display.Input.inputElement.target;if(e){var n=laya.display.Input.inputElement.value;e._restrictPattern&&(n=n.replace(/\u2006|\x27/g,""),e._restrictPattern.test(n)&&(n=n.replace(e._restrictPattern,""),laya.display.Input.inputElement.value=n)),e._text=n,e.event("input");}},e._stopEvent=function(t){"touchmove"==t.type&&t.preventDefault(),t.stopPropagation&&t.stopPropagation();},e.TYPE_TEXT="text",e.TYPE_PASSWORD="password",e.TYPE_EMAIL="email",e.TYPE_URL="url",e.TYPE_NUMBER="number",e.TYPE_RANGE="range",e.TYPE_DATE="date",e.TYPE_MONTH="month",e.TYPE_WEEK="week",e.TYPE_TIME="time",e.TYPE_DATE_TIME="datetime",e.TYPE_DATE_TIME_LOCAL="datetime-local",e.TYPE_SEARCH="search",e.input=null,e.area=null,e.inputElement=null,e.inputContainer=null,e.confirmButton=null,e.promptStyleDOM=null,e.inputHeight=45,e.isInputting=!1,e.stageMatrix=null,i(e,["IOS_IFRAME",function(){return this.IOS_IFRAME=N.onIOS&&N.window.top!=N.window.self;}]),e;}(mt),Tt=function(t){function e(t,n){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,e.__super.call(this),this._init_(t,n);}
r(e,"laya.resource.HTMLImage",yt);var n=e.prototype;return n._init_=function(t,e){this._src=t,this._source=new N.window.Image(),e&&(e.onload&&(this.onload=e.onload),e.onerror&&(this.onerror=e.onerror),e.onCreate&&e.onCreate(this)),0!=t.indexOf("data:image")&&(this._source.crossOrigin=""),t&&(this._source.src=t);},n.recreateResource=function(){var t=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate();}else{this._recreateLock=!0;var e=this;this._source=new N.window.Image(),this._source.crossOrigin="",this._source.onload=function(){if(e._needReleaseAgain)return e._needReleaseAgain=!1,e._source.onload=null,void(e._source=null);e._source.onload=null,e.memorySize=t._w*t._h*4,e._recreateLock=!1,e.completeCreate();},this._source.src=this._src;}},n.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0);},n.onresize=function(){this._w=this._source.width,this._h=this._source.height;},a(0,n,"onload",null,function(t){var e=this;this._onload=t,this._source&&(this._source.onload=null!=this._onload?function(){e.onresize(),e._onload();}:null);}),a(0,n,"onerror",null,function(t){var e=this;this._onerror=t,this._source&&(this._source.onerror=null!=this._onerror?function(){e._onerror();}:null);}),a(0,n,"enableMerageInAtlas",function(){return this._enableMerageInAtlas;},function(t){this._enableMerageInAtlas=t,O.isConchApp&&this._source&&(this._source.enableMerageInAtlas=t);}),e.create=function(t,n){return new e(t,n);},e;}(),St=(function(t){function e(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,e.__super.call(this);}
r(e,"laya.display.EffectAnimation",t);var n=e.prototype;n._onOtherBegin=function(t){t!=this&&this.stop();},n.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction));},n._onPlayAction=function(){this.play(0,!1);},n.play=function(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=!0),void 0===n&&(n=""),void 0===i&&(i=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,t,e,n,i));},n._recordInitData=function(){if(this._aniKeys){var t=0,e=0;e=this._aniKeys.length;var n;for(t=0;t<e;t++){n=this._aniKeys[t],this._initData[n]=this._target[n];}}},n._displayToIndex=function(t){if(this._animationData){t<0&&(t=0),t>this._count&&(t=this._count);var e=this._animationData.nodes,n=0,i=e.length;for(i=i>1?1:i,n=0;n<i;n++){this._displayNodeToFrame(e[n],t);}}},n._displayNodeToFrame=function(t,e,n){if(this._target){var i;i=this._target;var r,a,o,s,l=t.frames,u=t.keys,h=0,c=u.length;s=t.secondFrames;var _,f,d,p,m=0;for(h=0;h<c;h++){a=l[r=u[h]],-1==(m=s[r])?o=this._initData[r]:e<m?(d=(f=t.keyframes[r])[0]).tween?(null==(_=z[d.tweenMethod])&&(_=z.linearNone),p=f[1],o=_(e,this._initData[r],p.value-this._initData[r],p.index)):o=this._initData[r]:o=a.length>e?a[e]:a[a.length-1],i[r]=o;}}},n._calculateNodeKeyFrames=function(e){t.prototype._calculateNodeKeyFrames.call(this,e);var n,i,r,a=e.keyframes;e.target;r={},e.secondFrames=r;for(n in a){(i=a[n]).length<=1?r[n]=-1:r[n]=i[1].index;}},a(0,n,"target",function(){return this._target;},function(t){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=t,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent();}),a(0,n,"playEvent",null,function(t){this._playEvents=t,t&&this.addEvent();}),a(0,n,"effectData",null,function(t){if(t){var e;(e=t.animations)&&e[0]&&(this._setUp({},e[0]),e[0].nodes&&e[0].nodes[0]&&(this._aniKeys=e[0].nodes[0].keys));}}),a(0,n,"effectClass",null,function(t){if(this._effectClass=B.getClass(t),this._effectClass){var e;if(e=this._effectClass.uiView){var n;(n=e.animations)&&n[0]&&(this._setUp({},n[0]),n[0].nodes&&n[0].nodes[0]&&(this._aniKeys=n[0].nodes[0].keys));}}}),e.EffectAnimationBegin="effectanimationbegin";}(It),function(t){function e(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,e.__super.call(this);}
var n;r(e,"laya.utils.GraphicAnimation",t);var a=e.prototype;return a._parseNodeList=function(t){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[t.compId]=t.props,t.compId&&this._nodeList.push(t.compId);var e=t.child;if(e){var n=0,i=e.length;for(n=0;n<i;n++){this._parseNodeList(e[n]);}}},a._calGraphicData=function(t){if(this._setUp(null,t),this._createGraphicData(),this._nodeIDAniDic){var e;for(e in this._nodeIDAniDic){this._nodeIDAniDic[e]=null;}}},a._createGraphicData=function(){var t=[],e=0,n=this.count,i=this._animationNewFrames;i||(i=[]);var r;for(e=0;e<n;e++){!i[e]&&r||(r=this._createFrameGraphic(e)),t.push(r);}
this._gList=t;},a._createFrameGraphic=function(t){var n=o.createGraphics();return e._rootMatrix||(e._rootMatrix=new w()),this._updateNodeGraphic(this._rootNode,t,e._rootMatrix,n),n;},a._updateNodeGraphic=function(t,e,n,i,r){void 0===r&&(r=1);var a,o=(a=this._nodeGDic[t.compId]=this._getNodeGraphicData(t.compId,e,this._nodeGDic[t.compId])).alpha*r;if(!(o<.01)){a.resultTransform||(a.resultTransform=w.create());var s;s=a.resultTransform,w.mul(a.transform,n,s);var l;a.skin&&(l=this._getTextureByUrl(a.skin))&&(s._checkTransform()?(i.drawTexture(l,0,0,a.width,a.height,s,o),a.resultTransform=null):i.drawTexture(l,s.tx,s.ty,a.width,a.height,null,o));var u;if(u=t.child){var h=0,c=0;for(c=u.length,h=0;h<c;h++){this._updateNodeGraphic(u[h],e,s,i,o);}}}},a._updateNoChilds=function(t,e){if(t.skin){var n=this._getTextureByUrl(t.skin);if(n){var i=t.transform;i._checkTransform();!i.bTransform?e.drawTexture(n,i.tx,i.ty,t.width,t.height,null,t.alpha):e.drawTexture(n,0,0,t.width,t.height,i.clone(),t.alpha);}}},a._updateNodeGraphic2=function(t,e,n){var i;if(i=this._nodeGDic[t.compId]=this._getNodeGraphicData(t.compId,e,this._nodeGDic[t.compId]),t.child){var r=i.transform;r._checkTransform();var a=!1,o=!1;o=(a=!r.bTransform)&&(0!=r.tx||0!=r.ty);var s=!1;(s=r.bTransform||1!=i.alpha)&&n.save(),1!=i.alpha&&n.alpha(i.alpha),a?o&&n.translate(r.tx,r.ty):n.transform(r.clone());var l;l=t.child;var u;if(i.skin&&(u=this._getTextureByUrl(i.skin))&&n.drawTexture(u,0,0,i.width,i.height),l){var h=0,c=0;for(c=l.length,h=0;h<c;h++){this._updateNodeGraphic2(l[h],e,n);}}
s?n.restore():a?o&&n.translate(-r.tx,-r.ty):n.transform(r.clone().invert());}else this._updateNoChilds(i,n);},a._calculateNodeKeyFrames=function(e){t.prototype._calculateNodeKeyFrames.call(this,e),this._nodeIDAniDic[e.target]=e;},a.getNodeDataByID=function(t){return this._nodeIDAniDic[t];},a._getParams=function(t,n,i,r){var a=e._temParam;a.length=n.length;var o=0,s=n.length;for(o=0;o<s;o++){a[o]=this._getObjVar(t,n[o][0],i,n[o][1],r);}
return a;},a._getObjVar=function(t,e,n,i,r){if(t.hasOwnProperty(e)){var a=t[e];return n>=a.length&&(n=a.length-1),t[e][n];}
return r.hasOwnProperty(e)?r[e]:i;},a._getNodeGraphicData=function(t,i,r){r||(r=n.create()),r.transform?r.transform.identity():r.transform=w.create();var a=this.getNodeDataByID(t);if(!a)return r;var o=a.frames,s=this._getParams(o,e._drawTextureCmd,i,this._nodeDefaultProps[t]),l=s[0],u=NaN,h=NaN,c=s[5],_=s[6],f=s[13],d=s[14],p=s[7],m=s[8],g=s[9],y=s[11],v=s[12];u=s[3],h=s[4],0!=u&&0!=h||(l=null),-1==u&&(u=0),-1==h&&(h=0);var I;r.skin=l,r.width=u,r.height=h,l&&((I=this._getTextureByUrl(l))?(u||(u=I.sourceWidth),h||(h=I.sourceHeight)):console.warn("lost skin:",l,",you may load pics first")),r.alpha=s[10];var x;x=r.transform,0!=f&&(c=f*u),0!=d&&(_=d*h),0==c&&0==_||x.translate(-c,-_);var T=null;if(g||1!==p||1!==m||y||v){(T=e._tempMt).identity(),T.bTransform=!0;var S=.0174532922222222*(g-y),b=.0174532922222222*(g+v),D=Math.cos(b),C=Math.sin(b),E=Math.sin(S),P=Math.cos(S);T.a=p*D,T.b=p*C,T.c=-m*E,T.d=m*P,T.tx=T.ty=0;}
return T&&(x=w.mul(x,T,x)),x.translate(s[1],s[2]),r;},a._getTextureByUrl=function(t){return ot.getRes(t);},a.setAniData=function(t,n){if(t.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=t,this._parseNodeList(t);var i,r={},a=[],o=t.animations,s=0,l=o.length;for(s=0;s<l;s++){if(i=o[s],this._labels=null,(!n||n==i.name)&&i){try{this._calGraphicData(i);}catch(t){console.warn("parse animation fail:"+i.name+",empty animation created"),this._gList=[];}
var u={};u.interval=1e3/i.frameRate,u.frames=this._gList,u.labels=this._labels,u.name=i.name,a.push(u),r[i.name]=u;}}
this.animationList=a,this.animationDic=r;}
e._temParam.length=0;},a.parseByData=function(t){var e,n;e=t.nodeRoot,n=t.aniO,delete t.nodeRoot,delete t.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=e,this._parseNodeList(e),this._labels=null;try{this._calGraphicData(n);}catch(t){console.warn("parse animation fail:"+n.name+",empty animation created"),this._gList=[];}
var i=t;return i.interval=1e3/n.frameRate,i.frames=this._gList,i.labels=this._labels,i.name=n.name,i;},a.setUpAniData=function(t){if(t.animations){var e,n={},i=[],r=t.animations,a=0,o=r.length;for(a=0;a<o;a++){if(e=r[a]){var s={};s.name=e.name,s.aniO=e,s.nodeRoot=t,i.push(s),n[e.name]=s;}}
this.animationList=i,this.animationDic=n;}},a._clear=function(){if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic){var t,e;for(t in this._nodeGDic){(e=this._nodeGDic[t])&&e.recover();}}
this._nodeGDic=null;},e.parseAnimationByData=function(t){e._I||(e._I=new e());var n;return n=e._I.parseByData(t),e._I._clear(),n;},e.parseAnimationData=function(t){e._I||(e._I=new e()),e._I.setUpAniData(t);var n;return n={},n.animationList=e._I.animationList,n.animationDic=e._I.animationDic,e._I._clear(),n;},e._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],e._temParam=[],e._I=null,e._rootMatrix=null,i(e,["_tempMt",function(){return this._tempMt=new w();}]),e.__init$=function(){n=function(){function t(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1;}
r(t,"");return t.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),W.recover("GraphicNode",this);},t.create=function(){return W.getItemByClass("GraphicNode",t);},t;}();},e;}(It));n.__init([l,st,O,N,X,P,ht,St]);}(window,document,Laya),function(t,e,n){n.un,n.uns,n.static;var i=n.class;n.getset,n.__newvec;new(function(){function t(){}
return i(t,"LayaMain"),t;}())();}(window,document,Laya),"function"==typeof window.define&&window.define.amd&&window.define("laya.core",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var n in Laya){var i=Laya[n];i&&i.__isclass&&(e[n]=i);}}),function(t,e,n){n.un,n.uns;var i=n.static,r=n.class,a=n.getset,o=(n.__newvec,laya.utils.Browser),s=(laya.events.Event,laya.events.EventDispatcher),l=laya.resource.HTMLImage,u=laya.utils.Handler,h=laya.display.Input,c=laya.net.Loader,_=laya.net.LocalStorage,f=(laya.maths.Matrix,laya.renders.Render),d=laya.utils.RunDriver,p=laya.media.SoundChannel,m=laya.media.SoundManager,g=laya.net.URL,y=laya.utils.Utils,v=function(){function e(){}
return r(e,"laya.wx.mini.MiniAdpter"),e.getJson=function(t){return JSON.parse(t);},e.init=function(i,r){if(void 0===i&&(i=!1),void 0===r&&(r=!1),!(e._inited||(e._inited=!0,(e.window=t).navigator.userAgent.indexOf("MiniGame")<0))){e.isZiYu=r,e.isPosMsgYu=i,e.EnvConfig={};try{laya.webgl.resource.WebGLCanvas.premulAlpha=!0;}catch(t){}
e.isZiYu||(I.setNativeFileDir("/layaairGame"),I.existDir(I.fileNativeDir,u.create(e,e.onMkdirCallBack))),e.systemInfo=wx.getSystemInfoSync(),e.window.focus=function(){},n.getUrlPath=function(){},e.window.logtime=function(t){},e.window.alertTimeLog=function(t){},e.window.resetShareInfo=function(){},e.window.CanvasRenderingContext2D=function(){},e.window.CanvasRenderingContext2D.prototype=e.window.wx.createCanvas().getContext("2d").__proto__,e.window.document.body.appendChild=function(){},e.EnvConfig.pixelRatioInt=0,d.getPixelRatio=e.pixelRatio,e._preCreateElement=o.createElement,o.createElement=e.createElement,d.createShaderCondition=e.createShaderCondition,y.parseXMLFromString=e.parseXMLFromString,h._createInputElement=T._createInputElement,e.EnvConfig.load=c.prototype.load,c.prototype.load=b.prototype.load,c.prototype._loadImage=x.prototype._loadImage,S.__init__(),_._baseClass=S;}},e.getUrlEncode=function(t,e){return-1!=t.indexOf(".fnt")?"utf8":"arraybuffer"==e?"":"ascii";},e.downLoadFile=function(t,e,n,i){void 0===e&&(e=""),void 0===i&&(i="ascii");I.getFileInfo(t)?null!=n&&n.runWith([0]):I.downLoadFile(t,e,n,i);},e.remove=function(t,e){I.deleteFile("",t,e,"",0);},e.removeAll=function(){I.deleteAll();},e.hasNativeFile=function(t){return I.isLocalNativeFile(t);},e.getFileInfo=function(t){return I.getFileInfo(t);},e.getFileList=function(){return I.filesListObj;},e.exitMiniProgram=function(){e.window.wx.exitMiniProgram();},e.onMkdirCallBack=function(t,e){t||(I.filesListObj=JSON.parse(e.data));},e.pixelRatio=function(){if(!e.EnvConfig.pixelRatioInt)try{return e.EnvConfig.pixelRatioInt=e.systemInfo.pixelRatio,e.systemInfo.pixelRatio;}catch(t){}
return e.EnvConfig.pixelRatioInt;},e.createElement=function(n){if("canvas"==n){var i;return 1==e.idx?e.isZiYu?(i=sharedCanvas).style={}:i=t.canvas:i=t.wx.createCanvas(),e.idx++,i;}
if("textarea"==n||"input"==n)return e.onCreateInput(n);if("div"==n){var r=e._preCreateElement(n);return r.contains=function(t){return null;},r.removeChild=function(t){},r;}
return e._preCreateElement(n);},e.onCreateInput=function(t){var n=e._preCreateElement(t);return n.focus=T.wxinputFocus,n.blur=T.wxinputblur,n.style={},n.value=0,n.parentElement={},n.placeholder={},n.type={},n.setColor=function(t){},n.setType=function(t){},n.setFontFace=function(t){},n.addEventListener=function(t){},n.contains=function(t){return null;},n.removeChild=function(t){},n;},e.createShaderCondition=function(t){var e=this;return function(){return e[t.replace("this.","")];};},e.EnvConfig=null,e.window=null,e._preCreateElement=null,e._inited=!1,e.systemInfo=null,e.isZiYu=!1,e.isPosMsgYu=!1,e.autoCacheFile=!0,e.minClearSize=5242880,e.parseXMLFromString=function(e){var n;e=e.replace(/>\s+</g,"><");try{n=new t.Parser.DOMParser().parseFromString(e,"text/xml");}catch(t){throw "需要引入xml解析库文件";}
return n;},e.idx=1,i(e,["nativefiles",function(){return this.nativefiles=["layaNativeDir","wxlocal"];}]),e;}(),I=function(){function t(){}
return r(t,"laya.wx.mini.MiniFileMgr"),t.isLocalNativeFile=function(t){for(var e=0,n=v.nativefiles.length;e<n;e++){if(-1!=t.indexOf(v.nativefiles[e]))return!0;}
return!1;},t.getFileInfo=function(e){var n=e.split("?")[0],i=t.filesListObj[n];return null==i?null:i;},t.read=function(e,n,i,r,a,o){void 0===n&&(n="ascill"),void 0===r&&(r=""),void 0===a&&(a=!1),void 0===o&&(o="");var s;s=""==r||-1==r.indexOf("http://")&&-1==r.indexOf("https://")?e:t.getFileNativePath(e),t.fs.readFile({filePath:s,encoding:n,success:function t(e){null!=i&&i.runWith([0,e]);},fail:function e(s){s&&""!=r?t.downFiles(r,n,i,r,a,o):null!=i&&i.runWith([1]);}});},t.downFiles=function(e,n,i,r,a,o){void 0===n&&(n="ascii"),void 0===r&&(r=""),void 0===a&&(a=!1),void 0===o&&(o="");t.wxdown({url:e,success:function e(s){200===s.statusCode&&t.readFile(s.tempFilePath,n,i,r,a,o);},fail:function t(e){null!=i&&i.runWith([1,e]);}}).onProgressUpdate(function(t){null!=i&&i.runWith([2,t.progress]);});},t.readFile=function(e,n,i,r,a,o){void 0===n&&(n="ascill"),void 0===r&&(r=""),void 0===a&&(a=!1),void 0===o&&(o=""),t.fs.readFile({filePath:e,encoding:n,success:function o(s){-1!=e.indexOf("http://")||-1!=e.indexOf("https://")?(v.autoCacheFile||a)&&t.copyFile(e,r,i,n):null!=i&&i.runWith([0,s]);},fail:function t(e){e&&null!=i&&i.runWith([1,e]);}});},t.downOtherFiles=function(e,n,i,r){void 0===i&&(i=""),void 0===r&&(r=!1),t.wxdown({url:e,success:function e(a){200===a.statusCode&&((v.autoCacheFile||r)&&-1==i.indexOf("wx.qlogo.cn")?t.copyFile(a.tempFilePath,i,n):null!=n&&n.runWith([0,a.tempFilePath]));},fail:function t(e){null!=n&&n.runWith([1,e]);}});},t.downLoadFile=function(e,n,i,r){void 0===n&&(n=""),void 0===r&&(r="ascii"),"image"==n||"sound"==n?t.downOtherFiles(e,i,e,!0):t.downFiles(e,r,i,e,!0,n);},t.copyFile=function(e,n,i,r){void 0===r&&(r="");var a=e.split("/"),o=a[a.length-1],s=(n.split("?")[0],t.getFileInfo(n)),l=t.getFileNativePath(o),u=t.getCacheUseSize();s?s.readyUrl!=n?t.fs.getFileInfo({filePath:e,success:function e(a){u+4194304+a.size>=52428800&&(a.size>v.minClearSize&&(v.minClearSize=a.size),t.onClearCacheRes()),t.deleteFile(o,n,i,r,a.size);},fail:function t(e){null!=i&&i.runWith([1,e]);}}):null!=i&&i.runWith([0]):t.fs.getFileInfo({filePath:e,success:function a(s){u+4194304+s.size>=52428800&&(s.size>v.minClearSize&&(v.minClearSize=s.size),t.onClearCacheRes()),t.fs.copyFile({srcPath:e,destPath:l,success:function e(a){t.onSaveFile(n,o,!0,r,i,s.size);},fail:function t(e){null!=i&&i.runWith([1,e]);}});},fail:function t(e){null!=i&&i.runWith([1,e]);}});},t.onClearCacheRes=function(){var e=v.minClearSize,n=[];for(var i in t.filesListObj){n.push(t.filesListObj[i]);}
t.sortOn(n,"time",16);for(var r=0,a=1,o=n.length;a<o;a++){var s=n[a];if(r>=e)break;r+=s.size,t.deleteFile("",s.readyUrl);}},t.sortOn=function(t,e,n){return void 0===n&&(n=0),16==n?t.sort(function(t,n){return t[e]-n[e];}):18==n?t.sort(function(t,n){return n[e]-t[e];}):t.sort(function(t,n){return t[e]-n[e];});},t.getFileNativePath=function(t){return laya.wx.mini.MiniFileMgr.fileNativeDir+"/"+t;},t.deleteFile=function(e,n,i,r,a){void 0===n&&(n=""),void 0===r&&(r=""),void 0===a&&(a=0);var o=t.getFileInfo(n),s=t.getFileNativePath(o.md5);t.fs.unlink({filePath:s,success:function o(s){var l=""!=e;if(""!=e){var u=t.getFileNativePath(e);t.fs.copyFile({srcPath:e,destPath:u,success:function a(o){t.onSaveFile(n,e,l,r,i,o.size);},fail:function t(e){null!=i&&i.runWith([1,e]);}});}else t.onSaveFile(n,e,l,r,i,a);},fail:function t(e){}});},t.deleteAll=function(){var e=[];for(var n in t.filesListObj){e.push(t.filesListObj[n]);}
for(var i=1,r=e.length;i<r;i++){var a=e[i];t.deleteFile("",a.readyUrl);}},t.onSaveFile=function(e,n,i,r,a,s){void 0===i&&(i=!0),void 0===r&&(r=""),void 0===s&&(s=0);var l=e.split("?")[0];if(null==t.filesListObj.fileUsedSize&&(t.filesListObj.fileUsedSize=0),i){t.getFileNativePath(n);t.filesListObj[l]={md5:n,readyUrl:e,size:s,times:o.now(),encoding:r},t.filesListObj.fileUsedSize=parseInt(t.filesListObj.fileUsedSize)+s,t.writeFilesList(l,JSON.stringify(t.filesListObj),!0),null!=a&&a.runWith([0]);}else if(t.filesListObj[l]){var u=parseInt(t.filesListObj[l].size);t.filesListObj.fileUsedSize=parseInt(t.filesListObj.fileUsedSize)-u,delete t.filesListObj[l],t.writeFilesList(l,JSON.stringify(t.filesListObj),!1),null!=a&&a.runWith([0]);}},t.writeFilesList=function(e,n,i){var r=t.fileNativeDir+"/"+t.fileListName;t.fs.writeFile({filePath:r,encoding:"utf8",data:n,success:function t(e){},fail:function t(e){}}),!v.isZiYu&&v.isPosMsgYu&&wx.postMessage({url:e,data:t.filesListObj[e],isLoad:"filenative",isAdd:i});},t.getCacheUseSize=function(){return t.filesListObj&&t.filesListObj.fileUsedSize?t.filesListObj.fileUsedSize:0;},t.existDir=function(e,n){t.fs.mkdir({dirPath:e,success:function t(e){null!=n&&n.runWith([0,{data:JSON.stringify({})}]);},fail:function e(i){-1!=i.errMsg.indexOf("file already exists")?t.readSync(t.fileListName,"utf8",n):null!=n&&n.runWith([1,i]);}});},t.readSync=function(e,n,i,r){void 0===n&&(n="ascill"),void 0===r&&(r="");var a,o=t.getFileNativePath(e);try{a=t.fs.readFileSync(o,n),null!=i&&i.runWith([0,{data:a}]);}catch(t){null!=i&&i.runWith([1]);}},t.setNativeFileDir=function(e){t.fileNativeDir=wx.env.USER_DATA_PATH+e;},t.filesListObj={},t.fileNativeDir=null,t.fileListName="layaairfiles.txt",t.ziyuFileData={},t.loadPath="",t.DESCENDING=2,t.NUMERIC=16,i(t,["fs",function(){return this.fs=wx.getFileSystemManager();},"wxdown",function(){return this.wxdown=wx.downloadFile;}]),t;}(),x=function(){function t(){}
r(t,"laya.wx.mini.MiniImage");return t.prototype._loadImage=function(e){if(v.isZiYu)t.onCreateImage(e,this,!0);else{var n=!1;if(I.isLocalNativeFile(e)){if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))if(""!=I.loadPath)e=e.split(I.loadPath)[1];else{var i=""!=g.rootPath?g.rootPath:g.basePath;""!=i&&(e=e.split(i)[1]);}}else n=!0,e=g.formatURL(e);I.getFileInfo(e)?t.onCreateImage(e,this,!n):-1!=e.indexOf("http://")||-1!=e.indexOf("https://")?v.isZiYu?t.onCreateImage(e,this,!0):I.downOtherFiles(e,new u(t,t.onDownImgCallBack,[e,this]),e):t.onCreateImage(e,this,!0);}},t.onDownImgCallBack=function(e,n,i,r){void 0===r&&(r=""),i?n.onError(null):t.onCreateImage(e,n,!1,r);},t.onCreateImage=function(t,e,n,i){function r(){u.onload=null,u.onerror=null,delete e.imgCache[t];}
void 0===n&&(n=!1),void 0===i&&(i="");var a;if(v.autoCacheFile){if(n)a=t;else if(""!=i)a=i;else{var s=I.getFileInfo(t).md5;a=I.getFileNativePath(s);}}else a=n?t:i;null==e.imgCache&&(e.imgCache={});var u,h=function t(){r(),e._url=g.formatURL(e._url),e.onLoaded(u);},c=function t(){r(),e.event("error","Load image failed");};"nativeimage"==e._type?((u=new o.window.Image()).crossOrigin="",u.onload=h,u.onerror=c,u.src=a,e.imgCache[t]=u):new l.create(a,{onload:h,onerror:c,onCreate:function n(i){u=i,e.imgCache[t]=i;}});},t;}(),T=function(){function e(){}
return r(e,"laya.wx.mini.MiniInput"),e._createInputElement=function(){h._initInput(h.area=o.createElement("textarea")),h._initInput(h.input=o.createElement("input")),h.inputContainer=o.createElement("div"),h.inputContainer.style.position="absolute",h.inputContainer.style.zIndex=1e5,o.container.appendChild(h.inputContainer),h.inputContainer.setPos=function(t,e){h.inputContainer.style.left=t+"px",h.inputContainer.style.top=e+"px";},n.stage.on("resize",null,e._onStageResize),wx.onWindowResize&&wx.onWindowResize(function(e){t.dispatchEvent&&t.dispatchEvent("resize");}),m._soundClass=w,m._musicClass=w;var i=v.systemInfo.model,r=v.systemInfo.system;-1!=i.indexOf("iPhone")&&(o.onIPhone=!0,o.onIOS=!0,o.onIPad=!0,o.onAndroid=!1),-1==r.indexOf("Android")&&-1==r.indexOf("Adr")||(o.onAndroid=!0,o.onIPhone=!1,o.onIOS=!1,o.onIPad=!1);},e._onStageResize=function(){n.stage._canvasTransform.identity().scale(o.width/f.canvas.width/d.getPixelRatio(),o.height/f.canvas.height/d.getPixelRatio());},e.wxinputFocus=function(t){var e=h.inputElement.target;e&&!e.editable||(v.window.wx.offKeyboardConfirm(),v.window.wx.offKeyboardInput(),v.window.wx.showKeyboard({defaultValue:e.text,maxLength:e.maxChars,multiple:e.multiline,confirmHold:!0,confirmType:"done",success:function t(e){},fail:function t(e){}}),v.window.wx.onKeyboardConfirm(function(t){var n=t?t.value:"";e.text=n,e.event("input"),laya.wx.mini.MiniInput.inputEnter();}),v.window.wx.onKeyboardInput(function(t){var n=t?t.value:"";e.multiline||-1==n.indexOf("\n")?(e.text=n,e.event("input")):laya.wx.mini.MiniInput.inputEnter();}));},e.inputEnter=function(){h.inputElement.target.focus=!1;},e.wxinputblur=function(){e.hideKeyboard();},e.hideKeyboard=function(){v.window.wx.offKeyboardConfirm(),v.window.wx.offKeyboardInput(),v.window.wx.hideKeyboard({success:function t(e){console.log("隐藏键盘");},fail:function t(e){console.log("隐藏键盘出错:"+(e?e.errMsg:""));}});},e;}(),S=function(){function t(){}
return r(t,"laya.wx.mini.MiniLocalStorage"),t.__init__=function(){t.items=t;},t.setItem=function(t,e){wx.setStorageSync(t,e);},t.getItem=function(t){return wx.getStorageSync(t);},t.setJSON=function(e,n){t.setItem(e,n);},t.getJSON=function(e){return t.getItem(e);},t.removeItem=function(t){wx.removeStorageSync(t);},t.clear=function(){wx.clearStorageSync();},t.getStorageInfoSync=function(){try{var t=wx.getStorageInfoSync();return console.log(t.keys),console.log(t.currentSize),console.log(t.limitSize),t;}catch(t){}
return null;},t.support=!0,t.items=null,t;}(),b=(function(){function t(){}
r(t,"laya.wx.mini.MiniLocation"),t.__init__=function(){v.window.navigator.geolocation.getCurrentPosition=t.getCurrentPosition,v.window.navigator.geolocation.watchPosition=t.watchPosition,v.window.navigator.geolocation.clearWatch=t.clearWatch;},t.getCurrentPosition=function(t,e,n){var i;(i={}).success=function(e){null!=t&&t(e);},i.fail=e,v.window.wx.getLocation(i);},t.watchPosition=function(e,i,r){t._curID++;var a;return a={},a.success=e,a.error=i,t._watchDic[t._curID]=a,n.timer.loop(1e3,null,t._myLoop),t._curID;},t.clearWatch=function(e){delete t._watchDic[e],t._hasWatch()||n.timer.clear(null,t._myLoop);},t._hasWatch=function(){var e;for(e in t._watchDic){if(t._watchDic[e])return!0;}
return!1;},t._myLoop=function(){t.getCurrentPosition(t._mySuccess,t._myError);},t._mySuccess=function(e){var n={};n.coords=e,n.timestamp=o.now();var i;for(i in t._watchDic){t._watchDic[i].success&&t._watchDic[i].success(n);}},t._myError=function(e){var n;for(n in t._watchDic){t._watchDic[n].error&&t._watchDic[n].error(e);}},t._watchDic={},t._curID=0;}(),function(t){function e(){e.__super.call(this);}
r(e,"laya.wx.mini.MiniAccelerator",t);var n=e.prototype;n.on=function(n,i,r,a){return t.prototype.on.call(this,n,i,r,a),e.startListen(this.onDeviceOrientationChange),this;},n.off=function(n,i,r,a){return void 0===a&&(a=!1),this.hasListener(n)||e.stopListen(),t.prototype.off.call(this,n,i,r,a);},e.__init__=function(){try{var t;if(!(t=laya.device.motion.Accelerator))return;t.prototype.on=e.prototype.on,t.prototype.off=e.prototype.off;}catch(t){}},e.startListen=function(t){if(e._callBack=t,!e._isListening){e._isListening=!0;try{wx.onAccelerometerChange(e.onAccelerometerChange);}catch(t){}}},e.stopListen=function(){e._isListening=!1;try{wx.stopAccelerometer({});}catch(t){}},e.onAccelerometerChange=function(t){var n;(n={}).acceleration=t,n.accelerationIncludingGravity=t,n.rotationRate={},null!=e._callBack&&e._callBack(n);},e._isListening=!1,e._callBack=null;}(s),function(t){function e(){e.__super.call(this);}
r(e,"laya.wx.mini.MiniLoader",s);return e.prototype.load=function(t,n,i,r,a){void 0===i&&(i=!0),void 0===a&&(a=!1);if(this._url=t,0===t.indexOf("data:image")?this._type=n="image":this._type=n||(n=this.getTypeFromUrl(t)),this._cache=i,this._data=null,!a&&c.loadedMap[g.formatURL(t)])return this._data=c.loadedMap[g.formatURL(t)],this.event("progress",1),void this.event("complete",this._data);if(null!=c.parserMap[n])return this._customParse=!0,void(c.parserMap[n]instanceof laya.utils.Handler?c.parserMap[n].runWith(this):c.parserMap[n].call(null,this));var o=v.getUrlEncode(t,n),s=y.getFileExtension(t);if(-1!=e._fileTypeArr.indexOf(s))v.EnvConfig.load.call(this,t,n,i,r,a);else{if(v.isZiYu&&I.ziyuFileData[t]){var l=I.ziyuFileData[t];return void this.onLoaded(l);}
if(I.getFileInfo(t)){var h=I.getFileInfo(t);h.encoding=null==h.encoding?"ascii":h.encoding,I.readFile(t,h.encoding,new u(e,e.onReadNativeCallBack,[o,t,n,i,r,a,this]),t);}else{if(I.isLocalNativeFile(t))return void I.read(t,o,new u(e,e.onReadNativeCallBack,[o,t,n,i,r,a,this]));var _=t;-1!=(t=g.formatURL(t)).indexOf("http://")||-1!=t.indexOf("https://")?v.EnvConfig.load.call(this,_,n,i,r,a):I.readFile(t,o,new u(e,e.onReadNativeCallBack,[o,t,n,i,r,a,this]),t);}}},e.onReadNativeCallBack=function(t,e,n,i,r,a,o,s,l){if(void 0===i&&(i=!0),void 0===a&&(a=!1),void 0===s&&(s=0),s)1==s&&v.EnvConfig.load.call(o,e,n,i,r,a);else{var u;u="json"==n||"atlas"==n?v.getJson(l.data):"xml"==n?y.parseXMLFromString(l.data):l.data,!v.isZiYu&&v.isPosMsgYu&&"arraybuffer"!=n&&wx.postMessage({url:e,data:u,isLoad:"filedata"}),o.onLoaded(u);}},i(e,["_fileTypeArr",function(){return this._fileTypeArr=["png","jpg","bmp","jpeg","gif"];}]),e;}()),w=function(t){function e(){this._sound=null,this.url=null,this.loaded=!1,this.readyUrl=null,e.__super.call(this);}
r(e,"laya.wx.mini.MiniSound",s);var n=e.prototype;return n.load=function(t){t=g.formatURL(t),this.url=t,this.readyUrl=t,e._audioCache[this.readyUrl]?this.event("complete"):v.autoCacheFile&&I.getFileInfo(t)?this.onDownLoadCallBack(t,0):v.autoCacheFile?I.downOtherFiles(t,u.create(this,this.onDownLoadCallBack,[t]),t):this.onDownLoadCallBack(t,0);},n.onDownLoadCallBack=function(t,n){if(n)this.event("error");else{var i;if(v.autoCacheFile){var r=I.getFileInfo(t).md5;i=I.getFileNativePath(r),this._sound=e._createSound(),this._sound.src=this.url=i;}else this._sound=e._createSound(),this._sound.src=t;this._sound.onCanplay(e.bindToThis(this.onCanPlay,this)),this._sound.onError(e.bindToThis(this.onError,this));}},n.onError=function(t){try{console.log("-----1---------------minisound-----id:"+e._id),console.log(t);}catch(t){console.log("-----2---------------minisound-----id:"+e._id),console.log(t);}
this.event("error"),this._sound.offError(null);},n.onCanPlay=function(){this.loaded=!0,this.event("complete"),e._audioCache[this.readyUrl]=this,this._sound.offCanplay(null);},n.play=function(t,n){void 0===t&&(t=0),void 0===n&&(n=0);var i;if(this.url==m._tMusic?(e._musicAudio||(e._musicAudio=e._createSound()),i=e._musicAudio):i=e._audioCache[this.readyUrl]?e._audioCache[this.readyUrl]._sound:e._createSound(),v.autoCacheFile&&I.getFileInfo(this.url)){var r=I.getFileInfo(this.url).md5;i.src=this.url=I.getFileNativePath(r);}else i.src=this.url;var a=new D(i,this);return a.url=this.url,a.loops=n,a.loop=0===n,a.startTime=t,a.play(),m.addChannel(a),a;},n.dispose=function(){var t=e._audioCache[this.readyUrl];t&&(t.src="",t._sound&&(t._sound.destroy(),t._sound=null,t=null),delete e._audioCache[this.readyUrl]);},a(0,n,"duration",function(){return this._sound.duration;}),e._createSound=function(){return e._id++,v.window.wx.createInnerAudioContext();},e.bindToThis=function(t,e){return t.bind(e);},e._musicAudio=null,e._id=0,e._audioCache={},e;}(),D=function(t){function e(t,n){this._audio=null,this._onEnd=null,this._miniSound=null,e.__super.call(this),this._audio=t,this._miniSound=n,this._onEnd=e.bindToThis(this.__onEnd,this),t.onEnded(this._onEnd);}
r(e,"laya.wx.mini.MiniSoundChannel",p);var i=e.prototype;return i.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(n.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");this.loops>0&&this.loops--,this.startTime=0,this.play();},i.play=function(){this.isStopped=!1,m.addChannel(this),this._audio.play();},i.stop=function(){this.isStopped=!0,m.removeChannel(this),this.completeHandler=null,this._audio&&(this._audio.pause(),this._audio.offEnded(null),this._audio=null,this._miniSound=null,this._onEnd=null);},i.pause=function(){this.isStopped=!0,this._audio.pause();},i.resume=function(){this._audio&&(this.isStopped=!1,m.addChannel(this),this._audio.play());},a(0,i,"autoplay",function(){return this._audio.autoplay;},function(t){this._audio.autoplay=t;}),a(0,i,"position",function(){return this._audio?this._audio.currentTime:0;}),a(0,i,"duration",function(){return this._audio?this._audio.duration:0;}),a(0,i,"loop",function(){return this._audio.loop;},function(t){this._audio.loop=t;}),a(0,i,"volume",function(){return this._audio?this._audio.volume:1;},function(t){this._audio&&(this._audio.volume=t);}),e.bindToThis=function(t,e){return t.bind(e);},e;}();}(window,document,Laya),"function"==typeof window.define&&window.define.amd&&window.define("laya.core",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var n in Laya){var i=Laya[n];i&&i.__isclass&&(e[n]=i);}}),function(t,e,n){n.un,n.uns;var i=n.static,r=n.class,a=n.getset,o=n.__newvec,s=laya.maths.Arith,l=laya.maths.Bezier,u=laya.resource.Bitmap,h=laya.utils.Browser,c=laya.utils.Byte,_=laya.utils.Color,f=(laya.filters.ColorFilter,n.Config),d=laya.resource.Context,p=(laya.events.Event,laya.filters.Filter),m=laya.display.Graphics,g=laya.resource.HTMLCanvas,y=(laya.utils.HTMLChar,laya.resource.HTMLImage),v=laya.resource.HTMLSubImage,I=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),x=laya.maths.Point,T=laya.maths.Rectangle,S=laya.renders.Render,b=(laya.renders.RenderContext,laya.renders.RenderSprite),w=laya.resource.Resource,D=laya.resource.ResourceManager,C=laya.utils.RunDriver,E=laya.display.Sprite,P=laya.display.Stage,M=laya.utils.Stat,A=laya.utils.StringKey,O=(laya.display.css.Style,laya.system.System),R=laya.display.Text,L=laya.resource.Texture,F=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),V=laya.utils.VectorGraphManager;laya.utils.WordText;n.interface("laya.webgl.shapes.IShape"),n.interface("laya.webgl.submit.ISubmit"),n.interface("laya.webgl.text.ICharSegment"),n.interface("laya.webgl.canvas.save.ISaveData"),n.interface("laya.webgl.resource.IMergeAtlasBitmap"),n.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var N=function(){function t(){}
r(t,"laya.filters.webgl.FilterActionGL");var e=t.prototype;return n.imps(e,{"laya.filters.IFilterActionGL":!0}),e.setValue=function(t){},e.setValueMix=function(t){},e.apply3d=function(t,e,n,i,r){return null;},e.apply=function(t){return null;},a(0,e,"typeMix",function(){return 0;}),t;}(),U=function(){function t(){}
return r(t,"laya.webgl.shader.ShaderValue"),t;}(),G=function(){function t(t,e,i){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new n(),void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this._cells=null,this._rowInfo=null,this._init(t,e),this._atlasID=i;}
var e,n;r(t,"laya.webgl.atlas.AtlasGrid");var i=t.prototype;return i.getAltasID=function(){return this._atlasID;},i.setAltasID=function(t){t>=0&&(this._atlasID=t);},i.addTex=function(t,e,n){var i=this._get(e,n);return 0==i.ret?i:(this._fill(i.x,i.y,e,n,t),this._texCount++,i);},i._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null);},i._init=function(t,n){if(this._width=t,this._height=n,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=o(this._height);for(var i=0;i<this._height;i++){this._rowInfo[i]=new e();}
return this._clear(),!0;},i._get=function(t,e){var n=new k();if(t>=this._failSize.width&&e>=this._failSize.height)return n;for(var i=-1,r=-1,a=this._width,o=this._height,s=this._cells,l=0;l<o;l++){if(!(this._rowInfo[l].spaceCount<t))for(var u=0;u<a;){var h=3*(l*a+u);if(0!=s[h]||s[h+1]<t||s[h+2]<e)u+=s[h+1];else{i=u,r=l;for(var c=0;c<t;c++){if(s[3*c+h+2]<e){i=-1;break;}}
if(!(i<0))return n.ret=!0,n.x=i,n.y=r,n;u+=s[h+1];}}}
return n;},i._fill=function(t,e,n,i,r){var a=this._width,o=this._height;this._check(t+n<=a&&e+i<=o);for(var s=e;s<i+e;++s){this._check(this._rowInfo[s].spaceCount>=n),this._rowInfo[s].spaceCount-=n;for(var l=0;l<n;l++){var u=3*(t+s*a+l);this._check(0==this._cells[u]),this._cells[u]=r,this._cells[u+1]=n,this._cells[u+2]=i;}}
if(t>0)for(s=0;s<i;++s){var h=0;for(l=t-1;l>=0&&0==this._cells[3*((e+s)*a+l)];--l,++h){}
for(l=h;l>0;--l){this._cells[3*((e+s)*a+t-l)+1]=l,this._check(l>0);}}
if(e>0)for(l=t;l<t+n;++l){for(h=0,s=e-1;s>=0&&0==this._cells[3*(l+s*a)];--s,h++){}
for(s=h;s>0;--s){this._cells[3*(l+(e-s)*a)+2]=s,this._check(s>0);}}},i._check=function(t){0==t&&console.log("xtexMerger 错误啦");},i._clear=function(){this._texCount=0;for(var t=0;t<this._height;t++){this._rowInfo[t].spaceCount=this._width;}
for(var e=0;e<this._height;e++){for(var n=0;n<this._width;n++){var i=3*(e*this._width+n);this._cells[i]=0,this._cells[i+1]=this._width-n,this._cells[i+2]=this._width-e;}}
this._failSize.width=this._width+1,this._failSize.height=this._height+1;},t.__init$=function(){e=function(){function t(){this.spaceCount=0;}
return r(t,""),t;}(),n=function(){function t(){this.width=0,this.height=0;}
return r(t,""),t;}();},t;}(),B=function(){function t(t,e,n,i){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=t,this._height=e,this._gridSize=n,this._maxAtlaserCount=i,this._gridNumX=t/n,this._gridNumY=e/n,this._curAtlasIndex=0,this._atlaserArray=[];}
r(t,"laya.webgl.atlas.AtlasResourceManager");var e=t.prototype;return e.setAtlasParam=function(e,n,i,r){if(1==this._setAtlasParam)return t._sid_=0,this._width=e,this._height=n,this._gridSize=i,this._maxAtlaserCount=r,this._gridNumX=e/i,this._gridNumY=n/i,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1;},e.pushData=function(e){var n=e.bitmap,i=-1,r=null,a=0,o=0,s=0;for(a=0,o=this._atlaserArray.length;a<o&&(s=(this._curAtlasIndex+a)%o,r=this._atlaserArray[s],-1==(i=r.findBitmapIsExist(n)));a++){}
if(-1!=i){var l=r.InAtlasWebGLImagesOffsetValue[i];return p=l[0],m=l[1],r.addToAtlas(e,p,m),!0;}
this._setAtlasParam=!1;for(var u=Math.ceil((e.bitmap.width+2)/this._gridSize),h=Math.ceil((e.bitmap.height+2)/this._gridSize),c=!1,_=0;_<2;_++){var f=this._maxAtlaserCount;for(a=0;a<f;a++){s=(this._curAtlasIndex+a)%f,this._atlaserArray.length-1>=s||this._atlaserArray.push(new Ct(this._gridNumX,this._gridNumY,this._width,this._height,t._sid_++));var d=this._atlaserArray[s],p=0,m=0,g=d.addTex(1,u,h);if(g.ret){p=g.x*this._gridSize+1,m=g.y*this._gridSize+1,n.lock=!0,d.addToAtlasTexture(n,p,m),d.addToAtlas(e,p,m),c=!0,this._curAtlasIndex=s;break;}}
if(c)break;this._atlaserArray.push(new Ct(this._gridNumX,this._gridNumY,this._width,this._height,t._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1;}
return c||console.log(">>>AtlasManager pushData error"),c;},e.addToAtlas=function(t){laya.webgl.atlas.AtlasResourceManager.instance.pushData(t);},e.garbageCollection=function(){if(!0===this._needGC){for(var t=this._atlaserArray.length-this._maxAtlaserCount,e=0;e<t;e++){this._atlaserArray[e].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");}
console.log(">>>>altas garbageCollection ="+t),this._atlaserArray.splice(0,t),this._needGC=!1;}
return!0;},e.freeAll=function(){for(var t=0,e=this._atlaserArray.length;t<e;t++){this._atlaserArray[t].dispose();}
this._atlaserArray.length=0,this._curAtlasIndex=0;},e.getAtlaserCount=function(){return this._atlaserArray.length;},e.getAtlaserByIndex=function(t){return this._atlaserArray[t];},a(1,t,"instance",function(){return t._Instance||(t._Instance=new t(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),t._Instance;}),a(1,t,"enabled",function(){return f.atlasEnable;}),a(1,t,"atlasLimitWidth",function(){return t._atlasLimitWidth;},function(e){t._atlasLimitWidth=e;}),a(1,t,"atlasLimitHeight",function(){return t._atlasLimitHeight;},function(e){t._atlasLimitHeight=e;}),t._enable=function(){f.atlasEnable=!0;},t._disable=function(){f.atlasEnable=!1;},t.__init__=function(){t.atlasTextureWidth=2048,t.atlasTextureHeight=2048,t.maxTextureCount=6,t.atlasLimitWidth=512,t.atlasLimitHeight=512;},t._atlasLimitWidth=0,t._atlasLimitHeight=0,t.gridSize=16,t.atlasTextureWidth=0,t.atlasTextureHeight=0,t.maxTextureCount=0,t._atlasRestore=0,t.BOARDER_TYPE_NO=0,t.BOARDER_TYPE_RIGHT=1,t.BOARDER_TYPE_LEFT=2,t.BOARDER_TYPE_BOTTOM=4,t.BOARDER_TYPE_TOP=8,t.BOARDER_TYPE_ALL=15,t._sid_=0,t._Instance=null,t;}(),k=function(){function t(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0;}
return r(t,"laya.webgl.atlas.MergeFillInfo"),t;}(),H=function(){function t(){}
return r(t,"laya.webgl.canvas.BlendMode"),t._init_=function(e){t.fns=[t.BlendNormal,t.BlendAdd,t.BlendMultiply,t.BlendScreen,t.BlendOverlay,t.BlendLight,t.BlendMask,t.BlendDestinationOut],t.targetFns=[t.BlendNormalTarget,t.BlendAddTarget,t.BlendMultiplyTarget,t.BlendScreenTarget,t.BlendOverlayTarget,t.BlendLightTarget,t.BlendMask,t.BlendDestinationOut];},t.BlendNormal=function(t){t.blendFunc(1,771);},t.BlendAdd=function(t){t.blendFunc(1,772);},t.BlendMultiply=function(t){t.blendFunc(774,771);},t.BlendScreen=function(t){t.blendFunc(1,1);},t.BlendOverlay=function(t){t.blendFunc(1,769);},t.BlendLight=function(t){t.blendFunc(1,1);},t.BlendNormalTarget=function(t){t.blendFunc(1,771);},t.BlendAddTarget=function(t){t.blendFunc(1,772);},t.BlendMultiplyTarget=function(t){t.blendFunc(774,771);},t.BlendScreenTarget=function(t){t.blendFunc(1,1);},t.BlendOverlayTarget=function(t){t.blendFunc(1,769);},t.BlendLightTarget=function(t){t.blendFunc(1,1);},t.BlendMask=function(t){t.blendFunc(0,770);},t.BlendDestinationOut=function(t){t.blendFunc(0,0);},t.activeBlendFunction=null,t.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],t.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},t.NORMAL="normal",t.ADD="add",t.MULTIPLY="multiply",t.SCREEN="screen",t.LIGHT="light",t.OVERLAY="overlay",t.DESTINATIONOUT="destination-out",t.fns=[],t.targetFns=[],t;}(),z=function(){function t(t){this._color=_.create("black"),this.setValue(t);}
r(t,"laya.webgl.canvas.DrawStyle");var e=t.prototype;return e.setValue=function(t){if(t){if("string"==typeof t)return void(this._color=_.create(t));if(t instanceof laya.utils.Color)return void(this._color=t);}},e.reset=function(){this._color=_.create("black");},e.equal=function(t){return "string"==typeof t?this._color.strColor===t:t instanceof laya.utils.Color&&this._color.numColor===t.numColor;},e.toColorStr=function(){return this._color.strColor;},t.create=function(e){if(e){var n;if("string"==typeof e?n=_.create(e):e instanceof laya.utils.Color&&(n=e),n)return n._drawStyle||(n._drawStyle=new t(e));}
return laya.webgl.canvas.DrawStyle.DEFAULT;},i(t,["DEFAULT",function(){return this.DEFAULT=new t("#000000");}]),t;}(),j=function(){function t(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];It.mainContext;this.ib=$t.create(35048),this.vb=Qt.create(5);}
r(t,"laya.webgl.canvas.Path");var e=t.prototype;return e.addPoint=function(t,e){this.tempArray.push(t,e);},e.getEndPointX=function(){return this.tempArray[this.tempArray.length-2];},e.getEndPointY=function(){return this.tempArray[this.tempArray.length-1];},e.polygon=function(t,e,n,i,r,a){var o;return this.geomatrys.push(this._curGeomatry=o=new At(t,e,n,i,r,a)),i||(o.fill=!1),void 0==a&&(o.borderWidth=0),o;},e.setGeomtry=function(t){this.geomatrys.push(this._curGeomatry=t);},e.drawLine=function(t,e,n,i,r){var a;return this.closePath?this.geomatrys.push(this._curGeomatry=a=new Mt(t,e,n,i,r)):this.geomatrys.push(this._curGeomatry=a=new Pt(t,e,n,i,r)),a.fill=!1,a;},e.update=function(){var t=this.ib._byteLength,e=this.geomatrys.length;this.offset=t;for(var n=this.geoStart;n<e;n++){this.geomatrys[n].getData(this.ib,this.vb,this.vb._byteLength/20);}
this.geoStart=e,this.count=(this.ib._byteLength-t)/pt.BYTES_PIDX;},e.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0;},e.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null;},t;}(),W=function(){function t(){}
r(t,"laya.webgl.canvas.save.SaveBase");var e=t.prototype;return n.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1;},e.restore=function(e){this._dataObj[this._valueName]=this._value,t._cache[t._cache._length++]=this,this._newSubmit&&(e._curSubmit=at.RENDERBASE,e._renderKey=0);},t._createArray=function(){var t=[];return t._length=0,t;},t._init=function(){var e=t._namemap={};return e[1]="ALPHA",e[2]="fillStyle",e[8]="font",e[256]="lineWidth",e[512]="strokeStyle",e[8192]="_mergeID",e[1024]=e[2048]=e[4096]=[],e[16384]="textBaseline",e[32768]="textAlign",e[65536]="_nBlendType",e[1048576]="shader",e[2097152]="filters",e;},t.save=function(e,n,i,r){if((e._saveMark._saveuse&n)!==n){e._saveMark._saveuse|=n;var a=t._cache,o=a._length>0?a[--a._length]:new t();o._value=i[o._valueName=t._namemap[n]],o._dataObj=i,o._newSubmit=r;var s=e._save;s[s._length++]=o;}},t._cache=laya.webgl.canvas.save.SaveBase._createArray(),t._namemap=t._init(),t;}(),K=function(){function t(){this._clipRect=new T();}
r(t,"laya.webgl.canvas.save.SaveClipRect");var e=t.prototype;return n.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1;},e.restore=function(e){e._clipRect=this._clipSaveRect,t._cache[t._cache._length++]=this,this._submitScissor.submitLength=e._submits._length-this._submitScissor.submitIndex,e._curSubmit=at.RENDERBASE,e._renderKey=0;},t.save=function(e,n){if(131072!=(131072&e._saveMark._saveuse)){e._saveMark._saveuse|=131072;var i=t._cache,r=i._length>0?i[--i._length]:new t();r._clipSaveRect=e._clipRect,e._clipRect=r._clipRect.copyFrom(e._clipRect),r._submitScissor=n;var a=e._save;a[a._length++]=r;}},i(t,["_cache",function(){return this._cache=W._createArray();}]),t;}(),X=function(){function t(){this._contextX=0,this._contextY=0,this._clipRect=new T(),this._rect=new T(),this._matrix=new I();}
r(t,"laya.webgl.canvas.save.SaveClipRectStencil");var e=t.prototype;return n.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1;},e.restore=function(e){ht.restore(e,this._rect,this._saveMatrix,this._contextX,this._contextY),e._clipRect=this._clipSaveRect,e._curMat=this._saveMatrix,e._x=this._contextX,e._y=this._contextY,t._cache[t._cache._length++]=this,e._curSubmit=at.RENDERBASE;},t.save=function(e,n,i,r,a,o,s,l,u,h){if(262144!=(262144&e._saveMark._saveuse)){e._saveMark._saveuse|=262144;var c=t._cache,_=c._length>0?c[--c._length]:new t();_._clipSaveRect=e._clipRect,_._clipRect.setTo(s,l,u,h),e._clipRect=_._clipRect,_._rect.x=i,_._rect.y=r,_._rect.width=a,_._rect.height=o,_._contextX=e._x,_._contextY=e._y,_._saveMatrix=e._curMat,e._curMat.copyTo(_._matrix),e._curMat=_._matrix,_._submitStencil=n;var f=e._save;f[f._length++]=_;}},i(t,["_cache",function(){return this._cache=W._createArray();}]),t;}(),Y=function(){function t(){this._saveuse=0;}
r(t,"laya.webgl.canvas.save.SaveMark");var e=t.prototype;return n.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!0;},e.restore=function(e){e._saveMark=this._preSaveMark,t._no[t._no._length++]=this;},t.Create=function(e){var n=t._no,i=n._length>0?n[--n._length]:new t();return i._saveuse=0,i._preSaveMark=e._saveMark,e._saveMark=i,i;},i(t,["_no",function(){return this._no=W._createArray();}]),t;}(),q=function(){function t(){this._matrix=new I();}
r(t,"laya.webgl.canvas.save.SaveTransform");var e=t.prototype;return n.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1;},e.restore=function(e){e._curMat=this._savematrix,t._no[t._no._length++]=this;},t.save=function(e){var n=e._saveMark;if(2048!=(2048&n._saveuse)){n._saveuse|=2048;var i=t._no,r=i._length>0?i[--i._length]:new t();r._savematrix=e._curMat,e._curMat=e._curMat.copyTo(r._matrix);var a=e._save;a[a._length++]=r;}},i(t,["_no",function(){return this._no=W._createArray();}]),t;}(),Z=function(){function t(){}
r(t,"laya.webgl.canvas.save.SaveTranslate");var e=t.prototype;return n.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1;},e.restore=function(e){e._curMat;e._x=this._x,e._y=this._y,t._no[t._no._length++]=this;},t.save=function(e){var n=t._no,i=n._length>0?n[--n._length]:new t();i._x=e._x,i._y=e._y;var r=e._save;r[r._length++]=i;},i(t,["_no",function(){return this._no=W._createArray();}]),t;}(),J=function(){function t(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new T();}
r(t,"laya.webgl.resource.RenderTargetMAX");var e=t.prototype;return e.setSP=function(t){this._sp=t;},e.size=function(t,e){var i=this;this._width!==t||this._height!==e?(this.repaint=!0,this._width=t,this._height=e,this.target?this.target.size(t,e):this.target=Vt.create(t,e),this.target.hasListener("recovered")||this.target.on("recovered",this,function(t){n.timer.callLater(i._sp,i._sp.repaint);})):this.target.size(t,e);},e._flushToTarget=function(t,e){if(!e._destroy){var n=yt.worldScissorTest,i=yt.worldClipRect;yt.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,yt.worldScissorTest=!1,It.mainContext.disable(3089);var r=yt.worldAlpha,a=yt.worldMatrix4,o=yt.worldMatrix,s=yt.worldFilters,l=yt.worldShaderDefines;if(yt.worldMatrix=I.EMPTY,yt.restoreTempArray(),yt.worldMatrix4=yt.TEMPMAT4_ARRAY,yt.worldAlpha=1,yt.worldFilters=null,yt.worldShaderDefines=null,Ft.activeShader=null,e.start(),f.showCanvasMark?e.clear(0,1,0,.3):e.clear(0,0,0,0),t.flush(),e.end(),Ft.activeShader=null,yt.worldAlpha=r,yt.worldMatrix4=a,yt.worldMatrix=o,yt.worldFilters=s,yt.worldShaderDefines=l,yt.worldScissorTest=n,n){var u=yt.height-i.y-i.height;It.mainContext.scissor(i.x,u,i.width,i.height),It.mainContext.enable(3089);}
yt.worldClipRect=i;}},e.flush=function(t){this.repaint&&(this._flushToTarget(t,this.target),this.repaint=!1);},e.drawTo=function(t,e,n,i,r){t.drawTexture(this.target.getTexture(),e,n,i,r,0,0);},e.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null);},t;}(),$=function(){function t(){this.ALPHA=1,this.shaderType=0,this.defines=new Et();}
r(t,"laya.webgl.shader.d2.Shader2D");return t.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null;},t.__init__=function(){Yt.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),Yt.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),Yt.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),Yt.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4Color += texture2D(texture, v_texcoord + vec2FilterDir + vec2Off)/floatIterationTotalTime;\n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),Yt.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),Yt.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4Color += texture2D(texture, ctexcoord)*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),Yt.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),Yt.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;");var t,e;t="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",e='precision mediump float;\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',Yt.preCompile2D(0,1,t,e,null),t="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",e='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',Yt.preCompile2D(0,2,t,e,null),t="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",e="precision mediump float;\n//precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",Yt.preCompile2D(0,4,t,e,null),t="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",e='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',Yt.preCompile2D(0,256,t,e,null),t="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",e="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",Yt.preCompile2D(0,512,t,e,null);},t;}(),Q=function(){function t(t,e,n){this._value=0,this._name2int=t,this._int2name=e,this._int2nameMap=n;}
r(t,"laya.webgl.shader.ShaderDefines");var e=t.prototype;return e.add=function(t){return "string"==typeof t&&(t=this._name2int[t]),this._value|=t,this._value;},e.addInt=function(t){return this._value|=t,this._value;},e.remove=function(t){return "string"==typeof t&&(t=this._name2int[t]),this._value&=~t,this._value;},e.isDefine=function(t){return(this._value&t)===t;},e.getValue=function(){return this._value;},e.setValue=function(t){this._value=t;},e.toNameDic=function(){var e=this._int2nameMap[this._value];return e||t._toText(this._value,this._int2name,this._int2nameMap);},t._reg=function(t,e,n,i){n[t]=e,i[e]=t;},t._toText=function(t,e,n){var i=n[t];if(i)return i;for(var r={},a=1,o=0;o<32&&!((a=1<<o)>t);o++){if(t&a){var s=e[a];s&&(r[s]="");}}
return n[t]=r,r;},t._toInt=function(t,e){for(var n=t.split("."),i=0,r=0,a=n.length;r<a;r++){var o=e[n[r]];if(!o)throw new Error("Defines to int err:"+t+"/"+n[r]);i|=o;}
return i;},t;}(),tt=function(){function t(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new I();}
r(t,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var e=t.prototype;return e.init=function(e,n,i){if(n)this._vs=n;else{this._vs=[];var r=e.width,a=e.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(r,0,1,0,1,1,1,1),this._vs.push(r,a,1,1,1,1,1,1),this._vs.push(0,a,0,1,1,1,1,1);}
i?this._ps=i:(t._defaultPS||(t._defaultPS=[]).push(0,1,3,3,1,2),this._ps=t._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=e;},e.init2=function(t,e,n,i,r){this.transform&&(this.transform=null),n?this._ps=n:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=i,this._uvs=r,this.mEleNum=this._ps.length,this.mTexture=t,(S.isConchNode||S.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs));},e._initMyData=function(){var e=0,n=0,i=4*this._verticles.length;this._vs=t._tempVS;var r=!1;if(S.isConchNode||S.isConchApp?(this._vs.length=i,r=!0):this._vs.length<i&&(this._vs.length=i,r=!0),t._tVSLen=i,r)for(;e<i;){this._vs[e]=this._verticles[n],this._vs[e+1]=this._verticles[n+1],this._vs[e+2]=this._uvs[n],this._vs[e+3]=this._uvs[n+1],this._vs[e+4]=1,this._vs[e+5]=1,this._vs[e+6]=1,this._vs[e+7]=1,e+=8,n+=2;}else for(;e<i;){this._vs[e]=this._verticles[n],this._vs[e+1]=this._verticles[n+1],this._vs[e+2]=this._uvs[n],this._vs[e+3]=this._uvs[n+1],e+=8,n+=2;}},e.getData2=function(e,n,i){this.mVBBuffer=e,this.mIBBuffer=n,this._initMyData(),e.appendEx2(this._vs,Float32Array,t._tVSLen,4),this._indexStart=n._byteLength;var r;(r=t._tempIB).length<this._ps.length&&(r.length=this._ps.length);for(var a=0,o=this._ps.length;a<o;a++){r[a]=this._ps[a]+i;}
n.appendEx2(r,Uint16Array,this._ps.length,2);},e.getData=function(t,e,n){if(this.mVBBuffer=t,this.mIBBuffer=e,t.append(this.mVBData),this._indexStart=e._byteLength,this.mIBData.start!=n){for(var i=0,r=this._ps.length;i<r;i++){this.mIBData[i]=this._ps[i]+n;}
this.mIBData.start=n;}
e.append(this.mIBData);},e.render=function(t,e,n){if(S.isWebGL&&this.mTexture){t._renderKey=0,t._shader2D.glTexture=null,et.getInstance().addSkinMesh(this);var i=at.createShape(t,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,bt.create(512,0));this.transform||(this.transform=I.EMPTY),this.transform.translate(e,n),I.mul(this.transform,t._curMat,this._tempMatrix),this.transform.translate(-e,-n);var r=i.shaderValue,a=r.u_mmat2||yt.getMatrArray();yt.mat2MatArray(this._tempMatrix,a),r.textureHost=this.mTexture,r.offsetX=0,r.offsetY=0,r.u_mmat2=a,r.ALPHA=t._shader2D.ALPHA,t._submits[t._submits._length++]=i;}else S.isConchApp&&this.mTexture&&(this.transform||(this.transform=I.EMPTY),t.setSkinMesh&&t.setSkinMesh(e,n,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform));},t._tempVS=[],t._tempIB=[],t._defaultPS=null,t._tVSLen=0,t;}(),et=function(){function t(){this.ib=null,this.vb=null;It.mainContext;this.ib=$t.create(35048),this.vb=Qt.create(8);}
r(t,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var e=t.prototype;return e.addSkinMesh=function(t){t.getData2(this.vb,this.ib,this.vb._byteLength/32);},e.reset=function(){this.vb.clear(),this.ib.clear();},t.getInstance=function(){return t.instance=t.instance||new t();},t.instance=null,t;}(),nt=function(){function t(t,e,n,i,r,a,o,s,l){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===l&&(l=0),this.x=t,this.y=e,this.width=n,this.height=i,this.edges=r,this.color=a,this.borderWidth=o,this.borderColor=s;}
r(t,"laya.webgl.shapes.BasePoly");var e=t.prototype;return n.imps(e,{"laya.webgl.shapes.IShape":!0}),e.getData=function(t,e,n){},e.rebuild=function(t){},e.setMatrix=function(t){},e.needUpdate=function(t){return!0;},e.sector=function(t,e,n){var i=this.x,r=this.y,a=this.edges,o=(this.r1-this.r0)/a,s=this.width,l=this.height,u=this.color,h=(u>>16&255)/255,c=(u>>8&255)/255,_=(255&u)/255;t.push(i,r,h,c,_);for(var f=0;f<a+1;f++){t.push(i+Math.sin(o*f+this.r0)*s,r+Math.cos(o*f+this.r0)*l),t.push(h,c,_);}
for(f=0;f<a;f++){e.push(n,n+f+1,n+f+2);}},e.createLine2=function(t,e,n,i,r,a){var o,s,l,u,h,c,_,f,d,p,m,g,y,v,I,x,T,S,b,w,D=t.concat(),C=r,E=this.borderColor,P=(E>>16&255)/255,M=(E>>8&255)/255,A=(255&E)/255,O=D.length/2,R=i,L=n/2;l=D[0],u=D[1],p=l-(h=D[2]),d=(d=-(u-(c=D[3])))/(w=Math.sqrt(d*d+p*p))*L,p=p/w*L,C.push(l-d+this.x,u-p+this.y,P,M,A,l+d+this.x,u+p+this.y,P,M,A);for(var F=1;F<O-1;F++){l=D[2*(F-1)],u=D[2*(F-1)+1],h=D[2*F],c=D[2*F+1],_=D[2*(F+1)],f=D[2*(F+1)+1],p=l-h,g=h-_,I=(-(d=(d=-(u-c))/(w=Math.sqrt(d*d+p*p))*L)+l)*(-(p=p/w*L)+c)-(-d+h)*(-p+u),S=(-(m=(m=-(c-f))/(w=Math.sqrt(m*m+g*g))*L)+_)*(-(g=g/w*L)+c)-(-m+h)*(-g+f),b=(y=-p+u-(-p+c))*(T=-m+h-(-m+_))-(x=-g+f-(-g+c))*(v=-d+h-(-d+l)),Math.abs(b)<.1?(b+=10.1,C.push(h-d+this.x,c-p+this.y,P,M,A,h+d+this.x,c+p+this.y,P,M,A)):(((o=(v*S-T*I)/b)-h)*(o-h)+((s=(x*I-y*S)/b)-c)+(s-c),C.push(o+this.x,s+this.y,P,M,A,h-(o-h)+this.x,c-(s-c)+this.y,P,M,A));}
l=D[D.length-4],u=D[D.length-3],p=l-(h=D[D.length-2]),d=(d=-(u-(c=D[D.length-1])))/(w=Math.sqrt(d*d+p*p))*L,p=p/w*L,C.push(h-d+this.x,c-p+this.y,P,M,A,h+d+this.x,c+p+this.y,P,M,A);var V=a;for(F=1;F<V;F++){e.push(R+2*(F-1),R+2*(F-1)+1,R+2*F+1,R+2*F+1,R+2*F,R+2*(F-1));}
return C;},e.createLine=function(t,e,n,i){var r=t.concat(),a=t,o=this.borderColor,s=(o>>16&255)/255,l=(o>>8&255)/255,u=(255&o)/255;r.splice(0,5);var h,c,_,f,d,p,m,g,y,v,I,x,T,S,b,w,D,C,E,P,M=r.length/5,A=i,O=n/2;_=r[0],f=r[1],v=_-(d=r[5]),y=(y=-(f-(p=r[6])))/(P=Math.sqrt(y*y+v*v))*O,v=v/P*O,a.push(_-y,f-v,s,l,u,_+y,f+v,s,l,u);for(var R=1;R<M-1;R++){_=r[5*(R-1)],f=r[5*(R-1)+1],d=r[5*R],p=r[5*R+1],m=r[5*(R+1)],g=r[5*(R+1)+1],v=_-d,x=d-m,b=(-(y=(y=-(f-p))/(P=Math.sqrt(y*y+v*v))*O)+_)*(-(v=v/P*O)+p)-(-y+d)*(-v+f),C=(-(I=(I=-(p-g))/(P=Math.sqrt(I*I+x*x))*O)+m)*(-(x=x/P*O)+p)-(-I+d)*(-x+g),E=(T=-v+f-(-v+p))*(D=-I+d-(-I+m))-(w=-x+g-(-x+p))*(S=-y+d-(-y+_)),Math.abs(E)<.1?(E+=10.1,a.push(d-y,p-v,s,l,u,d+y,p+v,s,l,u)):(((h=(S*C-D*b)/E)-d)*(h-d)+((c=(w*b-T*C)/E)-p)+(c-p),a.push(h,c,s,l,u,d-(h-d),p-(c-p),s,l,u));}
_=r[r.length-10],f=r[r.length-9],v=_-(d=r[r.length-5]),y=(y=-(f-(p=r[r.length-4])))/(P=Math.sqrt(y*y+v*v))*O,v=v/P*O,a.push(d-y,p-v,s,l,u,d+y,p+v,s,l,u);var L=this.edges+1;for(R=1;R<L;R++){e.push(A+2*(R-1),A+2*(R-1)+1,A+2*R+1,A+2*R+1,A+2*R,A+2*(R-1));}
return a;},e.createLoopLine=function(t,e,n,i,r,a){var o=t.concat(),s=r||t,l=this.borderColor,u=(l>>16&255)/255,h=(l>>8&255)/255,c=(255&l)/255;o.splice(0,5);var _=[o[0],o[1]],f=[o[o.length-5],o[o.length-4]],d=f[0]+.5*(_[0]-f[0]),p=f[1]+.5*(_[1]-f[1]);o.unshift(d,p,0,0,0),o.push(d,p,0,0,0);var m,g,y,v,I,x,T,S,b,w,D,C,E,P,M,A,O,R,L,F,V=o.length/5,N=i,U=n/2;y=o[0],v=o[1],w=y-(I=o[5]),b=(b=-(v-(x=o[6])))/(F=Math.sqrt(b*b+w*w))*U,w=w/F*U,s.push(y-b,v-w,u,h,c,y+b,v+w,u,h,c);for(var G=1;G<V-1;G++){y=o[5*(G-1)],v=o[5*(G-1)+1],I=o[5*G],x=o[5*G+1],T=o[5*(G+1)],S=o[5*(G+1)+1],w=y-I,C=I-T,M=(-(b=(b=-(v-x))/(F=Math.sqrt(b*b+w*w))*U)+y)*(-(w=w/F*U)+x)-(-b+I)*(-w+v),R=(-(D=(D=-(x-S))/(F=Math.sqrt(D*D+C*C))*U)+T)*(-(C=C/F*U)+x)-(-D+I)*(-C+S),L=(E=-w+v-(-w+x))*(O=-D+I-(-D+T))-(A=-C+S-(-C+x))*(P=-b+I-(-b+y)),Math.abs(L)<.1?(L+=10.1,s.push(I-b,x-w,u,h,c,I+b,x+w,u,h,c)):(((m=(P*R-O*M)/L)-I)*(m-I)+((g=(A*M-E*R)/L)-x)+(g-x),s.push(m,g,u,h,c,I-(m-I),x-(g-x),u,h,c));}
a&&(e=a);var B=this.edges+1;for(G=1;G<B;G++){e.push(N+2*(G-1),N+2*(G-1)+1,N+2*G+1,N+2*G+1,N+2*G,N+2*(G-1));}
return e.push(N+2*(G-1),N+2*(G-1)+1,N+1,N+1,N,N+2*(G-1)),s;},t;}(),it=function(){function t(){}
return r(t,"laya.webgl.shapes.Earcut"),t.earcut=function(e,n,i){i=i||2;var r=n&&n.length,a=r?n[0]*i:e.length,o=t.linkedList(e,0,a,i,!0),s=[];if(!o)return s;var l,u,h,c,_,f,d;if(r&&(o=t.eliminateHoles(e,n,o,i)),e.length>80*i){l=h=e[0],u=c=e[1];for(var p=i;p<a;p+=i){_=e[p],f=e[p+1],_<l&&(l=_),f<u&&(u=f),_>h&&(h=_),f>c&&(c=f);}
d=0!==(d=Math.max(h-l,c-u))?1/d:0;}
return t.earcutLinked(o,s,i,l,u,d),s;},t.linkedList=function(e,n,i,r,a){var o,s;if(a===t.signedArea(e,n,i,r)>0)for(o=n;o<i;o+=r){s=t.insertNode(o,e[o],e[o+1],s);}else for(o=i-r;o>=n;o-=r){s=t.insertNode(o,e[o],e[o+1],s);}
return s&&t.equals(s,s.next)&&(t.removeNode(s),s=s.next),s;},t.filterPoints=function(e,n){if(!e)return e;n||(n=e);var i,r=e;do{if(i=!1,r.steiner||!t.equals(r,r.next)&&0!==t.area(r.prev,r,r.next))r=r.next;else{if(t.removeNode(r),(r=n=r.prev)===r.next)break;i=!0;}}while(i||r!==n);return n;},t.earcutLinked=function(e,n,i,r,a,o,s){if(e){!s&&o&&t.indexCurve(e,r,a,o);for(var l,u,h=e;e.prev!==e.next;){if(l=e.prev,u=e.next,o?t.isEarHashed(e,r,a,o):t.isEar(e))n.push(l.i/i),n.push(e.i/i),n.push(u.i/i),t.removeNode(e),e=u.next,h=u.next;else if((e=u)===h){s?1===s?(e=t.cureLocalIntersections(e,n,i),t.earcutLinked(e,n,i,r,a,o,2)):2===s&&t.splitEarcut(e,n,i,r,a,o):t.earcutLinked(t.filterPoints(e,null),n,i,r,a,o,1);break;}}}},t.isEar=function(e){var n=e.prev,i=e,r=e.next;if(t.area(n,i,r)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(t.pointInTriangle(n.x,n.y,i.x,i.y,r.x,r.y,a.x,a.y)&&t.area(a.prev,a,a.next)>=0)return!1;a=a.next;}
return!0;},t.isEarHashed=function(e,n,i,r){var a=e.prev,o=e,s=e.next;if(t.area(a,o,s)>=0)return!1;for(var l=a.x<o.x?a.x<s.x?a.x:s.x:o.x<s.x?o.x:s.x,u=a.y<o.y?a.y<s.y?a.y:s.y:o.y<s.y?o.y:s.y,h=a.x>o.x?a.x>s.x?a.x:s.x:o.x>s.x?o.x:s.x,c=a.y>o.y?a.y>s.y?a.y:s.y:o.y>s.y?o.y:s.y,_=t.zOrder(l,u,n,i,r),f=t.zOrder(h,c,n,i,r),d=e.nextZ;d&&d.z<=f;){if(d!==e.prev&&d!==e.next&&t.pointInTriangle(a.x,a.y,o.x,o.y,s.x,s.y,d.x,d.y)&&t.area(d.prev,d,d.next)>=0)return!1;d=d.nextZ;}
for(d=e.prevZ;d&&d.z>=_;){if(d!==e.prev&&d!==e.next&&t.pointInTriangle(a.x,a.y,o.x,o.y,s.x,s.y,d.x,d.y)&&t.area(d.prev,d,d.next)>=0)return!1;d=d.prevZ;}
return!0;},t.cureLocalIntersections=function(e,n,i){var r=e;do{var a=r.prev,o=r.next.next;!t.equals(a,o)&&t.intersects(a,r,r.next,o)&&t.locallyInside(a,o)&&t.locallyInside(o,a)&&(n.push(a.i/i),n.push(r.i/i),n.push(o.i/i),t.removeNode(r),t.removeNode(r.next),r=e=o),r=r.next;}while(r!==e);return r;},t.splitEarcut=function(e,n,i,r,a,o){var s=e;do{for(var l=s.next.next;l!==s.prev;){if(s.i!==l.i&&t.isValidDiagonal(s,l)){var u=t.splitPolygon(s,l);return s=t.filterPoints(s,s.next),u=t.filterPoints(u,u.next),t.earcutLinked(s,n,i,r,a,o),void t.earcutLinked(u,n,i,r,a,o);}
l=l.next;}
s=s.next;}while(s!==e);},t.eliminateHoles=function(e,n,i,r){var a,o,s,l,u,h=[];for(a=0,o=n.length;a<o;a++){s=n[a]*r,l=a<o-1?n[a+1]*r:e.length,(u=t.linkedList(e,s,l,r,!1))===u.next&&(u.steiner=!0),h.push(t.getLeftmost(u));}
for(h.sort(t.compareX),a=0;a<h.length;a++){t.eliminateHole(h[a],i),i=t.filterPoints(i,i.next);}
return i;},t.compareX=function(t,e){return t.x-e.x;},t.eliminateHole=function(e,n){if(n=t.findHoleBridge(e,n)){var i=t.splitPolygon(n,e);t.filterPoints(i,i.next);}},t.findHoleBridge=function(e,n){var i,r=n,a=e.x,o=e.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var l=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(l<=a&&l>s){if(s=l,l===a){if(o===r.y)return r;if(o===r.next.y)return r.next;}
i=r.x<r.next.x?r:r.next;}}
r=r.next;}while(r!==n);if(!i)return null;if(a===s)return i.prev;var u,h=i,c=i.x,_=i.y,f=1/0;for(r=i.next;r!==h;){a>=r.x&&r.x>=c&&a!==r.x&&t.pointInTriangle(o<_?a:s,o,c,_,o<_?s:a,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(a-r.x))<f||u===f&&r.x>i.x)&&t.locallyInside(r,e)&&(i=r,f=u),r=r.next;}
return i;},t.indexCurve=function(e,n,i,r){var a=e;do{null===a.z&&(a.z=t.zOrder(a.x,a.y,n,i,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;}while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,t.sortLinked(a);},t.sortLinked=function(t){var e,n,i,r,a,o,s,l,u=1;do{for(n=t,t=null,a=null,o=0;n;){for(o++,i=n,s=0,e=0;e<u&&(s++,i=i.nextZ);e++){}
for(l=u;s>0||l>0&&i;){0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;}
n=i;}
a.nextZ=null,u*=2;}while(o>1);return t;},t.zOrder=function(t,e,n,i,r){return t=32767*(t-n)*r,e=32767*(e-i)*r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1;},t.getLeftmost=function(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next;}while(e!==t);return n;},t.pointInTriangle=function(t,e,n,i,r,a,o,s){return(r-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(i-s)-(n-o)*(e-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0;},t.isValidDiagonal=function(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!t.intersectsPolygon(e,n)&&t.locallyInside(e,n)&&t.locallyInside(n,e)&&t.middleInside(e,n);},t.area=function(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y);},t.equals=function(t,e){return t.x===e.x&&t.y===e.y;},t.intersects=function(e,n,i,r){return!!(t.equals(e,n)&&t.equals(i,r)||t.equals(e,r)&&t.equals(i,n))||t.area(e,n,i)>0!=t.area(e,n,r)>0&&t.area(i,r,e)>0!=t.area(i,r,n)>0;},t.intersectsPolygon=function(e,n){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==n.i&&i.next.i!==n.i&&t.intersects(i,i.next,e,n))return!0;i=i.next;}while(i!==e);return!1;},t.locallyInside=function(e,n){return t.area(e.prev,e,e.next)<0?t.area(e,n,e.next)>=0&&t.area(e,e.prev,n)>=0:t.area(e,n,e.prev)<0||t.area(e,e.next,n)<0;},t.middleInside=function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;}while(n!==t);return i;},t.splitPolygon=function(t,e){var n=new rt(t.i,t.x,t.y),i=new rt(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i;},t.insertNode=function(t,e,n,i){var r=new rt(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r;},t.removeNode=function(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ);},t.signedArea=function(t,e,n,i){for(var r=0,a=e,o=n-i;a<n;a+=i){r+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;}
return r;},t;}(),rt=function(){function t(t,e,n){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1;}
return r(t,"laya.webgl.shapes.EarcutNode"),t;}(),at=(function(){function t(t,e,n,i,r,a,o){this.lineWidth=t,this.lineColor=e,this.lineAlpha=n,this.fillColor=i,this.fillAlpha=r,this.shape=o,this.fill=a;}
r(t,"laya.webgl.shapes.GeometryData");var e=t.prototype;e.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape);},e.getIndexData=function(){return null;},e.getVertexData=function(){return null;},e.destroy=function(){this.shape=null;};}(),function(){function t(t){if(t instanceof Float32Array)this.points=t;else if(t instanceof Array){t.length;this.points=new Float32Array(t);}}
r(t,"laya.webgl.shapes.Vertex");var e=t.prototype;n.imps(e,{"laya.webgl.shapes.IShape":!0}),e.getData=function(t,e,n){},e.needUpdate=function(t){return!1;},e.rebuild=function(t){},e.setMatrix=function(t){};}(),function(){function t(t){void 0===t&&(t=1e4),this._renderType=t;}
r(t,"laya.webgl.submit.Submit");var e=t.prototype;return n.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.releaseRender=function(){var e=t._cache;e[e._length++]=this,this.shaderValue.release(),this._vb=null;},e.getRenderType=function(){return this._renderType;},e.renderSubmit=function(){if(0===this._numEle)return 1;var t=this.shaderValue.textureHost;if(t){var e=t.source;if(!t.bitmap||!e)return 1;this.shaderValue.texture=e;}
this._vb.bind_upload(this._ib);var n=It.mainContext;return this.shaderValue.upload(),H.activeBlendFunction!==this._blendFn&&(n.enable(3042),this._blendFn(n),H.activeBlendFunction=this._blendFn),M.drawCall++,M.trianglesFaces+=this._numEle/3,n.drawElements(4,this._numEle,5123,this._startIdx),1;},t.__init__=function(){var e=t.RENDERBASE=new t(-1);e.shaderValue=new bt(0,0),e.shaderValue.ALPHA=-1234;},t.createSubmit=function(e,n,i,r,a){var o=t._cache._length?t._cache[--t._cache._length]:new t();null==i&&((i=o._selfVb||(o._selfVb=Qt.create(-1))).clear(),r=0),o._ib=n,o._vb=i,o._startIdx=r*pt.BYTES_PIDX,o._numEle=0;var s=e._nBlendType;o._blendFn=e._targets?H.targetFns[s]:H.fns[s],o.shaderValue=a,o.shaderValue.setValue(e._shader2D);var l=e._shader2D.filters;return l&&o.shaderValue.setFilters(l),o;},t.createShape=function(e,n,i,r,a,o){var s=t._cache._length?t._cache[--t._cache._length]:new t();s._ib=n,s._vb=i,s._numEle=r,s._startIdx=a,s.shaderValue=o,s.shaderValue.setValue(e._shader2D);var l=e._nBlendType;return s._blendFn=e._targets?H.targetFns[l]:H.fns[l],s;},t.TYPE_2D=1e4,t.TYPE_CANVAS=10003,t.TYPE_CMDSETRT=10004,t.TYPE_CUSTOM=10005,t.TYPE_BLURRT=10006,t.TYPE_CMDDESTORYPRERT=10007,t.TYPE_DISABLESTENCIL=10008,t.TYPE_OTHERIBVB=10009,t.TYPE_PRIMITIVE=10010,t.TYPE_RT=10011,t.TYPE_BLUR_RT=10012,t.TYPE_TARGET=10013,t.TYPE_CHANGE_VALUE=10014,t.TYPE_SHAPE=10015,t.TYPE_TEXTURE=10016,t.TYPE_FILLTEXTURE=10017,t.RENDERBASE=null,t._cache=(t._cache=[],t._cache._length=0,t._cache),t;}()),ot=function(){function t(){this.fun=null,this.args=null;}
r(t,"laya.webgl.submit.SubmitCMD");var e=t.prototype;return n.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.renderSubmit=function(){return this.fun.apply(null,this.args),1;},e.getRenderType=function(){return 0;},e.releaseRender=function(){var e=t._cache;e[e._length++]=this;},t.create=function(e,n){var i=t._cache._length?t._cache[--t._cache._length]:new t();return i.fun=n,i.args=e,i;},t._cache=(t._cache=[],t._cache._length=0,t._cache),t;}(),st=function(){function t(){this.variables={};}
r(t,"laya.webgl.submit.SubmitCMDScope");var e=t.prototype;return e.getValue=function(t){return this.variables[t];},e.addValue=function(t,e){return this.variables[t]=e;},e.setValue=function(t,e){return this.variables.hasOwnProperty(t)?this.variables[t]=e:null;},e.clear=function(){for(var t in this.variables){delete this.variables[t];}},e.recycle=function(){this.clear(),t.POOL.push(this);},t.create=function(){var e=t.POOL.pop();return e||(e=new t()),e;},t.POOL=[],t;}(),lt=function(){function t(){this.offset=0,this.startIndex=0,this._mat=I.create();}
r(t,"laya.webgl.submit.SubmitOtherIBVB");var e=t.prototype;return n.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.releaseRender=function(){var e=t._cache;e[e._length++]=this;},e.getRenderType=function(){return 10009;},e.renderSubmit=function(){var e=this._shaderValue.textureHost;if(e){var n=e.source;if(!e.bitmap||!n)return 1;this._shaderValue.texture=n;}
this._vb.bind_upload(this._ib);var i=yt.worldMatrix4,r=I.TEMP;I.mulPre(this._mat,i[0],i[1],i[4],i[5],i[12],i[13],r);var a=yt.worldMatrix4=t.tempMatrix4;a[0]=r.a,a[1]=r.b,a[4]=r.c,a[5]=r.d,a[12]=r.tx,a[13]=r.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var o=It.mainContext;return H.activeBlendFunction!==this._blendFn&&(o.enable(3042),this._blendFn(o),H.activeBlendFunction=this._blendFn),M.drawCall++,M.trianglesFaces+=this._numEle/3,o.drawElements(4,this._numEle,5123,this.startIndex),yt.worldMatrix4=i,Ft.activeShader=null,1;},t.create=function(e,n,i,r,a,o,s,l,u){void 0===u&&(u=0);var h=t._cache._length?t._cache[--t._cache._length]:new t();h._ib=i,h._vb=n,h._numEle=r,h._shader=a,h._shaderValue=o;var c=e._nBlendType;switch(h._blendFn=e._targets?H.targetFns[c]:H.fns[c],u){case 0:h.offset=0,h.startIndex=l/(pt.BYTES_PE*n.vertexStride)*1.5,h.startIndex*=pt.BYTES_PIDX;break;case 1:h.startIndex=s,h.offset=l;}
return h;},t._cache=(t._cache=[],t._cache._length=0,t._cache),t.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t;}(),ut=function(){function t(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new T(),this.screenRect=new T();}
r(t,"laya.webgl.submit.SubmitScissor");var e=t.prototype;return n.imps(e,{"laya.webgl.submit.ISubmit":!0}),e._scissor=function(t,e,n,i){var r=yt.worldMatrix4,a=r[0],o=r[5];if(t=t*a+r[12],e=e*o+r[13],n*=a,i*=o,n<1||i<1)return!1;var s=t+n,l=e+i;t<0&&(t=0,n=s-t),e<0&&(e=0,i=l-e);var u=yt.worldClipRect;if(t=Math.max(t,u.x),e=Math.max(e,u.y),n=Math.min(s,u.right)-t,i=Math.min(l,u.bottom)-e,n<1||i<1)return!1;var h=yt.worldScissorTest;return this.screenRect.copyFrom(u),u.x=t,u.y=e,u.width=n,u.height=i,yt.worldScissorTest=!0,e=yt.height-e-i,It.mainContext.scissor(t,e,n,i),It.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),h?(e=yt.height-this.screenRect.y-this.screenRect.height,It.mainContext.scissor(this.screenRect.x,e,this.screenRect.width,this.screenRect.height),It.mainContext.enable(3089)):(It.mainContext.disable(3089),yt.worldScissorTest=!1),u.copyFrom(this.screenRect),!0;},e._scissorWithTagart=function(t,e,n,i){if(n<1||i<1)return!1;var r=t+n,a=e+i;t<0&&(t=0,n=r-t),e<0&&(e=0,i=a-e);var o=yt.worldClipRect;if(t=Math.max(t,o.x),e=Math.max(e,o.y),n=Math.min(r,o.right)-t,i=Math.min(a,o.bottom)-e,n<1||i<1)return!1;var s=yt.worldScissorTest;return this.screenRect.copyFrom(o),yt.worldScissorTest=!0,o.x=t,o.y=e,o.width=n,o.height=i,e=yt.height-e-i,It.mainContext.scissor(t,e,n,i),It.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),s?(e=yt.height-this.screenRect.y-this.screenRect.height,It.mainContext.scissor(this.screenRect.x,e,this.screenRect.width,this.screenRect.height),It.mainContext.enable(3089)):(It.mainContext.disable(3089),yt.worldScissorTest=!1),o.copyFrom(this.screenRect),!0;},e.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1?this.submitLength+1:(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height),this.submitLength+1);},e.getRenderType=function(){return 0;},e.releaseRender=function(){var e=t._cache;e[e._length++]=this,this.context=null;},t.create=function(e){var n=t._cache._length?t._cache[--t._cache._length]:new t();return n.context=e,n;},t._cache=(t._cache=[],t._cache._length=0,t._cache),t;}(),ht=function(){function t(){this.step=0,this.blendMode=null,this.level=0;}
r(t,"laya.webgl.submit.SubmitStencil");var e=t.prototype;return n.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8();}
return 1;},e.getRenderType=function(){return 0;},e.releaseRender=function(){var e=t._cache;e[e._length++]=this;},e.do1=function(){var t=It.mainContext;t.enable(2960),t.clear(1024),t.colorMask(!1,!1,!1,!1),t.stencilFunc(514,this.level,255),t.stencilOp(7680,7680,7682);},e.do2=function(){var t=It.mainContext;t.stencilFunc(514,this.level+1,255),t.colorMask(!0,!0,!0,!0),t.stencilOp(7680,7680,7680);},e.do3=function(){var t=It.mainContext;t.colorMask(!0,!0,!0,!0),t.stencilOp(7680,7680,7680),t.clear(1024),t.disable(2960);},e.do4=function(){var t=It.mainContext;0==this.level&&(t.enable(2960),t.clear(1024)),t.colorMask(!1,!1,!1,!1),t.stencilFunc(519,0,255),t.stencilOp(7680,7680,7682);},e.do5=function(){var t=It.mainContext;t.stencilFunc(514,this.level,255),t.colorMask(!0,!0,!0,!0),t.stencilOp(7680,7680,7680);},e.do6=function(){var t=It.mainContext;H.targetFns[H.TOINT[this.blendMode]](t);},e.do7=function(){var t=It.mainContext;t.colorMask(!1,!1,!1,!1),t.stencilOp(7680,7680,7683);},e.do8=function(){var t=It.mainContext;t.colorMask(!0,!0,!0,!0),t.stencilFunc(514,this.level,255),t.stencilOp(7680,7680,7680);},t.restore=function(e,n,i,r,a){var o;if(e._renderKey=0,t._mask>0&&t._mask--,0==t._mask)o=laya.webgl.submit.SubmitStencil.create(3),e.addRenderObject(o),e._curSubmit=at.RENDERBASE;else{o=laya.webgl.submit.SubmitStencil.create(7),e.addRenderObject(o);var s=e._vb;s._byteLength;if(mt.fillRectImgVb(s,null,n.x,n.y,n.width,n.height,L.DEF_UV,i,r,a,0,0)){e._shader2D.glTexture=null;var l=e._curSubmit=at.createSubmit(e,e._ib,s,(s._byteLength-64)/32*3,bt.create(2,0));l.shaderValue.ALPHA=1,e._submits[e._submits._length++]=l,e._curSubmit._numEle+=6,e._curSubmit=at.RENDERBASE;}else alert("clipRect calc stencil rect error");o=laya.webgl.submit.SubmitStencil.create(8),e.addRenderObject(o);}},t.restore2=function(e,n){var i;e._renderKey=0,t._mask>0&&t._mask--,0==t._mask?(i=laya.webgl.submit.SubmitStencil.create(3),e.addRenderObject(i),e._curSubmit=at.RENDERBASE):(i=laya.webgl.submit.SubmitStencil.create(7),e.addRenderObject(i),e._submits[e._submits._length++]=n,i=laya.webgl.submit.SubmitStencil.create(8),e.addRenderObject(i));},t.create=function(e){var n=t._cache._length?t._cache[--t._cache._length]:new t();return n.step=e,5==e&&++t._mask,n.level=t._mask,n;},t._cache=(t._cache=[],t._cache._length=0,t._cache),t._mask=0,t;}(),ct=function(){function t(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null;}
r(t,"laya.webgl.submit.SubmitTarget");var e=t.prototype;return n.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.renderSubmit=function(){this._vb.bind_upload(this._ib);var t=this.scope.getValue(this.proName);return t&&(this.shaderValue.texture=t.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[t.width,t.height]),this.shaderValue.upload(),this.blend(),M.drawCall++,M.trianglesFaces+=this._numEle/3,It.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1;},e.blend=function(){if(H.activeBlendFunction!==H.fns[this.blendType]){var t=It.mainContext;t.enable(3042),H.fns[this.blendType](t),H.activeBlendFunction=H.fns[this.blendType];}},e.getRenderType=function(){return 0;},e.releaseRender=function(){var e=t._cache;e[e._length++]=this;},t.create=function(e,n,i,r,a,o){var s=t._cache._length?t._cache[--t._cache._length]:new t();return s._ib=n,s._vb=i,s.proName=o,s._startIdx=r*pt.BYTES_PIDX,s._numEle=0,s.blendType=e._nBlendType,s.shaderValue=a,s.shaderValue.setValue(e._shader2D),s;},t._cache=(t._cache=[],t._cache._length=0,t._cache),t;}(),_t=function(){function t(){this._sourceStr=null;}
r(t,"laya.webgl.text.CharSegment");var e=t.prototype;return n.imps(e,{"laya.webgl.text.ICharSegment":!0}),e.textToSpit=function(t){this._sourceStr=t;},e.getChar=function(t){return this._sourceStr.charAt(t);},e.getCharCode=function(t){return this._sourceStr.charCodeAt(t);},e.length=function(){return this._sourceStr.length;},t;}(),ft=function(){function t(){}
var e;return r(t,"laya.webgl.text.DrawText"),t.__init__=function(){t._charsTemp=new Array(),t._drawValue=new e(),t._charSeg=new _t();},t.customCharSeg=function(e){t._charSeg=e;},t.getChar=function(e,n,i){var r=Wt.createOneChar(e,i);return-1!=n&&(t._charsCache[n]=r),r;},t._drawSlow=function(e,n,i,r,a,o,s,l,u,h,c,_,f,d,p){var m,g,y=t._drawValue.value(o,l,u,h,f,d,p),v=0,I=0,x=t._charsTemp,T=0,S=NaN;if(r)for(x.length=r.length,v=0,I=r.length;v<I;v++){S=(g=r[v]).charNum+y.txtID,x[v]=m=t._charsCache[S]||t.getChar(g.char,S,y),m.active();}else{var b=i instanceof laya.utils.WordText?i.toString():i;if(R.CharacterCache){t._charSeg.textToSpit(b);var w=t._charSeg.length();for(x.length=w,v=0,I=w;v<I;v++){S=t._charSeg.getCharCode(v)+y.txtID,x[v]=m=t._charsCache[S]||t.getChar(t._charSeg.getChar(v),S,y),m.active(),T+=m.cw;}}else x.length=0,(m=t.getChar(b,-1,y)).active(),T+=m.cw,x[0]=m;}
var D=0;null!==s&&"left"!==s&&(D=-("center"==s?T/2:T));var C,E,P=NaN,M=0;if(r)for(v=0,I=x.length;v<I;v++){(m=x[v]).isSpace||(g=r[v],P=m.borderSize,C=m.texture,n._drawText(C,c+D+g.x*f-P,_+g.y*d-P,C.width,C.height,a,0,0,0,0));}else{for(v=0,I=x.length;v<I;v++){(m=x[v]).isSpace||(P=m.borderSize,C=m.texture,n._drawText(C,c+D-P,_-P,C.width,C.height,a,0,0,0,0),e&&((E=e[M++])||(E=e[M-1]=[]),E[0]=C,E[1]=D-P,E[2]=-P)),D+=m.cw;}
e&&(e.length=M);}},t._drawFast=function(t,e,n,i,r){for(var a,o,s=0,l=t.length;s<l;s++){(a=(o=t[s])[0]).active(),e._drawText(a,i+o[1],r+o[2],a.width,a.height,n,0,0,0,0);}},t.drawText=function(e,i,r,a,o,s,l,u,h,c,_,d){if(void 0===d&&(d=0),!(i&&0===i.length||r&&0===r.length)){var p=a.a,m=a.d;(0!==a.b||0!==a.c)&&(p=m=1);var g=1!==p||1!==m;if(g&&n.stage.transform){var y=n.stage.transform;g=y.a===p&&y.d===m;}else g=!1;if(g){var v=(a=a.copyTo(St._tmpMatrix)).tx,I=a.ty;a.scale(1/p,1/m),a._checkTransform(),c*=p,_*=m,c+=v-a.tx,_+=I-a.ty;}else p=m=1;if(r)t._drawSlow(null,e,i,r,a,o,s,l,u,h,c,_,p,m,d);else{if(null===i.toUpperCase){var x=p+1e5*m,T=i;return void(T.changed||T.id!==x?(T.id=x,T.changed=!1,t._drawSlow(T.save,e,i,r,a,o,s,l,u,h,c,_,p,m,d)):t._drawFast(T.save,e,a,c,_));}
var S=i+o.toString()+l+u+h+p+m+s,b=t._textsCache[S];R.CharacterCache?b?t._drawFast(b,e,a,c,_):(t._textsCache.__length||(t._textsCache.__length=0),t._textsCache.__length>f.WebGLTextCacheCount&&((t._textsCache={}).__length=0,t._curPoolIndex=0),t._textCachesPool[t._curPoolIndex]?(b=t._textsCache[S]=t._textCachesPool[t._curPoolIndex],b.length=0):t._textCachesPool[t._curPoolIndex]=b=t._textsCache[S]=[],t._textsCache.__length++,t._curPoolIndex++,t._drawSlow(b,e,i,r,a,o,s,l,u,h,c,_,p,m,d)):t._drawSlow(b,e,i,r,a,o,s,l,u,h,c,_,p,m,d);}}},t._charsTemp=null,t._textCachesPool=[],t._curPoolIndex=0,t._charsCache={},t._textsCache={},t._drawValue=null,t.d=[],t._charSeg=null,t.__init$=function(){e=function(){function t(){}
r(t,"");return t.prototype.value=function(e,n,i,r,a,o,s){this.font=e,this.fillColor=n,this.borderColor=i,this.lineWidth=r,this.scaleX=a,this.scaleY=o,this.underLine=s;var l=e.toString()+a+o+r+n+i+s;return this.txtID=t._keymap[l],this.txtID||(this.txtID=1e-7*++t._keymapCount,t._keymap[l]=this.txtID),this;},t.clear=function(){t._keymap={},t._keymapCount=1;},t._keymap={},t._keymapCount=1,t;}();},t;}(),dt=function(){function t(e){this._index=0,this._size=14,this._italic=-2,t._cache2=t._cache2||[],this.setFont(e||"14px Arial");}
r(t,"laya.webgl.text.FontInContext");var e=t.prototype;return e.setFont=function(e){var n=t._cache2[e];if(n)this._words=n[0],this._size=n[1];else{this._words=e.split(" ");for(var i=0,r=this._words.length;i<r;i++){if(this._words[i].indexOf("px")>0){this._index=i;break;}}
this._size=parseInt(this._words[this._index]),t._cache2[e]=[this._words,this._size];}
this._text=null,this._italic=-2;},e.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic;},e.hasType=function(t){for(var e=0,n=this._words.length;e<n;e++){if(this._words[e]===t)return e;}
return-1;},e.removeType=function(t){for(var e=0,n=this._words.length;e<n;e++){if(this._words[e]===t){this._words.splice(e,1),this._index>e&&this._index--;break;}}
this._text=null,this._italic=-2;},e.copyTo=function(t){return t._text=this._text,t._size=this._size,t._index=this._index,t._words=this._words.slice(),t._italic=-2,t;},e.toString=function(){return this._text?this._text:this._text=this._words.join(" ");},a(0,e,"size",function(){return this._size;},function(t){this._size=t,this._words[this._index]=t+"px",this._text=null;}),t.create=function(e){var n=t._cache[e];return n||(n=t._cache[e]=new t(e));},t.EMPTY=new t(),t._cache={},t._cache2=null,t;}(),pt=function(){function t(){}
return r(t,"laya.webgl.utils.CONST3D2D"),t.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],t.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],t._TMPARRAY=[],t._OFFSETX=0,t._OFFSETY=0,i(t,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT;},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT;}]),t;}(),mt=function(){function t(){}
return r(t,"laya.webgl.utils.GlUtils"),t.make2DProjection=function(t,e,n){return[2/t,0,0,0,0,-2/e,0,0,0,0,2/n,0,-1,1,0,1];},t.fillIBQuadrangle=function(t,e){if(e>65535/4)throw Error("IBQuadrangle count:"+e+" must<:"+Math.floor(65535/4));e=Math.floor(e),t._resizeBuffer(6*(e+1)*2,!1),t.byteLength=t.bufferLength;for(var n=t.getUint16Array(),i=0,r=0;r<e;r++){n[i++]=4*r,n[i++]=4*r+2,n[i++]=4*r+1,n[i++]=4*r,n[i++]=4*r+3,n[i++]=4*r+2;}
return t.setNeedUpload(),!0;},t.expandIBQuadrangle=function(e,n){e.bufferLength>=6*n*2||t.fillIBQuadrangle(e,n);},t.mathCeilPowerOfTwo=function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t;},t.fillQuadrangleImgVb=function(t,e,n,i,r,a,o,s){var l=16+(t._byteLength>>2);t.byteLength=l<<2;var u=t.getFloat32Array();u[(l-=16)+2]=r[0],u[l+3]=r[1],u[l+6]=r[2],u[l+7]=r[3],u[l+10]=r[4],u[l+11]=r[5],u[l+14]=r[6],u[l+15]=r[7];var h=a.a,c=a.b,_=a.c,f=a.d;if(1!==h||0!==c||0!==_||1!==f){a.bTransform=!0;var d=a.tx+o,p=a.ty+s;u[l]=(i[0]+e)*h+(i[1]+n)*_+d,u[l+1]=(i[0]+e)*c+(i[1]+n)*f+p,u[l+4]=(i[2]+e)*h+(i[3]+n)*_+d,u[l+5]=(i[2]+e)*c+(i[3]+n)*f+p,u[l+8]=(i[4]+e)*h+(i[5]+n)*_+d,u[l+9]=(i[4]+e)*c+(i[5]+n)*f+p,u[l+12]=(i[6]+e)*h+(i[7]+n)*_+d,u[l+13]=(i[6]+e)*c+(i[7]+n)*f+p;}else a.bTransform=!1,e+=a.tx+o,n+=a.ty+s,u[l]=e+i[0],u[l+1]=n+i[1],u[l+4]=e+i[2],u[l+5]=n+i[3],u[l+8]=e+i[4],u[l+9]=n+i[5],u[l+12]=e+i[6],u[l+13]=n+i[7];return t._upload=!0,!0;},t.fillTranglesVB=function(t,e,n,i,r,a,o){var s=(t._byteLength>>2)+i.length;t.byteLength=s<<2;var l=t.getFloat32Array();s-=i.length;for(var u=i.length,h=r.a,c=r.b,_=r.c,f=r.d,d=0;d<u;d+=4){if(l[s+d+2]=i[d+2],l[s+d+3]=i[d+3],1!==h||0!==c||0!==_||1!==f){r.bTransform=!0;var p=r.tx+a,m=r.ty+o;l[s+d]=(i[d]+e)*h+(i[d+1]+n)*_+p,l[s+d+1]=(i[d]+e)*c+(i[d+1]+n)*f+m;}else r.bTransform=!1,e+=r.tx+a,n+=r.ty+o,l[s+d]=e+i[d],l[s+d+1]=n+i[d+1];}
return t._upload=!0,!0;},t.copyPreImgVb=function(t,e,n){var i=t._byteLength>>2;t.byteLength=i+16<<2;for(var r=t.getFloat32Array(),a=0,o=i-16;a<4;a++){r[i]=r[o]+e,++o,r[++i]=r[o]+n,++o,r[++i]=r[o],++o,r[++i]=r[o],++i,++o;}
t._upload=!0;},t.fillRectImgVb=function(t,e,n,i,r,a,o,s,l,u,h,c,_){void 0===_&&(_=!1);var f,d,p,m,g,y,v,I,x,T,S,b,w,D,C,E,P=1,M=s.a,A=s.b,O=s.c,R=s.d,L=e&&e.width<99999999;if(1!==M||0!==A||0!==O||1!==R?(s.bTransform=!0,0===A&&0===O&&(P=23,x=r+n,T=a+i,f=M*n+(S=s.tx+l),p=M*x+S,d=R*i+(b=s.ty+u),m=R*T+b)):(P=23,s.bTransform=!1,p=(f=n+s.tx+l)+r,m=(d=i+s.ty+u)+a),L&&(g=e.x,y=e.y,v=e.width+g,I=e.height+y),1!==P){if(Math.min(f,p)>=v)return!1;if(Math.min(d,m)>=I)return!1;if(Math.max(p,f)<=g)return!1;if(Math.max(m,d)<=y)return!1;}
var F=t._byteLength>>2;t.byteLength=F+16<<2;var V=t.getFloat32Array();switch(V[F+2]=o[0],V[F+3]=o[1],V[F+6]=o[2],V[F+7]=o[3],V[F+10]=o[4],V[F+11]=o[5],V[F+14]=o[6],V[F+15]=o[7],P){case 1:S=s.tx+l,b=s.ty+u;var N=M*n,U=O*i,G=R*i,B=A*n,k=M*(x=r+n),H=O*(T=a+i),z=R*T,j=A*x;_?(w=N+U+S,C=Math.round(w)-w,D=G+B+b,E=Math.round(D)-D,V[F]=w+C,V[F+1]=D+E,V[F+4]=k+U+S+C,V[F+5]=G+j+b+E,V[F+8]=k+H+S+C,V[F+9]=z+j+b+E,V[F+12]=N+H+S+C,V[F+13]=z+B+b+E):(V[F]=N+U+S,V[F+1]=G+B+b,V[F+4]=k+U+S,V[F+5]=G+j+b,V[F+8]=k+H+S,V[F+9]=z+j+b,V[F+12]=N+H+S,V[F+13]=z+B+b);break;case 23:_?(w=f+h,C=Math.round(w)-w,D=d,E=Math.round(D)-D,V[F]=w+C,V[F+1]=D+E,V[F+4]=p+h+C,V[F+5]=d+E,V[F+8]=p+C,V[F+9]=m+E,V[F+12]=f+C,V[F+13]=m+E):(V[F]=f+h,V[F+1]=d,V[F+4]=p+h,V[F+5]=d,V[F+8]=p,V[F+9]=m,V[F+12]=f,V[F+13]=m);}
return t._upload=!0,!0;},t.fillLineVb=function(e,n,i,r,a,o,s,l){var u=.5*s,h=t._fillLineArray,c=-(r-o),_=i-a,f=Math.sqrt(c*c+_*_);c/=f,_/=f,c*=u,_*=u,h[0]=i-c,h[1]=r-_,h[4]=i+c,h[5]=r+_,h[8]=a+c,h[9]=o+_,h[12]=a-c,h[13]=o-_,l&&l.transformPointArray(h,h);var d=16+(e._byteLength>>2);return e.byteLength=d<<2,e.insertData(h,d-16),!0;},t._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t;}(),gt=(function(){function t(){}
r(t,"laya.webgl.utils.MatirxArray"),t.ArrayMul=function(e,n,i){if(e){if(n)for(var r=NaN,a=NaN,o=NaN,s=NaN,l=0;l<4;l++){r=e[l],a=e[l+4],o=e[l+8],s=e[l+12],i[l]=r*n[0]+a*n[1]+o*n[2]+s*n[3],i[l+4]=r*n[4]+a*n[5]+o*n[6]+s*n[7],i[l+8]=r*n[8]+a*n[9]+o*n[10]+s*n[11],i[l+12]=r*n[12]+a*n[13]+o*n[14]+s*n[15];}else t.copyArray(e,i);}else t.copyArray(n,i);},t.copyArray=function(t,e){if(t&&e)for(var n=0;n<t.length;n++){e[n]=t[n];}};}(),function(){function t(t,e,n){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=t,this._vb=new Qt(t,35048),e&&this._vb._resizeBuffer(e,!1),this._ib=new $t(),n&&this._ib._resizeBuffer(n,!1);}
r(t,"laya.webgl.utils.Mesh2D");var e=t.prototype;return e.cloneWithNewVB=function(){var e=new t(this._stride,0,0);return e._ib=this._ib,e._quadNum=this._quadNum,e._attribInfo=this._attribInfo,e;},e.cloneWithNewVBIB=function(){var e=new t(this._stride,0,0);return e._attribInfo=this._attribInfo,e;},e.getVBW=function(){return this._vb.setNeedUpload(),this._vb;},e.getVBR=function(){return this._vb;},e.getIBR=function(){return this._ib;},e.getIBW=function(){return this._ib.setNeedUpload(),this._ib;},e.createQuadIB=function(t){this._quadNum=t,this._ib._resizeBuffer(6*t*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var e=this._ib.getUint16Array(),n=0,i=0,r=0;r<t;r++){e[n++]=i,e[n++]=i+2,e[n++]=i+1,e[n++]=i,e[n++]=i+3,e[n++]=i+2,i+=4;}
this._ib.setNeedUpload();},e.setAttributes=function(t){if(this._attribInfo=t,this._attribInfo.length%3!=0)throw "Mesh2D setAttributes error!";},e.getEleNum=function(){return this._ib.getBuffer().byteLength/2;},e.releaseMesh=function(){},e.destroy=function(){},e.clearVB=function(){this._vb.clear();},t._gvaoid=0,t;}()),yt=function(){function t(){}
return r(t,"laya.webgl.utils.RenderState2D"),t.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];},t.mat2MatArray=function(e,n){var i=e,r=n;return r[0]=i.a,r[1]=i.b,r[2]=t.EMPTYMAT4_ARRAY[2],r[3]=t.EMPTYMAT4_ARRAY[3],r[4]=i.c,r[5]=i.d,r[6]=t.EMPTYMAT4_ARRAY[6],r[7]=t.EMPTYMAT4_ARRAY[7],r[8]=t.EMPTYMAT4_ARRAY[8],r[9]=t.EMPTYMAT4_ARRAY[9],r[10]=t.EMPTYMAT4_ARRAY[10],r[11]=t.EMPTYMAT4_ARRAY[11],r[12]=i.tx,r[13]=i.ty,r[14]=t.EMPTYMAT4_ARRAY[14],r[15]=t.EMPTYMAT4_ARRAY[15],n;},t.restoreTempArray=function(){t.TEMPMAT4_ARRAY[0]=1,t.TEMPMAT4_ARRAY[1]=0,t.TEMPMAT4_ARRAY[4]=0,t.TEMPMAT4_ARRAY[5]=1,t.TEMPMAT4_ARRAY[12]=0,t.TEMPMAT4_ARRAY[13]=0;},t.clear=function(){t.worldScissorTest=!1,t.worldShaderDefines=null,t.worldFilters=null,t.worldAlpha=1,t.worldClipRect.x=t.worldClipRect.y=0,t.worldClipRect.width=t.width,t.worldClipRect.height=t.height,t.curRenderTarget=null;},t._MAXSIZE=99999999,t.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.worldMatrix4=t.TEMPMAT4_ARRAY,t.worldAlpha=1,t.worldScissorTest=!1,t.worldFilters=null,t.worldShaderDefines=null,t.curRenderTarget=null,t.width=0,t.height=0,i(t,["worldMatrix",function(){return this.worldMatrix=new I();},"worldClipRect",function(){return this.worldClipRect=new T(0,0,99999999,99999999);}]),t;}(),vt=function(){function t(t,n,i,r,a){function o(t){var n=[],i=new e(n);return s._compileToTree(i,t.split("\n"),0,n,a),i;}
var s=this,l=h.now();this._VS=o(n),this._PS=o(i),this._nameMap=r,h.now()-l>2&&console.log("ShaderCompile use time:"+(h.now()-l)+"  size:"+n.length+"/"+i.length);}
var e,n;r(t,"laya.webgl.utils.ShaderCompile");var a=t.prototype;return a._compileToTree=function(n,i,r,a,o){var s,l,u,h,c,_,f,d=0,p=0,m=0,g=0;for(p=r;p<i.length;p++){if(!((u=i[p]).length<1)&&0!==(d=u.indexOf("//"))){if(d>=0&&(u=u.substr(0,d)),s=f||new e(a),f=null,s.text=u,s.noCompile=!0,(d=u.indexOf("#"))>=0){for(h="#",g=d+1,m=u.length;g<m;g++){var y=u.charAt(g);if(" "===y||"\t"===y||"?"===y)break;h+=y;}
switch(s.name=h,h){case "#ifdef":case "#ifndef":if(s.src=u,s.noCompile=null!=u.match(/[!&|()=<>]/),s.noCompile?console.log("function():Boolean{return "+u.substr(d+s.name.length)+"}"):(_=u.replace(/^\s*/,"").split(/\s+/),s.setCondition(_[1],"#ifdef"===h?1:2),s.text="//"+s.text),s.setParent(n),n=s,o)for(_=u.substr(g).split(t._splitToWordExps3),g=0;g<_.length;g++){(u=_[g]).length&&(o[u]=!0);}
continue;case "#if":if(s.src=u,s.noCompile=!0,s.setParent(n),n=s,o)for(_=u.substr(g).split(t._splitToWordExps3),g=0;g<_.length;g++){(u=_[g]).length&&"defined"!=u&&(o[u]=!0);}
continue;case "#else":s.src=u,l=(n=n.parent).childs[n.childs.length-1],s.noCompile=l.noCompile,s.noCompile||(s.condition=l.condition,s.conditionType=1==l.conditionType?2:1,s.text="//"+s.text+" "+l.text+" "+s.conditionType),s.setParent(n),n=s;continue;case "#endif":l=(n=n.parent).childs[n.childs.length-1],s.noCompile=l.noCompile,s.noCompile||(s.text="//"+s.text),s.setParent(n);continue;case "#include":_=t.splitToWords(u,null);var v=t.includes[_[1]];if(!v)throw "ShaderCompile error no this include file:"+_[1];if((d=_[0].indexOf("?"))<0){s.setParent(n),u=v.getWith("with"==_[2]?_[3]:null),this._compileToTree(s,u.split("\n"),0,a,o),s.text="";continue;}
s.setCondition(_[0].substr(d+1),1),s.text=v.getWith("with"==_[2]?_[3]:null);break;case "#import":c=(_=t.splitToWords(u,null))[1],a.push({node:s,file:t.includes[c],ofs:s.text.length});continue;}}else{if((l=n.childs[n.childs.length-1])&&!l.name){a.length>0&&t.splitToWords(u,l),f=s,l.text+="\n"+u;continue;}
a.length>0&&t.splitToWords(u,s);}
s.setParent(n);}}},a.createShader=function(t,e,n){var i={},r="";if(t)for(var a in t){r+="#define "+a+"\n",i[a]=!0;}
var o=this._VS.toscript(i,[]),s=this._PS.toscript(i,[]);return(n||Yt.create)(r+o.join("\n"),r+s.join("\n"),e,this._nameMap);},t._parseOne=function(e,n,i,r,a,o){var s={type:t.shaderParamsMap[i[r+1]],name:i[r+2],size:isNaN(parseInt(i[r+3]))?1:parseInt(i[r+3])};return o&&("attribute"==a?e.push(s):n.push(s)),":"==i[r+3]&&(s.type=i[r+4],r+=2),r+=2;},t.addInclude=function(e,i){if(!i||0===i.length)throw new Error("add shader include file err:"+e);if(t.includes[e])throw new Error("add shader include file err, has add:"+e);t.includes[e]=new n(i);},t.preGetParams=function(e,n){var i=[e,n],r={},a=[],o=[],s={},l=[];r.attributes=a,r.uniforms=o,r.defines=s;for(var u=0,h=0,c=0;c<2;c++){i[c]=i[c].replace(t._removeAnnotation,"");var _,f=i[c].match(t._reg);for(u=0,h=f.length;u<h;u++){var d=f[u];if("attribute"==d||"uniform"==d)u=t._parseOne(a,o,f,u,d,!0);else{if("#define"==d){l[d=f[++u]]=1;continue;}
if("#ifdef"==d){s[_=f[++u]]=s[_]||[];for(u++;u<h;u++){if("attribute"==(d=f[u])||"uniform"==d)u=t._parseOne(a,o,f,u,d,l[_]);else if("#else"==d)for(u++;u<h;u++){if("attribute"==(d=f[u])||"uniform"==d)u=t._parseOne(a,o,f,u,d,!l[_]);else if("#endif"==d)break;}}}}}}
return r;},t.splitToWords=function(t,e){for(var n,i,r=[],a=-1,o=0,s=t.length;o<s;o++){if(n=t.charAt(o)," \t=+-*/&%!<>()'\",;".indexOf(n)>=0){if(a>=0&&o-a>1&&(i=t.substr(a,o-a),r.push(i)),'"'==n||"'"==n){var l=t.indexOf(n,o+1);if(l<0)throw "Sharder err:"+t;r.push(t.substr(o+1,l-o-1)),o=l,a=-1;continue;}
"("==n&&e&&r.length>0&&(i=r[r.length-1]+";","vec4;main;".indexOf(i)<0&&(e.useFuns+=i)),a=-1;}else a<0&&(a=o);}
return a<s&&s-a>1&&(i=t.substr(a,s-a),r.push(i)),r;},t.IFDEF_NO=0,t.IFDEF_YES=1,t.IFDEF_ELSE=2,t.IFDEF_PARENT=3,t._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),t._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),t._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),t.includes={},i(t,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680};},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g");}]),t.__init$=function(){e=function(){function t(t){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=t;}
r(t,"");var e=t.prototype;return e.setParent=function(t){t.childs.push(this),this.z=t.z+1,this.parent=t;},e.setCondition=function(t,e){t&&(this.conditionType=e,t=t.replace(/(\s*$)/g,""),this.condition=function(){return this[t];},this.condition.__condition=t);},e.toscript=function(e,n){return this._toscript(e,n,++t.__id);},e._toscript=function(t,e,n){if(this.childs.length<1&&!this.text)return e;e.length;if(this.condition){var i=!!this.condition.call(t);if(2===this.conditionType&&(i=!i),!i)return e;}
if(this.text&&e.push(this.text),this.childs.length>0&&this.childs.forEach(function(i,r,a){i._toscript(t,e,n);}),this.includefiles.length>0&&this.useFuns.length>0)for(var r,a=0,o=this.includefiles.length;a<o;a++){this.includefiles[a].curUseID!=n&&(r=this.includefiles[a].file.getFunsScript(this.useFuns)).length>0&&(this.includefiles[a].curUseID=n,e[0]=r+e[0]);}
return e;},t.__id=1,t;}(),n=function(){function e(e){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=e;for(var n=0,i=0,r=0;;){if((n=e.indexOf("#begin",n))<0)break;for(r=n+5;;){if((r=e.indexOf("#end",r))<0)break;if("i"!==e.charAt(r+4))break;r+=5;}
if(r<0)throw "add include err,no #end:"+e;i=e.indexOf("\n",n);var a=t.splitToWords(e.substr(n,i-n),null);"code"==a[1]?this.codes[a[2]]=e.substr(i+1,r-i-1):"function"==a[1]&&(i=e.indexOf("function",n),i+="function".length,this.funs[a[3]]=e.substr(i+1,r-i-1),this.funnames+=a[3]+";"),n=r+1;}}
r(e,"");var n=e.prototype;return n.getWith=function(t){var e=t?this.codes[t]:this.script;if(!e)throw "get with error:"+t;return e;},n.getFunsScript=function(t){var e="";for(var n in this.funs){t.indexOf(n+";")>=0&&(e+=this.funs[n]);}
return e;},e;}();},t;}(),It=function(){function t(){}
return r(t,"laya.webgl.WebGL"),t._uint8ArraySlice=function(){for(var t=this.length,e=new Uint8Array(this.length),n=0;n<t;n++){e[n]=this[n];}
return e;},t._float32ArraySlice=function(){for(var t=this.length,e=new Float32Array(this.length),n=0;n<t;n++){e[n]=this[n];}
return e;},t._uint16ArraySlice=function(t){var e,n=arguments,i=0,r=0;if(0===n.length)for(i=this.length,e=new Uint16Array(i),r=0;r<i;r++){e[r]=this[r];}else if(2===n.length){var a=n[0],o=n[1];if(o>a)for(i=o-a,e=new Uint16Array(i),r=a;r<o;r++){e[r-a]=this[r];}else e=new Uint16Array(0);}
return e;},t.expandContext=function(){var t=d.prototype,e=CanvasRenderingContext2D.prototype;e.fillTrangles=t.fillTrangles,qt.__int__(null),e.setIBVB=function(t,e,n,i,r,a,o,s,l,u){void 0===l&&(l=0),void 0===u&&(u=0),null===n&&(this._ib=this._ib||$t.QuadrangleIB,n=this._ib,mt.expandIBQuadrangle(n,i._byteLength/64+8)),this._setIBVB(t,e,n,i,r,a,o,s,l,u);},e.fillTrangles=function(t,e,n,i,r){this._curMat=this._curMat||I.create(),this._vb=this._vb||Qt.create(),this._ib||(this._ib=$t.create(),mt.fillIBQuadrangle(this._ib,o/4));var a=this._vb,o=i.length>>4;mt.fillTranglesVB(a,e,n,i,r||this._curMat,0,0),mt.expandIBQuadrangle(this._ib,a._byteLength/64+8);var s=new bt(1,0);s.textureHost=t;var l=new Jt("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; void main() {vec4 color= texture2D(texture, v_texcoord); color.a*=1.0; gl_FragColor= color;}");a._vertType=3,this._setIBVB(e,n,this._ib,a,6*o,r,l,s,0,0);};},t.enable=function(){if(h.__init__(),S.isConchApp&&!S.isConchWebGL)return C.skinAniSprite=function(){return new tt();},t.expandContext(),!1;if(C.getWebGLContext=function(t){for(var e,n=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i=0;i<n.length;i++){try{e=t.getContext(n[i],{stencil:f.isStencil,alpha:f.isAlpha,antialias:f.isAntialias,premultipliedAlpha:f.premultipliedAlpha,preserveDrawingBuffer:f.preserveDrawingBuffer});}catch(t){}
if(e)return e;}
return null;},null==(t.mainContext=C.getWebGLContext(S._mainCanvas)))return!1;if(S.isWebGL)return!0;y.create=function(t,e){return new te(t,e);},v.create=function(t,e,n,i,r,a,o){return new Xt(t,e,n,i,r,a,o);},S.WebGL=t,S.isWebGL=!0,ft.__init__(),C.createRenderSprite=function(t,e){return new wt(t,e);},C.createWebGLContext2D=function(t){return new St(t);},C.changeWebGLSize=function(t,e){laya.webgl.WebGL.onStageResize(t,e);},C.createGraphics=function(){return new Tt();};var e=C.createFilterAction;return C.createFilterAction=e||function(t){return new Dt();},C.clear=function(t){yt.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var e=S.context.ctx,n=0==e._submits._length||f.preserveDrawingBuffer?_.create(t)._color:P._wgColor;n&&e.clearBG(n[0],n[1],n[2],n[3]),yt.clear();},C.addToAtlas=function(t,e){void 0===e&&(e=!1);var i=t.bitmap;S.optimizeTextureMemory(t.url,t)?n.__typeof(i,"laya.webgl.resource.IMergeAtlasBitmap")&&i.allowMerageInAtlas&&i.on("recovered",t,t.addTextureToAtlas):i.enableMerageInAtlas=!1;},C.isAtlas=function(t){return t instanceof laya.webgl.atlas.AtlasWebGLCanvas;},B._enable(),C.beginFlush=function(){for(var t=B.instance,e=t.getAtlaserCount(),n=0;n<e;n++){var i=t.getAtlaserByIndex(n).texture;i._flashCacheImageNeedFlush&&C.flashFlushImage(i);}},C.drawToCanvas=function(t,e,n,i,r,a){(n<=0||i<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),r-=t.x,a-=t.y,n|=1,i|=1,r|=1,a|=1;var o=Vt.create(n,i,6408,5121,0,!1);o.start(),o.clear(0,0,0,0),S.context.clear(),b.renders[e]._fun(t,S.context,r,yt.height-i+a),S.context.flush(),o.end();var s=o.getData(0,0,n,i);if(o.recycle(),s.byteLength==n*i*4){var l=new jt();l._canvas=h.createElement("canvas"),l.size(n,i);var u=l._canvas.getContext("2d");h.canvas.size(n,i);var c=h.context,_=c.createImageData(n,i);return _.data.set(new Uint8ClampedArray(s.buffer)),l._imgData=_,c.putImageData(_,0,0),u.save(),u.translate(0,i),u.scale(1,-1),u.drawImage(h.canvas.source,0,0),u.restore(),l;}
console.log("drawToCanvas error: w:"+n+",h:"+i+",datalen:"+s.byteLength);},C.createFilterAction=function(t){var e;switch(t){case 32:e=new Dt();}
return e;},C.addTextureToAtlas=function(t){t._uvID++,B._atlasRestore++,t.bitmap.enableMerageInAtlas&&B.instance.addToAtlas(t);},C.getTexturePixels=function(t,e,n,i,r){S.context.ctx.clear();var a=new E();a.graphics.drawTexture(t,-e,-n);var o=Vt.create(i,r);o.start(),o.clear(0,0,0,0),a.render(S.context,0,0),S.context.ctx.flush(),o.end();for(var s=o.getData(0,0,i,r),l=[],u=0,h=r-1;h>=0;h--){for(var c=0;c<i;c++){u=4*(h*i+c),l.push(s[u]),l.push(s[u+1]),l.push(s[u+2]),l.push(s[u+3]);}}
return l;},C.skinAniSprite=function(){return new tt();},g.create=function(t,e){var n=new jt();return n._imgData=e,n.flipY=!1,n;},p._filterStart=function(t,e,n,i,r){var a=t.getValue("bounds"),o=Vt.create(a.width,a.height);if(o.start(),o.clear(0,0,0,0),t.addValue("src",o),t.addValue("ScissorTest",yt.worldScissorTest),yt.worldScissorTest){var s=new T();s.copyFrom(n.ctx._clipRect),t.addValue("clipRect",s),yt.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089);}},p._filterEnd=function(t,e,n,i,r){var a=t.getValue("bounds");t.getValue("src").end();var o=Vt.create(a.width,a.height);o.start(),o.clear(0,0,0,0),t.addValue("out",o),e._set$P("_filterCache",o),e._set$P("_isHaveGlowFilter",t.getValue("_isHaveGlowFilter"));},p._EndTarget=function(t,e){t.getValue("src").recycle();t.getValue("out").end();if(t.getValue("ScissorTest")){yt.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),e.ctx.save();var n=t.getValue("clipRect");e.ctx.clipRect(n.x,n.y,n.width,n.height);}},p._useSrc=function(t){var e=t.getValue("out");e.end(),(e=t.getValue("src")).start(),e.clear(0,0,0,0);},p._endSrc=function(t){t.getValue("src").end();},p._useOut=function(t){var e=t.getValue("src");e.end(),(e=t.getValue("out")).start(),e.clear(0,0,0,0);},p._endOut=function(t){t.getValue("out").end();},p._recycleScope=function(t){t.recycle();},p._filter=function(t,e,n,i){var r=this._next;if(r){var a=t.filters,o=a.length;if(1==o&&32==a[0].type)return e.ctx.save(),e.ctx.setFilters([a[0]]),r._fun.call(r,t,e,n,i),void e.ctx.restore();var s,l,u=st.create(),h=x.TEMP,c=e.ctx._getTransformMatrix(),_=I.create();c.copyTo(_);var f=0,d=0,m=!1,g=t._$P._filterCache?t._$P._filterCache:null;if(!g||t._repaint){m=t._isHaveGlowFilter(),u.addValue("_isHaveGlowFilter",m),m&&(f=50,d=25),(l=new T()).copyFrom(t.getSelfBounds()),l.x+=t.x,l.y+=t.y,l.x-=t.pivotX+4,l.y-=t.pivotY+4;var y=l.x,v=l.y;if(l.width+=f+8,l.height+=f+8,h.x=l.x*_.a+l.y*_.c,h.y=l.y*_.d+l.x*_.b,l.x=h.x,l.y=h.y,h.x=l.width*_.a+l.height*_.c,h.y=l.height*_.d+l.width*_.b,l.width=h.x,l.height=h.y,l.width<=0||l.height<=0)return;g&&g.recycle(),u.addValue("bounds",l);var S=ot.create([u,t,e,0,0],p._filterStart);e.addRenderObject(S),e.ctx._renderKey=0,e.ctx._shader2D.glTexture=null;var b=t.x-y+d,w=t.y-v+d;r._fun.call(r,t,e,b,w),S=ot.create([u,t,e,0,0],p._filterEnd),e.addRenderObject(S);for(var D=0;D<o;D++){0!=D&&(S=ot.create([u],p._useSrc),e.addRenderObject(S),s=bt.create(1,0),I.TEMP.identity(),e.ctx.drawTarget(u,0,0,l.width,l.height,I.TEMP,"out",s,null,H.TOINT.overlay),S=ot.create([u],p._useOut),e.addRenderObject(S));a[D].action.apply3d(u,t,e,0,0);}
S=ot.create([u,e],p._EndTarget),e.addRenderObject(S);}else{if((m=!!t._$P._isHaveGlowFilter&&t._$P._isHaveGlowFilter)&&(f=50,d=25),(l=t.getBounds()).width<=0||l.height<=0)return;l.width+=f,l.height+=f,h.x=l.x*_.a+l.y*_.c,h.y=l.y*_.d+l.x*_.b,l.x=h.x,l.y=h.y,h.x=l.width*_.a+l.height*_.c,h.y=l.height*_.d+l.width*_.b,l.width=h.x,l.height=h.y,u.addValue("out",g);}
n=n-d-t.x,i=i-d-t.y,h.setTo(n,i),_.transformPoint(h),n=h.x+l.x,i=h.y+l.y,s=bt.create(1,0),I.TEMP.identity(),e.ctx.drawTarget(u,n,i,l.width,l.height,I.TEMP,"out",s,null,H.TOINT.overlay),S=ot.create([u],p._recycleScope),e.addRenderObject(S),_.destroy();}},Float32Array.prototype.slice||(Float32Array.prototype.slice=t._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=t._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=t._uint8ArraySlice),!0;},t.onStageResize=function(e,n){null!=t.mainContext&&(t.mainContext.viewport(0,0,e,n),yt.width=e,yt.height=n);},t.onInvalidGLRes=function(){B.instance.freeAll(),D.releaseContentManagers(!0),t.doNodeRepaint(n.stage),t.mainContext.viewport(0,0,yt.width,yt.height),n.stage.event("devicelost");},t.doNodeRepaint=function(e){0==e.numChildren&&e.repaint();for(var n=0;n<e.numChildren;n++){t.doNodeRepaint(e.getChildAt(n));}},t.init=function(e,n,i){t.mainCanvas=e,g._createContext=function(t){return new St(t);},jt._createContext=function(t){return new St(t);};var r=laya.webgl.WebGL.mainContext;if(null!=r.getShaderPrecisionFormat){var a=r.getShaderPrecisionFormat(35633,36338),o=r.getShaderPrecisionFormat(35632,36338);t.shaderHighPrecision=!(!a.precision||!o.precision);}else t.shaderHighPrecision=!1;if(t.compressAstc=r.getExtension("WEBGL_compressed_texture_astc"),t.compressAtc=r.getExtension("WEBGL_compressed_texture_atc"),t.compressEtc=r.getExtension("WEBGL_compressed_texture_etc"),t.compressEtc1=r.getExtension("WEBGL_compressed_texture_etc1"),t.compressPvrtc=r.getExtension("WEBGL_compressed_texture_pvrtc"),t.compressS3tc=r.getExtension("WEBGL_compressed_texture_s3tc"),t.compressS3tc_srgb=r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),r.deleteTexture1=r.deleteTexture,r.deleteTexture=function(t){t==xt.curBindTexValue&&(xt.curBindTexValue=null),r.deleteTexture1(t);},t.onStageResize(n,i),null==t.mainContext)throw new Error("webGL getContext err!");O.__init__(),B.__init__(),Et.__init__(),at.__init__(),St.__init__(),bt.__init__(),$.__init__(),qt.__int__(r),H._init_(r),S.isConchApp&&conch.setOnInvalidGLRes(t.onInvalidGLRes);},t.compressAstc=null,t.compressAtc=null,t.compressEtc=null,t.compressEtc1=null,t.compressPvrtc=null,t.compressS3tc=null,t.compressS3tc_srgb=null,t.mainCanvas=null,t.mainContext=null,t.antialias=!0,t.shaderHighPrecision=!1,t._bg_null=[0,0,0,0],t;}(),xt=function(){function t(){}
return r(t,"laya.webgl.WebGLContext"),t.UseProgram=function(e){return t._useProgram!==e&&(It.mainContext.useProgram(e),t._useProgram=e,!0);},t.setDepthTest=function(e,n){n!==t._depthTest&&(t._depthTest=n,n?e.enable(2929):e.disable(2929));},t.setDepthMask=function(e,n){n!==t._depthMask&&(t._depthMask=n,e.depthMask(n));},t.setDepthFunc=function(e,n){n!==t._depthFunc&&(t._depthFunc=n,e.depthFunc(n));},t.setBlend=function(e,n){n!==t._blend&&(t._blend=n,n?e.enable(3042):e.disable(3042));},t.setBlendFunc=function(e,n,i){(n!==t._sFactor||i!==t._dFactor)&&(t._sFactor=n,t._dFactor=i,e.blendFunc(n,i));},t.setCullFace=function(e,n){n!==t._cullFace&&(t._cullFace=n,n?e.enable(2884):e.disable(2884));},t.setFrontFace=function(e,n){n!==t._frontFace&&(t._frontFace=n,e.frontFace(n));},t.bindTexture=function(e,n,i){e.bindTexture(n,i),t.curBindTexTarget=n,t.curBindTexValue=i;},t.DEPTH_BUFFER_BIT=256,t.STENCIL_BUFFER_BIT=1024,t.COLOR_BUFFER_BIT=16384,t.POINTS=0,t.LINES=1,t.LINE_LOOP=2,t.LINE_STRIP=3,t.TRIANGLES=4,t.TRIANGLE_STRIP=5,t.TRIANGLE_FAN=6,t.ZERO=0,t.ONE=1,t.SRC_COLOR=768,t.ONE_MINUS_SRC_COLOR=769,t.SRC_ALPHA=770,t.ONE_MINUS_SRC_ALPHA=771,t.DST_ALPHA=772,t.ONE_MINUS_DST_ALPHA=773,t.DST_COLOR=774,t.ONE_MINUS_DST_COLOR=775,t.SRC_ALPHA_SATURATE=776,t.FUNC_ADD=32774,t.BLEND_EQUATION=32777,t.BLEND_EQUATION_RGB=32777,t.BLEND_EQUATION_ALPHA=34877,t.FUNC_SUBTRACT=32778,t.FUNC_REVERSE_SUBTRACT=32779,t.BLEND_DST_RGB=32968,t.BLEND_SRC_RGB=32969,t.BLEND_DST_ALPHA=32970,t.BLEND_SRC_ALPHA=32971,t.CONSTANT_COLOR=32769,t.ONE_MINUS_CONSTANT_COLOR=32770,t.CONSTANT_ALPHA=32771,t.ONE_MINUS_CONSTANT_ALPHA=32772,t.BLEND_COLOR=32773,t.ARRAY_BUFFER=34962,t.ELEMENT_ARRAY_BUFFER=34963,t.ARRAY_BUFFER_BINDING=34964,t.ELEMENT_ARRAY_BUFFER_BINDING=34965,t.STREAM_DRAW=35040,t.STATIC_DRAW=35044,t.DYNAMIC_DRAW=35048,t.BUFFER_SIZE=34660,t.BUFFER_USAGE=34661,t.CURRENT_VERTEX_ATTRIB=34342,t.FRONT=1028,t.BACK=1029,t.CULL_FACE=2884,t.FRONT_AND_BACK=1032,t.BLEND=3042,t.DITHER=3024,t.STENCIL_TEST=2960,t.DEPTH_TEST=2929,t.SCISSOR_TEST=3089,t.POLYGON_OFFSET_FILL=32823,t.SAMPLE_ALPHA_TO_COVERAGE=32926,t.SAMPLE_COVERAGE=32928,t.NO_ERROR=0,t.INVALID_ENUM=1280,t.INVALID_VALUE=1281,t.INVALID_OPERATION=1282,t.OUT_OF_MEMORY=1285,t.CW=2304,t.CCW=2305,t.LINE_WIDTH=2849,t.ALIASED_POINT_SIZE_RANGE=33901,t.ALIASED_LINE_WIDTH_RANGE=33902,t.CULL_FACE_MODE=2885,t.FRONT_FACE=2886,t.DEPTH_RANGE=2928,t.DEPTH_WRITEMASK=2930,t.DEPTH_CLEAR_VALUE=2931,t.DEPTH_FUNC=2932,t.STENCIL_CLEAR_VALUE=2961,t.STENCIL_FUNC=2962,t.STENCIL_FAIL=2964,t.STENCIL_PASS_DEPTH_FAIL=2965,t.STENCIL_PASS_DEPTH_PASS=2966,t.STENCIL_REF=2967,t.STENCIL_VALUE_MASK=2963,t.STENCIL_WRITEMASK=2968,t.STENCIL_BACK_FUNC=34816,t.STENCIL_BACK_FAIL=34817,t.STENCIL_BACK_PASS_DEPTH_FAIL=34818,t.STENCIL_BACK_PASS_DEPTH_PASS=34819,t.STENCIL_BACK_REF=36003,t.STENCIL_BACK_VALUE_MASK=36004,t.STENCIL_BACK_WRITEMASK=36005,t.VIEWPORT=2978,t.SCISSOR_BOX=3088,t.COLOR_CLEAR_VALUE=3106,t.COLOR_WRITEMASK=3107,t.UNPACK_ALIGNMENT=3317,t.PACK_ALIGNMENT=3333,t.MAX_TEXTURE_SIZE=3379,t.MAX_VIEWPORT_DIMS=3386,t.SUBPIXEL_BITS=3408,t.RED_BITS=3410,t.GREEN_BITS=3411,t.BLUE_BITS=3412,t.ALPHA_BITS=3413,t.DEPTH_BITS=3414,t.STENCIL_BITS=3415,t.POLYGON_OFFSET_UNITS=10752,t.POLYGON_OFFSET_FACTOR=32824,t.TEXTURE_BINDING_2D=32873,t.SAMPLE_BUFFERS=32936,t.SAMPLES=32937,t.SAMPLE_COVERAGE_VALUE=32938,t.SAMPLE_COVERAGE_INVERT=32939,t.NUM_COMPRESSED_TEXTURE_FORMATS=34466,t.COMPRESSED_TEXTURE_FORMATS=34467,t.DONT_CARE=4352,t.FASTEST=4353,t.NICEST=4354,t.GENERATE_MIPMAP_HINT=33170,t.BYTE=5120,t.UNSIGNED_BYTE=5121,t.SHORT=5122,t.UNSIGNED_SHORT=5123,t.INT=5124,t.UNSIGNED_INT=5125,t.FLOAT=5126,t.DEPTH_COMPONENT=6402,t.ALPHA=6406,t.RGB=6407,t.RGBA=6408,t.LUMINANCE=6409,t.LUMINANCE_ALPHA=6410,t.UNSIGNED_SHORT_4_4_4_4=32819,t.UNSIGNED_SHORT_5_5_5_1=32820,t.UNSIGNED_SHORT_5_6_5=33635,t.FRAGMENT_SHADER=35632,t.VERTEX_SHADER=35633,t.MAX_VERTEX_ATTRIBS=34921,t.MAX_VERTEX_UNIFORM_VECTORS=36347,t.MAX_VARYING_VECTORS=36348,t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,t.MAX_TEXTURE_IMAGE_UNITS=34930,t.MAX_FRAGMENT_UNIFORM_VECTORS=36349,t.SHADER_TYPE=35663,t.DELETE_STATUS=35712,t.LINK_STATUS=35714,t.VALIDATE_STATUS=35715,t.ATTACHED_SHADERS=35717,t.ACTIVE_UNIFORMS=35718,t.ACTIVE_ATTRIBUTES=35721,t.SHADING_LANGUAGE_VERSION=35724,t.CURRENT_PROGRAM=35725,t.NEVER=512,t.LESS=513,t.EQUAL=514,t.LEQUAL=515,t.GREATER=516,t.NOTEQUAL=517,t.GEQUAL=518,t.ALWAYS=519,t.KEEP=7680,t.REPLACE=7681,t.INCR=7682,t.DECR=7683,t.INVERT=5386,t.INCR_WRAP=34055,t.DECR_WRAP=34056,t.VENDOR=7936,t.RENDERER=7937,t.VERSION=7938,t.NEAREST=9728,t.LINEAR=9729,t.NEAREST_MIPMAP_NEAREST=9984,t.LINEAR_MIPMAP_NEAREST=9985,t.NEAREST_MIPMAP_LINEAR=9986,t.LINEAR_MIPMAP_LINEAR=9987,t.TEXTURE_MAG_FILTER=10240,t.TEXTURE_MIN_FILTER=10241,t.TEXTURE_WRAP_S=10242,t.TEXTURE_WRAP_T=10243,t.TEXTURE_2D=3553,t.TEXTURE=5890,t.TEXTURE_CUBE_MAP=34067,t.TEXTURE_BINDING_CUBE_MAP=34068,t.TEXTURE_CUBE_MAP_POSITIVE_X=34069,t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,t.MAX_CUBE_MAP_TEXTURE_SIZE=34076,t.TEXTURE0=33984,t.TEXTURE1=33985,t.TEXTURE2=33986,t.TEXTURE3=33987,t.TEXTURE4=33988,t.TEXTURE5=33989,t.TEXTURE6=33990,t.TEXTURE7=33991,t.TEXTURE8=33992,t.TEXTURE9=33993,t.TEXTURE10=33994,t.TEXTURE11=33995,t.TEXTURE12=33996,t.TEXTURE13=33997,t.TEXTURE14=33998,t.TEXTURE15=33999,t.TEXTURE16=34e3,t.TEXTURE17=34001,t.TEXTURE18=34002,t.TEXTURE19=34003,t.TEXTURE20=34004,t.TEXTURE21=34005,t.TEXTURE22=34006,t.TEXTURE23=34007,t.TEXTURE24=34008,t.TEXTURE25=34009,t.TEXTURE26=34010,t.TEXTURE27=34011,t.TEXTURE28=34012,t.TEXTURE29=34013,t.TEXTURE30=34014,t.TEXTURE31=34015,t.ACTIVE_TEXTURE=34016,t.REPEAT=10497,t.CLAMP_TO_EDGE=33071,t.MIRRORED_REPEAT=33648,t.FLOAT_VEC2=35664,t.FLOAT_VEC3=35665,t.FLOAT_VEC4=35666,t.INT_VEC2=35667,t.INT_VEC3=35668,t.INT_VEC4=35669,t.BOOL=35670,t.BOOL_VEC2=35671,t.BOOL_VEC3=35672,t.BOOL_VEC4=35673,t.FLOAT_MAT2=35674,t.FLOAT_MAT3=35675,t.FLOAT_MAT4=35676,t.SAMPLER_2D=35678,t.SAMPLER_CUBE=35680,t.VERTEX_ATTRIB_ARRAY_ENABLED=34338,t.VERTEX_ATTRIB_ARRAY_SIZE=34339,t.VERTEX_ATTRIB_ARRAY_STRIDE=34340,t.VERTEX_ATTRIB_ARRAY_TYPE=34341,t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,t.VERTEX_ATTRIB_ARRAY_POINTER=34373,t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,t.COMPILE_STATUS=35713,t.LOW_FLOAT=36336,t.MEDIUM_FLOAT=36337,t.HIGH_FLOAT=36338,t.LOW_INT=36339,t.MEDIUM_INT=36340,t.HIGH_INT=36341,t.FRAMEBUFFER=36160,t.RENDERBUFFER=36161,t.RGBA4=32854,t.RGB5_A1=32855,t.RGB565=36194,t.DEPTH_COMPONENT16=33189,t.STENCIL_INDEX=6401,t.STENCIL_INDEX8=36168,t.DEPTH_STENCIL=34041,t.RENDERBUFFER_WIDTH=36162,t.RENDERBUFFER_HEIGHT=36163,t.RENDERBUFFER_INTERNAL_FORMAT=36164,t.RENDERBUFFER_RED_SIZE=36176,t.RENDERBUFFER_GREEN_SIZE=36177,t.RENDERBUFFER_BLUE_SIZE=36178,t.RENDERBUFFER_ALPHA_SIZE=36179,t.RENDERBUFFER_DEPTH_SIZE=36180,t.RENDERBUFFER_STENCIL_SIZE=36181,t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,t.COLOR_ATTACHMENT0=36064,t.DEPTH_ATTACHMENT=36096,t.STENCIL_ATTACHMENT=36128,t.DEPTH_STENCIL_ATTACHMENT=33306,t.NONE=0,t.FRAMEBUFFER_COMPLETE=36053,t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,t.FRAMEBUFFER_UNSUPPORTED=36061,t.FRAMEBUFFER_BINDING=36006,t.RENDERBUFFER_BINDING=36007,t.MAX_RENDERBUFFER_SIZE=34024,t.INVALID_FRAMEBUFFER_OPERATION=1286,t.UNPACK_FLIP_Y_WEBGL=37440,t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,t.CONTEXT_LOST_WEBGL=37442,t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,t.BROWSER_DEFAULT_WEBGL=37444,t._useProgram=null,t._depthTest=!0,t._depthMask=!0,t._blend=!1,t._cullFace=!1,t.curBindTexTarget=null,t.curBindTexValue=null,i(t,["_depthFunc",function(){return this._depthFunc=513;},"_sFactor",function(){return this._sFactor=1;},"_dFactor",function(){return this._dFactor=0;},"_frontFace",function(){return this._frontFace=2305;}]),t;}(),Tt=function(t){function e(){e.__super.call(this);}
r(e,"laya.webgl.display.GraphicsGL",m);var n=e.prototype;return n.setShader=function(t){this._saveToCmd(S.context._setShader,[t]);},n.setIBVB=function(t,e,n,i,r,a){this._saveToCmd(S.context._setIBVB,[t,e,n,i,r,a]);},n.drawParticle=function(t,e,n){var i=C.createParticleTemplate2D(n);i.x=t,i.y=e,this._saveToCmd(S.context._drawParticle,[i]);},e;}(),St=function(t){function e(t){this._x=0,this._y=0,this._id=++e._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,e.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=e.MAXCLIPRECT,this.mOutPoint,this._canvas=t,e._contextcount++,S.isFlash?(this._ib=$t.create(35044),mt.fillIBQuadrangle(this._ib,16)):this._ib=$t.QuadrangleIB,this.clear();}
var o;r(e,"laya.webgl.canvas.WebGLContext2D",d);var s=e.prototype;return s.setIsMainContext=function(){this._isMain=!0;},s.clearBG=function(t,e,n,i){var r=It.mainContext;r.clearColor(t,e,n,i),r.clear(16384);},s._getSubmits=function(){return this._submits;},s._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var t=0,e=this._submits._length;t<e;t++){this._submits[t].releaseRender();}
this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null);}},s.destroy=function(){--e._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas=null,this._ib&&this._ib!=$t.QuadrangleIB&&this._ib.releaseResource();},s.clear=function(){this._submits||(this._other=o.DEFAULT,this._curMat=I.create(),this._vb=Qt.create(-1),this._submits=[],this._save=[Y.Create(this)],this._save.length=10,this._shader2D=new $(),this._triangleMesh=Lt.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=o.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=e.MAXCLIPRECT,this._curSubmit=at.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=z.DEFAULT;for(var t=0,n=this._submits._length;t<n;t++){this._submits[t].releaseRender();}
this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1;},s.size=function(t,e){if(this._width!=t||this._height!=e)if(0==t||0==e){0!=this._vb._byteLength&&(this._width=t,this._height=e,this._vb.clear(),this._vb.upload());for(var n=0,i=this._submits._length;n<i;n++){this._submits[n].releaseRender();}
this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null;}else this._width=t,this._height=e,this._targets&&this._targets.size(t,e),this._canvas.memorySize-=this._canvas.memorySize;0===t&&0===e&&this._releaseMem();},s._getTransformMatrix=function(){return this._curMat;},s.translate=function(t,e){0===t&&0===e||(Z.save(this),this._curMat.bTransform&&(q.save(this),this._curMat.transformPointN(x.TEMP.setTo(t,e)),t=x.TEMP.x,e=x.TEMP.y),this._x+=t,this._y+=e);},s.save=function(){this._save[this._save._length++]=Y.Create(this);},s.restore=function(){var t=this._save._length;if(!(t<1))for(var e=t-1;e>=0;e--){var n=this._save[e];if(n.restore(this),n.isSaveMark())return void(this._save._length=e);}},s._fillText=function(t,e,n,i,r,a,o,s,l,u){void 0===u&&(u=0);var h=this._shader2D,c=this._curSubmit.shaderValue,f=r?dt.create(r):this._other.font;if(B.enabled)h.ALPHA!==c.ALPHA&&(h.glTexture=null),ft.drawText(this,t,e,this._curMat,f,l||this._other.textAlign,a,o,s,n,i,u);else{this._shader2D.defines.getValue();var d=a?_.create(a)._color:h.colorAdd;h.ALPHA===c.ALPHA&&d===h.colorAdd&&c.colorAdd===h.colorAdd||(h.glTexture=null,h.colorAdd=d),ft.drawText(this,t,e,this._curMat,f,l||this._other.textAlign,a,o,s,n,i,u);}},s.fillWords=function(t,e,n,i,r,a){this._fillText(null,t,e,n,i,r,null,-1,null,a);},s.fillBorderWords=function(t,e,n,i,r,a,o){this._fillBorderText(null,t,e,n,i,r,a,o,null);},s.fillText=function(t,e,n,i,r,a){this._fillText(t,null,e,n,i,r,null,-1,a);},s.strokeText=function(t,e,n,i,r,a,o){this._fillText(t,null,e,n,i,null,r,a||1,o);},s.fillBorderText=function(t,e,n,i,r,a,o,s){this._fillBorderText(t,null,e,n,i,r,a,o,s);},s._fillBorderText=function(t,n,i,r,a,o,s,l,u){if(!B.enabled)return this._fillText(t,n,i,r,a,null,s,l||1,u),void this._fillText(t,n,i,r,a,o,null,-1,u);var h=this._shader2D,c=this._curSubmit.shaderValue;h.ALPHA!==c.ALPHA&&(h.glTexture=null);var _=a?(e._fontTemp.setFont(a),e._fontTemp):this._other.font;ft.drawText(this,t,n,this._curMat,_,u||this._other.textAlign,o,s,l||1,i,r,0);},s.fillRect=function(t,e,n,i,r){var a=this._vb;if(mt.fillRectImgVb(a,this._clipRect,t,e,n,i,L.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var o=this._shader2D.fillStyle;r&&(this._shader2D.fillStyle=z.create(r));var s=this._shader2D,l=this._curSubmit.shaderValue;if(s.fillStyle!==l.fillStyle||s.ALPHA!==l.ALPHA){s.glTexture=null;var u=this._curSubmit=at.createSubmit(this,this._ib,a,(a._byteLength-64)/32*3,bt.create(2,0));u.shaderValue.color=s.fillStyle._color._color,u.shaderValue.ALPHA=s.ALPHA,this._submits[this._submits._length++]=u;}
this._curSubmit._numEle+=6,this._shader2D.fillStyle=o;}},s.fillTexture=function(t,e,i,r,a,o,s,l){if(t.loaded&&t.bitmap&&t.source){var u=this._vb,h=t.bitmap.width,c=t.bitmap.height,_=t.uv,f=s.x%t.width,d=s.y%t.height;if(h!=l.w||c!=l.h){if(!l.w&&!l.h)switch(l.oy=l.ox=0,o){case "repeat":l.width=r,l.height=a;break;case "repeat-x":l.width=r,d<0?t.height+d>a?l.height=a:l.height=t.height+d:(l.oy=d,t.height+d>a?l.height=a-d:l.height=t.height);break;case "repeat-y":f<0?t.width+f>r?l.width=r:l.width=t.width+f:(l.ox=f,t.width+f>r?l.width=r-f:l.width=t.width),l.height=a;break;default:l.width=r,l.height=a;}
l.w=h,l.h=c,l.uv=[0,0,l.width/h,0,l.width/h,l.height/c,0,l.height/c];}
if(e+=l.ox,i+=l.oy,f-=l.ox,d-=l.oy,mt.fillRectImgVb(u,this._clipRect,e,i,l.width,l.height,l.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var p=Rt.create(this,this._ib,u,(u._byteLength-64)/32*3,bt.create(256,0));this._submits[this._submits._length++]=p;var m=p.shaderValue;m.textureHost=t;var g=_[0]*h,y=_[1]*c,v=(_[2]-_[0])*h,I=(_[5]-_[3])*c,x=-f/h,T=-d/c;m.u_TexRange[0]=g/h,m.u_TexRange[1]=v/h,m.u_TexRange[2]=y/c,m.u_TexRange[3]=I/c,m.u_offset[0]=x,m.u_offset[1]=T,B.enabled&&!this._isMain&&p.addTexture(t,(u._byteLength>>2)-16),this._curSubmit=p,p._renderType=10017,p._numEle+=6;}}else this.sprite&&n.timer.callLater(this,this._repaintSprite);},s.setShader=function(t){W.save(this,1048576,this._shader2D,!0),this._shader2D.shader=t;},s.setFilters=function(t){W.save(this,2097152,this._shader2D,!0),this._shader2D.filters=t,this._curSubmit=at.RENDERBASE,this._renderKey=0,this._drawCount++;},s.drawTexture=function(t,e,n,i,r,a,o){this._drawTextureM(t,e,n,i,r,a,o,null,1);},s.addTextureVb=function(t,e,n){var i=this._curSubmit._vb||this._vb,r=i._byteLength>>2;i.byteLength=r+16<<2;for(var a=i.getFloat32Array(),o=0;o<16;o+=4){a[r++]=t[o]+e,a[r++]=t[o+1]+n,a[r++]=t[o+2],a[r++]=t[o+3];}
this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),i._upload=!0;},s.willDrawTexture=function(t,e){if(!(t.loaded&&t.bitmap&&t.source))return this.sprite&&n.timer.callLater(this,this._repaintSprite),0;var i=t.bitmap,r=i.id+this._shader2D.ALPHA*e+10016;if(r==this._renderKey)return r;var a=this._shader2D,o=a.ALPHA,s=this._curSubmit.shaderValue;a.ALPHA*=e,this._renderKey=r,this._drawCount++,a.glTexture=i;var l=this._vb,u=null,h=l._byteLength/32*3;return u=Rt.create(this,this._ib,l,h,bt.create(1,0)),this._submits[this._submits._length++]=u,u.shaderValue.textureHost=t,u._renderType=10016,u._preIsSameTextureShader=10016===this._curSubmit._renderType&&a.ALPHA===s.ALPHA,this._curSubmit=u,a.ALPHA=o,r;},s.drawTextures=function(t,i,r,a){if(t.loaded&&t.bitmap&&t.source){var o=this._clipRect;if(this._clipRect=e.MAXCLIPRECT,this._drawTextureM(t,i[0],i[1],t.width,t.height,r,a,null,1)){if(this._clipRect=o,M.drawCall++,!(i.length<4)){for(var s=this._curSubmit._vb||this._vb,l=this._curMat.a,u=this._curMat.d,h=2,c=i.length;h<c;h+=2){mt.copyPreImgVb(s,(i[h]-i[h-2])*l,(i[h+1]-i[h-1])*u),this._curSubmit._numEle+=6;}
this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle);}}else alert("drawTextures err");}else this.sprite&&n.timer.callLater(this,this._repaintSprite);},s._drawTextureM=function(t,e,i,r,a,o,s,l,u){if(!t.loaded||!t.source)return this.sprite&&n.timer.callLater(this,this._repaintSprite),!1;var h=this._curSubmit._vb||this._vb,c=t.bitmap;e+=o,i+=s,this._drawCount++;var _=c.id+this._shader2D.ALPHA*u+10016;if(_!=this._renderKey){this._renderKey=_;var f=this._curSubmit.shaderValue,d=this._shader2D,p=d.ALPHA;d.ALPHA*=u,d.glTexture=c;var m=this._vb,g=null,y=m._byteLength/32*3;g=Rt.create(this,this._ib,m,y,bt.create(1,0)),this._submits[this._submits._length++]=g,g.shaderValue.textureHost=t,g._renderType=10016,g._preIsSameTextureShader=10016===this._curSubmit._renderType&&d.ALPHA===f.ALPHA,this._curSubmit=g,h=this._curSubmit._vb||this._vb,d.ALPHA=p;}
return!!mt.fillRectImgVb(h,this._clipRect,e,i,r||t.width,a||t.height,t.uv,l||this._curMat,this._x,this._y,0,0)&&(B.enabled&&!this._isMain&&this._curSubmit.addTexture(t,(h._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0);},s._repaintSprite=function(){this.sprite&&this.sprite.repaint();},s._drawText=function(t,e,n,i,r,a,o,s,l,u){var h=t.bitmap;this._drawCount++;var c=h.id+this._shader2D.ALPHA+10016;if(c!=this._renderKey){this._renderKey=c;var _=this._curSubmit.shaderValue,f=this._shader2D;f.glTexture=h;var d=this._vb,p=null,m=d._byteLength/32*3;(p=B.enabled?Rt.create(this,this._ib,d,m,bt.create(1,0)):Rt.create(this,this._ib,d,m,Zt.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&f.ALPHA===_.ALPHA,this._submits[this._submits._length++]=p,p.shaderValue.textureHost=t,p._renderType=10016,this._curSubmit=p;}
t.active();var g=this._curSubmit._vb||this._vb;mt.fillRectImgVb(g,this._clipRect,e+o,n+s,i||t.width,r||t.height,t.uv,a||this._curMat,this._x,this._y,l,u,!0)&&(B.enabled&&!this._isMain&&this._curSubmit.addTexture(t,(g._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle));},s.drawTextureWithTransform=function(t,n,i,r,a,o,s,l,u){if(o){var h=this._curMat,c=this._x,_=this._y;(0!==s||0!==l)&&(this._x=s*h.a+l*h.c,this._y=l*h.d+s*h.b),o&&h.bTransform?(I.mul(o,h,e._tmpMatrix),(o=e._tmpMatrix)._checkTransform()):(this._x+=h.tx,this._y+=h.ty),this._drawTextureM(t,n,i,r,a,0,0,o,u),this._x=c,this._y=_;}else this._drawTextureM(t,n,i,r,a,s,l,null,u);},s.fillQuadrangle=function(t,e,n,i,r){var a=this._curSubmit,o=this._vb,s=this._shader2D,l=a.shaderValue;if(this._renderKey=0,t.bitmap){var u=t.bitmap;s.glTexture==u&&s.ALPHA===l.ALPHA||(s.glTexture=u,(a=this._curSubmit=at.createSubmit(this,this._ib,o,o._byteLength/32*3,bt.create(1,0))).shaderValue.glTexture=u,this._submits[this._submits._length++]=a),mt.fillQuadrangleImgVb(o,e,n,i,t.uv,r||this._curMat,this._x,this._y);}else a.shaderValue.fillStyle&&a.shaderValue.fillStyle.equal(t)&&s.ALPHA===l.ALPHA||(s.glTexture=null,(a=this._curSubmit=at.createSubmit(this,this._ib,o,o._byteLength/32*3,bt.create(2,0))).shaderValue.defines.add(2),a.shaderValue.fillStyle=z.create(t),this._submits[this._submits._length++]=a),mt.fillQuadrangleImgVb(o,e,n,i,L.DEF_UV,r||this._curMat,this._x,this._y);a._numEle+=6;},s.drawTexture2=function(t,n,i,r,a,o,s,l){if(0!=o){var u=this._curMat;if(this._x=t*u.a+n*u.c,this._y=n*u.d+t*u.b,a&&(u.bTransform||a.bTransform?(I.mul(a,u,e._tmpMatrix),a=e._tmpMatrix):(this._x+=a.tx+u.tx,this._y+=a.ty+u.ty,a=I.EMPTY)),1!==o||s){var h=this._shader2D.ALPHA,c=this._nBlendType;this._shader2D.ALPHA=o,s&&(this._nBlendType=H.TOINT(s)),this._drawTextureM(l[0],l[1]-i,l[2]-r,l[3],l[4],0,0,a,1),this._shader2D.ALPHA=h,this._nBlendType=c;}else this._drawTextureM(l[0],l[1]-i,l[2]-r,l[3],l[4],0,0,a,1);this._x=this._y=0;}},s.drawCanvas=function(t,e,n,i,r){var a=t.context;if(this._renderKey=0,a._targets)this._submits[this._submits._length++]=Ot.create(a,0,null),this._curSubmit=at.RENDERBASE,a._targets.drawTo(this,e,n,i,r);else{var o=this._submits[this._submits._length++]=Ot.create(a,this._shader2D.ALPHA,this._shader2D.filters),s=i/t.width,l=r/t.height,u=o._matrix;this._curMat.copyTo(u),1!=s&&1!=l&&u.scale(s,l);var h=u.tx,c=u.ty;u.tx=u.ty=0,u.transformPoint(x.TEMP.setTo(e,n)),u.translate(x.TEMP.x+h,x.TEMP.y+c),this._curSubmit=at.RENDERBASE;}
f.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=a._targets?"yellow":"green",this.strokeRect(e-1,n-1,i+2,r+2,1),this.strokeRect(e,n,i,r,1),this.restore());},s.drawTarget=function(t,e,n,i,r,a,o,s,l,u){void 0===u&&(u=-1);var h=this._vb;if(mt.fillRectImgVb(h,this._clipRect,e,n,i,r,l||L.DEF_UV,a||this._curMat,this._x,this._y,0,0)){this._renderKey=0;this._shader2D.glTexture=null;this._curSubmit.shaderValue;var c=this._curSubmit=ct.create(this,this._ib,h,(h._byteLength-64)/32*3,s,o);c.blendType=-1==u?this._nBlendType:u,c.scope=t,this._submits[this._submits._length++]=c,this._curSubmit._numEle+=6;}},s.mixRGBandAlpha=function(t){return this._mixRGBandAlpha(t,this._shader2D.ALPHA);},s._mixRGBandAlpha=function(t,e){var n=(4278190080&t)>>>24;return 0!=n?n*=e:n=255*e,16777215&t|n<<24;},s.drawTriangles=function(t,i,r,a,o,s,l,u,h,c){if(!t.loaded||!t.source)return this.sprite&&n.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;t.bitmap;var _=this._mixRGBandAlpha(4294967295,u),f=(a.length,s.length);this._renderKey=-1;var d=this._curSubmit=Rt.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,bt.create(1,0));return d.shaderValue.textureHost=t,d._renderType=10016,this._submits[this._submits._length++]=d,l?(e._tmpMatrix.a=l.a,e._tmpMatrix.b=l.b,e._tmpMatrix.c=l.c,e._tmpMatrix.d=l.d,e._tmpMatrix.tx=l.tx+i,e._tmpMatrix.ty=l.ty+r,I.mul(e._tmpMatrix,this._curMat,e._tmpMatrix)):(e._tmpMatrix.a=this._curMat.a,e._tmpMatrix.b=this._curMat.b,e._tmpMatrix.c=this._curMat.c,e._tmpMatrix.d=this._curMat.d,e._tmpMatrix.tx=this._curMat.tx+i,e._tmpMatrix.ty=this._curMat.ty+r),this._triangleMesh.addData(a,o,s,e._tmpMatrix,_,this),this._curSubmit._numEle+=f,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0;},s.transform=function(t,e,n,i,r,a){q.save(this),I.mul(I.TEMP.setTo(t,e,n,i,r,a),this._curMat,this._curMat),this._curMat._checkTransform();},s.setTransformByMatrix=function(t){t.copyTo(this._curMat);},s.transformByMatrix=function(t){q.save(this),I.mul(t,this._curMat,this._curMat),this._curMat._checkTransform();},s.rotate=function(t){q.save(this),this._curMat.rotateEx(t);},s.scale=function(t,e){q.save(this),this._curMat.scaleEx(t,e);},s.clipRect=function(t,e,n,i){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var r=ht.create(4);this.addRenderObject(r);var a=this._vb,o=a._byteLength>>2;if(mt.fillRectImgVb(a,null,t,e,n,i,L.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var s=this._curSubmit=at.createSubmit(this,this._ib,a,(a._byteLength-64)/32*3,bt.create(2,0));s.shaderValue.ALPHA=1,this._submits[this._submits._length++]=s,this._curSubmit._numEle+=6;}else alert("clipRect calc stencil rect error");var l=ht.create(5);this.addRenderObject(l);var u=a.getFloat32Array(),h=Math.min(Math.min(Math.min(u[o+0],u[o+4]),u[o+8]),u[o+12]),c=Math.max(Math.max(Math.max(u[o+0],u[o+4]),u[o+8]),u[o+12]),_=Math.min(Math.min(Math.min(u[o+1],u[o+5]),u[o+9]),u[o+13]),f=Math.max(Math.max(Math.max(u[o+1],u[o+5]),u[o+9]),u[o+13]);X.save(this,l,t,e,n,i,h,_,c-h,f-_),this._curSubmit=at.RENDERBASE;}else{n*=this._curMat.a,i*=this._curMat.d;var d=x.TEMP;this._curMat.transformPoint(d.setTo(t,e)),n<0&&(d.x=d.x+n,n=-n),i<0&&(d.y=d.y+i,i=-i),this._renderKey=0;var p=this._curSubmit=ut.create(this);this._submits[this._submits._length++]=p,p.submitIndex=this._submits._length,p.submitLength=9999999,K.save(this,p);var m=this._clipRect,g=m.x,y=m.y,v=d.x+n,I=d.y+i;g<d.x&&(m.x=d.x),y<d.y&&(m.y=d.y),m.width=Math.min(v,g+m.width)-m.x,m.height=Math.min(I,y+m.height)-m.y,this._shader2D.glTexture=null,p.clipRect.copyFrom(m),this._curSubmit=at.RENDERBASE;}},s.setIBVB=function(t,e,n,i,r,a,o,s,l,u,h){if(void 0===l&&(l=0),void 0===u&&(u=0),void 0===h&&(h=0),null===n){if(S.isFlash){var c=i;c._selfIB||(c._selfIB=$t.create(35044)),c._selfIB.clear(),n=c._selfIB;}else n=this._ib;mt.expandIBQuadrangle(n,i._byteLength/(4*i.vertexStride*4));}
if(!s||!o)throw Error("setIBVB must input:shader shaderValues");var _=lt.create(this,i,n,r,o,s,l,u,h);a||(a=I.EMPTY),a.translate(t,e),I.mul(a,this._curMat,_._mat),a.translate(-t,-e),this._submits[this._submits._length++]=_,this._curSubmit=at.RENDERBASE,this._renderKey=0;},s.addRenderObject=function(t){this._submits[this._submits._length++]=t;},s.fillTrangles=function(t,e,n,i,r){var a=this._curSubmit,o=this._vb,s=this._shader2D,l=a.shaderValue,u=i.length>>4,h=t.bitmap;this._renderKey=0,s.glTexture==h&&s.ALPHA===l.ALPHA||((a=this._curSubmit=at.createSubmit(this,this._ib,o,o._byteLength/32*3,bt.create(1,0))).shaderValue.textureHost=t,this._submits[this._submits._length++]=a),mt.fillTranglesVB(o,e,n,i,r||this._curMat,this._x,this._y),a._numEle+=6*u;},s.submitElement=function(t,e){var n=this._submits;for(e<0&&(e=n._length);t<e;){t+=n[t].renderSubmit();}},s.finish=function(){It.mainContext.finish();},s.flush=function(){var t=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(t>this._ib.bufferLength/12&&mt.expandIBQuadrangle(this._ib,t),!this._isMain&&B.enabled&&B._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=B._atlasRestore;for(var e=this._submits,n=0,i=e._length;n<i;n++){var r=e[n];10016===r.getRenderType()&&r.checkTexture();}}
this.submitElement(0,this._submits._length),this._path&&this._path.reset(),et.instance&&et.getInstance().reset();var a=0;for(n=0,a=this.meshlist.length;n<a;n++){var o=this.meshlist[n];o.canReuse?o.releaseMesh():o.destroy();}
return this.meshlist.length=0,this._curSubmit=at.RENDERBASE,this._renderKey=0,this._triangleMesh=Lt.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length;},s.setPathId=function(t){if(this.mId=t,-1!=this.mId){this.mHaveKey=!1;var e=V.getInstance();e.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,e.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0);}},s.movePath=function(t,e){var n=t,i=e;t=this._curMat.a*n+this._curMat.c*i+this._curMat.tx,e=this._curMat.b*n+this._curMat.d*i+this._curMat.ty,this.mX+=t,this.mY+=e;},s.beginPath=function(){var t=this._getPath();t.tempArray.length=0,t.closePath=!1,this.mX=0,this.mY=0;},s.closePath=function(){this._path.closePath=!0;},s.fill=function(t){void 0===t&&(t=!1);var e=this._getPath();this.drawPoly(0,0,e.tempArray,this.fillStyle._color.numColor,0,0,t);},s.stroke=function(){var t=this._getPath();if(this.lineWidth>0){if(-1==this.mId)t.drawLine(0,0,t.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var e=V.getInstance().shapeLineDic[this.mId];e.rebuild(t.tempArray),t.setGeomtry(e);}else V.getInstance().addLine(this.mId,t.drawLine(0,0,t.tempArray,this.lineWidth,this.strokeStyle._color.numColor));t.update();var n=[this.mX,this.mY],i=at.createShape(this,t.ib,t.vb,t.count,t.offset,bt.create(4,0));i.shaderValue.ALPHA=this._shader2D.ALPHA,i.shaderValue.u_pos=n,i.shaderValue.u_mmat2=yt.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=i,this._renderKey=-1;}},s.line=function(t,e,n,i,r,a){var o=this._curSubmit,s=this._vb;if(mt.fillLineVb(s,this._clipRect,t,e,n,i,r,a)){this._renderKey=0;var l=this._shader2D,u=o.shaderValue;l.strokeStyle===u.strokeStyle&&l.ALPHA===u.ALPHA||(l.glTexture=null,(o=this._curSubmit=at.createSubmit(this,this._ib,s,(s._byteLength-64)/32*3,bt.create(2,0))).shaderValue.strokeStyle=l.strokeStyle,o.shaderValue.mainID=2,o.shaderValue.ALPHA=l.ALPHA,this._submits[this._submits._length++]=o),o._numEle+=6;}},s.moveTo=function(t,e,n){void 0===n&&(n=!0);var i=this._getPath();if(n){var r=t,a=e;t=this._curMat.a*r+this._curMat.c*a,e=this._curMat.b*r+this._curMat.d*a;}
i.addPoint(t,e);},s.lineTo=function(t,e,n){void 0===n&&(n=!0);var i=this._getPath();if(n){var r=t,a=e;t=this._curMat.a*r+this._curMat.c*a,e=this._curMat.b*r+this._curMat.d*a;}
i.addPoint(t,e);},s.drawCurves=function(t,e,n){this.setPathId(-1),this.beginPath(),this.strokeStyle=n[3],this.lineWidth=n[4];var i=n[2];t+=n[0],e+=n[1],this.movePath(t,e),this.moveTo(i[0],i[1]);for(var r=2,a=i.length;r<a;){this.quadraticCurveTo(i[r++],i[r++],i[r++],i[r++]);}
this.stroke();},s.arcTo=function(t,n,i,r,a){if(-1==this.mId||!this.mHaveKey){var o=0,s=0,l=0,u=this._getPath();this._curMat.copyTo(e._tmpMatrix),e._tmpMatrix.tx=e._tmpMatrix.ty=0,e._tempPoint.setTo(u.getEndPointX(),u.getEndPointY()),e._tmpMatrix.invertTransformPoint(e._tempPoint);var h=e._tempPoint.x-t,c=e._tempPoint.y-n,_=Math.sqrt(h*h+c*c);if(!(_<=1e-6)){var f=h/_,d=c/_,p=i-t,m=r-n,g=p*p+m*m,y=Math.sqrt(g);if(!(y<=1e-6)){var v=p/y,I=m/y,x=f+v,T=d+I,S=Math.sqrt(x*x+T*T);if(!(S<=1e-6)){var b=x/S,w=T/S,D=Math.acos(b*f+w*d),C=Math.PI/2-D,E=(_=a/Math.tan(C))*f+t,P=_*d+n,M=Math.sqrt(_*_+a*a),A=t+b*M,O=n+w*M,R=0,L=0,F=0;if(f*I-d*v>=0){var V=(R=2*C)/e.SEGNUM;L=Math.sin(V),F=Math.cos(V);}else V=(R=2*-C)/e.SEGNUM,L=Math.sin(V),F=Math.cos(V);s=this._curMat.a*E+this._curMat.c*P,l=this._curMat.b*E+this._curMat.d*P,s==this._path.getEndPointX()&&l==this._path.getEndPointY()||u.addPoint(s,l);var N=E-A,U=P-O;for(o=0;o<e.SEGNUM;o++){var G=N*F+U*L,B=-N*L+U*F;s=G+A,l=B+O,t=this._curMat.a*s+this._curMat.c*l,l=n=this._curMat.b*s+this._curMat.d*l,(s=t)==this._path.getEndPointX()&&l==this._path.getEndPointY()||u.addPoint(s,l),N=G,U=B;}}}}}},s.arc=function(t,e,n,i,r,a,o){if(void 0===a&&(a=!1),void 0===o&&(o=!0),-1!=this.mId){var s=V.getInstance().shapeDic[this.mId];if(s&&this.mHaveKey&&!s.needUpdate(this._curMat))return;t=0,e=0;}
var l=0,u=0,h=0,c=0,_=0,f=0,d=0,p=0;if(u=r-i,a){if(Math.abs(u)>=2*Math.PI)u=2*-Math.PI;else for(;u>0;){u-=2*Math.PI;}}else if(Math.abs(u)>=2*Math.PI)u=2*Math.PI;else for(;u<0;){u+=2*Math.PI;}
h=u/(p=n<101?Math.max(10,u*n/5):n<201?Math.max(10,u*n/20):Math.max(10,u*n/40))/2,c=Math.abs(4/3*(1-Math.cos(h))/Math.sin(h)),a&&(c=-c);var m=this._getPath(),g=NaN,y=NaN;for(d=0;d<=p;d++){l=i+u*(d/p),_=t+Math.cos(l)*n,f=e+Math.sin(l)*n,o&&(g=_,y=f,_=this._curMat.a*g+this._curMat.c*y,f=this._curMat.b*g+this._curMat.d*y),_==this._path.getEndPointX()&&f==this._path.getEndPointY()||m.addPoint(_,f);}
_=t+Math.cos(r)*n,f=e+Math.sin(r)*n,o&&(g=_,y=f,_=this._curMat.a*g+this._curMat.c*y,f=this._curMat.b*g+this._curMat.d*y),_==this._path.getEndPointX()&&f==this._path.getEndPointY()||m.addPoint(_,f);},s.quadraticCurveTo=function(t,e,n,i){var r=l.I,a=n,o=i;n=this._curMat.a*a+this._curMat.c*o,i=this._curMat.b*a+this._curMat.d*o,a=t,o=e,t=this._curMat.a*a+this._curMat.c*o,e=this._curMat.b*a+this._curMat.d*o;for(var s=r.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),t,e,n,i],30,2),u=0,h=s.length/2;u<h;u++){this.lineTo(s[2*u],s[2*u+1],!1);}
this.lineTo(n,i,!1);},s.rect=function(t,e,n,i){this._other=this._other.make(),this._other.path||(this._other.path=new j()),this._other.path.rect(t,e,n,i);},s.strokeRect=function(t,e,n,i,r){var a=.5*r;this.line(t-a,e,t+n+a,e,r,this._curMat),this.line(t+n,e,t+n,e+i,r,this._curMat),this.line(t,e,t,e+i,r,this._curMat),this.line(t-a,e+i,t+n+a,e+i,r,this._curMat);},s.clip=function(){},s.drawPoly=function(t,e,n,i,r,a,o){void 0===o&&(o=!1),this._renderKey=0,this._shader2D.glTexture=null;var s=this._getPath();if(-1==this.mId)s.polygon(t,e,n,i,r||1,a);else if(this.mHaveKey){var l=V.getInstance().shapeDic[this.mId];l.setMatrix(this._curMat),l.rebuild(s.tempArray),s.setGeomtry(l);}else{var u=s.polygon(t,e,n,i,r||1,a);V.getInstance().addShape(this.mId,u),u.setMatrix(this._curMat);}
s.update();var h,c=[this.mX,this.mY];if(h=at.createShape(this,s.ib,s.vb,s.count,s.offset,bt.create(4,0)),h.shaderValue.ALPHA=this._shader2D.ALPHA,h.shaderValue.u_pos=c,h.shaderValue.u_mmat2=yt.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=h,r>0){if(this.mHaveLineKey){var _=V.getInstance().shapeLineDic[this.mId];_.rebuild(s.tempArray),s.setGeomtry(_);}else V.getInstance().addShape(this.mId,s.drawLine(t,e,n,r,a));s.update(),(h=at.createShape(this,s.ib,s.vb,s.count,s.offset,bt.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,h.shaderValue.u_mmat2=yt.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=h;}},s.drawParticle=function(t,e,n){n.x=t,n.y=e,this._submits[this._submits._length++]=n;},s._getPath=function(){return this._path||(this._path=new j());},a(0,s,"globalCompositeOperation",function(){return H.NAMES[this._nBlendType];},function(t){var e=H.TOINT[t];null==e||this._nBlendType===e||(W.save(this,65536,this,!0),this._curSubmit=at.RENDERBASE,this._renderKey=0,this._nBlendType=e);}),a(0,s,"strokeStyle",function(){return this._shader2D.strokeStyle;},function(t){this._shader2D.strokeStyle.equal(t)||(W.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=z.create(t));}),a(0,s,"globalAlpha",function(){return this._shader2D.ALPHA;},function(t){(t=Math.floor(1e3*t)/1e3)!=this._shader2D.ALPHA&&(W.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=t);}),a(0,s,"asBitmap",null,function(t){if(t){if(this._targets||(this._targets=new J()),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height);}else this._targets=null;}),a(0,s,"fillStyle",function(){return this._shader2D.fillStyle;},function(t){this._shader2D.fillStyle.equal(t)||(W.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=z.create(t));}),a(0,s,"textAlign",function(){return this._other.textAlign;},function(t){this._other.textAlign===t||(this._other=this._other.make(),W.save(this,32768,this._other,!1),this._other.textAlign=t);}),a(0,s,"lineWidth",function(){return this._other.lineWidth;},function(t){this._other.lineWidth===t||(this._other=this._other.make(),W.save(this,256,this._other,!1),this._other.lineWidth=t);}),a(0,s,"textBaseline",function(){return this._other.textBaseline;},function(t){this._other.textBaseline===t||(this._other=this._other.make(),W.save(this,16384,this._other,!1),this._other.textBaseline=t);}),a(0,s,"font",null,function(t){t!=this._other.font.toString()&&(this._other=this._other.make(),W.save(this,8,this._other,!1),this._other.font===dt.EMPTY?this._other.font=new dt(t):this._other.font.setFont(t));}),e.__init__=function(){o.DEFAULT=new o();},e._tempPoint=new x(),e._SUBMITVBSIZE=32e3,e._MAXSIZE=99999999,e._RECTVBSIZE=16,e.MAXCLIPRECT=new T(0,0,99999999,99999999),e._COUNT=0,e._tmpMatrix=new I(),e.SEGNUM=32,e._contextcount=0,i(e,["_fontTemp",function(){return this._fontTemp=new dt();},"_drawStyleTemp",function(){return this._drawStyleTemp=new z(null);}]),e.__init$=function(){o=function(){function t(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=dt.EMPTY;}
r(t,"");var e=t.prototype;return e.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=dt.EMPTY;},e.make=function(){return this===t.DEFAULT?new t():this;},t.DEFAULT=null,t;}();},e;}(),bt=function(t){function e(t,n){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,e.__super.call(this),this.defines=new Et(),this.position=e._POSITION,this.mainID=t,this.subID=n,this.textureHost=null,this.texture=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=t|n,this._inClassCache=e._cache[this._cacheID],t>0&&!this._inClassCache&&(this._inClassCache=e._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear();}
r(e,"laya.webgl.shader.d2.value.Value2D",U);var n=e.prototype;return n.setValue=function(t){},n.refresh=function(){var t=this.size;return t[0]=yt.width,t[1]=yt.height,this.alpha=this.ALPHA*yt.worldAlpha,this.mmat=yt.worldMatrix4,this;},n._ShaderWithCompile=function(){return Yt.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,Jt.create);},n._withWorldShaderDefines=function(){var t=yt.worldShaderDefines,e=Yt.sharders[this.mainID|this.defines._value|t.getValue()];if(!e){var n,i,r={};n=this.defines.toNameDic();for(i in n){r[i]="";}
n=t.toNameDic();for(i in n){r[i]="";}
e=Yt.withCompile2D(0,this.mainID,r,this.mainID|this.defines._value|t.getValue(),Jt.create);}
var a=yt.worldFilters;if(!a)return e;for(var o,s=a.length,l=0;l<s;l++){(o=a[l])&&o.action.setValue(this);}
return e;},n.upload=function(){var t=yt;this.alpha=this.ALPHA*t.worldAlpha,yt.worldMatrix4!==yt.TEMPMAT4_ARRAY&&this.defines.add(128),It.shaderHighPrecision&&this.defines.add(1024);var e,n=t.worldShaderDefines?this._withWorldShaderDefines():Yt.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=t.width,this.size[1]=t.height,this.mmat=t.worldMatrix4,Ft.activeShader!==n?(n._shaderValueWidth!==t.width||n._shaderValueHeight!==t.height?(n._shaderValueWidth=t.width,n._shaderValueHeight=t.height):e=n._params2dQuick2||n._make2dQuick2(),n.upload(this,e)):(n._shaderValueWidth!==t.width||n._shaderValueHeight!==t.height?(n._shaderValueWidth=t.width,n._shaderValueHeight=t.height):e=n._params2dQuick1||n._make2dQuick1(),n.upload(this,e));},n.setFilters=function(t){if(this.filters=t,t)for(var e,n=t.length,i=0;i<n;i++){(e=t[i])&&(this.defines.add(e.type),e.action.setValue(this));}},n.clear=function(){this.defines.setValue(this.subID);},n.release=function(){this._inClassCache[this._inClassCache._length++]=this,this.fillStyle=null,this.strokeStyle=null,this.clear();},e._initone=function(t,n){e._typeClass[t]=n,e._cache[t]=[],e._cache[t]._length=0;},e.__init__=function(){e._POSITION=[2,5126,!1,4*pt.BYTES_PE,0],e._TEXCOORD=[2,5126,!1,4*pt.BYTES_PE,2*pt.BYTES_PE],e._initone(2,Gt),e._initone(4,Ht),e._initone(256,Bt),e._initone(512,Ut),e._initone(1,kt),e._initone(65,Zt),e._initone(9,kt);},e.create=function(t,n){var i=e._cache[t|n];return i._length?i[--i._length]:new e._typeClass[t|n](n);},e._POSITION=null,e._TEXCOORD=null,e._cache=[],e._typeClass=[],e.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e;}(),wt=function(t){function e(t,n){e.__super.call(this,t,n);}
r(e,"laya.webgl.utils.RenderSprite3D",b);var n=e.prototype;return n.onCreate=function(t){switch(t){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform);}},n._mask=function(t,n,i,r){var a,o,s=this._next,l=t.mask;if(l){n.ctx.save();var u=n.ctx.globalCompositeOperation,h=new T();if(h.copyFrom(l.getBounds()),h.width=Math.round(h.width),h.height=Math.round(h.height),h.x=Math.round(h.x),h.y=Math.round(h.y),h.width>0&&h.height>0){var c=t._style._tf,_=st.create();_.addValue("bounds",h),a=ot.create([_,n],laya.webgl.utils.RenderSprite3D.tmpTarget),n.addRenderObject(a),l.render(n,-h.x,-h.y),a=ot.create([_],laya.webgl.utils.RenderSprite3D.endTmpTarget),n.addRenderObject(a),n.ctx.save(),n.clipRect(i-c.translateX+h.x,r-c.translateY+h.y,h.width,h.height),s._fun.call(s,t,n,i,r),n.ctx.restore(),o=ht.create(6),u=n.ctx.globalCompositeOperation,o.blendMode="mask",n.addRenderObject(o),I.TEMP.identity();var f=bt.create(1,0),d=L.INV_UV,p=h.width,m=h.height;(h.width<32||h.height<32)&&((d=e.tempUV)[0]=0,d[1]=0,d[2]=h.width>=32?1:h.width/32,d[3]=0,d[4]=h.width>=32?1:h.width/32,d[5]=h.height>=32?1:h.height/32,d[6]=0,d[7]=h.height>=32?1:h.height/32,h.width=h.width>=32?h.width:32,h.height=h.height>=32?h.height:32,d[1]*=-1,d[3]*=-1,d[5]*=-1,d[7]*=-1,d[1]+=1,d[3]+=1,d[5]+=1,d[7]+=1),n.ctx.drawTarget(_,i+h.x-c.translateX,r+h.y-c.translateY,p,m,I.TEMP,"tmpTarget",f,d,6),a=ot.create([_],laya.webgl.utils.RenderSprite3D.recycleTarget),n.addRenderObject(a),(o=ht.create(6)).blendMode=u,n.addRenderObject(o);}
n.ctx.restore();}else s._fun.call(s,t,n,i,r);},n._blend=function(t,e,n,i){var r=t._style,a=this._next;r.blendMode?(e.ctx.save(),e.ctx.globalCompositeOperation=r.blendMode,a._fun.call(a,t,e,n,i),e.ctx.restore()):a._fun.call(a,t,e,n,i);},n._transform=function(t,e,n,i){var r=t.transform,a=this._next;if(r&&a!=b.NORENDER){var o=e.ctx;t._style;r.tx=n,r.ty=i;var s=o._getTransformMatrix(),l=s.clone();I.mul(r,s,s),s._checkTransform(),r.tx=r.ty=0,a._fun.call(a,t,e,0,0),l.copyTo(s),l.destroy();}else a._fun.call(a,t,e,n,i);},e.tmpTarget=function(t,e){var n=t.getValue("bounds"),i=Vt.create(n.width,n.height);i.start(),i.clear(0,0,0,0),t.addValue("tmpTarget",i);},e.endTmpTarget=function(t){t.getValue("tmpTarget").end();},e.recycleTarget=function(t){t.getValue("tmpTarget").recycle(),t.recycle();},i(e,["tempUV",function(){return this.tempUV=new Array(8);}]),e;}(),Dt=function(t){function e(){this.data=null,e.__super.call(this);}
r(e,"laya.filters.webgl.ColorFilterActionGL",N);var i=e.prototype;return n.imps(i,{"laya.filters.IFilterActionGL":!0}),i.setValue=function(t){t.colorMat=this.data._mat,t.colorAlpha=this.data._alpha;},i.apply3d=function(t,e,n,i,r){var a=t.getValue("bounds"),o=bt.create(1,0);o.setFilters([this.data]);var s=I.TEMP;s.identity(),n.ctx.drawTarget(t,0,0,a.width,a.height,s,"src",o);},e;}(),Ct=function(t){function e(t,n,i,r,a){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,e.__super.call(this,t,n,a),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new zt(),this._atlasCanvas._atlaser=this,this._atlasCanvas.width=i,this._atlasCanvas.height=r,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0;}
r(e,"laya.webgl.atlas.Atlaser",G);var n=e.prototype;return n.computeUVinAtlasTexture=function(t,e,n,i){var r=B.atlasTextureWidth,a=B.atlasTextureHeight,o=n/r,s=i/a,l=(n+t.bitmap.width)/r,u=(i+t.bitmap.height)/a,h=t.bitmap.width/r,c=t.bitmap.height/a;t.uv=[o+e[0]*h,s+e[1]*c,l-(1-e[2])*h,s+e[3]*c,l-(1-e[4])*h,u-(1-e[5])*c,o+e[6]*h,u-(1-e[7])*c];},n.findBitmapIsExist=function(t){if(t instanceof laya.webgl.resource.WebGLImage){var e=t,n=e.url,i=this._InAtlasWebGLImagesKey[n||e.id];if(i)return i.offsetInfoID;}
return-1;},n.addToAtlasTexture=function(t,e,n){if(t instanceof laya.webgl.resource.WebGLImage){var i=t,r=i.url;this._InAtlasWebGLImagesKey[r||i.id]={bitmap:t,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([e,n]);}
this._atlasCanvas.texSubImage2D(e,n,t.atlasSource),t.clearAtlasSource();},n.addToAtlas=function(t,e,n){t._atlasID=this._inAtlasTextureKey.length;var i=t.uv.slice(),r=t.bitmap;this._inAtlasTextureKey.push(t),this._inAtlasTextureOriUVValue.push(i),this._inAtlasTextureBitmapValue.push(r),this.computeUVinAtlasTexture(t,i,e,n),t.bitmap=this._atlasCanvas;},n.clear=function(){for(var t=0,e=this._inAtlasTextureKey.length;t<e;t++){this._inAtlasTextureKey[t].bitmap=this._inAtlasTextureBitmapValue[t],this._inAtlasTextureKey[t].uv=this._inAtlasTextureOriUVValue[t],this._inAtlasTextureKey[t]._atlasID=-1,this._inAtlasTextureKey[t].bitmap.lock=!1,this._inAtlasTextureKey[t].bitmap.releaseResource();}
this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0;},n.dispose=function(){this.clear(),this._atlasCanvas.destroy();},a(0,n,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue;}),a(0,n,"texture",function(){return this._atlasCanvas;}),a(0,n,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey;}),e;}(),Et=function(t){function e(){e.__super.call(this,e.__name2int,e.__int2name,e.__int2nameMap);}
return r(e,"laya.webgl.shader.d2.ShaderDefines2D",Q),e.__init__=function(){e.reg("TEXTURE2D",1),e.reg("COLOR2D",2),e.reg("PRIMITIVE",4),e.reg("GLOW_FILTER",8),e.reg("BLUR_FILTER",16),e.reg("COLOR_FILTER",32),e.reg("COLOR_ADD",64),e.reg("WORLDMAT",128),e.reg("FILLTEXTURE",256),e.reg("FSHIGHPRECISION",1024);},e.reg=function(t,n){Q._reg(t,n,e.__name2int,e.__int2name);},e.toText=function(t,e,n){return Q._toText(t,e,n);},e.toInt=function(t){return Q._toInt(t,e.__name2int);},e.TEXTURE2D=1,e.COLOR2D=2,e.PRIMITIVE=4,e.FILTERGLOW=8,e.FILTERBLUR=16,e.FILTERCOLOR=32,e.COLORADD=64,e.WORLDMAT=128,e.FILLTEXTURE=256,e.SKINMESH=512,e.SHADERDEFINE_FSHIGHPRECISION=1024,e.__name2int={},e.__int2name=[],e.__int2nameMap=[],e;}(),Pt=(function(t){function e(t,n,i,r,a,o,s){e.__super.call(this,t,n,i,r,40,a,o,s);}
r(e,"laya.webgl.shapes.Ellipse",nt);}(),function(t){function e(t,n,i,r,a){this._points=[],this.rebuild(i),e.__super.call(this,t,n,0,0,0,a,r,a,0);}
r(e,"laya.webgl.shapes.Line",nt);var n=e.prototype;return n.rebuild=function(t){var e=t.length;e!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(e/2-1)),this.mFloat32Array=new Float32Array(5*e)),this._points.length=0;for(var n=NaN,i=NaN,r=-1,a=-1,o=t.length/2,s=0;s<o;s++){n=t[2*s],i=t[2*s+1],(Math.abs(r-n)>.01||Math.abs(a-i)>.01)&&this._points.push(n,i),r=n,a=i;}},n.getData=function(t,e,n){var i=[],r=[];this.borderWidth>0&&this.createLine2(this._points,i,this.borderWidth,n,r,this._points.length/2),this.mUint16Array.set(i,0),this.mFloat32Array.set(r,0),t.append(this.mUint16Array),e.append(this.mFloat32Array);},e;}()),Mt=function(t){function e(t,n,i,r,a){this._points=[];for(var o=NaN,s=NaN,l=-1,u=-1,h=i.length/2-1,c=0;c<h;c++){o=i[2*c],s=i[2*c+1],(Math.abs(l-o)>.01||Math.abs(u-s)>.01)&&this._points.push(o,s),l=o,u=s;}
o=i[2*h],s=i[2*h+1],l=this._points[0],u=this._points[1],(Math.abs(l-o)>.01||Math.abs(u-s)>.01)&&this._points.push(o,s),e.__super.call(this,t,n,0,0,this._points.length/2,0,r,a);}
r(e,"laya.webgl.shapes.LoopLine",nt);var n=e.prototype;return n.getData=function(t,e,n){if(this.borderWidth>0){for(var i=this.color,r=(i>>16&255)/255,a=(i>>8&255)/255,o=(255&i)/255,s=[],l=0,u=0,h=[],c=Math.floor(this._points.length/2),_=0;_<c;_++){l=this._points[2*_],u=this._points[2*_+1],s.push(this.x+l,this.y+u,r,a,o);}
this.createLoopLine(s,h,this.borderWidth,n+s.length/5),t.append(new Uint16Array(h)),e.append(new Float32Array(s));}},n.createLoopLine=function(t,e,n,i,r,a){t.length;var o=t.concat(),s=r||t,l=this.borderColor,u=(l>>16&255)/255,h=(l>>8&255)/255,c=(255&l)/255,_=[o[0],o[1]],f=[o[o.length-5],o[o.length-4]],d=f[0]+.5*(_[0]-f[0]),p=f[1]+.5*(_[1]-f[1]);o.unshift(d,p,0,0,0),o.push(d,p,0,0,0);var m,g,y,v,I,x,T,S,b,w,D,C,E,P,M,A,O,R,L,F,V=o.length/5,N=i,U=n/2;y=o[0],v=o[1],w=y-(I=o[5]),b=(b=-(v-(x=o[6])))/(F=Math.sqrt(b*b+w*w))*U,w=w/F*U,s.push(y-b,v-w,u,h,c,y+b,v+w,u,h,c);for(var G=1;G<V-1;G++){y=o[5*(G-1)],v=o[5*(G-1)+1],I=o[5*G],x=o[5*G+1],T=o[5*(G+1)],S=o[5*(G+1)+1],w=y-I,C=I-T,M=(-(b=(b=-(v-x))/(F=Math.sqrt(b*b+w*w))*U)+y)*(-(w=w/F*U)+x)-(-b+I)*(-w+v),R=(-(D=(D=-(x-S))/(F=Math.sqrt(D*D+C*C))*U)+T)*(-(C=C/F*U)+x)-(-D+I)*(-C+S),L=(E=-w+v-(-w+x))*(O=-D+I-(-D+T))-(A=-C+S-(-C+x))*(P=-b+I-(-b+y)),Math.abs(L)<.1?(L+=10.1,s.push(I-b,x-w,u,h,c,I+b,x+w,u,h,c)):(((m=(P*R-O*M)/L)-I)*(m-I)+((g=(A*M-E*R)/L)-x)+(g-x),s.push(m,g,u,h,c,I-(m-I),x-(g-x),u,h,c));}
a&&(e=a);var B=this.edges+1;for(G=1;G<B;G++){e.push(N+2*(G-1),N+2*(G-1)+1,N+2*G+1,N+2*G+1,N+2*G,N+2*(G-1));}
return e.push(N+2*(G-1),N+2*(G-1)+1,N+1,N+1,N,N+2*(G-1)),s;},e;}(),At=function(t){function e(t,n,i,r,a,o){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=I.create(),this._points=i.slice(0,i.length),e.__super.call(this,t,n,0,0,this._points.length/2,r,a,o);}
r(e,"laya.webgl.shapes.Polygon",nt);var n=e.prototype;return n.rebuild=function(t){this._repaint||(this._points.length=0,this._points=this._points.concat(t));},n.setMatrix=function(t){t.copyTo(this._mat);},n.needUpdate=function(t){return this._repaint=this._mat.a==t.a&&this._mat.b==t.b&&this._mat.c==t.c&&this._mat.d==t.d&&this._mat.tx==t.tx&&this._mat.ty==t.ty,!this._repaint;},n.getData=function(t,e,n){var i,r=0,a=this._points,o=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=n){for(this._start=n,i=[],o=this.earcutTriangles.length,r=0;r<o;r++){i.push(this.earcutTriangles[r]+n);}
this.mUint16Array=new Uint16Array(i);}}else{this._start=n,i=[];var s=[],l=[],u=this.color,h=(u>>16&255)/255,c=(u>>8&255)/255,_=(255&u)/255;for(o=Math.floor(a.length/2),r=0;r<o;r++){s.push(this.x+a[2*r],this.y+a[2*r+1],h,c,_),l.push(this.x+a[2*r],this.y+a[2*r+1]);}
for(this.earcutTriangles=it.earcut(l,null,2),o=this.earcutTriangles.length,r=0;r<o;r++){i.push(this.earcutTriangles[r]+n);}
this.mUint16Array=new Uint16Array(i),this.mFloat32Array=new Float32Array(s);}
t.append(this.mUint16Array),e.append(this.mFloat32Array);},e;}(),Ot=function(t){function e(){this._matrix=new I(),this._matrix4=pt.defaultMatrix4.concat(),e.__super.call(this,1e4),this.shaderValue=new bt(0,0);}
r(e,"laya.webgl.submit.SubmitCanvas",at);var n=e.prototype;return n.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var t=yt.worldAlpha,e=yt.worldMatrix4,n=yt.worldMatrix,i=yt.worldFilters,r=yt.worldShaderDefines,a=this.shaderValue,o=this._matrix,s=this._matrix4,l=I.TEMP;return I.mul(o,n,l),s[0]=l.a,s[1]=l.b,s[4]=l.c,s[5]=l.d,s[12]=l.tx,s[13]=l.ty,yt.worldMatrix=l.clone(),yt.worldMatrix4=s,yt.worldAlpha=yt.worldAlpha*a.alpha,a.filters&&a.filters.length&&(yt.worldFilters=a.filters,yt.worldShaderDefines=a.defines),this._ctx_src.flush(),yt.worldAlpha=t,yt.worldMatrix4=e,yt.worldMatrix.destroy(),yt.worldMatrix=n,yt.worldFilters=i,yt.worldShaderDefines=r,1;},n.releaseRender=function(){var t=e._cache;this._ctx_src=null,t[t._length++]=this;},n.getRenderType=function(){return 10003;},e.create=function(t,n,i){var r=e._cache._length?e._cache[--e._cache._length]:new e();r._ctx_src=t;var a=r.shaderValue;return a.alpha=n,a.defines.setValue(0),i&&i.length&&a.setFilters(i),r;},e._cache=(e._cache=[],e._cache._length=0,e._cache),e;}(),Rt=function(t){function e(t){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array(),this._texsID=new Array(),this._vbPos=new Array(),void 0===t&&(t=1e4),e.__super.call(this,t);}
r(e,"laya.webgl.submit.SubmitTexture",at);var n=e.prototype;return n.releaseRender=function(){var t=e._cache;t[t._length++]=this,this.shaderValue.release(),this._preIsSameTextureShader=!1,this._vb=null,this._texs.length=0,this._vbPos.length=0,this._isSameTexture=!0;},n.addTexture=function(t,e){this._texsID[this._texs.length]=t._uvID,this._texs.push(t),this._vbPos.push(e);},n.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var t=this.shaderValue.textureHost.bitmap;if(null!==t)for(var e=this._vb.getFloat32Array(),n=0,i=this._texs.length;n<i;n++){var r=this._texs[n];r.active();var a=r.uv;if(this._texsID[n]!==r._uvID){this._texsID[n]=r._uvID;var o=this._vbPos[n];e[o+2]=a[0],e[o+3]=a[1],e[o+6]=a[2],e[o+7]=a[3],e[o+10]=a[4],e[o+11]=a[5],e[o+14]=a[6],e[o+15]=a[7],this._vb.setNeedUpload();}
r.bitmap!==t&&(this._isSameTexture=!1);}}},n.renderSubmit=function(){if(0===this._numEle)return e._shaderSet=!1,1;var t=this.shaderValue.textureHost;if(t){var n=t.source;if(!t.bitmap||!n)return e._shaderSet=!1,1;this.shaderValue.texture=n;}
this._vb.bind_upload(this._ib);var i=It.mainContext;if(H.activeBlendFunction!==this._blendFn&&(i.enable(3042),this._blendFn(i),H.activeBlendFunction=this._blendFn),M.drawCall++,M.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&Ft.activeShader&&e._shaderSet?Ft.activeShader.uploadTexture2D(this.shaderValue.texture):this.shaderValue.upload(),e._shaderSet=!0,this._texs.length>1&&!this._isSameTexture)for(var r=t.bitmap,a=0,o=Ft.activeShader,s=0,l=this._texs.length;s<l;s++){var u=this._texs[s];u.bitmap===r&&s+1!==l||(o.uploadTexture2D(u.source),i.drawElements(4,6*(s-a+1),5123,this._startIdx+6*a*pt.BYTES_PIDX),r=u.bitmap,a=s);}else i.drawElements(4,this._numEle,5123,this._startIdx);return 1;},e.create=function(t,n,i,r,a){var o=e._cache._length?e._cache[--e._cache._length]:new e();null==i&&((i=o._selfVb||(o._selfVb=Qt.create(-1))).clear(),r=0),o._ib=n,o._vb=i,o._startIdx=r*pt.BYTES_PIDX,o._numEle=0;var s=t._nBlendType;o._blendFn=t._targets?H.targetFns[s]:H.fns[s],o.shaderValue=a,o.shaderValue.setValue(t._shader2D);var l=t._shader2D.filters;return l&&o.shaderValue.setFilters(l),o;},e._cache=(e._cache=[],e._cache._length=0,e._cache),e._shaderSet=!0,e;}(),Lt=function(t){function e(){e.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo);}
r(e,"laya.webgl.utils.MeshTexture",gt);var n=e.prototype;return n.addData=function(t,n,i,r,a,o){for(var s=t.length/2,l=this._vb.needSize(s*e.const_stride)>>2,u=this._vb.getFloat32Array(),h=0,c=0;c<s;c++){var _=t[h],f=t[h+1],d=_*r.a+f*r.c+r.tx,p=_*r.b+f*r.d+r.ty;u[l++]=d,u[l++]=p,u[l++]=n[h],u[l++]=n[h+1],h+=2;}
this._vb.setNeedUpload();var m=this.vertNum;if(m>0){(s=i.length)>e.tmpIdx.length&&(e.tmpIdx=new Uint16Array(s));for(var g=0;g<s;g++){e.tmpIdx[g]=i[g]+m;}
this._ib.appendU16Array(e.tmpIdx,i.length);}else this._ib.append(i);this._ib.setNeedUpload(),this.vertNum+=s,this.indexNum+=i.length;},n.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this);},n.destroy=function(){this._ib.destroy(),this._vb.destroy();},e.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new e();},e.const_stride=16,e._POOL=[],i(e,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8];},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4);}]),e;}(),Ft=function(t){function e(){e.__super.call(this),this.lock=!0;}
return r(e,"laya.webgl.shader.BaseShader",w),e.activeShader=null,e.bindShader=null,e;}(),Vt=function(t){function e(t,n,i,r,a,o,s,l,u){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===i&&(i=6408),void 0===r&&(r=5121),void 0===a&&(a=34041),void 0===o&&(o=!1),void 0===s&&(s=!1),void 0===l&&(l=-1),void 0===u&&(u=-1),this._type=1,this._w=t,this._h=n,this._surfaceFormat=i,this._surfaceType=r,this._depthStencilFormat=a,S.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=o,this._repeat=s,this._minFifter=l,this._magFifter=u,this._createWebGLRenderTarget(),this.bitmap.lock=!0,e.__super.call(this,this.bitmap,L.INV_UV);}
r(e,"laya.webgl.resource.RenderTarget2D",t);var i=e.prototype;return n.imps(i,{"laya.resource.IDispose":!0}),i.getType=function(){return this._type;},i.getTexture=function(){return this;},i.size=function(t,e){this._w==t&&this._h==e||(this._w=t,this._h=e,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget());},i.release=function(){this.destroy();},i.recycle=function(){e.POOL.push(this);},i.start=function(){var t=It.mainContext;return this._preRenderTarget=yt.curRenderTarget,yt.curRenderTarget=this,t.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(t.viewport(0,0,this._w,this._h),this._svWidth=yt.width,this._svHeight=yt.height,yt.width=this._w,yt.height=this._h,Ft.activeShader=null),this;},i.clear=function(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1);var r=It.mainContext;r.clearColor(t,e,n,i);var a=16384;switch(this._depthStencilFormat){case 33189:a|=256;break;case 36168:a|=1024;break;case 34041:a|=256,a|=1024;}
r.clear(a);},i.end=function(){var t=It.mainContext;t.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,yt.curRenderTarget=this._preRenderTarget,1==this._type?(t.viewport(0,0,this._svWidth,this._svHeight),yt.width=this._svWidth,yt.height=this._svHeight,Ft.activeShader=null):t.viewport(0,0,n.stage.width,n.stage.height);},i.getData=function(t,e,n,i){var r=It.mainContext;r.bindFramebuffer(36160,this.bitmap.frameBuffer);if(!(36053===r.checkFramebufferStatus(36160)))return r.bindFramebuffer(36160,null),null;var a=new Uint8Array(this._w*this._h*4);return r.readPixels(t,e,n,i,this._surfaceFormat,this._surfaceType,a),r.bindFramebuffer(36160,null),a;},i.destroy=function(e){void 0===e&&(e=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,t.prototype.destroy.call(this));},i.dispose=function(){},i._createWebGLRenderTarget=function(){this.bitmap=new Kt(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(t){this.event("recovered");});},a(0,i,"surfaceFormat",function(){return this._surfaceFormat;}),a(0,i,"magFifter",function(){return this._magFifter;}),a(0,i,"surfaceType",function(){return this._surfaceType;}),a(0,i,"mipMap",function(){return this._mipMap;}),a(0,i,"depthStencilFormat",function(){return this._depthStencilFormat;}),a(0,i,"minFifter",function(){return this._minFifter;}),a(0,i,"source",function(){return this._alreadyResolved?n.superGet(L,this,"source"):null;}),e.create=function(t,n,i,r,a,o,s,l,u){void 0===i&&(i=6408),void 0===r&&(r=5121),void 0===a&&(a=34041),void 0===o&&(o=!1),void 0===s&&(s=!1),void 0===l&&(l=-1),void 0===u&&(u=-1);var h=e.POOL.pop();return h||(h=new e(t,n)),h.bitmap&&h._w==t&&h._h==n&&h._surfaceFormat==i&&h._surfaceType==r&&h._depthStencilFormat==a&&h._mipMap==o&&h._repeat==s&&h._minFifter==l&&h._magFifter==u||(h._w=t,h._h=n,h._surfaceFormat=i,h._surfaceType=r,h._depthStencilFormat=a,S.isConchWebGL&&34041===h._depthStencilFormat&&(h._depthStencilFormat=33189),h._mipMap=o,h._repeat=s,h._minFifter=l,h._magFifter=u,h.release(),h._createWebGLRenderTarget()),h;},e.TYPE2D=1,e.TYPE3D=2,e.POOL=[],e;}(L),Nt=function(t){function e(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,e.__super.call(this),e._gl=It.mainContext;}
r(e,"laya.webgl.utils.Buffer",w);var n=e.prototype;return n._bind=function(){this.activeResource(),e._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(e._bindVertexBuffer=this._glBuffer),e._gl.bindBuffer(this._bufferType,e._bindActive[this._bufferType]=this._glBuffer),Ft.activeShader=null);},n.recreateResource=function(){this._glBuffer||(this._glBuffer=e._gl.createBuffer()),this.completeCreate();},n.disposeResource=function(){this._glBuffer&&(It.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0;},a(0,n,"bufferUsage",function(){return this._bufferUsage;}),e._gl=null,e._bindActive={},e._bindVertexBuffer=null,e._enableAtributes=[],e;}(),Ut=function(t){function e(t){this.texcoord=null,this.offsetX=300,this.offsetY=0,e.__super.call(this,512,0);var n=8*pt.BYTES_PE;this.position=[2,5126,!1,n,0],this.texcoord=[2,5126,!1,n,2*pt.BYTES_PE],this.color=[4,5126,!1,n,4*pt.BYTES_PE];}
return r(e,"laya.webgl.shader.d2.skinAnishader.SkinSV",bt),e;}(),Gt=function(t){function e(t){e.__super.call(this,2,0),this.color=[];}
r(e,"laya.webgl.shader.d2.value.Color2dSV",bt);return e.prototype.setValue=function(t){t.fillStyle&&(this.color=t.fillStyle._color._color),t.strokeStyle&&(this.color=t.strokeStyle._color._color);},e;}(),Bt=function(t){function e(t){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=bt._TEXCOORD,e.__super.call(this,256,0);}
r(e,"laya.webgl.shader.d2.value.FillTextureSV",bt);var n=e.prototype;return n.setValue=function(t){this.ALPHA=t.ALPHA,t.filters&&this.setFilters(t.filters);},n.clear=function(){this.texture=null,this.shader=null,this.defines.setValue(0);},e;}(),kt=function(t){function e(t){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=bt._TEXCOORD,void 0===t&&(t=0),e.__super.call(this,1,t);}
r(e,"laya.webgl.shader.d2.value.TextureSV",bt);var n=e.prototype;return n.setValue=function(t){this.ALPHA=t.ALPHA,t.filters&&this.setFilters(t.filters);},n.clear=function(){this.texture=null,this.shader=null,this.defines.setValue(0);},e;}(),Ht=function(t){function e(t){this.a_color=null,this.u_pos=[0,0],e.__super.call(this,4,0),this.position=[2,5126,!1,5*pt.BYTES_PE,0],this.a_color=[3,5126,!1,5*pt.BYTES_PE,2*pt.BYTES_PE];}
return r(e,"laya.webgl.shader.d2.value.PrimitiveSV",bt),e;}(),zt=function(t){function e(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,e.__super.call(this);}
r(e,"laya.webgl.atlas.AtlasWebGLCanvas",t);var n=e.prototype;return n.recreateResource=function(){var t=It.mainContext,e=this._source=t.createTexture(),n=xt.curBindTexTarget,i=xt.curBindTexValue;xt.bindTexture(t,3553,e),t.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),t.texParameteri(3553,10241,9729),t.texParameteri(3553,10240,9729),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071),n&&i&&xt.bindTexture(t,n,i),this.memorySize=this._w*this._h*4,this.completeCreate();},n.disposeResource=function(){this._source&&(It.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},n.texSubImage2D=function(t,e,n){if(S.isFlash){this._flashCacheImage||(this._flashCacheImage=y.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var i=n.bitmapdata;this._flashCacheImage._image.copyPixels(i,0,0,i.width,i.height,t,e),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0);}else{var r=It.mainContext,a=xt.curBindTexTarget,o=xt.curBindTexValue;xt.bindTexture(r,3553,this._source),S.isConchWebGL?(t-1>=0&&r.texSubImage2DEx(!0,3553,0,t-1,e,6408,5121,n),t+1<=this._w&&r.texSubImage2DEx(!0,3553,0,t+1,e,6408,5121,n),e-1>=0&&r.texSubImage2DEx(!0,3553,0,t,e-1,6408,5121,n),e+1<=this._h&&r.texSubImage2DEx(!0,3553,0,t,e+1,6408,5121,n),r.texSubImage2DEx(!0,3553,0,t,e,6408,5121,n)):(r.pixelStorei(37441,!0),t-1>=0&&r.texSubImage2D(3553,0,t-1,e,6408,5121,n),t+1<=this._w&&r.texSubImage2D(3553,0,t+1,e,6408,5121,n),e-1>=0&&r.texSubImage2D(3553,0,t,e-1,6408,5121,n),e+1<=this._h&&r.texSubImage2D(3553,0,t,e+1,6408,5121,n),r.texSubImage2D(3553,0,t,e,6408,5121,n),r.pixelStorei(37441,!1)),a&&o&&xt.bindTexture(r,a,o);}},n.texSubImage2DPixel=function(t,e,n,i,r){var a=It.mainContext,o=xt.curBindTexTarget,s=xt.curBindTexValue;xt.bindTexture(a,3553,this._source);var l=new Uint8Array(r.data);S.isConchWebGL?a.texSubImage2DEx(!0,3553,0,t,e,n,i,6408,5121,l):(a.pixelStorei(37441,!0),a.texSubImage2D(3553,0,t,e,n,i,6408,5121,l),a.pixelStorei(37441,!1)),o&&s&&xt.bindTexture(a,o,s);},a(0,n,"width",t.prototype._$get_width,function(t){this._w=t;}),a(0,n,"height",t.prototype._$get_height,function(t){this._h=t;}),e;}(u),jt=function(t){function e(){this.flipY=!0,this.alwaysChange=!1,e.__super.call(this);}
r(e,"laya.webgl.resource.WebGLCanvas",u);var n=e.prototype;return n.getCanvas=function(){return this._canvas;},n.clear=function(){this._ctx&&this._ctx.clear();},n.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null;},n._setContext=function(t){this._ctx=t;},n.getContext=function(t,n){return this._ctx?this._ctx:this._ctx=e._createContext(this);},n.size=function(t,e){this._w==t&&this._h==e||(this._w=t,this._h=e,this._ctx&&this._ctx.size(t,e),this._canvas&&(this._canvas.height=e,this._canvas.width=t));},n.activeResource=function(t){void 0===t&&(t=!1),this._source||this.recreateResource();},n.recreateResource=function(){this.createWebGlTexture(),this.completeCreate();},n.disposeResource=function(){this._source&&!this.iscpuSource&&(It.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},n.createWebGlTexture=function(){var t=It.mainContext;this._canvas;var n=this._source=t.createTexture();this.iscpuSource=!1;var i=xt.curBindTexTarget,r=xt.curBindTexValue;xt.bindTexture(t,3553,n),t.pixelStorei(37440,this.flipY?1:0),S.isConchWebGL?t.texImage2DEx(e.premulAlpha,3553,0,6408,6408,5121,this._imgData):(e.premulAlpha&&t.pixelStorei(37441,!0),t.texImage2D(3553,0,6408,6408,5121,this._imgData),e.premulAlpha&&t.pixelStorei(37441,!1)),t.texParameteri(3553,10240,9729),t.texParameteri(3553,10241,9729),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071),t.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,i&&r&&xt.bindTexture(t,i,r);},n.reloadCanvasData=function(){var t=It.mainContext;if(!this._source)throw "reloadCanvasData error, gl texture not created!";var n=xt.curBindTexTarget,i=xt.curBindTexValue;xt.bindTexture(t,3553,this._source),S.isConchWebGL?t.texImage2DEx(e.premulAlpha,3553,0,6408,6408,5121,this._imgData):(e.premulAlpha&&t.pixelStorei(37441,!0),t.texImage2D(3553,0,6408,6408,5121,this._imgData),e.premulAlpha&&t.pixelStorei(37441,!1)),t.pixelStorei(37440,0),n&&i&&xt.bindTexture(t,n,i);},n.texSubImage2D=function(t,e,n){var i=It.mainContext,r=xt.curBindTexTarget,a=xt.curBindTexValue;xt.bindTexture(i,3553,this._source),S.isConchWebGL?i.texSubImage2DEx(!0,3553,0,e,n,6408,5121,t._source):(i.pixelStorei(37441,!0),i.texSubImage2D(3553,0,e,n,6408,5121,t._source),i.pixelStorei(37441,!1)),r&&a&&xt.bindTexture(i,r,a);},n.toBase64=function(t,e,n){var i=null;this._canvas&&(i=this._canvas.toDataURL(t,e)),n.call(this,i);},a(0,n,"context",function(){return this._ctx;}),a(0,n,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source;}),a(0,n,"asBitmap",null,function(t){this._ctx&&(this._ctx.asBitmap=t);}),e._createContext=null,e.premulAlpha=!1,e;}(),Wt=function(t){function e(t,n){this.CborderSize=12,e.__super.call(this),this.char=t,this.isSpace=" "===t,this.xs=n.scaleX,this.ys=n.scaleY,this.font=n.font.toString(),this.fontSize=n.font.size,this.fillColor=n.fillColor,this.borderColor=n.borderColor,this.lineWidth=n.lineWidth,this.underLine=n.underLine;var i,r=S.isConchApp;r?((i=ConchTextCanvas)._source=ConchTextCanvas,i._source.canvas=ConchTextCanvas):i=h.canvas.source,this.canvas=i,this._enableMerageInAtlas=!0,this._ctx=r?i:this.canvas.getContext("2d",void 0);var a=F.measureText(this.char,this.font);this.cw=a.width*this.xs,this.ch=(a.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new L(this);}
r(e,"laya.webgl.resource.WebGLCharImage",u);var i=e.prototype;return n.imps(i,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),i.active=function(){this.texture.active();},i.recreateResource=function(){var t=S.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),t){var e=this.fontSize;1==this.xs&&1==this.ys||(e=parseInt(e*(this.xs>this.ys?this.xs:this.ys)+""));var n="normal 100 "+e+"px Arial";this.borderColor&&(n+=" 1 "+this.borderColor),this._ctx.font=n,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null);}else{if(this._ctx.save(),this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,R.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var i=this._ctx.measureText(this.char).width+1;this._ctx.lineTo(i,this.fontSize+1),this._ctx.stroke();}
this._ctx.restore();}
this.borderSize=this.CborderSize,this.completeCreate();},i.onresize=function(t,e){this._w=t,this._h=e,this._allowMerageInAtlas=!0;},i.clearAtlasSource=function(){},a(0,i,"allowMerageInAtlas",function(){return this._allowMerageInAtlas;}),a(0,i,"atlasSource",function(){return this.canvas;}),a(0,i,"enableMerageInAtlas",function(){return this._enableMerageInAtlas;},function(t){this._enableMerageInAtlas=t;}),e.createOneChar=function(t,n){return new e(t,n);},e;}(),Kt=function(t){function e(t,n,i,r,a,o,s,l,u){void 0===i&&(i=6408),void 0===r&&(r=5121),void 0===a&&(a=34041),void 0===o&&(o=!1),void 0===s&&(s=!1),void 0===l&&(l=-1),void 0===u&&(u=1),e.__super.call(this),this._w=t,this._h=n,this._surfaceFormat=i,this._surfaceType=r,this._depthStencilFormat=a,S.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=o,this._repeat=s,this._minFifter=l,this._magFifter=u;}
r(e,"laya.webgl.resource.WebGLRenderTarget",u);var n=e.prototype;return n.recreateResource=function(){var t=It.mainContext;this._frameBuffer||(this._frameBuffer=t.createFramebuffer()),this._source||(this._source=t.createTexture());var e=xt.curBindTexTarget,n=xt.curBindTexValue;xt.bindTexture(t,3553,this._source),t.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var i=this._minFifter,r=this._magFifter,a=this._repeat?10497:33071,o=s.isPOT(this._w,this._h);if(o?(this._mipMap?-1!==i||(i=9987):-1!==i||(i=9729),-1!==r||(r=9729),t.texParameteri(3553,10241,i),t.texParameteri(3553,10240,r),t.texParameteri(3553,10242,a),t.texParameteri(3553,10243,a),this._mipMap&&t.generateMipmap(3553)):(-1!==i||(i=9729),-1!==r||(r=9729),t.texParameteri(3553,10241,i),t.texParameteri(3553,10240,r),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071)),t.bindFramebuffer(36160,this._frameBuffer),t.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=t.createRenderbuffer()),t.bindRenderbuffer(36161,this._depthStencilBuffer),t.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:t.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:t.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:t.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer);}
t.bindFramebuffer(36160,null),e&&n&&xt.bindTexture(t,e,n),t.bindRenderbuffer(36161,null),o&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate();},n.disposeResource=function(){this._frameBuffer&&(It.mainContext.deleteTexture(this._source),It.mainContext.deleteFramebuffer(this._frameBuffer),It.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0);},a(0,n,"depthStencilBuffer",function(){return this._depthStencilBuffer;}),a(0,n,"frameBuffer",function(){return this._frameBuffer;}),e;}(),Xt=function(t){function e(t,n,i,r,a,o,s){this.offsetX=0,this.offsetY=0,e.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=o,this.canvas=t,this._ctx=t.getContext("2d",void 0),this._w=r,this._h=a,this.offsetX=n,this.offsetY=i,this.src=s,this._enableMerageInAtlas=!0,B.enabled&&this._w<B.atlasLimitWidth&&this._h<B.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1;}
r(e,"laya.webgl.resource.WebGLSubImage",u);var i=e.prototype;return n.imps(i,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),i.size=function(t,e){this._w=t,this._h=e,this._ctx&&this._ctx.size(t,e),this.canvas&&(this.canvas.height=e,this.canvas.width=t);},i.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate();},i.createWebGlTexture=function(){var t=It.mainContext;if(!this.canvas)throw "create GLTextur err:no data:"+this.canvas;var e=this._source=t.createTexture(),n=xt.curBindTexTarget,i=xt.curBindTexValue;xt.bindTexture(t,3553,e),S.isConchWebGL?t.texImage2DEx(!0,3553,0,6408,6408,5121,this.canvas):(t.pixelStorei(37441,!0),t.texImage2D(3553,0,6408,6408,5121,this.canvas),t.pixelStorei(37441,!1));var r=this.minFifter,a=this.magFifter,o=this.repeat?10497:33071,l=s.isPOT(this.width,this.height);l?(this.mipmap?-1!==r||(r=9987):-1!==r||(r=9729),-1!==a||(a=9729),t.texParameteri(3553,10240,a),t.texParameteri(3553,10241,r),t.texParameteri(3553,10242,o),t.texParameteri(3553,10243,o),this.mipmap&&t.generateMipmap(3553)):(-1!==r||(r=9729),-1!==a||(a=9729),t.texParameteri(3553,10241,r),t.texParameteri(3553,10240,a),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071)),n&&i&&xt.bindTexture(t,n,i),this.canvas=null,l&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4;},i.disposeResource=function(){B.enabled&&this._allowMerageInAtlas||!this._source||(It.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},i.clearAtlasSource=function(){},a(0,i,"allowMerageInAtlas",function(){return this._allowMerageInAtlas;}),a(0,i,"atlasSource",function(){return this.canvas;}),a(0,i,"enableMerageInAtlas",function(){return this._allowMerageInAtlas;},function(t){this._allowMerageInAtlas=t;}),e;}(),Yt=function(t){function e(t,n,i,r){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,e.__super.call(this),!t||!n)throw "Shader Error";this._id=++e._count,this._vs=t,this._ps=n,this._nameMap=r||{},null!=i&&(e.sharders[i]=this);}
r(e,"laya.webgl.shader.Shader",Ft);var n=e.prototype;return n.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0;},n.disposeResource=function(){It.mainContext.deleteShader(this._vshader),It.mainContext.deleteShader(this._pshader),It.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0;},n._compile=function(){if(this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var t=[this._vs,this._ps],n=It.mainContext;if(this._program=n.createProgram(),this._vshader=e._createShader(n,t[0],35633),this._pshader=e._createShader(n,t[1],35632),n.attachShader(this._program,this._vshader),n.attachShader(this._program,this._pshader),n.linkProgram(this._program),!S.isConchApp&&!n.getProgramParameter(this._program,35714))throw n.getProgramInfoLog(this._program);var i,r=0,a=0,o=0;for(o=S.isConchApp?n.getProgramParameterEx(this._vs,this._ps,"",35721):n.getProgramParameter(this._program,35721),r=0;r<o;r++){var s=null;i={vartype:"attribute",glfun:null,ivartype:0,attrib:s=S.isConchApp?n.getActiveAttribEx(this._vs,this._ps,"",r):n.getActiveAttrib(this._program,r),location:n.getAttribLocation(this._program,s.name),name:s.name,type:s.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(i);}
var l=0;for(l=S.isConchApp?n.getProgramParameterEx(this._vs,this._ps,"",35718):n.getProgramParameter(this._program,35718),r=0;r<l;r++){var u=null;u=S.isConchApp?n.getActiveUniformEx(this._vs,this._ps,"",r):n.getActiveUniform(this._program,r),(i={vartype:"uniform",glfun:null,ivartype:1,attrib:s,location:n.getUniformLocation(this._program,u.name),name:u.name,type:u.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")>0&&(i.name=i.name.substr(0,i.name.length-3),i.isArray=!0,i.location=n.getUniformLocation(this._program,i.name)),this._params.push(i);}
for(r=0,a=this._params.length;r<a;r++){if(i=this._params[r],i.indexOfParams=r,i.index=1,i.value=[i.location,null],i.codename=i.name,i.name=this._nameMap[i.codename]?this._nameMap[i.codename]:i.codename,this._paramsMap[i.name]=i,i._this=this,i.uploadedValue=[],"attribute"!==i.vartype)switch(i.type){case 5124:i.fun=i.isArray?this._uniform1iv:this._uniform1i;break;case 5126:i.fun=i.isArray?this._uniform1fv:this._uniform1f;break;case 35664:i.fun=i.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:i.fun=i.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:i.fun=i.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:i.fun=this._uniform_sampler2D;break;case 35680:i.fun=this._uniform_samplerCube;break;case 35676:i.glfun=n.uniformMatrix4fv,i.fun=this._uniformMatrix4fv;break;case 35670:i.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!");}else i.fun=this._attribute;}}},n.getUniform=function(t){return this._paramsMap[t];},n._attribute=function(t,e){var n=It.mainContext,i=Nt._enableAtributes,r=t.location;return i[r]||n.enableVertexAttribArray(r),n.vertexAttribPointer(r,e[0],e[1],e[2],e[3],e[4]+this._offset),i[r]=Nt._bindVertexBuffer,1;},n._uniform1f=function(t,e){var n=t.uploadedValue;return n[0]!==e?(It.mainContext.uniform1f(t.location,n[0]=e),1):0;},n._uniform1fv=function(t,e){if(e.length<4){var n=t.uploadedValue;return n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]?(It.mainContext.uniform1fv(t.location,e),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],1):0;}
return It.mainContext.uniform1fv(t.location,e),1;},n._uniform_vec2=function(t,e){var n=t.uploadedValue;return n[0]!==e[0]||n[1]!==e[1]?(It.mainContext.uniform2f(t.location,n[0]=e[0],n[1]=e[1]),1):0;},n._uniform_vec2v=function(t,e){if(e.length<2){var n=t.uploadedValue;return n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]?(It.mainContext.uniform2fv(t.location,e),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],1):0;}
return It.mainContext.uniform2fv(t.location,e),1;},n._uniform_vec3=function(t,e){var n=t.uploadedValue;return n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]?(It.mainContext.uniform3f(t.location,n[0]=e[0],n[1]=e[1],n[2]=e[2]),1):0;},n._uniform_vec3v=function(t,e){return It.mainContext.uniform3fv(t.location,e),1;},n._uniform_vec4=function(t,e){var n=t.uploadedValue;return n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]?(It.mainContext.uniform4f(t.location,n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]),1):0;},n._uniform_vec4v=function(t,e){return It.mainContext.uniform4fv(t.location,e),1;},n._uniformMatrix2fv=function(t,e){return It.mainContext.uniformMatrix2fv(t.location,!1,e),1;},n._uniformMatrix3fv=function(t,e){return It.mainContext.uniformMatrix3fv(t.location,!1,e),1;},n._uniformMatrix4fv=function(t,e){return It.mainContext.uniformMatrix4fv(t.location,!1,e),1;},n._uniform1i=function(t,e){var n=t.uploadedValue;return n[0]!==e?(It.mainContext.uniform1i(t.location,n[0]=e),1):0;},n._uniform1iv=function(t,e){return It.mainContext.uniform1iv(t.location,e),1;},n._uniform_ivec2=function(t,e){var n=t.uploadedValue;return n[0]!==e[0]||n[1]!==e[1]?(It.mainContext.uniform2i(t.location,n[0]=e[0],n[1]=e[1]),1):0;},n._uniform_ivec2v=function(t,e){return It.mainContext.uniform2iv(t.location,e),1;},n._uniform_vec3i=function(t,e){var n=t.uploadedValue;return n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]?(It.mainContext.uniform3i(t.location,n[0]=e[0],n[1]=e[1],n[2]=e[2]),1):0;},n._uniform_vec3vi=function(t,e){return It.mainContext.uniform3iv(t.location,e),1;},n._uniform_vec4i=function(t,e){var n=t.uploadedValue;return n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]?(It.mainContext.uniform4i(t.location,n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]),1):0;},n._uniform_vec4vi=function(t,e){return It.mainContext.uniform4iv(t.location,e),1;},n._uniform_sampler2D=function(t,n){var i=It.mainContext,r=t.uploadedValue;return null==r[0]?(r[0]=this._curActTexIndex,i.uniform1i(t.location,this._curActTexIndex),i.activeTexture(e._TEXTURES[this._curActTexIndex]),xt.bindTexture(i,3553,n),this._curActTexIndex++,1):(i.activeTexture(e._TEXTURES[r[0]]),xt.bindTexture(i,3553,n),0);},n._uniform_samplerCube=function(t,n){var i=It.mainContext,r=t.uploadedValue;return null==r[0]?(r[0]=this._curActTexIndex,i.uniform1i(t.location,this._curActTexIndex),i.activeTexture(e._TEXTURES[this._curActTexIndex]),xt.bindTexture(i,34067,n),this._curActTexIndex++,1):(i.activeTexture(e._TEXTURES[r[0]]),xt.bindTexture(i,34067,n),0);},n._noSetValue=function(t){console.log("no....:"+t.name);},n.uploadOne=function(t,e){this.activeResource(),xt.UseProgram(this._program);var n=this._paramsMap[t];n.fun.call(this,n,e);},n.uploadTexture2D=function(t){M.shaderCall++;var e=It.mainContext;e.activeTexture(33984),xt.bindTexture(e,3553,t);},n.upload=function(t,e){Ft.activeShader=Ft.bindShader=this,this._lastUseFrameCount===M.loopCount||this.activeResource(),xt.UseProgram(this._program),this._reCompile?(e=this._params,this._reCompile=!1):e=e||this._params;It.mainContext;for(var n,i,r=e.length,a=0,o=0;o<r;o++){null!==(i=t[(n=e[o]).name])&&(a+=n.fun.call(this,n,i));}
M.shaderCall+=a;},n.uploadArray=function(t,e,n){Ft.activeShader=this,Ft.bindShader=this,this.activeResource(),xt.UseProgram(this._program);this._params;for(var i,r,a=0,o=e-2;o>=0;o-=2){(r=this._paramsMap[t[o]])&&null!=(i=t[o+1])&&(n&&n[r.name]&&n[r.name].bind(),a+=r.fun.call(this,r,i));}
M.shaderCall+=a;},n.getParams=function(){return this._params;},e.getShader=function(t){return e.sharders[t];},e.create=function(t,n,i,r){return new e(t,n,i,r);},e.withCompile=function(t,n,i,r){if(i&&e.sharders[i])return e.sharders[i];var a=e._preCompileShader[2e-4*t];if(!a)throw new Error("withCompile shader err!"+t);return a.createShader(n,i,r);},e.withCompile2D=function(t,n,i,r,a){if(r&&e.sharders[r])return e.sharders[r];var o=e._preCompileShader[2e-4*t+n];if(!o)throw new Error("withCompile shader err!"+t+" "+n);return o.createShader(i,r,a);},e.addInclude=function(t,e){vt.addInclude(t,e);},e.preCompile=function(t,n,i,r){var a=2e-4*t;e._preCompileShader[a]=new vt(a,n,i,r);},e.preCompile2D=function(t,n,i,r,a){var o=2e-4*t+n;e._preCompileShader[o]=new vt(o,i,r,a);},e._createShader=function(t,e,n){var i=t.createShader(n);return t.shaderSource(i,e),t.compileShader(i),i;},e._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],e._count=0,e._preCompileShader={},e.SHADERNAME2ID=2e-4,e.sharders=(e.sharders=[],e.sharders.length=32,e.sharders),i(e,["nameKey",function(){return this.nameKey=new A();}]),e;}(),qt=function(t){function e(){this._maxsize=0,this._upload=!0,this._uploadSize=0,e.__super.call(this),this.lock=!0;}
r(e,"laya.webgl.utils.Buffer2D",t);var n=e.prototype;return n.needSize=function(t){var e=this._byteLength;if(t){var n=this._byteLength+t;n<=this._buffer.byteLength||this._resizeBuffer(n<<1,!0),this._byteLength=n;}
return e;},n._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),M.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,Nt._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),Nt._gl.bufferSubData(this._bufferType,0,this._buffer);},n._bufferSubData=function(t,e,n){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this._maxsize=Math.max(this._maxsize,this._byteLength),M.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,Nt._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),e||n){var i=this._buffer.slice(e,n);Nt._gl.bufferSubData(this._bufferType,t,i);}else Nt._gl.bufferSubData(this._bufferType,t,this._buffer);},n._checkArrayUse=function(){},n._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0);},n._bind_subUpload=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(t,e,n),!0);},n._resizeBuffer=function(t,e){if(t<this._buffer.byteLength)return this;if(this.memorySize=t,e&&this._buffer&&this._buffer.byteLength>0){var n=new ArrayBuffer(t);new Uint8Array(n).set(new Uint8Array(this._buffer),0),this._buffer=n;}else this._buffer=new ArrayBuffer(t);return this._checkArrayUse(),this._upload=!0,this;},n.append=function(t){this._upload=!0;var e,n=0;n=t.byteLength,t instanceof Uint8Array?(this._resizeBuffer(this._byteLength+n,!0),e=new Uint8Array(this._buffer,this._byteLength)):t instanceof Uint16Array?(this._resizeBuffer(this._byteLength+n,!0),e=new Uint16Array(this._buffer,this._byteLength)):t instanceof Float32Array&&(this._resizeBuffer(this._byteLength+n,!0),e=new Float32Array(this._buffer,this._byteLength)),e.set(t,0),this._byteLength+=n,this._checkArrayUse();},n.appendU16Array=function(t,e){this._resizeBuffer(this._byteLength+2*e,!0);for(var n=new Uint16Array(this._buffer,this._byteLength,e),i=0;i<e;i++){n[i]=t[i];}
this._byteLength+=2*e,this._checkArrayUse();},n.appendEx=function(t,e){this._upload=!0;var n=0;n=t.byteLength,this._resizeBuffer(this._byteLength+n,!0),new e(this._buffer,this._byteLength).set(t,0),this._byteLength+=n,this._checkArrayUse();},n.appendEx2=function(t,e,n,i){void 0===i&&(i=1),this._upload=!0;var r,a=0;a=n*i,this._resizeBuffer(this._byteLength+a,!0),r=new e(this._buffer,this._byteLength);var o=0;for(o=0;o<n;o++){r[o]=t[o];}
this._byteLength+=a,this._checkArrayUse();},n.getBuffer=function(){return this._buffer;},n.setNeedUpload=function(){this._upload=!0;},n.getNeedUpload=function(){return this._upload;},n.upload=function(){var t=this._bind_upload();return Nt._gl.bindBuffer(this._bufferType,null),Nt._bindActive[this._bufferType]=null,Ft.activeShader=null,t;},n.subUpload=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0);var i=this._bind_subUpload();return Nt._gl.bindBuffer(this._bufferType,null),Nt._bindActive[this._bufferType]=null,Ft.activeShader=null,i;},n.disposeResource=function(){t.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0;},n.clear=function(){this._byteLength=0,this._upload=!0;},a(0,n,"bufferLength",function(){return this._buffer.byteLength;}),a(0,n,"byteLength",null,function(t){this._byteLength!==t&&(t<=this._buffer.byteLength||this._resizeBuffer(2*t+256,!0),this._byteLength=t);}),e.__int__=function(t){$t.QuadrangleIB=$t.create(35044),mt.fillIBQuadrangle($t.QuadrangleIB,16);},e.FLOAT32=4,e.SHORT=2,e;}(Nt),Zt=(function(t){function e(t){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,e.__super.call(this,9);}
r(e,"laya.webgl.shader.d2.value.GlowSV",t);var n=e.prototype;n.setValue=function(e){t.prototype.setValue.call(this,e);},n.clear=function(){t.prototype.clear.call(this);};}(kt),function(t){function e(t){e.__super.call(this,64),this.defines.add(64);}
r(e,"laya.webgl.shader.d2.value.TextSV",t);var n=e.prototype;return n.release=function(){e.pool[e._length++]=this,this.clear();},n.clear=function(){t.prototype.clear.call(this);},e.create=function(){return e._length?e.pool[--e._length]:new e(null);},e.pool=[],e._length=0,e;}(kt)),Jt=function(t){function e(t,n,i,r){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,e.__super.call(this,t,n,i,r);}
r(e,"laya.webgl.shader.d2.Shader2X",t);var n=e.prototype;return n.upload2dQuick1=function(t){this.upload(t,this._params2dQuick1||this._make2dQuick1());},n._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var t,e=this._params,n=0,i=e.length;n<i;n++){t=e[n],(S.isFlash||"size"!==t.name&&"position"!==t.name&&"texcoord"!==t.name)&&this._params2dQuick1.push(t);}}
return this._params2dQuick1;},n.disposeResource=function(){t.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null;},n.upload2dQuick2=function(t){this.upload(t,this._params2dQuick2||this._make2dQuick2());},n._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var t,e=this._params,n=0,i=e.length;n<i;n++){t=e[n],(S.isFlash||"size"!==t.name)&&this._params2dQuick2.push(t);}}
return this._params2dQuick2;},e.create=function(t,n,i,r){return new e(t,n,i,r);},e;}(Yt),$t=function(t){function e(t){this._uint8Array=null,this._uint16Array=null,void 0===t&&(t=35044),e.__super.call(this),this._bufferUsage=t,this._bufferType=34963,S.isFlash||(this._buffer=new ArrayBuffer(8));}
r(e,"laya.webgl.utils.IndexBuffer2D",qt);var n=e.prototype;return n._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer));},n.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer));},n.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer));},n.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null;},e.QuadrangleIB=null,e.create=function(t){return void 0===t&&(t=35044),new e(t);},e;}(),Qt=function(t){function e(t,n){this._floatArray32=null,this._vertexStride=0,e.__super.call(this),this._vertexStride=t,this._bufferUsage=n,this._bufferType=34962,S.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array();}
r(e,"laya.webgl.utils.VertexBuffer2D",t);var n=e.prototype;return n.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer));},n.bind=function(t){t&&t._bind(),this._bind();},n.insertData=function(t,e){this.getFloat32Array().set(t,e),this._upload=!0;},n.bind_upload=function(t){t._bind_upload()||t._bind(),this._bind_upload()||this._bind();},n._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer));},n.disposeResource=function(){t.prototype.disposeResource.call(this);var e=Nt._enableAtributes;if(!S.isConchWebGL)for(var n=0;n<10;n++){It.mainContext.disableVertexAttribArray(n),e[n]=null;}},n.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null;},a(0,n,"vertexStride",function(){return this._vertexStride;}),e.create=function(t,n){return void 0===n&&(n=35048),new e(t,n);},e;}(qt),te=function(t){function e(t,n,i,r){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,this.magFifter=0,void 0===i&&(i=6408),void 0===r&&(r=!0),e.__super.call(this,t,n),this._format=i,this._mipmap=r,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof t)this._url=t,this._src=t,this._image=new h.window.Image(),n&&(n.onload&&(this.onload=n.onload),n.onerror&&(this.onerror=n.onerror),n.onCreate&&n.onCreate(this)),this._image.crossOrigin=t&&0==t.indexOf("data:")?null:"",t&&(this._image.src=t);else if(t instanceof ArrayBuffer){this._src=n,this._url=this._src;var a=new c(t);a.readUTFBytes(4),a.readUTFBytes(2),a.getInt16();a.endian="bigEndian",this._w=a.getInt16(),this._h=a.getInt16();a.getInt16(),a.getInt16();this._image=new Uint8Array(t,a.pos),this._format=It.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,B.enabled&&this._w<B.atlasLimitWidth&&this._h<B.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1;}else this._src=n,this._url=this._src,this._image=t.source||t,this.onresize();this._$5__enableMerageInAtlas=!0;}
r(e,"laya.webgl.resource.WebGLImage",y);var i=e.prototype;return n.imps(i,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),i._init_=function(t,e){},i._createWebGlTexture=function(){if(!this._image)throw "create GLTextur err:no data:"+this._image;var t=It.mainContext,e=this._source=t.createTexture(),n=xt.curBindTexTarget,i=xt.curBindTexValue;if(xt.bindTexture(t,3553,e),S.isConchWebGL)switch(this._format){case 6408:t.texImage2DEx(!0,3553,0,this._format,6408,5121,this._image);break;case It.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:t.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);}else{switch(t.pixelStorei(37441,!0),this._format){case 6408:t.texImage2D(3553,0,this._format,6408,5121,this._image);break;case It.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:t.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);}
t.pixelStorei(37441,!1);}
var r=this.minFifter,a=this.magFifter,o=this.repeat?10497:33071,l=s.isPOT(this._w,this._h);l?(this.mipmap?-1!==r||(r=9987):-1!==r||(r=9729),-1!==a||(a=9729),t.texParameteri(3553,10241,r),t.texParameteri(3553,10240,a),t.texParameteri(3553,10242,o),t.texParameteri(3553,10243,o),this.mipmap&&t.generateMipmap(3553)):(-1!==r||(r=9729),-1!==a||(a=9729),t.texParameteri(3553,10241,r),t.texParameteri(3553,10240,a),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071)),n&&i&&xt.bindTexture(t,n,i),this._image.onload=null,this._image=null,l&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._recreateLock=!1;},i.recreateResource=function(){var t=this;if(null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate();}else{this._recreateLock=!0;var e=this;this._image=new h.window.Image(),this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(e._needReleaseAgain)return e._needReleaseAgain=!1,e._image.onload=null,void(e._image=null);e._allowMerageInAtlas&&e._enableMerageInAtlas?(t.memorySize=0,t._recreateLock=!1):e._createWebGlTexture(),e.completeCreate();},this._image.src=this._src;}},i.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(It.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0);},i.onresize=function(){this._w=this._image.width,this._h=this._image.height,B.enabled&&this._w<B.atlasLimitWidth&&this._h<B.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1;},i.clearAtlasSource=function(){this._image=null;},a(0,i,"format",function(){return this._format;}),a(0,i,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas;},function(t){this._$5__enableMerageInAtlas=t;}),a(0,i,"mipmap",function(){return this._mipmap;}),a(0,i,"allowMerageInAtlas",function(){return this._allowMerageInAtlas;}),a(0,i,"atlasSource",function(){return this._image;}),a(0,i,"onload",null,function(t){var e=this;this._onload=t,this._image&&(this._image.onload=null!=this._onload?function(){e.onresize(),e._onload();}:null);}),a(0,i,"onerror",null,function(t){var e=this;this._onerror=t,this._image&&(this._image.onerror=null!=this._onerror?function(){e._onerror();}:null);}),e;}();n.__init([ft,G,St,vt]);}(window,document,Laya),"function"==typeof window.define&&window.define.amd&&window.define("laya.core",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var n in Laya){var i=Laya[n];i&&i.__isclass&&(e[n]=i);}}),function(t,e,n){n.un,n.uns;var i=n.static,r=n.class,a=n.getset,o=n.__newvec,s=laya.maths.Bezier,l=laya.utils.Browser,u=laya.utils.Byte,h=(laya.events.Event,laya.events.EventDispatcher),c=laya.display.Graphics,_=laya.resource.HTMLCanvas,f=laya.utils.Handler,d=laya.net.Loader,p=laya.maths.MathUtil,m=laya.maths.Matrix,g=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle),y=laya.renders.Render,v=(laya.renders.RenderContext,laya.resource.Resource),I=laya.utils.RunDriver,x=laya.display.Sprite,T=laya.utils.Stat,S=laya.resource.Texture,b=laya.net.URL,w=laya.utils.Utils,D=function(){function t(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0;}
return r(t,"laya.ani.AnimationContent"),t;}(),C=function(){function t(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0;}
return r(t,"laya.ani.AnimationNodeContent"),t;}(),E=function(){function t(){}
return r(t,"laya.ani.AnimationParser01"),t.parse=function(t,e){var n=e.__getBuffer(),i=0,r=0,a=0,o=0,s=0,l=0,h=0,c=e.readUTFString();t._aniClassName=c;var _,f=e.readUTFString().split("\n"),d=e.getUint8(),p=e.getUint32(),m=e.getUint32();p>0&&(_=n.slice(p,m));var g=new u(_);for(m>0&&(t._publicExtData=n.slice(m,n.byteLength)),t._useParent=!!e.getUint8(),t._anis.length=d,i=0;i<d;i++){var y=t._anis[i]=new D();y.nodes=new Array();var v=y.name=f[e.getUint16()];t._aniMap[v]=i,y.bone3DMap={},y.playTime=e.getFloat32();var I=y.nodes.length=e.getUint8();for(y.totalKeyframeDatasLength=0,r=0;r<I;r++){var x=y.nodes[r]=new C();x.childs=[];var T=e.getInt16();T>=0&&(x.name=f[T],y.bone3DMap[x.name]=r),x.keyFrame=new Array(),x.parentIndex=e.getInt16(),-1==x.parentIndex?x.parent=null:x.parent=y.nodes[x.parentIndex],x.lerpType=e.getUint8();var S=e.getUint32();g.pos=S;var b=x.keyframeWidth=g.getUint16();if(y.totalKeyframeDatasLength+=b,0===x.lerpType||1===x.lerpType)for(x.interpolationMethod=[],x.interpolationMethod.length=b,a=0;a<b;a++){x.interpolationMethod[a]=nt.interpolation[g.getUint8()];}
null!=x.parent&&x.parent.childs.push(x);var w=e.getUint16();w>0&&(x.extenData=n.slice(e.pos,e.pos+w),e.pos+=w);var E=e.getUint16();x.keyFrame.length=E;var P,M=0;for(a=0,o=E;a<o;a++){if(P=x.keyFrame[a]=new J(),P.duration=e.getFloat32(),P.startTime=M,2===x.lerpType){P.interpolationData=[];var A=e.getUint8(),O=0;switch(O=e.getFloat32()){case 254:for(P.interpolationData.length=b,h=0;h<b;h++){P.interpolationData[h]=0;}
break;case 255:for(P.interpolationData.length=b,h=0;h<b;h++){P.interpolationData[h]=5;}
break;default:for(P.interpolationData.push(O),l=1;l<A;l++){P.interpolationData.push(e.getFloat32());}}}
for(P.data=new Float32Array(b),s=0;s<b;s++){P.data[s]=e.getFloat32(),P.data[s]>-1e-8&&P.data[s]<1e-8&&(P.data[s]=0);}
M+=P.duration;}
P.startTime=y.playTime,x.playTime=y.playTime,t._calculateKeyFrame(x,E,b);}}},t;}(),P=function(){function t(){}
return r(t,"laya.ani.AnimationParser02"),t.READ_DATA=function(){t._DATA.offset=t._reader.getUint32(),t._DATA.size=t._reader.getUint32();},t.READ_BLOCK=function(){for(var e=t._BLOCK.count=t._reader.getUint16(),n=t._BLOCK.blockStarts=[],i=t._BLOCK.blockLengths=[],r=0;r<e;r++){n.push(t._reader.getUint32()),i.push(t._reader.getUint32());}},t.READ_STRINGS=function(){var e=t._reader.getUint32(),n=t._reader.getUint16(),i=t._reader.pos;t._reader.pos=e+t._DATA.offset;for(var r=0;r<n;r++){t._strings[r]=t._reader.readUTFString();}
t._reader.pos=i;},t.parse=function(e,n){t._templet=e,t._reader=n;n.__getBuffer();t.READ_DATA(),t.READ_BLOCK(),t.READ_STRINGS();for(var i=0,r=t._BLOCK.count;i<r;i++){var a=n.getUint16(),o=t._strings[a],s=t["READ_"+o];if(null==s)throw new Error("model file err,no this function:"+a+" "+o);s.call();}},t.READ_ANIMATIONS=function(){var e=t._reader,n=e.__getBuffer(),i=0,r=0,a=0,o=0,s=e.getUint16(),l=[];for(l.length=s,i=0;i<s;i++){l[i]=nt.interpolation[e.getByte()];}
var u=e.getUint8();for(t._templet._anis.length=u,i=0;i<u;i++){var h=t._templet._anis[i]={};h.nodes=new Array();var c=h.name=t._strings[e.getUint16()];t._templet._aniMap[c]=i,h.bone3DMap={},h.playTime=e.getFloat32();var _=h.nodes.length=e.getInt16();for(h.totalKeyframeDatasLength=0,r=0;r<_;r++){var f=h.nodes[r]={};f.keyframeWidth=s,f.childs=[];var d=e.getUint16();d>=0&&(f.name=t._strings[d],h.bone3DMap[f.name]=r),f.keyFrame=new Array(),f.parentIndex=e.getInt16(),-1==f.parentIndex?f.parent=null:f.parent=h.nodes[f.parentIndex],h.totalKeyframeDatasLength+=s,f.interpolationMethod=l,null!=f.parent&&f.parent.childs.push(f);var p=e.getUint16();f.keyFrame.length=p;var m=null,g=null;for(a=0,o=p;a<o;a++){(m=f.keyFrame[a]={}).startTime=e.getFloat32(),g&&(g.duration=m.startTime-g.startTime);var y=t._DATA.offset,v=e.getUint32(),I=4*s,x=n.slice(y+v,y+v+I);m.data=new Float32Array(x),g=m;}
m.duration=0,f.playTime=h.playTime,t._templet._calculateKeyFrame(f,p,s);}}},t._templet=null,t._reader=null,t._strings=[],i(t,["_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]),t;}(),M=(function(){function t(){}
r(t,"laya.ani.AnimationState"),t.stopped=0,t.paused=1,t.playing=2;}(),function(){function t(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new q(),this.resultMatrix=new m(),this._children=[];}
r(t,"laya.ani.bone.Bone");var e=t.prototype;return e.setTempMatrix=function(t){this._tempMatrix=t;var e=0,n=0;for(e=0,n=this._children.length;e<n;e++){this._children[e].setTempMatrix(this._tempMatrix);}},e.update=function(t){this.rotation=this.transform.skX;var e;if(t)e=this.resultTransform.getMatrix(),m.mul(e,t,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone){if(this.inheritRotation&&this.inheritScale)e=this.resultTransform.getMatrix(),m.mul(e,this.parentBone.resultMatrix,this.resultMatrix);else{var n=this.parentBone,i=NaN,r=NaN,a=NaN,o=this.parentBone.resultMatrix;e=this.resultTransform.getMatrix();var s=o.a*e.tx+o.c*e.ty+o.tx,l=o.b*e.tx+o.d*e.ty+o.ty,u=new m();this.inheritRotation?(i=Math.atan2(n.resultMatrix.b,n.resultMatrix.a),r=Math.cos(i),a=Math.sin(i),u.setTo(r,a,-a,r,0,0),m.mul(this._tempMatrix,u,m.TEMP),m.TEMP.copyTo(u),e=this.resultTransform.getMatrix(),m.mul(e,u,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI),this.resultMatrix.tx=s,this.resultMatrix.ty=l):(this.inheritScale,e=this.resultTransform.getMatrix(),m.TEMP.identity(),m.TEMP.d=this.d,m.mul(e,m.TEMP,this.resultMatrix),this.resultMatrix.tx=s,this.resultMatrix.ty=l);}}else(e=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var h=0,c=0;for(h=0,c=this._children.length;h<c;h++){this._children[h].update();}},e.updateChild=function(){var t=0,e=0;for(t=0,e=this._children.length;t<e;t++){this._children[t].update();}},e.setRotation=function(t){this._sprite&&(this._sprite.rotation=180*t/Math.PI);},e.updateDraw=function(e,i){t.ShowBones&&!t.ShowBones[this.name]||(this._sprite?(this._sprite.x=e+this.resultMatrix.tx,this._sprite.y=i+this.resultMatrix.ty):(this._sprite=new x(),this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),n.stage.addChild(this._sprite),this._sprite.x=e+this.resultMatrix.tx,this._sprite.y=i+this.resultMatrix.ty));var r=0,a=0;for(r=0,a=this._children.length;r<a;r++){this._children[r].updateDraw(e,i);}},e.addChild=function(t){this._children.push(t),t.parentBone=this;},e.findBone=function(t){if(this.name==t)return this;var e,n,i=0,r=0;for(i=0,r=this._children.length;i<r;i++){if(e=this._children[i],n=e.findBone(t))return n;}
return null;},e.localToWorld=function(t){var e=t[0],n=t[1];t[0]=e*this.resultMatrix.a+n*this.resultMatrix.c+this.resultMatrix.tx,t[1]=e*this.resultMatrix.b+n*this.resultMatrix.d+this.resultMatrix.ty;},t.ShowBones={},t;}()),A=function(){function t(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null;}
r(t,"laya.ani.bone.BoneSlot");var e=t.prototype;return e.showSlotData=function(t,e){void 0===e&&(e=!0),this.currSlotData=t,e&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null;},e.showDisplayByName=function(t){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(t));},e.replaceDisplayByName=function(t,e){if(this.currSlotData){var n=0;n=this.currSlotData.getDisplayByName(t);var i=0;i=this.currSlotData.getDisplayByName(e),this.replaceDisplayByIndex(n,i);}},e.replaceDisplayByIndex=function(t,e){this.currSlotData&&(this._replaceDic[t]=e,this.displayIndex==t&&this.showDisplayByIndex(t));},e.showDisplayByIndex=function(t){if(null!=this._replaceDic[t]&&(t=this._replaceDic[t]),this.currSlotData&&t>-1&&t<this.currSlotData.displayArr.length){if(this.displayIndex=t,this.currDisplayData=this.currSlotData.displayArr[t],this.currDisplayData){var e=this.currDisplayData.name;this.currTexture=this.templet.getTexture(e),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!y.isConchApp||y.isConchApp&&x.RUNTIMEVERION>"0.9.15")&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture));}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null;},e.replaceSkin=function(t){this._diyTexture=t,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null);},e.setParentMatrix=function(t){this._parentMatrix=t;},e.draw=function(e,n,i,r){if(void 0===i&&(i=!1),void 0===r&&(r=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var a=this.currTexture;this._diyTexture&&(a=this._diyTexture);var o;switch(this.currDisplayData.type){case 0:if(e){var s=this.getDisplayMatrix();if(this._parentMatrix){var l=!1;if(s){m.mul(s,this._parentMatrix,m.TEMP);var u;if(i?(null==this._resultMatrix&&(this._resultMatrix=new m()),u=this._resultMatrix):u=new m(),!y.isWebGL&&this.currDisplayData.uvs||y.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var h=t._tempMatrix;h.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(h.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(l=!0,h.rotate(-Math.PI/2)),m.mul(h,m.TEMP,u);}else m.TEMP.copyTo(u);l?e.drawTexture(a,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,u):e.drawTexture(a,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,u);}}}
break;case 1:if(i?(null==this._skinSprite&&(this._skinSprite=t.createSkinMesh()),o=this._skinSprite):o=t.createSkinMesh(),null==o)return;var c;if(null==this.currDisplayData.bones){var _=this.currDisplayData.weights;this.deformData&&(_=this.deformData);var f;this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=Z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=Z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),f=this._curDiyUV):f=this.currDisplayData.uvs,this._mVerticleArr=_;this.currDisplayData.triangles.length;c=this.currDisplayData.triangles,o.init2(a,null,c,this._mVerticleArr,f);var d=this.getDisplayMatrix();if(this._parentMatrix&&d){m.mul(d,this._parentMatrix,m.TEMP);var p;i?(null==this._resultMatrix&&(this._resultMatrix=new m()),p=this._resultMatrix):p=new m(),m.TEMP.copyTo(p),o.transform=p;}}else this.skinMesh(n,o,r);e.drawSkin(o);break;case 2:if(i?(null==this._skinSprite&&(this._skinSprite=t.createSkinMesh()),o=this._skinSprite):o=t.createSkinMesh(),null==o)return;this.skinMesh(n,o,r),e.drawSkin(o);}}},e.skinMesh=function(t,e,n){var i,r=this.currTexture,a=this.currDisplayData.bones;this._diyTexture?(r=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=Z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=Z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),i=this._curDiyUV):i=this.currDisplayData.uvs;var o,s,l=this.currDisplayData.weights,u=this.currDisplayData.triangles,h=0,c=0,_=0,f=NaN,d=NaN,p=0,m=0,g=[],y=0,v=0;if(this.deformData&&this.deformData.length>0){var I=0;for(y=0,v=a.length;y<v;){for(_=a[y++]+y,h=0,c=0;y<_;y++){s=t[a[y]],f=l[p]+this.deformData[I++],d=l[p+1]+this.deformData[I++],m=l[p+2],h+=(f*s.a+d*s.c+s.tx)*m,c+=(f*s.b+d*s.d+s.ty)*m,p+=3;}
g.push(h,c);}}else for(y=0,v=a.length;y<v;){for(_=a[y++]+y,h=0,c=0;y<_;y++){s=t[a[y]],f=l[p],d=l[p+1],m=l[p+2],h+=(f*s.a+d*s.c+s.tx)*m,c+=(f*s.b+d*s.d+s.ty)*m,p+=3;}
g.push(h,c);}
this._mVerticleArr=g,o=u,e.init2(r,null,o,this._mVerticleArr,i);},e.drawBonePoint=function(t){t&&this._parentMatrix&&t.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000");},e.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null;},e.getMatrix=function(){return this._resultMatrix;},e.copy=function(){var e=new t();return e.type="copy",e.name=this.name,e.attachmentName=this.attachmentName,e.srcDisplayIndex=this.srcDisplayIndex,e.parent=this.parent,e.displayIndex=this.displayIndex,e.templet=this.templet,e.currSlotData=this.currSlotData,e.currTexture=this.currTexture,e.currDisplayData=this.currDisplayData,e;},t.createSkinMesh=function(){return y.isWebGL||y.isConchApp?I.skinAniSprite():y.isWebGL?null:rt.useSimpleMeshInCanvas?new it():new et();},i(t,["_tempMatrix",function(){return this._tempMatrix=new m();}]),t;}(),O=function(){function t(){this.mesh=null,this.transform=null,this.context=null,this.mode=0;}
r(t,"laya.ani.bone.canvasmesh.CanvasMeshRender");var e=t.prototype;return e.renderToContext=function(t){this.context=t.ctx||t,this.mesh&&(0==this.mode?this._renderWithIndexes(this.mesh):this._renderNoIndexes(this.mesh));},e._renderNoIndexes=function(t){var e=0,n=t.vertices.length/2,i=0;for(e=0;e<n-2;e++){i=2*e,this._renderDrawTriangle(t,i,i+2,i+4);}},e._renderWithIndexes=function(t){var e=t.indexes,n=0,i=e.length;for(n=0;n<i;n+=3){var r=2*e[n],a=2*e[n+1],o=2*e[n+2];this._renderDrawTriangle(t,r,a,o);}},e._renderDrawTriangle=function(t,e,n,i){var r=this.context,a=t.uvs,o=t.vertices,s=t.texture,l=s.bitmap,u=l.source,h=s.width,c=s.height,_=l.width,f=l.height,d=NaN,p=NaN,m=NaN,g=NaN,y=NaN,v=NaN;if(t.useUvTransform){var I=t.uvTransform;d=(a[e]*I.a+a[e+1]*I.c+I.tx)*_,p=(a[n]*I.a+a[n+1]*I.c+I.tx)*_,m=(a[i]*I.a+a[i+1]*I.c+I.tx)*_,g=(a[e]*I.b+a[e+1]*I.d+I.ty)*f,y=(a[n]*I.b+a[n+1]*I.d+I.ty)*f,v=(a[i]*I.b+a[i+1]*I.d+I.ty)*f;}else d=a[e]*_,p=a[n]*_,m=a[i]*_,g=a[e+1]*f,y=a[n+1]*f,v=a[i+1]*f;var x=o[e],T=o[n],S=o[i],b=o[e+1],w=o[n+1],D=o[i+1];if(t.canvasPadding>0){var C=t.canvasPadding,E=t.canvasPadding,P=(x+T+S)/3,M=(b+w+D)/3,A=x-P,O=b-M,R=Math.sqrt(A*A+O*O);x=P+A/R*(R+C),b=M+O/R*(R+E),O=w-M,T=P+(A=T-P)/(R=Math.sqrt(A*A+O*O))*(R+C),w=M+O/R*(R+E),O=D-M,S=P+(A=S-P)/(R=Math.sqrt(A*A+O*O))*(R+C),D=M+O/R*(R+E);}
if(r.save(),this.transform){var L=this.transform;r.transform(L.a,L.b,L.c,L.d,L.tx,L.ty);}
r.beginPath(),r.moveTo(x,b),r.lineTo(T,w),r.lineTo(S,D),r.closePath(),r.clip();var F=1/(d*y+g*m+p*v-y*m-g*p-d*v),V=x*y+g*S+T*v-y*S-g*T-x*v,N=d*T+x*m+p*S-T*m-x*p-d*S,U=d*y*S+g*T*m+x*p*v-x*y*m-g*p*S-d*T*v,G=b*y+g*D+w*v-y*D-g*w-b*v,B=d*w+b*m+p*D-w*m-b*p-d*D,k=d*y*D+g*w*m+b*p*v-b*y*m-g*p*D-d*w*v;r.transform(V*F,G*F,N*F,B*F,U*F,k*F),r.drawImage(u,s.uv[0]*_,s.uv[1]*f,h,c,s.uv[0]*_,s.uv[1]*f,h,c),r.restore();},t;}(),R=function(){function t(){this.texture=null,this.uvs=[0,0,1,0,1,1,0,1],this.vertices=[0,0,100,0,100,100,0,100],this.indexes=[0,1,3,3,1,2],this.uvTransform=null,this.useUvTransform=!1,this.canvasPadding=1;}
r(t,"laya.ani.bone.canvasmesh.MeshData");return t.prototype.getBounds=function(){return g._getWrapRec(this.vertices);},t;}(),L=function(){function t(){this.skinName=null,this.deformSlotDataList=[];}
return r(t,"laya.ani.bone.DeformAniData"),t;}(),F=function(){function t(){this.deformSlotDisplayList=[];}
return r(t,"laya.ani.bone.DeformSlotData"),t;}(),V=function(){function t(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[];}
r(t,"laya.ani.bone.DeformSlotDisplayData");var e=t.prototype;return e.binarySearch1=function(t,e){var n=0,i=t.length-2;if(0==i)return 1;for(var r=i>>>1;;){if(t[Math.floor(r+1)]<=e?n=r+1:i=r,n==i)return n+1;r=n+i>>>1;}
return 0;},e.apply=function(t,e,n){if(void 0===n&&(n=1),t+=.05,!(this.timeList.length<=0)){var i=0;if(!(t<this.timeList[0])){var r=this.vectices[0].length,a=[],o=this.binarySearch1(this.timeList,t);if(this.frameIndex=o,t>=this.timeList[this.timeList.length-1]){var s=this.vectices[this.vectices.length-1];if(n<1)for(i=0;i<r;i++){a[i]+=(s[i]-a[i])*n;}else for(i=0;i<r;i++){a[i]=s[i];}
this.deformData=a;}else{this.tweenKeyList[this.frameIndex];var l=this.vectices[this.frameIndex-1],u=this.vectices[this.frameIndex],h=this.timeList[this.frameIndex-1],c=this.timeList[this.frameIndex];n=this.tweenKeyList[o-1]?(t-h)/(c-h):0;var _=NaN;for(i=0;i<r;i++){_=l[i],a[i]=_+(u[i]-_)*n;}
this.deformData=a;}}}},t;}(),N=function(){function t(){this.time=NaN,this.drawOrder=[];}
return r(t,"laya.ani.bone.DrawOrderData"),t;}(),U=function(){function t(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN;}
return r(t,"laya.ani.bone.EventData"),t;}(),G=function(){function t(t,e){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=t,this._targetBone=e[t.targetBoneIndex],this.isSpine=t.isSpine,null==this._bones&&(this._bones=[]),this._bones.length=0;for(var n=0,i=t.boneIndexs.length;n<i;n++){this._bones.push(e[t.boneIndexs[n]]);}
this.name=t.name,this.mix=t.mix,this.bendDirection=t.bendDirection;}
r(t,"laya.ani.bone.IkConstraint");var e=t.prototype;return e.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix);}},e._applyIk1=function(e,n,i,r){var a=e.parentBone,o=1/(a.resultMatrix.a*a.resultMatrix.d-a.resultMatrix.b*a.resultMatrix.c),s=n-a.resultMatrix.tx,l=i-a.resultMatrix.ty,u=(s*a.resultMatrix.d-l*a.resultMatrix.c)*o-e.transform.x,h=(l*a.resultMatrix.a-s*a.resultMatrix.b)*o-e.transform.y,c=Math.atan2(h,u)*t.radDeg-0-e.transform.skX;e.transform.scX<0&&(c+=180),c>180?c-=360:c<-180&&(c+=360),e.transform.skX=e.transform.skY=e.transform.skX+c*r,e.update();},e.updatePos=function(t,e){this._sp&&this._sp.pos(t,e);},e._applyIk2=function(e,i,r,a,o,s){if(0!=s){var l=e.resultTransform.x,u=e.resultTransform.y,h=e.transform.scX,c=e.transform.scY,_=i.transform.scX,f=0,d=0,p=0;h<0?(h=-h,f=180,p=-1):(f=0,p=1),c<0&&(c=-c,p=-p),_<0?(_=-_,d=180):d=0;var m=i.resultTransform.x,g=NaN,y=NaN,v=NaN,I=e.resultMatrix.a,T=e.resultMatrix.c,S=e.resultMatrix.b,b=e.resultMatrix.d,w=Math.abs(h-c)<=1e-4;w?(y=I*m+T*(g=i.resultTransform.y)+e.resultMatrix.tx,v=S*m+b*g+e.resultMatrix.ty):(g=0,y=I*m+e.resultMatrix.tx,v=S*m+e.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new x(),n.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(r,a,15,"#ffff00"),this._sp.graphics.drawCircle(y,v,15,"#ff00ff")),e.setRotation(Math.atan2(v-e.resultMatrix.ty,y-e.resultMatrix.tx));var D=e.parentBone;I=D.resultMatrix.a,T=D.resultMatrix.c,S=D.resultMatrix.b;var C=1/(I*(b=D.resultMatrix.d)-T*S),E=r-D.resultMatrix.tx,P=a-D.resultMatrix.ty,M=(E*b-P*T)*C-l,A=(P*I-E*S)*C-u,O=((E=y-D.resultMatrix.tx)*b-(P=v-D.resultMatrix.ty)*T)*C-l,R=(P*I-E*S)*C-u,L=Math.sqrt(O*O+R*R),F=i.length*_,V=NaN,N=NaN;if(w){var U=(M*M+A*A-L*L-(F*=h)*F)/(2*L*F);U<-1?U=-1:U>1&&(U=1),N=Math.acos(U)*o,I=L+F*U,T=F*Math.sin(N),V=Math.atan2(A*I-M*T,M*I+A*T);}else{var G=(I=h*F)*I,B=(T=c*F)*T,k=M*M+A*A,H=Math.atan2(A,M),z=-2*B*L,j=B-G;if((b=z*z-4*j*(S=B*L*L+G*k-G*B))>0){var W=Math.sqrt(b);z<0&&(W=-W);var K=(W=-(z+W)/2)/j,X=S/W,Y=Math.abs(K)<Math.abs(X)?K:X;Y*Y<=k&&(P=Math.sqrt(k-Y*Y)*o,V=H-Math.atan2(P,Y),N=Math.atan2(P/c,(Y-L)/h));}
var q=0,Z=Number.MAX_VALUE,J=0,$=0,Q=0,tt=0,et=0,nt=0;(b=(E=L+I)*E)>tt&&(Q=0,tt=b,et=E),(b=(E=L-I)*E)<Z&&(q=Math.PI,Z=b,J=E);var it=Math.acos(-I*L/(G-B));(b=(E=I*Math.cos(it)+L)*E+(P=T*Math.sin(it))*P)<Z&&(q=it,Z=b,J=E,$=P),b>tt&&(Q=it,tt=b,et=E,nt=P),k<=(Z+tt)/2?(V=H-Math.atan2($*o,J),N=q*o):(V=H-Math.atan2(nt*o,et),N=Q*o);}
var rt=Math.atan2(g,m)*p,at=e.resultTransform.skX;(V=(V-rt)*t.radDeg+f-at)>180?V-=360:V<-180&&(V+=360),e.resultTransform.x=l,e.resultTransform.y=u,e.resultTransform.skX=e.resultTransform.skY=at+V*s,at=i.resultTransform.skX,(N=((N+rt)*t.radDeg-0)*p+d-(at%=360))>180?N-=360:N<-180&&(N+=360),i.resultTransform.x=m,i.resultTransform.y=g,i.resultTransform.skX=i.resultTransform.skY=i.resultTransform.skY+N*s,e.update();}},e._applyIk3=function(e,i,r,a,o,s){if(0!=s){var l=NaN,u=NaN,h=i.resultMatrix.a*i.length,c=i.resultMatrix.b*i.length,_=h*h+c*c,f=Math.sqrt(_),d=e.resultMatrix.tx,p=e.resultMatrix.ty,m=i.resultMatrix.tx,g=i.resultMatrix.ty,y=m-d,v=g-p,I=y*y+v*v,T=Math.sqrt(I),S=(y=r-e.resultMatrix.tx)*y+(v=a-e.resultMatrix.ty)*v,b=Math.sqrt(S);if(f+T<=b||b+f<=T||b+T<=f){var w=NaN;m=d+(w=f+T<=b?1:-1)*(r-d)*T/b,g=p+w*(a-p)*T/b;}else{var D=(I-_+S)/(2*S),C=Math.sqrt(I-D*D*S)/b,E=d+y*D,P=p+v*D,M=-v*C,A=y*C;o>0?(m=E-M,g=P-A):(m=E+M,g=P+A);}
l=m,u=g,this.isDebug&&(this._sp||(this._sp=new x(),n.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(d,p,15,"#ff00ff"),this._sp.graphics.drawCircle(r,a,15,"#ffff00"),this._sp.graphics.drawCircle(l,u,15,"#ff00ff"));var O=NaN;O=Math.atan2(u-e.resultMatrix.ty,l-e.resultMatrix.tx),e.setRotation(O);var R;(R=t._tempMatrix).identity(),R.rotate(O),R.scale(e.resultMatrix.getScaleX(),e.resultMatrix.getScaleY()),R.translate(e.resultMatrix.tx,e.resultMatrix.ty),R.copyTo(e.resultMatrix),e.updateChild();var L=NaN;L=Math.atan2(a-u,r-l),i.setRotation(L);var F;(F=t._tempMatrix).identity(),F.rotate(L),F.scale(i.resultMatrix.getScaleX(),i.resultMatrix.getScaleY()),F.translate(l,u),R.copyTo(i.resultMatrix),i.updateChild();}},i(t,["radDeg",function(){return this.radDeg=180/Math.PI;},"degRad",function(){return this.degRad=Math.PI/180;},"_tempMatrix",function(){return this._tempMatrix=new m();}]),t;}(),B=function(){function t(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[];}
return r(t,"laya.ani.bone.IkConstraintData"),t;}(),k=function(){function t(){}
return r(t,"laya.ani.bone.MeshTools"),t.findEdge=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!0);var i=0,r=0,a=0;for(r=t.length,a=-1,i=0;i<r;i+=2){(a<0||n==t[a+e]<t[i+e])&&(a=i);}
return a;},t.findBestTriangle=function(e){var n=0;n=t.findEdge(e,1,!0);var i=0;i=t.findEdge(e,1,!1);var r=0;r=t.findEdge(e,0,!0);var a=0;a=t.findEdge(e,0,!1);var o;return o=t._bestTriangle,o.length=0,o.push(r,a),o.indexOf(n)<0&&o.push(n),o.indexOf(i)<0&&o.push(i),o;},t.solveMesh=function(e,n){(n=n||[]).length=0;var i;i=e.uvs;var r;r=e.vertices;var a,o,s=0,l=0,u=0;s=(o=t.findBestTriangle(i))[0],l=o[1],u=o[2],t._absArr.length=0;return t.isNormalUV(e.texture.uv)&&t.adptTexture(e),a=t.solvePoints(e.texture.uv,i[s],i[s+1],i[l]-i[s],i[l+1]-i[s+1],i[u]-i[s],i[u+1]-i[s+1],t._absArr),t.transPoints(a,r[s],r[s+1],r[l]-r[s],r[l+1]-r[s+1],r[u]-r[s],r[u+1]-r[s+1],n);},t.findWrapRect=function(e){var n=0;n=t.findEdge(e,1,!0);var i=0;i=t.findEdge(e,1,!1);var r=0;r=t.findEdge(e,0,!0);var a=0;a=t.findEdge(e,0,!1);var o=NaN;o=e[r];var s=NaN;s=e[a];var l=NaN;l=e[n+1];var u=NaN;return[s,u=e[i+1],o-s,l-u];},t.adptTexture=function(e){var n;n=t.findWrapRect(e.uvs);var i,r,a=(i=e.texture).width,o=i.height;r=S.create(i,n[0]*a,n[1]*o,n[2]*a,n[3]*o),e.texture=r;},t.isNormalUV=function(t){return 0==t[0]&&0==t[1]&&1==t[4]&&1==t[5];},t.solvePoints=function(e,n,i,r,a,o,s,l){l=l||[];var u=0,h=0;h=e.length;var c;for(u=0;u<h;u+=2){c=t.solve2(e[u],e[u+1],n,i,r,a,o,s),l.push(c[0],c[1]);}
return l;},t.transPoints=function(e,n,i,r,a,o,s,l){l=l||[];var u=0,h=0;h=e.length;for(u=0;u<h;u+=2){t.transPoint(e[u],e[u+1],n,i,r,a,o,s,l);}
return l;},t.transPoint=function(t,e,n,i,r,a,o,s,l){var u=NaN,h=NaN;return u=n+r*t+o*e,h=i+a*t+s*e,(l=l||[]).push(u,h),l;},t.solve2=function(e,n,i,r,a,o,s,l,u,h){void 0===u&&(u=!1),h=h||[];var c=NaN,_=NaN;if(0==a)return t.solve2(e,n,i,r,s,l,a,o,!0,h);var f=NaN,d=NaN;return f=e-i,d=n-r,_=(d-f*o/a)/(l-s*o/a),c=(f-_*s)/a,u?h.push(_,c):h.push(c,_),h;},t.solve=function(e,n,i,r){return t.solve2(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y);},t._bestTriangle=[],t._absArr=[],t;}(),H=function(){function t(t,e){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=t,this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.bones=[];for(var n=this.data.bones,i=0,r=n.length;i<r;i++){this.bones.push(e[n[i]]);}}
r(t,"laya.ani.bone.PathConstraint");var e=t.prototype;return e.apply=function(t,e){if(this.target){var n=this.translateMix,i=this.translateMix,r=i>0,a=this.data.spacingMode,o="length"==a,s=this.data.rotateMode,l="tangent"==s,u="chainScale"==s,h=[],c=this.bones.length,_=l?c:c+1,f=[];this._spaces=f,f[0]=this.position;var d=this.spacing;if(u||o)for(var p=0,m=_-1;p<m;){var g=this.bones[p],y=g.length,v=y*g.resultMatrix.a,I=y*g.resultMatrix.b;y=Math.sqrt(v*v+I*I),u&&(h[p]=y),f[++p]=o?Math.max(0,y+d):d;}else for(p=1;p<_;p++){f[p]=d;}
var x=this.computeWorldPositions(this.target,t,e,_,l,"percent"==this.data.positionMode,"percent"==a);if(this._debugKey){for(p=0;p<x.length;p++){e.drawCircle(x[p++],x[p++],5,"#00ff00");}
var T=[];for(p=0;p<x.length;p++){T.push(x[p++],x[p++]);}
e.drawLines(0,0,T,"#ff0000");}
var S=x[0],b=x[1],w=this.data.offsetRotation,D="chain"==s&&0==w,C=NaN;for(p=0,C=3;p<c;p++,C+=3){(g=this.bones[p]).resultMatrix.tx+=(S-g.resultMatrix.tx)*n,g.resultMatrix.ty+=(b-g.resultMatrix.ty)*n;var E=(v=x[C])-S,P=(I=x[C+1])-b;if(u&&0!=(y=h[p])){var M=(Math.sqrt(E*E+P*P)/y-1)*i+1;g.resultMatrix.a*=M,g.resultMatrix.c*=M;}
if(S=v,b=I,r){var A=g.resultMatrix.a,O=g.resultMatrix.c,R=g.resultMatrix.b,L=g.resultMatrix.d,F=NaN,V=NaN,N=NaN;F=l?x[C-1]:0==f[p+1]?x[C+2]:Math.atan2(P,E),F-=Math.atan2(R,A)-w/180*Math.PI,D&&(V=Math.cos(F),N=Math.sin(F),S+=((y=g.length)*(V*A-N*R)-E)*i,b+=(y*(N*A+V*R)-P)*i),F>Math.PI?F-=2*Math.PI:F<-Math.PI&&(F+=2*Math.PI),F*=i,V=Math.cos(F),N=Math.sin(F),g.resultMatrix.a=V*A-N*R,g.resultMatrix.c=V*O-N*L,g.resultMatrix.b=N*A+V*R,g.resultMatrix.d=N*O+V*L;}}}},e.computeWorldVertices2=function(e,n,i,r,a,o){var s,l,u=e.currDisplayData.bones,h=e.currDisplayData.weights,c=e.currDisplayData.triangles,_=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0,I=0,x=0,T=0;if(null!=u){for(_=0;_<i;_+=2){f+=(p=u[f])+1,d+=p;}
var S=n;for(m=o,g=3*d;m<r;m+=2){for(y=0,v=0,p=u[f++],p+=f;f<p;f++,g+=3){s=S[u[f]].resultMatrix,I=h[g],x=h[g+1];var b=h[g+2];y+=(I*s.a+x*s.c+s.tx)*b,v+=(I*s.b+x*s.d+s.ty)*b;}
a[m]=y,a[m+1]=v;}}else{c||(c=h),e.deformData&&(c=e.deformData);var w;if(w=e.parent,n)for(T=n.length,_=0;_<T;_++){if(n[_].name==w){l=n[_];break;}}
var D;l&&(D=l.resultMatrix),D||(D=t._tempMt);var C=D.tx,E=D.ty,P=D.a,M=D.b,A=D.c,O=D.d;for(l&&(O*=l.d),f=i,m=o;m<r;f+=2,m+=2){I=c[f],x=c[f+1],a[m]=I*P+x*M+C,a[m+1]=-(I*A+x*O+E);}}},e.computeWorldPositions=function(t,e,n,i,r,a,o){t.currDisplayData.bones,t.currDisplayData.weights,t.currDisplayData.triangles;var s=[],l=0,u=t.currDisplayData.verLen,h=this.position,c=this._spaces,_=[],f=[],d=u/6,p=-1,m=NaN,g=0,y=0,v=NaN,I=NaN,x=NaN,T=NaN;if(d--,u-=4,this.computeWorldVertices2(t,e,2,u,s,0),this._debugKey)for(l=0;l<s.length;){n.drawCircle(s[l++],s[l++],10,"#ff0000");}
_=s,this._curves.length=d;var S=this._curves;m=0;var b=_[0],w=_[1],D=0,C=0,E=0,P=0,M=0,A=0,O=NaN,R=NaN,L=NaN,F=NaN,V=NaN,N=NaN,U=NaN,G=NaN,B=0;for(l=0,B=2;l<d;l++,B+=6){D=_[B],C=_[B+1],E=_[B+2],P=_[B+3],V=2*(O=.1875*(b-2*D+E))+(L=.09375*(3*(D-E)-b+(M=_[B+4]))),N=2*(R=.1875*(w-2*C+P))+(F=.09375*(3*(C-P)-w+(A=_[B+5]))),U=.75*(D-b)+O+.16666667*L,G=.75*(C-w)+R+.16666667*F,m+=Math.sqrt(U*U+G*G),U+=V,G+=N,V+=L,N+=F,m+=Math.sqrt(U*U+G*G),U+=V,G+=N,m+=Math.sqrt(U*U+G*G),U+=V+L,G+=N+F,m+=Math.sqrt(U*U+G*G),S[l]=m,b=M,w=A;}
if(a&&(h*=m),o)for(l=0;l<i;l++){c[l]*=m;}
var k=this._segments,H=0,z=0;for(l=0,g=0,y=0,z=0;l<i;l++,g+=3){if(I=c[l],h+=I,(v=h)<0)this.addBeforePosition(v,_,0,f,g);else if(v>m)this.addAfterPosition(v-m,_,u-4,f,g);else{for(;;y++){if(T=S[y],!(v>T)){0==y?v/=T:v=(v-(x=S[y-1]))/(T-x);break;}}
if(y!=p){p=y;var j=6*y;for(b=_[j],w=_[j+1],D=_[j+2],C=_[j+3],E=_[j+4],P=_[j+5],V=2*(O=.03*(b-2*D+E))+(L=.006*(3*(D-E)-b+(M=_[j+6]))),N=2*(R=.03*(w-2*C+P))+(F=.006*(3*(C-P)-w+(A=_[j+7]))),U=.3*(D-b)+O+.16666667*L,G=.3*(C-w)+R+.16666667*F,H=Math.sqrt(U*U+G*G),k[0]=H,j=1;j<8;j++){U+=V,G+=N,V+=L,N+=F,H+=Math.sqrt(U*U+G*G),k[j]=H;}
U+=V,G+=N,H+=Math.sqrt(U*U+G*G),k[8]=H,U+=V+L,G+=N+F,H+=Math.sqrt(U*U+G*G),k[9]=H,z=0;}
for(v*=H;;z++){if(T=k[z],!(v>T)){0==z?v/=T:v=z+(v-(x=k[z-1]))/(T-x);break;}}
this.addCurvePosition(.1*v,b,w,D,C,E,P,M,A,f,g,r||l>0&&0==I);}}
return f;},e.addBeforePosition=function(t,e,n,i,r){var a=e[n],o=e[n+1],s=e[n+2]-a,l=e[n+3]-o,u=Math.atan2(l,s);i[r]=a+t*Math.cos(u),i[r+1]=o+t*Math.sin(u),i[r+2]=u;},e.addAfterPosition=function(t,e,n,i,r){var a=e[n+2],o=e[n+3],s=a-e[n],l=o-e[n+1],u=Math.atan2(l,s);i[r]=a+t*Math.cos(u),i[r+1]=o+t*Math.sin(u),i[r+2]=u;},e.addCurvePosition=function(t,e,n,i,r,a,o,s,l,u,h,c){0==t&&(t=1e-4);var _=t*t,f=_*t,d=1-t,p=d*d,m=p*d,g=d*t,y=3*g,v=d*y,I=y*t,x=e*m+i*v+a*I+s*f,T=n*m+r*v+o*I+l*f;u[h]=x,u[h+1]=T,u[h+2]=c?Math.atan2(T-(n*p+r*g*2+o*_),x-(e*p+i*g*2+a*_)):0;},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,i(t,["_tempMt",function(){return this._tempMt=new m();}]),t;}(),z=function(){function t(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[];}
return r(t,"laya.ani.bone.PathConstraintData"),t;}(),j=function(){function t(){this.name=null,this.slotArr=[];}
return r(t,"laya.ani.bone.SkinData"),t;}(),W=function(){function t(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0;}
r(t,"laya.ani.bone.SkinSlotDisplayData");var e=t.prototype;return e.createTexture=function(t){return this.texture?this.texture:(this.texture=new S(t.bitmap,this.uvs),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=t.height,this.texture.height=t.width,this.texture.offsetX=-t.offsetX,this.texture.offsetY=-t.offsetY,this.texture.sourceWidth=t.sourceHeight,this.texture.sourceHeight=t.sourceWidth):(this.texture.width=t.width,this.texture.height=t.height,this.texture.offsetX=-t.offsetX,this.texture.offsetY=-t.offsetY,this.texture.sourceWidth=t.sourceWidth,this.texture.sourceHeight=t.sourceHeight),y.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY),this.texture);},e.destory=function(){this.texture&&this.texture.destroy();},t;}(),K=function(){function t(){this.name=null,this.displayArr=[];}
r(t,"laya.ani.bone.SlotData");return t.prototype.getDisplayByName=function(t){for(var e=0,n=this.displayArr.length;e<n;e++){if(this.displayArr[e].attachmentName==t)return e;}
return-1;},t;}(),X=function(){function t(t,e){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=o(2,0),this._data=t,null==this._bones&&(this._bones=[]),this.target=e[t.targetIndex];var n=0,i=0;for(n=0,i=t.boneIndexs.length;n<i;n++){this._bones.push(e[t.boneIndexs[n]]);}
this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix;}
r(t,"laya.ani.bone.TfConstraint");return t.prototype.apply=function(){for(var t,e=this.target.resultMatrix.a,n=this.target.resultMatrix.b,i=this.target.resultMatrix.c,r=this.target.resultMatrix.d,a=0,o=this._bones.length;a<o;a++){if(t=this._bones[a],this.rotateMix>0){var s=t.resultMatrix.a,l=t.resultMatrix.b,u=t.resultMatrix.c,h=t.resultMatrix.d,c=Math.atan2(i,e)-Math.atan2(u,s)+this._data.offsetRotation*Math.PI/180;c>Math.PI?c-=2*Math.PI:c<-Math.PI&&(c+=2*Math.PI),c*=this.rotateMix;var _=Math.cos(c),f=Math.sin(c);t.resultMatrix.a=_*s-f*u,t.resultMatrix.b=_*l-f*h,t.resultMatrix.c=f*s+_*u,t.resultMatrix.d=f*l+_*h;}
if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),t.resultMatrix.tx+=(this._temp[0]-t.resultMatrix.tx)*this.translateMix,t.resultMatrix.ty+=(this._temp[1]-t.resultMatrix.ty)*this.translateMix,t.updateChild()),this.scaleMix>0){var d=Math.sqrt(t.resultMatrix.a*t.resultMatrix.a+t.resultMatrix.c*t.resultMatrix.c),p=Math.sqrt(e*e+i*i),m=d>1e-5?(d+(p-d+this._data.offsetScaleX)*this.scaleMix)/d:0;t.resultMatrix.a*=m,t.resultMatrix.c*=m,d=Math.sqrt(t.resultMatrix.b*t.resultMatrix.b+t.resultMatrix.d*t.resultMatrix.d),p=Math.sqrt(n*n+r*r),m=d>1e-5?(d+(p-d+this._data.offsetScaleY)*this.scaleMix)/d:0,t.resultMatrix.b*=m,t.resultMatrix.d*=m;}
if(this.shearMix>0){l=t.resultMatrix.b,h=t.resultMatrix.d;var g=Math.atan2(h,l);(c=Math.atan2(r,n)-Math.atan2(i,e)-(g-Math.atan2(t.resultMatrix.c,t.resultMatrix.a)))>Math.PI?c-=2*Math.PI:c<-Math.PI&&(c+=2*Math.PI),c=g+(c+this._data.offsetShearY*Math.PI/180)*this.shearMix,m=Math.sqrt(l*l+h*h),t.resultMatrix.b=Math.cos(c)*m,t.resultMatrix.d=Math.sin(c)*m;}}},t;}(),Y=function(){function t(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[];}
return r(t,"laya.ani.bone.TfConstraintData"),t;}(),q=function(){function t(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null;}
r(t,"laya.ani.bone.Transform");var e=t.prototype;return e.initData=function(t){void 0!=t.x&&(this.x=t.x),void 0!=t.y&&(this.y=t.y),void 0!=t.skX&&(this.skX=t.skX),void 0!=t.skY&&(this.skY=t.skY),void 0!=t.scX&&(this.scX=t.scX),void 0!=t.scY&&(this.scY=t.scY);},e.getMatrix=function(){var t;return(t=this.mMatrix?this.mMatrix:this.mMatrix=new m()).identity(),t.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(t,this.skewX*Math.PI/180,this.skewY*Math.PI/180),t.rotate(this.skX*Math.PI/180),t.translate(this.x,this.y),t;},e.skew=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),a=Math.sin(e),o=Math.cos(e);return t.setTo(t.a*o-t.b*i,t.a*a+t.b*r,t.c*o-t.d*i,t.c*a+t.d*r,t.tx*o-t.ty*i,t.tx*a+t.ty*r),t;},t;}(),Z=function(){function t(){}
return r(t,"laya.ani.bone.UVTools"),t.getRelativeUV=function(t,e,n){var i=t[0],r=t[2]-t[0],a=t[1],o=t[5]-t[1];n||(n=[]),n.length=e.length;var s=0,l=0;l=n.length;var u=1/r,h=1/o;for(s=0;s<l;s+=2){n[s]=(e[s]-i)*u,n[s+1]=(e[s+1]-a)*h;}
return n;},t.getAbsoluteUV=function(t,e,n){if(0==t[0]&&0==t[1]&&1==t[4]&&1==t[5])return n?(w.copyArray(n,e),n):e;var i=t[0],r=t[2]-t[0],a=t[1],o=t[5]-t[1];n||(n=[]),n.length=e.length;var s=0,l=0;for(l=n.length,s=0;s<l;s+=2){n[s]=e[s]*r+i,n[s+1]=e[s+1]*o+a;}
return n;},t;}(),J=function(){function t(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null;}
return r(t,"laya.ani.KeyFramesContent"),t;}(),$=function(){function t(){}
return r(t,"laya.ani.math.BezierLerp"),t.getBezierRate=function(e,n,i,r,a){var o=t._getBezierParamKey(n,i,r,a),s=100*o+e;if(t._bezierResultCache[s])return t._bezierResultCache[s];var l=t._getBezierPoints(n,i,r,a,o),u=0,h=0;for(h=l.length,u=0;u<h;u+=2){if(e<=l[u])return t._bezierResultCache[s]=l[u+1],l[u+1];}
return t._bezierResultCache[s]=1,1;},t._getBezierParamKey=function(t,e,n,i){return 100*(100*(100*(100*t+e)+n)+i);},t._getBezierPoints=function(e,n,i,r,a){if(t._bezierPointsCache[a])return t._bezierPointsCache[a];var o;o=[0,0,e,n,i,r,1,1];var l;return l=new s().getBezierPoints(o,100,3),t._bezierPointsCache[a]=l,l;},t._bezierResultCache={},t._bezierPointsCache={},t;}(),Q=function(t){function e(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,e.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1;}
r(e,"laya.ani.AnimationPlayer",h);var i=e.prototype;return n.imps(i,{"laya.resource.IDestroy":!0}),i._onTempletLoadedComputeFullKeyframeIndices=function(t,e,n){this._templet===n&&this._cachePlayRate===t&&this._cacheFrameRate===e&&this._computeFullKeyframeIndices();},i._computeFullKeyframeIndices=function(){for(var t=this._fullFrames=[],e=this._templet,n=this._cacheFrameRateInterval*this._cachePlayRate,i=0,r=e.getAnimationCount();i<r;i++){for(var a=[],o=0,s=e.getAnimation(i).nodes.length;o<s;o++){for(var l=e.getAnimation(i).nodes[o],u=Math.floor(l.playTime/n+.01),h=new Uint16Array(u+1),c=-1,_=0,f=l.keyFrame.length;_<f;_++){var d=l.keyFrame[_],p=d.startTime,m=p+d.duration+n;do{for(var g=Math.floor(p/n+.5),y=c+1;y<g;y++){h[y]=_;}
c=g,h[g]=_,p+=n;}while(p<=m);}
a.push(h);}
t.push(a);}},i._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration();},i._calculatePlayDuration=function(){if(0!==this.state){var t=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=t),this._playEnd>t&&(this._playEnd=t),this._playDuration=this._playEnd-this._playStart;}},i._setPlayParams=function(t,e){this._currentTime=t,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/e+.01),0),this._currentFrameTime=this._currentKeyframeIndex*e;},i._setPlayParamsWhenStop=function(t,e){this._currentTime=t,this._currentKeyframeIndex=Math.max(Math.floor(t/e+.01),0),this._currentFrameTime=this._currentKeyframeIndex*e,this._currentAnimationClipIndex=-1;},i._update=function(t){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var e=this._cacheFrameRateInterval*this._cachePlayRate,n=0;this._startUpdateLoopCount!==T.loopCount&&(n=t*this.playbackRate,this._elapsedPlaybackTime+=n);var i=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=i)return this._setPlayParamsWhenStop(i,e),void this.event("stopped");if(n+=this._currentTime,i>0){if(n>=i)do{if(n-=i,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(i,e),this._stopWhenCircleFinish=!1,void this.event("stopped");n<i&&(this._setPlayParams(n,e),this.event("complete"));}while(n>=i);else this._setPlayParams(n,e);}else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(i,e),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete");}}},i._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0;},i.play=function(t,e,n,i,r){if(void 0===t&&(t=0),void 0===e&&(e=1),void 0===n&&(n=2147483647),void 0===i&&(i=0),void 0===r&&(r=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(n<0||i<0||r<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==r&&i>r)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=e,this._overallDuration=n,this._playStart=i,this._playEnd=r,this._paused=!1,this._currentAnimationClipIndex=t,this._currentKeyframeIndex=0,this._startUpdateLoopCount=T.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0);},i.playByFrame=function(t,e,n,i,r,a){void 0===t&&(t=0),void 0===e&&(e=1),void 0===n&&(n=2147483647),void 0===i&&(i=0),void 0===r&&(r=0),void 0===a&&(a=30);var o=1e3/a;this.play(t,e,n,i*o,r*o);},i.stop=function(t){void 0===t&&(t=!0),t?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0;},a(0,i,"playEnd",function(){return this._playEnd;}),a(0,i,"templet",function(){return this._templet;},function(t){0===!this.state&&this.stop(!0),this._templet!==t&&(this._templet=t,t.loaded?this._computeFullKeyframeIndices():t.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]));}),a(0,i,"playStart",function(){return this._playStart;}),a(0,i,"playDuration",function(){return this._playDuration;}),a(0,i,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2;}),a(0,i,"currentKeyframeIndex",function(){return this._currentKeyframeIndex;}),a(0,i,"overallDuration",function(){return this._overallDuration;}),a(0,i,"currentFrameTime",function(){return this._currentFrameTime;}),a(0,i,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex;}),a(0,i,"currentPlayTime",function(){return this._currentTime+this._playStart;}),a(0,i,"cachePlayRate",function(){return this._cachePlayRate;},function(t){this._cachePlayRate!==t&&(this._cachePlayRate=t,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[t,this._cacheFrameRate])));}),a(0,i,"cacheFrameRate",function(){return this._cacheFrameRate;},function(t){this._cacheFrameRate!==t&&(this._cacheFrameRate=t,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,t])));}),a(0,i,"currentTime",null,function(t){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(t<this._playStart||t>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=T.loopCount;var e=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=t,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/e),0),this._currentFrameTime=this._currentKeyframeIndex*e;}}),a(0,i,"paused",function(){return this._paused;},function(t){this._paused=t,t&&this.event("paused");}),a(0,i,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval;}),a(0,i,"destroyed",function(){return this._destroyed;}),e;}(),tt=function(t){function e(){e.__super.call(this),y.isConchNode&&(this.drawSkin=function(t){t.transform||(t.transform=m.EMPTY),this._addCmd([t]),this.setSkinMesh&&this.setSkinMesh(t._ps,t.mVBData,t.mEleNum,0,t.mTexture,t.transform);});}
r(e,"laya.ani.GraphicsAni",c);return e.prototype.drawSkin=function(t){var e=[t];this._saveToCmd(y._context._drawSkin,e);},e.create=function(){return e._caches.pop()||new e();},e.recycle=function(t){t.clear(),e._caches.push(t);},e._caches=[],e;}(),et=function(t){function e(){e.__super.call(this),this.mesh=new R();}
r(e,"laya.ani.bone.canvasmesh.SkinMeshCanvas",O);var n=e.prototype;return n.init2=function(t,e,n,i,r){this.transform&&(this.transform=null);var a;n?a=n:(a=[]).push(0,1,3,3,1,2),this.mesh.texture=t,this.mesh.indexes=a,this.mesh.vertices=i,this.mesh.uvs=r;},n.render=function(t,n,i){this.mesh.texture&&(this.transform?(this.transform.translate(n,i),this.renderToContext(t),this.transform.translate(-n,-i)):(this.transform=e._tempMatrix,this.transform.identity(),this.transform.translate(n,i),this.renderToContext(t),this.transform.translate(-n,-i),this.transform=null));},i(e,["_tempMatrix",function(){return this._tempMatrix=new m();}]),e;}(),nt=function(t){function e(){this._aniMap={},this.unfixedLastAniIndex=-1,e.__super.call(this),this._anis=new Array();}
r(e,"laya.ani.AnimationTemplet",v);var i=e.prototype;return i.parse=function(t){var e=new u(t);this._aniVersion=e.readUTFString(),E.parse(this,e);},i._calculateKeyFrame=function(t,e,n){var i=t.keyFrame;i[e]=i[0];for(var r=0;r<e;r++){var a=i[r];a.nextData=0===a.duration?a.data:i[r+1].data;}
i.length--;},i.onAsynLoaded=function(t,e,n){var i=new u(e);switch(this._aniVersion=i.readUTFString(),this._aniVersion){case "LAYAANIMATION:02":P.parse(this,i);break;default:E.parse(this,i);}
this._endLoaded();},i.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null;},i.getAnimationCount=function(){return this._anis.length;},i.getAnimation=function(t){return this._anis[t];},i.getAniDuration=function(t){return this._anis[t].playTime;},i.getNodes=function(t){return this._anis[t].nodes;},i.getNodeIndexWithName=function(t,e){return this._anis[t].bone3DMap[e];},i.getNodeCount=function(t){return this._anis[t].nodes.length;},i.getTotalkeyframesLength=function(t){return this._anis[t].totalKeyframeDatasLength;},i.getPublicExtData=function(){return this._publicExtData;},i.getAnimationDataWithCache=function(t,e,n,i){var r=e[n];if(r){var a=r[t];return a?a[i]:null;}
return null;},i.setAnimationDataWithCache=function(t,e,n,i,r){var a=e[n]||(e[n]={});(a[t]||(a[t]=[]))[i]=r;},i.getOriginalData=function(t,n,i,r,a){for(var o=this._anis[t].nodes,s=0,l=0,u=o.length,h=0;l<u;l++){var c,_=o[l];c=_.keyFrame[i[l][r]],_.dataOffset=h;var f=a-c.startTime,d=_.lerpType;if(d)switch(d){case 0:case 1:for(s=0;s<_.keyframeWidth;){s+=_.interpolationMethod[s](_,s,n,h+s,c.data,f,null,c.duration,c.nextData);}
break;case 2:var p=c.interpolationData,m=p.length,g=0;for(s=0;s<m;){var y=p[s];switch(y){case 6:case 7:s+=e.interpolation[y](_,g,n,h+g,c.data,f,null,c.duration,c.nextData,p,s+1);break;default:s+=e.interpolation[y](_,g,n,h+g,c.data,f,null,c.duration,c.nextData);}
g++;}}else for(s=0;s<_.keyframeWidth;){s+=_.interpolationMethod[s](_,s,n,h+s,c.data,f,null,c.duration,c.nextData);}
h+=_.keyframeWidth;}},i.getNodesCurrentFrameIndex=function(t,e){var n=this._anis[t].nodes;t!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(n.length),this.unfixedCurrentTimes=new Float32Array(n.length),this.unfixedLastAniIndex=t);for(var i=0,r=n.length;i<r;i++){var a=n[i];for(e<this.unfixedCurrentTimes[i]&&(this.unfixedCurrentFrameIndexes[i]=0),this.unfixedCurrentTimes[i]=e;this.unfixedCurrentFrameIndexes[i]<a.keyFrame.length&&!(a.keyFrame[this.unfixedCurrentFrameIndexes[i]].startTime>this.unfixedCurrentTimes[i]);){this.unfixedCurrentFrameIndexes[i]++;}
this.unfixedCurrentFrameIndexes[i]--;}
return this.unfixedCurrentFrameIndexes;},i.getOriginalDataUnfixedRate=function(t,n,i){var r=this._anis[t].nodes;t!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(r.length),this.unfixedCurrentTimes=new Float32Array(r.length),this.unfixedKeyframes=o(r.length),this.unfixedLastAniIndex=t);for(var a=0,s=0,l=r.length,u=0;s<l;s++){var h=r[s];for(i<this.unfixedCurrentTimes[s]&&(this.unfixedCurrentFrameIndexes[s]=0),this.unfixedCurrentTimes[s]=i;this.unfixedCurrentFrameIndexes[s]<h.keyFrame.length&&!(h.keyFrame[this.unfixedCurrentFrameIndexes[s]].startTime>this.unfixedCurrentTimes[s]);){this.unfixedKeyframes[s]=h.keyFrame[this.unfixedCurrentFrameIndexes[s]],this.unfixedCurrentFrameIndexes[s]++;}
var c=this.unfixedKeyframes[s];h.dataOffset=u;var _=i-c.startTime;if(h.lerpType)switch(h.lerpType){case 0:case 1:for(a=0;a<h.keyframeWidth;){a+=h.interpolationMethod[a](h,a,n,u+a,c.data,_,null,c.duration,c.nextData);}
break;case 2:var f=c.interpolationData,d=f.length,p=0;for(a=0;a<d;){var m=f[a];switch(m){case 6:case 7:a+=e.interpolation[m](h,p,n,u+p,c.data,_,null,c.duration,c.nextData,f,a+1);break;default:a+=e.interpolation[m](h,p,n,u+p,c.data,_,null,c.duration,c.nextData);}
p++;}}else for(a=0;a<h.keyframeWidth;){a+=h.interpolationMethod[a](h,a,n,u+a,c.data,_,null,c.duration,c.nextData);}
u+=h.keyframeWidth;}},e._LinearInterpolation_0=function(t,e,n,i,r,a,o,s,l,u){var h=0===s?0:a/s;return n[i]=(1-h)*r[e]+h*l[e],1;},e._QuaternionInterpolation_1=function(t,e,n,i,r,a,o,s,l,u){var h=0===s?0:a/s;return p.slerpQuaternionArray(r,e,l,e,h,n,i),4;},e._AngleInterpolation_2=function(t,e,n,i,r,a,o,s,l,u){return 0;},e._RadiansInterpolation_3=function(t,e,n,i,r,a,o,s,l,u){return 0;},e._Matrix4x4Interpolation_4=function(t,e,n,i,r,a,o,s,l,u){for(var h=0;h<16;h++,e++){n[i+h]=r[e]+a*o[e];}
return 16;},e._NoInterpolation_5=function(t,e,n,i,r,a,o,s,l,u){return n[i]=r[e],1;},e._BezierInterpolation_6=function(t,e,n,i,r,a,o,s,l,u,h){return void 0===h&&(h=0),n[i]=r[e]+(l[e]-r[e])*$.getBezierRate(a/s,u[h],u[h+1],u[h+2],u[h+3]),5;},e._BezierInterpolation_7=function(t,e,n,i,r,a,o,s,l,u,h){return void 0===h&&(h=0),n[i]=u[h+4]+u[h+5]*$.getBezierRate((.001*a+u[h+6])/u[h+7],u[h],u[h+1],u[h+2],u[h+3]),9;},e.load=function(t){return n.loader.create(t,null,null,e);},e.interpolation=[e._LinearInterpolation_0,e._QuaternionInterpolation_1,e._AngleInterpolation_2,e._RadiansInterpolation_3,e._Matrix4x4Interpolation_4,e._NoInterpolation_5,e._BezierInterpolation_6,e._BezierInterpolation_7],e;}(),it=(function(t){function e(){this.isCached=!1,this.canvas=null,this.tex=null,this.rec=null,e.__super.call(this);}
r(e,"laya.ani.bone.canvasmesh.CacheAbleSkinMesh",et);var n=e.prototype;n.getCanvasPic=function(){var t=new _("2D"),n=t.getContext("2d");this.rec=this.mesh.getBounds(),t.size(this.rec.width,this.rec.height);var i;return i=this.transform,this.transform=e.tempMt,this.transform.identity(),this.transform.translate(-this.rec.x,-this.rec.y),this.renderToContext(n),this.transform.translate(+this.rec.x,+this.rec.y),this.transform=i,new S(t);},n.render=function(t,e,n){this.mesh.texture&&(this.isCached||(this.isCached=!0,this.tex=this.getCanvasPic()),this.transform?(this.transform.translate(e,n),this._renderTextureToContext(t),this.transform.translate(-e,-n)):(this.transform=et._tempMatrix,this.transform.identity(),this.transform.translate(e,n),this._renderTextureToContext(t),this.transform.translate(-e,-n),this.transform=null));},n._renderTextureToContext=function(t){this.context=t.ctx||t,t.save();var e;if(e=this.tex,this.transform){var n=this.transform;t.transform(n.a,n.b,n.c,n.d,n.tx,n.ty);}
this.rec=this.mesh.getBounds(),t.translate(this.rec.x,this.rec.y),t.drawTexture(e,0,0,e.width,e.height,0,0),t.restore();},i(e,["tempMt",function(){return this.tempMt=new m();}]);}(),function(t){function e(){this.cacheOK=!1,this.cacheCmdOK=!1,this.transformCmds=[],this.drawCmds=[],e.__super.call(this),this.tempMesh=new R();}
r(e,"laya.ani.bone.canvasmesh.SimpleSkinMeshCanvas",t);var n=e.prototype;return n.init2=function(e,n,i,r,a){t.prototype.init2.call(this,e,n,i,r,a),this.cacheOK=!1,this.cacheCmdOK=!1,this.transformCmds.length=6,this.drawCmds.length=9;},n.renderToContext=function(t){if(this.context=t.ctx||t,this.mesh){if(this.mesh.uvs.length<=8)return void(0==this.mode?this._renderWithIndexes(this.mesh):this._renderNoIndexes(this.mesh));this.cacheOK||(this.tempMesh.texture=this.mesh.texture,this.tempMesh.uvs=this.mesh.texture.uv,this.tempMesh.vertices=k.solveMesh(this.mesh,this.tempMesh.vertices),this.cacheOK=!0),0==this.mode?this._renderWithIndexes(this.tempMesh):this._renderNoIndexes(this.tempMesh);}},n._renderWithIndexes=function(t){if(this.cacheCmdOK)this.renderByCache(t);else{var e=t.indexes,n=0,i=e.length;for(i>1&&(i=1),n=0;n<i;n+=3){var r=2*e[n],a=2*e[n+1],o=2*e[n+2];this._renderDrawTriangle(t,r,a,o);}
this.cacheCmdOK=!0;}},n._renderDrawTriangle=function(t,e,n,i){var r=this.context,a=t.uvs,o=t.vertices,s=t.texture,l=s.bitmap,u=l.source,h=s.width,c=s.height,_=l.width,f=l.height,d=NaN,p=NaN,m=NaN,g=NaN,y=NaN,v=NaN;if(t.useUvTransform){var I=t.uvTransform;d=(a[e]*I.a+a[e+1]*I.c+I.tx)*_,p=(a[n]*I.a+a[n+1]*I.c+I.tx)*_,m=(a[i]*I.a+a[i+1]*I.c+I.tx)*_,g=(a[e]*I.b+a[e+1]*I.d+I.ty)*f,y=(a[n]*I.b+a[n+1]*I.d+I.ty)*f,v=(a[i]*I.b+a[i+1]*I.d+I.ty)*f;}else d=a[e]*_,p=a[n]*_,m=a[i]*_,g=a[e+1]*f,y=a[n+1]*f,v=a[i+1]*f;var x=o[e],T=o[n],S=o[i],b=o[e+1],w=o[n+1],D=o[i+1],C=1/(d*y+g*m+p*v-y*m-g*p-d*v),E=x*y+g*S+T*v-y*S-g*T-x*v,P=d*T+x*m+p*S-T*m-x*p-d*S,M=d*y*S+g*T*m+x*p*v-x*y*m-g*p*S-d*T*v,A=b*y+g*D+w*v-y*D-g*w-b*v,O=d*w+b*m+p*D-w*m-b*p-d*D,R=d*y*D+g*w*m+b*p*v-b*y*m-g*p*D-d*w*v;if(this.transformCmds[0]=E*C,this.transformCmds[1]=A*C,this.transformCmds[2]=P*C,this.transformCmds[3]=O*C,this.transformCmds[4]=M*C,this.transformCmds[5]=R*C,this.drawCmds[0]=u,this.drawCmds[1]=s.uv[0]*_,this.drawCmds[2]=s.uv[1]*f,this.drawCmds[3]=h,this.drawCmds[4]=c,this.drawCmds[5]=s.uv[0]*_,this.drawCmds[6]=s.uv[1]*f,this.drawCmds[7]=h,this.drawCmds[8]=c,r.save(),this.transform){var L=this.transform;r.transform(L.a,L.b,L.c,L.d,L.tx,L.ty);}
r.transform.apply(r,this.transformCmds),r.drawImage.apply(r,this.drawCmds),r.restore();},n.renderByCache=function(t){var e=this.context;if(e.save(),this.transform){var n=this.transform;e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty);}
e.transform.apply(e,this.transformCmds),e.drawImage.apply(e,this.drawCmds),e.restore();},e;}(et)),rt=function(t){function e(t,n){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,e.__super.call(this),void 0===n&&(n=0),t&&this.init(t,n);}
r(e,"laya.ani.bone.Skeleton",t);var i=e.prototype;return i.init=function(t,e){void 0===e&&(e=0);var n=0,i=0;if(1==e)for(this._graphicsCache=[],n=0,i=t.getAnimationCount();n<i;n++){this._graphicsCache.push([]);}
if(this._yReverseMatrix=t.yReverseMatrix,this._aniMode=e,this._templet=t,this._player=new Q(),this._player.cacheFrameRate=t.rate,this._player.templet=t,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=t.mBoneArr,this._rootBone=t.mRootBone,this._aniSectionDic=t.aniSectionDic,t.ikArr.length>0)for(this._ikArr=[],n=0,i=t.ikArr.length;n<i;n++){this._ikArr.push(new G(t.ikArr[n],this._boneList));}
if(t.pathArr.length>0){var r,a;null==this._pathDic&&(this._pathDic={});var o;for(n=0,i=t.pathArr.length;n<i;n++){r=t.pathArr[n],a=new H(r,this._boneList),(o=this._boneSlotDic[r.name])&&((a=new H(r,this._boneList)).target=o),this._pathDic[r.name]=a;}}
if(t.tfArr.length>0)for(this._tfArr=[],n=0,i=t.tfArr.length;n<i;n++){this._tfArr.push(new X(t.tfArr[n],this._boneList));}
if(t.skinDataArray.length>0){var s=this._templet.skinDataArray[this._skinIndex];this._skinName=s.name;}
this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause);},i.load=function(t,e,i){void 0===i&&(i=0),this._aniPath=t,this._complete=e,this._loadAniMode=i,n.loader.load([{url:t,type:"arraybuffer"}],f.create(this,this._onLoaded));},i._onLoaded=function(){var t=d.getRes(this._aniPath);if(null!=t){null==at.TEMPLET_DICTIONARY&&(at.TEMPLET_DICTIONARY={});var e;(e=at.TEMPLET_DICTIONARY[this._aniPath])?e.isParseFail?this._parseFail():e.isParserComplete?this._parseComplete():(e.on("complete",this,this._parseComplete),e.on("error",this,this._parseFail)):((e=new at())._setUrl(this._aniPath),at.TEMPLET_DICTIONARY[this._aniPath]=e,e.on("complete",this,this._parseComplete),e.on("error",this,this._parseFail),e.isParserComplete=!1,e.parseData(null,t));}},i._parseComplete=function(){var t=at.TEMPLET_DICTIONARY[this._aniPath];t&&(this.init(t,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this);},i._parseFail=function(){console.log("[Error]:"+this._aniPath+"解析失败");},i._onPlay=function(){this.event("played");},i._onStop=function(){var t,e=this._templet.eventAniArr[this._aniClipIndex];if(e&&this._eventIndex<e.length)for(;this._eventIndex<e.length;this._eventIndex++){(t=e[this._eventIndex]).time>=this._player.playStart&&t.time<=this._player.playEnd&&this.event("label",t);}
this._eventIndex=0,this._drawOrder=null,this.event("stopped");},i._onPause=function(){this.event("paused");},i._parseSrcBoneMatrix=function(){var t=0,e=0;for(e=this._templet.srcBoneMatrixArr.length,t=0;t<e;t++){this._boneMatrixArray.push(new m());}
if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var n,i,r=this._templet.boneSlotArray;for(t=0,e=r.length;t<e;t++){n=r[t],null==(i=this._bindBoneBoneSlotDic[n.parent])&&(this._bindBoneBoneSlotDic[n.parent]=i=[]),this._boneSlotDic[n.name]=n=n.copy(),i.push(n),this._boneSlotArray.push(n);}}},i._emitMissedEvents=function(t,e,n){void 0===n&&(n=0);var i=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(i){var r,a=0,o=0;for(o=i.length,a=n;a<o;a++){(r=i[a]).time>=this._player.playStart&&r.time<=this._player.playEnd&&this.event("label",r);}}},i._update=function(t){if(void 0===t&&(t=!0),!(this._pause||t&&this._indexControl)){var e=this.timer.currTimer,n=this._player.currentKeyframeIndex,i=e-this._lastTime;if(t?this._player._update(i):n=-1,this._lastTime=e,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||i>0&&this._clipIndex==n&&this._lastUpdateAniClipIndex==this._aniClipIndex))){this._lastUpdateAniClipIndex=this._aniClipIndex,n>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var r,a=this._templet.eventAniArr[this._aniClipIndex];a&&this._eventIndex<a.length&&((r=a[this._eventIndex]).time>=this._player.playStart&&r.time<=this._player.playEnd?this._player.currentPlayTime>=r.time&&(this.event("label",r),this._eventIndex++):this._eventIndex++);var o;if(0==this._aniMode){if(o=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=o&&(this.graphics=o));var s=0,l=0;for(l=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,l-1)&&l>0;){l--;}
if(l<this._clipIndex)for(s=l;s<this._clipIndex;s++){this._createGraphics(s);}}else if(1==this._aniMode){if(o=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=o&&(this.graphics=o));for(l=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,l-1)&&l>0;){l--;}
if(l<this._clipIndex)for(s=l;s<this._clipIndex;s++){this._createGraphics(s);}}
this._createGraphics();}}},i._createGraphics=function(t){void 0===t&&(t=-1),-1==t&&(t=this._clipIndex);var e,n=t*this._player.cacheFrameRateInterval,i=this._templet.drawOrderAniArr[this._aniClipIndex];if(i&&i.length>0)for(this._drawOrderIndex=0,e=i[this._drawOrderIndex];n>=e.time&&(this._drawOrder=e.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=i.length));){e=i[this._drawOrderIndex];}
var r;0==this._aniMode||1==this._aniMode?this.graphics=tt.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=tt.create(),r=this.graphics;var a=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],t,n);var o,s,l,h,c=this._aniSectionDic[this._aniClipIndex],_=0,f=0,d=0,p=0,g=0,y=this._templet.srcBoneMatrixArr.length;for(f=0,g=c[0];f<y;f++){h=this._boneList[f],l=this._templet.srcBoneMatrixArr[f],h.resultTransform.scX=l.scX*this._curOriginalData[_++],h.resultTransform.skX=l.skX+this._curOriginalData[_++],h.resultTransform.skY=l.skY+this._curOriginalData[_++],h.resultTransform.scY=l.scY*this._curOriginalData[_++],h.resultTransform.x=l.x+this._curOriginalData[_++],h.resultTransform.y=l.y+this._curOriginalData[_++],8===this._templet.tMatrixDataLen&&(h.resultTransform.skewX=l.skewX+this._curOriginalData[_++],h.resultTransform.skewY=l.skewY+this._curOriginalData[_++]);}
var v,I={},x={};for(g+=c[1];f<g;f++){I[(v=a[f]).name]=this._curOriginalData[_++],x[v.name]=this._curOriginalData[_++],this._curOriginalData[_++],this._curOriginalData[_++],this._curOriginalData[_++],this._curOriginalData[_++];}
var T={},S={};for(g+=c[2];f<g;f++){T[(v=a[f]).name]=this._curOriginalData[_++],S[v.name]=this._curOriginalData[_++],this._curOriginalData[_++],this._curOriginalData[_++],this._curOriginalData[_++],this._curOriginalData[_++];}
if(this._pathDic){var b;for(g+=c[3];f<g;f++){if(v=a[f],b=this._pathDic[v.name]){switch(new u(v.extenData).getByte()){case 1:b.position=this._curOriginalData[_++];break;case 2:b.spacing=this._curOriginalData[_++];break;case 3:b.rotateMix=this._curOriginalData[_++],b.translateMix=this._curOriginalData[_++];}}}}
if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(m.TEMP.identity()),this._ikArr){var w;for(f=0,g=this._ikArr.length;f<g;f++){w=this._ikArr[f],T.hasOwnProperty(w.name)&&(w.bendDirection=T[w.name]),S.hasOwnProperty(w.name)&&(w.mix=S[w.name]),w.apply();}}
if(this._pathDic)for(var D in this._pathDic){(b=this._pathDic[D]).apply(this._boneList,r);}
if(this._tfArr){for(f=0,p=this._tfArr.length;f<p;f++){this._tfArr[f].apply();}}
for(f=0,p=this._boneList.length;f<p;f++){if(h=this._boneList[f],s=this._bindBoneBoneSlotDic[h.name],h.resultMatrix.copyTo(this._boneMatrixArray[f]),s)for(d=0,g=s.length;d<g;d++){(o=s[d])&&o.setParentMatrix(h.resultMatrix);}}
var C,E={},P=this._templet.deformAniArr;if(P&&P.length>0){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,f=0,g=this._boneSlotArray.length;f<g;f++){(o=this._boneSlotArray[f]).deformData=null;}
var M=P[this._aniClipIndex];C=M.default,this._setDeform(C,E,this._boneSlotArray,n);var A;for(A in M){"default"!=A&&A!=this._skinName&&(C=M[A],this._setDeform(C,E,this._boneSlotArray,n));}
C=M[this._skinName],this._setDeform(C,E,this._boneSlotArray,n);}
var O,R,L;if(this._drawOrder)for(f=0,g=this._drawOrder.length;f<g;f++){O=I[(o=this._boneSlotArray[this._drawOrder[f]]).name],R=x[o.name],isNaN(R)||(r.save(),r.alpha(R)),isNaN(O)||-2==O||(this._templet.attachmentNames?o.showDisplayByName(this._templet.attachmentNames[O]):o.showDisplayByIndex(O)),E[this._drawOrder[f]]?(L=E[this._drawOrder[f]],o.currDisplayData&&L[o.currDisplayData.attachmentName]?o.deformData=L[o.currDisplayData.attachmentName]:o.deformData=null):o.deformData=null,isNaN(R)?o.draw(r,this._boneMatrixArray,2==this._aniMode):o.draw(r,this._boneMatrixArray,2==this._aniMode,R),isNaN(R)||r.restore();}else for(f=0,g=this._boneSlotArray.length;f<g;f++){O=I[(o=this._boneSlotArray[f]).name],R=x[o.name],isNaN(R)||(r.save(),r.alpha(R)),isNaN(O)||-2==O||(this._templet.attachmentNames?o.showDisplayByName(this._templet.attachmentNames[O]):o.showDisplayByIndex(O)),E[f]?(L=E[f],o.currDisplayData&&L[o.currDisplayData.attachmentName]?o.deformData=L[o.currDisplayData.attachmentName]:o.deformData=null):o.deformData=null,isNaN(R)?o.draw(r,this._boneMatrixArray,2==this._aniMode):o.draw(r,this._boneMatrixArray,2==this._aniMode,R),isNaN(R)||r.restore();}
0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,t,r):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,t,r);},i._setDeform=function(t,e,n,i){if(t){var r,a,o,s=0,l=0,u=0;if(t)for(s=0,l=t.deformSlotDataList.length;s<l;s++){for(r=t.deformSlotDataList[s],u=0;u<r.deformSlotDisplayList.length;u++){o=n[(a=r.deformSlotDisplayList[u]).slotIndex],a.apply(i,o),e[a.slotIndex]||(e[a.slotIndex]={}),e[a.slotIndex][a.attachment]=a.deformData;}}}},i.getAnimNum=function(){return this._templet.getAnimationCount();},i.getAniNameByIndex=function(t){return this._templet.getAniNameByIndex(t);},i.getSlotByName=function(t){return this._boneSlotDic[t];},i.showSkinByName=function(t,e){void 0===e&&(e=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(t),e);},i.showSkinByIndex=function(t,e){void 0===e&&(e=!0);for(var n=0;n<this._boneSlotArray.length;n++){this._boneSlotArray[n].showSlotData(null,e);}
if(this._templet.showSkinByIndex(this._boneSlotDic,t,e)){var i=this._templet.skinDataArray[t];this._skinIndex=t,this._skinName=i.name;}
this._clearCache();},i.showSlotSkinByIndex=function(t,e){if(0!=this._aniMode){var n=this.getSlotByName(t);n&&n.showDisplayByIndex(e),this._clearCache();}},i.showSlotSkinByName=function(t,e){if(0!=this._aniMode){var n=this.getSlotByName(t);n&&n.showDisplayByName(e),this._clearCache();}},i.replaceSlotSkinName=function(t,e,n){if(0!=this._aniMode){var i=this.getSlotByName(t);i&&i.replaceDisplayByName(e,n),this._clearCache();}},i.replaceSlotSkinByIndex=function(t,e,n){if(0!=this._aniMode){var i=this.getSlotByName(t);i&&i.replaceDisplayByIndex(e,n),this._clearCache();}},i.setSlotSkin=function(t,e){if(0!=this._aniMode){var n=this.getSlotByName(t);n&&n.replaceSkin(e),this._clearCache();}},i._clearCache=function(){if(1==this._aniMode)for(var t=0,e=this._graphicsCache.length;t<e;t++){for(var n=0,i=this._graphicsCache[t].length;n<i;n++){var r=this._graphicsCache[t][n];r!=this.graphics&&tt.recycle(r);}
this._graphicsCache[t].length=0;}},i.play=function(t,e,n,i,r,a){void 0===n&&(n=!0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===a&&(a=!0),this._indexControl=!1;var o=-1,s=NaN;if(s=e?2147483647:0,"string"==typeof t)for(var u=0,h=this._templet.getAnimationCount();u<h;u++){var c=this._templet.getAnimation(u);if(c&&t==c.name){o=u;break;}}else o=t;o>-1&&o<this.getAnimNum()&&(this._aniClipIndex=o,(n||this._pause||this._currAniIndex!=o)&&(this._currAniIndex=o,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(o)),this._drawOrder=null,this._eventIndex=0,this._player.play(o,this._player.playbackRate,s,i,r),a&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=l.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()));},i.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update));},i.playbackRate=function(t){this._player&&(this._player.playbackRate=t);},i.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update));},i.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=l.now(),this.timer.frameLoop(1,this,this._update,null,!0));},i._getGrahicsDataWithCache=function(t,e){return this._graphicsCache[t][e];},i._setGrahicsDataWithCache=function(t,e,n){this._graphicsCache[t][e]=n;},i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update);},a(0,i,"url",function(){return this._aniPath;},function(t){this.load(t);}),a(0,i,"index",function(){return this._index;},function(t){this.player&&(this._index=t,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1));}),a(0,i,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total;}),a(0,i,"templet",function(){return this._templet;}),a(0,i,"player",function(){return this._player;}),e.useSimpleMeshInCanvas=!1,e;}(x),at=(function(t){function e(t){this._start=0,this._Pos=0,this._data=null,this._curIndex=0,this._preIndex=0,this._playIndex=0,this._playing=!1,this._ended=!0,this._count=0,this._ids=null,this._loadedImage={},this._idOfSprite=null,this._parentMovieClip=null,this._movieClipList=null,this._labels=null,this.basePath=null,this._atlasPath=null,this._url=null,this._isRoot=!1,this._completeHandler=null,this._endFrame=-1,this.interval=30,this.loop=!1,e.__super.call(this),this._ids={},this._idOfSprite=[],this._reset(),this._playing=!1,this._parentMovieClip=t,t?(this._isRoot=!1,this._movieClipList=t._movieClipList,this._movieClipList.push(this)):(this._movieClipList=[this],this._isRoot=!0,this._setUpNoticeType(1));}
r(e,"laya.ani.swf.MovieClip",t);var i=e.prototype;i.destroy=function(e){void 0===e&&(e=!0),this._clear(),t.prototype.destroy.call(this,e);},i._setDisplay=function(e){t.prototype._setDisplay.call(this,e),this._isRoot&&this._$3__onDisplay(e);},i._$3__onDisplay=function(t){t?this.timer.loop(this.interval,this,this.updates,null,!0):this.timer.clear(this,this.updates);},i.updates=function(){if(!this._parentMovieClip){var t=0,e=0;for(e=this._movieClipList.length,t=0;t<e;t++){this._movieClipList[t]&&this._movieClipList[t]._update();}}},i.addLabel=function(t,e){this._labels||(this._labels={}),this._labels[e]=t;},i.removeLabel=function(t){if(t){if(!this._labels)for(var e in this._labels){if(this._labels[e]===t){delete this._labels[e];break;}}}else this._labels=null;},i._update=function(){if(this._data&&this._playing){if(this._playIndex++,this._playIndex>=this._count){if(!this.loop)return this._playIndex--,void this.stop();this._playIndex=0;}
if(this._parse(this._playIndex),this._labels&&this._labels[this._playIndex]&&this.event("label",this._labels[this._playIndex]),-1!=this._endFrame&&this._endFrame==this._playIndex){if(this._endFrame=-1,null!=this._completeHandler){var t=this._completeHandler;this._completeHandler=null,t.run();}
this.stop();}}},i.stop=function(){this._playing=!1;},i.gotoAndStop=function(t){this.index=t,this.stop();},i._clear=function(){if(this.stop(),this._idOfSprite.length=0,!this._parentMovieClip){this.timer.clear(this,this.updates);var t=0,e=0;for(e=this._movieClipList.length,t=0;t<e;t++){this._movieClipList[t]!=this&&this._movieClipList[t]._clear();}
this._movieClipList.length=0;}
this._atlasPath&&d.clearRes(this._atlasPath);var n;for(n in this._loadedImage){this._loadedImage[n]&&(d.clearRes(n),this._loadedImage[n]=!1);}
this.removeChildren(),this.graphics=null,this._parentMovieClip=null;},i.play=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!0),this.loop=e,this._playing=!0,this._data&&this._displayFrame(t);},i._displayFrame=function(t){void 0===t&&(t=-1),-1!=t&&(this._curIndex>t&&this._reset(),this._parse(t));},i._reset=function(t){void 0===t&&(t=!0),t&&1!=this._curIndex&&this.removeChildren(),this._preIndex=this._curIndex=-1,this._Pos=this._start;},i._parse=function(t){var n,i,r,a=0,o=0,s=0,l=!1,u=this._idOfSprite,h=this._data;for(this._ended&&this._reset(),h.pos=this._Pos,this._ended=!1,this._playIndex=t,this._curIndex>t&&t<this._preIndex&&(this._reset(!0),h.pos=this._Pos);this._curIndex<=t&&!this._ended;){switch(h.getUint16()){case 12:if(a=h.getUint16(),o=this._ids[h.getUint16()],this._Pos=h.pos,h.pos=o,0==(s=h.getUint8())){var c=h.getUint16();if(!(i=u[a])){i=u[a]=new x();var _=new x();_.loadImage(this.basePath+c+".png"),this._loadedImage[this.basePath+c+".png"]=!0,i.addChild(_),_.size(h.getFloat32(),h.getFloat32());var f=h._getMatrix();_.transform=f;}
i.alpha=1;}else 1==s&&((n=u[a])||(u[a]=n=new e(this),n.interval=this.interval,n._ids=this._ids,n.basePath=this.basePath,n._setData(h,o),n._initState(),n.play(0)),n.alpha=1);h.pos=this._Pos;break;case 3:var d=u[h.getUint16()];d&&(this.addChild(d),d.zOrder=h.getUint16(),l=!0);break;case 4:(d=u[h.getUint16()])&&d.removeSelf();break;case 5:u[h.getUint16()][e._ValueList[h.getUint16()]]=h.getFloat32();break;case 6:u[h.getUint16()].visible=h.getUint8()>0;break;case 7:var p=(i=u[h.getUint16()]).transform||m.create();p.setTo(h.getFloat32(),h.getFloat32(),h.getFloat32(),h.getFloat32(),h.getFloat32(),h.getFloat32()),i.transform=p;break;case 8:u[h.getUint16()].setPos(h.getFloat32(),h.getFloat32());break;case 9:u[h.getUint16()].setSize(h.getFloat32(),h.getFloat32());break;case 10:u[h.getUint16()].alpha=h.getFloat32();break;case 11:u[h.getUint16()].setScale(h.getFloat32(),h.getFloat32());break;case 98:r=h.getString(),this.event(r),"stop"==r&&this.stop();break;case 99:this._curIndex=h.getUint16(),l&&this.updateZOrder();break;case 100:this._count=this._curIndex+1,this._ended=!0,this._playing&&(this.event("enterframe"),this.event("end"),this.event("complete")),this._reset(!1);}}
this._playing&&!this._ended&&this.event("enterframe"),this._Pos=h.pos;},i._setData=function(t,e){this._data=t,this._start=e+3;},i.load=function(t,e,i){void 0===e&&(e=!1),this._url=t=b.formatURL(t),e&&(this._atlasPath=i||t.split(".swf")[0]+".json"),this.stop(),this._clear(),this._movieClipList=[this];var r;r=[{url:t,type:"arraybuffer"}],this._atlasPath&&r.push({url:this._atlasPath,type:"atlas"}),n.loader.load(r,f.create(this,this._onLoaded));},i._onLoaded=function(){var t;(t=d.getRes(this._url))?(this.basePath=this._atlasPath?d.getAtlas(this._atlasPath).dir:this._url.split(".swf")[0]+"/image/",this._initData(t)):this.event("error","file not find");},i._initState=function(){this._reset(),this._ended=!1;var t=this._playing;for(this._playing=!1,this._curIndex=0;!this._ended;){this._parse(++this._curIndex);}
this._playing=t;},i._initData=function(t){this._data=new u(t);var e=0,n=this._data.getUint16();for(e=0;e<n;e++){this._ids[this._data.getInt16()]=this._data.getInt32();}
this.interval=1e3/this._data.getUint16(),this._setData(this._data,this._ids[32767]),this._initState(),this.play(0),this.event("loaded"),this._parentMovieClip||this.timer.loop(this.interval,this,this.updates,null,!0);},i.playTo=function(t,e,n){this._completeHandler=n,this._endFrame=e,this.play(t,!1);},a(0,i,"index",function(){return this._playIndex;},function(t){this._playIndex=t,this._data&&this._displayFrame(this._playIndex),this._labels&&this._labels[t]&&this.event("label",this._labels[t]);}),a(0,i,"count",function(){return this._count;}),a(0,i,"playing",function(){return this._playing;}),a(0,i,"url",null,function(t){this.load(t);}),e._ValueList=["x","y","width","height","scaleX","scaleY","rotation","alpha"];}(x),function(t){function e(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,e.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[];}
r(e,"laya.ani.bone.Templet",t);var i=e.prototype;return i.loadAni=function(t){this._skBufferUrl=t,n.loader.load(t,f.create(this,this.onComplete),null,"arraybuffer");},i.onComplete=function(t){if(this._isDestroyed)this.destroy();else{var e=d.getRes(this._skBufferUrl);e?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,e)):this.event("error","load failed:"+this._skBufferUrl);}},i.parseData=function(t,e,n){void 0===n&&(n=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=t,this._mainTexture&&y.isWebGL&&t.bitmap&&(t.bitmap.enableMerageInAtlas=!1),this._rate=n,this.parse(e);},i.buildArmature=function(t){return void 0===t&&(t=0),new rt(this,t);},i.parse=function(n){t.prototype.parse.call(this,n),this._endLoaded(),this._aniVersion!=e.LAYA_ANIMATION_VISION&&(console.log("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+e.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0);},i._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var t=0;this._loadList=[];var e,i=new u(this.getPublicExtData()),r=0,a=0,o=0,s=i.getInt32(),l=i.readUTFString(),h=l.split("\n");for(t=0;t<s;t++){e=this._path+h[2*t],l=h[2*t+1],i.getFloat32(),i.getFloat32(),r=i.getFloat32(),a=i.getFloat32(),o=i.getFloat32(),isNaN(o)?0:o,o=i.getFloat32(),isNaN(o)?0:o,o=i.getFloat32(),isNaN(o)?r:o,o=i.getFloat32(),isNaN(o)?a:o,-1==this._loadList.indexOf(e)&&this._loadList.push(e);}
n.loader.load(this._loadList,f.create(this,this._textureComplete));}},i._textureComplete=function(){for(var t,e,n=0,i=this._loadList.length;n<i;n++){e=this._loadList[n],t=this._textureDic[e]=d.getRes(e),y.isWebGL&&t&&t.bitmap&&(t.bitmap.enableMerageInAtlas=!1);}
this._parsePublicExtData();},i._parsePublicExtData=function(){var t=0,e=0,n=0,i=0,r=0;for(t=0,r=this.getAnimationCount();t<r;t++){this._graphicsCache.push([]);}
var a=!1;a="Dragon"!=this._aniClassName;var o,s,l=new u(this.getPublicExtData()),h=0,c=0,_=0,f=0,d=0,p=0,g=0,y=0,v=0,I=l.getInt32(),x=l.readUTFString(),T=x.split("\n");for(t=0;t<I;t++){if(o=this._mainTexture,s=this._path+T[2*t],x=T[2*t+1],null==this._mainTexture&&(o=this._textureDic[s]),!o)return this.event("error",this),void(this.isParseFail=!0);h=l.getFloat32(),c=l.getFloat32(),_=l.getFloat32(),f=l.getFloat32(),v=l.getFloat32(),d=isNaN(v)?0:v,v=l.getFloat32(),p=isNaN(v)?0:v,v=l.getFloat32(),g=isNaN(v)?_:v,v=l.getFloat32(),y=isNaN(v)?f:v,this.subTextureDic[x]=S.create(o,h,c,_,f,-d,-p,g,y);}
this._mainTexture=o;var b,w=l.getUint16();for(t=0;t<w;t++){(b=[]).push(l.getUint16()),b.push(l.getUint16()),b.push(l.getUint16()),b.push(l.getUint16()),this.aniSectionDic[t]=b;}
var D,C,E,P,O,R=l.getInt16(),G={};for(t=0;t<R;t++){D=new M(),0==t?O=D:D.root=O,D.d=a?-1:1,E=l.readUTFString(),P=l.readUTFString(),D.length=l.getFloat32(),1==l.getByte()&&(D.inheritRotation=!1),1==l.getByte()&&(D.inheritScale=!1),D.name=E,P&&((C=G[P])?C.addChild(D):this.mRootBone=D),G[E]=D,this.mBoneArr.push(D);}
this.tMatrixDataLen=l.getUint16();var k,H=l.getUint16(),X=Math.floor(H/this.tMatrixDataLen),Z=this.srcBoneMatrixArr;for(t=0;t<X;t++){(k=new q()).scX=l.getFloat32(),k.skX=l.getFloat32(),k.skY=l.getFloat32(),k.scY=l.getFloat32(),k.x=l.getFloat32(),k.y=l.getFloat32(),8===this.tMatrixDataLen&&(k.skewX=l.getFloat32(),k.skewY=l.getFloat32()),Z.push(k),(D=this.mBoneArr[t]).transform=k;}
var J,$=l.getUint16(),Q=0;for(t=0;t<$;t++){for(J=new B(),Q=l.getUint16(),e=0;e<Q;e++){J.boneNames.push(l.readUTFString()),J.boneIndexs.push(l.getInt16());}
J.name=l.readUTFString(),J.targetBoneName=l.readUTFString(),J.targetBoneIndex=l.getInt16(),J.bendDirection=l.getFloat32(),J.mix=l.getFloat32(),J.isSpine=a,this.ikArr.push(J);}
var tt,et=l.getUint16(),nt=0;for(t=0;t<et;t++){for(tt=new Y(),nt=l.getUint16(),e=0;e<nt;e++){tt.boneIndexs.push(l.getInt16());}
tt.name=l.getUTFString(),tt.targetIndex=l.getInt16(),tt.rotateMix=l.getFloat32(),tt.translateMix=l.getFloat32(),tt.scaleMix=l.getFloat32(),tt.shearMix=l.getFloat32(),tt.offsetRotation=l.getFloat32(),tt.offsetX=l.getFloat32(),tt.offsetY=l.getFloat32(),tt.offsetScaleX=l.getFloat32(),tt.offsetScaleY=l.getFloat32(),tt.offsetShearY=l.getFloat32(),this.tfArr.push(tt);}
var it,rt=l.getUint16(),at=0;for(t=0;t<rt;t++){for((it=new z()).name=l.readUTFString(),at=l.getUint16(),e=0;e<at;e++){it.bones.push(l.getInt16());}
it.target=l.readUTFString(),it.positionMode=l.readUTFString(),it.spacingMode=l.readUTFString(),it.rotateMode=l.readUTFString(),it.offsetRotation=l.getFloat32(),it.position=l.getFloat32(),it.spacing=l.getFloat32(),it.rotateMix=l.getFloat32(),it.translateMix=l.getFloat32(),this.pathArr.push(it);}
var ot,st,lt,ut,ht=0,ct=0,_t=0,ft=NaN,dt=0,pt=l.getInt16();for(t=0;t<pt;t++){var mt=l.getUint8(),gt={};this.deformAniArr.push(gt);for(var yt=0;yt<mt;yt++){for((ot=new L()).skinName=l.getUTFString(),gt[ot.skinName]=ot,ht=l.getInt16(),e=0;e<ht;e++){for(st=new F(),ot.deformSlotDataList.push(st),ct=l.getInt16(),n=0;n<ct;n++){for(lt=new V(),st.deformSlotDisplayList.push(lt),lt.slotIndex=l.getInt16(),lt.attachment=l.getUTFString(),_t=l.getInt16(),i=0;i<_t;i++){for(1==l.getByte()?lt.tweenKeyList.push(!0):lt.tweenKeyList.push(!1),ft=l.getFloat32(),lt.timeList.push(ft),ut=[],lt.vectices.push(ut),dt=l.getInt16(),r=0;r<dt;r++){ut.push(l.getFloat32());}}}}}}
var vt,It,xt=l.getInt16(),Tt=0,St=0;for(t=0;t<xt;t++){for(Tt=l.getInt16(),vt=[],e=0;e<Tt;e++){for((It=new N()).time=l.getFloat32(),St=l.getInt16(),n=0;n<St;n++){It.drawOrder.push(l.getInt16());}
vt.push(It);}
this.drawOrderAniArr.push(vt);}
var bt,wt,Dt=l.getInt16(),Ct=0;for(t=0;t<Dt;t++){for(Ct=l.getInt16(),bt=[],e=0;e<Ct;e++){(wt=new U()).name=l.getUTFString(),wt.intValue=l.getInt32(),wt.floatValue=l.getFloat32(),wt.stringValue=l.getUTFString(),wt.time=l.getFloat32(),bt.push(wt);}
this.eventAniArr.push(bt);}
var Et=l.getInt16();if(Et>0)for(this.attachmentNames=[],t=0;t<Et;t++){this.attachmentNames.push(l.getUTFString());}
var Pt,Mt,At=l.getInt16();for(t=0;t<At;t++){(Pt=new A()).name=l.readUTFString(),Pt.parent=l.readUTFString(),Pt.attachmentName=l.readUTFString(),Pt.srcDisplayIndex=Pt.displayIndex=l.getInt16(),Pt.templet=this,this.boneSlotDic[Pt.name]=Pt,null==(Mt=this.bindBoneBoneSlotDic[Pt.parent])&&(this.bindBoneBoneSlotDic[Pt.parent]=Mt=[]),Mt.push(Pt),this.boneSlotArray.push(Pt);}
var Ot,Rt,Lt,Ft=l.readUTFString().split("\n"),Vt=0,Nt=l.getUint8(),Ut=0,Gt=0,Bt=0,kt=0,Ht=0,zt=0,jt=0;for(t=0;t<Nt;t++){for((Ot=new j()).name=Ft[Vt++],Ut=l.getUint8(),e=0;e<Ut;e++){for((Rt=new K()).name=Ft[Vt++],Pt=this.boneSlotDic[Rt.name],Gt=l.getUint8(),n=0;n<Gt;n++){if(Lt=new W(),this.skinSlotDisplayDataArr.push(Lt),Lt.name=Ft[Vt++],Lt.attachmentName=Ft[Vt++],Lt.transform=new q(),Lt.transform.scX=l.getFloat32(),Lt.transform.skX=l.getFloat32(),Lt.transform.skY=l.getFloat32(),Lt.transform.scY=l.getFloat32(),Lt.transform.x=l.getFloat32(),Lt.transform.y=l.getFloat32(),Rt.displayArr.push(Lt),Lt.width=l.getFloat32(),Lt.height=l.getFloat32(),Lt.type=l.getUint8(),Lt.verLen=l.getUint16(),(R=l.getUint16())>0)for(Lt.bones=[],i=0;i<R;i++){var Wt=l.getUint16();Lt.bones.push(Wt);}
if((Bt=l.getUint16())>0)for(Lt.uvs=[],i=0;i<Bt;i++){Lt.uvs.push(l.getFloat32());}
if((kt=l.getUint16())>0)for(Lt.weights=[],i=0;i<kt;i++){Lt.weights.push(l.getFloat32());}
if((Ht=l.getUint16())>0)for(Lt.triangles=[],i=0;i<Ht;i++){Lt.triangles.push(l.getUint16());}
if((zt=l.getUint16())>0)for(Lt.vertices=[],i=0;i<zt;i++){Lt.vertices.push(l.getFloat32());}
if((jt=l.getUint16())>0)for(Lt.lengths=[],i=0;i<jt;i++){Lt.lengths.push(l.getFloat32());}}
Ot.slotArr.push(Rt);}
this.skinDic[Ot.name]=Ot,this.skinDataArray.push(Ot);}
1==l.getUint8()?(this.yReverseMatrix=new m(1,0,0,-1,0,0),O&&O.setTempMatrix(this.yReverseMatrix)):O&&O.setTempMatrix(new m()),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this);},i.getTexture=function(t){var e=this.subTextureDic[t];return e||(e=this.subTextureDic[t.substr(0,t.length-1)]),null==e?this._mainTexture:e;},i.showSkinByIndex=function(t,e,n){if(void 0===n&&(n=!0),e<0&&e>=this.skinDataArray.length)return!1;var i,r,a=0,o=0,s=this.skinDataArray[e];if(s){for(a=0,o=s.slotArr.length;a<o;a++){(r=s.slotArr[a])&&(i=t[r.name])&&(i.showSlotData(r,n),n&&"undefined"!=i.attachmentName&&"null"!=i.attachmentName?i.showDisplayByName(i.attachmentName):i.showDisplayByIndex(i.displayIndex));}
return!0;}
return!1;},i.getSkinIndexByName=function(t){for(var e=0,n=this.skinDataArray.length;e<n;e++){if(this.skinDataArray[e].name==t)return e;}
return-1;},i.getGrahicsDataWithCache=function(t,e){return this._graphicsCache[t][e];},i.setGrahicsDataWithCache=function(t,e,n){this._graphicsCache[t][e]=n;},i.destroy=function(){this._isDestroyed=!0;var t;for(var n in this.subTextureDic){(t=this.subTextureDic[n])&&t.destroy();}
for(n in this._textureDic){(t=this._textureDic[n])&&t.destroy();}
for(var i=0,r=this.skinSlotDisplayDataArr.length;i<r;i++){this.skinSlotDisplayDataArr[i].destory();}
this.skinSlotDisplayDataArr.length=0,this.url&&delete e.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this);},i.getAniNameByIndex=function(t){var e=this.getAnimation(t);return e?e.name:null;},a(0,i,"rate",function(){return this._rate;},function(t){this._rate=t;}),e.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",e.TEMPLET_DICTIONARY=null,e;}(nt));}(window,document,Laya),"function"==typeof window.define&&window.define.amd&&window.define("laya.core",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var n in Laya){var i=Laya[n];i&&i.__isclass&&(e[n]=i);}}),function(t,e,n){n.un,n.uns,n.static;var i=n.class,r=n.getset,a=(n.__newvec,laya.utils.Browser,laya.utils.Color),o=laya.filters.ColorFilterAction,s=laya.filters.webgl.ColorFilterActionGL,l=laya.filters.Filter,u=laya.filters.webgl.FilterActionGL,h=laya.maths.Matrix,c=(laya.maths.Rectangle,laya.renders.Render),_=(laya.renders.RenderContext,laya.webgl.resource.RenderTarget2D),f=laya.utils.RunDriver,d=(laya.webgl.shader.d2.ShaderDefines2D,laya.display.Sprite,laya.resource.Texture,laya.webgl.shader.d2.value.Value2D),p=function(){function t(){this.data=null;}
i(t,"laya.filters.FilterAction");var e=t.prototype;return n.imps(e,{"laya.filters.IFilterAction":!0}),e.apply=function(t){return null;},t;}(),m=function(){function t(){}
return i(t,"laya.filters.WebGLFilter"),t.enable=function(){t.isInit||(t.isInit=!0,c.isWebGL&&(f.createFilterAction=function(t){var e;switch(t){case 32:e=new s();break;case 16:e=new g();break;case 8:e=new y();}
return e;}));},t.isInit=!1,t.__init$=function(){f.createFilterAction=function(t){var e;switch(t){case 16:case 8:e=new p();break;case 32:e=new o();}
return e;};},t;}(),g=(function(t){function e(t){this.strength=NaN,this.strength_sig2_2sig2_gauss1=[],e.__super.call(this),void 0===t&&(t=4),c.isWebGL&&m.enable(),this.strength=t,this._action=f.createFilterAction(16),this._action.data=this;}
i(e,"laya.filters.BlurFilter",l);var n=e.prototype;n.callNative=function(t){t.conchModel&&t.conchModel.blurFilter&&t.conchModel.blurFilter(this.strength);},r(0,n,"action",function(){return this._action;}),r(0,n,"type",function(){return 16;});}(),function(t){function e(t,n,i,r){this._color=null,e.__super.call(this),this._elements=new Float32Array(9),void 0===n&&(n=4),void 0===i&&(i=6),void 0===r&&(r=6),c.isWebGL&&m.enable(),this._color=new a(t),this.blur=Math.min(n,20),this.offX=i,this.offY=r,this._action=f.createFilterAction(8),this._action.data=this;}
i(e,"laya.filters.GlowFilter",l);var n=e.prototype;n.getColor=function(){return this._color._color;},n.callNative=function(t){t.conchModel&&t.conchModel.glowFilter&&t.conchModel.glowFilter(this._color.strColor,this._elements[4],this._elements[5],this._elements[6]);},r(0,n,"type",function(){return 8;}),r(0,n,"action",function(){return this._action;}),r(0,n,"offY",function(){return this._elements[6];},function(t){this._elements[6]=t;}),r(0,n,"offX",function(){return this._elements[5];},function(t){this._elements[5]=t;}),r(0,n,"blur",function(){return this._elements[4];},function(t){this._elements[4]=t;});}(),function(t){function e(){this.data=null,e.__super.call(this);}
i(e,"laya.filters.webgl.BlurFilterActionGL",u);var n=e.prototype;return n.setValueMix=function(t){t.defines.add(this.data.type);},n.apply3d=function(t,e,n,i,r){var a=t.getValue("bounds"),o=d.create(1,0);o.setFilters([this.data]);h.EMPTY.identity(),n.ctx.drawTarget(t,0,0,a.width,a.height,h.EMPTY,"src",o),o.setFilters(null);},n.setValue=function(t){t.strength=this.data.strength;var e=this.data.strength/3,n=e*e;this.data.strength_sig2_2sig2_gauss1[0]=this.data.strength,this.data.strength_sig2_2sig2_gauss1[1]=n,this.data.strength_sig2_2sig2_gauss1[2]=2*n,this.data.strength_sig2_2sig2_gauss1[3]=1/(2*Math.PI*n),t.strength_sig2_2sig2_gauss1=this.data.strength_sig2_2sig2_gauss1;},r(0,n,"typeMix",function(){return 16;}),e;}()),y=function(t){function e(){this.data=null,this._initKey=!1,this._textureWidth=0,this._textureHeight=0,e.__super.call(this);}
i(e,"laya.filters.webgl.GlowFilterActionGL",u);var a=e.prototype;return n.imps(a,{"laya.filters.IFilterActionGL":!0}),a.setValueMix=function(t){},a.apply3d=function(t,e,n,i,r){var a=t.getValue("bounds");t.addValue("color",this.data.getColor());var o=a.width,s=a.height;this._textureWidth=o,this._textureHeight=s;var l,u=h.TEMP;return u.identity(),(l=d.create(1,0)).setFilters([this.data]),n.ctx.drawTarget(t,0,0,this._textureWidth,this._textureHeight,u,"src",l,null),l=d.create(1,0),n.ctx.drawTarget(t,0,0,this._textureWidth,this._textureHeight,u,"src",l),null;},a.setSpriteWH=function(t){this._textureWidth=t.width,this._textureHeight=t.height;},a.setValue=function(t){t.u_offsetX=this.data.offX,t.u_offsetY=-this.data.offY,t.u_strength=1,t.u_blurX=this.data.blur,t.u_blurY=this.data.blur,t.u_textW=this._textureWidth,t.u_textH=this._textureHeight,t.u_color=this.data.getColor();},r(0,a,"typeMix",function(){return 8;}),e.tmpTarget=function(t,e,n,i,r){var a=t.getValue("bounds");t.getValue("out").end();var o=_.create(a.width,a.height);o.start();var s=t.getValue("color");s&&o.clear(s[0],s[1],s[2],0),t.addValue("tmpTarget",o);},e.startOut=function(t,e,n,i,r){t.getValue("tmpTarget").end();var a=t.getValue("out");a.start();var o=t.getValue("color");o&&a.clear(o[0],o[1],o[2],0);},e.recycleTarget=function(t,e,n,i,r){t.getValue("src");t.getValue("tmpTarget").recycle();},e;}();n.__init([m]);}(window,document,Laya),"function"==typeof window.define&&window.define.amd&&window.define("laya.core",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var n in Laya){var i=Laya[n];i&&i.__isclass&&(e[n]=i);}}),function(t,e,n){n.un,n.uns;var i=n.static,r=n.class,a=n.getset,o=(n.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),s=laya.utils.ClassUtils,l=(laya.events.Event,laya.utils.HTMLChar),u=laya.net.Loader,h=(laya.display.Node,laya.maths.Rectangle),c=laya.renders.Render,_=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),f=laya.utils.Stat,d=laya.display.Text,p=laya.resource.Texture,m=laya.net.URL,g=laya.utils.Utils,y=function(){function t(){}
return r(t,"laya.html.utils.HTMLParse"),t.parse=function(e,n,i){n=(n="<root>"+(n=n.replace(/<br>/g,"<br/>"))+"</root>").replace(t.spacePattern,t.char255);var r=g.parseXMLFromString(n);t._parseXML(e,r.childNodes[0].childNodes,i);},t._parseXML=function(e,n,i,r){var a=0,o=0;if(n.join||n.item)for(a=0,o=n.length;a<o;++a){t._parseXML(e,n[a],i,r);}else{var l,u;if(3==n.nodeType){var h;return void(e instanceof laya.html.dom.HTMLDivElement?(null==n.nodeName&&(n.nodeName="#text"),u=n.nodeName.toLowerCase(),(h=n.textContent.replace(/^\s+|\s+$/g,"")).length>0&&(l=s.getInstance(u))&&(e.addChild(l),l.innerTEXT=h.replace(t.char255AndOneSpacePattern," "))):(h=n.textContent.replace(/^\s+|\s+$/g,"")).length>0&&(e.innerTEXT=h.replace(t.char255AndOneSpacePattern," ")));}
if("#comment"==(u=n.nodeName.toLowerCase()))return;if(l=s.getInstance(u)){(l=e.addChild(l)).URI=i,l.href=r;var c=n.attributes;if(c&&c.length>0)for(a=0,o=c.length;a<o;++a){var _=c[a],f=_.nodeName,d=_.value;l._setAttributes(f,d);}
t._parseXML(l,n.childNodes,i,l.href);}else t._parseXML(e,n.childNodes,i,r);}},t.char255=String.fromCharCode(255),t.spacePattern=/&nbsp;|&#160;/g,t.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),t;}(),v=function(){function t(){}
return r(t,"laya.html.utils.Layout"),t.later=function(e){null==t._will&&(t._will=[],n.stage.frameLoop(1,null,function(){if(!(t._will.length<1)){for(var e=0;e<t._will.length;e++){laya.html.utils.Layout.layout(t._will[e]);}
t._will.length=0;}})),t._will.push(e);},t.layout=function(e){if(!e||!e._style)return null;if(0==(512&e._style._type))return null;e.getStyle()._type&=-513;var n=t._multiLineLayout(e);return c.isConchApp&&e.layaoutCallNative&&e.layaoutCallNative(),n;},t._multiLineLayout=function(e){function n(){P.y=w,w+=P.h+f,0==P.h&&(w+=p),P.mWidth=O,O=0,P=new I(),E.push(P),P.h=0,b=0,R=!0,M=!1;}
if(d.RightToLeft)return t._multiLineLayout2(e);var i=new Array();e._addChildsToLayout(i);var r,a,o,s,l,u=0,h=i.length,c=e._getCSSStyle(),_=c.letterSpacing,f=c.leading,p=c.lineHeight,m=c._widthAuto()||!c.wordWrap,g=m?999999:e.width,y=(e.height,0),v=c.italic?c.fontSize/3:0,x=c._getAlign(),T=c._getValign(),S=0!==T||0!==x||0!=p,b=0,w=0,D=0,C=0,E=new Array(),P=E[0]=new I(),M=!1,A=!1;P.h=0,c.italic&&(g-=c.fontSize/3);var O=0,R=!0;for(u=0;u<h;u++){if(null!=(r=i[u])){if(R=!1,r instanceof laya.html.dom.HTMLBrElement)n(),P.y=w;else{if(r._isChar()){if((s=r).isWord)M=A||"\n"===s.char,P.wordStartIndex=P.elements.length;else{if(E.length>0&&b+D>g&&P.wordStartIndex>0){var L=0;L=P.elements.length-P.wordStartIndex+1,P.elements.length=P.wordStartIndex,u-=L,n();continue;}
M=!1,O+=s.width;}
D=s.width+_,C=s.height,A=!1,(M=M||b+D>g)&&n(),P.minTextHeight=Math.min(P.minTextHeight,r.height);}else l=r,o=(a=r._getCSSStyle()).padding,0===a._getCssFloat()||(S=!0),M=A||a.lineElement,D=l.width*l._style._tf.scaleX+o[1]+o[3]+_,C=l.height*l._style._tf.scaleY+o[0]+o[2],A=a.lineElement,(M=M||b+D>g&&a.wordWrap)&&n();P.elements.push(r),P.h=Math.max(P.h,C),r.x=b,r.y=w,b+=D,P.w=b-_,P.y=w,y=Math.max(b+v,y);}}else R||(b+=t.DIV_ELEMENT_PADDING),P.wordStartIndex=P.elements.length;}
if(w=P.y+P.h,S){var F=0,V=g;for(m&&e.width>0&&(V=e.width),u=0,h=E.length;u<h;u++){E[u].updatePos(0,V,u,F,x,T,p),F+=Math.max(p,E[u].h+f);}
w=F;}
return m&&(e.width=y),w>e.height&&(e.height=w),[y,w];},t._multiLineLayout2=function(e){function n(){E.y=b,b+=E.h+f,0==E.h&&(b+=d),E.mWidth=A,A=0,E=new I(),C.push(E),E.h=0,S=0,O=!0,P=!1;}
var i=new Array();e._addChildsToLayout(i);var r,a,o,s,l,u=0,h=i.length,c=e._getCSSStyle(),_=c.letterSpacing,f=c.leading,d=c.lineHeight,p=c._widthAuto()||!c.wordWrap,m=p?999999:e.width,g=(e.height,0),y=c.italic?c.fontSize/3:0,v=2-c._getAlign(),x=c._getValign(),T=0!==x||0!==v||0!=d,S=0,b=0,w=0,D=0,C=new Array(),E=C[0]=new I(),P=!1,M=!1;E.h=0,c.italic&&(m-=c.fontSize/3);var A=0,O=!0;for(u=0;u<h;u++){if(null!=(r=i[u])){if(O=!1,r instanceof laya.html.dom.HTMLBrElement)n(),E.y=b;else{if(r._isChar()){if((s=r).isWord)P=M||"\n"===s.char,E.wordStartIndex=E.elements.length;else{if(C.length>0&&S+w>m&&E.wordStartIndex>0){var R=0;R=E.elements.length-E.wordStartIndex+1,E.elements.length=E.wordStartIndex,u-=R,n();continue;}
P=!1,A+=s.width;}
w=s.width+_,D=s.height,M=!1,(P=P||S+w>m)&&n(),E.minTextHeight=Math.min(E.minTextHeight,r.height);}else l=r,o=(a=r._getCSSStyle()).padding,0===a._getCssFloat()||(T=!0),P=M||a.lineElement,w=l.width*l._style._tf.scaleX+o[1]+o[3]+_,D=l.height*l._style._tf.scaleY+o[0]+o[2],M=a.lineElement,(P=P||S+w>m&&a.wordWrap)&&n();E.elements.push(r),E.h=Math.max(E.h,D),r.x=S,r.y=b,S+=w,E.w=S-_,E.y=b,g=Math.max(S+y,g);}}else O||(S+=t.DIV_ELEMENT_PADDING),E.wordStartIndex=E.elements.length;}
if(b=E.y+E.h,T){var L=0,F=m;for(u=0,h=C.length;u<h;u++){C[u].updatePos(0,F,u,L,v,x,d),L+=Math.max(d,C[u].h+f);}
b=L;}
for(p&&(e.width=g),b>e.height&&(e.height=b),u=0,h=C.length;u<h;u++){C[u].revertOrder(m);}
return[g,b];},t._will=null,t.DIV_ELEMENT_PADDING=0,t;}(),I=function(){function t(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array();}
r(t,"laya.html.utils.LayoutLine");var e=t.prototype;return e.updatePos=function(t,e,n,i,r,a,o){var s,l=0;this.elements.length>0&&(l=(s=this.elements[this.elements.length-1]).x+s.width-this.elements[0].x);var u=0,h=NaN;1===r&&(u=(e-l)/2),2===r&&(u=e-l),0===o||0!=a||(a=1);for(var c=0,_=this.elements.length;c<_;c++){var f=(s=this.elements[c])._getCSSStyle();switch(0!==u&&(s.x+=u),f._getValign()){case 0:s.y=i;break;case 1:var d=0;99999!=this.minTextHeight&&(d=this.minTextHeight);var p=(d+o)/2;p=Math.max(p,this.h),h=(laya.html.dom.HTMLImageElement,i+p-s.height),s.y=h;break;case 2:s.y=i+(o-s.height);}}},e.revertOrder=function(t){var e;if(this.elements.length>0){var n=0,i=0;for(i=this.elements.length,n=0;n<i;n++){(e=this.elements[n]).x=t-e.x-e.width;}}},t;}(),x=function(t){function e(){this.URI=null,this._href=null,e.__super.call(this),this._text=e._EMPTYTEXT,this.setStyle(new o(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0;}
r(e,"laya.html.dom.HTMLElement",t);var i=e.prototype;return i.layaoutCallNative=function(){var t=0;if(this._childs&&(t=this._childs.length)>0)for(var e=0;e<t;e++){this._childs[e].layaoutCallNative&&this._childs[e].layaoutCallNative();}
var n=this._getWords();n?laya.html.dom.HTMLElement.fillWords(this,n,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear();},i.appendChild=function(t){return this.addChild(t);},i._getWords2=function(){var t=this._text.text;if(!t||0===t.length)return null;var e,n,i=0,r=0;if(this._text.drawWords)n=this._text.drawWords;else{for(r=(e=t.split(" ")).length-1,n=[],i=0;i<r;i++){n.push(e[i]," ");}
r>=0&&n.push(e[r]),this._text.drawWords=n;}
var a=this._text.words;if(a&&a.length===n.length)return a;null===a&&(this._text.words=a=[]),a.length=n.length;var o,s=this.style,u=s.font;for(i=0,r=n.length;i<r;i++){o=g.measureText(n[i],u);var h=a[i]=new l(n[i],o.width,o.height||s.fontSize,s);if(h.char.length>1&&(h.charNum=h.char),this.href){var c=new _();this.addChild(c),h.setSprite(c);}}
return a;},i._getWords=function(){if(!d.CharacterCache)return this._getWords2();var t=this._text.text;if(!t||0===t.length)return null;var e=this._text.words;if(e&&e.length===t.length)return e;null===e&&(this._text.words=e=[]),e.length=t.length;for(var n,i=this.style,r=i.font,a=0,o=t.length;a<o;a++){n=g.measureText(t.charAt(a),r);var s=e[a]=new l(t.charAt(a),n.width,n.height||i.fontSize,i);if(this.href){var u=new _();this.addChild(u),s.setSprite(u);}}
return e;},i.showLinkSprite=function(){var t=this._text.words;if(t)for(var e,n,i=[],r=0;r<t.length;r++){n=t[r],(e=new _()).graphics.drawRect(0,0,n.width,n.height,"#ff0000"),e.width=n.width,e.height=n.height,this.addChild(e),i.push(e);}},i._layoutLater=function(){var t=this.style;512&t._type||(t.widthed(this)&&(this._childs.length>0||null!=this._getWords())&&t.block?(v.later(this),t._type|=512):this.parent&&this.parent._layoutLater());},i._setAttributes=function(e,n){switch(e){case "style":return void this.style.cssText(n);case "class":return void(this.className=n);}
t.prototype._setAttributes.call(this,e,n);},i.updateHref=function(){if(null!=this._href){var t=this._getWords();if(t)for(var e,n,i=0;i<t.length;i++){(n=(e=t[i]).getSprite())&&(n.size(e.width,e.height),n.on("click",this,this.onLinkHandler));}}},i.onLinkHandler=function(t){switch(t.type){case "click":for(var e=this;e;){e.event("link",[this.href]),e=e.parent;}}},i.formatURL=function(t){return this.URI?m.formatURL(t,this.URI?this.URI.path:null):t;},a(0,i,"href",function(){return this._href;},function(t){this._href=t,null!=t&&(this._getCSSStyle().underLine=1,this.updateHref());}),a(0,i,"color",null,function(t){this.style.color=t;}),a(0,i,"onClick",null,function(t){n._runScript("fn=function(event){"+t+";}"),this.on("click",this,void 0);}),a(0,i,"id",null,function(t){S.document.setElementById(t,this);}),a(0,i,"innerTEXT",function(){return this._text.text;},function(t){this.text=t;}),a(0,i,"style",function(){return this._style;}),a(0,i,"text",function(){return this._text.text;},function(t){this._text==e._EMPTYTEXT?this._text={text:t,words:null}:(this._text.text=t,this._text.words&&(this._text.words.length=0)),c.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref();}),a(0,i,"parent",t.prototype._$get_parent,function(t){if(t instanceof laya.html.dom.HTMLElement){var e=t;this.URI||(this.URI=e.URI),this.style.inherit(e.style);}
n.superSet(_,this,"parent",t);}),a(0,i,"className",null,function(t){this.style.attrs(S.document.styleSheets["."+t]);}),e.fillWords=function(t,e,n,i,r,a,o){t.graphics.clear();for(var s=0,l=e.length;s<l;s++){var u=e[s];t.graphics.fillText(u.char,u.x+n,u.y+i,r,a,"left",o);}},e._EMPTYTEXT={text:null,words:null},e;}(_),T=(function(t){function e(){e.__super.call(this),this.style.lineElement=!0,this.style.block=!0;}
r(e,"laya.html.dom.HTMLBrElement",x);}(),function(t){function e(){this.contextHeight=NaN,this.contextWidth=NaN,e.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200;}
r(e,"laya.html.dom.HTMLDivElement",t);var i=e.prototype;return i.appendHTML=function(t){y.parse(this,t,this.URI),this.layout();},i._addChildsToLayout=function(t){var e=this._getWords();if(null==e&&0==this._childs.length)return!1;e&&e.forEach(function(e){t.push(e);});for(var n=!0,i=0,r=this._childs.length;i<r;i++){var a=this._childs[i];n?n=!1:t.push(null),a._addToLayout(t);}
return!0;},i._addToLayout=function(t){this.layout();},i.layout=function(){if(this.style){this.style._type|=512;var t=v.layout(this);if(t){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new h());var e=this._$P.mHtmlBounds;e.x=e.y=0,e.width=this.contextWidth=t[0],e.height=this.contextHeight=t[1],this.setBounds(e);}}},a(0,i,"height",function(){return this._height?this._height:this.contextHeight;},t.prototype._$set_height),a(0,i,"innerHTML",null,function(t){this.destroyChildren(),this.appendHTML(t);}),a(0,i,"width",function(){return this._width?this._width:this.contextWidth;},function(t){var e=!1;e=0===t?t!=this._width:t!=this.width,n.superSet(x,this,"width",t),e&&this.layout();}),e;}(x)),S=function(t){function e(){this.all=new Array(),this.styleSheets=o.styleSheets,e.__super.call(this);}
r(e,"laya.html.dom.HTMLDocument",x);var n=e.prototype;return n.getElementById=function(t){return this.all[t];},n.setElementById=function(t,e){this.all[t]=e;},i(e,["document",function(){return this.document=new e();}]),e;}();(function(t){function e(){this._tex=null,this._url=null,this._renderArgs=[],e.__super.call(this),this.style.block=!0;}
r(e,"laya.html.dom.HTMLImageElement",x);var n=e.prototype;n._addToLayout=function(t){!this._style.absolute&&t.push(this);},n.render=function(t,e,n){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(f.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,t.ctx.drawTexture2(e,n,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs));},n.layaoutCallNative=function(){var t=0;if(this._childs&&(t=this._childs.length)>0)for(var e=0;e<t;e++){this._childs[e].layaoutCallNative&&this._childs[e].layaoutCallNative();}},a(0,n,"src",null,function(t){function e(){var t=n._style;t.widthed(n)||n._tex.width,t.heighted(n)||n._tex.height;t.widthed(n)||n._width==n._tex.width||(n.width=n._tex.width,n.parent&&n.parent._layoutLater()),t.heighted(n)||n._height==n._tex.height||(n.height=n._tex.height,n.parent&&n.parent._layoutLater()),c.isConchApp&&(n._renderArgs[0]=n._tex,n._renderArgs[1]=n.x,n._renderArgs[2]=n.y,n._renderArgs[3]=n.width||n._tex.width,n._renderArgs[4]=n.height||n._tex.height,n.graphics.drawTexture(n._tex,0,0,n._renderArgs[3],n._renderArgs[4])),n.repaint(),n.parentRepaint();}
var n=this;if(t=this.formatURL(t),this._url!=t){this._url=t;var i=this._tex=u.getRes(t);i||(this._tex=i=new p(),i.load(t),u.cacheRes(t,i)),i.loaded?e():i.on("loaded",null,e);}});})(),function(t){function e(){this.type=null,e.__super.call(this),this.visible=!1;}
r(e,"laya.html.dom.HTMLLinkElement",t);var n=e.prototype;n._onload=function(t){switch(this.type){case "text/css":o.parseCSS(t,this.URI);}},a(0,n,"href",t.prototype._$get_href,function(t){var e=this;t=this.formatURL(t),this.URI=new m(t);var n=new u();n.once("complete",null,function(t){e._onload(t);}),n.load(t,"text");}),e._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g");}(x),function(t){function e(){e.__super.call(this),this.visible=!1;}
r(e,"laya.html.dom.HTMLStyleElement",t);a(0,e.prototype,"text",t.prototype._$get_text,function(t){o.parseCSS(t,null);});}(x),function(t){function e(){e.__super.call(this),this._getCSSStyle().valign="middle";}
r(e,"laya.html.dom.HTMLIframeElement",t);a(0,e.prototype,"href",t.prototype._$get_href,function(t){var e=this;t=this.formatURL(t);var n=new u();n.once("complete",null,function(n){var i=e.URI;e.URI=new m(t),e.innerHTML=n,!i||(e.URI=i);}),n.load(t,"text");});}(T);}(window,document,Laya),"function"==typeof window.define&&window.define.amd&&window.define("laya.core",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var n in Laya){var i=Laya[n];i&&i.__isclass&&(e[n]=i);}}),function(t,e,n){n.un,n.uns;var i=n.static,r=n.class,a=n.getset,o=(n.__newvec,laya.webgl.canvas.BlendMode),s=(laya.events.Event,laya.resource.HTMLCanvas),l=laya.utils.Handler,u=laya.webgl.utils.IndexBuffer2D,h=(laya.net.Loader,laya.maths.MathUtil),c=laya.maths.Matrix,_=laya.renders.Render,f=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.shader.Shader),d=laya.display.Sprite,p=laya.utils.Stat,m=laya.resource.Texture,g=laya.utils.Utils,y=laya.webgl.shader.d2.value.Value2D,v=laya.webgl.utils.VertexBuffer2D,I=laya.webgl.WebGL,x=(laya.webgl.WebGLContext,function(){function t(){this._frameTime=0,this._emissionRate=60,this._emissionTime=0,this.minEmissionTime=1/60,this._particleTemplate=null;}
r(t,"laya.particle.emitter.EmitterBase");var e=t.prototype;return e.start=function(t){void 0===t&&(t=2147483647),0!=this._emissionRate&&(this._emissionTime=t);},e.stop=function(){this._emissionTime=0;},e.clear=function(){this._emissionTime=0;},e.emit=function(){},e.advanceTime=function(t){if(void 0===t&&(t=1),this._emissionTime-=t,!(this._emissionTime<0||(this._frameTime+=t,this._frameTime<this.minEmissionTime)))for(;this._frameTime>this.minEmissionTime;){this._frameTime-=this.minEmissionTime,this.emit();}},a(0,e,"particleTemplate",null,function(t){this._particleTemplate=t;}),a(0,e,"emissionRate",function(){return this._emissionRate;},function(t){t<=0||(this._emissionRate=t,t>0&&(this.minEmissionTime=1/t));}),t;}()),T=function(){function t(){this.position=null,this.velocity=null,this.startColor=null,this.endColor=null,this.sizeRotation=null,this.radius=null,this.radian=null,this.durationAddScale=NaN,this.time=NaN;}
return r(t,"laya.particle.ParticleData"),t.Create=function(e,n,i,r){var a=new t();a.position=n,h.scaleVector3(i,e.emitterVelocitySensitivity,t._tempVelocity);var o=h.lerp(e.minHorizontalVelocity,e.maxHorizontalVelocity,Math.random()),s=Math.random()*Math.PI*2;t._tempVelocity[0]+=o*Math.cos(s),t._tempVelocity[2]+=o*Math.sin(s),t._tempVelocity[1]+=h.lerp(e.minVerticalVelocity,e.maxVerticalVelocity,Math.random()),a.velocity=t._tempVelocity,a.startColor=t._tempStartColor,a.endColor=t._tempEndColor;var l=0;if(e.disableColor)for(l=0;l<4;l++){a.startColor[l]=1,a.endColor[l]=1;}else if(e.colorComponentInter)for(l=0;l<4;l++){a.startColor[l]=h.lerp(e.minStartColor[l],e.maxStartColor[l],Math.random()),a.endColor[l]=h.lerp(e.minEndColor[l],e.maxEndColor[l],Math.random());}else h.lerpVector4(e.minStartColor,e.maxStartColor,Math.random(),a.startColor),h.lerpVector4(e.minEndColor,e.maxEndColor,Math.random(),a.endColor);a.sizeRotation=t._tempSizeRotation;var u=Math.random();a.sizeRotation[0]=h.lerp(e.minStartSize,e.maxStartSize,u),a.sizeRotation[1]=h.lerp(e.minEndSize,e.maxEndSize,u),a.sizeRotation[2]=h.lerp(e.minRotateSpeed,e.maxRotateSpeed,Math.random()),a.radius=t._tempRadius;var c=Math.random();a.radius[0]=h.lerp(e.minStartRadius,e.maxStartRadius,c),a.radius[1]=h.lerp(e.minEndRadius,e.maxEndRadius,c),a.radian=t._tempRadian,a.radian[0]=h.lerp(e.minHorizontalStartRadian,e.maxHorizontalStartRadian,Math.random()),a.radian[1]=h.lerp(e.minVerticalStartRadian,e.maxVerticalStartRadian,Math.random());var _=e.useEndRadian;return a.radian[2]=_?h.lerp(e.minHorizontalEndRadian,e.maxHorizontalEndRadian,Math.random()):a.radian[0],a.radian[3]=_?h.lerp(e.minVerticalEndRadian,e.maxVerticalEndRadian,Math.random()):a.radian[1],a.durationAddScale=e.ageAddScale*Math.random(),a.time=r,a;},i(t,["_tempVelocity",function(){return this._tempVelocity=new Float32Array(3);},"_tempStartColor",function(){return this._tempStartColor=new Float32Array(4);},"_tempEndColor",function(){return this._tempEndColor=new Float32Array(4);},"_tempSizeRotation",function(){return this._tempSizeRotation=new Float32Array(3);},"_tempRadius",function(){return this._tempRadius=new Float32Array(2);},"_tempRadian",function(){return this._tempRadian=new Float32Array(4);}]),t;}(),S=(function(){function t(t,e,n){this._templet=null,this._timeBetweenParticles=NaN,this._previousPosition=null,this._timeLeftOver=0,this._tempVelocity=new Float32Array([0,0,0]),this._tempPosition=new Float32Array([0,0,0]),this._templet=t,this._timeBetweenParticles=1/e,this._previousPosition=n;}
r(t,"laya.particle.ParticleEmitter");t.prototype.update=function(t,e){if((t/=1e3)>0){h.subtractVector3(e,this._previousPosition,this._tempVelocity),h.scaleVector3(this._tempVelocity,1/t,this._tempVelocity);for(var n=this._timeLeftOver+t,i=-this._timeLeftOver;n>this._timeBetweenParticles;){i+=this._timeBetweenParticles,n-=this._timeBetweenParticles,h.lerpVector3(this._previousPosition,e,i/t,this._tempPosition),this._templet.addParticleArray(this._tempPosition,this._tempVelocity);}
this._timeLeftOver=n;}
this._previousPosition[0]=e[0],this._previousPosition[1]=e[1],this._previousPosition[2]=e[2];};}(),function(){function t(){this.textureName=null,this.textureCount=1,this.maxPartices=100,this.duration=1,this.ageAddScale=0,this.emitterVelocitySensitivity=1,this.minStartSize=100,this.maxStartSize=100,this.minEndSize=100,this.maxEndSize=100,this.minHorizontalVelocity=0,this.maxHorizontalVelocity=0,this.minVerticalVelocity=0,this.maxVerticalVelocity=0,this.endVelocity=1,this.minRotateSpeed=0,this.maxRotateSpeed=0,this.minStartRadius=0,this.maxStartRadius=0,this.minEndRadius=0,this.maxEndRadius=0,this.minHorizontalStartRadian=0,this.maxHorizontalStartRadian=0,this.minVerticalStartRadian=0,this.maxVerticalStartRadian=0,this.useEndRadian=!0,this.minHorizontalEndRadian=0,this.maxHorizontalEndRadian=0,this.minVerticalEndRadian=0,this.maxVerticalEndRadian=0,this.colorComponentInter=!1,this.disableColor=!1,this.blendState=0,this.emitterType="null",this.emissionRate=0,this.sphereEmitterRadius=1,this.sphereEmitterVelocity=0,this.sphereEmitterVelocityAddVariance=0,this.ringEmitterRadius=30,this.ringEmitterVelocity=0,this.ringEmitterVelocityAddVariance=0,this.ringEmitterUp=2,this.gravity=new Float32Array([0,0,0]),this.minStartColor=new Float32Array([1,1,1,1]),this.maxStartColor=new Float32Array([1,1,1,1]),this.minEndColor=new Float32Array([1,1,1,1]),this.maxEndColor=new Float32Array([1,1,1,1]),this.pointEmitterPosition=new Float32Array([0,0,0]),this.pointEmitterPositionVariance=new Float32Array([0,0,0]),this.pointEmitterVelocity=new Float32Array([0,0,0]),this.pointEmitterVelocityAddVariance=new Float32Array([0,0,0]),this.boxEmitterCenterPosition=new Float32Array([0,0,0]),this.boxEmitterSize=new Float32Array([0,0,0]),this.boxEmitterVelocity=new Float32Array([0,0,0]),this.boxEmitterVelocityAddVariance=new Float32Array([0,0,0]),this.sphereEmitterCenterPosition=new Float32Array([0,0,0]),this.ringEmitterCenterPosition=new Float32Array([0,0,0]),this.positionVariance=new Float32Array([0,0,0]);}
return r(t,"laya.particle.ParticleSetting"),t.checkSetting=function(e){var n;for(n in t._defaultSetting){e.hasOwnProperty(n)||(e[n]=t._defaultSetting[n]);}},i(t,["_defaultSetting",function(){return this._defaultSetting=new t();}]),t;}()),b=function(){function t(){this.settings=null,this.texture=null;}
r(t,"laya.particle.ParticleTemplateBase");return t.prototype.addParticleArray=function(t,e){},t;}(),w=function(){function t(){this.u_Duration=NaN,this.u_EndVelocity=NaN,this.u_Gravity=null,this.a_Position=null,this.a_Velocity=null,this.a_StartColor=null,this.a_EndColor=null,this.a_SizeRotation=null,this.a_Radius=null,this.a_Radian=null,this.a_AgeAddScale=NaN,this.gl_Position=null,this.v_Color=null,this.oSize=NaN,this._color=new Float32Array(4),this._position=new Float32Array(3);}
r(t,"laya.particle.particleUtils.CanvasShader");var e=t.prototype;return e.getLen=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);},e.ComputeParticlePosition=function(t,e,n,i){this._position[0]=t[0],this._position[1]=t[1],this._position[2]=t[2];var r=this.getLen(e),a=r*i+(r*this.u_EndVelocity-r)*i*i/2,o=NaN;o=this.getLen(e);var s=0;for(3,s=0;s<3;s++){this._position[s]=this._position[s]+e[s]/o*a*this.u_Duration,this._position[s]+=this.u_Gravity[s]*n*i;}
var l=h.lerp(this.a_Radius[0],this.a_Radius[1],i),u=h.lerp(this.a_Radian[0],this.a_Radian[2],i),c=h.lerp(this.a_Radian[1],this.a_Radian[3],i),_=Math.cos(c)*l;return this._position[1]+=Math.sin(c)*l,this._position[0]+=Math.cos(u)*_,this._position[2]+=Math.sin(u)*_,new Float32Array([this._position[0],this._position[1],0,1]);},e.ComputeParticleSize=function(t,e,n){return h.lerp(t,e,n);},e.ComputeParticleRotation=function(t,e){return t*e;},e.ComputeParticleColor=function(t,e,n){var i=this._color;return h.lerpVector4(t,e,n,i),i[3]=i[3]*n*(1-n)*(1-n)*6.7,i;},e.clamp=function(t,e,n){return t<e?e:t>n?n:t;},e.getData=function(t){t*=1+this.a_AgeAddScale;var e=this.clamp(t/this.u_Duration,0,1);this.gl_Position=this.ComputeParticlePosition(this.a_Position,this.a_Velocity,t,e);var n=this.ComputeParticleSize(this.a_SizeRotation[0],this.a_SizeRotation[1],e),i=this.ComputeParticleRotation(this.a_SizeRotation[2],t);this.v_Color=this.ComputeParticleColor(this.a_StartColor,this.a_EndColor,e);var r=new c(),a=NaN;a=n/this.oSize*2,r.scale(a,a),r.rotate(i),r.setTranslate(this.gl_Position[0],-this.gl_Position[1]);var o=NaN;return o=this.v_Color[3],[this.v_Color,o,r,this.v_Color[0]*o,this.v_Color[1]*o,this.v_Color[2]*o];},t;}(),D=function(){function t(){this.maxIndex=0,this.cmds=null,this.id=0;}
r(t,"laya.particle.particleUtils.CMDParticle");return t.prototype.setCmds=function(t){this.cmds=t,this.maxIndex=t.length-1;},t;}(),C=function(){function t(){}
return r(t,"laya.particle.particleUtils.PicTool"),t.getCanvasPic=function(t,e){t=t.bitmap;var n=new s("2D"),i=n.getContext("2d");n.size(t.width,t.height);var r=e>>16&255,a=e>>8&255,o=255&e;if(_.isConchApp&&i.setFilter(r/255,a/255,o/255,0),i.drawImage(t.source,0,0),!_.isConchApp){for(var l=i.getImageData(0,0,n.width,n.height),u=l.data,h=0,c=u.length;h<c;h+=4){0!=u[h+3]&&(u[h]*=r/255,u[h+1]*=a/255,u[h+2]*=o/255);}
i.putImageData(l,0,0);}
return n;},t.getRGBPic=function(e){return[new m(t.getCanvasPic(e,16711680)),new m(t.getCanvasPic(e,65280)),new m(t.getCanvasPic(e,255))];},t;}(),E=function(t){function e(t){this.setting=null,this._posRange=null,this._canvasTemplate=null,this._emitFun=null,e.__super.call(this),this.template=t;}
r(e,"laya.particle.emitter.Emitter2D",t);var n=e.prototype;return n.emit=function(){t.prototype.emit.call(this),null!=this._emitFun&&this._emitFun();},n.getRandom=function(t){return(2*Math.random()-1)*t;},n.webGLEmit=function(){var t=new Float32Array(3);t[0]=this.getRandom(this._posRange[0]),t[1]=this.getRandom(this._posRange[1]),t[2]=this.getRandom(this._posRange[2]);var e=new Float32Array(3);e[0]=0,e[1]=0,e[2]=0,this._particleTemplate.addParticleArray(t,e);},n.canvasEmit=function(){var t=new Float32Array(3);t[0]=this.getRandom(this._posRange[0]),t[1]=this.getRandom(this._posRange[1]),t[2]=this.getRandom(this._posRange[2]);var e=new Float32Array(3);e[0]=0,e[1]=0,e[2]=0,this._particleTemplate.addParticleArray(t,e);},a(0,n,"template",function(){return this._particleTemplate;},function(t){this._particleTemplate=t,t||(this._emitFun=null,this.setting=null,this._posRange=null),this.setting=t.settings,this._posRange=this.setting.positionVariance,this._particleTemplate instanceof laya.particle.ParticleTemplate2D?this._emitFun=this.webGLEmit:this._particleTemplate instanceof laya.particle.ParticleTemplateCanvas&&(this._canvasTemplate=t,this._emitFun=this.canvasEmit);}),e;}(x),P=function(t){function e(t){this._vertices=null,this._vertexBuffer=null,this._indexBuffer=null,this._floatCountPerVertex=29,this._firstActiveElement=0,this._firstNewElement=0,this._firstFreeElement=0,this._firstRetiredElement=0,this._currentTime=0,this._drawCounter=0,e.__super.call(this),this.settings=t;}
r(e,"laya.particle.ParticleTemplateWebGL",b);var n=e.prototype;return n.initialize=function(){this._vertices=new Float32Array(this.settings.maxPartices*this._floatCountPerVertex*4);for(var t=0,e=0;e<this.settings.maxPartices;e++){var n=Math.random(),i=this.settings.textureCount?1/this.settings.textureCount:1,r=NaN;for(r=0;r<this.settings.textureCount&&!(n<r+i);r+=i){}
t=e*this._floatCountPerVertex*4,this._vertices[t+0*this._floatCountPerVertex+0]=-1,this._vertices[t+0*this._floatCountPerVertex+1]=-1,this._vertices[t+0*this._floatCountPerVertex+2]=0,this._vertices[t+0*this._floatCountPerVertex+3]=r,this._vertices[t+1*this._floatCountPerVertex+0]=1,this._vertices[t+1*this._floatCountPerVertex+1]=-1,this._vertices[t+1*this._floatCountPerVertex+2]=1,this._vertices[t+1*this._floatCountPerVertex+3]=r,this._vertices[t+2*this._floatCountPerVertex+0]=1,this._vertices[t+2*this._floatCountPerVertex+1]=1,this._vertices[t+2*this._floatCountPerVertex+2]=1,this._vertices[t+2*this._floatCountPerVertex+3]=r+i,this._vertices[t+3*this._floatCountPerVertex+0]=-1,this._vertices[t+3*this._floatCountPerVertex+1]=1,this._vertices[t+3*this._floatCountPerVertex+2]=0,this._vertices[t+3*this._floatCountPerVertex+3]=r+i;}},n.loadContent=function(){},n.update=function(t){this._currentTime+=t/1e3,this.retireActiveParticles(),this.freeRetiredParticles(),this._firstActiveElement==this._firstFreeElement&&(this._currentTime=0),this._firstRetiredElement==this._firstActiveElement&&(this._drawCounter=0);},n.retireActiveParticles=function(){for(var t=this.settings.duration;this._firstActiveElement!=this._firstNewElement;){var e=this._firstActiveElement*this._floatCountPerVertex*4,n=e+28,i=this._currentTime-this._vertices[n];if((i*=1+this._vertices[e+27])+1e-4<t)break;this._vertices[n]=this._drawCounter,this._firstActiveElement++,this._firstActiveElement>=this.settings.maxPartices&&(this._firstActiveElement=0);}},n.freeRetiredParticles=function(){for(;this._firstRetiredElement!=this._firstActiveElement;){if(this._drawCounter-this._vertices[this._firstRetiredElement*this._floatCountPerVertex*4+28]<3)break;this._firstRetiredElement++,this._firstRetiredElement>=this.settings.maxPartices&&(this._firstRetiredElement=0);}},n.addNewParticlesToVertexBuffer=function(){},n.addParticleArray=function(t,e){var n=this._firstFreeElement+1;if(n>=this.settings.maxPartices&&(n=0),n!==this._firstRetiredElement){for(var i=T.Create(this.settings,t,e,this._currentTime),r=this._firstFreeElement*this._floatCountPerVertex*4,a=0;a<4;a++){var o=0,s=0;for(o=0,s=4;o<3;o++){this._vertices[r+a*this._floatCountPerVertex+s+o]=i.position[o];}
for(o=0,s=7;o<3;o++){this._vertices[r+a*this._floatCountPerVertex+s+o]=i.velocity[o];}
for(o=0,s=10;o<4;o++){this._vertices[r+a*this._floatCountPerVertex+s+o]=i.startColor[o];}
for(o=0,s=14;o<4;o++){this._vertices[r+a*this._floatCountPerVertex+s+o]=i.endColor[o];}
for(o=0,s=18;o<3;o++){this._vertices[r+a*this._floatCountPerVertex+s+o]=i.sizeRotation[o];}
for(o=0,s=21;o<2;o++){this._vertices[r+a*this._floatCountPerVertex+s+o]=i.radius[o];}
for(o=0,s=23;o<4;o++){this._vertices[r+a*this._floatCountPerVertex+s+o]=i.radian[o];}
this._vertices[r+a*this._floatCountPerVertex+27]=i.durationAddScale,this._vertices[r+a*this._floatCountPerVertex+28]=i.time;}
this._firstFreeElement=n;}},e;}(),M=function(t){function e(t){this._ready=!1,this.textureList=[],this.particleList=[],this.pX=0,this.pY=0,this.activeParticles=[],this.deadParticles=[],this.iList=[],this._maxNumParticles=0,this.textureWidth=NaN,this.dTextureWidth=NaN,this.colorChange=!0,this.step=1/60,this.canvasShader=new w(),e.__super.call(this),this.settings=t,this._maxNumParticles=t.maxPartices,this.texture=new m(),this.texture.on("loaded",this,this._textureLoaded),this.texture.load(t.textureName);}
r(e,"laya.particle.ParticleTemplateCanvas",b);var n=e.prototype;return n._textureLoaded=function(t){this.setTexture(this.texture),this._ready=!0;},n.clear=function(t){void 0===t&&(t=!0),this.deadParticles.length=0,this.activeParticles.length=0,this.textureList.length=0;},n.setTexture=function(t){this.texture=t,this.textureWidth=t.width,this.dTextureWidth=1/this.textureWidth,this.pX=.5*-t.width,this.pY=.5*-t.height,this.textureList=e.changeTexture(t,this.textureList),this.particleList.length=0,this.deadParticles.length=0,this.activeParticles.length=0;},n._createAParticleData=function(t,e){this.canvasShader.u_EndVelocity=this.settings.endVelocity,this.canvasShader.u_Gravity=this.settings.gravity,this.canvasShader.u_Duration=this.settings.duration;var n;n=T.Create(this.settings,t,e,0),this.canvasShader.a_Position=n.position,this.canvasShader.a_Velocity=n.velocity,this.canvasShader.a_StartColor=n.startColor,this.canvasShader.a_EndColor=n.endColor,this.canvasShader.a_SizeRotation=n.sizeRotation,this.canvasShader.a_Radius=n.radius,this.canvasShader.a_Radian=n.radian,this.canvasShader.a_AgeAddScale=n.durationAddScale,this.canvasShader.oSize=this.textureWidth;var i=new D(),r=0,a=this.settings.duration/(1+n.durationAddScale),o=[];for(r=0;r<a;r+=this.step){o.push(this.canvasShader.getData(r));}
return i.id=this.particleList.length,this.particleList.push(i),i.setCmds(o),i;},n.addParticleArray=function(t,e){if(this._ready){var n;this.particleList.length<this._maxNumParticles?(n=this._createAParticleData(t,e),this.iList[n.id]=0,this.activeParticles.push(n)):this.deadParticles.length>0&&(n=this.deadParticles.pop(),this.iList[n.id]=0,this.activeParticles.push(n));}},n.advanceTime=function(t){if(void 0===t&&(t=1),this._ready){var e,n=this.activeParticles,i=this.deadParticles,r=0,a=n.length,o=0,s=this.iList;for(r=a-1;r>-1;r--){(o=s[(e=n[r]).id])>=e.maxIndex?(o=0,n.splice(r,1),i.push(e)):o+=1,s[e.id]=o;}}},n.render=function(t,e,n){this._ready&&(this.activeParticles.length<1||this.textureList.length<2||(this.settings.disableColor?this.noColorRender(t,e,n):this.canvasRender(t,e,n)));},n.noColorRender=function(t,e,n){var i,r,a=this.activeParticles,o=0,s=a.length,l=NaN,u=this.pX,h=this.pY,c=2*-u,_=2*-h,f=0,d=(this.textureList,this.iList),p=NaN;for(t.translate(e,n),p=t.ctx.globalAlpha,o=0;o<s;o++){f=d[(i=a[o]).id],(r=i.cmds[f])&&((l=r[1])<=.01||(t.setAlpha(p*l),t.drawTextureWithTransform(this.texture,u,h,c,_,r[2],1)));}
t.setAlpha(p),t.translate(-e,-n);},n.canvasRender=function(t,e,n){var i,r,a,o=this.activeParticles,s=0,l=o.length,u=this.pX,h=this.pY,c=2*-u,_=2*-h,f=0,d=this.textureList,p=this.iList,m=NaN;for(t.translate(e,n),m=t.ctx.globalAlpha,a=t.ctx.globalCompositeOperation,t.blendMode("lighter"),s=0;s<l;s++){f=p[(i=o[s]).id],(r=i.cmds[f])&&(r[1]<=.01||(t.save(),t.transformByMatrix(r[2]),r[3]>.01&&(t.setAlpha(m*r[3]),t.drawTexture(d[0],u,h,c,_)),r[4]>.01&&(t.setAlpha(m*r[4]),t.drawTexture(d[1],u,h,c,_)),r[5]>.01&&(t.setAlpha(m*r[5]),t.drawTexture(d[2],u,h,c,_)),t.restore()));}
t.setAlpha(m),t.translate(-e,-n),t.blendMode(a);},e.changeTexture=function(t,e,n){return e||(e=[]),e.length=0,n&&n.disableColor?e.push(t,t,t):g.copyArray(e,C.getRGBPic(t)),e;},e;}(),A=function(t){function e(t){this._vertexBuffer2D=null,this._indexBuffer2D=null,this.x=0,this.y=0,this._blendFn=null,this._startTime=0,this.sv=new O(),e.__super.call(this,t);var i=this;n.loader.load(this.settings.textureName,l.create(null,function(t){t.bitmap.enableMerageInAtlas=!1,i.texture=t;})),this.sv.u_Duration=this.settings.duration,this.sv.u_Gravity=this.settings.gravity,this.sv.u_EndVelocity=this.settings.endVelocity,this._blendFn=o.fns[t.blendState],this.initialize(),this._vertexBuffer=this._vertexBuffer2D=v.create(-1,35048),this._indexBuffer=this._indexBuffer2D=u.create(35044),this.loadContent();}
r(e,"laya.particle.ParticleTemplate2D",t);var i=e.prototype;return n.imps(i,{"laya.webgl.submit.ISubmit":!0}),i.getRenderType=function(){return-111;},i.releaseRender=function(){},i.addParticleArray=function(e,n){e[0]+=this.x,e[1]+=this.y,t.prototype.addParticleArray.call(this,e,n);},i.loadContent=function(){for(var t=new Uint16Array(6*this.settings.maxPartices),e=0;e<this.settings.maxPartices;e++){t[6*e+0]=4*e+0,t[6*e+1]=4*e+1,t[6*e+2]=4*e+2,t[6*e+3]=4*e+0,t[6*e+4]=4*e+2,t[6*e+5]=4*e+3;}
this._indexBuffer2D.clear(),this._indexBuffer2D.append(t),this._indexBuffer2D.upload();},i.addNewParticlesToVertexBuffer=function(){this._vertexBuffer2D.clear(),this._vertexBuffer2D.append(this._vertices);var t=0;this._firstNewElement<this._firstFreeElement?(t=4*this._firstNewElement*this._floatCountPerVertex*4,this._vertexBuffer2D.subUpload(t,t,t+4*(this._firstFreeElement-this._firstNewElement)*this._floatCountPerVertex*4)):(t=4*this._firstNewElement*this._floatCountPerVertex*4,this._vertexBuffer2D.subUpload(t,t,t+4*(this.settings.maxPartices-this._firstNewElement)*this._floatCountPerVertex*4),this._firstFreeElement>0&&(this._vertexBuffer2D.setNeedUpload(),this._vertexBuffer2D.subUpload(0,0,4*this._firstFreeElement*this._floatCountPerVertex*4))),this._firstNewElement=this._firstFreeElement;},i.renderSubmit=function(){if(this.texture&&this.texture.loaded){if(this.update(n.timer.delta),this.sv.u_CurrentTime=this._currentTime,this._firstNewElement!=this._firstFreeElement&&this.addNewParticlesToVertexBuffer(),this.blend(),this._firstActiveElement!=this._firstFreeElement){I.mainContext;this._vertexBuffer2D.bind(this._indexBuffer2D),this.sv.u_texture=this.texture.source,this.sv.upload(),this._firstActiveElement<this._firstFreeElement?I.mainContext.drawElements(4,6*(this._firstFreeElement-this._firstActiveElement),5123,6*this._firstActiveElement*2):(I.mainContext.drawElements(4,6*(this.settings.maxPartices-this._firstActiveElement),5123,6*this._firstActiveElement*2),this._firstFreeElement>0&&I.mainContext.drawElements(4,6*this._firstFreeElement,5123,0)),p.drawCall++;}
this._drawCounter++;}
return 1;},i.blend=function(){if(o.activeBlendFunction!==this._blendFn){var t=I.mainContext;t.enable(3042),this._blendFn(t),o.activeBlendFunction=this._blendFn;}},i.dispose=function(){this._vertexBuffer2D.dispose(),this._indexBuffer2D.dispose();},e.activeBlendType=-1,e;}(P),O=function(t){function e(){this.a_CornerTextureCoordinate=[4,5126,!1,116,0],this.a_Position=[3,5126,!1,116,16],this.a_Velocity=[3,5126,!1,116,28],this.a_StartColor=[4,5126,!1,116,40],this.a_EndColor=[4,5126,!1,116,56],this.a_SizeRotation=[3,5126,!1,116,72],this.a_Radius=[2,5126,!1,116,84],this.a_Radian=[4,5126,!1,116,92],this.a_AgeAddScale=[1,5126,!1,116,108],this.a_Time=[1,5126,!1,116,112],this.u_CurrentTime=NaN,this.u_Duration=NaN,this.u_Gravity=null,this.u_EndVelocity=NaN,this.u_texture=null,e.__super.call(this,0,0);}
r(e,"laya.particle.shader.value.ParticleShaderValue",y);return e.prototype.upload=function(){this.refresh(),e.pShader.upload(this);},i(e,["pShader",function(){return this.pShader=new R();}]),e;}(),R=(function(e){function i(t){this._matrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this._particleTemplate=null,this._canvasTemplate=null,this._emitter=null,this.autoPlay=!0,i.__super.call(this),t&&this.setParticleSetting(t);}
r(i,"laya.particle.Particle2D",e);var o=i.prototype;o.load=function(t){n.loader.load(t,l.create(this,this.setParticleSetting),null,"json");},o.setParticleSetting=function(e){var i=this;if(!e)return this.stop();if(S.checkSetting(e),t.ConchParticleTemplate2D&&!_.isWebGL||(this.customRenderEnable=!0),_.isWebGL)this._particleTemplate=new A(e),this.graphics._saveToCmd(_.context._drawParticle,[this._particleTemplate]);else{if(_.isConchApp&&t.ConchParticleTemplate2D){this._particleTemplate=new ConchParticleTemplate2D();var r=this;return n.loader.load(e.textureName,l.create(null,function(t){r._particleTemplate.texture=t,r._particleTemplate.settings=e,_.isConchNode?r.graphics.drawParticle(r._particleTemplate):r.graphics._saveToCmd(_.context._drawParticle,[i._particleTemplate]);})),this._emitter={start:function t(){}},this.play=this._particleTemplate.play.bind(this._particleTemplate),this.stop=this._particleTemplate.stop.bind(this._particleTemplate),void(this.autoPlay&&this.play());}
this._particleTemplate=this._canvasTemplate=new M(e);}
this._emitter?this._emitter.template=this._particleTemplate:this._emitter=new E(this._particleTemplate),this.autoPlay&&(this.emitter.start(),this.play());},o.play=function(){this.timer.frameLoop(1,this,this._loop);},o.stop=function(){this.timer.clear(this,this._loop);},o._loop=function(){this.advanceTime(1/60);},o.advanceTime=function(t){void 0===t&&(t=1),this._canvasTemplate&&this._canvasTemplate.advanceTime(t),this._emitter&&this._emitter.advanceTime(t);},o.customRender=function(t,e,n){if(_.isWebGL){this._matrix4[0]=t.ctx._curMat.a,this._matrix4[1]=t.ctx._curMat.b,this._matrix4[4]=t.ctx._curMat.c,this._matrix4[5]=t.ctx._curMat.d,this._matrix4[12]=t.ctx._curMat.tx,this._matrix4[13]=t.ctx._curMat.ty;this._particleTemplate.sv.u_mmat=this._matrix4;}
this._canvasTemplate&&this._canvasTemplate.render(t,e,n);},o.destroy=function(t){void 0===t&&(t=!0),this._particleTemplate instanceof laya.particle.ParticleTemplate2D&&this._particleTemplate.dispose(),e.prototype.destroy.call(this,t);},a(0,o,"url",null,function(t){this.load(t);}),a(0,o,"emitter",function(){return this._emitter;});}(d),function(t){function e(){e.__super.call(this,e.vs,e.ps,"ParticleShader");}
return r(e,"laya.particle.shader.ParticleShader",f),i(e,["vs",function(){return this.vs="attribute vec4 a_CornerTextureCoordinate;\nattribute vec3 a_Position;\nattribute vec3 a_Velocity;\nattribute vec4 a_StartColor;\nattribute vec4 a_EndColor;\nattribute vec3 a_SizeRotation;\nattribute vec2 a_Radius;\nattribute vec4 a_Radian;\nattribute float a_AgeAddScale;\nattribute float a_Time;\n\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\n\nuniform float u_CurrentTime;\nuniform float u_Duration;\nuniform float u_EndVelocity;\nuniform vec3 u_Gravity;\n\n#ifdef PARTICLE3D\n uniform mat4 u_WorldMat;\n uniform mat4 u_View;\n uniform mat4 u_Projection;\n uniform vec2 u_ViewportScale;\n#else\n uniform vec2 size;\n uniform mat4 mmat;\n uniform mat4 u_mmat;\n#endif\n\nvec4 ComputeParticlePosition(in vec3 position, in vec3 velocity,in float age,in float normalizedAge)\n{\n\n   float startVelocity = length(velocity);//起始标量速度\n   float endVelocity = startVelocity * u_EndVelocity;//结束标量速度\n\n   float velocityIntegral = startVelocity * normalizedAge +(endVelocity - startVelocity) * normalizedAge *normalizedAge/2.0;//计算当前速度的标量（单位空间），vt=v0*t+(1/2)*a*(t^2)\n   \n   vec3 addPosition = normalize(velocity) * velocityIntegral * u_Duration;//计算受自身速度影响的位置，转换标量到矢量    \n   addPosition += u_Gravity * age * normalizedAge;//计算受重力影响的位置\n   \n   float radius=mix(a_Radius.x, a_Radius.y, normalizedAge); //计算粒子受半径和角度影响（无需计算角度和半径时，可用宏定义优化屏蔽此计算）\n   float radianHorizontal =mix(a_Radian.x,a_Radian.z,normalizedAge);\n   float radianVertical =mix(a_Radian.y,a_Radian.w,normalizedAge);\n   \n   float r =cos(radianVertical)* radius;\n   addPosition.y += sin(radianVertical) * radius;\n\t\n   addPosition.x += cos(radianHorizontal) *r;\n   addPosition.z += sin(radianHorizontal) *r;\n  \n   #ifdef PARTICLE3D\n   position+=addPosition;\n    return  u_Projection*u_View*u_WorldMat*(vec4(position, 1.0));\n   #else\n   addPosition.y=-addPosition.y;//2D粒子位置更新需要取负，2D粒子坐标系Y轴正向朝上\n   position+=addPosition;\n    return  vec4(position,1.0);\n   #endif\n}\n\nfloat ComputeParticleSize(in float startSize,in float endSize, in float normalizedAge)\n{    \n    float size = mix(startSize, endSize, normalizedAge);\n    \n\t#ifdef PARTICLE3D\n    //Project the size into screen coordinates.\n     return size * u_Projection[1][1];\n\t#else\n\t return size;\n\t#endif\n}\n\nmat2 ComputeParticleRotation(in float rot,in float age)\n{    \n    float rotation =rot * age;\n    //计算2x2旋转矩阵.\n    float c = cos(rotation);\n    float s = sin(rotation);\n    return mat2(c, -s, s, c);\n}\n\nvec4 ComputeParticleColor(in vec4 startColor,in vec4 endColor,in float normalizedAge)\n{\n\tvec4 color=mix(startColor,endColor,normalizedAge);\n    //硬编码设置，使粒子淡入很快，淡出很慢,6.7的缩放因子把置归一在0到1之间，可以谷歌x*(1-x)*(1-x)*6.7的制图表\n    color.a *= normalizedAge * (1.0-normalizedAge) * (1.0-normalizedAge) * 6.7;\n   \n    return color;\n}\n\nvoid main()\n{\n   float age = u_CurrentTime - a_Time;\n   age *= 1.0 + a_AgeAddScale;\n   float normalizedAge = clamp(age / u_Duration,0.0,1.0);\n   gl_Position = ComputeParticlePosition(a_Position, a_Velocity, age, normalizedAge);//计算粒子位置\n   float pSize = ComputeParticleSize(a_SizeRotation.x,a_SizeRotation.y, normalizedAge);\n   mat2 rotation = ComputeParticleRotation(a_SizeRotation.z, age);\n\t\n   #ifdef PARTICLE3D\n\tgl_Position.xy += (rotation*a_CornerTextureCoordinate.xy) * pSize * u_ViewportScale;\n   #else\n    mat4 mat=u_mmat*mmat;\n    gl_Position=vec4((mat*gl_Position).xy,0.0,1.0);\n\tgl_Position.xy += (rotation*a_CornerTextureCoordinate.xy) * pSize*vec2(mat[0][0],mat[1][1]);\n    gl_Position=vec4((gl_Position.x/size.x-0.5)*2.0,(0.5-gl_Position.y/size.y)*2.0,0.0,1.0);\n   #endif\n   \n   v_Color = ComputeParticleColor(a_StartColor,a_EndColor, normalizedAge);\n   v_TextureCoordinate =a_CornerTextureCoordinate.zw;\n}\n\n";},"ps",function(){return this.ps="#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\nuniform sampler2D u_texture;\n\nvoid main()\n{\t\n\tgl_FragColor=texture2D(u_texture,v_TextureCoordinate)*v_Color;\n\tgl_FragColor.xyz *= v_Color.w;\n}";}]),e;}());}(window,document,Laya),"function"==typeof window.define&&window.define.amd&&window.define("laya.core",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var n in Laya){var i=Laya[n];i&&i.__isclass&&(e[n]=i);}}),function(t,e,n){n.un,n.uns;var i=n.static,r=n.class,a=n.getset,o=n.__newvec,s=(laya.ani.AnimationContent,laya.ani.AnimationPlayer),l=(laya.ani.AnimationState,laya.ani.AnimationTemplet),u=laya.maths.Arith,h=laya.webgl.atlas.AtlasResourceManager,c=laya.webgl.shader.BaseShader,_=laya.utils.Browser,f=laya.webgl.utils.Buffer,d=laya.utils.Byte,p=(laya.ani.bone.canvasmesh.CacheAbleSkinMesh,laya.utils.ClassUtils),m=n.Config,g=(laya.events.Event,laya.events.EventDispatcher),y=laya.utils.Handler,v=laya.net.Loader,I=laya.net.LoaderManager,x=laya.maths.MathUtil,T=laya.display.Node,S=laya.renders.Render,b=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),w=laya.resource.Resource,D=laya.utils.RunDriver,C=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),E=laya.display.Sprite,P=laya.utils.Stat,M=laya.utils.StringKey,A=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),O=laya.utils.Utils,R=laya.webgl.WebGL,L=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;n.interface("laya.d3.core.IClone"),n.interface("laya.d3.graphics.IVertex"),n.interface("laya.d3.core.render.IUpdate"),n.interface("laya.d3.core.scene.ITreeNode"),n.interface("laya.d3.core.render.IRenderable");var F=function(){function t(){}
return r(t,"laya.d3.animation.AnimationClipParser01"),t.READ_DATA=function(){t._DATA.offset=t._reader.getUint32(),t._DATA.size=t._reader.getUint32();},t.READ_BLOCK=function(){for(var e=t._BLOCK.count=t._reader.getUint16(),n=t._BLOCK.blockStarts=[],i=t._BLOCK.blockLengths=[],r=0;r<e;r++){n.push(t._reader.getUint32()),i.push(t._reader.getUint32());}},t.READ_STRINGS=function(){var e=t._reader.getUint32(),n=t._reader.getUint16(),i=t._reader.pos;t._reader.pos=e+t._DATA.offset;for(var r=0;r<n;r++){t._strings[r]=t._reader.readUTFString();}
t._reader.pos=i;},t.parse=function(e,n){t._animationClip=e,t._reader=n;n.__getBuffer();t.READ_DATA(),t.READ_BLOCK(),t.READ_STRINGS();for(var i=0,r=t._BLOCK.count;i<r;i++){var a=n.getUint16(),o=t._strings[a],s=t["READ_"+o];if(null==s)throw new Error("model file err,no this function:"+a+" "+o);s.call();}},t.READ_ANIMATIONS=function(){var e,n=0,i=0,r=t._reader,a=r.__getBuffer(),o=[],s=r.getUint8();for(o.length=s,n=0;n<s;n++){o[n]=r.getUint16();}
var l=[],u=r.getUint16();for(l.length=u,n=0;n<u;n++){l[n]=r.getFloat32();}
var h=t._animationClip;h.name=t._strings[r.getUint16()];var c=h._duration=r.getFloat32();h.islooping=!!r.getByte(),h._frameRate=r.getInt16();var _=r.getInt16(),f=h._nodes=new Array();f.length=_;(h._publicClipDatas=[]).length=_;var d=h._nodesMap={},p=0,m=0;for(n=0;n<_;n++){e=f[n]=new B();var g=r.getUint16(),y=e.path=[];for(y.length=g,i=0;i<g;i++){y[i]=t._strings[r.getUint16()];}
var v=y.join("/"),I=d[v];I||(d[v]=I=[]),I.push(e);var x=r.getInt16();-1!==x&&(e.componentType=t._strings[x]);var T=U._propertyIndexDic[t._strings[r.getUint16()]];if(null==T)throw new Error("AnimationClipParser01:unknown property name.");var S=T<4,b=!S||S&&""===y[0];e._cacheProperty=b,b?p++:m++,e.propertyNameID=T;var w=o[r.getUint8()];e.keyFrameWidth=w/4;var D=e.keyFrames=[],C=D.length=r.getUint16(),E=null,P=NaN;for(i=0;i<C;i++){var M=D[i]=new G();P=M.startTime=l[r.getUint16()];var A=r.pos;M.inTangent=new Float32Array(a.slice(A,A+w)),r.pos+=w,A=r.pos,M.outTangent=new Float32Array(a.slice(A,A+w)),r.pos+=w,A=r.pos,M.data=new Float32Array(a.slice(A,A+w)),r.pos+=w,E&&(E.next=M,E.duration=P-E.startTime),E=M;}
M.next=null,M.duration=c-P;}
var O=h._nodeToCachePropertyMap=new Int32Array(_),R=h._cachePropertyMap=new Int32Array(p),L=h._unCachePropertyMap=new Int32Array(m);for(p=m=0,n=0;n<_;n++){(e=f[n])._cacheProperty?(O[n]=p,R[p++]=n):L[m++]=n;}},t._animationClip=null,t._reader=null,t._strings=[],i(t,["_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]),t;}(),V=function(){function t(){}
return r(t,"laya.d3.animation.AnimationClipParser02"),t.READ_DATA=function(){t._DATA.offset=t._reader.getUint32(),t._DATA.size=t._reader.getUint32();},t.READ_BLOCK=function(){for(var e=t._BLOCK.count=t._reader.getUint16(),n=t._BLOCK.blockStarts=[],i=t._BLOCK.blockLengths=[],r=0;r<e;r++){n.push(t._reader.getUint32()),i.push(t._reader.getUint32());}},t.READ_STRINGS=function(){var e=t._reader.getUint32(),n=t._reader.getUint16(),i=t._reader.pos;t._reader.pos=e+t._DATA.offset;for(var r=0;r<n;r++){t._strings[r]=t._reader.readUTFString();}
t._reader.pos=i;},t.parse=function(e,n){t._animationClip=e,t._reader=n;n.__getBuffer();t.READ_DATA(),t.READ_BLOCK(),t.READ_STRINGS();for(var i=0,r=t._BLOCK.count;i<r;i++){var a=n.getUint16(),o=t._strings[a],s=t["READ_"+o];if(null==s)throw new Error("model file err,no this function:"+a+" "+o);s.call();}},t.READ_ANIMATIONS=function(){var e,n=0,i=0,r=t._reader,a=r.__getBuffer(),o=[],s=r.getUint8();for(o.length=s,n=0;n<s;n++){o[n]=r.getUint16();}
var l=[],u=r.getUint16();for(l.length=u,n=0;n<u;n++){l[n]=r.getFloat32();}
var h=t._animationClip;h.name=t._strings[r.getUint16()];var c=h._duration=r.getFloat32();h.islooping=!!r.getByte(),h._frameRate=r.getInt16();var _=r.getInt16(),f=h._nodes=new Array();f.length=_;(h._publicClipDatas=[]).length=_;var d=h._nodesMap={},p=0,m=0;for(n=0;n<_;n++){e=f[n]=new B();var g=r.getUint16(),y=e.path=[];for(y.length=g,i=0;i<g;i++){y[i]=t._strings[r.getUint16()];}
var v=y.join("/"),I=d[v];I||(d[v]=I=[]),I.push(e);var x=r.getInt16();-1!==x&&(e.componentType=t._strings[x]);var T=U._propertyIndexDic[t._strings[r.getUint16()]];if(null==T)throw new Error("AnimationClipParser02:unknown property name.");var S=T<4,b=!S||S&&""===y[0];e._cacheProperty=b,b?p++:m++,e.propertyNameID=T;var w=o[r.getUint8()];e.keyFrameWidth=w/4;var D=e.keyFrames=[],C=D.length=r.getUint16(),E=null,P=NaN;for(i=0;i<C;i++){var M=D[i]=new G();P=M.startTime=l[r.getUint16()];var A=r.pos;M.inTangent=new Float32Array(a.slice(A,A+w)),r.pos+=w,A=r.pos,M.outTangent=new Float32Array(a.slice(A,A+w)),r.pos+=w,A=r.pos,M.data=new Float32Array(a.slice(A,A+w)),r.pos+=w,E&&(E.next=M,E.duration=P-E.startTime),E=M;}
M.next=null,M.duration=c-P;}
var O=r.getUint16();for(n=0;n<O;n++){var R=new N();R.time=r.getFloat32(),R.eventName=t._strings[r.getUint16()];var L,F=r.getUint16();for(F>0&&(R.params=L=[]),i=0;i<F;i++){switch(r.getByte()){case 0:L.push(!!r.getByte());break;case 1:L.push(r.getInt32());break;case 2:L.push(r.getFloat32());break;case 3:L.push(t._strings[r.getUint16()]);break;default:throw new Error("unknown type.");}}
h.addEvent(R);}
var V=h._nodeToCachePropertyMap=new Int32Array(_),k=h._cachePropertyMap=new Int32Array(p),H=h._unCachePropertyMap=new Int32Array(m);for(p=m=0,n=0;n<_;n++){(e=f[n])._cacheProperty?(V[n]=p,k[p++]=n):H[m++]=n;}},t._animationClip=null,t._reader=null,t._strings=[],i(t,["_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]),t;}(),N=function(){function t(){this.time=NaN,this.eventName=null,this.params=null;}
return r(t,"laya.d3.animation.AnimationEvent"),t;}(),U=function(){function t(){this._childs=[],this.transform=new $e(this);}
r(t,"laya.d3.animation.AnimationNode");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.addChild=function(t){t._parent=this,t.transform.setParent(this.transform),this._childs.push(t);},e.removeChild=function(t){var e=this._childs.indexOf(t);-1!==e&&this._childs.splice(e,1);},e.getChildByName=function(t){for(var e=0,n=this._childs.length;e<n;e++){var i=this._childs[e];if(i.name===t)return i;}
return null;},e.getChildByIndex=function(t){return this._childs[t];},e.getChildCount=function(){return this._childs.length;},e.cloneTo=function(t){var e=t;e.name=this.name;for(var n=0,i=this._childs.length;n<i;n++){var r=this._childs[n],a=r.clone();e.addChild(a);var o=r.transform,s=a.transform;s.setLocalPosition(o.getLocalPosition()),s.setLocalRotation(o.getLocalRotation()),s.setLocalScale(o.getLocalScale()),s._localRotationEuler=o._localRotationEuler,s._setWorldMatrixIgnoreUpdate(o.getWorldMatrix());}},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},t.__init__=function(){t.registerAnimationNodeProperty("localPosition",t._getLocalPosition,t._setLocalPosition),t.registerAnimationNodeProperty("localRotation",t._getLocalRotation,t._setLocalRotation),t.registerAnimationNodeProperty("localScale",t._getLocalScale,t._setLocalScale),t.registerAnimationNodeProperty("localRotationEuler",t._getLocalRotationEuler,t._setLocalRotationEuler),t.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",t._getParticleRenderSharedMaterialTintColor,t._setParticleRenderSharedMaterialTintColor),t.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",t._getMeshRenderSharedMaterialTilingOffset,t._setMeshRenderSharedMaterialTilingOffset),t.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",t._getMeshRenderSharedMaterialAlbedo,t._setMeshRenderSharedMaterialAlbedo),t.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",t._getSkinnedMeshRenderSharedMaterialTilingOffset,t._setSkinnedMeshRenderSharedMaterialTilingOffset),t.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",t._getSkinnedMeshRenderSharedMaterialAlbedo,t._setSkinnedMeshRenderSharedMaterialAlbedo),t.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",t._getMeshRenderSharedMaterialAlbedo,t._setMeshRenderSharedMaterialAlbedo),t.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",t._getSkinnedMeshRenderSharedMaterialAlbedo,t._setSkinnedMeshRenderSharedMaterialAlbedo),t.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",t._getMeshRenderSharedMaterialIntensity,t._setMeshRenderSharedMaterialIntensity),t.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",t._getMeshRenderSharedMaterialAlpha,t._setMeshRenderSharedMaterialAlpha),t.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",t._getMeshRenderSharedMaterialAlphaColor,t._setMeshRenderSharedMaterialAlphaColor),t.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",t._getMeshRenderSharedMaterialBaseColor,t._setMeshRenderSharedMaterialBaseColor),t.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",t._getMeshRenderSharedMaterialDissolve,t._setMeshRenderSharedMaterialDissolve),t.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",t._getMeshRenderSharedMaterialDissolveSpeed,t._setMeshRenderSharedMaterialDissolveSpeed),t.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",t._getMeshRenderSharedMaterialMMultiplier,t._setMeshRenderSharedMaterialMMultiplier),t.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",t._getMeshRenderSharedMaterialBaseScrollSpeedX,t._setMeshRenderSharedMaterialBaseScrollSpeedX),t.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",t._getMeshRenderSharedMaterialBaseScrollSpeedY,t._setMeshRenderSharedMaterialBaseScrollSpeedY),t.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",t._getMeshRenderSharedMaterialSecondScrollSpeedX,t._setMeshRenderSharedMaterialSecondScrollSpeedX),t.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",t._getMeshRenderSharedMaterialSecondScrollSpeedY,t._setMeshRenderSharedMaterialSecondScrollSpeedY),t.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",t._getMeshRenderSharedMaterialDetailTilingOffset,t._setMeshRenderSharedMaterialDetailTilingOffset),t.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",t._getMeshRenderSharedMaterialDissolveTilingOffset,t._setMeshRenderSharedMaterialDissolveTilingOffset),t.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",t._getMeshRenderSharedMaterialMaskTilingOffset,t._setMeshRenderSharedMaterialMaskTilingOffset);},t.registerAnimationNodeProperty=function(e,n,i){if(t._propertyIndexDic[e])throw new Error("AnimationNode: this propertyName has registered.");t._propertyIndexDic[e]=t._propertyIDCounter,t._propertyGetFuncs[t._propertyIDCounter]=n,t._propertySetFuncs[t._propertyIDCounter]=i,t._propertyIDCounter++;},t._getLocalPosition=function(t,e){return t?t.transform.getLocalPosition():e._transform.localPosition.elements;},t._setLocalPosition=function(t,e,n){if(t)t.transform.setLocalPosition(n);else{var i=e._transform,r=i.localPosition;r.elements=n,i.localPosition=r;}},t._getLocalRotation=function(t,e){return t?t.transform.getLocalRotation():e._transform.localRotation.elements;},t._setLocalRotation=function(t,e,n){if(t)t.transform.setLocalRotation(n);else{var i=e._transform,r=i.localRotation;r.elements=n,i.localRotation=r;}},t._getLocalScale=function(t,e){return t?t.transform.getLocalScale():e._transform.localScale.elements;},t._setLocalScale=function(t,e,n){if(t)t.transform.setLocalScale(n);else{var i=e._transform,r=i.localScale;r.elements=n,i.localScale=r;}},t._getLocalRotationEuler=function(t,e){return t?t.transform.getLocalRotationEuler():e._transform.localRotationEuler.elements;},t._setLocalRotationEuler=function(t,e,n){if(t)t.transform.setLocalRotationEuler(n);else{var i=e._transform,r=i.localRotationEuler;r.elements=n,i.localRotationEuler=r;}},t._getMeshRenderSharedMaterialTilingOffset=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.meshRender.sharedMaterial.tilingOffset.elements:null;}
return e.meshRender.sharedMaterial.tilingOffset.elements;},t._setMeshRenderSharedMaterialTilingOffset=function(t,e,n){var i,r;if(t){var a=t.transform._entity;a&&((r=(i=a.owner.meshRender.material).tilingOffset).elements=n,i.tilingOffset=r);}else(r=(i=e.meshRender.material).tilingOffset).elements=n,i.tilingOffset=r;},t._getMeshRenderSharedMaterialAlbedo=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.meshRender.sharedMaterial.albedoColor.elements:null;}
return e.meshRender.sharedMaterial.albedoColor.elements;},t._setMeshRenderSharedMaterialAlbedo=function(t,e,n){var i,r;if(t){var a=t.transform._entity;a&&((r=(i=a.owner.meshRender.material).albedoColor).elements=n,i.albedoColor=r);}else(r=(i=e.meshRender.material).albedoColor).elements=n,i.albedoColor=r;},t._getSkinnedMeshRenderSharedMaterialTilingOffset=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null;}
return e.skinnedMeshRender.sharedMaterial.tilingOffset.elements;},t._setSkinnedMeshRenderSharedMaterialTilingOffset=function(t,e,n){var i,r;if(t){var a=t.transform._entity;a&&((r=(i=a.owner.skinnedMeshRender.material).tilingOffset).elements=n,i.tilingOffset=r);}else(r=(i=e.skinnedMeshRender.material).tilingOffset).elements=n,i.tilingOffset=r;},t._getSkinnedMeshRenderSharedMaterialAlbedo=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null;}
return e.skinnedMeshRender.sharedMaterial.albedoColor.elements;},t._setSkinnedMeshRenderSharedMaterialAlbedo=function(t,e,n){var i,r;if(t){var a=t.transform._entity;a&&((r=(i=a.owner.skinnedMeshRender.material).albedoColor).elements=n,i.albedoColor=r);}else(r=(i=e.skinnedMeshRender.material).albedoColor).elements=n,i.albedoColor=r;},t._getParticleRenderSharedMaterialTintColor=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.particleRender.sharedMaterial.tintColor.elements:null;}
return e.particleRender.sharedMaterial.tintColor.elements;},t._setParticleRenderSharedMaterialTintColor=function(t,e,n){var i,r;if(t){var a=t.transform._entity;a&&((r=(i=a.owner.particleRender.material).tintColor).elements=n,i.tintColor=r);}else(r=(i=e.particleRender.material).tintColor).elements=n,i.tintColor=r;},t._getMeshRenderSharedMaterialAlphaColor=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.meshRender.sharedMaterial.alphaColor.elements:null;}
return e.meshRender.sharedMaterial.alphaColor.elements;},t._setMeshRenderSharedMaterialAlphaColor=function(t,e,n){var i,r;if(t){var a=t.transform._entity;a&&((r=(i=a.owner.meshRender.material).alphaColor).elements=n,i.alphaColor=r);}else(r=(i=e.meshRender.material).alphaColor).elements=n,i.alphaColor=r;},t._getMeshRenderSharedMaterialBaseColor=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.meshRender.sharedMaterial.baseColor.elements:null;}
return e.meshRender.sharedMaterial.baseColor.elements;},t._setMeshRenderSharedMaterialBaseColor=function(t,e,n){var i,r;if(t){var a=t.transform._entity;a&&((r=(i=a.owner.meshRender.material).baseColor).elements=n,i.baseColor=r);}else(r=(i=e.meshRender.material).baseColor).elements=n,i.baseColor=r;},t._getMeshRenderSharedMaterialDissolve=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.meshRender.sharedMaterial.dissolve:0;}
return e.meshRender.sharedMaterial.dissolve;},t._setMeshRenderSharedMaterialDissolve=function(t,e,n){if(t){var i=t.transform._entity;i&&(i.owner.meshRender.material.dissolve=n[0]);}else e.meshRender.material.dissolve=n[0];},t._getMeshRenderSharedMaterialDissolveSpeed=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.meshRender.sharedMaterial.dissolveSpeed:0;}
return e.meshRender.sharedMaterial.dissolveSpeed;},t._setMeshRenderSharedMaterialDissolveSpeed=function(t,e,n){if(t){var i=t.transform._entity;i&&(i.owner.meshRender.material.dissolveSpeed=n[0]);}else e.meshRender.material.dissolveSpeed=n[0];},t._getMeshRenderSharedMaterialMMultiplier=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.meshRender.sharedMaterial.mMultiplier:0;}
return e.meshRender.sharedMaterial.mMultiplier;},t._setMeshRenderSharedMaterialMMultiplier=function(t,e,n){if(t){var i=t.transform._entity;i&&(i.owner.meshRender.material.mMultiplier=n[0]);}else e.meshRender.material.mMultiplier=n[0];},t._getMeshRenderSharedMaterialBaseScrollSpeedX=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.meshRender.sharedMaterial.baseScrollSpeedX:0;}
return e.meshRender.sharedMaterial.baseScrollSpeedX;},t._setMeshRenderSharedMaterialBaseScrollSpeedX=function(t,e,n){if(t){var i=t.transform._entity;i&&(i.owner.meshRender.material.baseScrollSpeedX=n[0]);}else e.meshRender.material.baseScrollSpeedX=n[0];},t._getMeshRenderSharedMaterialBaseScrollSpeedY=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.meshRender.sharedMaterial.baseScrollSpeedY:0;}
return e.meshRender.sharedMaterial.baseScrollSpeedY;},t._setMeshRenderSharedMaterialBaseScrollSpeedY=function(t,e,n){if(t){var i=t.transform._entity;i&&(i.owner.meshRender.material.baseScrollSpeedY=n[0]);}else e.meshRender.material.baseScrollSpeedY=n[0];},t._getMeshRenderSharedMaterialSecondScrollSpeedX=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.meshRender.sharedMaterial.secondScrollSpeedX:0;}
return e.meshRender.sharedMaterial.secondScrollSpeedX;},t._setMeshRenderSharedMaterialSecondScrollSpeedX=function(t,e,n){if(t){var i=t.transform._entity;i&&(i.owner.meshRender.material.secondScrollSpeedX=n[0]);}else e.meshRender.material.secondScrollSpeedX=n[0];},t._getMeshRenderSharedMaterialSecondScrollSpeedY=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.meshRender.sharedMaterial.secondScrollSpeedY:0;}
return e.meshRender.sharedMaterial.secondScrollSpeedY;},t._setMeshRenderSharedMaterialSecondScrollSpeedY=function(t,e,n){if(t){var i=t.transform._entity;i&&(i.owner.meshRender.material.secondScrollSpeedY=n[0]);}else e.meshRender.material.secondScrollSpeedY=n[0];},t._getMeshRenderSharedMaterialAlpha=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.meshRender.sharedMaterial.alpha:0;}
return e.meshRender.sharedMaterial.alpha;},t._setMeshRenderSharedMaterialAlpha=function(t,e,n){if(t){var i=t.transform._entity;i&&(i.owner.meshRender.material.alpha=n[0]);}else e.meshRender.material.alpha=n[0];},t._getMeshRenderSharedMaterialIntensity=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.meshRender.sharedMaterial.intensity:0;}
return e.meshRender.sharedMaterial.intensity;},t._setMeshRenderSharedMaterialIntensity=function(t,e,n){if(t){var i=t.transform._entity;i&&(i.owner.meshRender.material.intensity=n[0]);}else e.meshRender.material.intensity=n[0];},t._getMeshRenderSharedMaterialDetailTilingOffset=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null;}
return e.meshRender.sharedMaterial.detailTilingOffset.elements;},t._setMeshRenderSharedMaterialDetailTilingOffset=function(t,e,n){var i,r;if(t){var a=t.transform._entity;a&&((r=(i=a.owner.meshRender.material).detailTilingOffset).elements=n,i.detailTilingOffset=r);}else(r=(i=e.meshRender.material).detailTilingOffset).elements=n,i.detailTilingOffset=r;},t._getMeshRenderSharedMaterialDissolveTilingOffset=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null;}
return e.meshRender.sharedMaterial.dissolveTilingOffset.elements;},t._setMeshRenderSharedMaterialDissolveTilingOffset=function(t,e,n){var i,r;if(t){var a=t.transform._entity;a&&((r=(i=a.owner.meshRender.material).dissolveTilingOffset).elements=n,i.dissolveTilingOffset=r);}else(r=(i=e.meshRender.material).dissolveTilingOffset).elements=n,i.dissolveTilingOffset=r;},t._getMeshRenderSharedMaterialMaskTilingOffset=function(t,e){if(t){var n=t.transform._entity;return n?n.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null;}
return e.meshRender.sharedMaterial.maskTilingOffset.elements;},t._setMeshRenderSharedMaterialMaskTilingOffset=function(t,e,n){var i,r;if(t){var a=t.transform._entity;a&&((r=(i=a.owner.meshRender.material).maskTilingOffset).elements=n,i.maskTilingOffset=r);}else(r=(i=e.meshRender.material).maskTilingOffset).elements=n,i.maskTilingOffset=r;},t._propertyIDCounter=0,t._propertyIndexDic={},t._propertySetFuncs=[],t._propertyGetFuncs=[],t;}(),G=function(){function t(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null;}
return r(t,"laya.d3.animation.Keyframe"),t;}(),B=function(){function t(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null;}
return r(t,"laya.d3.animation.KeyframeNode"),t;}(),k=function(){function t(){this._tempVector30=new Re(),this._tempVector31=new Re(),this._tempVector32=new Re(),this._a=new Re(),this._b=new Re(),this._c=new Re(),this._d=new Re();}
r(t,"laya.d3.core.glitter.SplineCurvePositionVelocity");var e=t.prototype;return e.Init=function(t,e,n,i){t.cloneTo(this._d),e.cloneTo(this._c),Re.scale(t,2,this._a),Re.scale(n,2,this._tempVector30),Re.subtract(this._a,this._tempVector30,this._a),Re.add(this._a,e,this._a),Re.add(this._a,i,this._a),Re.scale(n,3,this._b),Re.scale(t,3,this._tempVector30),Re.subtract(this._b,this._tempVector30,this._b),Re.subtract(this._b,i,this._b),Re.scale(e,2,this._tempVector30),Re.subtract(this._b,this._tempVector30,this._b);},e.Slerp=function(t,e){Re.scale(this._a,t*t*t,this._tempVector30),Re.scale(this._b,t*t,this._tempVector31),Re.scale(this._c,t,this._tempVector32),Re.add(this._tempVector30,this._tempVector31,e),Re.add(e,this._tempVector32,e),Re.add(e,this._d,e);},t;}(),H=function(){function t(t,e,n,i){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=t,this._h=e,this._minHeight=n,this._maxHeight=i;}
r(t,"laya.d3.core.HeightMap");var e=t.prototype;return e._inBounds=function(t,e){return t>=0&&t<this._h&&e>=0&&e<this._w;},e.getHeight=function(t,e){return this._inBounds(t,e)?this._datas[t][e]:NaN;},a(0,e,"width",function(){return this._w;}),a(0,e,"height",function(){return this._h;}),a(0,e,"maxHeight",function(){return this._maxHeight;}),a(0,e,"minHeight",function(){return this._minHeight;}),t.creatFromMesh=function(e,n,i,r){for(var a=[],o=[],s=e.getSubMeshCount(),l=0;l<s;l++){for(var u=e.getSubMesh(l),h=u._getVertexBuffer(),c=h.getData(),_=[],f=0;f<c.length;f+=h.vertexDeclaration.vertexStride/4){var d=new Re(c[f+0],c[f+1],c[f+2]);_.push(d);}
a.push(_);var p=u._getIndexBuffer();o.push(p.getData());}
var m=e.boundingBox,g=m.min.x,y=m.min.z,v=m.max.x,I=m.max.z,x=m.min.y,T=m.max.y,S=v-g,b=I-y,w=r.elements[0]=S/(n-1),D=r.elements[1]=b/(i-1),C=new t(n,i,x,T),E=t._tempRay,P=E.direction.elements;P[0]=0,P[1]=-1,P[2]=0;var M=T+.1;E.origin.elements[1]=M;for(var A=0;A<i;A++){var O=y+A*D;C._datas[A]=[];for(var R=0;R<n;R++){var L=g+R*w,F=E.origin.elements;F[0]=L,F[2]=O;var V=t._getPosition(E,a,o);C._datas[A][R]=V===Number.MAX_VALUE?NaN:M-V;}}
return C;},t.createFromImage=function(e,n,i){for(var r=e.width,a=e.height,o=new t(r,a,n,i),s=(i-n)/254,l=e.getPixels(),u=0,h=0;h<a;h++){for(var c=o._datas[h]=[],_=0;_<r;_++){var f=l[u++],d=l[u++],p=l[u++],m=l[u++];c[_]=255==f&&255==d&&255==p&&255==m?NaN:(f+d+p)/3*s+n;}}
return o;},t._getPosition=function(t,e,n){for(var i=Number.MAX_VALUE,r=0;r<e.length;r++){for(var a=e[r],o=n[r],s=0;s<o.length;s+=3){var l=a[o[s+0]],u=a[o[s+1]],h=a[o[s+2]],c=Xe.rayIntersectsTriangle(t,l,u,h);!isNaN(c)&&c<i&&(i=c);}}
return i;},i(t,["_tempRay",function(){return this._tempRay=new Ae(new Re(),new Re());}]),t;}(),z=function(){function t(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[];}
r(t,"laya.d3.core.Layer");var e=t.prototype;return e._binarySearchIndex=function(){for(var e=0,n=t._collsionTestList.length-1,i=0;e<=n;){i=Math.floor((e+n)/2);var r=t._collsionTestList[i];if(r==this._number)return i;r>this._number?n=i-1:e=i+1;}
return e;},e._addCollider=function(e){0===this._colliders.length&&t._collsionTestList.splice(this._binarySearchIndex(),0,this._number),e._isRigidbody?(this._colliders.unshift(e),this._nonRigidbodyOffset++):this._colliders.push(e);},e._removeCollider=function(e){var n=this._colliders.indexOf(e);n<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(n,1),0===this._colliders.length&&t._collsionTestList.splice(t._collsionTestList.indexOf(this._number),1);},a(0,e,"number",function(){return this._number;}),a(0,e,"visible",function(){return this._visible;},function(e){this._visible=e,t._visibleLayers=e?t._visibleLayers|this.mask:t._visibleLayers&~this.mask;}),a(0,e,"mask",function(){return this._mask;}),a(1,t,"visibleLayers",function(){return t._visibleLayers;},function(e){t._visibleLayers=e;for(var n=0,i=t._layerList.length;n<i;n++){var r=t._layerList[n];r._visible=0!=(r._mask&t._visibleLayers);}}),t.__init__=function(){t._layerList.length=31;for(var e=0;e<31;e++){var n=new t();t._layerList[e]=n,0===e?(n.name="Default Layer",n.visible=!0):(n.name="Layer-"+e,n.visible=!1),n._number=e,n._mask=Math.pow(2,e);}
t.currentCreationLayer=t._layerList[0];},t.getLayerByNumber=function(e){if(e<0||e>30)throw new Error("无法返回指定Layer，该number超出范围！");return t._layerList[e];},t.getLayerByName=function(e){for(var n=0;n<31;n++){if(t._layerList[n].name===e)return t._layerList[n];}
throw new Error("无法返回指定Layer,该name不存在");},t.isVisible=function(e){return 0!=(e&t._currentCameraCullingMask&t._visibleLayers);},t._layerList=[],t._visibleLayers=2147483647,t._collsionTestList=[],t._currentCameraCullingMask=2147483647,t.maxCount=31,t.currentCreationLayer=null,t;}(),j=function(){function t(t,e,n){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=t,this._minCount=e,this._maxCount=n;}
r(t,"laya.d3.core.particleShuriKen.module.Burst");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.cloneTo=function(t){var e=t;e._time=this._time,e._minCount=this._minCount,e._maxCount=this._maxCount;},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},a(0,e,"time",function(){return this._time;}),a(0,e,"minCount",function(){return this._minCount;}),a(0,e,"maxCount",function(){return this._maxCount;}),t;}(),W=function(){function t(t){this._color=null,this.enbale=!1,this._color=t;}
r(t,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var e=t.prototype;return e.cloneTo=function(t){var e=t;this._color.cloneTo(e._color),e.enbale=this.enbale;},e.clone=function(){var t;switch(this._color.type){case 0:t=q.createByConstant(this._color.constant.clone());break;case 1:t=q.createByGradient(this._color.gradient.clone());break;case 2:t=q.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:t=q.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone());}
var e=new this.constructor(t);return e.enbale=this.enbale,e;},a(0,e,"color",function(){return this._color;}),t;}(),K=function(){function t(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[];}
r(t,"laya.d3.core.particleShuriKen.module.Emission");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),e._destroy=function(){this._bursts=null,this._destroyed=!0;},e.getBurstsCount=function(){return this._bursts.length;},e.getBurstByIndex=function(t){return this._bursts[t];},e.addBurst=function(t){var e=this._bursts.length;if(e>0)for(var n=0;n<e;n++){this._bursts[n].time>t.time&&this._bursts.splice(n,0,t);}
this._bursts.push(t);},e.removeBurst=function(t){var e=this._bursts.indexOf(t);-1!==e&&this._bursts.splice(e,1);},e.removeBurstByIndex=function(t){this._bursts.splice(t,1);},e.clearBurst=function(){this._bursts.length=0;},e.cloneTo=function(t){var e=t,n=e._bursts;n.length=this._bursts.length;for(var i=0,r=this._bursts.length;i<r;i++){var a=n[i];a?this._bursts[i].cloneTo(a):n[i]=this._bursts[i].clone();}
e._emissionRate=this._emissionRate,e.enbale=this.enbale;},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},a(0,e,"destroyed",function(){return this._destroyed;}),a(0,e,"emissionRate",function(){return this._emissionRate;},function(t){if(t<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=t;}),t;}(),X=function(){function t(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null;}
r(t,"laya.d3.core.particleShuriKen.module.FrameOverTime");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.cloneTo=function(t){var e=t;e._type=this._type,e._constant=this._constant,this._overTime.cloneTo(e._overTime),e._constantMin=this._constantMin,e._constantMax=this._constantMax,this._overTimeMin.cloneTo(e._overTimeMin),this._overTimeMax.cloneTo(e._overTimeMax);},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},a(0,e,"frameOverTimeData",function(){return this._overTime;}),a(0,e,"constant",function(){return this._constant;}),a(0,e,"type",function(){return this._type;}),a(0,e,"frameOverTimeDataMin",function(){return this._overTimeMin;}),a(0,e,"constantMin",function(){return this._constantMin;}),a(0,e,"frameOverTimeDataMax",function(){return this._overTimeMax;}),a(0,e,"constantMax",function(){return this._constantMax;}),t.createByConstant=function(e){var n=new t();return n._type=0,n._constant=e,n;},t.createByOverTime=function(e){var n=new t();return n._type=1,n._overTime=e,n;},t.createByRandomTwoConstant=function(e,n){var i=new t();return i._type=2,i._constantMin=e,i._constantMax=n,i;},t.createByRandomTwoOverTime=function(e,n){var i=new t();return i._type=3,i._overTimeMin=e,i._overTimeMax=n,i;},t;}(),Y=function(){function t(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null;}
r(t,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.cloneTo=function(t){var e=t;e._type=this._type,e._separateAxes=this._separateAxes,e._constant=this._constant,this._constantSeparate.cloneTo(e._constantSeparate),this._gradient.cloneTo(e._gradient),this._gradientX.cloneTo(e._gradientX),this._gradientY.cloneTo(e._gradientY),this._gradientZ.cloneTo(e._gradientZ),e._constantMin=this._constantMin,e._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(e._constantMinSeparate),this._constantMaxSeparate.cloneTo(e._constantMaxSeparate),this._gradientMin.cloneTo(e._gradientMin),this._gradientMax.cloneTo(e._gradientMax),this._gradientXMin.cloneTo(e._gradientXMin),this._gradientXMax.cloneTo(e._gradientXMax),this._gradientYMin.cloneTo(e._gradientYMin),this._gradientYMax.cloneTo(e._gradientYMax),this._gradientZMin.cloneTo(e._gradientZMin),this._gradientZMax.cloneTo(e._gradientZMax);},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},a(0,e,"gradientZ",function(){return this._gradientZ;}),a(0,e,"constant",function(){return this._constant;}),a(0,e,"gradient",function(){return this._gradient;}),a(0,e,"separateAxes",function(){return this._separateAxes;}),a(0,e,"type",function(){return this._type;}),a(0,e,"constantSeparate",function(){return this._constantSeparate;}),a(0,e,"gradientX",function(){return this._gradientX;}),a(0,e,"gradientY",function(){return this._gradientY;}),a(0,e,"gradientW",function(){return this._gradientW;}),a(0,e,"gradientMin",function(){return this._gradientMin;}),a(0,e,"constantMin",function(){return this._constantMin;}),a(0,e,"gradientMax",function(){return this._gradientMax;}),a(0,e,"constantMax",function(){return this._constantMax;}),a(0,e,"gradientWMin",function(){return this._gradientWMin;}),a(0,e,"constantMinSeparate",function(){return this._constantMinSeparate;}),a(0,e,"constantMaxSeparate",function(){return this._constantMaxSeparate;}),a(0,e,"gradientXMin",function(){return this._gradientXMin;}),a(0,e,"gradientXMax",function(){return this._gradientXMax;}),a(0,e,"gradientWMax",function(){return this._gradientWMax;}),a(0,e,"gradientYMin",function(){return this._gradientYMin;}),a(0,e,"gradientYMax",function(){return this._gradientYMax;}),a(0,e,"gradientZMin",function(){return this._gradientZMin;}),a(0,e,"gradientZMax",function(){return this._gradientZMax;}),t.createByConstant=function(e){var n=new t();return n._type=0,n._separateAxes=!1,n._constant=e,n;},t.createByConstantSeparate=function(e){var n=new t();return n._type=0,n._separateAxes=!0,n._constantSeparate=e,n;},t.createByGradient=function(e){var n=new t();return n._type=1,n._separateAxes=!1,n._gradient=e,n;},t.createByGradientSeparate=function(e,n,i,r){var a=new t();return a._type=1,a._separateAxes=!0,a._gradientX=e,a._gradientY=n,a._gradientZ=i,a._gradientW=r,a;},t.createByRandomTwoConstant=function(e,n){var i=new t();return i._type=2,i._separateAxes=!1,i._constantMin=e,i._constantMax=n,i;},t.createByRandomTwoConstantSeparate=function(e,n){var i=new t();return i._type=2,i._separateAxes=!0,i._constantMinSeparate=e,i._constantMaxSeparate=n,i;},t.createByRandomTwoGradient=function(e,n){var i=new t();return i._type=3,i._separateAxes=!1,i._gradientMin=e,i._gradientMax=n,i;},t.createByRandomTwoGradientSeparate=function(e,n,i,r,a,o,s,l){var u=new t();return u._type=3,u._separateAxes=!0,u._gradientXMin=e,u._gradientXMax=n,u._gradientYMin=i,u._gradientYMax=r,u._gradientZMin=a,u._gradientZMax=o,u._gradientWMin=s,u._gradientWMax=l,u;},t;}(),q=function(){function t(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null;}
r(t,"laya.d3.core.particleShuriKen.module.GradientColor");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.cloneTo=function(t){var e=t;e._type=this._type,this._constant.cloneTo(e._constant),this._constantMin.cloneTo(e._constantMin),this._constantMax.cloneTo(e._constantMax),this._gradient.cloneTo(e._gradient),this._gradientMin.cloneTo(e._gradientMin),this._gradientMax.cloneTo(e._gradientMax);},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},a(0,e,"gradient",function(){return this._gradient;}),a(0,e,"constant",function(){return this._constant;}),a(0,e,"type",function(){return this._type;}),a(0,e,"gradientMin",function(){return this._gradientMin;}),a(0,e,"constantMin",function(){return this._constantMin;}),a(0,e,"gradientMax",function(){return this._gradientMax;}),a(0,e,"constantMax",function(){return this._constantMax;}),t.createByConstant=function(e){var n=new t();return n._type=0,n._constant=e,n;},t.createByGradient=function(e){var n=new t();return n._type=1,n._gradient=e,n;},t.createByRandomTwoConstant=function(e,n){var i=new t();return i._type=2,i._constantMin=e,i._constantMax=n,i;},t.createByRandomTwoGradient=function(e,n){var i=new t();return i._type=3,i._gradientMin=e,i._gradientMax=n,i;},t;}(),Z=function(){function t(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16);}
r(t,"laya.d3.core.particleShuriKen.module.GradientDataColor");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.addAlpha=function(t,e){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==t&&(t=1,console.log("GradientDataColor warning:the forth key is  be force set to 1.")),this._alphaElements[this._alphaCurrentLength++]=t,this._alphaElements[this._alphaCurrentLength++]=e):console.log("GradientDataColor warning:data count must lessEqual than 4");},e.addRGB=function(t,e){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==t&&(t=1,console.log("GradientDataColor warning:the forth key is  be force set to 1.")),this._rgbElements[this._rgbCurrentLength++]=t,this._rgbElements[this._rgbCurrentLength++]=e.x,this._rgbElements[this._rgbCurrentLength++]=e.y,this._rgbElements[this._rgbCurrentLength++]=e.z):console.log("GradientDataColor warning:data count must lessEqual than 4");},e.cloneTo=function(t){var e=t,n=0,i=0;e._alphaCurrentLength=this._alphaCurrentLength;var r=e._alphaElements;for(n=0,i=this._alphaElements.length;n<i;n++){r[n]=this._alphaElements[n];}
e._rgbCurrentLength=this._rgbCurrentLength;var a=e._rgbElements;for(n=0,i=this._rgbElements.length;n<i;n++){a[n]=this._rgbElements[n];}},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},a(0,e,"alphaGradientCount",function(){return this._alphaCurrentLength/2;}),a(0,e,"rgbGradientCount",function(){return this._rgbCurrentLength/4;}),t;}(),J=function(){function t(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8);}
r(t,"laya.d3.core.particleShuriKen.module.GradientDataInt");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.add=function(t,e){this._currentLength<8?(6===this._currentLength&&1!==t&&(t=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=t,this._elements[this._currentLength++]=e):console.log("Warning:data count must lessEqual than 4");},e.cloneTo=function(t){var e=t;e._currentLength=this._currentLength;var n=e._elements;for(var i=0,r=this._elements.length;i<r;i++){n[i]=this._elements[i];}},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},a(0,e,"gradientCount",function(){return this._currentLength/2;}),t;}(),$=function(){function t(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8);}
r(t,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.add=function(t,e){this._currentLength<8?(6===this._currentLength&&1!==t&&(t=1,console.log("GradientDataNumber warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=t,this._elements[this._currentLength++]=e):console.log("GradientDataNumber warning:data count must lessEqual than 4");},e.getKeyByIndex=function(t){return this._elements[2*t];},e.getValueByIndex=function(t){return this._elements[2*t+1];},e.getAverageValue=function(){for(var t=0,e=this._currentLength-2;t<e;t+=2){this._elements[t+1];this._elements[t+3],this._elements[t+2]-this._elements[t];}
return 0;},e.cloneTo=function(t){var e=t;e._currentLength=this._currentLength;var n=e._elements;for(var i=0,r=this._elements.length;i<r;i++){n[i]=this._elements[i];}},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},a(0,e,"gradientCount",function(){return this._currentLength/2;}),t;}(),Q=(function(){function t(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12);}
r(t,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var e=t.prototype;n.imps(e,{"laya.d3.core.IClone":!0}),e.add=function(t,e){this._currentLength<8?(6===this._currentLength&&1!==t&&(t=1,console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=t,this._elements[this._currentLength++]=e.x,this._elements[this._currentLength++]=e.y):console.log("GradientDataVector2 warning:data count must lessEqual than 4");},e.cloneTo=function(t){var e=t;e._currentLength=this._currentLength;var n=e._elements;n.length=this._elements.length;for(var i=0,r=this._elements.length;i<r;i++){n[i]=this._elements[i];}},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},a(0,e,"gradientCount",function(){return this._currentLength/3;});}(),function(){function t(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null;}
r(t,"laya.d3.core.particleShuriKen.module.GradientSize");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.getMaxSizeInGradient=function(){var t=0,e=0,n=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(t=0,e=this._gradientX.gradientCount;t<e;t++){n=Math.max(n,this._gradientX.getValueByIndex(t));}
for(t=0,e=this._gradientY.gradientCount;t<e;t++){n=Math.max(n,this._gradientY.getValueByIndex(t));}}else for(t=0,e=this._gradient.gradientCount;t<e;t++){n=Math.max(n,this._gradient.getValueByIndex(t));}
break;case 1:this._separateAxes?(n=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),n=Math.max(n,this._constantMinSeparate.y),n=Math.max(n,this._constantMaxSeparate.y)):n=Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(t=0,e=this._gradientXMin.gradientCount;t<e;t++){n=Math.max(n,this._gradientXMin.getValueByIndex(t));}
for(t=0,e=this._gradientXMax.gradientCount;t<e;t++){n=Math.max(n,this._gradientXMax.getValueByIndex(t));}
for(t=0,e=this._gradientYMin.gradientCount;t<e;t++){n=Math.max(n,this._gradientYMin.getValueByIndex(t));}
for(t=0,e=this._gradientZMax.gradientCount;t<e;t++){n=Math.max(n,this._gradientZMax.getValueByIndex(t));}}else{for(t=0,e=this._gradientMin.gradientCount;t<e;t++){n=Math.max(n,this._gradientMin.getValueByIndex(t));}
for(t=0,e=this._gradientMax.gradientCount;t<e;t++){n=Math.max(n,this._gradientMax.getValueByIndex(t));}}}
return n;},e.cloneTo=function(t){var e=t;e._type=this._type,e._separateAxes=this._separateAxes,this._gradient.cloneTo(e._gradient),this._gradientX.cloneTo(e._gradientX),this._gradientY.cloneTo(e._gradientY),this._gradientZ.cloneTo(e._gradientZ),e._constantMin=this._constantMin,e._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(e._constantMinSeparate),this._constantMaxSeparate.cloneTo(e._constantMaxSeparate),this._gradientMin.cloneTo(e._gradientMin),this._gradientMax.cloneTo(e._gradientMax),this._gradientXMin.cloneTo(e._gradientXMin),this._gradientXMax.cloneTo(e._gradientXMax),this._gradientYMin.cloneTo(e._gradientYMin),this._gradientYMax.cloneTo(e._gradientYMax),this._gradientZMin.cloneTo(e._gradientZMin),this._gradientZMax.cloneTo(e._gradientZMax);},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},a(0,e,"gradientZ",function(){return this._gradientZ;}),a(0,e,"gradient",function(){return this._gradient;}),a(0,e,"separateAxes",function(){return this._separateAxes;}),a(0,e,"type",function(){return this._type;}),a(0,e,"gradientMin",function(){return this._gradientMin;}),a(0,e,"constantMin",function(){return this._constantMin;}),a(0,e,"gradientX",function(){return this._gradientX;}),a(0,e,"gradientY",function(){return this._gradientY;}),a(0,e,"gradientMax",function(){return this._gradientMax;}),a(0,e,"constantMax",function(){return this._constantMax;}),a(0,e,"constantMinSeparate",function(){return this._constantMinSeparate;}),a(0,e,"constantMaxSeparate",function(){return this._constantMaxSeparate;}),a(0,e,"gradientXMin",function(){return this._gradientXMin;}),a(0,e,"gradientXMax",function(){return this._gradientXMax;}),a(0,e,"gradientYMin",function(){return this._gradientYMin;}),a(0,e,"gradientYMax",function(){return this._gradientYMax;}),a(0,e,"gradientZMin",function(){return this._gradientZMin;}),a(0,e,"gradientZMax",function(){return this._gradientZMax;}),t.createByGradient=function(e){var n=new t();return n._type=0,n._separateAxes=!1,n._gradient=e,n;},t.createByGradientSeparate=function(e,n,i){var r=new t();return r._type=0,r._separateAxes=!0,r._gradientX=e,r._gradientY=n,r._gradientZ=i,r;},t.createByRandomTwoConstant=function(e,n){var i=new t();return i._type=1,i._separateAxes=!1,i._constantMin=e,i._constantMax=n,i;},t.createByRandomTwoConstantSeparate=function(e,n){var i=new t();return i._type=1,i._separateAxes=!0,i._constantMinSeparate=e,i._constantMaxSeparate=n,i;},t.createByRandomTwoGradient=function(e,n){var i=new t();return i._type=2,i._separateAxes=!1,i._gradientMin=e,i._gradientMax=n,i;},t.createByRandomTwoGradientSeparate=function(e,n,i,r,a,o){var s=new t();return s._type=2,s._separateAxes=!0,s._gradientXMin=e,s._gradientXMax=n,s._gradientYMin=i,s._gradientYMax=r,s._gradientZMin=a,s._gradientZMax=o,s;},t;}()),tt=function(){function t(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null;}
r(t,"laya.d3.core.particleShuriKen.module.GradientVelocity");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.cloneTo=function(t){var e=t;e._type=this._type,this._constant.cloneTo(e._constant),this._gradientX.cloneTo(e._gradientX),this._gradientY.cloneTo(e._gradientY),this._gradientZ.cloneTo(e._gradientZ),this._constantMin.cloneTo(e._constantMin),this._constantMax.cloneTo(e._constantMax),this._gradientXMin.cloneTo(e._gradientXMin),this._gradientXMax.cloneTo(e._gradientXMax),this._gradientYMin.cloneTo(e._gradientYMin),this._gradientYMax.cloneTo(e._gradientYMax),this._gradientZMin.cloneTo(e._gradientZMin),this._gradientZMax.cloneTo(e._gradientZMax);},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},a(0,e,"gradientZ",function(){return this._gradientZ;}),a(0,e,"constant",function(){return this._constant;}),a(0,e,"type",function(){return this._type;}),a(0,e,"gradientXMax",function(){return this._gradientXMax;}),a(0,e,"constantMin",function(){return this._constantMin;}),a(0,e,"gradientX",function(){return this._gradientX;}),a(0,e,"gradientY",function(){return this._gradientY;}),a(0,e,"gradientXMin",function(){return this._gradientXMin;}),a(0,e,"constantMax",function(){return this._constantMax;}),a(0,e,"gradientYMin",function(){return this._gradientYMin;}),a(0,e,"gradientYMax",function(){return this._gradientYMax;}),a(0,e,"gradientZMin",function(){return this._gradientZMin;}),a(0,e,"gradientZMax",function(){return this._gradientZMax;}),t.createByConstant=function(e){var n=new t();return n._type=0,n._constant=e,n;},t.createByGradient=function(e,n,i){var r=new t();return r._type=1,r._gradientX=e,r._gradientY=n,r._gradientZ=i,r;},t.createByRandomTwoConstant=function(e,n){var i=new t();return i._type=2,i._constantMin=e,i._constantMax=n,i;},t.createByRandomTwoGradient=function(e,n,i,r,a,o){var s=new t();return s._type=3,s._gradientXMin=e,s._gradientXMax=n,s._gradientYMin=i,s._gradientYMax=r,s._gradientZMin=a,s._gradientZMax=o,s;},t;}(),et=function(){function t(t){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=t;}
r(t,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.cloneTo=function(t){var e=t;this._angularVelocity.cloneTo(e._angularVelocity),e.enbale=this.enbale;},e.clone=function(){var t;switch(this._angularVelocity.type){case 0:t=this._angularVelocity.separateAxes?Y.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):Y.createByConstant(this._angularVelocity.constant);break;case 1:t=this._angularVelocity.separateAxes?Y.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):Y.createByGradient(this._angularVelocity.gradient.clone());break;case 2:t=this._angularVelocity.separateAxes?Y.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):Y.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:t=this._angularVelocity.separateAxes?Y.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):Y.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone());}
var e=new this.constructor(t);return e.enbale=this.enbale,e;},a(0,e,"angularVelocity",function(){return this._angularVelocity;}),t;}(),nt=function(){function t(){this.enable=!1,this.randomDirection=!1;}
r(t,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e._getShapeBoundBox=function(t){throw new Error("BaseShape: must override it.");},e._getSpeedBoundBox=function(t){throw new Error("BaseShape: must override it.");},e.generatePositionAndDirection=function(t,e,n,i){throw new Error("BaseShape: must override it.");},e._calculateProceduralBounds=function(t,e,n){this._getShapeBoundBox(t);var i=t.min,r=t.max;Re.multiply(i,e,i),Re.multiply(r,e,r);var a=new Ie(new Re(),new Re());this.randomDirection?(a.min=new Re(-1,-1,-1),a.max=new Re(1,1,1)):this._getSpeedBoundBox(a);var o=new Ie(new Re(),new Re()),s=o.min,l=o.max;Re.scale(a.min,n.y,s),Re.scale(a.max,n.y,l),Re.add(t.min,s,s),Re.add(t.max,l,l),Re.min(t.min,s,t.min),Re.max(t.max,s,t.max);var u=new Ie(new Re(),new Re()),h=u.min,c=u.max;Re.scale(a.min,n.x,h),Re.scale(a.max,n.x,c),Re.min(u.min,c,s),Re.max(u.min,c,l),Re.min(t.min,s,t.min),Re.max(t.max,s,t.max);},e.cloneTo=function(t){t.enable=this.enable;},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},t;}(),it=function(){function t(){}
return r(t,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),t._randomPointUnitArcCircle=function(t,e,n){var i=e.elements,r=NaN;r=n?n.getFloat()*t:Math.random()*t,i[0]=Math.cos(r),i[1]=Math.sin(r);},t._randomPointInsideUnitArcCircle=function(e,n,i){var r=n.elements;t._randomPointUnitArcCircle(e,n,i);var a=NaN;a=i?Math.pow(i.getFloat(),.5):Math.pow(Math.random(),.5),r[0]=r[0]*a,r[1]=r[1]*a;},t._randomPointUnitCircle=function(t,e){var n=t.elements,i=NaN;i=e?e.getFloat()*Math.PI*2:Math.random()*Math.PI*2,n[0]=Math.cos(i),n[1]=Math.sin(i);},t._randomPointInsideUnitCircle=function(e,n){var i=e.elements;t._randomPointUnitCircle(e);var r=NaN;r=n?Math.pow(n.getFloat(),.5):Math.pow(Math.random(),.5),i[0]=i[0]*r,i[1]=i[1]*r;},t._randomPointUnitSphere=function(t,e){var n=t.elements,i=NaN,r=NaN;e?(i=n[2]=2*e.getFloat()-1,r=e.getFloat()*Math.PI*2):(i=n[2]=2*Math.random()-1,r=Math.random()*Math.PI*2);var a=Math.sqrt(1-i*i);n[0]=a*Math.cos(r),n[1]=a*Math.sin(r);},t._randomPointInsideUnitSphere=function(e,n){var i=e.elements;t._randomPointUnitSphere(e);var r=NaN;r=n?Math.pow(n.getFloat(),1/3):Math.pow(Math.random(),1/3),i[0]=i[0]*r,i[1]=i[1]*r,i[2]=i[2]*r;},t._randomPointInsideHalfUnitBox=function(t,e){var n=t.elements;e?(n[0]=e.getFloat()-.5,n[1]=e.getFloat()-.5,n[2]=e.getFloat()-.5):(n[0]=Math.random()-.5,n[1]=Math.random()-.5,n[2]=Math.random()-.5);},t;}(),rt=function(){function t(t){this._size=null,this.enbale=!1,this._size=t;}
r(t,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.cloneTo=function(t){var e=t;this._size.cloneTo(e._size),e.enbale=this.enbale;},e.clone=function(){var t;switch(this._size.type){case 0:t=this._size.separateAxes?Q.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):Q.createByGradient(this._size.gradient.clone());break;case 1:t=this._size.separateAxes?Q.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):Q.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:t=this._size.separateAxes?Q.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):Q.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone());}
var e=new this.constructor(t);return e.enbale=this.enbale,e;},a(0,e,"size",function(){return this._size;}),t;}(),at=function(){function t(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN;}
r(t,"laya.d3.core.particleShuriKen.module.StartFrame");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.cloneTo=function(t){var e=t;e._type=this._type,e._constant=this._constant,e._constantMin=this._constantMin,e._constantMax=this._constantMax;},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},a(0,e,"constant",function(){return this._constant;}),a(0,e,"type",function(){return this._type;}),a(0,e,"constantMin",function(){return this._constantMin;}),a(0,e,"constantMax",function(){return this._constantMax;}),t.createByConstant=function(e){var n=new t();return n._type=0,n._constant=e,n;},t.createByRandomTwoConstant=function(e,n){var i=new t();return i._type=1,i._constantMin=e,i._constantMax=n,i;},t;}(),ot=function(){function t(t,e){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new Oe(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=t,this._startFrame=e;}
r(t,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.cloneTo=function(t){var e=t;this.tiles.cloneTo(e.tiles),e.type=this.type,e.randomRow=this.randomRow,this._frame.cloneTo(e._frame),this._startFrame.cloneTo(e._startFrame),e.cycles=this.cycles,e.enableUVChannels=this.enableUVChannels,e.enable=this.enable;},e.clone=function(){var t;switch(this._frame.type){case 0:t=X.createByConstant(this._frame.constant);break;case 1:t=X.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:t=X.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:t=X.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone());}
var e;switch(this._startFrame.type){case 0:e=at.createByConstant(this._startFrame.constant);break;case 1:e=at.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax);}
var n=new this.constructor(t,e);return this.tiles.cloneTo(n.tiles),n.type=this.type,n.randomRow=this.randomRow,n.cycles=this.cycles,n.enableUVChannels=this.enableUVChannels,n.enable=this.enable,n;},a(0,e,"frame",function(){return this._frame;}),a(0,e,"startFrame",function(){return this._startFrame;}),t;}(),st=function(){function t(t){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=t;}
r(t,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.cloneTo=function(t){var e=t;this._velocity.cloneTo(e._velocity),e.enbale=this.enbale,e.space=this.space;},e.clone=function(){var t;switch(this._velocity.type){case 0:t=tt.createByConstant(this._velocity.constant.clone());break;case 1:t=tt.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:t=tt.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:t=tt.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone());}
var e=new this.constructor(t);return e.enbale=this.enbale,e.space=this.space,e;},a(0,e,"velocity",function(){return this._velocity;}),t;}(),lt=function(){function t(){}
return r(t,"laya.d3.core.particleShuriKen.ShurikenParticleData"),t._getStartLifetimeFromGradient=function(t,e){for(var n=1,i=t.gradientCount;n<i;n++){var r=t.getKeyByIndex(n);if(r>=e){var a=t.getKeyByIndex(n-1),o=(e-a)/(r-a);return x.lerp(t.getValueByIndex(n-1),t.getValueByIndex(n),o);}}
throw new Error("ShurikenParticleData: can't get value foam startLifeTimeGradient.");},t._randomInvertRoationArray=function(t,e,n,i,r){var a=NaN;i?(i.seed=r[6],a=i.getFloat(),r[6]=i.seed):a=Math.random(),a<n?(e[0]=-t[0],e[1]=-t[1],e[2]=-t[2]):(e[0]=t[0],e[1]=t[1],e[2]=t[2]);},t._randomInvertRoation=function(t,e,n,i){var r=NaN;return n?(n.seed=i[6],r=n.getFloat(),i[6]=n.seed):r=Math.random(),r<e&&(t=-t),t;},t.create=function(e,n,i){var r=e.autoRandomSeed,a=e._rand,o=e._randomSeeds;switch(e.startColorType){case 0:var s=e.startColorConstant.elements;t.startColor[0]=s[0],t.startColor[1]=s[1],t.startColor[2]=s[2],t.startColor[3]=s[3];break;case 2:r?x.lerpVector4(e.startColorConstantMin.elements,e.startColorConstantMax.elements,Math.random(),t.startColor):(a.seed=o[3],x.lerpVector4(e.startColorConstantMin.elements,e.startColorConstantMax.elements,a.getFloat(),t.startColor),o[3]=a.seed);}
var l=e.colorOverLifetime;if(l&&l.enbale){var u=l.color;switch(u.type){case 0:t.startColor[0]=t.startColor[0]*u.constant.x,t.startColor[1]=t.startColor[1]*u.constant.y,t.startColor[2]=t.startColor[2]*u.constant.z,t.startColor[3]=t.startColor[3]*u.constant.w;break;case 2:var h=NaN;r?h=Math.random():(a.seed=o[10],h=a.getFloat(),o[10]=a.seed);var c=u.constantMin,_=u.constantMax;t.startColor[0]=t.startColor[0]*x.lerp(c.x,_.x,h),t.startColor[1]=t.startColor[1]*x.lerp(c.y,_.y,h),t.startColor[2]=t.startColor[2]*x.lerp(c.z,_.z,h),t.startColor[3]=t.startColor[3]*x.lerp(c.w,_.w,h);}}
var f=t.startSize;switch(e.startSizeType){case 0:if(e.threeDStartSize){var d=e.startSizeConstantSeparate;f[0]=d.x,f[1]=d.y,f[2]=d.z;}else f[0]=f[1]=f[2]=e.startSizeConstant;break;case 2:if(e.threeDStartSize){var p=e.startSizeConstantMinSeparate,m=e.startSizeConstantMaxSeparate;r?(f[0]=x.lerp(p.x,m.x,Math.random()),f[1]=x.lerp(p.y,m.y,Math.random()),f[2]=x.lerp(p.z,m.z,Math.random())):(a.seed=o[4],f[0]=x.lerp(p.x,m.x,a.getFloat()),f[1]=x.lerp(p.y,m.y,a.getFloat()),f[2]=x.lerp(p.z,m.z,a.getFloat()),o[4]=a.seed);}else r?f[0]=f[1]=f[2]=x.lerp(e.startSizeConstantMin,e.startSizeConstantMax,Math.random()):(a.seed=o[4],f[0]=f[1]=f[2]=x.lerp(e.startSizeConstantMin,e.startSizeConstantMax,a.getFloat()),o[4]=a.seed);}
var g=e.sizeOverLifetime;if(g&&g.enbale&&1===g.size.type){var y=g.size;if(y.separateAxes)r?(f[0]=f[0]*x.lerp(y.constantMinSeparate.x,y.constantMaxSeparate.x,Math.random()),f[1]=f[1]*x.lerp(y.constantMinSeparate.y,y.constantMaxSeparate.y,Math.random()),f[2]=f[2]*x.lerp(y.constantMinSeparate.z,y.constantMaxSeparate.z,Math.random())):(a.seed=o[11],f[0]=f[0]*x.lerp(y.constantMinSeparate.x,y.constantMaxSeparate.x,a.getFloat()),f[1]=f[1]*x.lerp(y.constantMinSeparate.y,y.constantMaxSeparate.y,a.getFloat()),f[2]=f[2]*x.lerp(y.constantMinSeparate.z,y.constantMaxSeparate.z,a.getFloat()),o[11]=a.seed);else{var v=NaN;r?v=x.lerp(y.constantMin,y.constantMax,Math.random()):(a.seed=o[11],v=x.lerp(y.constantMin,y.constantMax,a.getFloat()),o[11]=a.seed),f[0]=f[0]*v,f[1]=f[1]*v,f[2]=f[2]*v;}}
var I=n.renderMode;if(1!==I)switch(e.startRotationType){case 0:if(e.threeDStartRotation){var T=e.startRotationConstantSeparate,S=t._tempVector30.elements;t._randomInvertRoationArray(T.elements,S,e.randomizeRotationDirection,r?null:a,o),t.startRotation[0]=S[0],t.startRotation[1]=S[1],t.startRotation[2]=4!==I?-S[2]:S[2];}else t.startRotation[0]=t._randomInvertRoation(e.startRotationConstant,e.randomizeRotationDirection,r?null:a,o);break;case 2:if(e.threeDStartRotation){var b=e.startRotationConstantMinSeparate,w=e.startRotationConstantMaxSeparate,D=t._tempVector30.elements;r?(D[0]=x.lerp(b.x,w.x,Math.random()),D[1]=x.lerp(b.y,w.y,Math.random()),D[2]=x.lerp(b.z,w.z,Math.random())):(a.seed=o[5],D[0]=x.lerp(b.x,w.x,a.getFloat()),D[1]=x.lerp(b.y,w.y,a.getFloat()),D[2]=x.lerp(b.z,w.z,a.getFloat()),o[5]=a.seed),t._randomInvertRoationArray(D,D,e.randomizeRotationDirection,r?null:a,o),t.startRotation[0]=D[0],t.startRotation[1]=D[1],t.startRotation[2]=4!==I?-D[2]:D[2];}else r?t.startRotation[0]=t._randomInvertRoation(x.lerp(e.startRotationConstantMin,e.startRotationConstantMax,Math.random()),e.randomizeRotationDirection,r?null:a,o):(a.seed=o[5],t.startRotation[0]=t._randomInvertRoation(x.lerp(e.startRotationConstantMin,e.startRotationConstantMax,a.getFloat()),e.randomizeRotationDirection,r?null:a,o),o[5]=a.seed);}
switch(e.startLifetimeType){case 0:t.startLifeTime=e.startLifetimeConstant;break;case 1:t.startLifeTime=t._getStartLifetimeFromGradient(e.startLifeTimeGradient,e.emissionTime);break;case 2:r?t.startLifeTime=x.lerp(e.startLifetimeConstantMin,e.startLifetimeConstantMax,Math.random()):(a.seed=o[7],t.startLifeTime=x.lerp(e.startLifetimeConstantMin,e.startLifetimeConstantMax,a.getFloat()),o[7]=a.seed);break;case 3:var C=e.emissionTime;r?t.startLifeTime=x.lerp(t._getStartLifetimeFromGradient(e.startLifeTimeGradientMin,C),t._getStartLifetimeFromGradient(e.startLifeTimeGradientMax,C),Math.random()):(a.seed=o[7],t.startLifeTime=x.lerp(t._getStartLifetimeFromGradient(e.startLifeTimeGradientMin,C),t._getStartLifetimeFromGradient(e.startLifeTimeGradientMax,C),a.getFloat()),o[7]=a.seed);}
switch(e.startSpeedType){case 0:t.startSpeed=e.startSpeedConstant;break;case 2:r?t.startSpeed=x.lerp(e.startSpeedConstantMin,e.startSpeedConstantMax,Math.random()):(a.seed=o[8],t.startSpeed=x.lerp(e.startSpeedConstantMin,e.startSpeedConstantMax,a.getFloat()),o[8]=a.seed);}
var E=e.textureSheetAnimation;if(E&&E.enable){var P=E.tiles,M=P.x,A=P.y,O=1/M,R=1/A,L=0,F=E.startFrame;switch(F.type){case 0:L=F.constant;break;case 1:r?L=x.lerp(F.constantMin,F.constantMax,Math.random()):(a.seed=o[14],L=x.lerp(F.constantMin,F.constantMax,a.getFloat()),o[14]=a.seed);}
var V=E.frame;switch(V.type){case 0:L+=V.constant;break;case 2:r?L+=x.lerp(V.constantMin,V.constantMax,Math.random()):(a.seed=o[15],L+=x.lerp(V.constantMin,V.constantMax,a.getFloat()),o[15]=a.seed);}
var N=0;switch(E.type){case 0:N=Math.floor(L/M);break;case 1:E.randomRow?r?N=Math.floor(Math.random()*A):(a.seed=o[13],N=Math.floor(a.getFloat()*A),o[13]=a.seed):N=E.rowIndex;}
var U=Math.floor(L%M);(t.startUVInfo=t.startUVInfo)[0]=O,t.startUVInfo[1]=R,t.startUVInfo[2]=U*O,t.startUVInfo[3]=N*R;}else(t.startUVInfo=t.startUVInfo)[0]=1,t.startUVInfo[1]=1,t.startUVInfo[2]=0,t.startUVInfo[3]=0;switch(e.simulationSpace){case 0:var G=i.position.elements;t.simulationWorldPostion[0]=G[0],t.simulationWorldPostion[1]=G[1],t.simulationWorldPostion[2]=G[2];var B=i.rotation.elements;t.simulationWorldRotation[0]=B[0],t.simulationWorldRotation[1]=B[1],t.simulationWorldRotation[2]=B[2],t.simulationWorldRotation[3]=B[3];break;case 1:break;default:throw new Error("ShurikenParticleMaterial: SimulationSpace value is invalid.");}},t.startLifeTime=NaN,t.startSpeed=NaN,i(t,["_tempVector30",function(){return this._tempVector30=new Re();},"_tempQuaternion",function(){return this._tempQuaternion=new Pe();},"startColor",function(){return this.startColor=new Float32Array(4);},"startSize",function(){return this.startSize=new Float32Array(3);},"startRotation",function(){return this.startRotation=new Float32Array(3);},"startUVInfo",function(){return this.startUVInfo=new Float32Array(4);},"simulationWorldPostion",function(){return this.simulationWorldPostion=new Float32Array(3);},"simulationWorldRotation",function(){return this.simulationWorldRotation=new Float32Array(4);}]),t;}(),ut=function(){function t(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new Be(),this._vb=qn.create(t._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=Yn.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=Un.nameKey.getID("LINE"),this._shaderCompile=cn._preCompileShader[this._sharderNameID];}
r(t,"laya.d3.core.PhasorSpriter3D");var e=t.prototype;return e.line=function(t,e,n,i){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(t.x,t.y,t.z,e.x,e.y,e.z,e.w),this.addVertex(n.x,n.y,n.z,i.x,i.y,i.z,i.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this;},e.circle=function(t,e,n,i,r,a){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*e,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/e,this._tempInt0++){this.addVertex(Math.sin(this._tempNumver0)*t,Math.cos(this._tempNumver0)*t,0,n,i,r,a),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));}
return this;},e.plane=function(t,e,n,i,r,a,o,s,l){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=i/2,this._tempNumver1=r/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(t-this._tempNumver0,e+this._tempNumver1,n,a,o,s,l),this.addVertex(t+this._tempNumver0,e+this._tempNumver1,n,a,o,s,l),this.addVertex(t-this._tempNumver0,e-this._tempNumver1,n,a,o,s,l),this.addVertex(t+this._tempNumver0,e-this._tempNumver1,n,a,o,s,l),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this;},e.box=function(t,e,n,i,r,a,o,s,l,u){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=i/2,this._tempNumver1=r/2,this._tempNumver2=a/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(t-this._tempNumver0,e+this._tempNumver1,n+this._tempNumver2,o,s,l,u),this.addVertex(t+this._tempNumver0,e+this._tempNumver1,n+this._tempNumver2,o,s,l,u),this.addVertex(t-this._tempNumver0,e-this._tempNumver1,n+this._tempNumver2,o,s,l,u),this.addVertex(t+this._tempNumver0,e-this._tempNumver1,n+this._tempNumver2,o,s,l,u),this.addVertex(t+this._tempNumver0,e+this._tempNumver1,n-this._tempNumver2,o,s,l,u),this.addVertex(t-this._tempNumver0,e+this._tempNumver1,n-this._tempNumver2,o,s,l,u),this.addVertex(t+this._tempNumver0,e-this._tempNumver1,n-this._tempNumver2,o,s,l,u),this.addVertex(t-this._tempNumver0,e-this._tempNumver1,n-this._tempNumver2,o,s,l,u),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this;},e.cone=function(t,e,n,i,r,a,o){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*n+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*n>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/n,this.addVertexIndex(0,e,0,i,r,a,o,this._tempUint0),this.addVertexIndex(0,0,0,i,r,a,o,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<n;this._tempInt1++){this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(t*this._tempNumver2,0,t*this._tempNumver3,i,r,a,o,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==n-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(t*this._tempNumver2,0,t*this._tempNumver3,i,r,a,o,this._tempUint0+(this._tempInt0+n)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==n-1?this.addIndexes(this._tempUint1+n+2):this.addIndexes(this._tempUint1+this._tempInt0+n+1),this.addIndexes(this._tempUint1+this._tempInt0+n),this._tempInt0++,this._tempNumver1+=this._tempNumver0;}
return this;},e.boundingBoxLine=function(t,e,n,i,r,a,o,s,l,u){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(t,r,a,o,s,l,u),this.addVertex(i,r,a,o,s,l,u),this.addVertex(t,e,a,o,s,l,u),this.addVertex(i,e,a,o,s,l,u),this.addVertex(i,r,n,o,s,l,u),this.addVertex(t,r,n,o,s,l,u),this.addVertex(i,e,n,o,s,l,u),this.addVertex(t,e,n,o,s,l,u),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this;},e.addVertex=function(t,e,n,i,r,a,o){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=t,this._vbData[this._posInVBData+1]=e,this._vbData[this._posInVBData+2]=n,this._vbData[this._posInVBData+3]=i,this._vbData[this._posInVBData+4]=r,this._vbData[this._posInVBData+5]=a,this._vbData[this._posInVBData+6]=o,this._posInVBData+=this._floatSizePerVer,this;},e.addVertexIndex=function(t,e,n,i,r,a,o,s){return this._hasBegun||this.addVertexIndexException(),this._vbData[s]=t,this._vbData[s+1]=e,this._vbData[s+2]=n,this._vbData[s+3]=i,this._vbData[s+4]=r,this._vbData[s+5]=a,this._vbData[s+6]=o,(s+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=s),this;},e.addIndexes=function(t){var e=arguments;this._hasBegun||this.addVertexIndexException();for(var n=0;n<e.length;n++){this._ibData[this._posInIBData]=e[n],this._posInIBData++;}
return this;},e.begin=function(t,e){return this._hasBegun&&this.beginException0(),1!==t&&4!==t&&this.beginException1(),this._primitiveType=t,this._camera=e,this._hasBegun=!0,this;},e.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this;},e.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(t._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),P.drawCall++,R.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0);},e.addVertexIndexException=function(){throw new Error("请先调用begin()函数");},e.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！");},e.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！");},e.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！");},e.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！");},e.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！");},i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(28,[new Ct(0,"vector3",0),new Ct(12,"vector4",1)]);}]),t;}(),ht=function(){function t(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++t._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new Be();}
r(t,"laya.d3.core.render.RenderElement");var e=t.prototype;return e.getDynamicBatchBakedVertexs=function(t){for(var e=this._renderObj._getVertexBuffer(t),n=e.getData().slice(),i=e.vertexDeclaration,r=i.getVertexElementByUsage(0).offset/4,a=i.getVertexElementByUsage(3).offset/4,o=this._sprite3D.transform,s=o.worldMatrix,l=o.rotation,u=i.vertexStride/4,h=0,c=n.length;h<c;h+=u){var _=h+r,f=h+a;Ze.transformVector3ArrayToVector3ArrayCoordinate(n,_,s,n,_),Ze.transformVector3ArrayByQuat(n,f,l,n,f);}
return n;},e.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData();},e._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this);},a(0,e,"id",function(){return this._id;}),a(0,e,"renderObj",function(){return this._renderObj;},function(t){this._renderObj!==t&&(this._renderObj=t);}),t._uniqueIDCounter=0,t;}(),ct=function(){function t(e){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++t._uniqueIDCounter,this._needSort=!1,this._scene=e,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[];}
r(t,"laya.d3.core.render.RenderQueue");var e=t.prototype;return e._sortOpaqueFunc=function(t,e){if(t._render&&e._render){var n=t._material.renderQueue-e._material.renderQueue;return 0===n?t._render._distanceForSort-e._render._distanceForSort:n;}
return 0;},e._sortAlphaFunc=function(t,e){if(t._render&&e._render){var n=t._material.renderQueue-e._material.renderQueue;return 0===n?e._render._distanceForSort-t._render._distanceForSort:n;}
return 0;},e._begainRenderElement=function(t,e,n){return!!e._beforeRender(t);},e._sortAlpha=function(e){t._cameraPosition=e,this._finalElements.sort(this._sortAlphaFunc);},e._sortOpaque=function(e){t._cameraPosition=e,this._finalElements.sort(this._sortOpaqueFunc);},e._preRender=function(t){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements);},e._render=function(t,e){for(var n,i,r,a,o,s,l=P.loopCount,u=this._scene,h=t.camera,c=(h.id,!1),_=0,f=this._finalElements.length;_<f;_++){var d,p,m,g=this._finalElements[_];if(null!=g._onPreRenderFunction&&g._onPreRenderFunction.call(g._sprite3D,t),0===g._type){if(t.owner=m=g._sprite3D,t.renderElement=g,m._preRenderUpdateComponents(t),d=g.renderObj,p=g._material,this._begainRenderElement(t,d,p)){if(n=d._getVertexBuffers(),i=d._getVertexBuffer(0),r=i.vertexDeclaration,a=t._shader=p._getShader(u._shaderDefineValue,r.shaderDefineValue,m._shaderDefineValue),c=a.bind()||l!==a._uploadLoopCount,n){if(a._uploadVertexBuffer!==n||c){for(var y=0;y<n.length;y++){var v=n[y];a.uploadAttributesX(v.vertexDeclaration.shaderValues.data,v);}
a._uploadVertexBuffer=n;}}else(a._uploadVertexBuffer!==i||c)&&(a.uploadAttributes(r.shaderValues.data,null),a._uploadVertexBuffer=i);(a._uploadScene!==u||c)&&(a.uploadSceneUniforms(u._shaderValues.data),a._uploadScene=u),(h!==a._uploadCamera||a._uploadSprite3D!==m||c)&&(a.uploadSpriteUniforms(m._shaderValues.data),a._uploadSprite3D=m),(h!==a._uploadCamera||c)&&(a.uploadCameraUniforms(h._shaderValues.data),a._uploadCamera=h),(a._uploadMaterial!==p||c)&&(p._upload(),a._uploadMaterial=p),o!==p?(p._setRenderStateBlendDepth(),p._setRenderStateFrontFace(e,m.transform),o=p,s=m):s!==m&&(p._setRenderStateFrontFace(e,m.transform),s=m),d._render(t),a._uploadLoopCount=l;}
m._postRenderUpdateComponents(t);}else if(2===g._type){g.renderObj;t.owner=m=g._sprite3D,t.renderElement=g,t._batchIndexStart=g._tempBatchIndexStart,t._batchIndexEnd=g._tempBatchIndexEnd,d=g.renderObj,p=g._material,this._begainRenderElement(t,d,p)&&(r=(i=d._getVertexBuffer(0)).vertexDeclaration,c=(a=t._shader=p._getShader(u._shaderDefineValue,r.shaderDefineValue,m._shaderDefineValue)).bind()||l!==a._uploadLoopCount,(a._uploadVertexBuffer!==i||c)&&(a.uploadAttributes(r.shaderValues.data,null),a._uploadVertexBuffer=i),(a._uploadScene!==u||c)&&(a.uploadSceneUniforms(u._shaderValues.data),a._uploadScene=u),(h!==a._uploadCamera||a._uploadSprite3D!==m||c)&&(a.uploadSpriteUniforms(m._shaderValues.data),a._uploadSprite3D=m),(h!==a._uploadCamera||c)&&(a.uploadCameraUniforms(h._shaderValues.data),a._uploadCamera=h),(a._uploadMaterial!==p||c)&&(p._upload(),a._uploadMaterial=p),o!==p?(p._setRenderStateBlendDepth(),p._setRenderStateFrontFace(e,m.transform),o=p,s=m):s!==m&&(p._setRenderStateFrontFace(e,m.transform),s=m),d._render(t),a._uploadLoopCount=l);}}},e._renderShadow=function(t,e){for(var n,i,r,a,o,s=P.loopCount,l=this._scene,u=t.camera,h=!1,c=0,_=this._finalElements.length;c<_;c++){var f,d,p,m=this._finalElements[c];0===m._type&&(t.owner=p=m._sprite3D,e||p._projectionViewWorldUpdateCamera===u&&p._projectionViewWorldUpdateLoopCount===P.loopCount||(p._render._renderUpdate(t._projectionViewMatrix),p._projectionViewWorldUpdateLoopCount=P.loopCount,p._projectionViewWorldUpdateCamera=u),t.renderElement=m,p._preRenderUpdateComponents(t),f=m.renderObj,d=m._material,this._begainRenderElement(t,f,null)&&(i=(n=f._getVertexBuffer(0)).vertexDeclaration,h=(r=t._shader=d._getShader(l._shaderDefineValue,i.shaderDefineValue,p._shaderDefineValue)).bind()||s!==r._uploadLoopCount,(r._uploadVertexBuffer!==n||h)&&(r.uploadAttributes(i.shaderValues.data,null),r._uploadVertexBuffer=n),(u!==r._uploadCamera||r._uploadSprite3D!==p||h)&&(r.uploadSpriteUniforms(p._shaderValues.data),r._uploadSprite3D=p),(u!==r._uploadCamera||h)&&(r.uploadCameraUniforms(u._shaderValues.data),r._uploadCamera=u),(r._uploadMaterial!==d||h)&&(d._upload(),r._uploadMaterial=d),r._uploadRenderElement,a!==d?(d._setRenderStateFrontFace(!1,p.transform),a=d,o=p):o!==p&&(d._setRenderStateFrontFace(!1,p.transform),o=p),f._render(t),r._uploadLoopCount=s),p._postRenderUpdateComponents(t));}},e._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0;},e._addRenderElement=function(t){this._renderElements.push(t),this._needSort=!0;},e._addDynamicBatchElement=function(t){this._dynamicBatchCombineRenderElements.push(t);},a(0,e,"id",function(){return this._id;}),t._uniqueIDCounter=0,t._cameraPosition=null,t;}(),_t=function(){function t(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null;}
return r(t,"laya.d3.core.render.RenderState"),t.clientWidth=0,t.clientHeight=0,t;}(),ft=function(){function t(t,e){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new Te(new Re(),0),this._corners=[new Re(),new Re(),new Re(),new Re(),new Re(),new Re(),new Re(),new Re()],this._boundingBoxCenter=new Re(),this._children=o(8),this._objects=[],this._tempBoundBoxCorners=[new Re(),new Re(),new Re(),new Re(),new Re(),new Re(),new Re(),new Re()],this._scene=t,this._currentDepth=e;}
r(t,"laya.d3.core.scene.OctreeNode");var e=t.prototype;return n.imps(e,{"laya.d3.core.scene.ITreeNode":!0}),e.init=function(t,e){var n=new Re(),i=new Re();Re.scale(e,-.5,n),Re.scale(e,.5,i),Re.add(n,t,n),Re.add(i,t,i),this.exactBox=new Ie(n,i),this.relaxBox=new Ie(n,i);},e.addTreeNode=function(t){1===Se.boxContainsBox(this._relaxBox,t.boundingBox)?this.addNodeDown(t,0):this.addObject(t);},e.addChild=function(e){var n=this._children[e];if(null==n){n=new t(this._scene,this._currentDepth+1),this._children[e]=n,n._parent=this,Re.subtract(this._exactBox.max,this._exactBox.min,t.tempSize),Re.multiply(t.tempSize,t._octreeSplit[e],t.tempCenter),Re.add(this._exactBox.min,t.tempCenter,t.tempCenter),Re.scale(t.tempSize,.25,t.tempSize);var i=new Re(),r=new Re();Re.subtract(t.tempCenter,t.tempSize,i),Re.add(t.tempCenter,t.tempSize,r),n.exactBox=new Ie(i,r),Re.scale(t.tempSize,t.relax,t.tempSize);var a=new Re(),o=new Re();Re.subtract(t.tempCenter,t.tempSize,a),Re.add(t.tempCenter,t.tempSize,o),n.relaxBox=new Ie(a,o);}
return n;},e.addObject=function(t){t._treeNode=this,this._objects.push(t);},e.removeObject=function(t){if(t._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var e=this._objects.indexOf(t);return-1!==e&&(this._objects.splice(e,1),!0);},e.clearObject=function(){this._objects.length=0;},e.addNodeUp=function(t,e){this._parent&&1!==Se.boxContainsBox(this._exactBox,t.boundingBox)?this._parent.addNodeUp(t,e-1):this.addNodeDown(t,e);},e.addNodeDown=function(t,e){if(e<this._scene.treeLevel){var n=this.inChildIndex(t.boundingBoxCenter),i=this.addChild(n);1===Se.boxContainsBox(i._relaxBox,t.boundingBox)?i.addNodeDown(t,++e):this.addObject(t);}else this.addObject(t);},e.inChildIndex=function(t){return 4*(t.z<this._boundingBoxCenter.z?0:1)+2*(t.y<this._boundingBoxCenter.y?0:1)+(t.x<this._boundingBoxCenter.x?0:1);},e.updateObject=function(t){1===Se.boxContainsBox(this._relaxBox,t.boundingBox)?(this.removeObject(t),t._treeNode=null,this.addNodeDown(t,this._currentDepth)):this._parent&&(this.removeObject(t),t._treeNode=null,this._parent.addNodeUp(t,this._currentDepth-1));},e.cullingObjects=function(t,e,n,i,r){var a=0,o=0,s=0,l=0,u=this._scene._dynamicBatchManager;for(a=0,s=this._objects.length;a<s;a++){var h=this._objects[a];if(z.isVisible(h._owner.layer.mask)&&h.enable){if(e&&(P.treeSpriteCollision+=1,0===t.containsBoundSphere(h.boundingSphere)))continue;h._renderUpdate(r),h._distanceForSort=Re.distance(h.boundingSphere.center,i)+h.sortingFudge;var c=h._renderElements;for(o=0,l=c.length;o<l;o++){var _=c[o],f=_._staticBatch;if(f&&f._material===_._material)f._addBatchRenderElement(_);else{var d=_.renderObj;d.triangleCount<10&&1===d._vertexBufferCount&&d._getIndexBuffer()&&_._material.renderQueue<2&&_._canDynamicBatch&&!h._owner.isStatic?u._addPrepareRenderElement(_):this._scene.getRenderQueue(_._material.renderQueue)._addRenderElement(_);}}}}
for(a=0;a<8;a++){var p=this._children[a];if(null!=p){var m=e;if(e){var g=t.containsBoundBox(p._relaxBox);if(P.treeNodeCollision+=1,0===g)continue;m=2===g;}
p.cullingObjects(t,m,n,i,r);}}},e.cullingShadowObjects=function(t,e,n,i,r){var a=0,o=0,s=0,l=0;this._scene._dynamicBatchManager;for(a=0,s=this._objects.length;a<s;a++){var u=this._objects[a];if(u.castShadow&&z.isVisible(u._owner.layer.mask)&&u.enable){if(n&&0===t[0].containsBoundSphere(u.boundingSphere))continue;for(var h=1,c=t.length;h<c;h++){var _=e[h-1];if(0!==t[h].containsBoundSphere(u.boundingSphere)){var f=u._renderElements;for(o=0,l=f.length;o<l;o++){_._addRenderElement(f[o]);}}}}}
for(a=0;a<8;a++){var d=this._children[a];if(null!=d){var p=n;if(n){var m=t[0].containsBoundBox(d._relaxBox);if(0===m)continue;p=2===m;}
d.cullingShadowObjects(t,e,p,i,r);}}},e.cullingShadowObjectsOnePSSM=function(t,e,n,i,r,a){var o=e[0],s=0,l=0,u=0,h=0;for(s=0,u=this._objects.length;s<u;s++){var c=this._objects[s];if(c.castShadow&&z.isVisible(c._owner.layer.mask)&&c.enable){if(i&&0===t.containsBoundSphere(c.boundingSphere))continue;c._renderUpdate(n);var _=c._renderElements;for(l=0,h=_.length;l<h;l++){o._addRenderElement(_[l]);}}}
for(s=0;s<8;s++){var f=this._children[s];if(null!=f){var d=i;if(i){var p=t.containsBoundBox(f._relaxBox);if(0===p)continue;d=2===p;}
f.cullingShadowObjectsOnePSSM(t,e,n,d,r,a);}}},e.renderBoudingBox=function(t){this._renderBoudingBox(t);for(var e=0;e<8;++e){var n=this._children[e];n&&n.renderBoudingBox(t);}},e.buildAllChild=function(t){if(t<this._scene.treeLevel)for(var e=0;e<8;e++){this.addChild(e).buildAllChild(t+1);}},e._renderBoudingBox=function(t){},a(0,e,"exactBox",function(){return this._exactBox;},function(t){this._exactBox=t,Re.add(t.min,t.max,this._boundingBoxCenter),Re.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter);}),a(0,e,"relaxBox",function(){return this._relaxBox;},function(t){this._relaxBox=t,t.getCorners(this._corners),Te.createfromPoints(this._corners,this._boundingSphere);}),t.debugMode=!1,t.relax=1.15,t.CHILDNUM=8,i(t,["tempVector0",function(){return this.tempVector0=new Re();},"tempSize",function(){return this.tempSize=new Re();},"tempCenter",function(){return this.tempCenter=new Re();},"_octreeSplit",function(){return this._octreeSplit=[new Re(.25,.25,.25),new Re(.75,.25,.25),new Re(.25,.75,.25),new Re(.75,.75,.25),new Re(.25,.25,.75),new Re(.75,.25,.75),new Re(.25,.75,.75),new Re(.75,.75,.75)];}]),t;}(),dt=(function(){function t(){}
r(t,"laya.d3.core.scene.SceneManager");}(),function(){function t(t,e,n,i){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===t&&(t=1),void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),this._r=t,this._g=e,this._b=n,this._a=i;}
r(t,"laya.d3.core.trail.module.Color",null,"Color$1");return t.prototype.cloneTo=function(t){t._r=this._r,t._g=this._g,t._b=this._b,t._a=this._a;},i(t,["RED",function(){return this.RED=new t(1,0,0,1);},"GREEN",function(){return this.GREEN=new t(0,1,0,1);},"BLUE",function(){return this.BLUE=new t(0,0,1,1);},"CYAN",function(){return this.CYAN=new t(0,1,1,1);},"YELLOW",function(){return this.YELLOW=new t(1,.92,.016,1);},"MAGENTA",function(){return this.MAGENTA=new t(1,0,1,1);},"GRAY",function(){return this.GRAY=new t(.5,.5,.5,1);},"WHITE",function(){return this.WHITE=new t(1,1,1,1);},"BLACK",function(){return this.BLACK=new t(0,0,0,1);}]),t;}()),pt=function(){function t(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[];}
r(t,"laya.d3.core.trail.module.Gradient");var e=t.prototype;return e.setKeys=function(t,e){this._colorKeys=t,this.index=0;for(var n,i=0;i<t.length;i++){var r=(n=t[i]).color;this._colorKeyData[this.index++]=r._r,this._colorKeyData[this.index++]=r._g,this._colorKeyData[this.index++]=r._b,this._colorKeyData[this.index++]=n.time;}
this._alphaKeys=e,this.index=0;for(var a,o=0;o<e.length;o++){a=e[o],this._alphaKeyData[this.index++]=a.alpha,this._alphaKeyData[this.index++]=a.time;}},e.cloneTo=function(t){var e=0,n=0,i=this.colorKeys,r=[];for(e=0,n=i.length;e<n;e++){var a=new gt();i[e].cloneTo(a),r.push(a);}
var o=this.alphaKeys,s=[];for(e=0,n=o.length;e<n;e++){var l=new mt();o[e].cloneTo(l),s.push(l);}
t.setKeys(r,s);},a(0,e,"mode",function(){return this._mode;},function(t){this._mode=t;}),a(0,e,"colorKeys",function(){return this._colorKeys;},function(t){this._colorKeys=t,this.index=0;for(var e=0;e<t.length;e++){var n=t[e],i=n.color;this._colorKeyData[this.index++]=i._r,this._colorKeyData[this.index++]=i._g,this._colorKeyData[this.index++]=i._b,this._colorKeyData[this.index++]=n.time;}}),a(0,e,"alphaKeys",function(){return this._alphaKeys;},function(t){this._alphaKeys=t,this.index=0;for(var e=0;e<t.length;e++){var n=t[e];this._alphaKeyData[this.index++]=n.alpha,this._alphaKeyData[this.index++]=n.time;}}),t;}(),mt=function(){function t(t,e){this._alpha=NaN,this._time=NaN,void 0===t&&(t=0),void 0===e&&(e=0),this._alpha=t,this._time=e;}
r(t,"laya.d3.core.trail.module.GradientAlphaKey");var e=t.prototype;return e.cloneTo=function(t){t.alpha=this.alpha,t.time=this.time;},a(0,e,"alpha",function(){return this._alpha;},function(t){this._alpha=t;}),a(0,e,"time",function(){return this._time;},function(t){this._time=t;}),t;}(),gt=function(){function t(t,e){this._color=null,this._time=NaN,void 0===e&&(e=0),this._color=t||new dt(),this._time=e;}
r(t,"laya.d3.core.trail.module.GradientColorKey");var e=t.prototype;return e.cloneTo=function(t){this.color.cloneTo(t.color),t.time=this.time;},a(0,e,"color",function(){return this._color;},function(t){this._color=t;}),a(0,e,"time",function(){return this._time;},function(t){this._time=t;}),t;}(),yt=(function(){function t(){}
r(t,"laya.d3.core.trail.module.GradientMode"),t.Blend=0,t.Fixed=1;}(),function(){function t(){}
r(t,"laya.d3.core.trail.module.TextureMode"),t.Stretch=0,t.Tile=1;}(),function(){function t(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN;}
r(t,"laya.d3.core.trail.module.TrailKeyFrame");return t.prototype.cloneTo=function(t){t.time=this.time,t.inTangent=this.inTangent,t.outTangent=this.outTangent,t.value=this.value;},t;}()),vt=function(){function t(e){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new Re(),this._curPosition=new Re(),this._delVector3=new Re(),this._lastFixedVertexPosition=new Re(),this._pointAtoBVector3=new Re(),this._pointA=new Re(),this._pointB=new Re(),this._owner=e,this._id=t.renderElementCount++,0==this._id?e._owner.transform.position.cloneTo(this._lastPosition):e._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new qn(It.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new qn(It.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2);}
r(t,"laya.d3.core.trail.TrailRenderElement");var e=t.prototype;return n.imps(e,{"laya.d3.core.render.IRenderable":!0}),e._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1);},e._addTrailByFirstPosition=function(t,e){Re.subtract(e,t,this._delVector3),Re.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),Re.normalize(this._pointAtoBVector3,this._pointAtoBVector3),Re.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(t),t.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0;},e._addTrailByNextPosition=function(t){Re.subtract(t,this._lastFixedVertexPosition,this._delVector3),Re.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),Re.normalize(this._pointAtoBVector3,this._pointAtoBVector3),Re.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=Re.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=be.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(t),t.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(t),this._virtualVerticesCount=2);},e._updateVerticesByPosition=function(t){this._pointe=t.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0;},e._updateVertexBuffer2=function(){var t=0,e=0,n=0,i=0;for(n=0,i=(this._verticesCount+this._virtualVerticesCount)/2;n<i;n++){e=0==this._owner.textureMode?(this._VerticesToTailLength[n]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[n],this._vertices2[t++]=1-e,this._vertices2[t++]=1-e;}
this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount);},e._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0;},e._updateDisappear=function(){var t=0,e=0;for(t=this._curDisappearIndex,e=(this._verticesCount+this._virtualVerticesCount)/2;t<e;t++){this._owner._curtime-this._everyGroupVertexBirthTime[t]>=this._owner.time+be.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0));}},e._beforeRender=function(t){return this._camera=t.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),Re.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),this._verticesCount>0)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0));},e._render=function(t){this._isDead||(R.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),P.drawCall++,P.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2);},e._getVertexBuffer=function(t){return void 0===t&&(t=0),0===t?this._vertexBuffer1:1===t?this._vertexBuffer2:null;},e._getVertexBuffers=function(){return this._vertexBuffers;},e._getIndexBuffer=function(){return null;},e.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition);},e._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null;},a(0,e,"_vertexBufferCount",function(){return this._vertexBuffers.length;}),a(0,e,"triangleCount",function(){return 0;}),t.renderElementCount=0,t;}(),It=function(){function t(){}
r(t,"laya.d3.core.trail.VertexTrail");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration1;}),a(1,t,"vertexDeclaration1",function(){return t._vertexDeclaration1;}),a(1,t,"vertexDeclaration2",function(){return t._vertexDeclaration2;}),i(t,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new Dt(32,[new Ct(0,"vector3",0),new Ct(12,"vector3",41),new Ct(24,"single",33),new Ct(28,"single",40)]);},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new Dt(4,[new Ct(0,"single",38)]);}]),t;}(),xt=function(){function t(t){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=t;}
r(t,"laya.d3.graphics.DynamicBatch");var e=t.prototype;return n.imps(e,{"laya.d3.core.render.IRenderable":!0}),e._getVertexBuffer=function(t){return void 0===t&&(t=0),0===t?this._vertexBuffer:null;},e._getIndexBuffer=function(){return this._indexBuffer;},e._getCombineRenderElementFromPool=function(t,e,n){var i=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return i||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=i=new ht(),i._sprite3D=new gi()),i._sprite3D._render._renderUpdate(n),i;},e._getRenderElement=function(e,n,i){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*t.maxVertexCount),this._indexDatas=new Uint16Array(t.maxIndexCount),this._vertexBuffer=qn.create(this._vertexDeclaration,t.maxVertexCount,35048),this._indexBuffer=Yn.create("ushort",t.maxIndexCount,35048)),this._merageElements.length=0;for(var r=0,a=0,o=0,s=this._combineRenderElements.length;o<s;o++){var l=this._combineRenderElements[o],u=l.getDynamicBatchBakedVertexs(0),h=l.getBakedIndices(),c=l._sprite3D.transform._isFrontFaceInvert,_=r/(this._vertexDeclaration.vertexStride/4),f=a,d=f+h.length;l._tempBatchIndexStart=f,l._tempBatchIndexEnd=d,this._indexDatas.set(h,a);var p=0;if(c)for(p=f;p<d;p+=3){this._indexDatas[p]=_+this._indexDatas[p];var m=this._indexDatas[p+1],g=this._indexDatas[p+2];this._indexDatas[p+1]=_+g,this._indexDatas[p+2]=_+m;}else for(p=f;p<d;p+=3){this._indexDatas[p]=_+this._indexDatas[p],this._indexDatas[p+1]=_+this._indexDatas[p+1],this._indexDatas[p+2]=_+this._indexDatas[p+2];}
a+=h.length,this._vertexDatas.set(u,r),r+=u.length;}
for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),this._combineRenderElementPoolIndex=0,o=0,s=this._materials.length;o<s;o++){var y=this._getCombineRenderElementFromPool(e,n,i);y._type=2,y._staticBatch=null,y.renderObj=this;var v=this._combineRenderElements[this._materialToRenderElementsOffsets[o]]._tempBatchIndexStart,I=o+1===this._materialToRenderElementsOffsets.length?a:this._combineRenderElements[this._materialToRenderElementsOffsets[o+1]]._tempBatchIndexStart;y._tempBatchIndexStart=v,y._tempBatchIndexEnd=I,y._material=this._materials[o],this._merageElements.push(y);}},e._addCombineRenderObjTest=function(e){var n=e.renderObj,i=this._currentCombineIndexCount+n._getIndexBuffer().indexCount;return!(this._currentCombineVertexCount+n._getVertexBuffer().vertexCount>t.maxVertexCount||i>t.maxIndexCount);},e._addCombineRenderObj=function(t){var e=t.renderObj;this._combineRenderElements.push(t),this._currentCombineIndexCount=this._currentCombineIndexCount+e._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+e._getVertexBuffer().vertexCount;},e._addCombineMaterial=function(t){this._materials.push(t);},e._addMaterialToRenderElementOffset=function(t){this._materialToRenderElementsOffsets.push(t);},e._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0;},e._addToRenderQueue=function(t,e,n,i){this._getRenderElement(e,n,i);for(var r=0,a=this._materials.length;r<a;r++){t.getRenderQueue(this._materials[r].renderQueue)._addDynamicBatchElement(this._merageElements[r]);}},e._beforeRender=function(t){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0;},e._render=function(t){var e=t._batchIndexEnd-t._batchIndexStart;R.mainContext.drawElements(4,e,5123,2*t._batchIndexStart),P.drawCall++,P.trianglesFaces+=e/3;},e._getVertexBuffers=function(){return null;},a(0,e,"_vertexBufferCount",function(){return 1;}),a(0,e,"triangleCount",function(){return this._indexBuffer.indexCount/3;}),a(0,e,"combineRenderElementsCount",function(){return this._combineRenderElements.length;}),t.maxVertexCount=2e4,t.maxIndexCount=4e4,t.maxCombineTriangleCount=10,t;}(),Tt=function(){function t(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[];}
r(t,"laya.d3.graphics.DynamicBatchManager");var e=t.prototype;return e.getDynamicBatch=function(t,e){var n,i=t.id.toString()+e;return this._dynamicBatches[i]?n=this._dynamicBatches[i]:this._dynamicBatches[i]=n=new xt(t),n;},e._garbageCollection=function(){for(var t in this._dynamicBatches){0===this._dynamicBatches[t].combineRenderElementsCount&&delete this._dynamicBatches[t];}},e._addPrepareRenderElement=function(t){this._prepareDynamicBatchCombineElements.push(t);},e._finishCombineDynamicBatch=function(e){this._prepareDynamicBatchCombineElements.sort(t._sortPrepareDynamicBatch);for(var n,i,r,a,o,s,l,u,h=-1,c=!0,_=0,f=-1,d=0,p=this._prepareDynamicBatchCombineElements.length;d<p;d++){var m=(o=this._prepareDynamicBatchCombineElements[d]).renderObj._getVertexBuffer(0).vertexDeclaration,g=i!==m;g&&(_=0,i=m);var y=_!==h;if(y&&(h=_),(g||y)&&(s=this.getDynamicBatch(m,_),n=null),c){if(s._addCombineRenderObjTest(o)){if(a=o._material,n!==a)l&&(e.getRenderQueue(u._material.renderQueue)._addRenderElement(u),l=null,u=null,f=-1),l=a,f=s.combineRenderElementsCount,u=o,n=a;else if(l){var v=u.renderObj,I=o.renderObj;v._getVertexBuffer().vertexCount+I._getVertexBuffer().vertexCount>xt.maxVertexCount||v._getIndexBuffer().indexCount+I._getIndexBuffer().indexCount>xt.maxIndexCount?(e.getRenderQueue(u._material.renderQueue)._addRenderElement(u),l=a,f=s.combineRenderElementsCount,u=o):(s._addCombineMaterial(l),s._addMaterialToRenderElementOffset(f),s._addCombineRenderObj(u),l=null,u=null,f=-1,s._addCombineRenderObj(o));}else s._addCombineRenderObj(o);c=!0;}else l&&(e.getRenderQueue(u._material.renderQueue)._addRenderElement(u),l=null,u=null,f=-1),_++,c=!1;}else r=this._prepareDynamicBatchCombineElements[d-1],s._addMaterialToRenderElementOffset(s.combineRenderElementsCount),n=r._material,s._addCombineMaterial(n),s._addCombineRenderObj(r),c=!0,n!==(a=o._material)?(l=a,f=s.combineRenderElementsCount,u=o):s._addCombineRenderObj(o),n=a;}
l&&(e.getRenderQueue(u._material.renderQueue)._addRenderElement(u),l=null,u=null,f=-1),this._prepareDynamicBatchCombineElements.length=0;},e._clearRenderElements=function(){for(var t in this._dynamicBatches){this._dynamicBatches[t]._clearRenderElements();}},e._addToRenderQueue=function(t,e,n,i){for(var r in this._dynamicBatches){var a=this._dynamicBatches[r];a.combineRenderElementsCount>0&&a._addToRenderQueue(t,e,n,i);}},e.dispose=function(){this._dynamicBatches=null;},t._sortPrepareDynamicBatch=function(t,e){return t._mainSortID-e._mainSortID;},t;}(),St=function(){function t(){}
return r(t,"laya.d3.graphics.FrustumCulling"),t.renderShadowObjectCulling=function(t,e,n,i,r){var a=0,o=0,s=0,l=0;for(a=0,s=n.length;a<s;a++){var u=n[a];u&&u._clearRenderElements();}
var h,c,_,f=t._cullingRenders;if(r>1){for(a=0,s=t._cullingRendersLength;a<s;a++){if((h=f[a]).castShadow&&z.isVisible(h._owner.layer.mask)&&h.enable)for(var d=1,p=e.length;d<p;d++){if(c=n[d-1],0!==e[d].containsBoundSphere(h.boundingSphere))for(o=0,l=(_=h._renderElements).length;o<l;o++){c._addRenderElement(_[o]);}}}}else for(a=0,s=t._cullingRendersLength;a<s;a++){if((h=f[a]).castShadow&&z.isVisible(h._owner.layer.mask)&&h.enable&&0!==e[0].containsBoundSphere(h.boundingSphere))for(h._renderUpdate(i),c=n[0],o=0,l=(_=h._renderElements).length;o<l;o++){c._addRenderElement(_[o]);}}},t.renderShadowObjectCullingOctree=function(t,e,n,i,r){for(var a=0,o=n.length;a<o;a++){var s=n[a];s&&s._clearRenderElements();}
r>1?t.treeRoot.cullingShadowObjects(e,n,!0,0,t):t.treeRoot.cullingShadowObjectsOnePSSM(e[0],n,i,!0,0,t);},t.renderObjectCulling=function(t,e,n,i,r,a){var o=0,s=0,l=0,u=0,h=e._quenes,c=e._dynamicBatchManager,_=e._cullingRenders;for(o=0,s=h.length;o<s;o++){var f=h[o];f&&f._clearRenderElements();}
var d=bt._staticBatchManagers;for(o=0,s=d.length;o<s;o++){d[o]._clearRenderElements();}
c._clearRenderElements();var p=n.transform.position;for(o=0,s=e._cullingRendersLength;o<s;o++){var m=_[o];if(z.isVisible(m._owner.layer.mask)&&m.enable&&0!==t.containsBoundSphere(m.boundingSphere)&&m._renderUpdate(a)){m._distanceForSort=Re.distance(m.boundingSphere.center,p)+m.sortingFudge;var g=m._renderElements;for(l=0,u=g.length;l<u;l++){var y=g[l],v=y._staticBatch;if(v&&v._material===y._material)v._addBatchRenderElement(y);else{var I=y.renderObj;I.triangleCount<10&&1===I._vertexBufferCount&&I._getIndexBuffer()&&y._material.renderQueue<2&&y._canDynamicBatch&&!m._owner.isStatic?c._addPrepareRenderElement(y):e.getRenderQueue(y._material.renderQueue)._addRenderElement(y);}}}}
for(o=0,s=d.length;o<s;o++){d[o]._addToRenderQueue(e,i,r,a);}
c._finishCombineDynamicBatch(e),c._addToRenderQueue(e,i,r,a);},t.renderObjectCullingOctree=function(t,e,n,i,r,a){var o=0,s=0,l=e._quenes,u=e._dynamicBatchManager;for(o=0,s=l.length;o<s;o++){var h=l[o];h&&h._clearRenderElements();}
var c=bt._staticBatchManagers;for(o=0,s=c.length;o<s;o++){c[o]._clearRenderElements();}
for(u._clearRenderElements(),e._cullingRenders.length=0,e.treeRoot.cullingObjects(t,!0,0,n.transform.position,a),o=0,s=c.length;o<s;o++){c[o]._addToRenderQueue(e,i,r,a);}
u._finishCombineDynamicBatch(e),u._addToRenderQueue(e,i,r,a);},t.renderObjectCullingNoBoundFrustum=function(t,e,n,i,r){var a=0,o=0,s=0,l=0,u=t._quenes,h=t._dynamicBatchManager,c=t._cullingRenders;for(a=0,o=u.length;a<o;a++){var _=u[a];_&&_._clearRenderElements();}
var f=bt._staticBatchManagers;for(a=0,o=f.length;a<o;a++){f[a]._clearRenderElements();}
h._clearRenderElements();var d=e.transform.position;for(a=0,o=t._cullingRendersLength;a<o;a++){var p=c[a];if(z.isVisible(p._owner.layer.mask)&&p.enable){p._renderUpdate(r),p._distanceForSort=Re.distance(p.boundingSphere.center,d)+p.sortingFudge;var m=p._renderElements;for(s=0,l=m.length;s<l;s++){var g=m[s],y=g._staticBatch;if(y&&y._material===g._material)y._addBatchRenderElement(g);else{var v=g.renderObj;v.triangleCount<10&&1===v._vertexBufferCount&&v._getIndexBuffer()&&g._material.renderQueue<2&&g._canDynamicBatch&&!p._owner.isStatic?h._addPrepareRenderElement(g):t.getRenderQueue(g._material.renderQueue)._addRenderElement(g);}}}}
for(a=0,o=f.length;a<o;a++){f[a]._addToRenderQueue(t,n,i,r);}
h._finishCombineDynamicBatch(t),h._addToRenderQueue(t,n,i,r);},t;}(),bt=function(){function t(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={};}
r(t,"laya.d3.graphics.StaticBatchManager");var e=t.prototype;return e._finishInit=function(){for(var t in this._staticBatches){this._staticBatches[t]._finishInit();}
this._initBatchRenderElements.length=0;},e._initStaticBatchs=function(t){throw new Error("StaticBatchManager:must override this function.");},e._addInitBatchSprite=function(t){for(var e=t._render._renderElements,n=0,i=e.length;n<i;n++){this._initBatchRenderElements.push(e[n]);}},e._clearRenderElements=function(){for(var t in this._staticBatches){this._staticBatches[t]._clearRenderElements();}},e._garbageCollection=function(t){var e=t._staticBatch,n=e._initBatchRenderElements,i=n.indexOf(t);n.splice(i,1),0===n.length&&(e.dispose(),delete this._staticBatches[e._key]);},e._addToRenderQueue=function(t,e,n,i){for(var r in this._staticBatches){var a=this._staticBatches[r];a._batchRenderElements.length>0&&a._updateToRenderQueue(t,i);}},e.dispose=function(){this._staticBatches=null;},t._addToStaticBatchQueue=function(e){e instanceof laya.d3.core.RenderableSprite3D&&e._addToInitStaticBatchManager();for(var n=0,i=e.numChildren;n<i;n++){t._addToStaticBatchQueue(e._childs[n]);}},t.combine=function(e,n){var i,r=0,a=0;if(n)for(r=0,a=n.length;r<a;r++){n[r]._addToInitStaticBatchManager();}else e&&t._addToStaticBatchQueue(e);for(r=0,a=t._staticBatchManagers.length;r<a;r++){(i=t._staticBatchManagers[r])._initStaticBatchs(e),i._finishInit();}},t._staticBatchManagers=[],t;}(),wt=function(){function t(t,e,n){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=t,this._manager=e,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=n;}
r(t,"laya.d3.graphics.StaticBatch");var e=t.prototype;return n.imps(e,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),e._binarySearch=function(t){for(var e=0,n=this._batchRenderElements.length-1,i=0;e<=n;){i=Math.floor((e+n)/2),this._compareBatchRenderElement(this._batchRenderElements[i],t)?n=i-1:e=i+1;}
return e;},e._compareBatchRenderElement=function(t,e){throw new Error("StaticBatch:must override this function.");},e._getVertexDecLightMap=function(t){return t===ae.vertexDeclaration?te.vertexDeclaration:t===re.vertexDeclaration?Qt.vertexDeclaration:t===Xt.vertexDeclaration?Ht.vertexDeclaration:t===ue.vertexDeclaration?null:t===Nt.vertexDeclaration?Ut.vertexDeclaration:t===se.vertexDeclaration?ne.vertexDeclaration:t===Jt.vertexDeclaration?$t.vertexDeclaration:t===oe.vertexDeclaration?ee.vertexDeclaration:t===re.vertexDeclaration?Qt.vertexDeclaration:t===Yt.vertexDeclaration?zt.vertexDeclaration:t===ue.vertexDeclaration?null:t===Nt.vertexDeclaration?Ut.vertexDeclaration:t===le.vertexDeclaration?ie.vertexDeclaration:t===Jt.vertexDeclaration?$t.vertexDeclaration:t;},e._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.");},e._addBatchRenderElement=function(t){this._batchRenderElements.splice(this._binarySearch(t),0,t);},e._updateToRenderQueue=function(t,e){this._combineRenderElementPoolIndex=0,this._getRenderElement(t.getRenderQueue(this._material.renderQueue)._renderElements,t,e);},e._getRenderElement=function(t,e,n){throw new Error("StaticBatch:must override this function.");},e._finishInit=function(){throw new Error("StaticBatch:must override this function.");},e._clearRenderElements=function(){this._batchRenderElements.length=0;},e.dispose=function(){},e._getVertexBuffer=function(t){return void 0===t&&(t=0),null;},e._getIndexBuffer=function(){return null;},e._beforeRender=function(t){return!0;},e._render=function(t){},e._getVertexBuffers=function(){return null;},a(0,e,"_vertexBufferCount",function(){return 1;}),a(0,e,"triangleCount",function(){return 0;}),t.combine=function(t){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),bt.combine(t);},t.maxBatchVertexCount=65535,t;}(),Dt=function(){function t(e,n){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++t._uniqueIDCounter,this._id>t.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",t.maxVertexDeclaration);this._shaderValues=new Be(),this._vertexElementsDic={},this._vertexStride=e,this._vertexElements=n;for(var i=0;i<n.length;i++){var r=n[i],a=r.elementUsage;this._vertexElementsDic[a]=r;var o=[t._getTypeSize(r.elementFormat)/4,5126,!1,this._vertexStride,r.offset];switch(this._shaderValues.setValue(a,o),a){case 1:this._addShaderDefine(cn.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(cn.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(cn.SHADERDEFINE_UV1);}}}
r(t,"laya.d3.graphics.VertexDeclaration");var e=t.prototype;return e._addShaderDefine=function(t){this._shaderDefineValue|=t;},e._removeShaderDefine=function(t){this._shaderDefineValue&=~t;},e.getVertexElements=function(){return this._vertexElements.slice();},e.getVertexElementByUsage=function(t){return this._vertexElementsDic[t];},e.unBinding=function(){},a(0,e,"shaderDefineValue",function(){return this._shaderDefineValue;}),a(0,e,"id",function(){return this._id;}),a(0,e,"vertexStride",function(){return this._vertexStride;}),a(0,e,"shaderValues",function(){return this._shaderValues;}),t._getTypeSize=function(t){switch(t){case "single":return 4;case "vector2":return 8;case "vector3":return 12;case "vector4":return 16;case "color":case "byte4":case "short2":return 4;case "short4":return 8;case "normalizedshort2":return 4;case "normalizedshort4":return 8;case "halfvector2":return 4;case "halfvector4":return 8;}
return 0;},t.getVertexStride=function(e){for(var n=0,i=0;i<e.Length;i++){var r=e[i],a=r.offset+t._getTypeSize(r.elementFormat);n<a&&(n=a);}
return n;},t._maxVertexDeclarationBit=1e3,t._uniqueIDCounter=1,i(t,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647);}]),t;}(),Ct=function(){function t(t,e,n){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=t,this.elementFormat=e,this.elementUsage=n;}
return r(t,"laya.d3.graphics.VertexElement"),t;}(),Et=(function(){function t(){}
r(t,"laya.d3.graphics.VertexElementFormat"),t.Single="single",t.Vector2="vector2",t.Vector3="vector3",t.Vector4="vector4",t.Color="color",t.Byte4="byte4",t.Short2="short2",t.Short4="short4",t.NormalizedShort2="normalizedshort2",t.NormalizedShort4="normalizedshort4",t.HalfVector2="halfvector2",t.HalfVector4="halfvector4";}(),function(){function t(){}
r(t,"laya.d3.graphics.VertexElementUsage"),t.POSITION0=0,t.COLOR0=1,t.TEXTURECOORDINATE0=2,t.NORMAL0=3,t.BINORMAL0=4,t.TANGENT0=5,t.BLENDINDICES0=6,t.BLENDWEIGHT0=7,t.DEPTH0=8,t.FOG0=9,t.POINTSIZE0=10,t.SAMPLE0=11,t.TESSELLATEFACTOR0=12,t.COLOR1=13,t.NEXTTEXTURECOORDINATE0=14,t.TEXTURECOORDINATE1=15,t.NEXTTEXTURECOORDINATE1=16,t.CORNERTEXTURECOORDINATE0=17,t.VELOCITY0=18,t.STARTCOLOR0=19,t.STARTSIZE=20,t.AGEADDSCALE0=21,t.STARTROTATION=22,t.ENDCOLOR0=23,t.STARTLIFETIME=24,t.TIME0=33,t.SHAPEPOSITIONSTARTLIFETIME=30,t.DIRECTIONTIME=32,t.SIZEROTATION0=27,t.RADIUS0=28,t.RADIAN0=29,t.STARTSPEED=31,t.RANDOM0=34,t.RANDOM1=35,t.SIMULATIONWORLDPOSTION=36,t.SIMULATIONWORLDROTATION=37,t.TEXTURECOORDINATE0X=38,t.TEXTURECOORDINATE0X1=39,t.TEXTURECOORDINATE0Y=40,t.OFFSETVECTOR=41;}(),function(){function t(t,e,n){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=t,this._textureCoordinate0=e,this._time=n;}
r(t,"laya.d3.graphics.VertexGlitter");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"textureCoordinate",function(){return this._textureCoordinate0;}),a(0,e,"position",function(){return this._position;}),a(0,e,"time",function(){return this._time;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(24,[new Ct(0,"vector3",0),new Ct(12,"vector2",2),new Ct(20,"single",33)]);}]),t;}()),Pt=(function(){function t(t,e,n,i,r,a,o,s,l,u){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=t,this._position=e,this._velocity=n,this._startColor=i,this._endColor=r,this._sizeRotation=a,this._radius=o,this._radian=s,this._ageAddScale=l,this._time=u;}
r(t,"laya.d3.graphics.VertexParticle");var e=t.prototype;n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"endColor",function(){return this._endColor;}),a(0,e,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate;}),a(0,e,"sizeRotation",function(){return this._sizeRotation;}),a(0,e,"velocity",function(){return this._velocity;}),a(0,e,"position",function(){return this._position;}),a(0,e,"startColor",function(){return this._startColor;}),a(0,e,"radius",function(){return this._radius;}),a(0,e,"radian",function(){return this._radian;}),a(0,e,"ageAddScale",function(){return this._ageAddScale;}),a(0,e,"time",function(){return this._time;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(116,[new Ct(0,"vector4",17),new Ct(16,"vector3",0),new Ct(28,"vector3",18),new Ct(40,"vector4",19),new Ct(56,"vector4",23),new Ct(72,"vector3",27),new Ct(84,"vector2",28),new Ct(92,"vector4",29),new Ct(108,"single",24),new Ct(112,"single",33)]);}]);}(),function(){function t(t){this._position=null,this._position=t;}
r(t,"laya.d3.graphics.VertexPosition");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"position",function(){return this._position;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(12,[new Ct(0,"vector3",0)]);}]),t;}()),Mt=function(){function t(t,e){this._position=null,this._normal=null,this._position=t,this._normal=e;}
r(t,"laya.d3.graphics.VertexPositionNormal");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(24,[new Ct(0,"vector3",0),new Ct(12,"vector3",3)]);}]),t;}(),At=function(){function t(t,e,n){this._position=null,this._normal=null,this._color=null,this._position=t,this._normal=e,this._color=n;}
r(t,"laya.d3.graphics.VertexPositionNormalColor");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"color",function(){return this._color;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(40,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1)]);}]),t;}(),Ot=function(){function t(t,e,n,i,r){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=t,this._normal=e,this._color=n,this._blendIndex=i,this._blendWeight=r;}
r(t,"laya.d3.graphics.VertexPositionNormalColorSkin");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"blendWeight",function(){return this._blendWeight;}),a(0,e,"color",function(){return this._color;}),a(0,e,"blendIndex",function(){return this._blendIndex;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(72,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1),new Ct(40,"vector4",7),new Ct(56,"vector4",6)]);}]),t;}(),Rt=function(){function t(t,e,n,i,r,a){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=t,this._normal=e,this._color=n,this._tangent=i,this._blendIndex=r,this._blendWeight=a;}
r(t,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"blendWeight",function(){return this._blendWeight;}),a(0,e,"color",function(){return this._color;}),a(0,e,"blendIndex",function(){return this._blendIndex;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(88,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1),new Ct(40,"vector4",7),new Ct(56,"vector4",6),new Ct(72,"vector4",5)]);}]),t;}(),Lt=function(){function t(t,e,n,i,r,a){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=t,this._normal=e,this._color=n,this._tangent=i,this._blendIndex=r,this._blendWeight=a;}
r(t,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"blendWeight",function(){return this._blendWeight;}),a(0,e,"color",function(){return this._color;}),a(0,e,"blendIndex",function(){return this._blendIndex;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(84,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1),new Ct(40,"vector4",7),new Ct(56,"vector4",6),new Ct(72,"vector3",5)]);}]),t;}(),Ft=function(){function t(t,e,n,i){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=t,this._normal=e,this._color=n,this._tangent=i;}
r(t,"laya.d3.graphics.VertexPositionNormalColorSTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"color",function(){return this._color;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(56,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1),new Ct(40,"vector4",5)]);}]),t;}(),Vt=function(){function t(t,e,n,i){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=t,this._normal=e,this._color=n,this._tangent=i;}
r(t,"laya.d3.graphics.VertexPositionNormalColorTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"color",function(){return this._color;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(52,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1),new Ct(40,"vector3",5)]);}]),t;}(),Nt=function(){function t(t,e,n,i){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=t,this._normal=e,this._color=n,this._textureCoordinate=i;}
r(t,"laya.d3.graphics.VertexPositionNormalColorTexture");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"textureCoordinate",function(){return this._textureCoordinate;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"color",function(){return this._color;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(48,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1),new Ct(40,"vector2",2)]);}]),t;}(),Ut=function(){function t(t,e,n,i,r){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=t,this._normal=e,this._color=n,this._textureCoordinate0=i,this._textureCoordinate1=r;}
r(t,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"color",function(){return this._color;}),a(0,e,"textureCoordinate0",function(){return this._textureCoordinate0;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(0,e,"textureCoordinate1",function(){return this._textureCoordinate1;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(56,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1),new Ct(40,"vector2",2),new Ct(48,"vector2",15)]);}]),t;}(),Gt=function(){function t(t,e,n,i,r,a,o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=t,this._normal=e,this._color=n,this._textureCoordinate0=i,this._textureCoordinate1=r,this._blendIndex=a,this._blendWeight=o;}
r(t,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"blendWeight",function(){return this._blendWeight;}),a(0,e,"color",function(){return this._color;}),a(0,e,"textureCoordinate0",function(){return this._textureCoordinate0;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(0,e,"textureCoordinate1",function(){return this._textureCoordinate1;}),a(0,e,"blendIndex",function(){return this._blendIndex;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(88,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1),new Ct(40,"vector2",2),new Ct(48,"vector2",15),new Ct(56,"vector4",7),new Ct(72,"vector4",6)]);}]),t;}(),Bt=function(){function t(t,e,n,i,r,a,o,s){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=t,this._normal=e,this._color=n,this._textureCoordinate0=i,this._textureCoordinate1=r,this._tangent=a,this._blendIndex=o,this._blendWeight=s;}
r(t,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"blendWeight",function(){return this._blendWeight;}),a(0,e,"color",function(){return this._color;}),a(0,e,"textureCoordinate0",function(){return this._textureCoordinate0;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(0,e,"textureCoordinate1",function(){return this._textureCoordinate1;}),a(0,e,"blendIndex",function(){return this._blendIndex;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(104,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1),new Ct(40,"vector2",2),new Ct(48,"vector2",15),new Ct(56,"vector4",7),new Ct(72,"vector4",6),new Ct(88,"vector4",5)]);}]),t;}(),kt=function(){function t(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null;}
r(t,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),e.VertexPositionNormalColorTexture0SkinTangent=function(t,e,n,i,r,a,o,s){this._position=t,this._normal=e,this._color=n,this._textureCoordinate0=i,this._textureCoordinate1=r,this._tangent=a,this._blendIndex=o,this._blendWeight=s;},a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"blendWeight",function(){return this._blendWeight;}),a(0,e,"color",function(){return this._color;}),a(0,e,"textureCoordinate0",function(){return this._textureCoordinate0;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(0,e,"textureCoordinate1",function(){return this._textureCoordinate1;}),a(0,e,"blendIndex",function(){return this._blendIndex;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(100,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1),new Ct(40,"vector2",2),new Ct(48,"vector2",15),new Ct(56,"vector4",7),new Ct(72,"vector4",6),new Ct(88,"vector3",5)]);}]),t;}(),Ht=function(){function t(t,e,n,i,r,a){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=t,this._normal=e,this._color=n,this._textureCoordinate0=i,this._textureCoordinate1=r,this._tangent=a;}
r(t,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"color",function(){return this._color;}),a(0,e,"textureCoordinate0",function(){return this._textureCoordinate0;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(0,e,"textureCoordinate1",function(){return this._textureCoordinate1;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(72,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1),new Ct(40,"vector2",2),new Ct(48,"vector2",15),new Ct(56,"vector4",5)]);}]),t;}(),zt=function(){function t(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null;}
r(t,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),e.VertexPositionNormalColorTexture0Tangent=function(t,e,n,i,r,a){this._position=t,this._normal=e,this._color=n,this._textureCoordinate0=i,this._textureCoordinate1=r,this._tangent=a;},a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"color",function(){return this._color;}),a(0,e,"textureCoordinate0",function(){return this._textureCoordinate0;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(0,e,"textureCoordinate1",function(){return this._textureCoordinate1;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(68,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1),new Ct(40,"vector2",2),new Ct(48,"vector2",15),new Ct(56,"vector3",5)]);}]),t;}(),jt=function(){function t(t,e,n,i,r,a){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=t,this._normal=e,this._color=n,this._textureCoordinate=i,this._blendIndex=r,this._blendWeight=a;}
r(t,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"textureCoordinate",function(){return this._textureCoordinate;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"blendWeight",function(){return this._blendWeight;}),a(0,e,"color",function(){return this._color;}),a(0,e,"blendIndex",function(){return this._blendIndex;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(80,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1),new Ct(40,"vector2",2),new Ct(48,"vector4",7),new Ct(64,"vector4",6)]);}]),t;}(),Wt=function(){function t(t,e,n,i,r,a,o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=t,this._normal=e,this._color=n,this._textureCoordinate=i,this._tangent=r,this._blendIndex=a,this._blendWeight=o;}
r(t,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"textureCoordinate",function(){return this._textureCoordinate;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"blendWeight",function(){return this._blendWeight;}),a(0,e,"color",function(){return this._color;}),a(0,e,"blendIndex",function(){return this._blendIndex;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(96,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1),new Ct(40,"vector2",2),new Ct(48,"vector4",7),new Ct(64,"vector4",6),new Ct(80,"vector4",5)]);}]),t;}(),Kt=function(){function t(t,e,n,i,r,a,o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=t,this._normal=e,this._color=n,this._textureCoordinate=i,this._tangent=r,this._blendIndex=a,this._blendWeight=o;}
r(t,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"textureCoordinate",function(){return this._textureCoordinate;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"blendWeight",function(){return this._blendWeight;}),a(0,e,"color",function(){return this._color;}),a(0,e,"blendIndex",function(){return this._blendIndex;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(92,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1),new Ct(40,"vector2",2),new Ct(48,"vector4",7),new Ct(64,"vector4",6),new Ct(80,"vector3",5)]);}]),t;}(),Xt=function(){function t(t,e,n,i,r){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=t,this._normal=e,this._color=n,this._textureCoordinate=i,this._tangent=r;}
r(t,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"textureCoordinate",function(){return this._textureCoordinate;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"color",function(){return this._color;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(64,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1),new Ct(40,"vector2",2),new Ct(48,"vector4",5)]);}]),t;}(),Yt=function(){function t(t,e,n,i,r){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=t,this._normal=e,this._color=n,this._textureCoordinate=i,this._tangent=r;}
r(t,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"textureCoordinate",function(){return this._textureCoordinate;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"color",function(){return this._color;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(60,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",1),new Ct(40,"vector2",2),new Ct(48,"vector3",5)]);}]),t;}(),qt=function(){function t(t,e,n){this._position=null,this._normal=null,this._tangent=null,this._position=t,this._normal=e,this._tangent=n;}
r(t,"laya.d3.graphics.VertexPositionNormalSTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(40,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector4",5)]);}]),t;}(),Zt=function(){function t(t,e,n){this._position=null,this._normal=null,this._tangent=null,this._position=t,this._normal=e,this._tangent=n;}
r(t,"laya.d3.graphics.VertexPositionNormalTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(36,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector3",5)]);}]),t;}(),Jt=function(){function t(t,e,n){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=t,this._normal=e,this._textureCoordinate=n;}
r(t,"laya.d3.graphics.VertexPositionNormalTexture");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"textureCoordinate",function(){return this._textureCoordinate;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(32,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector2",2)]);}]),t;}(),$t=function(){function t(t,e,n,i){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=t,this._normal=e,this._textureCoordinate0=n,this._textureCoordinate1=i;}
r(t,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"textureCoordinate0",function(){return this._textureCoordinate0;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(0,e,"textureCoordinate1",function(){return this._textureCoordinate1;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(40,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector2",2),new Ct(32,"vector2",15)]);}]),t;}(),Qt=function(){function t(t,e,n,i,r,a){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=t,this._normal=e,this._textureCoordinate0=n,this._textureCoordinate1=i,this._blendIndex=r,this._blendWeight=a;}
r(t,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"textureCoordinate0",function(){return this._textureCoordinate0;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(0,e,"textureCoordinate1",function(){return this._textureCoordinate1;}),a(0,e,"blendIndex",function(){return this._blendIndex;}),a(0,e,"blendWeight",function(){return this._blendWeight;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(72,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector2",2),new Ct(32,"vector2",15),new Ct(40,"vector4",7),new Ct(56,"vector4",6)]);}]),t;}(),te=function(){function t(t,e,n,i,r,a,o){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=t,this._normal=e,this._textureCoordinate0=n,this._textureCoordinate1=i,this._tangent=r,this._blendIndex=a,this._blendWeight=o;}
r(t,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"textureCoordinate0",function(){return this._textureCoordinate0;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(0,e,"textureCoordinate1",function(){return this._textureCoordinate1;}),a(0,e,"blendIndex",function(){return this._blendIndex;}),a(0,e,"blendWeight",function(){return this._blendWeight;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(88,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector2",2),new Ct(32,"vector2",15),new Ct(40,"vector4",7),new Ct(56,"vector4",6),new Ct(72,"vector4",5)]);}]),t;}(),ee=function(){function t(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null;}
r(t,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),e.VertexPositionNormalTexture0SkinTangent=function(t,e,n,i,r,a,o){this._position=t,this._normal=e,this._textureCoordinate0=n,this._textureCoordinate1=i,this._tangent=r,this._blendIndex=a,this._blendWeight=o;},a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"textureCoordinate0",function(){return this._textureCoordinate0;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(0,e,"textureCoordinate1",function(){return this._textureCoordinate1;}),a(0,e,"blendIndex",function(){return this._blendIndex;}),a(0,e,"blendWeight",function(){return this._blendWeight;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(84,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector2",2),new Ct(32,"vector2",15),new Ct(40,"vector4",7),new Ct(56,"vector4",6),new Ct(72,"vector3",5)]);}]),t;}(),ne=function(){function t(t,e,n,i,r){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=t,this._normal=e,this._textureCoordinate0=n,this._textureCoordinate1=i,this._tangent=r;}
r(t,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"textureCoordinate0",function(){return this._textureCoordinate0;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(0,e,"textureCoordinate1",function(){return this._textureCoordinate1;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(56,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector2",2),new Ct(32,"vector2",15),new Ct(40,"vector4",5)]);}]),t;}(),ie=function(){function t(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null;}
r(t,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),e.VertexPositionNormalTexture0Tangent=function(t,e,n,i,r){this._position=t,this._normal=e,this._textureCoordinate0=n,this._textureCoordinate1=i,this._tangent=r;},a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"textureCoordinate0",function(){return this._textureCoordinate0;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(0,e,"textureCoordinate1",function(){return this._textureCoordinate1;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(52,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector2",2),new Ct(32,"vector2",15),new Ct(40,"vector3",5)]);}]),t;}(),re=function(){function t(t,e,n,i,r){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=t,this._normal=e,this._textureCoordinate=n,this._blendIndex=i,this._blendWeight=r;}
r(t,"laya.d3.graphics.VertexPositionNormalTextureSkin");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"textureCoordinate",function(){return this._textureCoordinate;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"blendIndex",function(){return this._blendIndex;}),a(0,e,"blendWeight",function(){return this._blendWeight;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(64,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector2",2),new Ct(32,"vector4",7),new Ct(48,"vector4",6)]);}]),t;}(),ae=function(){function t(t,e,n,i,r,a){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=t,this._normal=e,this._textureCoordinate=n,this._tangent=i,this._blendIndex=r,this._blendWeight=a;}
r(t,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"textureCoordinate",function(){return this._textureCoordinate;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"blendIndex",function(){return this._blendIndex;}),a(0,e,"blendWeight",function(){return this._blendWeight;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(80,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector2",2),new Ct(32,"vector4",7),new Ct(48,"vector4",6),new Ct(64,"vector4",5)]);}]),t;}(),oe=function(){function t(t,e,n,i,r,a){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=t,this._normal=e,this._textureCoordinate=n,this._tangent=i,this._blendIndex=r,this._blendWeight=a;}
r(t,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"textureCoordinate",function(){return this._textureCoordinate;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"blendIndex",function(){return this._blendIndex;}),a(0,e,"blendWeight",function(){return this._blendWeight;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(76,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector2",2),new Ct(32,"vector4",7),new Ct(48,"vector4",6),new Ct(64,"vector3",5)]);}]),t;}(),se=function(){function t(t,e,n,i){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=t,this._normal=e,this._textureCoordinate=n,this._tangent=i;}
r(t,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"textureCoordinate",function(){return this._textureCoordinate;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(48,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector2",2),new Ct(32,"vector4",5)]);}]),t;}(),le=function(){function t(t,e,n,i){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=t,this._normal=e,this._textureCoordinate=n,this._tangent=i;}
r(t,"laya.d3.graphics.VertexPositionNormalTextureTangent");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"textureCoordinate",function(){return this._textureCoordinate;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(44,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector2",2),new Ct(32,"vector3",5)]);}]),t;}(),ue=function(){function t(t,e,n){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=t,this._normal=e,this._textureCoordinate=n;}
r(t,"laya.d3.graphics.VertexPositionNTBTexture");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"textureCoordinate",function(){return this._textureCoordinate;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(56,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector3",5),new Ct(36,"vector3",4),new Ct(48,"vector2",2)]);}]),t;}(),he=function(){function t(t,e,n,i,r,a,o,s){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=t,this._normal=e,this._textureCoordinate0=i,this._textureCoordinate1=r,this._tangent=a,n=n,this._blendIndex=o,this._blendWeight=s;}
r(t,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"tangent",function(){return this._tangent;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"textureCoordinate0",function(){return this._textureCoordinate0;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(0,e,"textureCoordinate1",function(){return this._textureCoordinate1;}),a(0,e,"blendIndex",function(){return this._blendIndex;}),a(0,e,"blendWeight",function(){return this._blendWeight;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(96,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector3",5),new Ct(36,"vector3",4),new Ct(48,"vector2",2),new Ct(56,"vector2",15),new Ct(64,"vector4",7),new Ct(80,"vector4",6)]);}]),t;}(),ce=function(){function t(t,e,n){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=t,this._normal=e,this._textureCoordinate=n;}
r(t,"laya.d3.graphics.VertexPositionNTBTextureSkin");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"textureCoordinate",function(){return this._textureCoordinate;}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(88,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector3",5),new Ct(36,"vector3",4),new Ct(48,"vector2",2),new Ct(56,"vector4",7),new Ct(72,"vector4",6)]);}]),t;}(),_e=function(){function t(t,e,n,i){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=t,this._normal=e,this._textureCoord0=n,this._textureCoord1=i;}
r(t,"laya.d3.graphics.VertexPositionTerrain");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"normal",function(){return this._normal;}),a(0,e,"position",function(){return this._position;}),a(0,e,"textureCoord0",function(){return this._textureCoord0;}),a(0,e,"textureCoord1",function(){return this._textureCoord1;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(40,[new Ct(0,"vector3",0),new Ct(12,"vector3",3),new Ct(24,"vector2",2),new Ct(32,"vector2",15)]);}]),t;}(),fe=function(){function t(t,e){this._position=null,this._textureCoordinate0=null,this._position=t,this._textureCoordinate0=e;}
r(t,"laya.d3.graphics.VertexPositionTexture0");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"position",function(){return this._position;}),a(0,e,"textureCoordinate0",function(){return this._textureCoordinate0;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(20,[new Ct(0,"vector3",0),new Ct(12,"vector2",2)]);}]),t;}(),de=function(){function t(t,e,n,i,r,a,o,s,l,u,h,c,_,f){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=t,this._positionStartLifeTime=e,this._velocity=n,this._startColor=i,this._startSize=r,this._startRotation0=a,this._startRotation1=o,this._startRotation2=s,this._startLifeTime=l,this._time=u,this._startSpeed=h,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=f;}
r(t,"laya.d3.graphics.VertexShurikenParticleBillboard");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate;}),a(0,e,"random1",function(){return this._randoms1;}),a(0,e,"startRotation2",function(){return this._startRotation2;}),a(0,e,"positionStartLifeTime",function(){return this._positionStartLifeTime;}),a(0,e,"velocity",function(){return this._velocity;}),a(0,e,"random0",function(){return this._randoms0;}),a(0,e,"startSize",function(){return this._startSize;}),a(0,e,"startColor",function(){return this._startColor;}),a(0,e,"startRotation0",function(){return this._startRotation0;}),a(0,e,"startRotation1",function(){return this._startRotation1;}),a(0,e,"startLifeTime",function(){return this._startLifeTime;}),a(0,e,"time",function(){return this._time;}),a(0,e,"startSpeed",function(){return this._startSpeed;}),a(0,e,"simulationWorldPostion",function(){return this._simulationWorldPostion;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(152,[new Ct(0,"vector4",17),new Ct(16,"vector4",30),new Ct(32,"vector4",32),new Ct(48,"vector4",19),new Ct(64,"vector3",20),new Ct(76,"vector3",22),new Ct(88,"single",31),new Ct(92,"vector4",34),new Ct(108,"vector4",35),new Ct(124,"vector3",36),new Ct(136,"vector4",37)]);}]),t;}(),pe=function(){function t(t,e,n,i,r,a,o,s,l,u,h,c,_,f){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=t,this._positionStartLifeTime=e,this._velocity=n,this._startColor=i,this._startSize=r,this._startRotation0=a,this._startRotation1=o,this._startRotation2=s,this._startLifeTime=l,this._time=u,this._startSpeed=h,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=f;}
r(t,"laya.d3.graphics.VertexShurikenParticleMesh");var e=t.prototype;return n.imps(e,{"laya.d3.graphics.IVertex":!0}),a(0,e,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate;}),a(0,e,"velocity",function(){return this._velocity;}),a(0,e,"position",function(){return this._positionStartLifeTime;}),a(0,e,"random0",function(){return this._randoms0;}),a(0,e,"startSize",function(){return this._startSize;}),a(0,e,"startColor",function(){return this._startColor;}),a(0,e,"startRotation0",function(){return this._startRotation0;}),a(0,e,"startRotation1",function(){return this._startRotation1;}),a(0,e,"random1",function(){return this._randoms1;}),a(0,e,"startRotation2",function(){return this._startRotation2;}),a(0,e,"startLifeTime",function(){return this._startLifeTime;}),a(0,e,"time",function(){return this._time;}),a(0,e,"startSpeed",function(){return this._startSpeed;}),a(0,e,"simulationWorldPostion",function(){return this._simulationWorldPostion;}),a(0,e,"vertexDeclaration",function(){return t._vertexDeclaration;}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration;}),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(172,[new Ct(0,"vector3",0),new Ct(12,"vector4",1),new Ct(28,"vector2",2),new Ct(36,"vector4",30),new Ct(52,"vector4",32),new Ct(68,"vector4",19),new Ct(84,"vector3",20),new Ct(96,"vector3",22),new Ct(108,"single",31),new Ct(112,"vector4",34),new Ct(128,"vector4",35),new Ct(144,"vector3",36),new Ct(156,"vector4",37)]);}]),t;}(),me=function(){function t(t,e,n,i,r,a){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=n,this._materials=i,this._subMeshes=r,this._materialMap=a,this._version=e,this._onLoaded(t);}
r(t,"laya.d3.loaders.LoadModelV01");var e=t.prototype;return e._onLoaded=function(t){this._readData=t,this.READ_BLOCK();for(var e=0;e<this._BLOCK.count;e++){var n=this._readData.getUint16(),i=this._strings[n],r=this["READ_"+i];if(null==r)throw new Error("model file err,no this function:"+n+" "+i);if(!r.call(this))break;}
return this._mesh;},e.onError=function(){},e._readString=function(){return this._strings[this._readData.getUint16()];},e.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0;},e.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0;},e.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var t=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var e=0;e<this._STRINGS.size;e++){this._strings[e]=this._readData.readUTFString();}
return this._readData.pos=t,!0;},e.READ_MATERIAL=function(){var t=this._readData.getUint16(),e=(this._readString(),this._readString());return this._materials[t]="null"!==e?v.getRes(this._materialMap[e]):new gn(),!0;},e.READ_MESH=function(){this._readString();switch(this._version){case "LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case "LAYASKINANI:01":case "LAYAMODEL:02":var t=this._readData.__getBuffer(),e=0,n=0,i=this._readData.getUint32(),r=this._readData.getUint32(),a=(new Float32Array(t.slice(i+this._DATA.offset,i+this._DATA.offset+r)),this._readData.getUint32()),o=this._readData.getUint32(),s=new Float32Array(t.slice(a+this._DATA.offset,a+this._DATA.offset+o));for(this.mesh._inverseBindPoses=[],e=0,n=s.length;e<n;e+=16){var l=new De(s[e+0],s[e+1],s[e+2],s[e+3],s[e+4],s[e+5],s[e+6],s[e+7],s[e+8],s[e+9],s[e+10],s[e+11],s[e+12],s[e+13],s[e+14],s[e+15]);this.mesh._inverseBindPoses.push(l);}
break;default:throw new Error("LoadModel:unknown version.");}
return!0;},e.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var e=this._readString();this._shaderAttributes=e.match(t._attrReg);var n=this._readData.getUint32(),i=this._readData.getUint32(),r=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),a=this._readData.getUint32(),o=this._readData.getUint32(),s=this._readData.getUint32(),l=this._readData.__getBuffer(),u=new Ne(this._mesh),h=this._getVertexDeclaration(),c=qn.create(h,a/h.vertexStride,35044,!0),_=r+this._DATA.offset,f=l.slice(_,_+a);c.setData(new Float32Array(f)),u._vertexBuffer=c;for(var d=c.vertexDeclaration.getVertexElements(),p=0;p<d.length;p++){u._bufferUsage[d[p].elementUsage]=c;}
var m=Yn.create("ushort",i/2,35044,!0),g=n+this._DATA.offset,y=l.slice(g,g+i);m.setData(new Uint16Array(y)),u._indexBuffer=m;var v=l.slice(o+this._DATA.offset,o+this._DATA.offset+s);return u._boneIndicesList[0]=new Uint8Array(v),this._subMeshes.push(u),!0;},e.READ_DATAAREA=function(){return!1;},e._getVertexDeclaration=function(){for(var t=!1,e=!1,n=!1,i=!1,r=!1,a=!1,o=!1,s=!1,l=!1,u=0;u<this._shaderAttributes.length;u+=8){switch(this._shaderAttributes[u]){case "POSITION":t=!0;break;case "NORMAL":e=!0;break;case "COLOR":n=!0;break;case "UV":i=!0;break;case "UV1":r=!0;break;case "BLENDWEIGHT":o=!0;break;case "BLENDINDICES":s=!0;break;case "TANGENT":a=!0;break;case "BINORMAL":l=!0;}}
var h;return t&&e&&n&&i&&r&&o&&s&&a?h=kt.vertexDeclaration:t&&e&&n&&i&&r&&o&&s?h=Gt.vertexDeclaration:t&&e&&i&&r&&o&&s&&a?h=ee.vertexDeclaration:t&&e&&i&&r&&o&&s?h=Qt.vertexDeclaration:t&&e&&n&&i&&o&&s&&a?h=Kt.vertexDeclaration:t&&e&&n&&i&&o&&s?h=jt.vertexDeclaration:t&&e&&a&&l&&i&&o&&s?h=ce.vertexDeclaration:t&&e&&i&&o&&s&&a?h=oe.vertexDeclaration:t&&e&&i&&o&&s?h=re.vertexDeclaration:t&&e&&n&&o&&s&&a?h=Lt.vertexDeclaration:t&&e&&n&&o&&s?h=Ot.vertexDeclaration:t&&e&&n&&i&&r&&a?h=zt.vertexDeclaration:t&&e&&n&&i&&r?h=Ut.vertexDeclaration:t&&e&&i&&r&&a?h=ie.vertexDeclaration:t&&e&&i&&r?h=$t.vertexDeclaration:t&&e&&n&&i&&a?h=Yt.vertexDeclaration:t&&e&&i&&a&&l?h=ue.vertexDeclaration:t&&e&&n&&i?h=Nt.vertexDeclaration:t&&e&&i&&a?h=le.vertexDeclaration:t&&e&&i?h=Jt.vertexDeclaration:t&&e&&n&&a?h=Vt.vertexDeclaration:t&&e&&n&&(h=At.vertexDeclaration),h;},a(0,e,"mesh",function(){return this._mesh;}),t._attrReg=new RegExp("(\\w+)|([:,;])","g"),t;}(),ge=function(){function t(){}
return r(t,"laya.d3.loaders.LoadModelV02"),t.parse=function(e,n,i,r,a,o){t._mesh=i,t._materials=r,t._subMeshes=a,t._materialMap=o,t._version=n,t._readData=e,t.READ_DATA(),t.READ_BLOCK(),t.READ_STRINGS();for(var s=0,l=t._BLOCK.count;s<l;s++){t._readData.pos=t._BLOCK.blockStarts[s];var u=t._readData.getUint16(),h=t._strings[u],c=t["READ_"+h];if(null==c)throw new Error("model file err,no this function:"+u+" "+h);c.call();}
t._strings.length=0,t._readData=null,t._version=null,t._mesh=null,t._materials=null,t._subMeshes=null,t._materialMap=null;},t._readString=function(){return t._strings[t._readData.getUint16()];},t.READ_DATA=function(){t._DATA.offset=t._readData.getUint32(),t._DATA.size=t._readData.getUint32();},t.READ_BLOCK=function(){for(var e=t._BLOCK.count=t._readData.getUint16(),n=t._BLOCK.blockStarts=[],i=t._BLOCK.blockLengths=[],r=0;r<e;r++){n.push(t._readData.getUint32()),i.push(t._readData.getUint32());}},t.READ_STRINGS=function(){var e=t._readData.getUint32(),n=t._readData.getUint16(),i=t._readData.pos;t._readData.pos=e+t._DATA.offset;for(var r=0;r<n;r++){t._strings[r]=t._readData.readUTFString();}
t._readData.pos=i;},t.READ_MATERIAL=function(){t._readString(),t._readString();var e=t._readString();return ""!==e&&t._materials.push(v.getRes(t._materialMap[e])),!0;},t.READ_MESH=function(){t._readString();var e=t._readData.__getBuffer(),n=0,i=0,r=t._readData.getInt16(),a=t._DATA.offset;for(n=0;n<r;n++){var o=a+t._readData.getUint32(),s=t._readData.getUint32(),l=new Float32Array(e.slice(o,o+s)),u=t._readString().match(t._attrReg),h=t._getVertexDeclaration(u),c=qn.create(h,4*l.length/h.vertexStride,35044,!0);c.setData(l),t._mesh._vertexBuffers.push(c);}
var _=a+t._readData.getUint32(),f=t._readData.getUint32(),d=new Uint16Array(e.slice(_,_+f)),p=Yn.create("ushort",f/2,35044,!0);p.setData(d),t._mesh._indexBuffer=p;var m=t._mesh._boneNames=[],g=t._readData.getUint16();for(m.length=g,n=0;n<g;n++){m[n]=t._strings[t._readData.getUint16()];}
var y=t._readData.getUint32(),v=t._readData.getUint32(),I=(new Float32Array(e.slice(a+y,a+y+v)),t._readData.getUint32()),x=t._readData.getUint32(),T=new Float32Array(e.slice(a+I,a+I+x));for(t._mesh._inverseBindPoses=[],n=0,i=T.length;n<i;n+=16){var S=new De(T[n+0],T[n+1],T[n+2],T[n+3],T[n+4],T[n+5],T[n+6],T[n+7],T[n+8],T[n+9],T[n+10],T[n+11],T[n+12],T[n+13],T[n+14],T[n+15]);t._mesh._inverseBindPoses.push(S);}
return t._mesh._skinnedDatas=new Float32Array(16*T.length),!0;},t.READ_SUBMESH=function(){var e=t._readData.__getBuffer(),n=new Ne(t._mesh),i=t._readData.getInt16(),r=t._readData.getUint32(),a=t._readData.getUint32();n._vertexBuffer=t._mesh._vertexBuffers[i],n._vertexStart=r,n._vertexCount=a;var o=t._readData.getUint32(),s=t._readData.getUint32(),l=t._mesh._indexBuffer;n._indexBuffer=l,n._indexStart=o,n._indexCount=s,n._indices=new Uint16Array(l.getData().buffer,2*o,s);var u=t._DATA.offset,h=n._subIndexBufferStart,c=n._subIndexBufferCount,_=n._boneIndicesList,f=t._readData.getUint16();h.length=f,c.length=f,_.length=f;for(var d=0;d<f;d++){h[d]=t._readData.getUint32(),c[d]=t._readData.getUint32();var p=t._readData.getUint32(),m=t._readData.getUint32();n._boneIndicesList[d]=new Uint8Array(e.slice(u+p,u+p+m));}
return t._subMeshes.push(n),!0;},t._getVertexDeclaration=function(t){for(var e=!1,n=!1,i=!1,r=!1,a=!1,o=!1,s=!1,l=!1,u=!1,h=0;h<t.length;h++){switch(t[h]){case "POSITION":e=!0;break;case "NORMAL":n=!0;break;case "COLOR":i=!0;break;case "UV":r=!0;break;case "UV1":a=!0;break;case "BLENDWEIGHT":s=!0;break;case "BLENDINDICES":l=!0;break;case "TANGENT":o=!0;break;case "BINORMAL":u=!0;}}
var c;return e&&n&&i&&r&&a&&s&&l&&o?c=kt.vertexDeclaration:e&&n&&i&&r&&a&&s&&l?c=Gt.vertexDeclaration:e&&n&&r&&a&&s&&l&&o?c=ee.vertexDeclaration:e&&n&&r&&a&&s&&l?c=Qt.vertexDeclaration:e&&n&&i&&r&&s&&l&&o?c=Kt.vertexDeclaration:e&&n&&i&&r&&s&&l?c=jt.vertexDeclaration:e&&n&&r&&s&&l&&o?c=oe.vertexDeclaration:e&&n&&r&&s&&l?c=re.vertexDeclaration:e&&n&&i&&s&&l&&o?c=Lt.vertexDeclaration:e&&n&&i&&s&&l?c=Ot.vertexDeclaration:e&&n&&i&&r&&a&&o?c=zt.vertexDeclaration:e&&n&&i&&r&&a?c=Ut.vertexDeclaration:e&&n&&r&&a&&o?c=ie.vertexDeclaration:e&&n&&r&&a?c=$t.vertexDeclaration:e&&n&&i&&r&&o?c=Yt.vertexDeclaration:e&&n&&r&&o&&u?c=ue.vertexDeclaration:e&&n&&i&&r?c=Nt.vertexDeclaration:e&&n&&r&&o?c=le.vertexDeclaration:e&&n&&r?c=Jt.vertexDeclaration:e&&n&&i&&o?c=Vt.vertexDeclaration:e&&n&&i&&(c=At.vertexDeclaration),c;},t._attrReg=new RegExp("(\\w+)|([:,;])","g"),t._strings=[],t._readData=null,t._version=null,t._mesh=null,t._materials=null,t._subMeshes=null,t._materialMap=null,i(t,["_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]),t;}(),ye=function(){function t(){}
return r(t,"laya.d3.loaders.LoadModelV03"),t.parse=function(e,n,i,r,a){t._mesh=i,t._subMeshes=r,t._materialMap=a,t._version=n,t._readData=e,t.READ_DATA(),t.READ_BLOCK(),t.READ_STRINGS();for(var o=0,s=t._BLOCK.count;o<s;o++){t._readData.pos=t._BLOCK.blockStarts[o];var l=t._readData.getUint16(),u=t._strings[l],h=t["READ_"+u];if(null==h)throw new Error("model file err,no this function:"+l+" "+u);h.call();}
t._strings.length=0,t._readData=null,t._version=null,t._mesh=null,t._subMeshes=null,t._materialMap=null;},t._readString=function(){return t._strings[t._readData.getUint16()];},t.READ_DATA=function(){t._DATA.offset=t._readData.getUint32(),t._DATA.size=t._readData.getUint32();},t.READ_BLOCK=function(){for(var e=t._BLOCK.count=t._readData.getUint16(),n=t._BLOCK.blockStarts=[],i=t._BLOCK.blockLengths=[],r=0;r<e;r++){n.push(t._readData.getUint32()),i.push(t._readData.getUint32());}},t.READ_STRINGS=function(){var e=t._readData.getUint32(),n=t._readData.getUint16(),i=t._readData.pos;t._readData.pos=e+t._DATA.offset;for(var r=0;r<n;r++){t._strings[r]=t._readData.readUTFString();}
t._readData.pos=i;},t.READ_MESH=function(){t._readString();var e=t._readData.__getBuffer(),n=0,i=0,r=t._readData.getInt16(),a=t._DATA.offset;for(n=0;n<r;n++){var o,s=a+t._readData.getUint32(),l=t._readData.getUint32(),u=new Float32Array(e.slice(s,s+l)),h=t._readString();switch(t._version){case "LAYAMODEL:03":o=t._vertexDeclarationMap_Discard[h];break;case "LAYAMODEL:0301":o=t._vertexDeclarationMap[h];break;default:throw new Error("LoadModelV03: unknown version.");}
if(!o)throw new Error("LoadModelV03: unknown vertexDeclaration.");var c=qn.create(o,4*u.length/o.vertexStride,35044,!0);c.setData(u),t._mesh._vertexBuffers.push(c);}
var _=a+t._readData.getUint32(),f=t._readData.getUint32(),d=new Uint16Array(e.slice(_,_+f)),p=Yn.create("ushort",f/2,35044,!0);p.setData(d),t._mesh._indexBuffer=p;var m=t._mesh._boneNames=[],g=t._readData.getUint16();for(m.length=g,n=0;n<g;n++){m[n]=t._strings[t._readData.getUint16()];}
t._readData.pos+=8;var y=t._readData.getUint32(),v=t._readData.getUint32(),I=new Float32Array(e.slice(a+y,a+y+v));for(t._mesh._inverseBindPoses=[],n=0,i=I.length;n<i;n+=16){var x=new De(I[n+0],I[n+1],I[n+2],I[n+3],I[n+4],I[n+5],I[n+6],I[n+7],I[n+8],I[n+9],I[n+10],I[n+11],I[n+12],I[n+13],I[n+14],I[n+15]);t._mesh._inverseBindPoses.push(x);}
return t._mesh._skinnedDatas=new Float32Array(16*I.length),!0;},t.READ_SUBMESH=function(){var e=t._readData.__getBuffer(),n=new Ne(t._mesh),i=t._readData.getInt16(),r=t._readData.getUint32(),a=t._readData.getUint32();n._vertexBuffer=t._mesh._vertexBuffers[i],n._vertexStart=r,n._vertexCount=a;var o=t._readData.getUint32(),s=t._readData.getUint32(),l=t._mesh._indexBuffer;n._indexBuffer=l,n._indexStart=o,n._indexCount=s,n._indices=new Uint16Array(l.getData().buffer,2*o,s);var u=t._DATA.offset,h=n._subIndexBufferStart,c=n._subIndexBufferCount,_=n._boneIndicesList,f=t._readData.getUint16();h.length=f,c.length=f,_.length=f;for(var d=0;d<f;d++){h[d]=t._readData.getUint32(),c[d]=t._readData.getUint32();var p=t._readData.getUint32(),m=t._readData.getUint32();_[d]=new Uint8Array(e.slice(u+p,u+p+m));}
return t._subMeshes.push(n),!0;},t._strings=[],t._readData=null,t._version=null,t._mesh=null,t._subMeshes=null,t._materialMap=null,i(t,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":kt.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":Gt.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":he.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":ee.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":Qt.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":Kt.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":jt.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":oe.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":re.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":Lt.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":Ot.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":zt.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":Ut.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":ie.vertexDeclaration,"POSITION,NORMAL,UV,UV1":$t.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":Yt.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":ue.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":Nt.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":le.vertexDeclaration,"POSITION,NORMAL,UV":Jt.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":Vt.vertexDeclaration,"POSITION,NORMAL,COLOR":At.vertexDeclaration,"POSITION,NORMAL,TANGENT":Zt.vertexDeclaration,"POSITION,NORMAL":Mt.vertexDeclaration,"POSITION,UV":fe.vertexDeclaration,POSITION:Pt.vertexDeclaration};},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":Bt.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":Gt.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":he.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":te.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":Qt.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":Wt.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":jt.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":ae.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":re.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":Rt.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":Ot.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":Ht.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":Ut.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":ne.vertexDeclaration,"POSITION,NORMAL,UV,UV1":$t.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":Xt.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":ue.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":Nt.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":se.vertexDeclaration,"POSITION,NORMAL,UV":Jt.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":Ft.vertexDeclaration,"POSITION,NORMAL,COLOR":At.vertexDeclaration,"POSITION,NORMAL,TANGENT":qt.vertexDeclaration,"POSITION,NORMAL":Mt.vertexDeclaration,"POSITION,UV":fe.vertexDeclaration,POSITION:Pt.vertexDeclaration};},"_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]),t;}(),ve=function(){function t(){}
return r(t,"laya.d3.loaders.MeshReader"),t.read=function(e,n,i,r,a){var o=new d(e);o.pos=0;var s=o.readUTFString();switch(s){case "LAYAMODEL:01":case "LAYASKINANI:01":t._readVersion01(o,s,n,i,r,a);break;case "LAYAMODEL:02":ge.parse(o,s,n,i,r,a);break;case "LAYAMODEL:03":case "LAYAMODEL:0301":ye.parse(o,s,n,r,a);break;default:throw new Error("MeshReader: unknown mesh version.");}
n._setSubMeshes(r);},t._readVersion01=function(t,e,n,i,r,a){new me(t,e,n,i,r,a);},t;}(),Ie=function(){function t(t,e){this.min=null,this.max=null,this.min=t,this.max=e;}
r(t,"laya.d3.math.BoundBox");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.getCorners=function(t){t.length=8;var e=this.min.elements,n=this.max.elements,i=e[0],r=e[1],a=e[2],o=n[0],s=n[1],l=n[2];t[0]=new Re(i,s,l),t[1]=new Re(o,s,l),t[2]=new Re(o,r,l),t[3]=new Re(i,r,l),t[4]=new Re(i,s,a),t[5]=new Re(o,s,a),t[6]=new Re(o,r,a),t[7]=new Re(i,r,a);},e.toDefault=function(){this.min.toDefault(),this.max.toDefault();},e.cloneTo=function(t){var e=t;this.min.cloneTo(e.min),this.max.cloneTo(e.max);},e.clone=function(){var t=new this.constructor(new Re(),new Re());return this.cloneTo(t),t;},t.createfromPoints=function(t,e){if(null==t)throw new Error("points");var n=e.min,i=e.max,r=n.elements;r[0]=Number.MAX_VALUE,r[1]=Number.MAX_VALUE,r[2]=Number.MAX_VALUE;var a=i.elements;a[0]=-Number.MAX_VALUE,a[1]=-Number.MAX_VALUE,a[2]=-Number.MAX_VALUE;for(var o=0,s=t.length;o<s;++o){Re.min(n,t[o],n),Re.max(i,t[o],i);}},t.merge=function(t,e,n){Re.min(t.min,e.min,n.min),Re.max(t.max,e.max,n.max);},t;}(),xe=function(){function t(e){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=e,this._near=new Ee(new Re()),this._far=new Ee(new Re()),this._left=new Ee(new Re()),this._right=new Ee(new Re()),this._top=new Ee(new Re()),this._bottom=new Ee(new Re()),t._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom);}
r(t,"laya.d3.math.BoundFrustum");var e=t.prototype;return e.equalsBoundFrustum=function(t){return this._matrix.equalsOtherMatrix(t.matrix);},e.equalsObj=function(t){if(t instanceof laya.d3.math.BoundFrustum){var e=t;return this.equalsBoundFrustum(e);}
return!1;},e.getPlane=function(t){switch(t){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null;}},e.getCorners=function(e){t._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(e[0]),t._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(e[1]),t._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(e[2]),t._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(e[3]),t._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(e[4]),t._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(e[5]),t._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(e[6]),t._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(e[7]);},e.containsPoint=function(t){for(var e=Ee.PlaneIntersectionType_Front,n=Ee.PlaneIntersectionType_Front,i=0;i<6;i++){switch(i){case 0:n=Se.intersectsPlaneAndPoint(this._near,t);break;case 1:n=Se.intersectsPlaneAndPoint(this._far,t);break;case 2:n=Se.intersectsPlaneAndPoint(this._left,t);break;case 3:n=Se.intersectsPlaneAndPoint(this._right,t);break;case 4:n=Se.intersectsPlaneAndPoint(this._top,t);break;case 5:n=Se.intersectsPlaneAndPoint(this._bottom,t);}
switch(n){case Ee.PlaneIntersectionType_Back:return 0;case Ee.PlaneIntersectionType_Intersecting:e=Ee.PlaneIntersectionType_Intersecting;}}
switch(e){case Ee.PlaneIntersectionType_Intersecting:return 2;default:return 1;}},e.containsBoundBox=function(e){for(var n,i=t._tempV30,r=t._tempV31,a=1,o=0;o<6;o++){if(n=this.getPlane(o),this._getBoxToPlanePVertexNVertex(e,n.normal,i,r),Se.intersectsPlaneAndPoint(n,i)===Ee.PlaneIntersectionType_Back)return 0;Se.intersectsPlaneAndPoint(n,r)===Ee.PlaneIntersectionType_Back&&(a=2);}
return a;},e.containsBoundSphere=function(t){for(var e=Ee.PlaneIntersectionType_Front,n=Ee.PlaneIntersectionType_Front,i=0;i<6;i++){switch(i){case 0:n=Se.intersectsPlaneAndSphere(this._near,t);break;case 1:n=Se.intersectsPlaneAndSphere(this._far,t);break;case 2:n=Se.intersectsPlaneAndSphere(this._left,t);break;case 3:n=Se.intersectsPlaneAndSphere(this._right,t);break;case 4:n=Se.intersectsPlaneAndSphere(this._top,t);break;case 5:n=Se.intersectsPlaneAndSphere(this._bottom,t);}
switch(n){case Ee.PlaneIntersectionType_Back:return 0;case Ee.PlaneIntersectionType_Intersecting:e=Ee.PlaneIntersectionType_Intersecting;}}
switch(e){case Ee.PlaneIntersectionType_Intersecting:return 2;default:return 1;}},e._getBoxToPlanePVertexNVertex=function(t,e,n,i){var r=t.min,a=r.elements,o=t.max,s=o.elements,l=e.elements,u=l[0],h=l[1],c=l[2];r.cloneTo(n);var _=n.elements;u>=0&&(_[0]=s[0]),h>=0&&(_[1]=s[1]),c>=0&&(_[2]=s[2]),o.cloneTo(i);var f=i.elements;u>=0&&(f[0]=a[0]),h>=0&&(f[1]=a[1]),c>=0&&(f[2]=a[2]);},a(0,e,"top",function(){return this._top;}),a(0,e,"matrix",function(){return this._matrix;},function(e){this._matrix=e,t._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom);}),a(0,e,"near",function(){return this._near;}),a(0,e,"far",function(){return this._far;}),a(0,e,"left",function(){return this._left;}),a(0,e,"right",function(){return this._right;}),a(0,e,"bottom",function(){return this._bottom;}),t._getPlanesFromMatrix=function(t,e,n,i,r,a,o){var s=t.elements,l=s[0],u=s[1],h=s[2],c=s[3],_=s[4],f=s[5],d=s[6],p=s[7],m=s[8],g=s[9],y=s[10],v=s[11],I=s[12],x=s[13],T=s[14],S=s[15],b=e.normal.elements;b[0]=c+h,b[1]=p+d,b[2]=v+y,e.distance=S+T,e.normalize();var w=n.normal.elements;w[0]=c-h,w[1]=p-d,w[2]=v-y,n.distance=S-T,n.normalize();var D=i.normal.elements;D[0]=c+l,D[1]=p+_,D[2]=v+m,i.distance=S+I,i.normalize();var C=r.normal.elements;C[0]=c-l,C[1]=p-_,C[2]=v-m,r.distance=S-I,r.normalize();var E=a.normal.elements;E[0]=c-u,E[1]=p-f,E[2]=v-g,a.distance=S-x,a.normalize();var P=o.normal.elements;P[0]=c+u,P[1]=p+f,P[2]=v+g,o.distance=S+x,o.normalize();},t._get3PlaneInterPoint=function(e,n,i){var r=e.normal,a=n.normal,o=i.normal;Re.cross(a,o,t._tempV30),Re.cross(o,r,t._tempV31),Re.cross(r,a,t._tempV32);var s=Re.dot(r,t._tempV30),l=Re.dot(a,t._tempV31),u=Re.dot(o,t._tempV32);Re.scale(t._tempV30,-e.distance/s,t._tempV33),Re.scale(t._tempV31,-n.distance/l,t._tempV34),Re.scale(t._tempV32,-i.distance/u,t._tempV35),Re.add(t._tempV33,t._tempV34,t._tempV36),Re.add(t._tempV35,t._tempV36,t._tempV37);return t._tempV37;},i(t,["_tempV30",function(){return this._tempV30=new Re();},"_tempV31",function(){return this._tempV31=new Re();},"_tempV32",function(){return this._tempV32=new Re();},"_tempV33",function(){return this._tempV33=new Re();},"_tempV34",function(){return this._tempV34=new Re();},"_tempV35",function(){return this._tempV35=new Re();},"_tempV36",function(){return this._tempV36=new Re();},"_tempV37",function(){return this._tempV37=new Re();}]),t;}(),Te=function(){function t(t,e){this.center=null,this.radius=NaN,this.center=t,this.radius=e;}
r(t,"laya.d3.math.BoundSphere");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.toDefault=function(){this.center.toDefault(),this.radius=0;},e.intersectsRayDistance=function(t){return Se.intersectsRayAndSphereRD(t,this);},e.intersectsRayPoint=function(t,e){return Se.intersectsRayAndSphereRP(t,this,e);},e.cloneTo=function(t){var e=t;this.center.cloneTo(e.center),e.radius=this.radius;},e.clone=function(){var t=new this.constructor(new Re(),new Re());return this.cloneTo(t),t;},t.createFromSubPoints=function(e,n,i,r){if(null==e)throw new Error("points");if(n<0||n>=e.length)throw new Error("start"+n+"Must be in the range [0, "+(e.length-1)+"]");if(i<0||n+i>e.length)throw new Error("count"+i+"Must be in the range <= "+e.length+"}");var a=n+i,o=t._tempVector3;o.elements[0]=0,o.elements[1]=0,o.elements[2]=0;for(var s=n;s<a;++s){Re.add(e[s],o,o);}
var l=r.center;Re.scale(o,1/i,l);var u=0;for(s=n;s<a;++s){var h=Re.distanceSquared(l,e[s]);h>u&&(u=h);}
r.radius=Math.sqrt(u);},t.createfromPoints=function(e,n){if(null==e)throw new Error("points");t.createFromSubPoints(e,0,e.length,n);},i(t,["_tempVector3",function(){return this._tempVector3=new Re();}]),t;}(),Se=function(){function t(){}
return r(t,"laya.d3.math.Collision"),t.distancePlaneToPoint=function(t,e){return Re.dot(t.normal,e)-t.distance;},t.distanceBoxToPoint=function(t,e){var n=t.min.elements,i=n[0],r=n[1],a=n[2],o=t.max.elements,s=o[0],l=o[1],u=o[2],h=e.elements,c=h[0],_=h[1],f=h[2],d=0;return c<i&&(d+=(i-c)*(i-c)),c>s&&(d+=(s-c)*(s-c)),_<r&&(d+=(r-_)*(r-_)),_>l&&(d+=(l-_)*(l-_)),f<a&&(d+=(a-f)*(a-f)),f>u&&(d+=(u-f)*(u-f)),Math.sqrt(d);},t.distanceBoxToBox=function(t,e){var n=t.min.elements,i=n[0],r=n[1],a=n[2],o=t.max.elements,s=o[0],l=o[1],u=o[2],h=e.min.elements,c=h[0],_=h[1],f=h[2],d=e.max.elements,p=d[0],m=d[1],g=d[2],y=0,v=NaN;return i>p?y+=(v=i-p)*v:c>s&&(y+=(v=c-s)*v),r>m?y+=(v=r-m)*v:_>l&&(y+=(v=_-l)*v),a>g?y+=(v=a-g)*v:f>u&&(y+=(v=f-u)*v),Math.sqrt(y);},t.distanceSphereToPoint=function(t,e){var n=Math.sqrt(Re.distanceSquared(t.center,e));return n-=t.radius,Math.max(n,0);},t.distanceSphereToSphere=function(t,e){var n=Math.sqrt(Re.distanceSquared(t.center,e.center));return n-=t.radius+e.radius,Math.max(n,0);},t.intersectsRayAndTriangleRD=function(e,n,i,r,a){var o=e.origin.elements,s=o[0],l=o[1],u=o[2],h=e.direction.elements,c=h[0],_=h[1],f=h[2],d=n.elements,p=d[0],m=d[1],g=d[2],y=i.elements,v=y[0],I=y[1],x=y[2],T=r.elements,S=T[0],b=T[1],w=T[2],D=t._tempV30.elements,C=D[0],E=D[1],P=D[2];C=v-p,E=I-m,P=x-g;var M=t._tempV31.elements,A=M[0],O=M[1],R=M[2];A=S-p,O=b-m,R=w-g;var L=t._tempV32.elements,F=L[0],V=L[1],N=L[2],U=C*(F=_*R-f*O)+E*(V=f*A-c*R)+P*(N=c*O-_*A);if(be.isZero(U))return 0,!1;var G=1/U,B=t._tempV33.elements,k=B[0],H=B[1],z=B[2],j=(k=s-p)*F+(H=l-m)*V+(z=u-g)*N;if((j*=G)<0||j>1)return 0,!1;var W=t._tempV34.elements,K=W[0],X=W[1],Y=W[2],q=c*(K=H*P-z*E)+_*(X=z*C-k*P)+f*(Y=k*E-H*C);if((q*=G)<0||j+q>1)return 0,!1;var Z=A*K+O*X+R*Y;return(Z*=G)<0?(0,!1):(Z,!0);},t.intersectsRayAndTriangleRP=function(e,n,i,r,a){return t.intersectsRayAndTriangleRD(e,n,i,r,NaN)?(Re.scale(e.direction,NaN,t._tempV30),Re.add(e.origin,t._tempV30,a),!0):(a=Re.ZERO,!1);},t.intersectsRayAndPoint=function(e,n){Re.subtract(e.origin,n,t._tempV30);var i=Re.dot(t._tempV30,e.direction),r=Re.dot(t._tempV30,t._tempV30)-be.zeroTolerance;if(r>0&&i>0)return!1;return!(i*i-r<0);},t.intersectsRayAndRay=function(e,n,i){var r=e.origin,a=r.elements,o=a[0],s=a[1],l=a[2],u=e.direction,h=u.elements,c=h[0],_=h[1],f=h[2],d=n.origin,p=d.elements,m=p[0],g=p[1],y=p[2],v=n.direction,I=v.elements,x=I[0],T=I[1],S=I[2];Re.cross(u,v,t._tempV30);var b=t._tempV30.elements,w=Re.scalarLengthSquared(t._tempV30);if(be.isZero(w)&&be.nearEqual(m,o)&&be.nearEqual(g,s)&&be.nearEqual(y,l))return Re.ZERO.cloneTo(i),!0;var D=m-o,C=g-s,E=y-l,P=x,M=T,A=S,O=b[0],R=b[1],L=b[2],F=(D*M*L+C*A*O+E*P*R-D*A*R-C*P*L-E*M*O)/w,V=(D*(M=_)*L+C*(A=f)*O+E*(P=c)*R-D*A*R-C*P*L-E*M*O)/w;Re.scale(u,F,t._tempV30),Re.scale(v,V,t._tempV31),Re.add(r,t._tempV30,t._tempV32),Re.add(d,t._tempV31,t._tempV33);var N=t._tempV32.elements,U=t._tempV33.elements;return be.nearEqual(U[0],N[0])&&be.nearEqual(U[1],N[1])&&be.nearEqual(U[2],N[2])?(t._tempV32.cloneTo(i),!0):(Re.ZERO.cloneTo(i),!1);},t.intersectsPlaneAndTriangle=function(e,n,i,r){var a=t.intersectsPlaneAndPoint(e,n),o=t.intersectsPlaneAndPoint(e,i),s=t.intersectsPlaneAndPoint(e,r);return a==Ee.PlaneIntersectionType_Front&&o==Ee.PlaneIntersectionType_Front&&s==Ee.PlaneIntersectionType_Front?Ee.PlaneIntersectionType_Front:a==Ee.PlaneIntersectionType_Back&&o==Ee.PlaneIntersectionType_Back&&s==Ee.PlaneIntersectionType_Back?Ee.PlaneIntersectionType_Back:Ee.PlaneIntersectionType_Intersecting;},t.intersectsRayAndPlaneRD=function(t,e,n){var i=e.normal,r=Re.dot(i,t.direction);if(be.isZero(r))return 0,!1;var a=Re.dot(i,t.origin);return!((-e.distance-a)/r<0);},t.intersectsRayAndPlaneRP=function(e,n,i){return t.intersectsRayAndPlaneRD(e,n,NaN)?(Re.scale(e.direction,NaN,t._tempV30),Re.add(e.origin,t._tempV30,t._tempV31),t._tempV31,!0):(Re.ZERO,!1);},t.intersectsRayAndBoxRD=function(t,e){var n=t.origin.elements,i=n[0],r=n[1],a=n[2],o=t.direction.elements,s=o[0],l=o[1],u=o[2],h=e.min.elements,c=h[0],_=h[1],f=h[2],d=e.max.elements,p=d[0],m=d[1],g=d[2],y=0,v=be.MaxValue;if(be.isZero(s)){if(i<c||i>p)return-1;}else{var I=1/s,x=(c-i)*I,T=(p-i)*I;if(x>T){var S=x;x=T,T=S;}
if(y=Math.max(x,y),v=Math.min(T,v),y>v)return-1;}
if(be.isZero(l)){if(r<_||r>m)return-1;}else{var b=1/l,w=(_-r)*b,D=(m-r)*b;if(w>D){var C=w;w=D,D=C;}
if(y=Math.max(w,y),v=Math.min(D,v),y>v)return-1;}
if(be.isZero(u)){if(a<f||a>g)return-1;}else{var E=1/u,P=(f-a)*E,M=(g-a)*E;if(P>M){var A=P;P=M,M=A;}
if(y=Math.max(P,y),v=Math.min(M,v),y>v)return-1;}
return y;},t.intersectsRayAndBoxRP=function(e,n,i){var r=t.intersectsRayAndBoxRD(e,n);return-1===r?(Re.ZERO.cloneTo(i),r):(Re.scale(e.direction,r,t._tempV30),Re.add(e.origin,t._tempV30,t._tempV31),t._tempV31.cloneTo(i),r);},t.intersectsRayAndSphereRD=function(e,n){var i=n.radius;Re.subtract(e.origin,n.center,t._tempV30);var r=Re.dot(t._tempV30,e.direction),a=Re.dot(t._tempV30,t._tempV30)-i*i;if(a>0&&r>0)return-1;var o=r*r-a;if(o<0)return-1;var s=-r-Math.sqrt(o);return s<0&&(s=0),s;},t.intersectsRayAndSphereRP=function(e,n,i){var r=t.intersectsRayAndSphereRD(e,n);return-1===r?(Re.ZERO.cloneTo(i),r):(Re.scale(e.direction,r,t._tempV30),Re.add(e.origin,t._tempV30,t._tempV31),t._tempV31.cloneTo(i),r);},t.intersectsSphereAndTriangle=function(e,n,i,r){var a=e.center,o=e.radius;t.closestPointPointTriangle(a,n,i,r,t._tempV30),Re.subtract(t._tempV30,a,t._tempV31);return Re.dot(t._tempV31,t._tempV31)<=o*o;},t.intersectsPlaneAndPoint=function(t,e){var n=Re.dot(t.normal,e)+t.distance;return n>0?Ee.PlaneIntersectionType_Front:n<0?Ee.PlaneIntersectionType_Back:Ee.PlaneIntersectionType_Intersecting;},t.intersectsPlaneAndPlane=function(e,n){Re.cross(e.normal,n.normal,t._tempV30);var i=Re.dot(t._tempV30,t._tempV30);return!be.isZero(i);},t.intersectsPlaneAndPlaneRL=function(e,n,i){var r=e.normal,a=n.normal;Re.cross(r,a,t._tempV34);var o=Re.dot(t._tempV34,t._tempV34);return!be.isZero(o)&&(Re.scale(a,e.distance,t._tempV30),Re.scale(r,n.distance,t._tempV31),Re.subtract(t._tempV30,t._tempV31,t._tempV32),Re.cross(t._tempV32,t._tempV34,t._tempV33),Re.normalize(t._tempV34,t._tempV34),new Ae(t._tempV33,t._tempV34),!0);},t.intersectsPlaneAndBox=function(e,n){var i=e.distance,r=e.normal,a=r.elements,o=a[0],s=a[1],l=a[2],u=n.min.elements,h=u[0],c=u[1],_=u[2],f=n.max.elements,d=f[0],p=f[1],m=f[2];t._tempV30.elements[0]=o>0?h:d,t._tempV30.elements[1]=s>0?c:p,t._tempV30.elements[2]=l>0?_:m,t._tempV31.elements[0]=o>0?d:h,t._tempV31.elements[1]=s>0?p:c,t._tempV31.elements[2]=l>0?m:_;var g=Re.dot(r,t._tempV30);return g+i>0?Ee.PlaneIntersectionType_Front:(g=Re.dot(r,t._tempV31))+i<0?Ee.PlaneIntersectionType_Back:Ee.PlaneIntersectionType_Intersecting;},t.intersectsPlaneAndSphere=function(t,e){var n=e.radius,i=Re.dot(t.normal,e.center)+t.distance;return i>n?Ee.PlaneIntersectionType_Front:i<-n?Ee.PlaneIntersectionType_Back:Ee.PlaneIntersectionType_Intersecting;},t.intersectsBoxAndBox=function(t,e){var n=t.min.elements,i=t.max.elements,r=e.min.elements,a=e.max.elements;return!(n[0]>a[0]||r[0]>i[0])&&!(n[1]>a[1]||r[1]>i[1])&&!(n[2]>a[2]||r[2]>i[2]);},t.intersectsBoxAndSphere=function(e,n){var i=n.center,r=n.radius;Re.Clamp(i,e.min,e.max,t._tempV30);return Re.distanceSquared(i,t._tempV30)<=r*r;},t.intersectsSphereAndSphere=function(t,e){var n=t.radius+e.radius;return Re.distanceSquared(t.center,e.center)<=n*n;},t.boxContainsPoint=function(t,e){var n=t.min.elements,i=t.max.elements,r=e.elements;return n[0]<=r[0]&&i[0]>=r[0]&&n[1]<=r[1]&&i[1]>=r[1]&&n[2]<=r[2]&&i[2]>=r[2]?1:0;},t.boxContainsBox=function(t,e){var n=t.min.elements,i=n[0],r=n[1],a=n[2],o=t.max.elements,s=o[0],l=o[1],u=o[2],h=e.min.elements,c=h[0],_=h[1],f=h[2],d=e.max.elements,p=d[0],m=d[1],g=d[2];return s<c||i>p?0:l<_||r>m?0:u<f||a>g?0:i<=c&&p<=p&&r<=_&&m<=l&&a<=f&&g<=u?1:2;},t.boxContainsSphere=function(e,n){var i=e.min,r=i.elements,a=r[0],o=r[1],s=r[2],l=e.max,u=l.elements,h=u[0],c=u[1],_=u[2],f=n.center,d=f.elements,p=d[0],m=d[1],g=d[2],y=n.radius;Re.Clamp(f,i,l,t._tempV30);return Re.distanceSquared(f,t._tempV30)>y*y?0:a+y<=p&&p<=h-y&&h-a>y&&o+y<=m&&m<=c-y&&c-o>y&&s+y<=g&&g<=_-y&&_-s>y?1:2;},t.sphereContainsPoint=function(t,e){return Re.distanceSquared(e,t.center)<=t.radius*t.radius?1:0;},t.sphereContainsTriangle=function(e,n,i,r){var a=t.sphereContainsPoint(e,n),o=t.sphereContainsPoint(e,i),s=t.sphereContainsPoint(e,r);return 1==a&&1==o&&1==s?1:t.intersectsSphereAndTriangle(e,n,i,r)?2:0;},t.sphereContainsBox=function(e,n){var i=e.center.elements,r=i[0],a=i[1],o=i[2],s=e.radius,l=n.min.elements,u=l[0],h=l[1],c=l[2],_=n.max.elements,f=_[0],d=_[1],p=_[2],m=t._tempV30.elements;m[0],m[1],m[2];if(!t.intersectsBoxAndSphere(n,e))return 0;var g=s*s;return r-u,a-d,o-p,Re.scalarLengthSquared(t._tempV30)>g?2:(r-f,a-d,o-p,Re.scalarLengthSquared(t._tempV30)>g?2:(r-f,a-h,o-p,Re.scalarLengthSquared(t._tempV30)>g?2:(r-u,a-h,o-p,Re.scalarLengthSquared(t._tempV30)>g?2:(r-u,a-d,o-c,Re.scalarLengthSquared(t._tempV30)>g?2:(r-f,a-d,o-c,Re.scalarLengthSquared(t._tempV30)>g?2:(r-f,a-h,o-c,Re.scalarLengthSquared(t._tempV30)>g?2:(r-u,a-h,o-c,Re.scalarLengthSquared(t._tempV30)>g?2:1)))))));},t.sphereContainsSphere=function(t,e){var n=t.radius,i=e.radius,r=Re.distance(t.center,e.center);return n+i<r?0:n-i<r?2:1;},t.closestPointPointTriangle=function(e,n,i,r,a){Re.subtract(i,n,t._tempV30),Re.subtract(r,n,t._tempV31),Re.subtract(e,n,t._tempV32),Re.subtract(e,i,t._tempV33),Re.subtract(e,r,t._tempV34);var o=Re.dot(t._tempV30,t._tempV32),s=Re.dot(t._tempV31,t._tempV32),l=Re.dot(t._tempV30,t._tempV33),u=Re.dot(t._tempV31,t._tempV33),h=Re.dot(t._tempV30,t._tempV34),c=Re.dot(t._tempV31,t._tempV34);if(o<=0&&s<=0)n.cloneTo(a);else if(l>=0&&u<=l)i.cloneTo(a);else{var _=o*u-l*s;if(_<=0&&o>=0&&l<=0){var f=o/(o-l);return Re.scale(t._tempV30,f,a),void Re.add(n,a,a);}
if(c>=0&&h<=c)r.cloneTo(a);else{var d=h*s-o*c;if(d<=0&&s>=0&&c<=0){var p=s/(s-c);return Re.scale(t._tempV31,p,a),void Re.add(n,a,a);}
var m=l*c-h*u;if(m<=0&&u-l>=0&&h-c>=0){var g=(u-l)/(u-l+(h-c));return Re.subtract(r,i,a),Re.scale(a,g,a),void Re.add(i,a,a);}
var y=1/(m+d+_),v=d*y,I=_*y;Re.scale(t._tempV30,v,t._tempV35),Re.scale(t._tempV31,I,t._tempV36),Re.add(t._tempV35,t._tempV36,a),Re.add(n,a,a);}}},t.closestPointPlanePoint=function(e,n,i){var r=e.normal,a=Re.dot(r,n)-e.distance;Re.scale(r,a,t._tempV30),Re.subtract(n,t._tempV30,i);},t.closestPointBoxPoint=function(e,n,i){Re.max(n,e.min,t._tempV30),Re.min(t._tempV30,e.max,i);},t.closestPointSpherePoint=function(t,e,n){var i=t.center;Re.subtract(e,i,n),Re.normalize(n,n),Re.scale(n,t.radius,n),Re.add(n,i,n);},t.closestPointSphereSphere=function(t,e,n){var i=t.center;Re.subtract(e.center,i,n),Re.normalize(n,n),Re.scale(n,t.radius,n),Re.add(n,i,n);},i(t,["_tempV30",function(){return this._tempV30=new Re();},"_tempV31",function(){return this._tempV31=new Re();},"_tempV32",function(){return this._tempV32=new Re();},"_tempV33",function(){return this._tempV33=new Re();},"_tempV34",function(){return this._tempV34=new Re();},"_tempV35",function(){return this._tempV35=new Re();},"_tempV36",function(){return this._tempV36=new Re();}]),t;}(),be=(function(){function t(){}
r(t,"laya.d3.math.ContainmentType"),t.Disjoint=0,t.Contains=1,t.Intersects=2;}(),function(){function t(){}
return r(t,"laya.d3.math.MathUtils3D"),t.isZero=function(e){return Math.abs(e)<t.zeroTolerance;},t.nearEqual=function(e,n){return!!t.isZero(e-n);},t.fastInvSqrt=function(e){return t.isZero(e)?e:1/Math.sqrt(e);},i(t,["zeroTolerance",function(){return this.zeroTolerance=1e-6;},"MaxValue",function(){return this.MaxValue=3.40282347e38;},"MinValue",function(){return this.MinValue=-3.40282347e38;}]),t;}()),we=function(){function t(){var t=this.elements=new Float32Array(9);t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1;}
r(t,"laya.d3.math.Matrix3x3");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.determinant=function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8];return e*(u*a-o*l)+n*(-u*r+o*s)+i*(l*r-a*s);},e.translate=function(t,e){var n=e.elements,i=this.elements,r=t.elements,a=i[0],o=i[1],s=i[2],l=i[3],u=i[4],h=i[5],c=i[6],_=i[7],f=i[8],d=r[0],p=r[1];n[0]=a,n[1]=o,n[2]=s,n[3]=l,n[4]=u,n[5]=h,n[6]=d*a+p*l+c,n[7]=d*o+p*u+_,n[8]=d*s+p*h+f;},e.rotate=function(t,e){var n=e.elements,i=this.elements,r=i[0],a=i[1],o=i[2],s=i[3],l=i[4],u=i[5],h=i[6],c=i[7],_=i[8],f=Math.sin(t),d=Math.cos(t);n[0]=d*r+f*s,n[1]=d*a+f*l,n[2]=d*o+f*u,n[3]=d*s-f*r,n[4]=d*l-f*a,n[5]=d*u-f*o,n[6]=h,n[7]=c,n[8]=_;},e.scale=function(t,e){var n=e.elements,i=this.elements,r=t.elements,a=r[0],o=r[1];n[0]=a*i[0],n[1]=a*i[1],n[2]=a*i[2],n[3]=o*i[3],n[4]=o*i[4],n[5]=o*i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8];},e.invert=function(t){var e=t.elements,n=this.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],h=n[7],c=n[8],_=c*s-l*h,f=-c*o+l*u,d=h*o-s*u,p=i*_+r*f+a*d;p||(t=null),p=1/p,e[0]=_*p,e[1]=(-c*r+a*h)*p,e[2]=(l*r-a*s)*p,e[3]=f*p,e[4]=(c*i-a*u)*p,e[5]=(-l*i+a*o)*p,e[6]=d*p,e[7]=(-h*i+r*u)*p,e[8]=(s*i-r*o)*p;},e.transpose=function(t){var e=t.elements,n=this.elements;if(t===this){var i=n[1],r=n[2],a=n[5];e[1]=n[3],e[2]=n[6],e[3]=i,e[5]=n[7],e[6]=r,e[7]=a;}else e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8];},e.identity=function(){var t=this.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1;},e.cloneTo=function(t){var e,n,i;if(n=this.elements,i=t.elements,n!==i)for(e=0;e<9;++e){i[e]=n[e];}},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},t.createFromTranslation=function(t,e){e.elements;var n=t.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=n[0],e[7]=n[1],e[8]=1;},t.createFromRotation=function(t,e){var n=e.elements,i=Math.sin(t),r=Math.cos(t);n[0]=r,n[1]=i,n[2]=0,n[3]=-i,n[4]=r,n[5]=0,n[6]=0,n[7]=0,n[8]=1;},t.createFromScaling=function(t,e){var n=e.elements,i=t.elements;n[0]=i[0],n[1]=0,n[2]=0,n[3]=0,n[4]=i[1],n[5]=0,n[6]=0,n[7]=0,n[8]=1;},t.createFromMatrix4x4=function(t,e){e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10];},t.multiply=function(t,e,n){var i=n.elements,r=t.elements,a=e.elements,o=r[0],s=r[1],l=r[2],u=r[3],h=r[4],c=r[5],_=r[6],f=r[7],d=r[8],p=a[0],m=a[1],g=a[2],y=a[3],v=a[4],I=a[5],x=a[6],T=a[7],S=a[8];i[0]=p*o+m*u+g*_,i[1]=p*s+m*h+g*f,i[2]=p*l+m*c+g*d,i[3]=y*o+v*u+I*_,i[4]=y*s+v*h+I*f,i[5]=y*l+v*c+I*d,i[6]=x*o+T*u+S*_,i[7]=x*s+T*h+S*f,i[8]=x*l+T*c+S*d;},t.lookAt=function(e,n,i,r){Re.subtract(e,n,t._tempV30),Re.normalize(t._tempV30,t._tempV30),Re.cross(i,t._tempV30,t._tempV31),Re.normalize(t._tempV31,t._tempV31),Re.cross(t._tempV30,t._tempV31,t._tempV32);var a=t._tempV30.elements,o=t._tempV31.elements,s=t._tempV32.elements,l=r.elements;l[0]=o[0],l[3]=o[1],l[6]=o[2],l[1]=s[0],l[4]=s[1],l[7]=s[2],l[2]=a[0],l[5]=a[1],l[8]=a[2];},t.DEFAULT=new t(),i(t,["_tempV30",function(){return this._tempV30=new Re();},"_tempV31",function(){return this._tempV31=new Re();},"_tempV32",function(){return this._tempV32=new Re();}]),t;}(),De=function(){function t(t,e,n,i,r,a,o,s,l,u,h,c,_,f,d,p){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===a&&(a=1),void 0===o&&(o=0),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0),void 0===h&&(h=1),void 0===c&&(c=0),void 0===_&&(_=0),void 0===f&&(f=0),void 0===d&&(d=0),void 0===p&&(p=1);var m=this.elements=new Float32Array(16);m[0]=t,m[1]=e,m[2]=n,m[3]=i,m[4]=r,m[5]=a,m[6]=o,m[7]=s,m[8]=l,m[9]=u,m[10]=h,m[11]=c,m[12]=_,m[13]=f,m[14]=d,m[15]=p;}
r(t,"laya.d3.math.Matrix4x4");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.getElementByRowColumn=function(t,e){if(t<0||t>3)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(e<0||e>3)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*t+e];},e.setElementByRowColumn=function(t,e,n){if(t<0||t>3)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(e<0||e>3)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*t+e]=n;},e.equalsOtherMatrix=function(t){var e=this.elements,n=t.elements;return be.nearEqual(e[0],n[0])&&be.nearEqual(e[1],n[1])&&be.nearEqual(e[2],n[2])&&be.nearEqual(e[3],n[3])&&be.nearEqual(e[4],n[4])&&be.nearEqual(e[5],n[5])&&be.nearEqual(e[6],n[6])&&be.nearEqual(e[7],n[7])&&be.nearEqual(e[8],n[8])&&be.nearEqual(e[9],n[9])&&be.nearEqual(e[10],n[10])&&be.nearEqual(e[11],n[11])&&be.nearEqual(e[12],n[12])&&be.nearEqual(e[13],n[13])&&be.nearEqual(e[14],n[14])&&be.nearEqual(e[15],n[15]);},e.decomposeTransRotScale=function(e,n,i){var r=t._tempMatrix4x4;return this.decomposeTransRotMatScale(e,r,i)?(Pe.createFromMatrix4x4(r,n),!0):(n.identity(),!1);},e.decomposeTransRotMatScale=function(e,n,i){var r=this.elements,a=e.elements,o=n.elements,s=i.elements;a[0]=r[12],a[1]=r[13],a[2]=r[14];var l=r[0],u=r[1],h=r[2],c=r[4],_=r[5],f=r[6],d=r[8],p=r[9],m=r[10],g=s[0]=Math.sqrt(l*l+u*u+h*h),y=s[1]=Math.sqrt(c*c+_*_+f*f),v=s[2]=Math.sqrt(d*d+p*p+m*m);if(be.isZero(g)||be.isZero(y)||be.isZero(v))return o[1]=o[2]=o[3]=o[4]=o[6]=o[7]=o[8]=o[9]=o[11]=o[12]=o[13]=o[14]=0,o[0]=o[5]=o[10]=o[15]=1,!1;var I=t._tempVector0,x=I.elements;x[0]=d/v,x[1]=p/v,x[2]=m/v;var T=t._tempVector1,S=T.elements;S[0]=l/g,S[1]=u/g,S[2]=h/g;var b=t._tempVector2;Re.cross(I,T,b);var w=t._tempVector1;return Re.cross(b,I,w),o[3]=o[7]=o[11]=o[12]=o[13]=o[14]=0,o[15]=1,o[0]=w.x,o[1]=w.y,o[2]=w.z,o[4]=b.x,o[5]=b.y,o[6]=b.z,o[8]=I.x,o[9]=I.y,o[10]=I.z,o[0]*l+o[1]*u+o[2]*h<0&&(s[0]=-g),o[4]*c+o[5]*_+o[6]*f<0&&(s[1]=-y),o[8]*d+o[9]*p+o[10]*m<0&&(s[2]=-v),!0;},e.decomposeYawPitchRoll=function(t){var e=t.elements,n=Math.asin(-this.elements[9]);e[1]=n;Math.cos(n)>be.zeroTolerance?(e[2]=Math.atan2(this.elements[1],this.elements[5]),e[0]=Math.atan2(this.elements[8],this.elements[10])):(e[2]=Math.atan2(-this.elements[4],this.elements[0]),e[0]=0);},e.normalize=function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=Math.sqrt(e*e+n*n+i*i);if(!r)return t[0]=0,t[1]=0,void(t[2]=0);1!=r&&(r=1/r,t[0]=e*r,t[1]=n*r,t[2]=i*r);},e.transpose=function(){var t,e;return t=this.elements,e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this;},e.invert=function(t){var e=this.elements,n=t.elements,i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],h=e[7],c=e[8],_=e[9],f=e[10],d=e[11],p=e[12],m=e[13],g=e[14],y=e[15],v=i*l-r*s,I=i*u-a*s,x=i*h-o*s,T=r*u-a*l,S=r*h-o*l,b=a*h-o*u,w=c*m-_*p,D=c*g-f*p,C=c*y-d*p,E=_*g-f*m,P=_*y-d*m,M=f*y-d*g,A=v*M-I*P+x*E+T*C-S*D+b*w;0!==Math.abs(A)&&(A=1/A,n[0]=(l*M-u*P+h*E)*A,n[1]=(a*P-r*M-o*E)*A,n[2]=(m*b-g*S+y*T)*A,n[3]=(f*S-_*b-d*T)*A,n[4]=(u*C-s*M-h*D)*A,n[5]=(i*M-a*C+o*D)*A,n[6]=(g*x-p*b-y*I)*A,n[7]=(c*b-f*x+d*I)*A,n[8]=(s*P-l*C+h*w)*A,n[9]=(r*C-i*P-o*w)*A,n[10]=(p*S-m*x+y*v)*A,n[11]=(_*x-c*S-d*v)*A,n[12]=(l*D-s*E-u*w)*A,n[13]=(i*E-r*D+a*w)*A,n[14]=(m*I-p*T-g*v)*A,n[15]=(c*T-_*I+f*v)*A);},e.identity=function(){var t=this.elements;t[1]=t[2]=t[3]=t[4]=t[6]=t[7]=t[8]=t[9]=t[11]=t[12]=t[13]=t[14]=0,t[0]=t[5]=t[10]=t[15]=1;},e.cloneTo=function(t){var e,n,i;if(n=this.elements,i=t.elements,n!==i)for(e=0;e<16;++e){i[e]=n[e];}},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},e.getTranslationVector=function(t){var e=this.elements,n=t.elements;n[0]=e[12],n[1]=e[13],n[2]=e[14];},e.setTranslationVector=function(t){var e=this.elements,n=t.elements;e[12]=n[0],e[13]=n[1],e[14]=n[2];},e.getForward=function(t){var e=this.elements,n=t.elements;n[0]=-e[8],n[1]=-e[9],n[2]=-e[10];},e.setForward=function(t){var e=this.elements,n=t.elements;e[8]=-n[0],e[9]=-n[1],e[10]=-n[2];},t.createRotationX=function(t,e){var n=e.elements,i=Math.sin(t),r=Math.cos(t);n[1]=n[2]=n[3]=n[4]=n[7]=n[8]=n[11]=n[12]=n[13]=n[14]=0,n[0]=n[15]=1,n[5]=n[10]=r,n[6]=i,n[9]=-i;},t.createRotationY=function(t,e){var n=e.elements,i=Math.sin(t),r=Math.cos(t);n[1]=n[3]=n[4]=n[6]=n[7]=n[9]=n[11]=n[12]=n[13]=n[14]=0,n[5]=n[15]=1,n[0]=n[10]=r,n[2]=-i,n[8]=i;},t.createRotationZ=function(t,e){var n=e.elements,i=Math.sin(t),r=Math.cos(t);n[2]=n[3]=n[6]=n[7]=n[8]=n[9]=n[11]=n[12]=n[13]=n[14]=0,n[10]=n[15]=1,n[0]=n[5]=r,n[1]=i,n[4]=-i;},t.createRotationYawPitchRoll=function(e,n,i,r){Pe.createFromYawPitchRoll(e,n,i,t._tempQuaternion),t.createRotationQuaternion(t._tempQuaternion,r);},t.createRotationAxis=function(t,e,n){var i=t.elements,r=i[0],a=i[1],o=i[2],s=Math.cos(e),l=Math.sin(e),u=r*r,h=a*a,c=o*o,_=r*a,f=r*o,d=a*o,p=n.elements;p[3]=p[7]=p[11]=p[12]=p[13]=p[14]=0,p[15]=1,p[0]=u+s*(1-u),p[1]=_-s*_+l*o,p[2]=f-s*f-l*a,p[4]=_-s*_-l*o,p[5]=h+s*(1-h),p[6]=d-s*d+l*r,p[8]=f-s*f+l*a,p[9]=d-s*d-l*r,p[10]=c+s*(1-c);},t.createRotationQuaternion=function(t,e){var n=t.elements,i=e.elements,r=n[0],a=n[1],o=n[2],s=n[3],l=r*r,u=a*a,h=o*o,c=r*a,_=o*s,f=o*r,d=a*s,p=a*o,m=r*s;i[3]=i[7]=i[11]=i[12]=i[13]=i[14]=0,i[15]=1,i[0]=1-2*(u+h),i[1]=2*(c+_),i[2]=2*(f-d),i[4]=2*(c-_),i[5]=1-2*(h+l),i[6]=2*(p+m),i[8]=2*(f+d),i[9]=2*(p-m),i[10]=1-2*(u+l);},t.createTranslate=function(t,e){var n=t.elements,i=e.elements;i[4]=i[8]=i[1]=i[9]=i[2]=i[6]=i[3]=i[7]=i[11]=0,i[0]=i[5]=i[10]=i[15]=1,i[12]=n[0],i[13]=n[1],i[14]=n[2];},t.createScaling=function(t,e){var n=t.elements,i=e.elements;i[0]=n[0],i[5]=n[1],i[10]=n[2],i[1]=i[4]=i[8]=i[12]=i[9]=i[13]=i[2]=i[6]=i[14]=i[3]=i[7]=i[11]=0,i[15]=1;},t.multiply=function(t,e,n){var i,r,a,o,s,l,u,h;if(r=n.elements,a=t.elements,o=e.elements,r===o)for(o=new Float32Array(16),i=0;i<16;++i){o[i]=r[i];}
for(i=0;i<4;i++){s=a[i],l=a[i+4],u=a[i+8],h=a[i+12],r[i]=s*o[0]+l*o[1]+u*o[2]+h*o[3],r[i+4]=s*o[4]+l*o[5]+u*o[6]+h*o[7],r[i+8]=s*o[8]+l*o[9]+u*o[10]+h*o[11],r[i+12]=s*o[12]+l*o[13]+u*o[14]+h*o[15];}},t.createFromQuaternion=function(t,e){var n=e.elements,i=t.elements,r=i[0],a=i[1],o=i[2],s=i[3],l=r+r,u=a+a,h=o+o,c=r*l,_=a*l,f=a*u,d=o*l,p=o*u,m=o*h,g=s*l,y=s*u,v=s*h;n[0]=1-f-m,n[1]=_+v,n[2]=d-y,n[3]=0,n[4]=_-v,n[5]=1-c-m,n[6]=p+g,n[7]=0,n[8]=d+y,n[9]=p-g,n[10]=1-c-f,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1;},t.createAffineTransformation=function(t,e,n,i){var r=t.elements,a=e.elements,o=n.elements,s=i.elements,l=a[0],u=a[1],h=a[2],c=a[3],_=l+l,f=u+u,d=h+h,p=l*_,m=l*f,g=l*d,y=u*f,v=u*d,I=h*d,x=c*_,T=c*f,S=c*d,b=o[0],w=o[1],D=o[2];s[0]=(1-(y+I))*b,s[1]=(m+S)*b,s[2]=(g-T)*b,s[3]=0,s[4]=(m-S)*w,s[5]=(1-(p+I))*w,s[6]=(v+x)*w,s[7]=0,s[8]=(g+T)*D,s[9]=(v-x)*D,s[10]=(1-(p+y))*D,s[11]=0,s[12]=r[0],s[13]=r[1],s[14]=r[2],s[15]=1;},t.createLookAt=function(e,n,i,r){var a=r.elements,o=t._tempVector0,s=t._tempVector1,l=t._tempVector2;Re.subtract(e,n,l),Re.normalize(l,l),Re.cross(i,l,o),Re.normalize(o,o),Re.cross(l,o,s),r.identity(),a[0]=o.x,a[4]=o.y,a[8]=o.z,a[1]=s.x,a[5]=s.y,a[9]=s.z,a[2]=l.x,a[6]=l.y,a[10]=l.z,a[12]=-Re.dot(o,e),a[13]=-Re.dot(s,e),a[14]=-Re.dot(l,e);},t.createPerspective=function(t,e,n,i,r){var a=r.elements,o=1/Math.tan(t/2),s=1/(n-i);a[0]=o/e,a[5]=o,a[10]=(i+n)*s,a[11]=-1,a[14]=2*i*n*s,a[1]=a[2]=a[3]=a[4]=a[6]=a[7]=a[8]=a[9]=a[12]=a[13]=a[15]=0;},t.createOrthoOffCenterRH=function(t,e,n,i,r,a,o){var s=o.elements,l=1/(t-e),u=1/(n-i),h=1/(r-a);s[1]=s[2]=s[3]=s[4]=s[6]=s[7]=s[8]=s[9]=s[11]=0,s[15]=1,s[0]=-2*l,s[5]=-2*u,s[10]=2*h,s[12]=(t+e)*l,s[13]=(i+n)*u,s[14]=(a+r)*h;},t.translation=function(t,e){var n=t.elements,i=e.elements;i[0]=i[5]=i[10]=i[15]=1,i[12]=n[0],i[13]=n[1],i[14]=n[2];},i(t,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new t();},"_tempVector0",function(){return this._tempVector0=new Re();},"_tempVector1",function(){return this._tempVector1=new Re();},"_tempVector2",function(){return this._tempVector2=new Re();},"_tempQuaternion",function(){return this._tempQuaternion=new Pe();},"DEFAULT",function(){return this.DEFAULT=new t();},"ZERO",function(){return this.ZERO=new t(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);}]),t;}(),Ce=function(){function t(t,e){this.extents=null,this.transformation=null,this.extents=t,this.transformation=e;}
r(t,"laya.d3.math.OrientedBoundBox");var e=t.prototype;return e.getCorners=function(e){var n=t._tempV30.elements,i=t._tempV31.elements,r=t._tempV32.elements,a=this.extents.elements;n[0]=a[0],n[1]=n[2]=0,i[1]=a[1],i[0]=i[2]=0,r[2]=a[2],r[0]=r[1]=0,Re.TransformNormal(t._tempV30,this.transformation,t._tempV30),Re.TransformNormal(t._tempV31,this.transformation,t._tempV31),Re.TransformNormal(t._tempV32,this.transformation,t._tempV32);var o=t._tempV33;this.transformation.getTranslationVector(o),e.length=8,Re.add(o,t._tempV30,t._tempV34),Re.add(t._tempV34,t._tempV31,t._tempV34),Re.add(t._tempV34,t._tempV32,e[0]),Re.add(o,t._tempV30,t._tempV34),Re.add(t._tempV34,t._tempV31,t._tempV34),Re.subtract(t._tempV34,t._tempV32,e[1]),Re.subtract(o,t._tempV30,t._tempV34),Re.add(t._tempV34,t._tempV31,t._tempV34),Re.subtract(t._tempV34,t._tempV32,e[2]),Re.subtract(o,t._tempV30,t._tempV34),Re.add(t._tempV34,t._tempV31,t._tempV34),Re.add(t._tempV34,t._tempV32,e[3]),Re.add(o,t._tempV30,t._tempV34),Re.subtract(t._tempV34,t._tempV31,t._tempV34),Re.add(t._tempV34,t._tempV32,e[4]),Re.add(o,t._tempV30,t._tempV34),Re.subtract(t._tempV34,t._tempV31,t._tempV34),Re.subtract(t._tempV34,t._tempV32,e[5]),Re.subtract(o,t._tempV30,t._tempV34),Re.subtract(t._tempV34,t._tempV31,t._tempV34),Re.subtract(t._tempV34,t._tempV32,e[6]),Re.subtract(o,t._tempV30,t._tempV34),Re.subtract(t._tempV34,t._tempV31,t._tempV34),Re.add(t._tempV34,t._tempV32,e[7]);},e.transform=function(t){De.multiply(this.transformation,t,this.transformation);},e.scale=function(t){Re.multiply(this.extents,t,this.extents);},e.translate=function(e){this.transformation.getTranslationVector(t._tempV30),Re.add(t._tempV30,e,t._tempV31),this.transformation.setTranslationVector(t._tempV31);},e.Size=function(t){Re.scale(this.extents,2,t);},e.getSize=function(e){var n=this.extents.elements;t._tempV30.x=n[0],t._tempV31.y=n[1],t._tempV32.z=n[2],Re.TransformNormal(t._tempV30,this.transformation,t._tempV30),Re.TransformNormal(t._tempV31,this.transformation,t._tempV31),Re.TransformNormal(t._tempV31,this.transformation,t._tempV32);var i=e.elements;i[0]=Re.scalarLength(t._tempV30),i[1]=Re.scalarLength(t._tempV31),i[2]=Re.scalarLength(t._tempV32);},e.getSizeSquared=function(e){var n=this.extents.elements;t._tempV30.x=n[0],t._tempV31.y=n[1],t._tempV32.z=n[2],Re.TransformNormal(t._tempV30,this.transformation,t._tempV30),Re.TransformNormal(t._tempV31,this.transformation,t._tempV31),Re.TransformNormal(t._tempV31,this.transformation,t._tempV32);var i=e.elements;i[0]=Re.scalarLengthSquared(t._tempV30),i[1]=Re.scalarLengthSquared(t._tempV31),i[2]=Re.scalarLengthSquared(t._tempV32);},e.getCenter=function(t){this.transformation.getTranslationVector(t);},e.containsPoint=function(e){var n=this.extents.elements,i=n[0],r=n[1],a=n[2];this.transformation.invert(t._tempM0),Re.transformCoordinate(e,t._tempM0,t._tempV30);var o=t._tempV30.elements,s=Math.abs(o[0]),l=Math.abs(o[1]),u=Math.abs(o[2]);return be.nearEqual(s,i)&&be.nearEqual(l,r)&&be.nearEqual(u,a)?2:s<i&&l<r&&u<a?1:0;},e.containsPoints=function(e){var n=this.extents.elements,i=n[0],r=n[1],a=n[2];this.transformation.invert(t._tempM0);for(var o=!0,s=!1,l=0;l<e.length;l++){Re.transformCoordinate(e[l],t._tempM0,t._tempV30);var u=t._tempV30.elements,h=Math.abs(u[0]),c=Math.abs(u[1]),_=Math.abs(u[2]);be.nearEqual(h,i)&&be.nearEqual(c,r)&&be.nearEqual(_,a)&&(s=!0),h<i&&c<r&&_<a?s=!0:o=!1;}
return o?1:s?2:0;},e.containsSphere=function(e,n){void 0===n&&(n=!1);var i=this.extents.elements,r=i[0],a=i[1],o=i[2],s=e.radius;this.transformation.invert(t._tempM0),Re.transformCoordinate(e.center,t._tempM0,t._tempV30);var l=NaN;n?l=s:(Re.scale(Re.UnitX,s,t._tempV31),Re.TransformNormal(t._tempV31,t._tempM0,t._tempV31),l=Re.scalarLength(t._tempV31)),Re.scale(this.extents,-1,t._tempV32),Re.Clamp(t._tempV30,t._tempV32,this.extents,t._tempV33);if(Re.distanceSquared(t._tempV30,t._tempV33)>l*l)return 0;var u=t._tempV30.elements,h=u[0],c=u[1],_=u[2],f=t._tempV32.elements,d=f[0],p=f[1],m=f[2];return d+l<=h&&h<=r-l&&r-d>l&&p+l<=c&&c<=a-l&&a-p>l&&m+l<=_&&_<=o-l&&o-m>l?1:2;},e.containsOrientedBoundBox=function(e){var n=0,i=0;e.getCorners(t._corners);var r=this.containsPoints(t._corners);if(0!=r)return r;var a=this.extents.elements;e.extents.cloneTo(t._tempV35);var o=t._tempV35.elements;t._getRows(this.transformation,t._rows1),t._getRows(e.transformation,t._rows2);var s=NaN,l=NaN,u=NaN;for(n=0;n<4;n++){for(i=0;i<4;i++){3==n||3==i?(t._tempM0.setElementByRowColumn(n,i,0),t._tempM1.setElementByRowColumn(n,i,0)):(u=Re.dot(t._rows1[n],t._rows2[i]),t._tempM0.setElementByRowColumn(n,i,u),t._tempM1.setElementByRowColumn(n,i,Math.abs(u)));}}
e.getCenter(t._tempV34),this.getCenter(t._tempV36),Re.subtract(t._tempV34,t._tempV36,t._tempV30);var h=t._tempV31.elements;h[0]=Re.dot(t._tempV30,t._rows1[0]),h[1]=Re.dot(t._tempV30,t._rows1[1]),h[2]=Re.dot(t._tempV30,t._rows1[2]);var c=t._tempV32.elements,_=t._tempV33.elements;for(n=0;n<3;n++){if(c[0]=t._tempM1.getElementByRowColumn(n,0),c[1]=t._tempM1.getElementByRowColumn(n,1),c[2]=t._tempM1.getElementByRowColumn(n,2),s=a[n],l=Re.dot(t._tempV35,t._tempV32),Math.abs(h[n])>s+l)return 0;}
for(i=0;i<3;i++){if(c[0]=t._tempM1.getElementByRowColumn(0,i),c[1]=t._tempM1.getElementByRowColumn(1,i),c[2]=t._tempM1.getElementByRowColumn(2,i),_[0]=t._tempM0.getElementByRowColumn(0,i),_[1]=t._tempM0.getElementByRowColumn(1,i),_[2]=t._tempM0.getElementByRowColumn(2,i),s=Re.dot(this.extents,t._tempV32),l=o[i],Math.abs(Re.dot(t._tempV31,t._tempV33))>s+l)return 0;}
for(n=0;n<3;n++){for(i=0;i<3;i++){var f=(n+1)%3,d=(n+2)%3,p=(i+1)%3,m=(i+2)%3;if(s=a[f]*t._tempM1.getElementByRowColumn(d,i)+a[d]*t._tempM1.getElementByRowColumn(f,i),l=o[p]*t._tempM1.getElementByRowColumn(n,m)+o[m]*t._tempM1.getElementByRowColumn(n,p),Math.abs(h[d]*t._tempM0.getElementByRowColumn(f,i)-h[f]*t._tempM0.getElementByRowColumn(d,i))>s+l)return 0;}}
return 2;},e.containsLine=function(e,n){t._corners[0]=e,t._corners[1]=n;var i=this.containsPoints(t._corners);if(0!=i)return i;var r=this.extents.elements,a=r[0],o=r[1],s=r[2];this.transformation.invert(t._tempM0),Re.transformCoordinate(e,t._tempM0,t._tempV30),Re.transformCoordinate(n,t._tempM0,t._tempV31),Re.add(t._tempV30,t._tempV31,t._tempV32),Re.scale(t._tempV32,.5,t._tempV32),Re.subtract(t._tempV30,t._tempV32,t._tempV33);var l=t._tempV33.elements,u=l[0],h=l[1],c=l[2],_=t._tempV34.elements,f=_[0]=Math.abs(l[0]),d=_[1]=Math.abs(l[1]),p=_[2]=Math.abs(l[2]),m=t._tempV32.elements,g=m[0],y=m[1],v=m[2];return Math.abs(g)>a+f?0:Math.abs(y)>o+d?0:Math.abs(v)>s+p?0:Math.abs(y*c-v*h)>o*p+s*d?0:Math.abs(g*c-v*u)>a*p+s*f?0:Math.abs(g*h-y*u)>a*d+o*f?0:2;},e.containsBoundBox=function(e){var n=0,i=0,r=e.min,a=e.max;e.getCorners(t._corners);var o=this.containsPoints(t._corners);if(0!=o)return o;Re.subtract(a,r,t._tempV30),Re.scale(t._tempV30,.5,t._tempV30),Re.add(r,t._tempV30,t._tempV30),Re.subtract(a,t._tempV30,t._tempV31);var s=this.extents.elements,l=t._tempV31.elements;t._getRows(this.transformation,t._rows1),this.transformation.invert(t._tempM0);var u=NaN,h=NaN;for(n=0;n<3;n++){for(i=0;i<3;i++){t._tempM1.setElementByRowColumn(n,i,Math.abs(t._tempM0.getElementByRowColumn(n,i)));}}
this.getCenter(t._tempV35),Re.subtract(t._tempV30,t._tempV35,t._tempV32);var c=t._tempV31.elements;c[0]=Re.dot(t._tempV32,t._rows1[0]),c[1]=Re.dot(t._tempV32,t._rows1[1]),c[2]=Re.dot(t._tempV32,t._rows1[2]);var _=t._tempV33.elements,f=t._tempV34.elements;for(n=0;n<3;n++){if(_[0]=t._tempM1.getElementByRowColumn(n,0),_[1]=t._tempM1.getElementByRowColumn(n,1),_[2]=t._tempM1.getElementByRowColumn(n,2),u=s[n],h=Re.dot(t._tempV31,t._tempV33),Math.abs(c[n])>u+h)return 0;}
for(i=0;i<3;i++){if(_[0]=t._tempM1.getElementByRowColumn(0,i),_[1]=t._tempM1.getElementByRowColumn(1,i),_[2]=t._tempM1.getElementByRowColumn(2,i),f[0]=t._tempM0.getElementByRowColumn(0,i),f[1]=t._tempM0.getElementByRowColumn(1,i),f[2]=t._tempM0.getElementByRowColumn(2,i),u=Re.dot(this.extents,t._tempV33),h=l[i],Math.abs(Re.dot(t._tempV31,t._tempV34))>u+h)return 0;}
for(n=0;n<3;n++){for(i=0;i<3;i++){var d=(n+1)%3,p=(n+2)%3,m=(i+1)%3,g=(i+2)%3;if(u=s[d]*t._tempM1.getElementByRowColumn(p,i)+s[p]*t._tempM1.getElementByRowColumn(d,i),h=l[m]*t._tempM1.getElementByRowColumn(n,g)+l[g]*t._tempM1.getElementByRowColumn(n,m),Math.abs(c[p]*t._tempM0.getElementByRowColumn(d,i)-c[d]*t._tempM0.getElementByRowColumn(p,i))>u+h)return 0;}}
return 2;},e.intersectsRay=function(e,n){Re.scale(this.extents,-1,t._tempV30),this.transformation.invert(t._tempM0),Re.TransformNormal(e.direction,t._tempM0,t._ray.direction),Re.transformCoordinate(e.origin,t._tempM0,t._ray.origin),t._boxBound1.min=t._tempV30,t._boxBound1.max=this.extents;var i=Se.intersectsRayAndBoxRP(t._ray,t._boxBound1,n);return-1!==i&&Re.transformCoordinate(n,this.transformation,n),i;},e._getLocalCorners=function(e){e.length=8;var n=this.extents.elements;t._tempV30.x=n[0],t._tempV31.y=n[1],t._tempV32.z=n[2],Re.add(t._tempV30,t._tempV31,t._tempV33),Re.add(t._tempV33,t._tempV32,e[0]),Re.add(t._tempV30,t._tempV31,t._tempV33),Re.subtract(t._tempV33,t._tempV32,e[1]),Re.subtract(t._tempV31,t._tempV30,t._tempV33),Re.subtract(t._tempV33,t._tempV30,e[2]),Re.subtract(t._tempV31,t._tempV30,t._tempV33),Re.add(t._tempV33,t._tempV32,e[3]),Re.subtract(t._tempV30,t._tempV31,t._tempV33),Re.add(t._tempV33,t._tempV32,e[4]),Re.subtract(t._tempV30,t._tempV31,t._tempV33),Re.subtract(t._tempV33,t._tempV32,e[5]),Re.scale(e[0],-1,e[6]),Re.subtract(t._tempV32,t._tempV30,t._tempV33),Re.subtract(t._tempV33,t._tempV31,e[7]);},e.equals=function(t){return this.extents==t.extents&&this.transformation==t.transformation;},e.cloneTo=function(t){var e=t;this.extents.cloneTo(e.extents),this.transformation.cloneTo(e.transformation);},t.createByBoundBox=function(e,n){var i=e.min,r=e.max;Re.subtract(r,i,t._tempV30),Re.scale(t._tempV30,.5,t._tempV30),Re.add(i,t._tempV30,t._tempV31),Re.subtract(r,t._tempV31,t._tempV32),De.translation(t._tempV31,t._tempM0);var a=t._tempV32.clone(),o=t._tempM0.clone();n.extents=a,n.transformation=o;},t.createByMinAndMaxVertex=function(e,n){Re.subtract(n,e,t._tempV30),Re.scale(t._tempV30,.5,t._tempV30),Re.add(e,t._tempV30,t._tempV31),Re.subtract(n,t._tempV31,t._tempV32),De.translation(t._tempV31,t._tempM0);return new t(t._tempV32,t._tempM0);},t._getRows=function(t,e){e.length=3;var n=t.elements,i=e[0].elements;i[0]=n[0],i[1]=n[1],i[2]=n[2];var r=e[1].elements;r[0]=n[4],r[1]=n[5],r[2]=n[6];var a=e[2].elements;a[0]=n[8],a[1]=n[9],a[2]=n[10];},t.getObbtoObbMatrix4x4=function(e,n,i,r){var a=e.transformation,o=n.transformation;if(i){t._getRows(a,t._rows1),t._getRows(o,t._rows2);for(var s=0;s<3;s++){for(var l=0;l<3;l++){r.setElementByRowColumn(s,l,Re.dot(t._rows2[s],t._rows1[l]));}}
n.getCenter(t._tempV30),e.getCenter(t._tempV31),Re.subtract(t._tempV30,t._tempV31,t._tempV32);var u=r.elements;u[12]=Re.dot(t._tempV32,t._rows1[0]),u[13]=Re.dot(t._tempV32,t._rows1[1]),u[14]=Re.dot(t._tempV32,t._rows1[2]),u[15]=1;}else a.invert(t._tempM0),De.multiply(o,t._tempM0,r);},t.merge=function(e,n,i){var r=e.extents,a=e.transformation;t.getObbtoObbMatrix4x4(e,n,i,t._tempM0),n._getLocalCorners(t._corners),Re.transformCoordinate(t._corners[0],t._tempM0,t._corners[0]),Re.transformCoordinate(t._corners[1],t._tempM0,t._corners[1]),Re.transformCoordinate(t._corners[2],t._tempM0,t._corners[2]),Re.transformCoordinate(t._corners[3],t._tempM0,t._corners[3]),Re.transformCoordinate(t._corners[4],t._tempM0,t._corners[4]),Re.transformCoordinate(t._corners[5],t._tempM0,t._corners[5]),Re.transformCoordinate(t._corners[6],t._tempM0,t._corners[6]),Re.transformCoordinate(t._corners[7],t._tempM0,t._corners[7]),Re.scale(r,-1,t._boxBound1.min),r.cloneTo(t._boxBound1.max),Ie.createfromPoints(t._corners,t._boxBound2),Ie.merge(t._boxBound2,t._boxBound1,t._boxBound3);var o=t._boxBound3.min,s=t._boxBound3.max;Re.subtract(s,o,t._tempV30),Re.scale(t._tempV30,.5,t._tempV30),Re.add(o,t._tempV30,t._tempV32),Re.subtract(s,t._tempV32,r),Re.transformCoordinate(t._tempV32,a,t._tempV33);},i(t,["_tempV30",function(){return this._tempV30=new Re();},"_tempV31",function(){return this._tempV31=new Re();},"_tempV32",function(){return this._tempV32=new Re();},"_tempV33",function(){return this._tempV33=new Re();},"_tempV34",function(){return this._tempV34=new Re();},"_tempV35",function(){return this._tempV35=new Re();},"_tempV36",function(){return this._tempV36=new Re();},"_tempM0",function(){return this._tempM0=new De();},"_tempM1",function(){return this._tempM1=new De();},"_corners",function(){return this._corners=[new Re(),new Re(),new Re(),new Re(),new Re(),new Re(),new Re(),new Re()];},"_rows1",function(){return this._rows1=[new Re(),new Re(),new Re()];},"_rows2",function(){return this._rows2=[new Re(),new Re(),new Re()];},"_ray",function(){return this._ray=new Ae(new Re(),new Re());},"_boxBound1",function(){return this._boxBound1=new Ie(new Re(),new Re());},"_boxBound2",function(){return this._boxBound2=new Ie(new Re(),new Re());},"_boxBound3",function(){return this._boxBound3=new Ie(new Re(),new Re());}]),t;}(),Ee=function(){function t(t,e){this.normal=null,this.distance=NaN,void 0===e&&(e=0),this.normal=t,this.distance=e;}
r(t,"laya.d3.math.Plane");return t.prototype.normalize=function(){var t=this.normal.elements,e=t[0],n=t[1],i=t[2],r=1/Math.sqrt(e*e+n*n+i*i);t[0]=e*r,t[1]=n*r,t[2]=i*r,this.distance*=r;},t.createPlaneBy3P=function(e,n,i){var r=e.elements,a=n.elements,o=i.elements,s=a[0]-r[0],l=a[1]-r[1],u=a[2]-r[2],h=o[0]-r[0],c=o[1]-r[1],_=o[2]-r[2],f=l*_-u*c,d=u*h-s*_,p=s*c-l*h,m=1/Math.sqrt(f*f+d*d+p*p),g=f*m,y=d*m,v=p*m,I=t._TEMPVec3.elements;I[0]=g,I[1]=y,I[2]=v;var x=-(g*r[0]+y*r[1]+v*r[2]);return new t(t._TEMPVec3,x);},t.PlaneIntersectionType_Back=0,t.PlaneIntersectionType_Front=1,t.PlaneIntersectionType_Intersecting=2,i(t,["_TEMPVec3",function(){return this._TEMPVec3=new Re();}]),t;}(),Pe=function(){function t(t,e,n,i){this.elements=new Float32Array(4),void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),this.elements[0]=t,this.elements[1]=e,this.elements[2]=n,this.elements[3]=i;}
r(t,"laya.d3.math.Quaternion");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.scaling=function(t,e){var n=e.elements,i=this.elements;n[0]=i[0]*t,n[1]=i[1]*t,n[2]=i[2]*t,n[3]=i[3]*t;},e.normalize=function(t){var e=t.elements,n=this.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=i*i+r*r+a*a+o*o;s>0&&(s=1/Math.sqrt(s),e[0]=i*s,e[1]=r*s,e[2]=a*s,e[3]=o*s);},e.length=function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3];return Math.sqrt(e*e+n*n+i*i+r*r);},e.rotateX=function(t,e){var n=e.elements,i=this.elements;t*=.5;var r=i[0],a=i[1],o=i[2],s=i[3],l=Math.sin(t),u=Math.cos(t);n[0]=r*u+s*l,n[1]=a*u+o*l,n[2]=o*u-a*l,n[3]=s*u-r*l;},e.rotateY=function(t,e){var n=e.elements,i=this.elements;t*=.5;var r=i[0],a=i[1],o=i[2],s=i[3],l=Math.sin(t),u=Math.cos(t);n[0]=r*u-o*l,n[1]=a*u+s*l,n[2]=o*u+r*l,n[3]=s*u-a*l;},e.rotateZ=function(t,e){var n=e.elements,i=this.elements;t*=.5;var r=i[0],a=i[1],o=i[2],s=i[3],l=Math.sin(t),u=Math.cos(t);n[0]=r*u+a*l,n[1]=a*u-r*l,n[2]=o*u+s*l,n[3]=s*u-o*l;},e.getYawPitchRoll=function(e){Re.transformQuat(Re.ForwardRH,this,t.TEMPVector31),Re.transformQuat(Re.Up,this,t.TEMPVector32);var n=t.TEMPVector32.elements;t.angleTo(Re.ZERO,t.TEMPVector31,t.TEMPVector33);var i=t.TEMPVector33.elements;i[0]==Math.PI/2?(i[1]=t.arcTanAngle(n[2],n[0]),i[2]=0):i[0]==-Math.PI/2?(i[1]=t.arcTanAngle(-n[2],-n[0]),i[2]=0):(De.createRotationY(-i[1],t.TEMPMatrix0),De.createRotationX(-i[0],t.TEMPMatrix1),Re.transformCoordinate(t.TEMPVector32,t.TEMPMatrix0,t.TEMPVector32),Re.transformCoordinate(t.TEMPVector32,t.TEMPMatrix1,t.TEMPVector32),i[2]=t.arcTanAngle(n[1],-n[0])),i[1]<=-Math.PI&&(i[1]=Math.PI),i[2]<=-Math.PI&&(i[2]=Math.PI),i[1]>=Math.PI&&i[2]>=Math.PI&&(i[1]=0,i[2]=0,i[0]=Math.PI-i[0]);var r=e.elements;r[0]=i[1],r[1]=i[0],r[2]=i[2];},e.invert=function(t){var e=t.elements,n=this.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=i*i+r*r+a*a+o*o,l=s?1/s:0;e[0]=-i*l,e[1]=-r*l,e[2]=-a*l,e[3]=o*l;},e.identity=function(){var t=this.elements;t[0]=0,t[1]=0,t[2]=0,t[3]=1;},e.fromArray=function(t,e){void 0===e&&(e=0),this.elements[0]=t[e+0],this.elements[1]=t[e+1],this.elements[2]=t[e+2],this.elements[3]=t[e+3];},e.cloneTo=function(t){var e,n,i;if(n=this.elements,i=t.elements,n!==i)for(e=0;e<4;++e){i[e]=n[e];}},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},e.equals=function(t){var e=this.elements,n=t.elements;return be.nearEqual(e[0],n[0])&&be.nearEqual(e[1],n[1])&&be.nearEqual(e[2],n[2])&&be.nearEqual(e[3],n[3]);},e.lengthSquared=function(){var t=this.elements[0],e=this.elements[1],n=this.elements[2],i=this.elements[3];return t*t+e*e+n*n+i*i;},a(0,e,"x",function(){return this.elements[0];}),a(0,e,"y",function(){return this.elements[1];}),a(0,e,"z",function(){return this.elements[2];}),a(0,e,"w",function(){return this.elements[3];}),t.createFromYawPitchRoll=function(t,e,n,i){var r=.5*n,a=.5*e,o=.5*t,s=Math.sin(r),l=Math.cos(r),u=Math.sin(a),h=Math.cos(a),c=Math.sin(o),_=Math.cos(o),f=i.elements;f[0]=_*u*l+c*h*s,f[1]=c*h*l-_*u*s,f[2]=_*h*s-c*u*l,f[3]=_*h*l+c*u*s;},t.multiply=function(t,e,n){var i=t.elements,r=e.elements,a=n.elements,o=i[0],s=i[1],l=i[2],u=i[3],h=r[0],c=r[1],_=r[2],f=r[3],d=s*_-l*c,p=l*h-o*_,m=o*c-s*h,g=o*h+s*c+l*_;a[0]=o*f+h*u+d,a[1]=s*f+c*u+p,a[2]=l*f+_*u+m,a[3]=u*f-g;},t.arcTanAngle=function(t,e){return 0==t?1==e?Math.PI/2:-Math.PI/2:t>0?Math.atan(e/t):t<0?e>0?Math.atan(e/t)+Math.PI:Math.atan(e/t)-Math.PI:0;},t.angleTo=function(e,n,i){Re.subtract(n,e,t.TEMPVector30),Re.normalize(t.TEMPVector30,t.TEMPVector30),i.elements[0]=Math.asin(t.TEMPVector30.y),i.elements[1]=t.arcTanAngle(-t.TEMPVector30.z,-t.TEMPVector30.x);},t.createFromAxisAngle=function(t,e,n){var i=n.elements,r=t.elements;e*=.5;var a=Math.sin(e);i[0]=a*r[0],i[1]=a*r[1],i[2]=a*r[2],i[3]=Math.cos(e);},t.createFromMatrix3x3=function(t,e){var n,i=e.elements,r=t.elements,a=r[0]+r[4]+r[8];if(a>0)n=Math.sqrt(a+1),i[3]=.5*n,n=.5/n,i[0]=(r[5]-r[7])*n,i[1]=(r[6]-r[2])*n,i[2]=(r[1]-r[3])*n;else{var o=0;r[4]>r[0]&&(o=1),r[8]>r[3*o+o]&&(o=2);var s=(o+1)%3,l=(o+2)%3;n=Math.sqrt(r[3*o+o]-r[3*s+s]-r[3*l+l]+1),i[o]=.5*n,n=.5/n,i[3]=(r[3*s+l]-r[3*l+s])*n,i[s]=(r[3*s+o]+r[3*o+s])*n,i[l]=(r[3*l+o]+r[3*o+l])*n;}},t.createFromMatrix4x4=function(t,e){var n,i,r=t.elements,a=e.elements,o=r[0]+r[5]+r[10];o>0?(n=Math.sqrt(o+1),a[3]=.5*n,n=.5/n,a[0]=(r[6]-r[9])*n,a[1]=(r[8]-r[2])*n,a[2]=(r[1]-r[4])*n):r[0]>=r[5]&&r[0]>=r[10]?(i=.5/(n=Math.sqrt(1+r[0]-r[5]-r[10])),a[0]=.5*n,a[1]=(r[1]+r[4])*i,a[2]=(r[2]+r[8])*i,a[3]=(r[6]-r[9])*i):r[5]>r[10]?(i=.5/(n=Math.sqrt(1+r[5]-r[0]-r[10])),a[0]=(r[4]+r[1])*i,a[1]=.5*n,a[2]=(r[9]+r[6])*i,a[3]=(r[8]-r[2])*i):(i=.5/(n=Math.sqrt(1+r[10]-r[0]-r[5])),a[0]=(r[8]+r[2])*i,a[1]=(r[9]+r[6])*i,a[2]=.5*n,a[3]=(r[1]-r[4])*i);},t.slerp=function(t,e,n,i){var r,a,o,s,l,u=t.elements,h=e.elements,c=i.elements,_=u[0],f=u[1],d=u[2],p=u[3],m=h[0],g=h[1],y=h[2],v=h[3];return(a=_*m+f*g+d*y+p*v)<0&&(a=-a,m=-m,g=-g,y=-y,v=-v),1-a>1e-6?(r=Math.acos(a),o=Math.sin(r),s=Math.sin((1-n)*r)/o,l=Math.sin(n*r)/o):(s=1-n,l=n),c[0]=s*_+l*m,c[1]=s*f+l*g,c[2]=s*d+l*y,c[3]=s*p+l*v,c;},t.lerp=function(t,e,n,i){var r=i.elements,a=t.elements,o=e.elements,s=a[0],l=a[1],u=a[2],h=a[3];r[0]=s+n*(o[0]-s),r[1]=l+n*(o[1]-l),r[2]=u+n*(o[2]-u),r[3]=h+n*(o[3]-h);},t.add=function(t,e,n){var i=n.elements,r=t.elements,a=e.elements;i[0]=r[0]+a[0],i[1]=r[1]+a[1],i[2]=r[2]+a[2],i[3]=r[3]+a[3];},t.dot=function(t,e){var n=t.elements,i=e.elements;return n[0]*i[0]+n[1]*i[1]+n[2]*i[2]+n[3]*i[3];},t.rotationLookAt=function(e,n,i){t.lookAt(Re.ZERO,e,n,i);},t.lookAt=function(e,n,i,r){we.lookAt(e,n,i,t._tempMatrix3x3),t.rotationMatrix(t._tempMatrix3x3,r);},t.invert=function(t,e){var n=t.elements,i=e.elements,r=t.lengthSquared();be.isZero(r)||(r=1/r,i[0]=-n[0]*r,i[1]=-n[1]*r,i[2]=-n[2]*r,i[3]=n[3]*r);},t.rotationMatrix=function(t,e){var n=t.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],h=n[7],c=n[8],_=e.elements,f=NaN,d=NaN,p=i+s+c;p>0?(f=Math.sqrt(p+1),_[3]=.5*f,f=.5/f,_[0]=(l-h)*f,_[1]=(u-a)*f,_[2]=(r-o)*f):i>=s&&i>=c?(d=.5/(f=Math.sqrt(1+i-s-c)),_[0]=.5*f,_[1]=(r+o)*d,_[2]=(a+u)*d,_[3]=(l-h)*d):s>c?(d=.5/(f=Math.sqrt(1+s-i-c)),_[0]=(o+r)*d,_[1]=.5*f,_[2]=(h+l)*d,_[3]=(u-a)*d):(d=.5/(f=Math.sqrt(1+c-i-s)),_[0]=(u+a)*d,_[1]=(h+l)*d,_[2]=.5*f,_[3]=(r-o)*d);},t.DEFAULT=new t(),i(t,["TEMPVector30",function(){return this.TEMPVector30=new Re();},"TEMPVector31",function(){return this.TEMPVector31=new Re();},"TEMPVector32",function(){return this.TEMPVector32=new Re();},"TEMPVector33",function(){return this.TEMPVector33=new Re();},"TEMPMatrix0",function(){return this.TEMPMatrix0=new De();},"TEMPMatrix1",function(){return this.TEMPMatrix1=new De();},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new we();},"NAN",function(){return this.NAN=new t(NaN,NaN,NaN,NaN);}]),t;}(),Me=function(){function t(t){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=t,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1;}
r(t,"laya.d3.math.Rand");var e=t.prototype;return e.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3];},e.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607);},e.getSignedFloat=function(){return 2*this.getFloat()-1;},a(0,e,"seed",function(){return this.seeds[0];},function(t){this.seeds[0]=t,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1;}),t.getFloatFromInt=function(t){return 1/8388607*(8388607&t);},t.getByteFromInt=function(t){return(8388607&t)>>>15;},t;}(),Ae=(function(){function t(t){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(t instanceof Array)||4!==t.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|t[0],this._state0L=0|t[1],this._state1U=0|t[2],this._state1L=0|t[3];}
r(t,"laya.d3.math.RandX");var e=t.prototype;e.randomint=function(){var t=this._state0U,e=this._state0L,n=this._state1U,i=this._state1L,r=(i>>>0)+(e>>>0),a=n+t+(r/2>>>31)>>>0,o=r>>>0;this._state0U=n,this._state0L=i;var s=0,l=0,u=0,h=0;s=(t^=s=t<<23|(-512&e)>>>9)^n,l=(e^=l=e<<23)^i;s^=u=t>>>18,l^=h=e>>>18|(262143&t)<<14;return u=n>>>5,h=i>>>5|(31&n)<<27,s^=u,l^=h,this._state1U=s,this._state1L=l,[a,o];},e.random=function(){var e=this.randomint(),n=e[0],i=1023<<20|n>>>12,r=0|(e[1]>>>12|(4095&n)<<20);t._CONVERTION_BUFFER.setUint32(0,i,!1),t._CONVERTION_BUFFER.setUint32(4,r,!1);return Me._CONVERTION_BUFFER.getFloat64(0,!1)-1;},i(t,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8));},"defaultRand",function(){return this.defaultRand=new Me([0,Date.now()/65536,0,Date.now()%65536]);}]);}(),function(){function t(t,e){this.origin=null,this.direction=null,this.origin=t,this.direction=e;}
return r(t,"laya.d3.math.Ray"),t;}()),Oe=function(){function t(t,e){this.elements=new Float32Array(2),void 0===t&&(t=0),void 0===e&&(e=0);var n=this.elements;n[0]=t,n[1]=e;}
r(t,"laya.d3.math.Vector2");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.fromArray=function(t,e){void 0===e&&(e=0),this.elements[0]=t[e+0],this.elements[1]=t[e+1];},e.cloneTo=function(t){var e=t.elements,n=this.elements;e[0]=n[0],e[1]=n[1];},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},a(0,e,"x",function(){return this.elements[0];},function(t){this.elements[0]=t;}),a(0,e,"y",function(){return this.elements[1];},function(t){this.elements[1]=t;}),t.scale=function(t,e,n){var i=n.elements,r=t.elements;i[0]=r[0]*e,i[1]=r[1]*e;},i(t,["ZERO",function(){return this.ZERO=new t(0,0);},"ONE",function(){return this.ONE=new t(1,1);}]),t;}(),Re=function(){function t(t,e,n){this.elements=new Float32Array(3),void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0);var i=this.elements;i[0]=t,i[1]=e,i[2]=n;}
r(t,"laya.d3.math.Vector3");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.fromArray=function(t,e){void 0===e&&(e=0),this.elements[0]=t[e+0],this.elements[1]=t[e+1],this.elements[2]=t[e+2];},e.cloneTo=function(t){var e=t.elements,n=this.elements;e[0]=n[0],e[1]=n[1],e[2]=n[2];},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},e.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0;},a(0,e,"x",function(){return this.elements[0];},function(t){this.elements[0]=t;}),a(0,e,"y",function(){return this.elements[1];},function(t){this.elements[1]=t;}),a(0,e,"z",function(){return this.elements[2];},function(t){this.elements[2]=t;}),t.distanceSquared=function(t,e){var n=t.elements,i=e.elements,r=n[0]-i[0],a=n[1]-i[1],o=n[2]-i[2];return r*r+a*a+o*o;},t.distance=function(t,e){var n=t.elements,i=e.elements,r=n[0]-i[0],a=n[1]-i[1],o=n[2]-i[2];return Math.sqrt(r*r+a*a+o*o);},t.min=function(t,e,n){var i=n.elements,r=t.elements,a=e.elements;i[0]=Math.min(r[0],a[0]),i[1]=Math.min(r[1],a[1]),i[2]=Math.min(r[2],a[2]);},t.max=function(t,e,n){var i=n.elements,r=t.elements,a=e.elements;i[0]=Math.max(r[0],a[0]),i[1]=Math.max(r[1],a[1]),i[2]=Math.max(r[2],a[2]);},t.transformQuat=function(t,e,n){var i=n.elements,r=t.elements,a=e.elements,o=r[0],s=r[1],l=r[2],u=a[0],h=a[1],c=a[2],_=a[3],f=_*o+h*l-c*s,d=_*s+c*o-u*l,p=_*l+u*s-h*o,m=-u*o-h*s-c*l;i[0]=f*_+m*-u+d*-c-p*-h,i[1]=d*_+m*-h+p*-u-f*-c,i[2]=p*_+m*-c+f*-h-d*-u;},t.scalarLength=function(t){var e=t.elements,n=e[0],i=e[1],r=e[2];return Math.sqrt(n*n+i*i+r*r);},t.scalarLengthSquared=function(t){var e=t.elements,n=e[0],i=e[1],r=e[2];return n*n+i*i+r*r;},t.normalize=function(t,e){var n=t.elements,i=e.elements,r=n[0],a=n[1],o=n[2],s=r*r+a*a+o*o;s>0&&(s=1/Math.sqrt(s),i[0]=n[0]*s,i[1]=n[1]*s,i[2]=n[2]*s);},t.multiply=function(t,e,n){var i=n.elements,r=t.elements,a=e.elements;i[0]=r[0]*a[0],i[1]=r[1]*a[1],i[2]=r[2]*a[2];},t.scale=function(t,e,n){var i=n.elements,r=t.elements;i[0]=r[0]*e,i[1]=r[1]*e,i[2]=r[2]*e;},t.lerp=function(t,e,n,i){var r=i.elements,a=t.elements,o=e.elements,s=a[0],l=a[1],u=a[2];r[0]=s+n*(o[0]-s),r[1]=l+n*(o[1]-l),r[2]=u+n*(o[2]-u);},t.transformV3ToV3=function(e,n,i){var r=t._tempVector4;t.transformV3ToV4(e,n,r);var a=r.elements,o=i.elements;o[0]=a[0],o[1]=a[1],o[2]=a[2];},t.transformV3ToV4=function(t,e,n){var i=t.elements,r=i[0],a=i[1],o=i[2],s=e.elements,l=n.elements;l[0]=r*s[0]+a*s[4]+o*s[8]+s[12],l[1]=r*s[1]+a*s[5]+o*s[9]+s[13],l[2]=r*s[2]+a*s[6]+o*s[10]+s[14],l[3]=r*s[3]+a*s[7]+o*s[11]+s[15];},t.TransformNormal=function(t,e,n){var i=t.elements,r=i[0],a=i[1],o=i[2],s=e.elements,l=n.elements;l[0]=r*s[0]+a*s[4]+o*s[8],l[1]=r*s[1]+a*s[5]+o*s[9],l[2]=r*s[2]+a*s[6]+o*s[10];},t.transformCoordinate=function(e,n,i){var r=t._tempVector4.elements,a=e.elements,o=a[0],s=a[1],l=a[2],u=n.elements;r[0]=o*u[0]+s*u[4]+l*u[8]+u[12],r[1]=o*u[1]+s*u[5]+l*u[9]+u[13],r[2]=o*u[2]+s*u[6]+l*u[10]+u[14],r[3]=1/(o*u[3]+s*u[7]+l*u[11]+u[15]);var h=i.elements;h[0]=r[0]*r[3],h[1]=r[1]*r[3],h[2]=r[2]*r[3];},t.Clamp=function(t,e,n,i){var r=t.elements,a=r[0],o=r[1],s=r[2],l=e.elements,u=l[0],h=l[1],c=l[2],_=n.elements,f=_[0],d=_[1],p=_[2],m=i.elements;a=(a=a>f?f:a)<u?u:a,o=(o=o>d?d:o)<h?h:o,s=(s=s>p?p:s)<c?c:s,m[0]=a,m[1]=o,m[2]=s;},t.add=function(t,e,n){var i=n.elements,r=t.elements,a=e.elements;i[0]=r[0]+a[0],i[1]=r[1]+a[1],i[2]=r[2]+a[2];},t.subtract=function(t,e,n){var i=n.elements,r=t.elements,a=e.elements;i[0]=r[0]-a[0],i[1]=r[1]-a[1],i[2]=r[2]-a[2];},t.cross=function(t,e,n){var i=t.elements,r=e.elements,a=n.elements,o=i[0],s=i[1],l=i[2],u=r[0],h=r[1],c=r[2];a[0]=s*c-l*h,a[1]=l*u-o*c,a[2]=o*h-s*u;},t.dot=function(t,e){var n=t.elements,i=e.elements;return n[0]*i[0]+n[1]*i[1]+n[2]*i[2];},t.equals=function(t,e){var n=t.elements,i=e.elements;return be.nearEqual(Math.abs(n[0]),Math.abs(i[0]))&&be.nearEqual(Math.abs(n[1]),Math.abs(i[1]))&&be.nearEqual(Math.abs(n[2]),Math.abs(i[2]));},t.ZERO=new t(0,0,0),t.ONE=new t(1,1,1),t.NegativeUnitX=new t(-1,0,0),t.UnitX=new t(1,0,0),t.UnitY=new t(0,1,0),t.UnitZ=new t(0,0,1),t.ForwardRH=new t(0,0,-1),t.ForwardLH=new t(0,0,1),t.Up=new t(0,1,0),t.NAN=new t(NaN,NaN,NaN),i(t,["_tempVector4",function(){return this._tempVector4=new Le();}]),t;}(),Le=function(){function t(t,e,n,i){this.elements=new Float32Array(4),void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0);var r=this.elements;r[0]=t,r[1]=e,r[2]=n,r[3]=i;}
r(t,"laya.d3.math.Vector4");var e=t.prototype;return n.imps(e,{"laya.d3.core.IClone":!0}),e.fromArray=function(t,e){void 0===e&&(e=0),this.elements[0]=t[e+0],this.elements[1]=t[e+1],this.elements[2]=t[e+2],this.elements[3]=t[e+3];},e.cloneTo=function(t){var e=t.elements,n=this.elements;e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3];},e.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},e.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);},e.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w;},a(0,e,"x",function(){return this.elements[0];},function(t){this.elements[0]=t;}),a(0,e,"y",function(){return this.elements[1];},function(t){this.elements[1]=t;}),a(0,e,"z",function(){return this.elements[2];},function(t){this.elements[2]=t;}),a(0,e,"w",function(){return this.elements[3];},function(t){this.elements[3]=t;}),t.lerp=function(t,e,n,i){var r=i.elements,a=t.elements,o=e.elements,s=a[0],l=a[1],u=a[2],h=a[3];r[0]=s+n*(o[0]-s),r[1]=l+n*(o[1]-l),r[2]=u+n*(o[2]-u),r[3]=h+n*(o[3]-h);},t.transformByM4x4=function(t,e,n){var i=t.elements,r=i[0],a=i[1],o=i[2],s=i[3],l=e.elements,u=n.elements;u[0]=r*l[0]+a*l[4]+o*l[8]+s*l[12],u[1]=r*l[1]+a*l[5]+o*l[9]+s*l[13],u[2]=r*l[2]+a*l[6]+o*l[10]+s*l[14],u[3]=r*l[3]+a*l[7]+o*l[11]+s*l[15];},t.equals=function(t,e){var n=t.elements,i=e.elements;return be.nearEqual(Math.abs(n[0]),Math.abs(i[0]))&&be.nearEqual(Math.abs(n[1]),Math.abs(i[1]))&&be.nearEqual(Math.abs(n[2]),Math.abs(i[2]))&&be.nearEqual(Math.abs(n[3]),Math.abs(i[3]));},t.normalize=function(t,e){var n=t.elements,i=e.elements,r=t.length();r>0&&(i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[3]=n[3]*r);},t.add=function(t,e,n){var i=n.elements,r=t.elements,a=e.elements;i[0]=r[0]+a[0],i[1]=r[1]+a[1],i[2]=r[2]+a[2],i[3]=r[3]+a[3];},t.subtract=function(t,e,n){var i=n.elements,r=t.elements,a=e.elements;i[0]=r[0]-a[0],i[1]=r[1]-a[1],i[2]=r[2]-a[2],i[3]=r[3]-a[3];},t.multiply=function(t,e,n){var i=n.elements,r=t.elements,a=e.elements;i[0]=r[0]*a[0],i[1]=r[1]*a[1],i[2]=r[2]*a[2],i[3]=r[3]*a[3];},t.scale=function(t,e,n){var i=n.elements,r=t.elements;i[0]=r[0]*e,i[1]=r[1]*e,i[2]=r[2]*e,i[3]=r[3]*e;},t.Clamp=function(t,e,n,i){var r=t.elements,a=r[0],o=r[1],s=r[2],l=r[3],u=e.elements,h=u[0],c=u[1],_=u[2],f=u[3],d=n.elements,p=d[0],m=d[1],g=d[2],y=d[3],v=i.elements;a=(a=a>p?p:a)<h?h:a,o=(o=o>m?m:o)<c?c:o,s=(s=s>g?g:s)<_?_:s,l=(l=l>y?y:l)<f?f:l,v[0]=a,v[1]=o,v[2]=s,v[3]=l;},t.distanceSquared=function(t,e){var n=t.elements,i=e.elements,r=n[0]-i[0],a=n[1]-i[1],o=n[2]-i[2],s=n[3]-i[3];return r*r+a*a+o*o+s*s;},t.distance=function(t,e){var n=t.elements,i=e.elements,r=n[0]-i[0],a=n[1]-i[1],o=n[2]-i[2],s=n[3]-i[3];return Math.sqrt(r*r+a*a+o*o+s*s);},t.dot=function(t,e){var n=t.elements,i=e.elements;return n[0]*i[0]+n[1]*i[1]+n[2]*i[2]+n[3]*i[3];},t.min=function(t,e,n){var i=n.elements,r=t.elements,a=e.elements;i[0]=Math.min(r[0],a[0]),i[1]=Math.min(r[1],a[1]),i[2]=Math.min(r[2],a[2]),i[3]=Math.min(r[3],a[3]);},t.max=function(t,e,n){var i=n.elements,r=t.elements,a=e.elements;i[0]=Math.max(r[0],a[0]),i[1]=Math.max(r[1],a[1]),i[2]=Math.max(r[2],a[2]),i[3]=Math.max(r[3],a[3]);},i(t,["ZERO",function(){return this.ZERO=new t();},"ONE",function(){return this.ONE=new t(1,1,1,1);},"UnitX",function(){return this.UnitX=new t(1,0,0,0);},"UnitY",function(){return this.UnitY=new t(0,1,0,0);},"UnitZ",function(){return this.UnitZ=new t(0,0,1,0);},"UnitW",function(){return this.UnitW=new t(0,0,0,1);}]),t;}(),Fe=function(){function t(t,e,n,i){this.minDepth=0,this.maxDepth=1,this.x=t,this.y=e,this.width=n,this.height=i;}
r(t,"laya.d3.math.Viewport");var e=t.prototype;return e.project=function(t,e,n){Re.transformV3ToV3(t,e,n);var i=t.elements,r=e.elements,a=n.elements,o=i[0]*r[3]+i[1]*r[7]+i[2]*r[11]+r[15];1!==o&&(a[0]=a[0]/o,a[1]=a[1]/o,a[2]=a[2]/o),a[0]=.5*(a[0]+1)*this.width+this.x,a[1]=.5*(1-a[1])*this.height+this.y,a[2]=a[2]*(this.maxDepth-this.minDepth)+this.minDepth;},e.unprojectFromMat=function(t,e,n){var i=t.elements,r=e.elements,a=n.elements;a[0]=(i[0]-this.x)/this.width*2-1,a[1]=-((i[1]-this.y)/this.height*2-1);var o=(this.maxDepth-this.minDepth)/2;a[2]=(i[2]-this.minDepth-o)/o;var s=a[0]*r[3]+a[1]*r[7]+a[2]*r[11]+r[15];Re.transformV3ToV3(n,e,n),1!==s&&(a[0]=a[0]/s,a[1]=a[1]/s,a[2]=a[2]/s);},e.unprojectFromWVP=function(e,n,i,r,a){De.multiply(n,i,t._tempMatrix4x4),r&&De.multiply(t._tempMatrix4x4,r,t._tempMatrix4x4),t._tempMatrix4x4.invert(t._tempMatrix4x4),this.unprojectFromMat(e,t._tempMatrix4x4,a);},i(t,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new De();}]),t;}(),Ve=function(){function t(){this._alphaBlending=1,this._colorIntensity=1,this._shaderValue=new Be();}
r(t,"laya.d3.resource.models.Sky");var e=t.prototype;return e._setEnvironmentDiffuse=function(){this._environmentDiffuse.loaded?this.__ownerCamera._shaderValues.setValue(7,this._environmentDiffuse):this._environmentDiffuse.on("loaded",this,this._environmentDiffuseLoaded);},e._setEnvironmentSpecular=function(){if(this._environmentSpecular.loaded){var t=this._environmentSpecular.simLodInfo;t&&t instanceof Float32Array&&this.__ownerCamera._shaderValues.setValue(9,t),this.__ownerCamera._shaderValues.setValue(8,this._environmentSpecular);}else this._environmentSpecular.on("loaded",this,this._environmentSpecularLoaded);},e._environmentDiffuseLoaded=function(){this.__ownerCamera._shaderValues.setValue(7,this._environmentDiffuse);},e._environmentSpecularLoaded=function(){var t=this._environmentSpecular.simLodInfo;t&&t instanceof Float32Array&&this.__ownerCamera._shaderValues.setValue(9,t),this.__ownerCamera._shaderValues.setValue(8,this._environmentSpecular);},e._render=function(t){},e.destroy=function(){this.__ownerCamera=null;},a(0,e,"_ownerCamera",null,function(t){this.__ownerCamera=t,this._environmentDiffuse&&this._setEnvironmentDiffuse(),this._environmentSpecular&&this._setEnvironmentSpecular();}),a(0,e,"alphaBlending",function(){return this._alphaBlending;},function(t){this._alphaBlending=t,this._alphaBlending<0&&(this._alphaBlending=0),this._alphaBlending>1&&(this._alphaBlending=1);}),a(0,e,"envDiffuseSHBlue",null,function(t){this.__ownerCamera._shaderValues.setValue(12,t);}),a(0,e,"colorIntensity",function(){return this._colorIntensity;},function(t){this._colorIntensity=t,this._colorIntensity<0&&(this._colorIntensity=0);}),a(0,e,"envDiffuseSHGreen",null,function(t){this.__ownerCamera._shaderValues.setValue(11,t);}),a(0,e,"envDiffuseSHRed",null,function(t){this.__ownerCamera._shaderValues.setValue(10,t);}),a(0,e,"environmentDiffuse",function(){return this._environmentDiffuse;},function(t){t.minFifter=9728,this._environmentDiffuse=t,this.__ownerCamera&&this._setEnvironmentDiffuse();}),a(0,e,"environmentSpecular",function(){return this._environmentSpecular;},function(t){this._environmentSpecular=t,this.__ownerCamera&&this._setEnvironmentSpecular();}),t.MVPMATRIX=0,t.INTENSITY=1,t.ALPHABLENDING=2,t.DIFFUSETEXTURE=3,t;}(),Ne=function(){function t(t){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=t,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[];}
r(t,"laya.d3.resource.models.SubMesh");var e=t.prototype;return n.imps(e,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),e._getVertexBuffer=function(t){return void 0===t&&(t=0),0===t?this._vertexBuffer:null;},e._getIndexBuffer=function(){return this._indexBuffer;},e._getStaticBatchBakedVertexs=function(e,n){var i,r,a=this._vertexBuffer,o=a.vertexDeclaration,s=o.getVertexElementByUsage(0).offset/4,l=o.getVertexElementByUsage(3).offset/4,u=n.meshRender.lightmapScaleOffset,h=0,c=0,_=0,f=0,d=0,p=0;if(u){if(r=o.getVertexElementByUsage(15))_=o.vertexStride/4,i=this._vertexCount>0?a.getData().slice(this._vertexStart*_,(this._vertexStart+this._vertexCount)*_):a.getData().slice(),f=r.offset/4;else{_=(p=o.vertexStride/4)+2,i=this._vertexCount?new Float32Array(this._vertexCount*(a.vertexDeclaration.vertexStride/4+2)):new Float32Array(a.vertexCount*(a.vertexDeclaration.vertexStride/4+2)),f=(d=o.getVertexElementByUsage(2).offset/4)+2;var m=a.getData();for(h=0,c=m.length/p;h<c;h++){var g=0;g=this._vertexCount>0?(this._vertexStart+h)*p:h*p;var y=h*_,v=0;for(v=0;v<f;v++){i[y+v]=m[g+v];}
for(v=f;v<p;v++){i[y+v+2]=m[g+v];}}}}else _=o.vertexStride/4,i=this._vertexCount?a.getData().slice(this._vertexStart*_,(this._vertexStart+this._vertexCount)*_):a.getData().slice();if(e){var I=e.worldMatrix,x=t._tempMatrix4x40;I.invert(x);var T=t._tempMatrix4x41,S=n.transform.worldMatrix;De.multiply(x,S,T);}else T=n.transform.worldMatrix;var b=t._tempQuaternion0;for(T.decomposeTransRotScale(t._tempVector30,b,t._tempVector31),h=0,c=i.length/_;h<c;h++){var w=h*_+s,D=h*_+l;if(Ze.transformVector3ArrayToVector3ArrayCoordinate(i,w,T,i,w),Ze.transformVector3ArrayByQuat(i,D,b,i,D),u){var C=h*_+f;if(r)Ze.transformLightingMapTexcoordByUV1Array(i,C,u,i,C);else{var E=h*p+d;Ze.transformLightingMapTexcoordByUV0Array(m,E,u,i,C);}}}
return i;},e._getVertexBuffers=function(){return null;},e._beforeRender=function(t){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0;},e._render=function(t){var e,n=0,i=t.renderElement;if(this._indexCount>1){var r=this._boneIndicesList.length;if(r>1){for(var a=0;a<r;a++){(e=i._skinAnimationDatas||this._skinAnimationDatas)&&(i._shaderValue.setValue(0,e[a]),t._shader.uploadRenderElementUniforms(i._shaderValue.data)),R.mainContext.drawElements(4,this._subIndexBufferCount[a],5123,2*this._subIndexBufferStart[a]);}
P.drawCall+=r;}else(e=i._skinAnimationDatas||this._skinAnimationDatas)&&(i._shaderValue.setValue(0,e[0]),t._shader.uploadRenderElementUniforms(i._shaderValue.data)),R.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),P.drawCall++;n=this._indexCount;}else n=this._indexBuffer.indexCount,(e=i._skinAnimationDatas||this._skinAnimationDatas)&&(i._shaderValue.setValue(0,e[0]),t._shader.uploadRenderElementUniforms(i._shaderValue.data)),R.mainContext.drawElements(4,n,5123,0),P.drawCall++;P.trianglesFaces+=n/3;},e.getIndices=function(){return this._indexCount>0?this._indices:this._indexBuffer.getData();},e.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null;},a(0,e,"_vertexBufferCount",function(){return 1;}),a(0,e,"triangleCount",function(){return this._indexBuffer.indexCount/3;}),i(t,["_tempVector30",function(){return this._tempVector30=new Re();},"_tempVector31",function(){return this._tempVector31=new Re();},"_tempQuaternion0",function(){return this._tempQuaternion0=new Pe();},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new De();},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new De();}]),t;}(),Ue=function(){function t(t){this.defineCounter=0,this.defines=null,t?(this.defineCounter=t.defineCounter,this.defines=t.defines.slice()):(this.defineCounter=0,this.defines=[]);}
r(t,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1");return t.prototype.registerDefine=function(t){var e=Math.pow(2,this.defineCounter++);return this.defines[e]=t,e;},t;}(),Ge=function(){function t(){}
return r(t,"laya.d3.shader.ShaderInit3D"),t.__init__=function(){cn._globalRegDefine("HIGHPRECISION",cn.SHADERDEFINE_HIGHPRECISION),cn._globalRegDefine("FOG",cn.SHADERDEFINE_FOG),cn._globalRegDefine("DIRECTIONLIGHT",cn.SHADERDEFINE_DIRECTIONLIGHT),cn._globalRegDefine("POINTLIGHT",cn.SHADERDEFINE_POINTLIGHT),cn._globalRegDefine("SPOTLIGHT",cn.SHADERDEFINE_SPOTLIGHT),cn._globalRegDefine("UV",cn.SHADERDEFINE_UV0),cn._globalRegDefine("COLOR",cn.SHADERDEFINE_COLOR),cn._globalRegDefine("UV1",cn.SHADERDEFINE_UV1),cn._globalRegDefine("CASTSHADOW",ke.SHADERDEFINE_CAST_SHADOW),cn._globalRegDefine("SHADOWMAP_PSSM1",ke.SHADERDEFINE_SHADOW_PSSM1),cn._globalRegDefine("SHADOWMAP_PSSM2",ke.SHADERDEFINE_SHADOW_PSSM2),cn._globalRegDefine("SHADOWMAP_PSSM3",ke.SHADERDEFINE_SHADOW_PSSM3),cn._globalRegDefine("SHADOWMAP_PCF_NO",ke.SHADERDEFINE_SHADOW_PCF_NO),cn._globalRegDefine("SHADOWMAP_PCF1",ke.SHADERDEFINE_SHADOW_PCF1),cn._globalRegDefine("SHADOWMAP_PCF2",ke.SHADERDEFINE_SHADOW_PCF2),cn._globalRegDefine("SHADOWMAP_PCF3",ke.SHADERDEFINE_SHADOW_PCF3),cn._globalRegDefine("DEPTHFOG",cn.SAHDERDEFINE_DEPTHFOG),Un.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),Un.addInclude("Lighting.glsl","\nstruct DirectionLight\n{\n\tvec3 Color;\n\tvec3 Direction;\n};\n\nstruct PointLight\n{\n\tvec3 Color;\n\tvec3 Position;\n\tfloat Range;\n};\n\nstruct SpotLight\n{\n\tvec3 Color;\n\tvec3 Position;\n\tvec3 Direction;\n\tfloat Spot;\n\tfloat Range;\n};\n\n// U3D中使用衰减纹理,此函数模拟并非正确\n//float U3DAttenuation(in vec3 L,in float invLightRadius)\n//{\n//\tfloat fRatio = clamp(length(L) * invLightRadius,0.0,1.0);\n//\tfRatio *= fRatio;\n//\treturn 1.0 / (1.0 + 25.0 * fRatio)* clamp(4.0*(1.0 - fRatio),0.0,1.0); //fade to black as if 4 pixel texture\n//} \n\n// Same as Just Cause 2 and Crysis 2 (you can read GPU Pro 1 book for more information)\nfloat BasicAttenuation(in vec3 L,in float invLightRadius)\n{\n\tvec3 distance = L * invLightRadius;\n\tfloat attenuation = clamp(1.0 - dot(distance, distance),0.0,1.0); // Equals float attenuation = saturate(1.0f - dot(L, L) / (lightRadius *  lightRadius)); \t\n\treturn attenuation * attenuation;\n} \n\n// Inspired on http://fools.slindev.com/viewtopic.php?f=11&t=21&view=unread#unread\t\nfloat NaturalAttenuation(in vec3 L,in float invLightRadius)\n{\n\tfloat attenuationFactor = 30.0;\n\tvec3 distance = L * invLightRadius;\n\tfloat attenuation = dot(distance, distance); // Equals float attenuation = dot(L, L) / (lightRadius *  lightRadius);\n\tattenuation = 1.0 / (attenuation * attenuationFactor + 1.0);\n\t// Second we move down the function therewith it reaches zero at abscissa 1:\n\tattenuationFactor = 1.0 / (attenuationFactor + 1.0); //attenuationFactor contains now the value we have to subtract\n\tattenuation = max(attenuation - attenuationFactor, 0.0); // The max fixes a bug.\n\t// Finally we expand the equation along the y-axis so that it starts with a function value of 1 again.\n\tattenuation /= 1.0 - attenuationFactor;\n\treturn attenuation;\n} \n\nvoid LayaAirBlinnPhongLight (in vec3 specColor,in float specColorIntensity,in vec3 normal,in vec3 gloss, in vec3 viewDir,in vec3 lightColor, in vec3 lightVec,out vec3 diffuseColor,out vec3 specularColor)\n{\n    mediump vec3 h = normalize(viewDir-lightVec);\n    lowp float ln = max (0.0, dot (-lightVec,normal));\n    float nh = max (0.0, dot (h,normal));\n\tdiffuseColor=lightColor * ln;\n\tspecularColor=lightColor *specColor*pow (nh, specColorIntensity*128.0) * gloss;\n}\n\nvoid LayaAirBlinnPhongDiectionLight (in vec3 specColor,in float specColorIntensity,in vec3 normal,in vec3 gloss, in vec3 viewDir, in DirectionLight light,out vec3 diffuseColor,out vec3 specularColor)\n{\n\tvec3 lightVec=normalize(light.Direction);\n\tLayaAirBlinnPhongLight(specColor,specColorIntensity,normal,gloss,viewDir,light.Color,lightVec,diffuseColor,specularColor);\n}\n\nvoid LayaAirBlinnPhongPointLight (in vec3 pos,in vec3 specColor,in float specColorIntensity,in vec3 normal,in vec3 gloss, in vec3 viewDir, in PointLight light,out vec3 diffuseColor,out vec3 specularColor)\n{\n\tvec3 lightVec =  pos-light.Position;\n\t//if( length(lightVec) > light.Range )\n\t//\treturn;\n\tLayaAirBlinnPhongLight(specColor,specColorIntensity,normal,gloss,viewDir,light.Color,lightVec/length(lightVec),diffuseColor,specularColor);\n\tfloat attenuate = BasicAttenuation(lightVec, 1.0/light.Range);\n\tdiffuseColor *= attenuate;\n\tspecularColor*= attenuate;\n}\n\nvoid LayaAirBlinnPhongSpotLight (in vec3 pos,in vec3 specColor,in float specColorIntensity,in vec3 normal,in vec3 gloss, in vec3 viewDir, in SpotLight light,out vec3 diffuseColor,out vec3 specularColor)\n{\n\tvec3 lightVec =  pos-light.Position;\n\t//if( length(lightVec) > light.Range )\n\t//\treturn;\n\tvec3 normalLightVec=lightVec/length(lightVec);\n\tLayaAirBlinnPhongLight(specColor,specColorIntensity,normal,gloss,viewDir,light.Color,normalLightVec,diffuseColor,specularColor);\n\tfloat spot = pow(max(dot(normalLightVec, normalize(light.Direction)), 0.0), light.Spot);\n\tfloat attenuate = spot*BasicAttenuation(lightVec, 1.0/light.Range);\n\tdiffuseColor *= attenuate;\n\tspecularColor*= attenuate;\n}\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent,vec3 binormal)\n{\n\tvec3 normalT =vec3(2.0*normalMapSample.x - 1.0,1.0-2.0*normalMapSample.y,2.0*normalMapSample.z - 1.0);\n\t\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent);\n\tvec3 B = normalize(binormal);\n\tmat3 TBN = mat3(T, B, N);\n\t\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\n"),Un.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),Un.addInclude("WaveFunction.glsl","\nuniform vec2 u_WaveInfoD[20];\nuniform vec4 u_WaveInfo[20];\n\nuniform float TEXWAVE_UV_SCALE ;//= 20.0; //每texwidth像素代表的实际距离\n/**\n\t这里的计算都是\n*/\n\n/**\n* 计算一个波形\n*  开始计算的时候都按照z向上，最后输出的时候，颠倒一下。\n* @param tm {float} 毫秒\n*/\nvoid calcGerstnerWave(float curtm, vec3 pos, float deep, vec2 uvpos, out vec3 opos, out vec3 B, out vec3 T, out vec3 N, out float foamS){\n\tfloat tm = curtm/1000.;\n\topos = pos;\n\tvec3 wpos=vec3(0.);\t\t//累加的位置\n\tN=vec3(0.,0.,0.);\t//输出的法线初始化一下\n\tT=vec3(0.,0.,0.);\n\tB=vec3(0.,0.,0.);\n\tvec2 cD ;//= D;\n\t//float deepAtt = max(0.,min(deep,1.0));\n\t//A*=deepAtt; //TODO\n\t\n\tfor( int i=0; i<4; i++){\n\t\tcD = u_WaveInfoD[i];//vec2(wi.winfo[0],wi.winfo[1]);// wi.vDir;\n\t\tfloat Q = u_WaveInfo[i].x;//wi.QorK;\n\t\tfloat A = u_WaveInfo[i].y;//wi.A;\n\t\tfloat W = u_WaveInfo[i].z;//wi.omega;\n\t\tfloat P = u_WaveInfo[i].w;//wi.phi;\n\t\tfloat dop = dot(cD,uvpos);\n\t\tfloat c = cos(dop*W - tm*P);//TODO 优化\n\t\tfloat s = sin(dop*W - tm*P);\n\t\tfloat AWs = A*W*s;\n\t\tfloat AWc = A*W*c;\n\t\tfloat _QxyAWs = -Q*cD.x*cD.y*AWs;\n\t\t\n\t\twpos += vec3(Q*A*cD.x*c,\n\t\t\t\t\tQ*A*cD.y*c,\n\t\t\t\t\tA*s);\n\t\tN += vec3(-cD.x*AWc,\n\t\t\t\t-cD.y*AWc,\n\t\t\t\tQ*AWs);//记得最后1-\n\t\tT += vec3(_QxyAWs,\n\t\t\t\tQ*cD.y*cD.y*AWs,//记得1-\n\t\t\t\tcD.y*AWc\n\t\t\t);\n\t\tB += vec3(Q*cD.x*cD.x*AWs,//记得1-\n\t\t\t\t_QxyAWs,\n\t\t\t\tcD.x*AWc\n\t\t\t);\n\t\t//float v1 = exp(-tan((dop*W - tm*P)/2.+1.07));//除2，+pi/2 这样正好能对齐\n#ifdef USE_FOAM\t\t\n\t\tfloat v1 = 0.5-sin((dop*W - tm*P)/1.+2.0)/2.;\n\t\tfoamS += pow(v1,9.)/4.;\n#endif\n\t}\n\tT.y=1.-T.y; B.x=1.-B.x;N.z=1.-N.z;\n\topos += vec3(wpos.x,wpos.z*min(deep/10.,1.),wpos.y);\n\t//y和z交换一下。现在根据uv计算的位置，所以直接交换yz就行。其他情况下有问题么\n\tT.xyz=T.xzy;\n\tB.xyz=B.xzy;\n\tN.xyz=N.xzy;\n}\n\n\nvoid calcWave(float curtm, vec2 uv, out vec3 B, out vec3 T, out vec3 N){\n\tfloat tm = curtm/1000.;\n\tN=vec3(0.,0.,0.);\t//输出的法线初始化一下\n\tvec2 uvpos = uv*TEXWAVE_UV_SCALE; //TODO 这个范围是什么 就是1？\n\tuvpos.y*=-1.;\n\tvec2 cD;// = D;\n\tconst int NumWaves = 4;\n\tfloat scale = 1./float(NumWaves);\n\tfor( int i=0; i<NumWaves; i++){\n\t\tcD = u_WaveInfoD[i];//vec2(wi.winfo[0],wi.winfo[1]);// wi.vDir;\n\t\tfloat k = 1.5;//u_WaveInfo[i].x;//wi.QorK; TODO  不知道为什么，这个取u_WaveInfo[i].x，在mi3w上就会闪。测试发现实际值也传过来了，就是1.5\n\t\tfloat A = u_WaveInfo[i].y;//wi.A;\n\t\tfloat W = u_WaveInfo[i].z;//wi.omega;\n\t\tfloat P = u_WaveInfo[i].w;//wi.phi;\n\t\t\n\t\tfloat dop = dot(cD,uvpos);\n\t\tfloat c = cos(dop*W - tm*P);//TODO 优化\n\t\tfloat s = sin(dop*W - tm*P);\n\t\t/*\n\t\tfloat AWs = A*W*s;\n\t\tfloat AWc = A*W*c;\n\t\tfloat _QxyAWs = -Q*cD.x*cD.y*AWs;\n\t\t\n\t\tN += vec3(-cD.x*AWc,\n\t\t\t\t-cD.y*AWc,\n\t\t\t\tQ*AWs);//记得最后1-\n\t\t*/\n\t\tfloat kWAc = scale*c;//k*W*A*c;  为了提高精度，这里只保留sin，cos部分，实际使用的时候再乘回来。\n\t\t//float kWAc = k*W*A*c;  \n\t\tN += vec3(\n\t\t\t-kWAc*cD.x*pow((s+1.)/2.,k-1.),\n\t\t\t-kWAc*cD.y*pow((s+1.)/2.,k-1.),\n\t\t\t1.\n\t\t);\n\t}\n\t//N.z=1.-N.z;\n\t//y和z交换一下。现在根据uv计算的位置，所以直接交换yz就行。其他情况下有问题么\n\tN.xyz=N.xzy;\n}\n"),Un.addInclude("BRDF.glsl","vec4 LayaAirBRDF(in vec3 diffuseColor, in vec3 specularColor, in float oneMinusReflectivity, in float smoothness, in vec3 normal, in vec3 viewDir, in vec3 lightDir, in vec3 lightColor, in vec3 gi)\n{\n\tfloat perceptualRoughness = SmoothnessToPerceptualRoughness(smoothness);\n\tvec3 halfDir = SafeNormalize(viewDir - lightDir);\n\t\n\tfloat nv = abs(dot(normal, viewDir));\n\t\n\tfloat nl = clamp(dot(normal,   -lightDir),  0.0, 1.0);\n\tfloat nh = clamp(dot(normal,     halfDir),  0.0, 1.0);\n\tfloat lv = clamp(dot(lightDir,   viewDir),  0.0, 1.0);\n\tfloat lh = clamp(dot(lightDir,  -halfDir),  0.0, 1.0);\n\t\n\tfloat diffuseTerm = DisneyDiffuse(nv, nl, lh, perceptualRoughness) * nl;\n\t\n\tfloat roughness = PerceptualRoughnessToRoughness(perceptualRoughness);\n\t\n\t//#if UNITY_BRDF_GGX\n\tfloat V = SmithJointGGXVisibilityTerm(nl, nv, roughness);\n\tfloat D = GGXTerm(nh, roughness);\n\t\n\tfloat specularTerm = V * D * PI;\n\t\n\tspecularTerm = sqrt(max(0.0001, specularTerm));\n\tspecularTerm = max(0.0, specularTerm * nl);\n\t\n\tvec4 color;\n\tcolor.rgb = diffuseColor * (gi + lightColor * diffuseTerm) + specularTerm * lightColor * FresnelTerm (specularColor, lh);\n\t\n\tcolor.a = 1.0;\n\treturn color;\n}"),Un.addInclude("PBRUtils.glsl","struct DirectionLight\n{\n\tvec3 Color;\n\tvec3 Direction;\n};\n\nvec3 UnpackScaleNormal(in vec2 uv0)\n{\n\t#ifdef NORMALTEXTURE\n\t\tvec3 normalT;\n\t\tvec4 normalMapSample = texture2D(u_NormalTexture, uv0);\n\t\tnormalT.x = 2.0 * normalMapSample.x - 1.0;\n\t\tnormalT.y = 1.0 - 2.0 * normalMapSample.y;\n\t\tnormalT.xy *= u_normalScale;\n\t\tnormalT.z = sqrt(1.0 - clamp(dot(normalT.xy, normalT.xy), 0.0, 1.0));\n\t\t\n\t\tvec3 T = normalize(v_Tangent);\n\t\tvec3 B = normalize(v_Binormal);\n\t\tvec3 N = normalize(v_Normal);\n\t\tmat3 TBN = mat3(T, B, N);\n\t\t\n\t\tvec3 bumpedNormal = TBN * normalize(normalT);\n\t\treturn bumpedNormal;\n\t#else\n\t\treturn normalize(v_Normal);\n\t#endif\n}\n\nvec4 DielectricSpecularColor = vec4(0.220916301, 0.220916301, 0.220916301, 1.0 - 0.220916301);\n\nfloat PI = 3.14159265359;\n\nvec3 FresnelTerm (in vec3 F0, in float cosA)\n{\n\treturn F0 + (vec3(1.0) - F0) * pow(1.0 - cosA, 5.0);\n}\n\nfloat PerceptualRoughnessToRoughness(in float perceptualRoughness)\n{\n\treturn perceptualRoughness * perceptualRoughness;\n}\n\nfloat PerceptualRoughnessToSpecularPower(in float perceptualRoughness)\n{\n\tfloat m = PerceptualRoughnessToRoughness(perceptualRoughness);\n\tfloat sq = max(0.0001, m * m);\n\tfloat n = (2.0 / sq) - 2.0;\n\tn = max(n, 0.0001);\n\treturn n;\n}\n\nfloat RoughnessToPerceptualRoughness(in float roughness)\n{\n\treturn sqrt(roughness);\n}\n\nfloat SmoothnessToRoughness(in float smoothness)\n{\n\treturn (1.0 - smoothness) * (1.0 - smoothness);\n}\n\nfloat SmoothnessToPerceptualRoughness(in float smoothness)\n{\n\treturn (1.0 - smoothness);\n}\n\nvec3 SafeNormalize(in vec3 inVec)\n{\n\tfloat dp3 = max(0.001,dot(inVec,inVec));\n\treturn inVec * (1.0 / sqrt(dp3));\n}\n\nfloat DisneyDiffuse(in float NdotV, in float NdotL, in float LdotH, in float perceptualRoughness)\n{\n\tfloat fd90 = 0.5 + 2.0 * LdotH * LdotH * perceptualRoughness;\n\tfloat lightScatter\t= (1.0 + (fd90 - 1.0) * pow(1.0 - NdotL,5.0));\n\tfloat viewScatter\t= (1.0 + (fd90 - 1.0) * pow(1.0 - NdotV,5.0));\n\n\treturn lightScatter * viewScatter;\n}\n\nfloat SmithJointGGXVisibilityTerm (float NdotL, float NdotV, float roughness)\n{\n\tfloat a = roughness;\n\tfloat lambdaV = NdotL * (NdotV * (1.0 - a) + a);\n\tfloat lambdaL = NdotV * (NdotL * (1.0 - a) + a);\n\n\treturn 0.5 / (lambdaV + lambdaL + 0.00001);\n}\n\nfloat GGXTerm (float NdotH, float roughness)\n{\n\tfloat a2 = roughness * roughness;\n\tfloat d = (NdotH * a2 - NdotH) * NdotH + 1.0;\n\treturn 0.31830988618 * a2 / (d * d + 0.0000001);\n}\n\nfloat OneMinusReflectivityFromMetallic(in float metallic)\n{\n\tfloat oneMinusDielectricSpec = DielectricSpecularColor.a;\n\treturn oneMinusDielectricSpec - metallic * oneMinusDielectricSpec;\n}\n\nfloat SpecularStrength(vec3 specular)\n{\n    //(SHADER_TARGET < 30)return specular.r; \n    return max (max (specular.r, specular.g), specular.b);\n}\n\nvec3 DiffuseAndSpecularFromMetallic(in vec3 diffuseColor, in float metallic, out vec3 specularColor, out float oneMinusReflectivity)\n{\n\tspecularColor = mix(DielectricSpecularColor.rgb, diffuseColor, metallic);\n\toneMinusReflectivity = OneMinusReflectivityFromMetallic(metallic);\n\treturn diffuseColor * oneMinusReflectivity;\n}\n\nvec3 EnergyConservationBetweenDiffuseAndSpecular(in vec3 diffuseColor, in vec3 specularColor, out float oneMinusReflectivity)\n{\n\toneMinusReflectivity = 1.0 - SpecularStrength(specularColor);\n\treturn diffuseColor * oneMinusReflectivity;\n}\n\nvec4 Occlusion(in vec2 uv0){\n\t#ifdef OCCLUSIONTEXTURE\n\t\tvec4 occlusionTextureColor = texture2D(u_OcclusionTexture, uv0);\n\t\tfloat occ = occlusionTextureColor.g;\n\t\tfloat oneMinusT = 1.0 - u_occlusionStrength;\n\t\tfloat lerpOneTo = oneMinusT + occ * u_occlusionStrength;\n\t\treturn occlusionTextureColor * lerpOneTo;\n\t#else\n\t\treturn vec4(1.0);\n\t#endif\n}\n\nvec2 ParallaxOffset(in vec3 viewDir){\n\t#ifdef PARALLAXTEXTURE\n\t\tfloat h = texture2D(u_ParallaxTexture, v_Texcoord0).g;\n\t\th = h * u_parallaxScale - u_parallaxScale / 2.0;\n\t\tvec3 v = viewDir;\n\t\tv.z += 0.42;\n\t\tvec2 offset = h * (v.xy / v.z);\n\t\treturn v_Texcoord0 + offset;\n\t#else\n\t\treturn v_Texcoord0;\n\t#endif\n}\n\n"),Un.addInclude("PBRStandardLighting.glsl",'#include "PBRUtils.glsl"\n#include "BRDF.glsl"\n\nvec4 PBRStandardLight(in vec3 diffuseColor, in float metallic, in float smoothness, in vec3 normal, in vec3 viewDir, in vec3 lightDir, in vec3 lightColor, in vec3 gi)\n{\n\tfloat oneMinusReflectivity;\n\tvec3 specularColor;\n\tdiffuseColor = DiffuseAndSpecularFromMetallic (diffuseColor, metallic, specularColor, oneMinusReflectivity);\n\t\n\tvec4 color = LayaAirBRDF(diffuseColor, specularColor, oneMinusReflectivity, smoothness, normal, viewDir, lightDir, lightColor, gi);\n\treturn color;\n}\n\nvec4 PBRStandardDiectionLight (in vec3 diffuseColor, in float metallic, in float smoothness, in vec3 normal, in vec3 viewDir, in DirectionLight light, in vec3 gi)\n{\n\tvec3 lightVec = normalize(light.Direction);\n\treturn PBRStandardLight(diffuseColor, metallic, smoothness, normal, viewDir, lightVec, light.Color, gi);\n}\n\nvec2 MetallicGloss(in float diffuseTextureAlpha, in vec2 uv0)\n{\n\tvec2 mg;\n\t\n\t#ifdef METALLICGLOSSTEXTURE\n\t\tvec4 metallicGlossTextureColor = texture2D(u_MetallicGlossTexture, uv0);\n\t\t#ifdef SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA\n\t\t\tmg.r = metallicGlossTextureColor.r;\n\t\t\tmg.g = diffuseTextureAlpha;\n\t\t#else\n\t\t    mg = metallicGlossTextureColor.ra;\n\t\t#endif\n\t\tmg.g *= u_smoothnessScale;\n\t#else\n\t\tmg.r = u_metallic;\n\t\t#ifdef SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA\n\t\t\tmg.g = diffuseTextureAlpha * u_smoothnessScale;\n\t\t#else\n\t\t\tmg.g = u_smoothness;\n\t\t#endif\n\t#endif\n\t\n\treturn mg;\n}\n\n'),Un.addInclude("PBRSpecularLighting.glsl",'#include "PBRUtils.glsl"\n#include "BRDF.glsl"\n\nvec4 PBRSpecularLight(in vec3 diffuseColor, in vec3 specularColor, in float smoothness, in vec3 normal, in vec3 viewDir, in vec3 lightDir, in vec3 lightColor, in vec3 gi)\n{\n\tfloat oneMinusReflectivity;\n\tdiffuseColor = EnergyConservationBetweenDiffuseAndSpecular (diffuseColor, specularColor, oneMinusReflectivity);\n\t\n\tvec4 color = LayaAirBRDF(diffuseColor, specularColor, oneMinusReflectivity, smoothness, normal, viewDir, lightDir, lightColor, gi);\n\treturn color;\n}\n\nvec4 PBRSpecularDiectionLight (in vec3 diffuseColor, in vec3 specularColor, in float smoothness, in vec3 normal, in vec3 viewDir, in DirectionLight light, in vec3 gi)\n{\n\tvec3 lightVec = normalize(light.Direction);\n\treturn PBRSpecularLight(diffuseColor, specularColor, smoothness, normal, viewDir, lightVec, light.Color, gi);\n}\n\nvec4 SpecularGloss(float diffuseTextureAlpha, in vec2 uv0)\n{\n    vec4 sg;\n\t\n\t#ifdef SPECULARTEXTURE\n\t\tvec4 specularTextureColor = texture2D(u_SpecularTexture, uv0);\n\t\t#ifdef SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA\n\t\t\tsg.rgb = specularTextureColor.rgb;\n\t\t\tsg.a = diffuseTextureAlpha;\n\t\t#else\n\t\t\tsg = specularTextureColor;\n\t\t#endif\n\t\tsg.a *= u_smoothnessScale;\n\t#else\n\t\tsg.rgb = u_SpecularColor.rgb;\n\t\t#ifdef SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA\n\t\t\tsg.a = diffuseTextureAlpha * u_smoothnessScale;\n\t\t#else\n\t\t\tsg.a = u_smoothness;\n\t\t#endif\n\t#endif\n\t\n    return sg;\n}\n\n');var t,e,i={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},r={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_ReflectTexture:[5,1],u_AlphaTestValue:[0,1],u_DiffuseColor:[6,1],u_MaterialSpecular:[8,1],u_Shininess:[9,1],u_MaterialReflect:[10,1],u_TilingOffset:[11,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_VMatrix:[1,3],u_PMatrix:[2,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Color":[4,4],"u_DirectionLight.Direction":[3,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Color":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Color":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]},a=n.Shader3D.nameKey.add("BLINNPHONG");t='attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(LIGHTMAP)&&defined(UV1)\nattribute vec2 a_Texcoord1;\n#endif\n\n#ifdef LIGHTMAP\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nconst int c_MaxBoneCount = 24;\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal; \n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nuniform vec3 u_CameraPos;\nvarying vec3 v_ViewDir; \n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec4 a_Tangent0;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n#ifdef SHADOWMAP_PSSM1\nvarying vec4 v_lightMVPPos;\nuniform mat4 u_lightShadowVP[4];\n#endif\n#endif\n\n#ifdef TILINGOFFSET\nuniform vec4 u_TilingOffset;\n#endif\n\nuniform mat4 u_WorldMat;\nuniform mat4 u_VMatrix;\n uniform mat4 u_PMatrix;\nvoid main_castShadow()\n{\n#ifdef BONE\nmat4 skinTransform=mat4(0.0);\nskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\nskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\nskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\nskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\nvec4 position=skinTransform*a_Position;\ngl_Position = u_MvpMatrix * position;\n#else\ngl_Position = u_MvpMatrix * a_Position;\n#endif\n\n\t//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\nv_Texcoord0=a_Texcoord0;\n#endif\nv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\nmat4 skinTransform=mat4(0.0);\nskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\nskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\nskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\nskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\nvec4 position=skinTransform*a_Position;\ngl_Position = u_MvpMatrix * position;\n#else\ngl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nmat3 worldMat;\n#ifdef BONE\nworldMat=mat3(u_WorldMat*skinTransform);\n#else\nworldMat=mat3(u_WorldMat);\n#endif  \nv_Normal=worldMat*a_Normal;//TODO:法线可以用"魔法"矩阵\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nv_Tangent=worldMat*a_Tangent0.xyz;\nv_Binormal=cross(v_Normal,v_Tangent)*a_Tangent0.w;\n#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n#ifdef BONE\nv_PositionWorld=(u_WorldMat*position).xyz;\n#else\nv_PositionWorld=(u_WorldMat*a_Position).xyz;\n#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nv_ViewDir=u_CameraPos-v_PositionWorld;\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))\nv_Texcoord0=a_Texcoord0;\n#ifdef TILINGOFFSET\nv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\nv_Texcoord0=vec2(v_Texcoord0.x,1.0+v_Texcoord0.y);\n#endif\n#endif\n\n#ifdef LIGHTMAP\n#ifdef SCALEOFFSETLIGHTINGMAPUV\n#ifdef UV1\nv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n#else\nv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n#endif \n#else\n#ifdef UV1\nv_LightMapUV=a_Texcoord1;\n#else\nv_LightMapUV=a_Texcoord0;\n#endif \n#endif \n#endif\n\n#ifdef COLOR\nv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\nv_posViewZ = gl_Position.w;\n#ifdef SHADOWMAP_PSSM1 \nv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\nmain_castShadow();\n#else\nmain_normal();\n#endif\n}\n',e='#ifdef HIGHPRECISION\n\tprecision highp float;\n#else\n\tprecision mediump float;\n#endif\n\n#include "Lighting.glsl";\n\nuniform vec4 u_DiffuseColor;\n\n#ifdef COLOR\n\tvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvarying vec3 v_ViewDir; \n#endif\n\n#ifdef ALPHATEST\n\tuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\n\tuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\n\tuniform samplerCube u_ReflectTexture;\n\tuniform vec3 u_MaterialReflect;\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))\n\tvarying vec2 v_Texcoord0;\n#endif\n\n#ifdef LIGHTMAP\n\tvarying vec2 v_LightMapUV;\n\tuniform sampler2D u_LightMap;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tuniform vec3 u_MaterialSpecular;\n\tuniform float u_Shininess;\n\t#ifdef SPECULARMAP \n\t\tuniform sampler2D u_SpecularTexture;\n\t#endif\n#endif\n\n#ifdef FOG\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\tuniform sampler2D u_NormalTexture;\n\tvarying vec3 v_Tangent;\n\tvarying vec3 v_Binormal;\n#endif\n\n#ifdef DIRECTIONLIGHT\n\tuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\n\tuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\n\tuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\tvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\t\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n\tvec4 mainColor=u_DiffuseColor;\n\t#ifdef DIFFUSEMAP\n\t\tvec4 difTexColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\t\tmainColor=mainColor*difTexColor;\n\t#endif \n\t#ifdef COLOR\n\t\tmainColor=mainColor*v_Color;\n\t#endif \n    \n\t#ifdef ALPHATEST\n\t\tif(mainColor.a<u_AlphaTestValue)\n\t\t\tdiscard;\n\t#endif\n  \n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\t\tvec3 normal;\n\t\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent,v_Binormal));\n\t\t#else\n\t\t\tnormal = normalize(v_Normal);\n\t\t#endif\n\t#endif\n\t\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tvec3 viewDir= normalize(v_ViewDir);\n\t\tvec3 diffuse = vec3(0.0);\n\t\tvec3 specular= vec3(0.0);\n\t\tvec3 dif,spe;\n\t\t#ifdef SPECULARMAP\n\t\t\tvec3 gloss=texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n\t\t#else\n\t\t\t#ifdef DIFFUSEMAP\n\t\t\t\tvec3 gloss=vec3(difTexColor.a);\n\t\t\t#else\n\t\t\t\tvec3 gloss=vec3(1.0);\n\t\t\t#endif\n\t\t#endif\n\t#endif\n\n\t\n\t#ifdef DIRECTIONLIGHT\n\t\tLayaAirBlinnPhongDiectionLight(u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_DirectionLight,dif,spe);\n\t\tdiffuse+=dif;\n\t\tspecular+=spe;\n\t#endif\n \n\t#ifdef POINTLIGHT\n\t\tLayaAirBlinnPhongPointLight(v_PositionWorld,u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_PointLight,dif,spe);\n\t\tdiffuse+=dif;\n\t\tspecular+=spe;\n\t#endif\n\n\t#ifdef SPOTLIGHT\n\t\tLayaAirBlinnPhongSpotLight(v_PositionWorld,u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_SpotLight,dif,spe);\n\t\tdiffuse+=dif;\n\t\tspecular+=spe;\n\t#endif\n\n\t\n\tvec3 finalDiffuse;\n\t#ifdef LIGHTMAP\n\t\tfinalDiffuse=texture2D(u_LightMap, v_LightMapUV).rgb*2.0;\n\t\t//float exponent = texture2D(u_LightMap, v_LightMapUV).a;\n\t\t//finalDiffuse = texture2D(u_LightMap, v_LightMapUV).rgb;\n\t\t//float ratio = pow(2.0, exponent * 255.0 - (128.0 + 8.0));\n\t\t//finalDiffuse = finalDiffuse * 255.0 * ratio;\t\n\t\t//finalDiffuse = sqrt(finalDiffuse);\n\t#else\n\t\tfinalDiffuse=vec3(0.0);\n\t#endif\n\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tfinalDiffuse+=diffuse;\n\t#endif\n\n\t#ifdef RECEIVESHADOW\n\t\tfloat shadowValue = 1.0;\n\t\t#ifdef SHADOWMAP_PSSM3\n\t\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t\t#endif\n\t\t#ifdef SHADOWMAP_PSSM2\n\t\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t\t#endif \n\t\t#ifdef SHADOWMAP_PSSM1\n\t\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t\t#endif\n\t\tgl_FragColor =vec4(mainColor.rgb*(u_AmbientColor + finalDiffuse)*shadowValue,mainColor.a);\n\t#else\n\t\tgl_FragColor =vec4(mainColor.rgb*(u_AmbientColor + finalDiffuse),mainColor.a);\n\t#endif\n\t\n\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\t#ifdef RECEIVESHADOW\n\t\t\tgl_FragColor.rgb+=specular*shadowValue;\n\t\t#else\n\t\t\tgl_FragColor.rgb+=specular;\n\t\t#endif\n\t#endif\n\n\n\t#ifdef REFLECTMAP\n\t\tvec3 incident = -viewDir;\n\t\tvec3 reflectionVector = reflect(incident,normal);\n\t\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\t\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n\t#endif\n\t  \n\t#ifdef FOG\n\t\tfloat lerpFact=clamp((1.0/gl_FragCoord.w-u_FogStart)/u_FogRange,0.0,1.0);\n\t\t#ifdef ADDTIVEFOG\n\t\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t\t#else\n\t\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t\t#endif\n\t#endif\n}\n\nvoid main()\n{\n\t#ifdef CASTSHADOW\t\t\n\t\tmain_castShadow();\n\t#else\n\t  main_normal();\n\t#endif  \n}\n\n';var o=cn.add(a,t,e,i,r);Gn.SHADERDEFINE_DIFFUSEMAP=o.registerMaterialDefine("DIFFUSEMAP"),Gn.SHADERDEFINE_NORMALMAP=o.registerMaterialDefine("NORMALMAP"),Gn.SHADERDEFINE_SPECULARMAP=o.registerMaterialDefine("SPECULARMAP"),Gn.SHADERDEFINE_REFLECTMAP=o.registerMaterialDefine("REFLECTMAP"),Gn.SHADERDEFINE_TILINGOFFSET=o.registerMaterialDefine("TILINGOFFSET"),Gn.SHADERDEFINE_ADDTIVEFOG=o.registerMaterialDefine("ADDTIVEFOG"),i={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},r={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var s=Un.nameKey.add("SIMPLE");t="attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",e='#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',o=cn.add(s,t,e,i,r),Wn.SHADERDEFINE_DIFFUSEMAP=o.registerMaterialDefine("DIFFUSEMAP"),Wn.SHADERDEFINE_NORMALMAP=o.registerMaterialDefine("NORMALMAP"),Wn.SHADERDEFINE_SPECULARMAP=o.registerMaterialDefine("SPECULARMAP"),Wn.SHADERDEFINE_EMISSIVEMAP=o.registerMaterialDefine("EMISSIVEMAP"),Wn.SHADERDEFINE_AMBIENTMAP=o.registerMaterialDefine("AMBIENTMAP"),Wn.SHADERDEFINE_REFLECTMAP=o.registerMaterialDefine("REFLECTMAP"),Wn.SHADERDEFINE_UVTRANSFORM=o.registerMaterialDefine("UVTRANSFORM"),Wn.SHADERDEFINE_TILINGOFFSET=o.registerMaterialDefine("TILINGOFFSET"),Wn.SHADERDEFINE_ADDTIVEFOG=o.registerMaterialDefine("ADDTIVEFOG"),i={a_Position:0,a_Color:1},r={u_MvpMatrix:[1,2]};var l=Un.nameKey.add("LINE");t="attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n\n\nvoid main()\n{\n  gl_Position = u_MvpMatrix * a_Position;\n  v_Color=a_Color;\n}",e="#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nvarying vec4 v_Color;\n\nvoid main()\n{\n  gl_FragColor=v_Color; \n}\n\n",cn.add(l,t,e,i,r),i={a_position:0,a_normal:3,tangent:5,binormal:4,uv:2,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},r={u_Bones:[0,0],u_lodRect:[9,3],irrad_mat_red:[10,3],irrad_mat_green:[11,3],irrad_mat_blue:[12,3],u_hdrexposure:[13,3],u_aoObjPos:[14,1],texBaseColor:[1,1],texNormal:[2,1],texPbrInfo:[3,1],texPrefilterdEnv:[8,3],texHSNoise:[15,1],texPrefilterDiff:[7,3],u_AlphaTestValue:[0,1],texBRDFLUT:[4,1],u_UVAniAge:[5,1],u_roughness:[6,1],u_metaless:[7,1],u_UVMatrix:[8,1],u_UVAge:[9,1],modelMatrix:[0,2],mvp:[1,2],cameraPosition:[0,3],u_View:[1,3],u_Project:[2,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var u=Un.nameKey.add("PBR");t="\nuniform mat4 modelMatrix;\n//uniform mat4 modelViewMatrix;\n//uniform mat4 projectionMatrix;\nuniform mat4 u_View;\nuniform mat4 u_Project;\nuniform mat4 mvp;\n//uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n\nattribute vec3 a_position;\nattribute vec3 a_normal;\n#ifdef HAS_TANGENT\nattribute vec3 tangent;\nattribute vec3 binormal;\n#endif\nattribute vec2 uv;\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\nvarying vec2 vUv;\nvarying vec3 vWorldNorm;\nvarying vec4 vViewPos;\nvarying vec4 vWorldPos;\nvarying vec3 vLightDir;\nvarying vec3 vViewDir;\n#ifdef HAS_TANGENT\nvarying vec3 vWorldTangent;\nvarying vec3 vWorldBinormal;\n#endif\n\n#ifdef RECEIVESHADOW\nvarying float v_posViewZ;\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\nvoid main() {\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tgl_Position = mvp*skinTransform*vec4(a_position,1.);\n\tmat4 modelMat = modelMatrix*skinTransform;\n#else\n\tgl_Position = mvp*vec4(a_position,1.);\n\tmat4 modelMat = modelMatrix;\n#endif\t\n\tvWorldPos = modelMat*vec4(a_position,1.);\n\n#ifdef CASTSHADOW \n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tvUv = uv;\n\t#endif\t\n#else\n    vUv = uv;\n\tvWorldNorm = normalize((modelMat*vec4(a_normal,0.0)).xyz);\n\t#ifdef HAS_TANGENT\n\tvWorldTangent = normalize((modelMat*vec4(tangent,0.0)).xyz);\n\tvWorldBinormal = normalize((modelMat*vec4(binormal,0.0)).xyz);\n\t#endif\n    \n    vViewDir = (vWorldPos.xyz-cameraPosition);//这个不能normalize。否则无法线性差值了\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.z;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vWorldPos;\n\t#endif\n#endif\t\n#endif\n}\n",e='//#version 300 es\n\nprecision highp float;\nprecision lowp int;\n\nconst float PI = 3.14159265358979323846264;\nconst float _2PI = 6.2831853071796;\nvarying vec2 vUv;\nvarying vec3 vWorldNorm;\n#ifdef HAS_TANGENT\nvarying vec3 vWorldTangent;\nvarying vec3 vWorldBinormal;\n#endif\nvarying vec3 vViewDir;\nvarying vec4 vViewPos;\nvarying vec4 vWorldPos;\n//\nuniform sampler2D texBaseColor;\nuniform sampler2D texNormal;\n//预计算的贴图\nuniform sampler2D texPrefilterdEnv;\nuniform sampler2D texBRDFLUT;\nuniform sampler2D texPrefilterDiff;\n#ifdef HAS_PBRINFO\nuniform sampler2D texPbrInfo;   //Ao, Roughness, Metallic\n#endif\nuniform float u_hdrexposure;\nuniform float u_AlphaTestValue;\n\nuniform float u_roughness;\nuniform float u_metaless;\nconst float maxlv = 7.;\t//现在只支持512分辨率的环境贴图\nconst int nmaxlv = 9;//\n\t\t\t\t\t\t\t\nuniform mat4 irrad_mat_red;\nuniform mat4 irrad_mat_green;\nuniform mat4 irrad_mat_blue;\t\t\t\t\t\t\t\n\nvec3 speccontrib = vec3(0.);\n\nconst float _maxu8 = 255.0;\nconst float _maxu16 = 65535.0;\nconst float _shift8 = 256.0;    //平移的话是*256而不是255\nvec2 _RGBAToU16(const in vec4 rgba){\n    return vec2((rgba.r*_maxu8+rgba.g*_maxu8*_shift8)/_maxu16, (rgba.b*_maxu8+rgba.a*_maxu8*_shift8)/_maxu16);\n}\nvec3 _RGBEToRGB( const in vec4 rgba ){\n    float f = pow(2.0, rgba.w * 255.0 - (128.0 + 8.0));\n    return rgba.rgb * (255.0 * f);\n}\n\nfloat saturate(float v){\n    return min(max(v,0.),1.);\n}\n\nvec4 tex2dLod(sampler2D tex, float u, float v, float lod){\n\tvec2 uv = vec2(u,v);\n\tuv+=mod(gl_FragCoord.xy-vec2(0.5),2.0)*vec2(128.,0.);\n\treturn texture2D(tex,uv,lod-16.);\n}\n\n/*\n* 对一个全景图进行采样。假设x轴指向中心。\n*/\nvec4 texPanorama(sampler2D tex, const in vec3 dir){\n\tfloat envu = atan(dir.z,dir.x)/_2PI+0.5; \t\n\tfloat envv = acos(dir.y)/PI;//(1.0-dir.y)/2.0;\n\treturn texture2D(tex,vec2(envu,envv));\n}\n\nvec4 texPanoramaLod(sampler2D tex, const in vec3 dir, float lod){\n\tfloat envu = atan(dir.z,dir.x)/_2PI+0.5; \t\n\tfloat envv = acos(dir.y)/PI;//(1.0-dir.y)/2.0;\n\treturn tex2dLod(tex,envu,envv,lod);\n}\n\n/*\n    计算sh光照。\n    使用level=2，所以需要9个系数。\n    https://cseweb.ucsd.edu/~ravir/papers/envmap/envmap.pdf\n*/\nfloat environment_exposure = 1.0;\nvec3 diff_sh9(vec3 dir){\n\tvec4 shDir = vec4(dir.x,-dir.z,dir.y,1.0);\n  return max(vec3(0.0), vec3(\n\tdot(shDir, irrad_mat_red * shDir),\n\tdot(shDir, irrad_mat_green * shDir),\n\tdot(shDir, irrad_mat_blue * shDir)\n\t)) * environment_exposure;\t\n}\n\n#ifdef HAS_TANGENT\nvec3 applyNormalTex( vec3 norm, vec3 surf_norm ) {\n    vec3 mapN = norm * 2.0 - 1.0;\n    //mapN.xy = normalScale * mapN.xy;\n    mat3 tsn = mat3( vWorldTangent, vWorldBinormal, surf_norm );\n    return normalize( tsn * mapN );\n}\n#endif\n\nvec4 pbrlight(vec3 normal, float rough, float NoV, vec3 R){\n    vec4 basecolor = texture2D(texBaseColor,vUv);\n\tbasecolor.rgb = pow(basecolor.rgb,vec3(2.2));\n\tfloat metaless = 1.0; \t\n\tconst float ismetalinfov = (128./255.);\n\tif(basecolor.a>=ismetalinfov){//这时候表示金属度\n\t\tmetaless = (basecolor.a-ismetalinfov)*2.;\n\t\tbasecolor.a = 1.0;\n\t}else{\n\t\tmetaless = 0.;\n\t\tbasecolor.a = basecolor.a*2.0;\n\t}\n\t#ifdef FIX_METALESS\n\tmetaless = u_metaless;\n\t#endif\n\t#ifdef HAS_PBRINFO\t\n\tvec4 pbrinfo = texture2D(texPbrInfo, vUv);\n\tmetaless = pbrinfo.b;\n\trough = pbrinfo.g;\n\t#endif\n    const vec3 nonmetalF0 =vec3(0.02);\n    vec3 F0 =  mix(nonmetalF0, basecolor.rgb, metaless);\n\t\n    vec4 PrefilteredColor = texPanoramaLod(texPrefilterdEnv, R, rough*maxlv);\n    PrefilteredColor.rgb = _RGBEToRGB(PrefilteredColor);\n    vec4 EnvBRDF = texture2D(texBRDFLUT,vec2(rough , NoV));//TODO lod\n    vec2 rg = _RGBAToU16(EnvBRDF);    \n    speccontrib = (F0* rg.x + saturate( 50.0 * PrefilteredColor.g ) * rg.y);\n\tvec3 color_spec = PrefilteredColor.rgb*speccontrib;\n\t\n\tvec3 color_diff=diff_sh9(normal);\n\tvec3 outc =  color_diff*mix(basecolor.rgb,vec3(0.),metaless)*(vec3(1.0)-speccontrib)+color_spec;\n\t#ifdef HAS_PBRINFO\n\toutc*=pbrinfo.r;\n\t#endif\n\treturn vec4(outc, basecolor.a);\n}\n\nvec3 oldlight(vec4 normal, float NoV, vec3 R){\n    vec4 basecolor = texture2D(texBaseColor,vUv);\n\tconst vec3 lightdir=normalize(vec3(1.,1.,0.));\n\tconst vec3 spcecol = vec3(1.,0.8,0.8);\n\tconst vec3 amb = vec3(0.5);\n\tvec3 diffv =  (vec3(saturate(dot(lightdir,normal.xyz)))+amb);\n\t//vec3 spec = spcecol* pow(saturate(dot(R,lightdir)),(1.-pbrinfo.g)*5.);\n\treturn diffv*basecolor.rgb;//+spec;\n}\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\nvarying float v_posViewZ;\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\n\nvoid main() {\n#ifdef CASTSHADOW\n\tgl_FragColor=packDepth(gl_FragCoord.w);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(texBaseColor,vUv).w;\n\t\tif( alpha < u_AlphaTestValue ){\n\t\t\tdiscard;\n\t\t}\n\t#endif\n#else\n\n\t#ifdef RECEIVESHADOW\n\t\tfloat shadowValue = 1.0;\n\t\t#ifdef SHADOWMAP_PSSM3\n\t\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,vWorldPos.xyz,v_posViewZ,0.0001);\n\t\t#endif\n\t\t#ifdef SHADOWMAP_PSSM2\n\t\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,vWorldPos.xyz,v_posViewZ,0.0001);\n\t\t#endif \n\t\t#ifdef SHADOWMAP_PSSM1\n\t\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.0001);\n\t\t#endif\n\t#endif\t\n\t\n    vec3 normal =  normalize(vWorldNorm);\n\tvec4 normtex = texture2D( texNormal, vUv );\n\t#ifdef HAS_TANGENT\t\n\tnormal = applyNormalTex(normtex.xyz, normal);\n\t#endif\n    vec3 view   = -normalize(vViewDir);\n    float NoV = saturate(dot( view, normal ));\n    vec3 R = 2. * NoV * normal - view;\n\tfloat roughness = normtex.a;\n\t#ifdef FIX_ROUGHNESS\n\troughness = u_roughness;\n\t#endif\n\t\n\tvec4 pbrl = pbrlight(normal,roughness,NoV,R)*u_hdrexposure;\n    gl_FragColor.rgb =  pow(pbrl.rgb,vec3(0.45455));\n\t//gl_FragColor.rgb = oldlight(normtex,NoV,R);\n\t#ifdef RECEIVESHADOW\n\tgl_FragColor.rgb *= max(shadowValue,0.7);\n\t#endif\n\t\n    gl_FragColor.a = pbrl.a;\n\n#endif\n}\n',o=cn.add(u,t,e,i,r),Hn.SHADERDEFINE_FIX_METALESS=o.registerMaterialDefine("FIX_METALESS"),Hn.SHADERDEFINE_FIX_ROUGHNESS=o.registerMaterialDefine("FIX_ROUGHNESS"),Hn.SHADERDEFINE_HAS_TANGENT=o.registerMaterialDefine("HAS_TANGENT"),Hn.SHADERDEFINE_HAS_PBRINFO=o.registerMaterialDefine("HAS_PBRINFO"),Hn.SHADERDEFINE_USE_GROUNDTRUTH=o.registerMaterialDefine("USE_GROUNDTRUTH"),Hn.SHADERDEFINE_TEST_CLIPZ=o.registerMaterialDefine("CLIPZ"),i={a_Position:0,a_Normal:3,a_Tangent0:5,a_Texcoord0:2,a_BoneWeights:7,a_BoneIndices:6},r={u_Bones:[0,0],u_MvpMatrix:[1,2],u_WorldMat:[0,2],u_CameraPos:[0,3],u_AlphaTestValue:[0,1],u_DiffuseColor:[7,1],u_EmissionColor:[8,1],u_DiffuseTexture:[1,1],u_NormalTexture:[3,1],u_ParallaxTexture:[4,1],u_MetallicGlossTexture:[2,1],u_OcclusionTexture:[5,1],u_EmissionTexture:[6,1],u_metallic:[9,1],u_smoothness:[10,1],u_smoothnessScale:[11,1],u_occlusionStrength:[13,1],u_normalScale:[14,1],u_parallaxScale:[15,1],u_TilingOffset:[17,1],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Color":[4,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var h=Un.nameKey.add("PBRStandard");t="attribute vec4 a_Position;\nattribute vec3 a_Normal;\nattribute vec4 a_Tangent0;\nattribute vec2 a_Texcoord0;\n\nuniform mat4 u_MvpMatrix;\nuniform mat4 u_WorldMat;\nuniform vec3 u_CameraPos;\n\nvarying vec2 v_Texcoord0;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec3 v_ViewDir;\nvarying vec3 v_PositionWorld;\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n\t  varying vec4 v_lightMVPPos;\n\t  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef BONE\n\tconst int c_MaxBoneCount = 24;\n\tattribute vec4 a_BoneIndices;\n\tattribute vec4 a_BoneWeights;\n\tuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\nvoid main_castShadow()\n{\n\t#ifdef BONE\n\t\tmat4 skinTransform=mat4(0.0);\n\t\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\t\tvec4 position = skinTransform * a_Position;\n\t\tgl_Position = u_MvpMatrix * position;\n\t#else\n\t\tgl_Position = u_MvpMatrix * a_Position;\n\t#endif\n\t \n\t//TODO没考虑UV动画呢\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tv_Texcoord0 = a_Texcoord0;\n\t#endif\n\t\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tmat4 skinTransform = mat4(0.0);\n\t\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\t\tvec4 position = skinTransform * a_Position;\n\t\tgl_Position = u_MvpMatrix * position;\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t\tv_PositionWorld = (u_WorldMat * position).xyz;\n\t#else\n\t\tgl_Position = u_MvpMatrix * a_Position;\n\t\tworldMat = mat3(u_WorldMat);\n\t\tv_PositionWorld = (u_WorldMat * a_Position).xyz;\n\t#endif\n\t\n\tv_Normal = worldMat * a_Normal;\n\tv_Tangent = worldMat * a_Tangent0.xyz;\n\tv_Binormal = cross(v_Normal, v_Tangent) * a_Tangent0.w;\n  \n\tv_Texcoord0 = a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t#endif\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,1.0 + v_Texcoord0.y);\n  \n\tv_ViewDir = u_CameraPos - v_PositionWorld;\n  \n\t#ifdef RECEIVESHADOW\n\t\tv_posViewZ = gl_Position.w;\n\t\t#ifdef SHADOWMAP_PSSM1 \n\t\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t\t#endif\n\t#endif\n}\n\nvoid main()\n{\n\t#ifdef CASTSHADOW\n\t\tmain_castShadow();\n\t#else\n\t\tmain_normal();\n\t#endif\n}",e='#ifdef FSHIGHPRECISION\n\tprecision highp float;\n#else\n\tprecision mediump float;\n#endif\n\nvarying vec2 v_Texcoord0;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec3 v_ViewDir;\n\nuniform vec4 u_AmbientColor;\nuniform vec4 u_DiffuseColor;\n\n#ifdef DIFFUSETEXTURE\n\tuniform sampler2D u_DiffuseTexture;\n#endif\n#ifdef METALLICGLOSSTEXTURE\n\tuniform sampler2D u_MetallicGlossTexture;\n#endif\n#ifdef NORMALTEXTURE\n\tuniform sampler2D u_NormalTexture;\n\tuniform float u_normalScale;\n#endif\n#ifdef PARALLAXTEXTURE\n\tuniform sampler2D u_ParallaxTexture;\n\tuniform float u_parallaxScale;\n#endif\n#ifdef OCCLUSIONTEXTURE\n\tuniform sampler2D u_OcclusionTexture;\n\tuniform float u_occlusionStrength;\n#endif\n#ifdef EMISSION\n\t#ifdef EMISSIONTEXTURE\n\t\tuniform sampler2D u_EmissionTexture;\n\t#endif\n\tuniform vec4 u_EmissionColor;\n#endif\n\nuniform float u_AlphaTestValue;\nuniform float u_metallic;\nuniform float u_smoothness;\nuniform float u_smoothnessScale;\n\n#include "PBRStandardLighting.glsl"\n#include "ShadowHelper.glsl"\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\t\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\n\nuniform DirectionLight u_DirectionLight;\n\nvoid main_castShadow()\n{\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\n\nvoid main_normal()\n{\t\n\tvec3 viewDir = normalize(v_ViewDir);\n\t\n\tvec2 uv0 = ParallaxOffset(viewDir);\n\t\n\tvec2 mg;\n\t#ifdef DIFFUSETEXTURE\n\t\tvec4 diffuseTextureColor = texture2D(u_DiffuseTexture, uv0);\n\t\tvec4 diffuseColor = diffuseTextureColor * u_DiffuseColor;\n\t\tmg = MetallicGloss(diffuseTextureColor.a, uv0);\n\t#else\n\t\tvec4 diffuseColor = u_DiffuseColor;\n\t\tmg = MetallicGloss(1.0, uv0);\n\t#endif\n\t\n\t#ifdef ALPHATEST\n\t\tif(diffuseColor.a < u_AlphaTestValue)\n\t\t\tdiscard;\n\t#endif\n\t\n\tgl_FragColor = diffuseColor;\n\t\n\tvec3 normal = UnpackScaleNormal(uv0);\n  \n\tvec3 gi = (u_AmbientColor * Occlusion(uv0)).rgb;\n  \n\tvec4 color = PBRStandardDiectionLight(diffuseColor.rgb, mg.r, mg.g, normal, viewDir, u_DirectionLight, gi);\n\t\n\tcolor.a = diffuseColor.a;\n\t\n\t#ifdef EMISSION\n\t\tvec4 emissionColor = u_EmissionColor;\n\t\t#ifdef EMISSIONTEXTURE\n\t\t\temissionColor *=  texture2D(u_EmissionTexture, uv0);\n\t\t#endif\n\t\tcolor.rgb += emissionColor.rgb;\n\t#endif\n\t\n\t#ifdef RECEIVESHADOW\n\t\tfloat shadowValue = 1.0;\n\t\t#ifdef SHADOWMAP_PSSM3\n\t\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t\t#endif\n\t\t#ifdef SHADOWMAP_PSSM2\n\t\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t\t#endif \n\t\t#ifdef SHADOWMAP_PSSM1\n\t\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t\t#endif\n\t\tgl_FragColor = vec4(color.rgb * shadowValue, color.a);\n\t#else\n\t\tgl_FragColor = color;\n\t#endif\n}\n\nvoid main()\n{\n\t#ifdef CASTSHADOW\t\t\n\t\tmain_castShadow();\n\t#else\n\t\tmain_normal();\n\t#endif  \n}\n\n',o=cn.add(h,t,e,i,r),jn.SHADERDEFINE_DIFFUSETEXTURE=o.registerMaterialDefine("DIFFUSETEXTURE"),jn.SHADERDEFINE_METALLICGLOSSTEXTURE=o.registerMaterialDefine("METALLICGLOSSTEXTURE"),jn.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA=o.registerMaterialDefine("SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA"),jn.SHADERDEFINE_NORMALTEXTURE=o.registerMaterialDefine("NORMALTEXTURE"),jn.SHADERDEFINE_PARALLAXTEXTURE=o.registerMaterialDefine("PARALLAXTEXTURE"),jn.SHADERDEFINE_OCCLUSIONTEXTURE=o.registerMaterialDefine("OCCLUSIONTEXTURE"),jn.SHADERDEFINE_EMISSION=o.registerMaterialDefine("EMISSION"),jn.SHADERDEFINE_EMISSIONTEXTURE=o.registerMaterialDefine("EMISSIONTEXTURE"),jn.SHADERDEFINE_TILINGOFFSET=o.registerMaterialDefine("TILINGOFFSET"),i={a_Position:0,a_Normal:3,a_Tangent0:5,a_Texcoord0:2,a_BoneWeights:7,a_BoneIndices:6},r={u_Bones:[0,0],u_MvpMatrix:[1,2],u_WorldMat:[0,2],u_CameraPos:[0,3],u_AlphaTestValue:[0,1],u_DiffuseColor:[7,1],u_SpecularColor:[8,1],u_EmissionColor:[9,1],u_DiffuseTexture:[1,1],u_NormalTexture:[3,1],u_ParallaxTexture:[4,1],u_SpecularTexture:[2,1],u_OcclusionTexture:[5,1],u_EmissionTexture:[6,1],u_smoothness:[10,1],u_smoothnessScale:[11,1],u_occlusionStrength:[13,1],u_normalScale:[14,1],u_parallaxScale:[15,1],u_TilingOffset:[17,1],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Color":[4,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var c=Un.nameKey.add("PBRSpecular");t="attribute vec4 a_Position;\nattribute vec3 a_Normal;\nattribute vec4 a_Tangent0;\nattribute vec2 a_Texcoord0;\n\nuniform mat4 u_MvpMatrix;\nuniform mat4 u_WorldMat;\nuniform vec3 u_CameraPos;\n\nvarying vec2 v_Texcoord0;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec3 v_ViewDir;\nvarying vec3 v_PositionWorld;\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n\t  varying vec4 v_lightMVPPos;\n\t  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef BONE\n\tconst int c_MaxBoneCount = 24;\n\tattribute vec4 a_BoneIndices;\n\tattribute vec4 a_BoneWeights;\n\tuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\nvoid main_castShadow()\n{\n\t#ifdef BONE\n\t\tmat4 skinTransform=mat4(0.0);\n\t\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\t\tvec4 position = skinTransform * a_Position;\n\t\tgl_Position = u_MvpMatrix * position;\n\t#else\n\t\tgl_Position = u_MvpMatrix * a_Position;\n\t#endif\n\t \n\t//TODO没考虑UV动画呢\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tv_Texcoord0 = a_Texcoord0;\n\t#endif\n\t\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tmat4 skinTransform = mat4(0.0);\n\t\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\t\tvec4 position = skinTransform * a_Position;\n\t\tgl_Position = u_MvpMatrix * position;\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t\tv_PositionWorld = (u_WorldMat * position).xyz;\n\t#else\n\t\tgl_Position = u_MvpMatrix * a_Position;\n\t\tworldMat = mat3(u_WorldMat);\n\t\tv_PositionWorld = (u_WorldMat * a_Position).xyz;\n\t#endif\n\t\n\tv_Normal = worldMat * a_Normal;\n\tv_Tangent = worldMat * a_Tangent0.xyz;\n\tv_Binormal = cross(v_Normal, v_Tangent) * a_Tangent0.w;\n  \n\tv_Texcoord0 = a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t#endif\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,1.0 + v_Texcoord0.y);\n  \n\tv_ViewDir = u_CameraPos - v_PositionWorld;\n  \n\t#ifdef RECEIVESHADOW\n\t\tv_posViewZ = gl_Position.w;\n\t\t#ifdef SHADOWMAP_PSSM1 \n\t\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t\t#endif\n\t#endif\n}\n\nvoid main()\n{\n\t#ifdef CASTSHADOW\n\t\tmain_castShadow();\n\t#else\n\t\tmain_normal();\n\t#endif\n}",e='#ifdef FSHIGHPRECISION\n\tprecision highp float;\n#else\n\tprecision mediump float;\n#endif\n\nvarying vec2 v_Texcoord0;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec3 v_ViewDir;\n\nuniform vec4 u_AmbientColor;\nuniform vec4 u_DiffuseColor;\nuniform vec4 u_SpecularColor;\n\n#ifdef DIFFUSETEXTURE\n\tuniform sampler2D u_DiffuseTexture;\n#endif\n#ifdef SPECULARTEXTURE\n\tuniform sampler2D u_SpecularTexture;\n#endif\n#ifdef NORMALTEXTURE\n\tuniform sampler2D u_NormalTexture;\n\tuniform float u_normalScale;\n#endif\n#ifdef PARALLAXTEXTURE\n\tuniform sampler2D u_ParallaxTexture;\n\tuniform float u_parallaxScale;\n#endif\n#ifdef OCCLUSIONTEXTURE\n\tuniform sampler2D u_OcclusionTexture;\n\tuniform float u_occlusionStrength;\n#endif\n#ifdef EMISSION\n\t#ifdef EMISSIONTEXTURE\n\t\tuniform sampler2D u_EmissionTexture;\n\t#endif\n\tuniform vec4 u_EmissionColor;\n#endif\n\nuniform float u_AlphaTestValue;\nuniform float u_metallic;\nuniform float u_smoothness;\nuniform float u_smoothnessScale;\n\n#include "PBRSpecularLighting.glsl"\n#include "ShadowHelper.glsl"\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\t\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\n\nuniform DirectionLight u_DirectionLight;\n\nvoid main_castShadow()\n{\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\n\nvoid main_normal()\n{\t\n\tvec3 viewDir = normalize(v_ViewDir);\n\t\n\tvec2 uv0 = ParallaxOffset(viewDir);\n\t\n\tvec4 sg;\n\t#ifdef DIFFUSETEXTURE\n\t\tvec4 diffuseTextureColor = texture2D(u_DiffuseTexture, uv0);\n\t\tvec4 diffuseColor = diffuseTextureColor * u_DiffuseColor;\n\t\tsg = SpecularGloss(diffuseTextureColor.a, uv0);\n\t#else\n\t\tvec4 diffuseColor = u_DiffuseColor;\n\t\tsg = SpecularGloss(1.0, uv0);\n\t#endif\n\t\n\t#ifdef ALPHATEST\n\t\tif(diffuseColor.a < u_AlphaTestValue)\n\t\t\tdiscard;\n\t#endif\n  \n\tvec3 normal = UnpackScaleNormal(uv0);\n\t\n\tvec3 gi = (u_AmbientColor * Occlusion(uv0)).rgb;\n\t\n\t//float a = (sg.r+sg.g+sg.b) / 3.0;\n  \n\tvec4 color = PBRSpecularDiectionLight(diffuseColor.rgb, sg.rgb, sg.a, normal,viewDir, u_DirectionLight, gi);\n\t\n\tcolor.a = diffuseColor.a;\n\t\n\t#ifdef EMISSION\n\t\tvec4 emissionColor = u_EmissionColor;\n\t\t#ifdef EMISSIONTEXTURE\n\t\t\temissionColor *=  texture2D(u_EmissionTexture, uv0);\n\t\t#endif\n\t\tcolor.rgb += emissionColor.rgb;\n\t#endif\n\t\n\t#ifdef RECEIVESHADOW\n\t\tfloat shadowValue = 1.0;\n\t\t#ifdef SHADOWMAP_PSSM3\n\t\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t\t#endif\n\t\t#ifdef SHADOWMAP_PSSM2\n\t\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t\t#endif \n\t\t#ifdef SHADOWMAP_PSSM1\n\t\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t\t#endif\n\t\tgl_FragColor = vec4(color.rgb * shadowValue, color.a);\n\t#else\n\t\tgl_FragColor = color;\n\t#endif\n}\n\nvoid main()\n{\n\t#ifdef CASTSHADOW\t\t\n\t\tmain_castShadow();\n\t#else\n\t\tmain_normal();\n\t#endif  \n}\n\n',o=cn.add(c,t,e,i,r),zn.SHADERDEFINE_DIFFUSETEXTURE=o.registerMaterialDefine("DIFFUSETEXTURE"),zn.SHADERDEFINE_SPECULARTEXTURE=o.registerMaterialDefine("SPECULARTEXTURE"),zn.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA=o.registerMaterialDefine("SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA"),zn.SHADERDEFINE_NORMALTEXTURE=o.registerMaterialDefine("NORMALTEXTURE"),zn.SHADERDEFINE_PARALLAXTEXTURE=o.registerMaterialDefine("PARALLAXTEXTURE"),zn.SHADERDEFINE_OCCLUSIONTEXTURE=o.registerMaterialDefine("OCCLUSIONTEXTURE"),zn.SHADERDEFINE_EMISSION=o.registerMaterialDefine("EMISSION"),zn.SHADERDEFINE_EMISSIONTEXTURE=o.registerMaterialDefine("EMISSIONTEXTURE"),zn.SHADERDEFINE_TILINGOFFSET=o.registerMaterialDefine("TILINGOFFSET"),i={a_position:0,a_normal:3,uv:2},r={irrad_mat_red:[10,3],irrad_mat_green:[11,3],irrad_mat_blue:[12,3],u_hdrexposure:[13,3],texBaseColor:[1,1],texNormal:[2,1],texSky:[11,1],texUnderWater:[3,1],texPrefilterdEnv:[8,3],texPrefilterDiff:[7,3],texWaterDisp:[4,1],texWaveDetail:[9,1],texDeepColor:[10,1],texWaterInfo:[16,1],texFoam:[17,1],GEOWAVE_UV_SCALE:[18,1],modelMatrix:[0,2],mvp:[1,2],cameraPosition:[0,3],u_curTm:[8,1],u_scrsize:[15,1],u_WaveInfoD:[13,1],u_WaveInfo:[12,1],u_WaveMainDir:[14,1],u_DeepScale:[20,1],u_SeaColor:[19,1],u_View:[1,3],u_Project:[2,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4]};var _=Un.nameKey.add("Water");t='\nuniform mat4 modelMatrix;\n//uniform mat4 modelViewMatrix;\n//uniform mat4 projectionMatrix;\nuniform mat4 u_View;\nuniform mat4 u_Project;\nuniform mat4 mvp;\n//uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\nuniform float u_curTm;\n\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 uv;\n//uniform sampler2D texWaterDisp;\n#ifdef USE_VERTEX_DEEPINFO\n#else\nuniform sampler2D texWaterInfo;\nvarying vec4 vWaterInfo;\nuniform float u_DeepScale;//texWaterInfo.r*vDeepScale\n#endif\nuniform float u_WaveMainDir;\t//主波方向\nuniform float GEOWAVE_UV_SCALE ;//= 100.0;\n\n\nvarying vec2 vUv;\nvarying vec3 vWorldNorm;\nvarying vec3 vWorldTan;\nvarying vec3 vWorldBin;\nvarying vec4 vViewPos;\nvarying vec4 vWorldPos;\nvarying vec3 vLightDir;\nvarying vec3 vViewDir;\nvarying vec3 vDisp;\nvarying float fDeep;\nvarying mat2 matUVTrans;\nvarying float fFoam;\n\nconst float PI = 3.14159265358979323846264;\n\n#include "WaveFunction.glsl"\n\nvec2 getPosFromUV(vec2 uv){\n\treturn uv*50.;\n}\n\nvoid main() {\n\tvec3 pos = a_position;\n    vUv = uv;\n\t\n\t//vDisp = texture2D(texWaterDisp,uv).rgb;\n\t//vec3 disp = vDisp;\n\t\n\t//TODO 这里有个潜规则。\n\tfloat tt = pos.y; pos.y=pos.z; pos.z=-tt;\n\t\n\t#ifdef USE_VERTEX_DEEPINFO\n\tfDeep = -pos.y;\n\tpos.y=0.0;\n\t#else\n\tvWaterInfo = texture2D(texWaterInfo,uv);\n\tfDeep = vWaterInfo.r*u_DeepScale;\n\t#endif\n\t\n\t\n\t//计算波形\n\tmat4 modelMat = modelMatrix;\n\tvec3 opos, T,B,N;\n\tfloat foams=0.;\n\tvec2 uvpos = uv*GEOWAVE_UV_SCALE+vec2(modelMat[3][0],0.);//TODO 如果有旋转缩放怎么办\n\tcalcGerstnerWave(u_curTm, pos,fDeep, uvpos,opos,B,T,N,foams);\n\tfFoam = foams;\n\tgl_Position = mvp*vec4(opos,1.);\n\tvWorldPos = modelMat*vec4(opos,1.);\n\n\tvWorldNorm = normalize((modelMatrix*vec4(N,0.0)).xyz);\n\tvWorldTan = normalize((modelMatrix*vec4(T,0.0)).xyz);\n\tvWorldBin = normalize((modelMatrix*vec4(B,0.0)).xyz);\n    vViewDir = vWorldPos.xyz-cameraPosition; //这个不能取normalize，否则会引入非线性\n\t\n\tfloat s = sin(u_WaveMainDir);\n\tfloat c = cos(u_WaveMainDir);\n\tmatUVTrans = mat2(c,-s,s,c);\n}\n',e="//#version 300 es\n\nprecision highp float;\nprecision lowp int;\n\nconst float PI = 3.14159265358979323846264;\nconst float _2PI = 6.2831853071796;\nvarying vec2 vUv;\nvarying vec3 vWorldNorm;\nvarying vec3 vWorldTan;\nvarying vec3 vWorldBin;\nvarying vec3 vViewDir;//入射。pos-cam\nvarying vec4 vViewPos;\nvarying vec4 vWorldPos;\nvarying float fDeep;\nvarying mat2 matUVTrans;\n#ifdef USE_VERTEX_DEEPINFO\n#else\nvarying vec4 vWaterInfo;\n#endif\nmat3 matTBNOff;//\n\n//\nuniform sampler2D texBaseColor;\nuniform sampler2D texNormal;\n#ifdef CUBE_ENV\nuniform samplerCube texSky;\n#else\nuniform sampler2D texSky;\n#endif\nuniform sampler2D texUnderWater;\nuniform sampler2D texWaveDetail;\n//uniform sampler2D texDeepColor;\nuniform sampler2D texFoam;\nvarying float fFoam;\nuniform float u_curTm;\nuniform vec2 u_scrsize;\nuniform vec3 u_SeaColor;//\n\nconst int NumTexWaves=4;\nconst float Amp_over_L = 0.01;\n//const vec3 SEA_COLOR1 = vec3(0.0292,0.672,0.7467);//大洋\n//const vec3 SEA_COLOR2 = vec3(0,0.927,0.43);//近海\n\nconst float _maxu8 = 255.0;\nconst float _maxu16 = 65535.0;\nconst float _shift8 = 256.0;    //平移的话是*256而不是255\nvec2 _RGBAToU16(const in vec4 rgba){\n    return vec2((rgba.r*_maxu8+rgba.g*_maxu8*_shift8)/_maxu16, (rgba.b*_maxu8+rgba.a*_maxu8*_shift8)/_maxu16);\n}\nvec3 _RGBEToRGB( const in vec4 rgba ){\n    float f = pow(2.0, rgba.w * 255.0 - (128.0 + 8.0));\n    return rgba.rgb * (255.0 * f);\n}\n\nfloat saturate(float v){\n    return min(max(v,0.),1.);\n}\n\n/*\n\t各种 ToneMap\n*/\n//Reinhard\nvec3 ReinhardToneMapping(vec3 color, float adapted_lum) {\n    const float MIDDLE_GREY = 1.;\n    color *= MIDDLE_GREY / adapted_lum;\n    return color / (1.0 + color);\n}\n\n//CE2\nvec3 CEToneMapping(vec3 color, float adapted_lum){\n    return 1. - exp(-adapted_lum * color);\n}\n\n//UC2\nvec3 F1(vec3 x){\n\tconst float A = 0.22;\n\tconst float B = 0.30;\n\tconst float C = 0.10;\n\tconst float D = 0.20;\n\tconst float E = 0.01;\n\tconst float F = 0.30;\n \n\treturn ((x * (A * x + C * B) + D * E) / (x * (A * x + B) + D * F)) - E / F;\n}\n\nvec3 Uncharted2ToneMapping(vec3 color, float adapted_lum){\n\tconst vec3 WHITE = vec3(11.2);\n\treturn F1(1.6 * adapted_lum * color) / F1(WHITE);\n}\n\n//ACES\nvec3 ACESToneMapping(vec3 color, float adapted_lum){\n\tconst float A = 2.51;\n\tconst float B = 0.03;\n\tconst float C = 2.43;\n\tconst float D = 0.59;\n\tconst float E = 0.14;\n\n\tcolor *= adapted_lum;\n\treturn (color * (A * color + B)) / (color * (C * color + D) + E);\n}\n\n/*\n* 对一个全景图进行采样。假设x轴指向中心。\n*/\nvec4 texPanorama(sampler2D tex, const in vec3 dir){\n\tfloat envu = atan(dir.z,dir.x)/_2PI+0.5; \t\n\tfloat envv = acos(dir.y)/PI;//(1.0-dir.y)/2.0;\n\treturn texture2D(tex,vec2(envu,envv));\n}\n\n/*\n\t与位于0点的测试棒的相交测试交点\n\t这个是瞎写的，只是为了测试\n*/\nbool hitClydiner(vec3 pos, vec3 dir, out vec3 hitpos, out vec3 hitnormal){\n\tconst float r = 0.5;\n\tfloat a = dir.x*dir.x+dir.z*dir.z;\n\tfloat b = 2.*dir.x*pos.x+2.*dir.z*pos.z;\n\tfloat c = pos.x*pos.x+pos.z*pos.z-r*r;\n\tfloat d = b*b-4.*a*c;\n\tif(d>=0.0){\n\t\tfloat t = (-b+sqrt(d))/2./a;\n\t\tt =min(t, (-b-sqrt(d))/2./a);\n\t\thitpos = pos+dir*t;\n\t\treturn true;\n\t}\n\t/*\n\tvec3 v1 = normalize(cross(dir,vec3(0.,1.,0.)));//公垂线\n\tfloat dist = dot(pos,v1);//最短距离\n\tif(abs(dist)<r){\n\t\treturn true;\n\t}\n\t*/\n\treturn false;\n}\n\n///* 根据散射公式来计算某个方向的颜色 *///\n//\nfloat phase_function(float costheta, float g, float g2){\n\treturn 1.5*( (1.0-g2) / (2.0+g2) ) * (1.0+costheta*costheta) / pow(1.0+g2-2.0*g*costheta, 1.5);\t\n}\n\nconst float _density = .2;\nconst vec3 _vLightDir=vec3(0.,-1.,0.);//必须是规格化的\nconst int _SAMPLENUM = 20;\nconst float _K1 = 1.0;\nconst float _g = -0.93;\n//\nvec3 calcScatter(vec3 start, vec3 dir, vec3 end){\n\tfloat len = length(end-start);\n\tfloat costheta = dot(dir,_vLightDir);\n\tfloat g2 = _g*_g;\n\tfloat K = _K1*len*_density*phase_function(costheta,_g,g2);\n\t//用分段的方式来积分\n\tfloat dlen = len/float(_SAMPLENUM);//距离平分\n\tfloat ddeep = (start.y-end.y)/float(_SAMPLENUM);//深度平分\n\tfloat sum=0.;\n\tfor( int i=0; i<_SAMPLENUM; i++){\n\t\tfloat fi = float(i);\n\t\tfloat v1 = exp(-_density*(dlen+ddeep)*fi);//TODO 应该可以用分析法计算出来\n\t\tsum += v1;\n\t}\n\treturn vec3(K*sum);\n}\n///* 根据散射公式来计算某个方向的亮度  END *///\n\nconst float cDeep = -2.;\t//假设水的深度\nvec3 getShuiDiColor(vec3 pos, vec3 dir, vec3 normal){\n\t//一个无限大的水底，黑白格纹理。纹理长度为1米\n\tfloat t = ( cDeep-pos.y )/dir.y;\n\tif(t<0.) return vec3(1.,0.,0.);//TEST\n\tbool bhit = false;\n\tvec3 hitpos;\n\tvec3 hitcolor;\n\tvec3 hn;\n\tif(hitClydiner(pos,dir,hitpos,hn) && hitpos.y>cDeep && hitpos.y<pos.y){\n\t\tbhit=true;\n\t\thitcolor = vec3(.8,.8,.8);\n\n\t}else\n\t{\n\t\thitpos = pos+dir*t;\n\t\tvec3 hp = floor(hitpos);\n\t\tfloat a = mod((hp.x+hp.z),2.);\n\t\thitcolor = (a<.9)?vec3(0.,0.,0.):vec3(1.,1.,1.);\n\t\t//hitcolor = texture2D(texUnderWater,hitpos.xz/10.).rgb;\n\t}\n\t\n\tfloat l = length(hitpos-pos);\n\t//return texture2D(texDeepColor,vec2(min(max(l/400.,0.),1.),0.5)).rgb;\n\t//return SEA_COLOR1*calcScatter(pos,dir,hitpos);\n\tfloat left = pow(0.8,l);//假设透过率为80%，则到达水底的时候的光强。\n\treturn mix(hitcolor,u_SeaColor,1.-left);\n}\n\n/*\n\tview已经normalize了\n*/\nvec3 getRefractColor(vec3 view,vec3 normal){\n\tvec3 T = refract(-view, normal, 0.7);\n\treturn getShuiDiColor(vWorldPos.xyz,T,normal); \n}\n\nvec4 calcWaterC(vec3 view, vec3 normal, float von, vec3 R, float rough){\n\t/*\n\t只有浪顶的法线向下，也就是波形形成了交叠的时候，才会这样，所以要通过参数控制避免出现这种情况，而不是在这里保护。\n\tif(dot(R,vec3(0.,1.,0.))<0.){\n\t\tR = -R;\n\t}\n\t*/\n\t//vec3 refr = getRefractColor(-view,normal);\n#ifdef USE_REFR_TEX\t\n\tvec3 refr = texture2D(texUnderWater, gl_FragCoord.xy/u_scrsize+normal.xz/8.).rgb;\n#else\n\tvec3 refr = u_SeaColor;\n#endif\n\tfloat F0=0.02;\n\t//菲涅尔，越大反射越强\n\tfloat f =  F0+(1.0-F0)*exp2((-5.55473*von-6.98316)*von);\n\t//float f = F0+(1.0-F0)*pow(1.-von,5.);\n\t//能看到水底的程度。反射剩余的*水中的衰减\n\t//float a = (1.-f)*(1.-deepk);\n#ifdef CUBE_ENV\n\tvec4 reflc = textureCube(texSky,R);\n#else\n\tvec4 reflc = texPanorama(texSky, R);\n#endif\n#ifdef HDR_ENV\n\tvec3 refl = _RGBEToRGB(reflc)*f;\n#else\n\tvec3 refl = reflc.rgb*f;\n#endif\n\t//return vec4(refl*(1.-rough),1.);\n\t\n\t//vec3 refl = reflc.rgb*f;\n\tvec3 final = mix(refr, u_SeaColor, min(fDeep/10.,1.))+refl*(max(0.,1.-rough));\n#ifdef HDR_ENV\n\tfinal = ACESToneMapping(final,1.);//TODO 这个要uniform传入\n#endif\n\treturn vec4(final,f);\n}\n\nvoid main() {\n    vec3 normal =  normalize(vWorldNorm);\n\t//如果uv=1为100米，希望每个细节纹理表示20米的小波形，则uv缩放是 100/20。细节纹理内部也要用这个值，即pos=uv*20\n\tvec2 ruv = matUVTrans*vUv;\n\tvec3 detailNorm = texture2D(texWaveDetail,fract(ruv*5.)).rgb*2.-vec3(1.);//TODO uv怎么算\n\tfloat texNormScale = 2.*PI*float(NumTexWaves)*Amp_over_L*2.5;\n\tdetailNorm *= vec3(texNormScale,1.,texNormScale);\n\t//旋转\n\t//细节纹理来自rendertarget，因此需要颠倒z\n\t\n\tmatTBNOff = mat3(matUVTrans[0][0],0.,matUVTrans[1][0],\n\t0.,1.,0.,\n\tmatUVTrans[0][1],0.,matUVTrans[1][1]\n\t);\n\t\n\t/*\n\tmatTBNOff = mat3(0.,0.,1.,\n\t0.,1.,0.,\n\t-1.,0.,0.\n\t);\n\t*/\n\n    mat3 tsn = mat3( vWorldBin, normal, vWorldTan);\t\n    //normal = normalize(tsn * matTBNOff * detailNorm);\n\tnormal = normalize(tsn * detailNorm); //这个应该更正确。因为本身方向就是根据uv算的，如果是静态图片才需要转换。\n\t//vec4 normtex = texture2D( texNormal, vUv );\n    vec3 view   = -normalize(vViewDir);//view 是指向camera的\n    float NoV = saturate(dot( view, normal ));\n    //vec3 R = 2. * NoV * normal - view;\n\t\n#ifdef USE_FOAM\t\n\tvec4 foamc = (texture2D(texFoam,vUv*50.)+texture2D(texFoam,vUv*20.))/2.;\n\tfloat nearcoast = 1.-min(fDeep/10.,1.);// 1.-vWaterInfo.r;\n\tfloat foams = (nearcoast/4.+fFoam)*2.*nearcoast;\n#else\n\tfloat foams =0.;\n#endif\n\t\n\tvec3 R = reflect(-view,normal);\n\tvec4 wc = calcWaterC(view, normal,NoV,R, foams);\n\n\tgl_FragColor.rgb = wc.rgb;//normalize(detailNorm).rrr;//((normal)+vec3(0.0))/1.;//normalize(normal).rgb;//texture2D(texWaveDetail,vUv).rgb;// fracColor * texture2D(texUnderWater, vUv*20.0).rgb;// vec3(1.0);//pbrl.rgb;\n    gl_FragColor.a = 1.0;//wc.a;\n#ifdef USE_FOAM\n\tgl_FragColor.rgb = mix(gl_FragColor.rgb,vec3(1.),foamc.a*foams);\n\tgl_FragColor.a = foamc.r;\n#endif\n\t//if(mod(vUv.x*100.,1.0)<0.02 || mod(vUv.y*100.,1.0)<0.02) gl_FragColor.rgb=vec3(0.5,.5,.5);\n\t//gl_FragColor.rgb = detailNorm;\n}\n",o=cn.add(_,t,e,i,r),Xn.SHADERDEFINE_CUBE_ENV=o.registerMaterialDefine("CUBE_ENV"),Xn.SHADERDEFINE_HDR_ENV=o.registerMaterialDefine("HDR_ENV"),Xn.SHADERDEFINE_SHOW_NORMAL=o.registerMaterialDefine("SHOW_NORMAL"),Xn.SHADERDEFINE_USEVERTEXHEIGHT=o.registerMaterialDefine("USE_VERTEX_DEEPINFO"),Xn.SHADERDEFINE_USE_FOAM=o.registerMaterialDefine("USE_FOAM"),Xn.SHADERDEFINE_USE_REFRACT_TEX=o.registerMaterialDefine("USE_REFR_TEX"),i={a_CornerTextureCoordinate:17,a_MeshPosition:0,a_MeshColor:1,a_MeshTextureCoordinate:2,a_ShapePositionStartLifeTime:30,a_DirectionTime:32,a_StartColor:19,a_EndColor:23,a_StartSize:20,a_StartRotation0:22,a_StartSpeed:31,a_Random0:34,a_Random1:35,a_SimulationWorldPostion:36,a_SimulationWorldRotation:37},r={u_Tintcolor:[2,1],u_TilingOffset:[3,1],u_texture:[1,1],u_WorldPosition:[0,2],u_WorldRotation:[1,2],u_PositionScale:[4,2],u_SizeScale:[5,2],u_ScalingMode:[6,2],u_Gravity:[7,2],u_ThreeDStartRotation:[8,2],u_StretchedBillboardLengthScale:[9,2],u_StretchedBillboardSpeedScale:[10,2],u_SimulationSpace:[11,2],u_CurrentTime:[12,2],u_ColorOverLifeGradientAlphas:[22,2],u_ColorOverLifeGradientColors:[23,2],u_MaxColorOverLifeGradientAlphas:[24,2],u_MaxColorOverLifeGradientColors:[25,2],u_VOLVelocityConst:[13,2],u_VOLVelocityGradientX:[14,2],u_VOLVelocityGradientY:[15,2],u_VOLVelocityGradientZ:[16,2],u_VOLVelocityConstMax:[17,2],u_VOLVelocityGradientMaxX:[18,2],u_VOLVelocityGradientMaxY:[19,2],u_VOLVelocityGradientMaxZ:[20,2],u_VOLSpaceType:[21,2],u_SOLSizeGradient:[26,2],u_SOLSizeGradientX:[27,2],u_SOLSizeGradientY:[28,2],u_SOLSizeGradientZ:[29,2],u_SOLSizeGradientMax:[30,2],u_SOLSizeGradientMaxX:[31,2],u_SOLSizeGradientMaxY:[32,2],u_SOLSizeGradientMaxZ:[33,2],u_ROLAngularVelocityConst:[34,2],u_ROLAngularVelocityConstSeprarate:[35,2],u_ROLAngularVelocityGradient:[36,2],u_ROLAngularVelocityGradientX:[37,2],u_ROLAngularVelocityGradientY:[38,2],u_ROLAngularVelocityGradientZ:[39,2],u_ROLAngularVelocityGradientW:[40,2],u_ROLAngularVelocityConstMax:[41,2],u_ROLAngularVelocityConstMaxSeprarate:[42,2],u_ROLAngularVelocityGradientMax:[43,2],u_ROLAngularVelocityGradientMaxX:[44,2],u_ROLAngularVelocityGradientMaxY:[45,2],u_ROLAngularVelocityGradientMaxZ:[46,2],u_ROLAngularVelocityGradientMaxW:[47,2],u_TSACycles:[48,2],u_TSASubUVLength:[49,2],u_TSAGradientUVs:[50,2],u_TSAMaxGradientUVs:[51,2],u_CameraPosition:[0,3],u_CameraDirection:[5,3],u_CameraUp:[6,3],u_View:[1,3],u_Projection:[2,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4]};var f=Un.nameKey.add("PARTICLESHURIKEN");t="#ifdef HIGHPRECISION\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n\n#if defined(SPHERHBILLBOARD)||defined(STRETCHEDBILLBOARD)||defined(HORIZONTALBILLBOARD)||defined(VERTICALBILLBOARD)\n\tattribute vec4 a_CornerTextureCoordinate;\n#endif\n#ifdef RENDERMODE_MESH\n\tattribute vec3 a_MeshPosition;\n\tattribute vec4 a_MeshColor;\n\tattribute vec2 a_MeshTextureCoordinate;\n\tvarying vec4 v_MeshColor;\n#endif\n\nattribute vec4 a_ShapePositionStartLifeTime;\nattribute vec4 a_DirectionTime;\nattribute vec4 a_StartColor;\nattribute vec3 a_StartSize;\nattribute vec3 a_StartRotation0;\nattribute float a_StartSpeed;\n#if defined(COLOROVERLIFETIME)||defined(RANDOMCOLOROVERLIFETIME)||defined(SIZEOVERLIFETIMERANDOMCURVES)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\n  attribute vec4 a_Random0;\n#endif\n#if defined(TEXTURESHEETANIMATIONRANDOMCURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n  attribute vec4 a_Random1;\n#endif\nattribute vec3 a_SimulationWorldPostion;\nattribute vec4 a_SimulationWorldRotation;\n\nvarying float v_Discard;\nvarying vec4 v_Color;\n#ifdef DIFFUSEMAP\n\tvarying vec2 v_TextureCoordinate;\n#endif\n\nuniform float u_CurrentTime;\nuniform vec3 u_Gravity;\n\nuniform vec3 u_WorldPosition;\nuniform vec4 u_WorldRotation;\nuniform bool u_ThreeDStartRotation;\nuniform int u_ScalingMode;\nuniform vec3 u_PositionScale;\nuniform vec3 u_SizeScale;\nuniform mat4 u_View;\nuniform mat4 u_Projection;\n\n#ifdef STRETCHEDBILLBOARD\n\tuniform vec3 u_CameraPosition;\n#endif\nuniform vec3 u_CameraDirection;//TODO:只有几种广告牌模式需要用\nuniform vec3 u_CameraUp;\n\nuniform  float u_StretchedBillboardLengthScale;\nuniform  float u_StretchedBillboardSpeedScale;\nuniform int u_SimulationSpace;\n\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n  uniform  int  u_VOLSpaceType;\n#endif\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)\n  uniform  vec3 u_VOLVelocityConst;\n#endif\n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n  uniform  vec2 u_VOLVelocityGradientX[4];//x为key,y为速度\n  uniform  vec2 u_VOLVelocityGradientY[4];//x为key,y为速度\n  uniform  vec2 u_VOLVelocityGradientZ[4];//x为key,y为速度\n#endif\n#ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\n  uniform  vec3 u_VOLVelocityConstMax;\n#endif\n#ifdef VELOCITYOVERLIFETIMERANDOMCURVE\n  uniform  vec2 u_VOLVelocityGradientMaxX[4];//x为key,y为速度\n  uniform  vec2 u_VOLVelocityGradientMaxY[4];//x为key,y为速度\n  uniform  vec2 u_VOLVelocityGradientMaxZ[4];//x为key,y为速度\n#endif\n\n#ifdef COLOROVERLIFETIME\n  uniform  vec4 u_ColorOverLifeGradientColors[4];//x为key,yzw为Color\n  uniform  vec2 u_ColorOverLifeGradientAlphas[4];//x为key,y为Alpha\n#endif\n#ifdef RANDOMCOLOROVERLIFETIME\n  uniform  vec4 u_ColorOverLifeGradientColors[4];//x为key,yzw为Color\n  uniform  vec2 u_ColorOverLifeGradientAlphas[4];//x为key,y为Alpha\n  uniform  vec4 u_MaxColorOverLifeGradientColors[4];//x为key,yzw为Color\n  uniform  vec2 u_MaxColorOverLifeGradientAlphas[4];//x为key,y为Alpha\n#endif\n\n\n#if defined(SIZEOVERLIFETIMECURVE)||defined(SIZEOVERLIFETIMERANDOMCURVES)\n  uniform  vec2 u_SOLSizeGradient[4];//x为key,y为尺寸\n#endif\n#ifdef SIZEOVERLIFETIMERANDOMCURVES\n  uniform  vec2 u_SOLSizeGradientMax[4];//x为key,y为尺寸\n#endif\n#if defined(SIZEOVERLIFETIMECURVESEPERATE)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)\n  uniform  vec2 u_SOLSizeGradientX[4];//x为key,y为尺寸\n  uniform  vec2 u_SOLSizeGradientY[4];//x为key,y为尺寸\n  uniform  vec2 u_SOLSizeGradientZ[4];//x为key,y为尺寸\n#endif\n#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\n  uniform  vec2 u_SOLSizeGradientMaxX[4];//x为key,y为尺寸\n  uniform  vec2 u_SOLSizeGradientMaxY[4];//x为key,y为尺寸\n  uniform  vec2 u_SOLSizeGradientMaxZ[4];//x为key,y为尺寸\n#endif\n\n\n#ifdef ROTATIONOVERLIFETIME\n  #if defined(ROTATIONOVERLIFETIMECONSTANT)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)\n    uniform  float u_ROLAngularVelocityConst;\n  #endif\n  #ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n    uniform  float u_ROLAngularVelocityConstMax;\n  #endif\n  #if defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\n    uniform  vec2 u_ROLAngularVelocityGradient[4];//x为key,y为旋转\n  #endif\n  #ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n    uniform  vec2 u_ROLAngularVelocityGradientMax[4];//x为key,y为旋转\n  #endif\n#endif\n#ifdef ROTATIONOVERLIFETIMESEPERATE\n  #if defined(ROTATIONOVERLIFETIMECONSTANT)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)\n    uniform  vec3 u_ROLAngularVelocityConstSeprarate;\n  #endif\n  #ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n    uniform  vec3 u_ROLAngularVelocityConstMaxSeprarate;\n  #endif\n  #if defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\n    uniform  vec2 u_ROLAngularVelocityGradientX[4];\n    uniform  vec2 u_ROLAngularVelocityGradientY[4];\n    uniform  vec2 u_ROLAngularVelocityGradientZ[4];\n\tuniform  vec2 u_ROLAngularVelocityGradientW[4];\n  #endif\n  #ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n    uniform  vec2 u_ROLAngularVelocityGradientMaxX[4];\n    uniform  vec2 u_ROLAngularVelocityGradientMaxY[4];\n    uniform  vec2 u_ROLAngularVelocityGradientMaxZ[4];\n\tuniform  vec2 u_ROLAngularVelocityGradientMaxW[4];\n  #endif\n#endif\n\n#if defined(TEXTURESHEETANIMATIONCURVE)||defined(TEXTURESHEETANIMATIONRANDOMCURVE)\n  uniform  float u_TSACycles;\n  uniform  vec2 u_TSASubUVLength;\n  uniform  vec2 u_TSAGradientUVs[4];//x为key,y为frame\n#endif\n#ifdef TEXTURESHEETANIMATIONRANDOMCURVE\n  uniform  vec2 u_TSAMaxGradientUVs[4];//x为key,y为frame\n#endif\n\n#ifdef FOG\n\tvarying vec3 v_PositionWorld;\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvec3 rotationByEuler(in vec3 vector,in vec3 rot)\n{\n\tfloat halfRoll = rot.z * 0.5;\n    float halfPitch = rot.x * 0.5;\n\tfloat halfYaw = rot.y * 0.5;\n\n\tfloat sinRoll = sin(halfRoll);\n\tfloat cosRoll = cos(halfRoll);\n\tfloat sinPitch = sin(halfPitch);\n\tfloat cosPitch = cos(halfPitch);\n\tfloat sinYaw = sin(halfYaw);\n\tfloat cosYaw = cos(halfYaw);\n\n\tfloat quaX = (cosYaw * sinPitch * cosRoll) + (sinYaw * cosPitch * sinRoll);\n\tfloat quaY = (sinYaw * cosPitch * cosRoll) - (cosYaw * sinPitch * sinRoll);\n\tfloat quaZ = (cosYaw * cosPitch * sinRoll) - (sinYaw * sinPitch * cosRoll);\n\tfloat quaW = (cosYaw * cosPitch * cosRoll) + (sinYaw * sinPitch * sinRoll);\n\t\n\t//vec4 q=vec4(quaX,quaY,quaZ,quaW);\n\t//vec3 temp = cross(q.xyz, vector) + q.w * vector;\n\t//return (cross(temp, -q.xyz) + dot(q.xyz,vector) * q.xyz + q.w * temp);\n\t\n\tfloat x = quaX + quaX;\n    float y = quaY + quaY;\n    float z = quaZ + quaZ;\n    float wx = quaW * x;\n    float wy = quaW * y;\n    float wz = quaW * z;\n\tfloat xx = quaX * x;\n    float xy = quaX * y;\n\tfloat xz = quaX * z;\n    float yy = quaY * y;\n    float yz = quaY * z;\n    float zz = quaZ * z;\n\n    return vec3(((vector.x * ((1.0 - yy) - zz)) + (vector.y * (xy - wz))) + (vector.z * (xz + wy)),\n                ((vector.x * (xy + wz)) + (vector.y * ((1.0 - xx) - zz))) + (vector.z * (yz - wx)),\n                ((vector.x * (xz - wy)) + (vector.y * (yz + wx))) + (vector.z * ((1.0 - xx) - yy)));\n\t\n}\n\n//假定axis已经归一化\nvec3 rotationByAxis(in vec3 vector,in vec3 axis, in float angle)\n{\n\tfloat halfAngle = angle * 0.5;\n\tfloat sin = sin(halfAngle);\n\t\n\tfloat quaX = axis.x * sin;\n\tfloat quaY = axis.y * sin;\n\tfloat quaZ = axis.z * sin;\n\tfloat quaW = cos(halfAngle);\n\t\n\t//vec4 q=vec4(quaX,quaY,quaZ,quaW);\n\t//vec3 temp = cross(q.xyz, vector) + q.w * vector;\n\t//return (cross(temp, -q.xyz) + dot(q.xyz,vector) * q.xyz + q.w * temp);\n\t\n\tfloat x = quaX + quaX;\n    float y = quaY + quaY;\n    float z = quaZ + quaZ;\n    float wx = quaW * x;\n    float wy = quaW * y;\n    float wz = quaW * z;\n\tfloat xx = quaX * x;\n    float xy = quaX * y;\n\tfloat xz = quaX * z;\n    float yy = quaY * y;\n    float yz = quaY * z;\n    float zz = quaZ * z;\n\n    return vec3(((vector.x * ((1.0 - yy) - zz)) + (vector.y * (xy - wz))) + (vector.z * (xz + wy)),\n                ((vector.x * (xy + wz)) + (vector.y * ((1.0 - xx) - zz))) + (vector.z * (yz - wx)),\n                ((vector.x * (xz - wy)) + (vector.y * (yz + wx))) + (vector.z * ((1.0 - xx) - yy)));\n\t\n}\n\nvec3 rotationByQuaternions(in vec3 v,in vec4 q) \n{\n\treturn v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);\n}\n\n \n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)||defined(SIZEOVERLIFETIMECURVE)||defined(SIZEOVERLIFETIMECURVESEPERATE)||defined(SIZEOVERLIFETIMERANDOMCURVES)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)\nfloat getCurValueFromGradientFloat(in vec2 gradientNumbers[4],in float normalizedAge)\n{\n\tfloat curValue;\n\tfor(int i=1;i<4;i++)\n\t{\n\t\tvec2 gradientNumber=gradientNumbers[i];\n\t\tfloat key=gradientNumber.x;\n\t\tif(key>=normalizedAge)\n\t\t{\n\t\t\tvec2 lastGradientNumber=gradientNumbers[i-1];\n\t\t\tfloat lastKey=lastGradientNumber.x;\n\t\t\tfloat age=(normalizedAge-lastKey)/(key-lastKey);\n\t\t\tcurValue=mix(lastGradientNumber.y,gradientNumber.y,age);\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn curValue;\n}\n#endif\n\n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)||defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\nfloat getTotalValueFromGradientFloat(in vec2 gradientNumbers[4],in float normalizedAge)\n{\n\tfloat totalValue=0.0;\n\tfor(int i=1;i<4;i++)\n\t{\n\t\tvec2 gradientNumber=gradientNumbers[i];\n\t\tfloat key=gradientNumber.x;\n\t\tvec2 lastGradientNumber=gradientNumbers[i-1];\n\t\tfloat lastValue=lastGradientNumber.y;\n\t\t\n\t\tif(key>=normalizedAge){\n\t\t\tfloat lastKey=lastGradientNumber.x;\n\t\t\tfloat age=(normalizedAge-lastKey)/(key-lastKey);\n\t\t\ttotalValue+=(lastValue+mix(lastValue,gradientNumber.y,age))/2.0*a_ShapePositionStartLifeTime.w*(normalizedAge-lastKey);\n\t\t\tbreak;\n\t\t}\n\t\telse{\n\t\t\ttotalValue+=(lastValue+gradientNumber.y)/2.0*a_ShapePositionStartLifeTime.w*(key-lastGradientNumber.x);\n\t\t}\n\t}\n\treturn totalValue;\n}\n#endif\n\n#if defined(COLOROVERLIFETIME)||defined(RANDOMCOLOROVERLIFETIME)\nvec4 getColorFromGradient(in vec2 gradientAlphas[4],in vec4 gradientColors[4],in float normalizedAge)\n{\n\tvec4 overTimeColor;\n\tfor(int i=1;i<4;i++)\n\t{\n\t\tvec2 gradientAlpha=gradientAlphas[i];\n\t\tfloat alphaKey=gradientAlpha.x;\n\t\tif(alphaKey>=normalizedAge)\n\t\t{\n\t\t\tvec2 lastGradientAlpha=gradientAlphas[i-1];\n\t\t\tfloat lastAlphaKey=lastGradientAlpha.x;\n\t\t\tfloat age=(normalizedAge-lastAlphaKey)/(alphaKey-lastAlphaKey);\n\t\t\toverTimeColor.a=mix(lastGradientAlpha.y,gradientAlpha.y,age);\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\tfor(int i=1;i<4;i++)\n\t{\n\t\tvec4 gradientColor=gradientColors[i];\n\t\tfloat colorKey=gradientColor.x;\n\t\tif(colorKey>=normalizedAge)\n\t\t{\n\t\t\tvec4 lastGradientColor=gradientColors[i-1];\n\t\t\tfloat lastColorKey=lastGradientColor.x;\n\t\t\tfloat age=(normalizedAge-lastColorKey)/(colorKey-lastColorKey);\n\t\t\toverTimeColor.rgb=mix(gradientColors[i-1].yzw,gradientColor.yzw,age);\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn overTimeColor;\n}\n#endif\n\n\n#if defined(TEXTURESHEETANIMATIONCURVE)||defined(TEXTURESHEETANIMATIONRANDOMCURVE)\nfloat getFrameFromGradient(in vec2 gradientFrames[4],in float normalizedAge)\n{\n\tfloat overTimeFrame;\n\tfor(int i=1;i<4;i++)\n\t{\n\t\tvec2 gradientFrame=gradientFrames[i];\n\t\tfloat key=gradientFrame.x;\n\t\tif(key>=normalizedAge)\n\t\t{\n\t\t\tvec2 lastGradientFrame=gradientFrames[i-1];\n\t\t\tfloat lastKey=lastGradientFrame.x;\n\t\t\tfloat age=(normalizedAge-lastKey)/(key-lastKey);\n\t\t\toverTimeFrame=mix(lastGradientFrame.y,gradientFrame.y,age);\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn floor(overTimeFrame);\n}\n#endif\n\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\nvec3 computeParticleLifeVelocity(in float normalizedAge)\n{\n  vec3 outLifeVelocity;\n  #ifdef VELOCITYOVERLIFETIMECONSTANT\n\t outLifeVelocity=u_VOLVelocityConst; \n  #endif\n  #ifdef VELOCITYOVERLIFETIMECURVE\n     outLifeVelocity= vec3(getCurValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge));\n  #endif\n  #ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\n\t outLifeVelocity=mix(u_VOLVelocityConst,u_VOLVelocityConstMax,vec3(a_Random1.y,a_Random1.z,a_Random1.w)); \n  #endif\n  #ifdef VELOCITYOVERLIFETIMERANDOMCURVE\n     outLifeVelocity=vec3(mix(getCurValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxX,normalizedAge),a_Random1.y),\n\t                 mix(getCurValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxY,normalizedAge),a_Random1.z),\n\t\t\t\t\t mix(getCurValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxZ,normalizedAge),a_Random1.w));\n  #endif\n\t\t\t\t\t\n  return outLifeVelocity;\n} \n#endif\n\nvec3 computeParticlePosition(in vec3 startVelocity, in vec3 lifeVelocity,in float age,in float normalizedAge,vec3 gravityVelocity,vec4 worldRotation)\n{\n   vec3 startPosition;\n   vec3 lifePosition;\n   #if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n\t#ifdef VELOCITYOVERLIFETIMECONSTANT\n\t\t  startPosition=startVelocity*age;\n\t\t  lifePosition=lifeVelocity*age;\n\t#endif\n\t#ifdef VELOCITYOVERLIFETIMECURVE\n\t\t  startPosition=startVelocity*age;\n\t\t  lifePosition=vec3(getTotalValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge));\n\t#endif\n\t#ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\n\t\t  startPosition=startVelocity*age;\n\t\t  lifePosition=lifeVelocity*age;\n\t#endif\n\t#ifdef VELOCITYOVERLIFETIMERANDOMCURVE\n\t\t  startPosition=startVelocity*age;\n\t\t  lifePosition=vec3(mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxX,normalizedAge),a_Random1.y)\n\t      ,mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxY,normalizedAge),a_Random1.z)\n\t      ,mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxZ,normalizedAge),a_Random1.w));\n\t#endif\n\t\n\tvec3 finalPosition;\n\tif(u_VOLSpaceType==0){\n\t  if(u_ScalingMode!=2)\n\t   finalPosition =rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition+lifePosition),worldRotation);\n\t  else\n\t   finalPosition =rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition+lifePosition,worldRotation);\n\t}\n\telse{\n\t  if(u_ScalingMode!=2)\n\t    finalPosition = rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition),worldRotation)+lifePosition;\n\t  else\n\t    finalPosition = rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition,worldRotation)+lifePosition;\n\t}\n  #else\n\t startPosition=startVelocity*age;\n\t vec3 finalPosition;\n\t if(u_ScalingMode!=2)\n\t   finalPosition = rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition),worldRotation);\n\t else\n\t   finalPosition = rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition,worldRotation);\n  #endif\n  \n  if(u_SimulationSpace==0)\n    finalPosition=finalPosition+a_SimulationWorldPostion;\n  else if(u_SimulationSpace==1) \n    finalPosition=finalPosition+u_WorldPosition;\n  \n  finalPosition+=0.5*gravityVelocity*age;\n \n  return  finalPosition;\n}\n\n\nvec4 computeParticleColor(in vec4 color,in float normalizedAge)\n{\n\t#ifdef COLOROVERLIFETIME\n\t  color*=getColorFromGradient(u_ColorOverLifeGradientAlphas,u_ColorOverLifeGradientColors,normalizedAge);\n\t#endif\n\t\n\t#ifdef RANDOMCOLOROVERLIFETIME\n\t  color*=mix(getColorFromGradient(u_ColorOverLifeGradientAlphas,u_ColorOverLifeGradientColors,normalizedAge),getColorFromGradient(u_MaxColorOverLifeGradientAlphas,u_MaxColorOverLifeGradientColors,normalizedAge),a_Random0.y);\n\t#endif\n\n    return color;\n}\n\nvec2 computeParticleSizeBillbard(in vec2 size,in float normalizedAge)\n{\n\t#ifdef SIZEOVERLIFETIMECURVE\n\t\tsize*=getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge);\n\t#endif\n\t#ifdef SIZEOVERLIFETIMERANDOMCURVES\n\t    size*=mix(getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMax,normalizedAge),a_Random0.z); \n\t#endif\n\t#ifdef SIZEOVERLIFETIMECURVESEPERATE\n\t\tsize*=vec2(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge));\n\t#endif\n\t#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\n\t    size*=vec2(mix(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxX,normalizedAge),a_Random0.z)\n\t    ,mix(getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxY,normalizedAge),a_Random0.z));\n\t#endif\n\treturn size;\n}\n\n#ifdef RENDERMODE_MESH\nvec3 computeParticleSizeMesh(in vec3 size,in float normalizedAge)\n{\n\t#ifdef SIZEOVERLIFETIMECURVE\n\t\tsize*=getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge);\n\t#endif\n\t#ifdef SIZEOVERLIFETIMERANDOMCURVES\n\t    size*=mix(getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMax,normalizedAge),a_Random0.z); \n\t#endif\n\t#ifdef SIZEOVERLIFETIMECURVESEPERATE\n\t\tsize*=vec3(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientZ,normalizedAge));\n\t#endif\n\t#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\n\t    size*=vec3(mix(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxX,normalizedAge),a_Random0.z)\n\t    ,mix(getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxY,normalizedAge),a_Random0.z)\n\t\t,mix(getCurValueFromGradientFloat(u_SOLSizeGradientZ,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxZ,normalizedAge),a_Random0.z));\n\t#endif\n\treturn size;\n}\n#endif\n\nfloat computeParticleRotationFloat(in float rotation,in float age,in float normalizedAge)\n{ \n\t#ifdef ROTATIONOVERLIFETIME\n\t\t#ifdef ROTATIONOVERLIFETIMECONSTANT\n\t\t\tfloat ageRot=u_ROLAngularVelocityConst*age;\n\t        rotation+=ageRot;\n\t\t#endif\n\t\t#ifdef ROTATIONOVERLIFETIMECURVE\n\t\t\trotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge);\n\t\t#endif\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n\t\t\tfloat ageRot=mix(u_ROLAngularVelocityConst,u_ROLAngularVelocityConstMax,a_Random0.w)*age;\n\t        rotation+=ageRot;\n\t    #endif\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n\t\t\trotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMax,normalizedAge),a_Random0.w);\n\t\t#endif\n\t#endif\n\t#ifdef ROTATIONOVERLIFETIMESEPERATE\n\t\t#ifdef ROTATIONOVERLIFETIMECONSTANT\n\t\t\tfloat ageRot=u_ROLAngularVelocityConstSeprarate.z*age;\n\t        rotation+=ageRot;\n\t\t#endif\n\t\t#ifdef ROTATIONOVERLIFETIMECURVE\n\t\t\trotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge);\n\t\t#endif\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n\t\t\tfloat ageRot=mix(u_ROLAngularVelocityConstSeprarate.z,u_ROLAngularVelocityConstMaxSeprarate.z,a_Random0.w)*age;\n\t        rotation+=ageRot;\n\t    #endif\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n\t\t\trotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxZ,normalizedAge),a_Random0.w));\n\t\t#endif\n\t#endif\n\treturn rotation;\n}\n\n\n#if defined(RENDERMODE_MESH)&&(defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE))\nvec3 computeParticleRotationVec3(in vec3 rotation,in float age,in float normalizedAge)\n{ \n\t#ifdef ROTATIONOVERLIFETIME\n\t#ifdef ROTATIONOVERLIFETIMECONSTANT\n\t\t\tfloat ageRot=u_ROLAngularVelocityConst*age;\n\t        rotation+=ageRot;\n\t\t#endif\n\t\t#ifdef ROTATIONOVERLIFETIMECURVE\n\t\t\trotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge);\n\t\t#endif\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n\t\t\tfloat ageRot=mix(u_ROLAngularVelocityConst,u_ROLAngularVelocityConstMax,a_Random0.w)*age;\n\t        rotation+=ageRot;\n\t    #endif\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n\t\t\trotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMax,normalizedAge),a_Random0.w);\n\t\t#endif\n\t#endif\n\t#ifdef ROTATIONOVERLIFETIMESEPERATE\n\t#ifdef ROTATIONOVERLIFETIMECONSTANT\n\t\t\tvec3 ageRot=u_ROLAngularVelocityConstSeprarate*age;\n\t        rotation+=ageRot;\n\t\t#endif\n\t\t#ifdef ROTATIONOVERLIFETIMECURVE\n\t\t\trotation+=vec3(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge));\n\t\t#endif\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n\t\t\tvec3 ageRot=mix(u_ROLAngularVelocityConstSeprarate,u_ROLAngularVelocityConstMaxSeprarate,a_Random0.w)*age;\n\t        rotation+=ageRot;\n\t    #endif\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n\t\t\trotation+=vec3(mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxX,normalizedAge),a_Random0.w)\n\t        ,mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxY,normalizedAge),a_Random0.w)\n\t        ,mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxZ,normalizedAge),a_Random0.w));\n\t\t#endif\n\t#endif\n\treturn rotation;\n}\n#endif\n\nvec2 computeParticleUV(in vec2 uv,in float normalizedAge)\n{ \n\t#ifdef TEXTURESHEETANIMATIONCURVE\n\t\tfloat cycleNormalizedAge=normalizedAge*u_TSACycles;\n\t\tfloat frame=getFrameFromGradient(u_TSAGradientUVs,cycleNormalizedAge-floor(cycleNormalizedAge));\n\t\tfloat totalULength=frame*u_TSASubUVLength.x;\n\t\tfloat floorTotalULength=floor(totalULength);\n\t    uv.x+=totalULength-floorTotalULength;\n\t\tuv.y+=floorTotalULength*u_TSASubUVLength.y;\n    #endif\n\t#ifdef TEXTURESHEETANIMATIONRANDOMCURVE\n\t\tfloat cycleNormalizedAge=normalizedAge*u_TSACycles;\n\t\tfloat uvNormalizedAge=cycleNormalizedAge-floor(cycleNormalizedAge);\n\t    float frame=floor(mix(getFrameFromGradient(u_TSAGradientUVs,uvNormalizedAge),getFrameFromGradient(u_TSAMaxGradientUVs,uvNormalizedAge),a_Random1.x));\n\t\tfloat totalULength=frame*u_TSASubUVLength.x;\n\t\tfloat floorTotalULength=floor(totalULength);\n\t    uv.x+=totalULength-floorTotalULength;\n\t\tuv.y+=floorTotalULength*u_TSASubUVLength.y;\n    #endif\n\treturn uv;\n}\n\nvoid main()\n{\n\tfloat age = u_CurrentTime - a_DirectionTime.w;\n\tfloat normalizedAge = age/a_ShapePositionStartLifeTime.w;\n\tvec3 lifeVelocity;\n\tif(normalizedAge<1.0){ \n\tvec3 startVelocity=a_DirectionTime.xyz*a_StartSpeed;\n\t#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n\t\tlifeVelocity= computeParticleLifeVelocity(normalizedAge);//计算粒子生命周期速度\n\t#endif \n\tvec3 gravityVelocity=u_Gravity*age;\n\t\n\tvec4 worldRotation;\n\tif(u_SimulationSpace==0)\n\t\tworldRotation=a_SimulationWorldRotation;\n\telse\n\t\tworldRotation=u_WorldRotation;\n\t\n\tvec3 center=computeParticlePosition(startVelocity, lifeVelocity, age, normalizedAge,gravityVelocity,worldRotation);//计算粒子位置\n   \n   \n   #ifdef SPHERHBILLBOARD\n\t\tvec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n        vec3 cameraUpVector =normalize(u_CameraUp);//TODO:是否外面归一化\n        vec3 sideVector = normalize(cross(u_CameraDirection,cameraUpVector));\n        vec3 upVector = normalize(cross(sideVector,u_CameraDirection));\n\t    corner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n\t\t#if defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE)\n\t\t\tif(u_ThreeDStartRotation){\n\t\t\t\tvec3 rotation=vec3(a_StartRotation0.xy,computeParticleRotationFloat(a_StartRotation0.z,age,normalizedAge));\n\t\t\t\tcenter += u_SizeScale.xzy*rotationByEuler(corner.x*sideVector+corner.y*upVector,rotation);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tfloat rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n\t\t\t\tfloat c = cos(rot);\n\t\t\t\tfloat s = sin(rot);\n\t\t\t\tmat2 rotation= mat2(c, -s, s, c);\n\t\t\t\tcorner=rotation*corner;\n\t\t\t\tcenter += u_SizeScale.xzy*(corner.x*sideVector+corner.y*upVector);\n\t\t\t}\n\t\t#else\n\t\t\tif(u_ThreeDStartRotation){\n\t\t\t\tcenter += u_SizeScale.xzy*rotationByEuler(corner.x*sideVector+corner.y*upVector,a_StartRotation0);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tfloat c = cos(a_StartRotation0.x);\n\t\t\t\tfloat s = sin(a_StartRotation0.x);\n\t\t\t\tmat2 rotation= mat2(c, -s, s, c);\n\t\t\t\tcorner=rotation*corner;\n\t\t\t\tcenter += u_SizeScale.xzy*(corner.x*sideVector+corner.y*upVector);\n\t\t\t}\n\t\t#endif\n   #endif\n   \n   #ifdef STRETCHEDBILLBOARD\n\tvec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n\tvec3 velocity;\n\t#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n\t    if(u_VOLSpaceType==0)\n\t\t  velocity=rotationByQuaternions(u_SizeScale*(startVelocity+lifeVelocity),worldRotation)+gravityVelocity;\n\t    else\n\t\t  velocity=rotationByQuaternions(u_SizeScale*startVelocity,worldRotation)+lifeVelocity+gravityVelocity;\n    #else\n\t    velocity= rotationByQuaternions(u_SizeScale*startVelocity,worldRotation)+gravityVelocity;\n    #endif\t\n\t\tvec3 cameraUpVector = normalize(velocity);\n\t\tvec3 direction = normalize(center-u_CameraPosition);\n        vec3 sideVector = normalize(cross(direction,normalize(velocity)));\n\t\t\n\t\tsideVector=u_SizeScale.xzy*sideVector;\n\t\tcameraUpVector=length(vec3(u_SizeScale.x,0.0,0.0))*cameraUpVector;\n\t\t\n\t    vec2 size=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n\t\t\n\t    const mat2 rotaionZHalfPI=mat2(0.0, -1.0, 1.0, 0.0);\n\t    corner=rotaionZHalfPI*corner;\n\t    corner.y=corner.y-abs(corner.y);\n\t\t\n\t    float speed=length(velocity);//TODO:\n\t    center +=sign(u_SizeScale.x)*(sign(u_StretchedBillboardLengthScale)*size.x*corner.x*sideVector+(speed*u_StretchedBillboardSpeedScale+size.y*u_StretchedBillboardLengthScale)*corner.y*cameraUpVector);\n   #endif\n   \n   #ifdef HORIZONTALBILLBOARD\n\t\tvec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n        const vec3 cameraUpVector=vec3(0.0,0.0,1.0);\n\t    const vec3 sideVector = vec3(-1.0,0.0,0.0);\n\t\t\n\t\tfloat rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n        float c = cos(rot);\n        float s = sin(rot);\n        mat2 rotation= mat2(c, -s, s, c);\n\t    corner=rotation*corner*cos(0.78539816339744830961566084581988);//TODO:临时缩小cos45,不确定U3D原因\n\t\tcorner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n        center +=u_SizeScale.xzy*(corner.x*sideVector+ corner.y*cameraUpVector);\n   #endif\n   \n   #ifdef VERTICALBILLBOARD\n\t\tvec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n        const vec3 cameraUpVector =vec3(0.0,1.0,0.0);\n        vec3 sideVector = normalize(cross(u_CameraDirection,cameraUpVector));\n\t\t\n\t\tfloat rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n        float c = cos(rot);\n        float s = sin(rot);\n        mat2 rotation= mat2(c, -s, s, c);\n\t    corner=rotation*corner*cos(0.78539816339744830961566084581988);//TODO:临时缩小cos45,不确定U3D原因\n\t\tcorner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n        center +=u_SizeScale.xzy*(corner.x*sideVector+ corner.y*cameraUpVector);\n   #endif\n   \n   #ifdef RENDERMODE_MESH\n\t    vec3 size=computeParticleSizeMesh(a_StartSize,normalizedAge);\n\t\t#if defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE)\n\t\t\tif(u_ThreeDStartRotation){\n\t\t\t\tvec3 rotation=vec3(a_StartRotation0.xy,-computeParticleRotationFloat(a_StartRotation0.z, age,normalizedAge));\n\t\t\t\tcenter+= rotationByQuaternions(u_SizeScale*rotationByEuler(a_MeshPosition*size,rotation),worldRotation);\n\t\t\t}\n\t\t\telse{\n\t\t\t\t#ifdef ROTATIONOVERLIFETIME\n\t\t\t\t\tfloat angle=computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n\t\t\t\t\tif(a_ShapePositionStartLifeTime.x!=0.0||a_ShapePositionStartLifeTime.y!=0.0){\n\t\t\t\t\t\tcenter+= (rotationByQuaternions(rotationByAxis(u_SizeScale*a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),angle),worldRotation));//已验证\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\t#ifdef SHAPE\n\t\t\t\t\t\t\tcenter+= u_SizeScale.xzy*(rotationByQuaternions(rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),angle),worldRotation));\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tif(u_SimulationSpace==0)\n\t\t\t\t\t\t\t\tcenter+=rotationByAxis(u_SizeScale*a_MeshPosition*size,vec3(0.0,0.0,-1.0),angle);//已验证\n\t\t\t\t\t\t\telse if(u_SimulationSpace==1)\n\t\t\t\t\t\t\t\tcenter+=rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,0.0,-1.0),angle),worldRotation);//已验证\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}\n\t\t\t\t#endif\n\t\t\t\t#ifdef ROTATIONOVERLIFETIMESEPERATE\n\t\t\t\t\t//TODO:是否应合并if(u_ThreeDStartRotation)分支代码,待测试\n\t\t\t\t\tvec3 angle=computeParticleRotationVec3(vec3(0.0,0.0,a_StartRotation0.z), age,normalizedAge);\n\t\t\t\t\tcenter+= (rotationByQuaternions(rotationByEuler(u_SizeScale*a_MeshPosition*size,vec3(angle.x,angle.y,angle.z)),worldRotation));//已验证\n\t\t\t\t#endif\t\n\t\t\t}\n\t\t#else\n\t\t\tif(u_ThreeDStartRotation){\n\t\t\t\tcenter+= rotationByQuaternions(u_SizeScale*rotationByEuler(a_MeshPosition*size,a_StartRotation0),worldRotation);//已验证\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(a_ShapePositionStartLifeTime.x!=0.0||a_ShapePositionStartLifeTime.y!=0.0){\n\t\t\t\t\tif(u_SimulationSpace==0)\n\t\t\t\t\t\tcenter+= rotationByAxis(u_SizeScale*a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),a_StartRotation0.x);\n\t\t\t\t\telse if(u_SimulationSpace==1)\n\t\t\t\t\t\tcenter+= (rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),a_StartRotation0.x),worldRotation));//已验证\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\t#ifdef SHAPE\n\t\t\t\t\t\tif(u_SimulationSpace==0)\n\t\t\t\t\t\t\tcenter+= u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),a_StartRotation0.x);\n\t\t\t\t\t\telse if(u_SimulationSpace==1)\n\t\t\t\t\t\t\tcenter+= rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),a_StartRotation0.x),worldRotation);\t\n\t\t\t\t\t#else\n\t\t\t\t\t\tif(u_SimulationSpace==0)\n\t\t\t\t\t\t\tcenter+= rotationByAxis(u_SizeScale*a_MeshPosition*size,vec3(0.0,0.0,-1.0),a_StartRotation0.x);\n\t\t\t\t\t\telse if(u_SimulationSpace==1)\n\t\t\t\t\t\t\tcenter+= rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,0.0,-1.0),a_StartRotation0.x),worldRotation);//已验证\n\t\t\t\t\t#endif\n\t\t\t\t}\n\t\t\t}\n\t\t#endif\n\t\tv_MeshColor=a_MeshColor;\n   #endif\n   \n    gl_Position=u_Projection*u_View*vec4(center,1.0);\n    v_Color = computeParticleColor(a_StartColor, normalizedAge);\n\t#ifdef DIFFUSEMAP\n\t\t#if defined(SPHERHBILLBOARD)||defined(STRETCHEDBILLBOARD)||defined(HORIZONTALBILLBOARD)||defined(VERTICALBILLBOARD)\n\t\t\tv_TextureCoordinate =computeParticleUV(a_CornerTextureCoordinate.zw, normalizedAge);\n\t\t#endif\n\t\t#ifdef RENDERMODE_MESH\n\t\t\tv_TextureCoordinate =computeParticleUV(a_MeshTextureCoordinate, normalizedAge);\n\t\t#endif\n\t\t\n\t\t#ifdef TILINGOFFSET\n\t\t\tv_TextureCoordinate=vec2(v_TextureCoordinate.x,1.0-v_TextureCoordinate.y)*u_TilingOffset.xy+vec2(u_TilingOffset.z,-u_TilingOffset.w);//需要特殊处理\n\t\t\tv_TextureCoordinate=vec2(v_TextureCoordinate.x,1.0-v_TextureCoordinate.y);//需要特殊处理\n\t\t#endif\n\t#endif\n    v_Discard=0.0;\n\t  \n\t#ifdef FOG\n\t\tv_PositionWorld=center;\n\t#endif\n   }\n   else\n\t{\n\t\tv_Discard=1.0;\n\t}\n}\n\n",e="#ifdef HIGHPRECISION\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n\nvarying float v_Discard;\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\nuniform sampler2D u_texture;\nuniform vec4 u_Tintcolor;\n\n#ifdef RENDERMODE_MESH\n\tvarying vec4 v_MeshColor;\n#endif\n\n#ifdef FOG\n\tvarying vec3 v_PositionWorld;\n\tuniform vec3 u_CameraPosition;\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\nvoid main()\n{\t\n\t#ifdef RENDERMODE_MESH\n\t\tgl_FragColor=v_MeshColor;\n\t#else\n\t\tgl_FragColor=vec4(1.0);\t\n\t#endif\n\t\t\n\t#ifdef DIFFUSEMAP\n\t\tif(v_Discard!=0.0)\n\t\t\tdiscard;\n\t\t#ifdef TINTCOLOR\n\t\t\tgl_FragColor*=texture2D(u_texture,v_TextureCoordinate)*u_Tintcolor*2.0*v_Color;\n\t\t#else\n\t\t\tgl_FragColor*=texture2D(u_texture,v_TextureCoordinate)*v_Color;\n\t\t#endif\n\t#else\n\t\t#ifdef TINTCOLOR\n\t\t\tgl_FragColor*=u_Tintcolor*2.0*v_Color;\n\t\t#else\n\t\t\tgl_FragColor*=v_Color;\n\t\t#endif\n\t#endif\n\t\n\t#ifdef FOG\n\t\tvec3 toEye=u_CameraPosition-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t\t\n\t\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t\t#ifdef ADDTIVEFOG\n\t\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t\t#else\n\t\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t\t#endif\n\t#endif\n}",o=cn.add(f,t,e,i,r),Zn.SHADERDEFINE_DIFFUSEMAP=o.registerMaterialDefine("DIFFUSEMAP"),Zn.SHADERDEFINE_TINTCOLOR=o.registerMaterialDefine("TINTCOLOR"),Zn.SHADERDEFINE_ADDTIVEFOG=o.registerMaterialDefine("ADDTIVEFOG"),Zn.SHADERDEFINE_TILINGOFFSET=o.registerMaterialDefine("TILINGOFFSET"),yi.SHADERDEFINE_RENDERMODE_BILLBOARD=o.registerSpriteDefine("SPHERHBILLBOARD"),yi.SHADERDEFINE_RENDERMODE_STRETCHEDBILLBOARD=o.registerSpriteDefine("STRETCHEDBILLBOARD"),yi.SHADERDEFINE_RENDERMODE_HORIZONTALBILLBOARD=o.registerSpriteDefine("HORIZONTALBILLBOARD"),yi.SHADERDEFINE_RENDERMODE_VERTICALBILLBOARD=o.registerSpriteDefine("VERTICALBILLBOARD"),yi.SHADERDEFINE_COLOROVERLIFETIME=o.registerSpriteDefine("COLOROVERLIFETIME"),yi.SHADERDEFINE_RANDOMCOLOROVERLIFETIME=o.registerSpriteDefine("RANDOMCOLOROVERLIFETIME"),yi.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT=o.registerSpriteDefine("VELOCITYOVERLIFETIMECONSTANT"),yi.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE=o.registerSpriteDefine("VELOCITYOVERLIFETIMECURVE"),yi.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT=o.registerSpriteDefine("VELOCITYOVERLIFETIMERANDOMCONSTANT"),yi.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE=o.registerSpriteDefine("VELOCITYOVERLIFETIMERANDOMCURVE"),yi.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE=o.registerSpriteDefine("TEXTURESHEETANIMATIONCURVE"),yi.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE=o.registerSpriteDefine("TEXTURESHEETANIMATIONRANDOMCURVE"),yi.SHADERDEFINE_ROTATIONOVERLIFETIME=o.registerSpriteDefine("ROTATIONOVERLIFETIME"),yi.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE=o.registerSpriteDefine("ROTATIONOVERLIFETIMESEPERATE"),yi.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT=o.registerSpriteDefine("ROTATIONOVERLIFETIMECONSTANT"),yi.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE=o.registerSpriteDefine("ROTATIONOVERLIFETIMECURVE"),yi.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS=o.registerSpriteDefine("ROTATIONOVERLIFETIMERANDOMCONSTANTS"),yi.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES=o.registerSpriteDefine("ROTATIONOVERLIFETIMERANDOMCURVES"),yi.SHADERDEFINE_SIZEOVERLIFETIMECURVE=o.registerSpriteDefine("SIZEOVERLIFETIMECURVE"),yi.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE=o.registerSpriteDefine("SIZEOVERLIFETIMECURVESEPERATE"),yi.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES=o.registerSpriteDefine("SIZEOVERLIFETIMERANDOMCURVES"),yi.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE=o.registerSpriteDefine("SIZEOVERLIFETIMERANDOMCURVESSEPERATE"),yi.SHADERDEFINE_RENDERMODE_MESH=o.registerSpriteDefine("RENDERMODE_MESH"),yi.SHADERDEFINE_SHAPE=o.registerSpriteDefine("SHAPE"),i={a_Position:0,a_Texcoord0:2,a_Time:33},r={u_Texture:[1,1],u_Albedo:[2,1],u_Color:[3,1],u_CurrentTime:[2,2],u_Duration:[3,2],u_MvpMatrix:[1,2]};var d=Un.nameKey.add("GLITTER");t="attribute vec4 a_Position;\nattribute vec2 a_Texcoord0;\nattribute float a_Time;\n\nuniform mat4 u_MvpMatrix;\nuniform  float u_CurrentTime;\nuniform  vec4 u_Color;\nuniform float u_Duration;\n\nvarying vec2 v_Texcoord;\nvarying vec4 v_Color;\n\n\nvoid main()\n{\n  gl_Position = u_MvpMatrix * a_Position;\n  \n  float age = u_CurrentTime-a_Time;\n  float normalizedAge = clamp(age / u_Duration,0.0,1.0);\n   \n  v_Texcoord=a_Texcoord0;\n  \n  v_Color=u_Color;\n  v_Color.a*=1.0-normalizedAge;\n}\n",e="#ifdef HIGHPRECISION\n\tprecision highp float;\n#else\n\tprecision mediump float;\n#endif\n\nuniform vec4 u_Albedo;\nuniform sampler2D u_Texture;\n\nvarying vec2 v_Texcoord;\nvarying vec4 v_Color;\n\n\nvoid main()\n{\t\n  gl_FragColor=texture2D(u_Texture, v_Texcoord)*v_Color;\n  gl_FragColor=gl_FragColor*u_Albedo;\n}\n\n",o=cn.add(d,t,e,i,r),i={a_Position:0},r={u_Intensity:[1,1],u_AlphaBlending:[2,1],u_CubeTexture:[3,1],u_MvpMatrix:[4,3]};var p=Un.nameKey.add("SkyBox");t="attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\nvarying vec3 v_Texcoord;\n\n\nvoid main()\n{\n  gl_Position = (u_MvpMatrix*a_Position).xyww;\n  v_Texcoord=a_Position.xyz;\n}\n",e="#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform float u_Intensity;\nuniform float u_AlphaBlending;\nuniform samplerCube u_CubeTexture;\n\nvarying vec3 v_Texcoord;\n\n\nvoid main()\n{\t\n  gl_FragColor=vec4(textureCube(u_CubeTexture, v_Texcoord).rgb*u_Intensity,u_AlphaBlending);\n}\n\n",cn.add(p,t,e,i,r),i={a_Position:0,a_Texcoord0:2},r={u_Intensity:[1,1],u_AlphaBlending:[2,1],u_texture:[3,1],u_MvpMatrix:[4,3]};var m=Un.nameKey.add("SkyDome");t="attribute vec4 a_Position;\nattribute vec2 a_Texcoord0;\nuniform mat4 u_MvpMatrix;\nvarying vec2 v_Texcoord;\n\n\nvoid main()\n{\n  gl_Position = (u_MvpMatrix*a_Position).xyww;\n  v_Texcoord = a_Texcoord0;\n}\n",e="#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform float u_Intensity;\nuniform float u_AlphaBlending;\nuniform sampler2D u_texture;\n\nvarying vec2 v_Texcoord;\n\n\nvoid main()\n{\t\n  gl_FragColor=vec4(texture2D(u_texture, v_Texcoord).rgb*u_Intensity,u_AlphaBlending);\n}\n\n",cn.add(m,t,e,i,r),i={a_Position:0,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15},r={u_MvpMatrix:[1,2],u_WorldMat:[0,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_SplatAlphaTexture:[0,1],u_NormalTexture:[1,1],u_DiffuseTexture1:[2,1],u_DiffuseTexture2:[3,1],u_DiffuseTexture3:[4,1],u_DiffuseTexture4:[5,1],u_DiffuseScale1:[6,1],u_DiffuseScale2:[7,1],u_DiffuseScale3:[8,1],u_DiffuseScale4:[9,1],u_MaterialDiffuse:[11,1],u_MaterialAmbient:[10,1],u_MaterialSpecular:[12,1],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var g=Un.nameKey.add("Terrain");t="attribute vec4 a_Position;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(LIGHTMAP)\n\tattribute vec3 a_Normal;\n\tvarying vec3 v_Normal;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||(defined(RECEIVESHADOW)&&defined(SHADOWMAP_PSSM1))\n\tuniform mat4 u_WorldMat;\n\tvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef LIGHTMAP\n\tuniform vec4 u_LightmapScaleOffset;\n\tvarying vec2 v_LightMapUV;\n#endif\n\nattribute vec2 a_Texcoord0;\nattribute vec2 a_Texcoord1;\nvarying vec2 v_Texcoord0;\nvarying vec2 v_Texcoord1;\nuniform mat4 u_MvpMatrix;\n\nvoid main()\n{\n\tgl_Position = u_MvpMatrix * a_Position;\n\tv_Texcoord0=a_Texcoord0;\n\tv_Texcoord1=a_Texcoord1;\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tv_Normal=a_Normal;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||(defined(RECEIVESHADOW)&&defined(SHADOWMAP_PSSM1))\n\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n#endif\n\n#ifdef LIGHTMAP\n\t//这个地方使用a_Normal 并不是真的代表normal，其实凑巧法线图的uv正好是符合 light_Map的UV\n\tv_LightMapUV=vec2(a_Normal.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,(a_Normal.y-1.0)*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1\n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n\n}",e='#ifdef HIGHPRECISION\n\tprecision highp float;\n#else\n\tprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tuniform vec3 u_MaterialDiffuse;\n\tuniform vec4 u_MaterialSpecular;\n\tuniform vec3 u_CameraPos;\n\tvarying vec3 v_Normal;\n\tvarying vec3 v_PositionWorld;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(LIGHTMAP)\n\tuniform vec3 u_MaterialAmbient;\n#endif\n\n#ifdef FOG\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\tuniform vec3 u_FogColor;\n#endif\n\n\n#ifdef DIRECTIONLIGHT\n\tuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\n\tuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\n\tuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\nuniform sampler2D u_SplatAlphaTexture;\nuniform sampler2D u_NormalTexture;\nuniform sampler2D u_DiffuseTexture1;\nuniform sampler2D u_DiffuseTexture2;\nuniform sampler2D u_DiffuseTexture3;\nuniform sampler2D u_DiffuseTexture4;\nuniform vec2 u_DiffuseScale1;\nuniform vec2 u_DiffuseScale2;\nuniform vec2 u_DiffuseScale3;\nuniform vec2 u_DiffuseScale4;\nvarying vec2 v_Texcoord0;\nvarying vec2 v_Texcoord1;\n\n#ifdef LIGHTMAP\n\tuniform sampler2D u_LightMap;\n\tvarying vec2 v_LightMapUV;\n#endif\n\nvoid main()\n{\n#ifdef DETAIL_NUM1\n\tvec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord1/u_DiffuseScale1);\n\tvec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n\tgl_FragColor.xyz = color1.xyz;\n#endif\n#ifdef DETAIL_NUM2\n\tvec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord1/u_DiffuseScale1);\n\tvec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord1/u_DiffuseScale2);\n\tvec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n\tgl_FragColor.xyz = color1.xyz * (1.0-splatAlpha.r) + color2.xyz * splatAlpha.r;\n#endif\n#ifdef DETAIL_NUM3\n\tvec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord1/u_DiffuseScale1);\n\tvec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord1/u_DiffuseScale2);\n\tvec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord1/u_DiffuseScale3);\n\tvec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n\tgl_FragColor.xyz = color1.xyz * (1.0-(splatAlpha.r+splatAlpha.g)) + color2.xyz * splatAlpha.r + color3.xyz * splatAlpha.g;\n#endif\n#ifdef DETAIL_NUM4\n\tvec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord1/u_DiffuseScale1);\n\tvec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord1/u_DiffuseScale2);\n\tvec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord1/u_DiffuseScale3);\n\tvec4 color4 = texture2D(u_DiffuseTexture4, v_Texcoord1/u_DiffuseScale4);\n\tvec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n\tgl_FragColor.xyz = color1.xyz * (1.0-(splatAlpha.r+splatAlpha.g+splatAlpha.b))+ color2.xyz * splatAlpha.r + color3.xyz * splatAlpha.g + color4.xyz * splatAlpha.b;\n#endif\n\tgl_FragColor.w = splatAlpha.a;\n\t\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n    vec3 normal = texture2D(u_NormalTexture,v_Normal.xy).xyz;\n\tnormal = normal*2.0 - vec3(1.0);\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient + texture2D(u_LightMap, v_LightMapUV).rgb);\n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient + texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient + texture2D(u_LightMap, v_LightMapUV).rgb);\n\t\t#endif\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular * shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular, gl_FragColor.a);\n\t#endif\n#endif\n\n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\n';var y=cn.add(g,t,e,i,r);Kn.SHADERDEFINE_DETAIL_NUM1=y.registerMaterialDefine("DETAIL_NUM1"),Kn.SHADERDEFINE_DETAIL_NUM2=y.registerMaterialDefine("DETAIL_NUM2"),Kn.SHADERDEFINE_DETAIL_NUM4=y.registerMaterialDefine("DETAIL_NUM4"),Kn.SHADERDEFINE_DETAIL_NUM3=y.registerMaterialDefine("DETAIL_NUM3"),i={a_Position:0,a_Normal:3,a_Texcoord0:2},r={u_MvpMatrix:[1,2],u_WorldMat:[0,2],u_CameraPos:[0,3],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_SplatAlphaTexture:[0,1],u_DiffuseTexture1:[1,1],u_DiffuseTexture2:[2,1],u_DiffuseTexture3:[3,1],u_DiffuseTexture4:[4,1],u_DiffuseTexture5:[5,1],u_DiffuseScaleOffset1:[6,1],u_DiffuseScaleOffset2:[7,1],u_DiffuseScaleOffset3:[8,1],u_DiffuseScaleOffset4:[9,1],u_DiffuseScaleOffset5:[10,1],u_MaterialAlbedo:[14,1],u_MaterialDiffuse:[12,1],u_MaterialAmbient:[11,1],u_MaterialSpecular:[13,1],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var v=Un.nameKey.add("ExtendTerrain");t="attribute vec4 a_Position;\nattribute vec2 a_Texcoord0;\n\nuniform mat4 u_MvpMatrix;\n\nvarying vec2 v_Texcoord0;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(LIGHTMAP)\n\tattribute vec3 a_Normal;\n\tvarying vec3 v_Normal;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||(defined(RECEIVESHADOW)&&defined(SHADOWMAP_PSSM1))\n\tuniform mat4 u_WorldMat;\n\tvarying vec3 v_PositionWorld;\n#endif\n\n#ifdef LIGHTMAP\n\tvarying vec2 v_LightMapUV;\n\tuniform vec4 u_LightmapScaleOffset;\n#endif\n\n#ifdef RECEIVESHADOW\n\tvarying float v_posViewZ;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tvarying vec4 v_lightMVPPos;\n\t\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n#endif\n\nvoid main()\n{\n\tgl_Position = u_MvpMatrix * a_Position;\n  \n\tv_Texcoord0 = a_Texcoord0;\n  \n\t#ifdef LIGHTMAP\n\t\tv_LightMapUV = vec2(a_Texcoord0.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,(a_Texcoord0.y-1.0)*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t#endif\n  \n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tv_Normal = a_Normal;\n\t#endif\n\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||(defined(RECEIVESHADOW)&&defined(SHADOWMAP_PSSM1))\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n\n\t#ifdef RECEIVESHADOW\n\t\tv_posViewZ = gl_Position.w;\n\t\t#ifdef SHADOWMAP_PSSM1\n\t\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t\t#endif\n\t#endif\n}",e='#ifdef HIGHPRECISION\n\tprecision highp float;\n#else\n\tprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)\n\tuniform vec3 u_MaterialDiffuse;\n\tuniform vec4 u_MaterialSpecular;\n\tuniform vec3 u_CameraPos;\n\tvarying vec3 v_Normal;\n\tvarying vec3 v_PositionWorld;\n#endif\n\n#ifdef FOG\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\tuniform vec3 u_FogColor;\n#endif\n\n\n#ifdef DIRECTIONLIGHT\n\tuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\n\tuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\n\tuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\nuniform sampler2D u_SplatAlphaTexture;\n\nuniform sampler2D u_DiffuseTexture1;\nuniform sampler2D u_DiffuseTexture2;\nuniform sampler2D u_DiffuseTexture3;\nuniform sampler2D u_DiffuseTexture4;\nuniform sampler2D u_DiffuseTexture5;\n\nuniform vec4 u_DiffuseScaleOffset1;\nuniform vec4 u_DiffuseScaleOffset2;\nuniform vec4 u_DiffuseScaleOffset3;\nuniform vec4 u_DiffuseScaleOffset4;\nuniform vec4 u_DiffuseScaleOffset5;\n\nvarying vec2 v_Texcoord0;\n\nuniform vec3 u_MaterialAmbient;\nuniform vec4 u_MaterialAlbedo;\n\n#ifdef LIGHTMAP\n\tuniform sampler2D u_LightMap;\n\tvarying vec2 v_LightMapUV;\n#endif\n\nvoid main()\n{\n\t#ifdef ExtendTerrain_DETAIL_NUM1\n\t\tvec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n\t\tvec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScaleOffset1.xy);\n\t\tgl_FragColor.xyz = color1.xyz * splatAlpha.r;\n\t#endif\n\t#ifdef ExtendTerrain_DETAIL_NUM2\n\t\tvec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n\t\tvec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScaleOffset1.xy);\n\t\tvec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord0 * u_DiffuseScaleOffset2.xy);\n\t\tgl_FragColor.xyz = color1.xyz * splatAlpha.r + color2.xyz * (1.0 - splatAlpha.r);\n\t#endif\n\t#ifdef ExtendTerrain_DETAIL_NUM3\n\t\tvec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n\t\tvec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScaleOffset1.xy);\n\t\tvec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord0 * u_DiffuseScaleOffset2.xy);\n\t\tvec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord0 * u_DiffuseScaleOffset3.xy);\n\t\tgl_FragColor.xyz = color1.xyz * splatAlpha.r  + color2.xyz * splatAlpha.g + color3.xyz * (1.0 - splatAlpha.r - splatAlpha.g);\n\t#endif\n\t#ifdef ExtendTerrain_DETAIL_NUM4\n\t\tvec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n\t\tvec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScaleOffset1.xy);\n\t\tvec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord0 * u_DiffuseScaleOffset2.xy);\n\t\tvec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord0 * u_DiffuseScaleOffset3.xy);\n\t\tvec4 color4 = texture2D(u_DiffuseTexture4, v_Texcoord0 * u_DiffuseScaleOffset4.xy);\n\t\tgl_FragColor.xyz = color1.xyz * splatAlpha.r  + color2.xyz * splatAlpha.g + color3.xyz * splatAlpha.b + color4.xyz * (1.0 - splatAlpha.r - splatAlpha.g - splatAlpha.b);\n\t#endif\n\t#ifdef ExtendTerrain_DETAIL_NUM5\n\t\tvec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n\t\tvec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScaleOffset1.xy);\n\t\tvec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord0 * u_DiffuseScaleOffset2.xy);\n\t\tvec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord0 * u_DiffuseScaleOffset3.xy);\n\t\tvec4 color4 = texture2D(u_DiffuseTexture4, v_Texcoord0 * u_DiffuseScaleOffset4.xy);\n\t\tvec4 color5 = texture2D(u_DiffuseTexture5, v_Texcoord0 * u_DiffuseScaleOffset5.xy);\n\t\tgl_FragColor.xyz = color1.xyz * splatAlpha.r  + color2.xyz * splatAlpha.g + color3.xyz * splatAlpha.b + color4.xyz * splatAlpha.a + color5.xyz * (1.0 - splatAlpha.r - splatAlpha.g - splatAlpha.b - splatAlpha.a);\n\t#endif\n\t\tgl_FragColor.w = splatAlpha.a;\n\t\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n    vec3 normal = v_Normal;\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient + texture2D(u_LightMap, v_LightMapUV).rgb);\n\t#else\n\t\t#if defined(RECEIVESHADOW)\t\t\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t\t//vec3 tColor= u_MaterialAmbient + texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue + mix(vec3(0.15,0.15,0.15),vec3(0.0),shadowValue);\n\t\t\t//gl_FragColor.rgb*=tColor;\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient + texture2D(u_LightMap, v_LightMapUV).rgb);\n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_MaterialAlbedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor = vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular * shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular, gl_FragColor.a);\n\t#endif\n#endif\n\n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\n\n\n\n\n';var I=cn.add(v,t,e,i,r);I.addSpriteDefines(_i.shaderDefines),I.addMaterialDefines(Bn.shaderDefines),i={a_Position:0,a_OffsetVector:41,a_Texcoord0X:38,a_Texcoord0Y:40,a_BirthTime:33},r={u_MvpMatrix:[1,2],u_VMatrix:[1,3],u_PMatrix:[2,3],u_TilingOffset:[3,1],u_MainTexture:[1,1],u_MainColor:[2,1],u_CurTime:[3,2],u_LifeTime:[4,2],u_WidthCurve:[5,2],u_WidthCurveKeyLength:[6,2],u_GradientColorkey:[7,2],u_GradientAlphakey:[8,2]};var x=Un.nameKey.add("Trail");t="attribute vec3 a_Position;\nattribute vec3 a_OffsetVector;\nattribute vec4 a_Color;\nattribute float a_Texcoord0X;\nattribute float a_Texcoord0Y;\nattribute float a_BirthTime;\n\nuniform mat4 u_VMatrix;\nuniform mat4 u_PMatrix;\n\nuniform vec4 u_TilingOffset;\n\nuniform float u_CurTime;\nuniform float u_LifeTime;\nuniform vec4 u_WidthCurve[10];\nuniform int u_WidthCurveKeyLength;\n\nuniform vec4 u_GradientColorkey[10];\nuniform vec2 u_GradientAlphakey[10];\n\nvarying vec2 v_Texcoord0;\nvarying vec4 v_Color;\n\nfloat hermiteInterpolate(float t, float outTangent, float inTangent, float duration, float value1, float value2)\n{\n\tfloat t2 = t * t;\n\tfloat t3 = t2 * t;\n\tfloat a = 2.0 * t3 - 3.0 * t2 + 1.0;\n\tfloat b = t3 - 2.0 * t2 + t;\n\tfloat c = t3 - t2;\n\tfloat d = -2.0 * t3 + 3.0 * t2;\n\treturn a * value1 + b * outTangent * duration + c * inTangent * duration + d * value2;\n}\n\nfloat getCurWidth(in float normalizeTime)\n{\n\tif(normalizeTime == 0.0){\n\t\treturn u_WidthCurve[0].w;\n\t}\n\telse if(normalizeTime >= 1.0){\n\t\treturn u_WidthCurve[u_WidthCurveKeyLength - 1].w;\n\t}\n\telse{\n\t\tfor(int i = 0; i < 10; i ++ )\n\t\t{\n\t\t\tif(normalizeTime == u_WidthCurve[i].x)\n\t\t\t{\n\t\t\t\treturn u_WidthCurve[i].w;\n\t\t\t}\n\t\t\t\n\t\t\tvec4 lastFrame = u_WidthCurve[i];\n\t\t\tvec4 nextFrame = u_WidthCurve[i + 1];\n\t\t\tif(normalizeTime > lastFrame.x && normalizeTime < nextFrame.x)\n\t\t\t{\n\t\t\t\tfloat duration = nextFrame.x - lastFrame.x;\n\t\t\t\tfloat t = (normalizeTime - lastFrame.x) / duration;\n\t\t\t\tfloat outTangent = lastFrame.z;\n\t\t\t\tfloat inTangent = nextFrame.y;\n\t\t\t\tfloat value1 = lastFrame.w;\n\t\t\t\tfloat value2 = nextFrame.w;\n\t\t\t\treturn hermiteInterpolate(t, outTangent, inTangent, duration, value1, value2);\n\t\t\t}\n\t\t}\t\n\t}\n}\t\n\nvec4 getColorFromGradientByBlend(in vec4 gradientColors[10], in vec2 gradientAlphas[10], in float normalizeTime)\n{\n\tvec4 color;\n\tfor(int i = 1; i < 10; i++)\n\t{\n\t\tvec4 gradientColor = gradientColors[i];\n\t\tfloat colorKey = gradientColor.w;\n\t\tif(colorKey >= normalizeTime)\n\t\t{\n\t\t\tvec4 lastGradientColor = gradientColors[i-1];\n\t\t\tfloat lastColorKey = lastGradientColor.w;\n\t\t\tfloat age = (normalizeTime - lastColorKey) / (colorKey - lastColorKey);\n\t\t\tcolor.rgb = mix(gradientColors[i-1].xyz, gradientColor.xyz, age);\n\t\t\tbreak;\n\t\t}\n\t}\n\tfor(int i = 1; i < 10; i++)\n\t{\n\t\tvec2 gradientAlpha = gradientAlphas[i];\n\t\tfloat alphaKey = gradientAlpha.y;\n\t\tif(alphaKey >= normalizeTime)\n\t\t{\n\t\t\tvec2 lastGradientAlpha = gradientAlphas[i-1];\n\t\t\tfloat lastAlphaKey = lastGradientAlpha.y;\n\t\t\tfloat age = (normalizeTime - lastAlphaKey) / (alphaKey - lastAlphaKey);\n\t\t\tcolor.a = mix(lastGradientAlpha.x, gradientAlpha.x, age);\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn color;\n}\n\nvec4 getColorFromGradientByFixed(in vec4 gradientColors[10], in vec2 gradientAlphas[10], in float normalizeTime)\n{\n\tvec4 color;\n\tfor(int i = 1; i < 10; i++)\n\t{\n\t\tvec4 gradientColor = gradientColors[i];\n\t\tif(gradientColor.w >= normalizeTime)\n\t\t{\n\t\t\tcolor.rgb = gradientColor.xyz;\n\t\t\tbreak;\n\t\t}\n\t}\n\tfor(int i = 1; i < 10; i++)\n\t{\n\t\tvec2 gradientAlpha = gradientAlphas[i];\n\t\tif(gradientAlpha.y >= normalizeTime)\n\t\t{\n\t\t\tcolor.a = gradientAlpha.x;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn color;\n}\n\nvoid main()\n{\n\tfloat normalizeTime = (u_CurTime - a_BirthTime) / u_LifeTime;\n\t\n\tgl_Position = u_PMatrix * u_VMatrix * vec4(a_Position + a_OffsetVector * getCurWidth(normalizeTime),1.0);\n\t\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0 = (vec2(a_Texcoord0X, a_Texcoord0Y) * u_TilingOffset.xy) + u_TilingOffset.zw;\n\t#else\n\t\tv_Texcoord0 = vec2(a_Texcoord0X, a_Texcoord0Y);\n\t#endif\n\t\n\t#ifdef GRADIENTMODE_BLEND\n\t\tv_Color = getColorFromGradientByBlend(u_GradientColorkey, u_GradientAlphakey, normalizeTime);\n\t#else\n\t\tv_Color = getColorFromGradientByFixed(u_GradientColorkey, u_GradientAlphakey, normalizeTime);\n\t#endif\n}\n\n\n\n",e="#ifdef HIGHPRECISION\n\tprecision highp float;\n#else\n\tprecision mediump float;\n#endif\n\nuniform sampler2D u_MainTexture;\nuniform vec4 u_MainColor;\n\nvarying vec2 v_Texcoord0;\nvarying vec4 v_Color;\n\nvoid main()\n{\t\n\tvec4 color = 2.0 * u_MainColor * v_Color;\n\t#ifdef DIFFUSETEXTURE\n\t\tvec4 mainTextureColor = texture2D(u_MainTexture, v_Texcoord0);\n\t\tcolor *= mainTextureColor;\n\t#endif\n\tgl_FragColor = color;\n}\n\n";var T=cn.add(x,t,e,i,r);Jn.SHADERDEFINE_DIFFUSETEXTURE=T.registerMaterialDefine("DIFFUSETEXTURE"),Jn.SHADERDEFINE_TILINGOFFSET=T.registerSpriteDefine("TILINGOFFSET"),Ii.SHADERDEFINE_GRADIENTMODE_BLEND=T.registerSpriteDefine("GRADIENTMODE_BLEND");},t;}(),Be=function(){function t(){this._data=null,this._data=[];}
r(t,"laya.d3.shader.ValusArray");var e=t.prototype;return e.setValue=function(t,e){this._data[t]=e;},a(0,e,"data",function(){return this._data;}),t;}(),ke=function(){function t(){this._currentPSSM=-1,this._numberOfPSSM=3,this._maxDistance=200,this._ratioOfDistance=1/this._numberOfPSSM,this._statesDirty=!0,this._lightCulling=null,this._renderTarget=null,this._lightVPMatrix=null,this._lightCameras=null,this._shadowQuenes=null,this._shadowMapTextureSize=1024,this._scene=null,this._PCFType=0,this._shaderValueLightVP=null,this._shaderValueVPs=null,this._spiltDistance=new Array(4),this._globalParallelLightDir=new Re(0,-1,0),this._boundingSphere=new Array(4),this._boundingBox=new Array(4),this._frustumPos=new Array(16),this._uniformDistance=new Array(4),this._logDistance=new Array(4),this._dimension=new Array(4),this._tempLookAt3=new Re(),this._tempLookAt4=new Le(),this._tempValue=new Le(),this._tempPos=new Re(),this._tempLightUp=new Re(),this._tempMin=new Le(),this._tempMax=new Le(),this._tempMatrix44=new De(),this._splitFrustumCulling=new xe(De.DEFAULT),this._tempScaleMatrix44=new De(),this._shadowPCFOffset=new Oe(1/1024,1/1024),this._shaderValueDistance=new Le();var t=0;for(t=0;t<this._spiltDistance.length;t++){this._spiltDistance[t]=0;}
for(t=0;t<this._dimension.length;t++){this._dimension[t]=new Oe();}
for(t=0;t<this._frustumPos.length;t++){this._frustumPos[t]=new Re();}
for(t=0;t<this._boundingBox.length;t++){this._boundingBox[t]=new Ie(new Re(),new Re());}
for(t=0;t<this._boundingSphere.length;t++){this._boundingSphere[t]=new Te(new Re(),0);}
De.createScaling(new Re(.5,.5,1),this._tempScaleMatrix44),this._tempScaleMatrix44.elements[12]=.5,this._tempScaleMatrix44.elements[13]=.5;}
r(t,"laya.d3.shadowMap.ParallelSplitShadowMap");var e=t.prototype;return e.setInfo=function(t,e,n,i,r,a){r>3&&(this._numberOfPSSM=3),this._scene=t,this._maxDistance=e,this.PSSMNum=r,this._globalParallelLightDir=n,this._ratioOfDistance=1/this._numberOfPSSM;for(var o=0;o<this._spiltDistance.length;o++){this._spiltDistance[o]=0;}
this._shadowMapTextureSize=i,this._shadowPCFOffset.x=1/this._shadowMapTextureSize,this._shadowPCFOffset.y=1/this._shadowMapTextureSize,this.setPCFType(a),this._statesDirty=!0;},e.setPCFType=function(t){switch(this._PCFType=t,this._PCFType){case 0:this._scene.addShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF_NO),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF1),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF2),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF3);break;case 1:this._scene.addShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF1),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF_NO),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF2),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF3);break;case 2:this._scene.addShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF2),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF_NO),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF1),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF3);break;case 3:this._scene.addShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF3),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF_NO),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF1),this._scene.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PCF2);}},e.getPCFType=function(){return this._PCFType;},e.setFarDistance=function(t){this._maxDistance!=t&&(this._maxDistance=t,this._statesDirty=!0);},e.getFarDistance=function(){return this._maxDistance;},e._setGlobalParallelLightDir=function(t){this._globalParallelLightDir=t;},e.getGlobalParallelLightDir=function(){return this._globalParallelLightDir;},e.getCurrentPSSM=function(){return this._currentPSSM;},e.getLightCamera=function(t){return this._lightCameras[t];},e._beginSampler=function(t,e){if(t<0||t>this._numberOfPSSM)throw new Error("ParallelSplitShadowMap: beginSample invalid index");this._currentPSSM=t,this._update(e);},e.endSampler=function(t){this._currentPSSM=-1;},e._calcAllLightCameraInfo=function(t){if(1===this._numberOfPSSM)this._beginSampler(0,t),this.endSampler(t);else for(var e=0,n=this._numberOfPSSM+1;e<n;e++){this._beginSampler(e,t),this.endSampler(t);}},e._recalculate=function(t,e,n){this._calcSplitDistance(t),this._calcBoundingBox(e,n),this._rebuildRenderInfo();},e._update=function(t){var e=t.nearPlane,n=t.fieldOfView,i=t.aspectRatio;(this._statesDirty||this.lastNearPlane!==e||this.lastFieldOfView!==n||this.lastAspectRatio!==i)&&(this._recalculate(e,n,i),this._uploadShaderValue(),this._statesDirty=!1,this.lastNearPlane=e,this.lastFieldOfView=n,this.lastAspectRatio=i),this._calcLightViewProject(t);},e._uploadShaderValue=function(){var t=this._scene;switch(this._numberOfPSSM){case 1:t.addShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM1),t.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM2),t.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM3);break;case 2:t.addShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM2),t.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM1),t.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM3);break;case 3:t.addShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM3),t.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM1),t.removeShaderDefine(laya.d3.shadowMap.ParallelSplitShadowMap.SHADERDEFINE_SHADOW_PSSM2);}
var e=t._shaderValues;switch(e.setValue(15,this._shaderValueDistance.elements),e.setValue(16,this._shaderValueLightVP),e.setValue(17,this._shadowPCFOffset.elements),this._numberOfPSSM){case 3:e.setValue(18,this.getRenderTarget(1)),e.setValue(19,this.getRenderTarget(2)),e.setValue(20,this.getRenderTarget(3));break;case 2:e.setValue(18,this.getRenderTarget(1)),e.setValue(19,this.getRenderTarget(2));break;case 1:e.setValue(18,this.getRenderTarget(1));}},e._calcSplitDistance=function(t){var e=this._maxDistance,n=1/this._numberOfPSSM,i=0;for(i=0;i<=this._numberOfPSSM;i++){this._uniformDistance[i]=t+(e-t)*i*n;}
var r=e/t;for(i=0;i<=this._numberOfPSSM;i++){var a=Math.pow(r,i*n);this._logDistance[i]=t*a;}
for(i=0;i<=this._numberOfPSSM;i++){this._spiltDistance[i]=this._uniformDistance[i]*this._ratioOfDistance+this._logDistance[i]*(1-this._ratioOfDistance);}
this._shaderValueDistance.x=this._spiltDistance[1],this._shaderValueDistance.y=this._spiltDistance[2],this._shaderValueDistance.z=this._spiltDistance[3],this._shaderValueDistance.w=this._spiltDistance[4];},e._calcBoundingBox=function(t,e){var n=3.1415926*t/180,i=Math.tan(n/2),r=NaN,a=NaN,o=NaN,s=0;for(s=0;s<=this._numberOfPSSM;s++){a=(r=(o=this._spiltDistance[s])*i)*e;var l=this._frustumPos[4*s+0].elements;l[0]=-a,l[1]=-r,l[2]=-o,(l=this._frustumPos[4*s+1].elements)[0]=a,l[1]=-r,l[2]=-o,(l=this._frustumPos[4*s+2].elements)[0]=-a,l[1]=r,l[2]=-o,(l=this._frustumPos[4*s+3].elements)[0]=a,l[1]=r,l[2]=-o,(l=this._dimension[s].elements)[0]=a,l[1]=r;}
var u,h,c,_;for(s=1;s<=this._numberOfPSSM;s++){u=this._dimension[s].elements,(h=this._boundingBox[s].min.elements)[0]=-u[0],h[1]=-u[1],h[2]=-this._spiltDistance[s],(c=this._boundingBox[s].max.elements)[0]=u[0],c[1]=u[1],c[2]=-this._spiltDistance[s-1],(_=this._boundingSphere[s].center.elements)[0]=.5*(h[0]+c[0]),_[1]=.5*(h[1]+c[1]),_[2]=.5*(h[2]+c[2]),this._boundingSphere[s].radius=.5*Math.sqrt(Math.pow(c[0]-h[0],2)+Math.pow(c[1]-h[1],2)+Math.pow(c[2]-h[2],2));}
h=this._boundingBox[0].min.elements,u=this._dimension[this._numberOfPSSM].elements,h[0]=-u[0],h[1]=-u[1],h[2]=-this._spiltDistance[this._numberOfPSSM],(c=this._boundingBox[0].max.elements)[0]=u[0],c[1]=u[1],c[2]=-this._spiltDistance[0],(_=this._boundingSphere[0].center.elements)[0]=.5*(h[0]+c[0]),_[1]=.5*(h[1]+c[1]),_[2]=.5*(h[2]+c[2]),this._boundingSphere[0].radius=.5*Math.sqrt(Math.pow(c[0]-h[0],2)+Math.pow(c[1]-h[1],2)+Math.pow(c[2]-h[2],2));},e.calcSplitFrustum=function(t){this._currentPSSM>0?De.createPerspective(3.1416*t.fieldOfView/180,t.aspectRatio,this._spiltDistance[this._currentPSSM-1],this._spiltDistance[this._currentPSSM],this._tempMatrix44):De.createPerspective(3.1416*t.fieldOfView/180,t.aspectRatio,this._spiltDistance[0],this._spiltDistance[this._numberOfPSSM],this._tempMatrix44),De.multiply(this._tempMatrix44,t.viewMatrix,this._tempMatrix44),this._splitFrustumCulling.matrix=this._tempMatrix44;},e._rebuildRenderInfo=function(){var t=this._numberOfPSSM+1,e=0;if(null==this._renderTarget)for(this._renderTarget=o(t),this._renderTarget[0]=null,e=1;e<t;e++){this._renderTarget[e]=new ai(this._shadowMapTextureSize,this._shadowMapTextureSize,6408,5121,33189,!1,!1,9728,9728);}else if(this._renderTarget.length!=t)for(this.disposeAllRenderTarget(),this._renderTarget.length=t,this._renderTarget[0]=null,e=1;e<t;e++){this._renderTarget[e]=new ai(this._shadowMapTextureSize,this._shadowMapTextureSize,6408,5121,33189,!1,!1,9728,9728);}else for(e=1;e<t;e++){null!=this._renderTarget[e]&&this._renderTarget[e].width==this._shadowMapTextureSize&&this._renderTarget[e].height==this._shadowMapTextureSize||(null!=this._renderTarget[e]&&this._renderTarget[e].destroy(),this._renderTarget[e]=new ai(this._shadowMapTextureSize,this._shadowMapTextureSize,6408,5121,33189,!1,!1,9728,9728));}
if(null==this._lightCulling||this._lightCulling.length!=t)for(this._lightCulling?this._lightCulling.length=t:this._lightCulling=o(t),e=0;e<this._lightCulling.length;e++){this._lightCulling[e]=new xe(De.DEFAULT);}
if(null==this._lightVPMatrix||this._lightVPMatrix.length!=t)for(this._lightVPMatrix?this._lightVPMatrix.length=t:this._lightVPMatrix=o(t),e=0;e<this._lightVPMatrix.length;e++){this._lightVPMatrix[e]=new De();}
if(null==this._lightCameras||this._lightCameras.length!=t)for(this._lightCameras?this._lightCameras.length=t:this._lightCameras=o(t),e=0;e<this._lightCameras.length;e++){this._lightCameras[e]=new pi(),this._lightCameras[e].name="lightCamera"+e;}
if(null==this._shadowQuenes||this._shadowQuenes.length!=this._numberOfPSSM)for(this._shadowQuenes?this._shadowQuenes.length=this._numberOfPSSM:this._shadowQuenes=o(this._numberOfPSSM),e=0;e<this._shadowQuenes.length;e++){this._shadowQuenes[e]=new ct(this._scene);}
if(null==this._shaderValueVPs||this._shaderValueVPs.length!=t)for(this._shaderValueVPs?this._shaderValueVPs.length=t:this._shaderValueVPs=o(t),this._shaderValueLightVP=new Float32Array(16*t),e=0;e<t;e++){this._shaderValueVPs[e]=new Float32Array(this._shaderValueLightVP.buffer,64*e);}},e._calcLightViewProject=function(e){var n=this._boundingSphere[this._currentPSSM],i=e.transform.worldMatrix;n.radius;n.center.cloneTo(this._tempLookAt3),Re.transformV3ToV4(this._tempLookAt3,i,this._tempLookAt4);var r=this._tempLookAt3.elements,a=this._tempLookAt4.elements;r[0]=a[0],r[1]=a[1],r[2]=a[2];var o=this._tempLightUp.elements,s=e.forward.elements;o[0]=s[0],o[1]=1,o[2]=s[2],Re.normalize(this._tempLightUp,this._tempLightUp),Re.scale(this._globalParallelLightDir,4*n.radius,this._tempPos),Re.subtract(this._tempLookAt3,this._tempPos,this._tempPos);var l=this._lightCameras[this._currentPSSM];l.transform.position=this._tempPos,l.transform.lookAt(this._tempLookAt3,this._tempLightUp,!1);var u=this._tempMax.elements,h=this._tempMin.elements;u[0]=u[1]=u[2]=-1e5,u[3]=1,h[0]=h[1]=h[2]=1e5,h[3]=1,De.multiply(l.viewMatrix,i,this._tempMatrix44);var c=this._tempValue.elements,_=[];_.length=8,this._boundingBox[this._currentPSSM].getCorners(_);for(var f=0;f<8;f++){var d=_[f].elements;c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=1,Le.transformByM4x4(this._tempValue,this._tempMatrix44,this._tempValue),h[0]=c[0]<h[0]?c[0]:h[0],h[1]=c[1]<h[1]?c[1]:h[1],h[2]=c[2]<h[2]?c[2]:h[2],u[0]=c[0]>u[0]?c[0]:u[0],u[1]=c[1]>u[1]?c[1]:u[1],u[2]=c[2]>u[2]?c[2]:u[2];}
Le.add(this._tempMax,this._tempMin,this._tempValue),c[0]*=.5,c[1]*=.5,c[2]*=.5,c[3]=1,Le.transformByM4x4(this._tempValue,l.transform.worldMatrix,this._tempValue);var p=Math.abs(-this._tempMax.z),m=p>this._maxDistance?p:this._maxDistance;Re.scale(this._globalParallelLightDir,m,this._tempPos);var g=this._tempPos.elements;g[0]=c[0]-g[0],g[1]=c[1]-g[1],g[2]=c[2]-g[2],l.transform.position=this._tempPos,l.transform.lookAt(this._tempLookAt3,this._tempLightUp,!1),De.createOrthoOffCenterRH(h[0],u[0],h[1],u[1],1,m+.5*(u[2]-h[2]),l.projectionMatrix),l.projectionViewMatrix.cloneTo(this._lightVPMatrix[this._currentPSSM]),this._lightCulling[this._currentPSSM].matrix=this._lightVPMatrix[this._currentPSSM],t.multiplyMatrixOutFloat32Array(this._tempScaleMatrix44,this._lightVPMatrix[this._currentPSSM],this._shaderValueVPs[this._currentPSSM]);},e.getLightFrustumCulling=function(t){return this._lightCulling[t];},e.getSplitFrustumCulling=function(){return this._splitFrustumCulling;},e.getSplitDistance=function(t){return this._spiltDistance[t];},e.setShadowMapTextureSize=function(t){t!==this._shadowMapTextureSize&&(this._shadowMapTextureSize=t,this._shadowPCFOffset.x=1/this._shadowMapTextureSize,this._shadowPCFOffset.y=1/this._shadowMapTextureSize,this._statesDirty=!0);},e.getShadowMapTextureSize=function(){return this._shadowMapTextureSize;},e.beginRenderTarget=function(t){this._renderTarget[t].start();},e.endRenderTarget=function(t){this._renderTarget[t].end();},e.getRenderTarget=function(t){return this._renderTarget[t];},e.disposeAllRenderTarget=function(){for(var t=0,e=this._numberOfPSSM+1;t<e;t++){this._renderTarget[t]&&(this._renderTarget[t].destroy(),this._renderTarget[t]=null);}},a(0,e,"PSSMNum",function(){return this._numberOfPSSM;},function(t){t=(t=t>0?t:1)<=3?t:3,this._numberOfPSSM!=t&&(this._numberOfPSSM=t,this._ratioOfDistance=1/this._numberOfPSSM,this._statesDirty=!0);}),t.multiplyMatrixOutFloat32Array=function(t,e,n){var i,r,a,o,s,l,u;for(r=t.elements,a=e.elements,i=0;i<4;i++){o=r[i],s=r[i+4],l=r[i+8],u=r[i+12],n[i]=o*a[0]+s*a[1]+l*a[2]+u*a[3],n[i+4]=o*a[4]+s*a[5]+l*a[6]+u*a[7],n[i+8]=o*a[8]+s*a[9]+l*a[10]+u*a[11],n[i+12]=o*a[12]+s*a[13]+l*a[14]+u*a[15];}},t.SHADERDEFINE_RECEIVE_SHADOW=1,t.SHADERDEFINE_CAST_SHADOW=512,t.SHADERDEFINE_SHADOW_PSSM1=1024,t.SHADERDEFINE_SHADOW_PSSM2=2048,t.SHADERDEFINE_SHADOW_PSSM3=4096,t.SHADERDEFINE_SHADOW_PCF_NO=8192,t.SHADERDEFINE_SHADOW_PCF1=16384,t.SHADERDEFINE_SHADOW_PCF2=32768,t.SHADERDEFINE_SHADOW_PCF3=65536,t.MAX_PSSM_COUNT=3,t;}(),He=function(){function t(){this._boundingSphere=null,this._boundingBox=null,this._sizeOfY=null,this._currentLODLevel=0,this._lastDistanceToEye=NaN,this._originalBoundingSphere=null,this._originalBoundingBox=null,this._originalBoundingBoxCorners=null,this._bUseStrip=!1,this._gridSize=NaN,this._beginGridX=0,this._beginGridZ=0,this._LODError=null,t.__init__(),this._currentLODLevel=0;}
r(t,"laya.d3.terrain.TerrainLeaf");var e=t.prototype;return e.calcVertextNorml=function(e,n,i,r,a,o){var s=0,l=0;l=-1*t.getHeightFromTerrainHeightData(e-1,n-1,i,r,a),l+=-1*t.getHeightFromTerrainHeightData(e-1,n,i,r,a),l+=-1*t.getHeightFromTerrainHeightData(e-1,n+1,i,r,a),l+=1*t.getHeightFromTerrainHeightData(e+1,n-1,i,r,a),l+=1*t.getHeightFromTerrainHeightData(e+1,n,i,r,a),l+=1*t.getHeightFromTerrainHeightData(e+1,n+1,i,r,a),s=-1*t.getHeightFromTerrainHeightData(e-1,n-1,i,r,a),s+=-1*t.getHeightFromTerrainHeightData(e,n-1,i,r,a),s+=-1*t.getHeightFromTerrainHeightData(e+1,n-1,i,r,a),s+=1*t.getHeightFromTerrainHeightData(e-1,n+1,i,r,a),s+=1*t.getHeightFromTerrainHeightData(e,n+1,i,r,a),s+=1*t.getHeightFromTerrainHeightData(e+1,n+1,i,r,a),o.x=-l,o.y=6,o.z=-s,Re.normalize(o,o);},e.calcVertextNormlUV=function(t,e,n,i,r){r.x=t/n,r.y=e/i,r.z=e/i;},e.calcVertextBuffer=function(e,n,i,r,a,o,s,l,u,h,c,_){if(1==_&&!t.__ADAPT_MATRIX__){t.__ADAPT_MATRIX__=new De();var f=new De();De.createRotationY(Math.PI,t.__ADAPT_MATRIX__),De.createTranslate(new Re(0,0,(c-1)*a),f),De.multiply(f,t.__ADAPT_MATRIX__,t.__ADAPT_MATRIX__),t.__ADAPT_MATRIX_INV__=new De(),t.__ADAPT_MATRIX__.invert(t.__ADAPT_MATRIX_INV__);}
this._gridSize=a,this._beginGridX=e*t.CHUNK_GRID_NUM+i,this._beginGridZ=n*t.CHUNK_GRID_NUM+r;for(var d=s*l,p=2147483647,m=-2147483648,g=new Re(),y=0,v=t.LEAF_GRID_NUM+1;y<v;y++){for(var I=0,x=t.LEAF_GRID_NUM+1;I<x;I++){t.__VECTOR3__.x=(this._beginGridX+I)*this._gridSize,t.__VECTOR3__.z=(this._beginGridZ+y)*this._gridSize,t.__VECTOR3__.y=u[(this._beginGridZ+y)*h+(this._beginGridX+I)],p=t.__VECTOR3__.y<p?t.__VECTOR3__.y:p,m=t.__VECTOR3__.y>m?t.__VECTOR3__.y:m,t.__ADAPT_MATRIX__&&Re.transformV3ToV3(t.__VECTOR3__,t.__ADAPT_MATRIX__,t.__VECTOR3__),o[d]=t.__VECTOR3__.x,o[++d]=t.__VECTOR3__.y,o[++d]=t.__VECTOR3__.z,d++,this.calcVertextNormlUV(this._beginGridX+I,this._beginGridZ+y,h,c,g),o[d]=g.x,o[++d]=g.y,o[++d]=g.z,o[++d]=(i+I)/t.CHUNK_GRID_NUM,o[++d]=(r+y)/t.CHUNK_GRID_NUM,o[++d]=this._beginGridX+I,o[++d]=this._beginGridZ+y,d++;}}
this._sizeOfY=new Oe(p-1,m+1),this.calcLODErrors(u,h,c),this.calcOriginalBoudingBoxAndSphere();},e.calcSkirtVertextBuffer=function(e,n,i,r,a,o,s,l,u,h,c){this._gridSize=a,this._beginGridX=e*t.CHUNK_GRID_NUM+i,this._beginGridZ=n*t.CHUNK_GRID_NUM+r;var _=s*l,f=0,d=0,p=t.LEAF_GRID_NUM+1,m=new Re(),g=0,y=0;for(f=0;f<2;f++){for(d=0;d<p;d++){t.__VECTOR3__.x=(this._beginGridX+d)*this._gridSize,t.__VECTOR3__.y=1==f?u[this._beginGridZ*h+(this._beginGridX+d)]:-this._gridSize,t.__VECTOR3__.z=(this._beginGridZ+0)*this._gridSize,t.__ADAPT_MATRIX__&&Re.transformV3ToV3(t.__VECTOR3__,t.__ADAPT_MATRIX__,t.__VECTOR3__),o[_]=t.__VECTOR3__.x,o[++_]=t.__VECTOR3__.y,o[++_]=t.__VECTOR3__.z,_++,g=0==f?this._beginGridZ-1:this._beginGridZ,this.calcVertextNormlUV(this._beginGridX+d,g,h,c,m),o[_]=m.x,o[++_]=m.y,o[++_]=m.z,o[++_]=(i+d)/t.CHUNK_GRID_NUM,o[++_]=(r+0)/t.CHUNK_GRID_NUM,o[++_]=this._beginGridX+d,o[++_]=g,_++;}}
for(f=0;f<2;f++){for(d=0;d<p;d++){t.__VECTOR3__.x=(this._beginGridX+d)*this._gridSize,t.__VECTOR3__.y=0==f?u[(this._beginGridZ+t.LEAF_GRID_NUM)*h+(this._beginGridX+d)]:-this._gridSize,t.__VECTOR3__.z=(this._beginGridZ+t.LEAF_GRID_NUM)*this._gridSize,t.__ADAPT_MATRIX__&&Re.transformV3ToV3(t.__VECTOR3__,t.__ADAPT_MATRIX__,t.__VECTOR3__),o[_]=t.__VECTOR3__.x,o[++_]=t.__VECTOR3__.y,o[++_]=t.__VECTOR3__.z,_++,g=0==f?this._beginGridZ+t.LEAF_GRID_NUM:this._beginGridZ+t.LEAF_GRID_NUM+1,this.calcVertextNormlUV(this._beginGridX+d,g,h,c,m),o[_]=m.x,o[++_]=m.y,o[++_]=m.z,o[++_]=(i+d)/t.CHUNK_GRID_NUM,o[++_]=(r+t.LEAF_GRID_NUM)/t.CHUNK_GRID_NUM,o[++_]=this._beginGridX+d,o[++_]=g,_++;}}
for(f=0;f<2;f++){for(d=0;d<p;d++){t.__VECTOR3__.x=(this._beginGridX+0)*this._gridSize,t.__VECTOR3__.y=0==f?u[(this._beginGridZ+d)*h+(this._beginGridX+0)]:-this._gridSize,t.__VECTOR3__.z=(this._beginGridZ+d)*this._gridSize,t.__ADAPT_MATRIX__&&Re.transformV3ToV3(t.__VECTOR3__,t.__ADAPT_MATRIX__,t.__VECTOR3__),o[_]=t.__VECTOR3__.x,o[++_]=t.__VECTOR3__.y,o[++_]=t.__VECTOR3__.z,_++,y=0==f?this._beginGridX:this._beginGridX-1,this.calcVertextNormlUV(y,this._beginGridZ+d,h,c,m),o[_]=m.x,o[++_]=m.y,o[++_]=m.z,o[++_]=(i+0)/t.CHUNK_GRID_NUM,o[++_]=(r+d)/t.CHUNK_GRID_NUM,o[++_]=y,o[++_]=this._beginGridZ+d,_++;}}
for(f=0;f<2;f++){for(d=0;d<p;d++){t.__VECTOR3__.x=(this._beginGridX+t.LEAF_GRID_NUM)*this._gridSize,t.__VECTOR3__.y=1==f?u[(this._beginGridZ+d)*h+(this._beginGridX+t.LEAF_GRID_NUM)]:-this._gridSize,t.__VECTOR3__.z=(this._beginGridZ+d)*this._gridSize,t.__ADAPT_MATRIX__&&Re.transformV3ToV3(t.__VECTOR3__,t.__ADAPT_MATRIX__,t.__VECTOR3__),o[_]=t.__VECTOR3__.x,o[++_]=t.__VECTOR3__.y,o[++_]=t.__VECTOR3__.z,_++,y=0==f?this._beginGridX+t.LEAF_GRID_NUM+1:this._beginGridX+t.LEAF_GRID_NUM,this.calcVertextNormlUV(y,this._beginGridZ+d,h,c,m),o[_]=m.x,o[++_]=m.y,o[++_]=m.z,o[++_]=(i+t.LEAF_GRID_NUM)/t.CHUNK_GRID_NUM,o[++_]=(r+d)/t.CHUNK_GRID_NUM,o[++_]=y,o[++_]=this._beginGridZ+d,_++;}}},e.calcOriginalBoudingBoxAndSphere=function(){var e=new Re(this._beginGridX*this._gridSize,this._sizeOfY.x,this._beginGridZ*this._gridSize),n=new Re((this._beginGridX+t.LEAF_GRID_NUM)*this._gridSize,this._sizeOfY.y,(this._beginGridZ+t.LEAF_GRID_NUM)*this._gridSize);t.__ADAPT_MATRIX__&&(Re.transformV3ToV3(e,t.__ADAPT_MATRIX__,e),Re.transformV3ToV3(n,t.__ADAPT_MATRIX__,n)),this._originalBoundingBox=new Ie(e,n);var i=new Re();Re.subtract(n,e,i),Re.scale(i,.5,i);var r=new Re();Re.add(e,i,r),this._originalBoundingSphere=new Te(r,Re.scalarLength(i)),this._originalBoundingBoxCorners=o(8,null),this._originalBoundingBox.getCorners(this._originalBoundingBoxCorners),this._boundingBox=new Ie(new Re(-.5,-.5,-.5),new Re(.5,.5,.5)),this._boundingSphere=new Te(new Re(0,0,0),1);},e.calcLeafBoudingBox=function(t){for(var e=0;e<8;e++){Re.transformCoordinate(this._originalBoundingBoxCorners[e],t,en._tempBoundBoxCorners[e]);}
Ie.createfromPoints(en._tempBoundBoxCorners,this._boundingBox);},e.calcLeafBoudingSphere=function(t,e){Re.transformCoordinate(this._originalBoundingSphere.center,t,this._boundingSphere.center),this._boundingSphere.radius=this._originalBoundingSphere.radius*e;},e.calcLODErrors=function(e,n,i){this._LODError=new Float32Array(t._maxLODLevel+1);for(var r=1,a=0,o=t._maxLODLevel+1;a<o;a++){for(var s=0,l=0,u=t.LEAF_GRID_NUM;l<u;l+=r){for(var h=0,c=t.LEAF_GRID_NUM;h<c;h+=r){for(var _=e[(this._beginGridZ+l)*n+(this._beginGridX+h)],f=e[(this._beginGridZ+l)*n+(this._beginGridX+h)+r],d=e[(this._beginGridZ+l+r)*n+(this._beginGridX+h)],p=e[(this._beginGridZ+l+r)*n+(this._beginGridX+h)+r],m=0;m<r;m++){for(var g=m/r,y=0;y<r;y++){var v=y/r,I=e[(this._beginGridZ+l+m)*n+(this._beginGridX+h)+y],x=v+g<=1?_+(f-_)*v+(d-_)*g:p+(d-p)*(1-v)+(f-p)*(1-g),T=Math.abs(x-I);s=Math.max(s,T);}}}}
r*=2,this._LODError[a]=s;}},e.determineLod=function(e,n,i,r){var a=Re.distance(e,this._boundingSphere.center),o=t._maxLODLevel;if(!r){if(this._lastDistanceToEye==a)return this._currentLODLevel;this._lastDistanceToEye>a&&(o=this._currentLODLevel);}
for(var s=o;s>=1;s--){if(di.LOD_DISTANCE_FACTOR*this._LODError[s]/a*n<i){this._currentLODLevel=s;break;}}
return this._lastDistanceToEye=a,this._currentLODLevel;},t.__init__=function(){if(!t._bInit){var e=t.CHUNK_GRID_NUM/t.LEAF_GRID_NUM*(t.CHUNK_GRID_NUM/t.LEAF_GRID_NUM);t._planeLODIndex=o(e);var n=0,i=0,r=0,a=0,s=0,l=0,u=null,h=null;for(n=0;n<e;n++){t._planeLODIndex[n]=new Array(t._maxLODLevel+1);}
for(n=0,a=t._maxLODLevel+1;n<a;n++){t._planeLODIndex[0][n]=t.calcPlaneLODIndex(n);}
for(n=1;n<e;n++){for(l=n*t.LEAF_PLANE_VERTEXT_COUNT,i=0,s=t._maxLODLevel+1;i<s;i++){for(u=t._planeLODIndex[0][i],h=new Uint16Array(u.length),r=0;r<u.length;r++){h[r]=u[r]+l;}
t._planeLODIndex[n][i]=h;}}
for(t._skirtLODIndex=o(e),n=0;n<e;n++){t._skirtLODIndex[n]=new Array(t._maxLODLevel+1);}
for(n=0,a=t._maxLODLevel+1;n<a;n++){t._skirtLODIndex[0][n]=t.calcSkirtLODIndex(n);}
for(n=1;n<e;n++){for(l=n*t.LEAF_SKIRT_VERTEXT_COUNT,i=0,s=t._maxLODLevel+1;i<s;i++){for(u=t._skirtLODIndex[0][i],h=new Uint16Array(u.length),r=0;r<u.length;r++){h[r]=u[r]+l;}
t._skirtLODIndex[n][i]=h;}}
t._bInit=!0;}},t.getPlaneLODIndex=function(e,n){return t._planeLODIndex[e][n];},t.getSkirtLODIndex=function(e,n){return t._skirtLODIndex[e][n];},t.calcPlaneLODIndex=function(e){e>t._maxLODLevel&&(e=t._maxLODLevel);var n=t.LEAF_GRID_NUM+1,i=0,r=null,a=laya.d3.terrain.TerrainLeaf.LEAF_GRID_NUM/Math.pow(2,e);r=new Uint16Array(a*a*6);for(var o=laya.d3.terrain.TerrainLeaf.LEAF_GRID_NUM/a,s=0;s<t.LEAF_GRID_NUM;s+=o){for(var l=0;l<t.LEAF_GRID_NUM;l+=o){r[i]=(s+o)*n+l,r[++i]=s*n+l,r[++i]=s*n+l+o,r[++i]=s*n+l+o,r[++i]=(s+o)*n+l+o,r[++i]=(s+o)*n+l,i++;}}
return r;},t.calcSkirtLODIndex=function(e){e>t._maxLODLevel&&(e=t._maxLODLevel);var n=t.CHUNK_GRID_NUM/t.LEAF_GRID_NUM*(t.CHUNK_GRID_NUM/t.LEAF_GRID_NUM)*t.LEAF_PLANE_VERTEXT_COUNT,i=t.LEAF_GRID_NUM+1,r=0,a=null,o=laya.d3.terrain.TerrainLeaf.LEAF_GRID_NUM/Math.pow(2,e);a=new Uint16Array(4*o*6);for(var s=laya.d3.terrain.TerrainLeaf.LEAF_GRID_NUM/o,l=0;l<4;l++){for(var u=0;u<t.LEAF_GRID_NUM;u+=s){a[r]=n+i+u,a[++r]=n+u,a[++r]=n+u+s,a[++r]=n+u+s,a[++r]=n+i+u+s,a[++r]=n+i+u,r++;}
n+=2*i;}
return a;},t.getHeightFromTerrainHeightData=function(t,e,n,i,r){return t=t<0?0:t,t=t>=i?i-1:t,e=e<0?0:e,e=e>=r?r-1:e,n[e*i+t];},t.CHUNK_GRID_NUM=64,t.LEAF_GRID_NUM=32,t.__ADAPT_MATRIX__=null,t.__ADAPT_MATRIX_INV__=null,t._planeLODIndex=null,t._skirtLODIndex=null,t._bInit=!1,i(t,["LEAF_PLANE_VERTEXT_COUNT",function(){return this.LEAF_PLANE_VERTEXT_COUNT=(t.LEAF_GRID_NUM+1)*(t.LEAF_GRID_NUM+1);},"LEAF_SKIRT_VERTEXT_COUNT",function(){return this.LEAF_SKIRT_VERTEXT_COUNT=2*(t.LEAF_GRID_NUM+1)*4;},"LEAF_VERTEXT_COUNT",function(){return this.LEAF_VERTEXT_COUNT=t.LEAF_PLANE_VERTEXT_COUNT+t.LEAF_SKIRT_VERTEXT_COUNT;},"LEAF_PLANE_MAX_INDEX_COUNT",function(){return this.LEAF_PLANE_MAX_INDEX_COUNT=t.LEAF_GRID_NUM*t.LEAF_GRID_NUM*6;},"LEAF_SKIRT_MAX_INDEX_COUNT",function(){return this.LEAF_SKIRT_MAX_INDEX_COUNT=4*t.LEAF_GRID_NUM*6;},"LEAF_MAX_INDEX_COUNT",function(){return this.LEAF_MAX_INDEX_COUNT=t.LEAF_PLANE_MAX_INDEX_COUNT+t.LEAF_SKIRT_MAX_INDEX_COUNT;},"__VECTOR3__",function(){return this.__VECTOR3__=new Re();},"_maxLODLevel",function(){return this._maxLODLevel=Math.log2(t.LEAF_GRID_NUM);}]),t;}(),ze=function(){function t(){this.alphaMap=null,this.detailID=null,this.normalMap=null;}
return r(t,"laya.d3.terrain.unit.ChunkInfo"),t;}(),je=function(){function t(){this.diffuseTexture=null,this.normalTexture=null,this.scale=null,this.offset=null;}
return r(t,"laya.d3.terrain.unit.DetailTextureInfo"),t;}(),We=function(){function t(){this.ambientColor=null,this.diffuseColor=null,this.specularColor=null;}
return r(t,"laya.d3.terrain.unit.MaterialInfo"),t;}(),Ke=function(){function t(){}
return r(t,"laya.d3.utils.Physics"),t.__init__=function(){t._layerCollsionMatrix.length=31;for(var e=0;e<31;e++){var n=[],i=31-e;n.length=i;for(var r=0;r<i;r++){n[r]=r===i-1;}
t._layerCollsionMatrix[e]=n;}},t.setLayerCollision=function(e,n,i){t._layerCollsionMatrix[e.number][30-n.number]=i;},t.getLayerCollision=function(e,n){return t._layerCollsionMatrix[e.number][30-n.number];},t.setColliderCollision=function(t,e,n){n?(delete t._ignoreCollisonMap[e.id],delete e._ignoreCollisonMap[t.id]):(t._ignoreCollisonMap[e.id]=e,e._ignoreCollisonMap[t.id]=t);},t.getIColliderCollision=function(t,e){return!!t._ignoreCollisonMap[e.id];},t.rayCast=function(e,n,i,r){void 0===i&&(i=1.79e308),void 0===r&&(r=0),t._outHitAllInfo.length=0;for(var a=z.getLayerByNumber(r)._colliders,o=0,s=a.length;o<s;o++){var l=a[o];if(l.enable&&(l.raycast(e,t._outHitInfo,i),-1!==t._outHitInfo.distance&&t._outHitInfo.distance<=i)){var u=new Ye();t._outHitInfo.cloneTo(u),t._outHitAllInfo.push(u);}}
if(0==t._outHitAllInfo.length)return n.sprite3D=null,void(n.distance=-1);for(var h=Number.MAX_VALUE,c=0,_=0;_<t._outHitAllInfo.length;_++){t._outHitAllInfo[_].distance<h&&(h=t._outHitAllInfo[_].distance,c=_);}
t._outHitAllInfo[c].cloneTo(n);},t.rayCastAll=function(e,n,i,r){void 0===i&&(i=1.79e308),void 0===r&&(r=0),n.length=0;for(var a=z.getLayerByNumber(r)._colliders,o=0,s=a.length;o<s;o++){var l=a[o];if(l.enable&&(t._outHitInfo.distance=-1,t._outHitInfo.sprite3D=null,l.raycast(e,t._outHitInfo,i),-1!==t._outHitInfo.distance&&t._outHitInfo.distance<=i)){var u=new Ye();t._outHitInfo.cloneTo(u),n.push(u);}}},t._outHitAllInfo=[],t._layerCollsionMatrix=[],i(t,["_outHitInfo",function(){return this._outHitInfo=new Ye();},"collisionManager",function(){return this.collisionManager=new rn();},"gravity",function(){return this.gravity=new Re(0,-9.81,0);}]),t;}(),Xe=function(){function t(){}
return r(t,"laya.d3.utils.Picker"),t.calculateCursorRay=function(e,n,i,r,a,o){var s=e.elements[0],l=e.elements[1],u=t._tempVector30,h=u.elements;h[0]=s,h[1]=l,h[2]=n.minDepth;var c=t._tempVector31,_=c.elements;_[0]=s,_[1]=l,_[2]=n.maxDepth;var f=o.origin,d=t._tempVector32;n.unprojectFromWVP(u,i,r,a,f),n.unprojectFromWVP(c,i,r,a,d);var p=o.direction.elements;p[0]=d.x-f.x,p[1]=d.y-f.y,p[2]=d.z-f.z,Re.normalize(o.direction,o.direction);},t.rayIntersectsPositionsAndIndices=function(e,n,i,r,a){for(var o=i.vertexStride/4,s=i.getVertexElementByUsage(0).offset/4,l=Number.MAX_VALUE,u=-1,h=-1,c=-1,_=0;_<r.length;_+=3){var f=t._tempVector35,d=f.elements,p=r[_]*o,m=p+s;d[0]=n[m],d[1]=n[m+1],d[2]=n[m+2];var g=t._tempVector36,y=g.elements,v=r[_+1]*o,I=v+s;y[0]=n[I],y[1]=n[I+1],y[2]=n[I+2];var x=t._tempVector37,T=x.elements,S=r[_+2]*o,b=S+s;T[0]=n[b],T[1]=n[b+1],T[2]=n[b+2];var w=laya.d3.utils.Picker.rayIntersectsTriangle(e,f,g,x);!isNaN(w)&&w<l&&(l=w,u=p,h=v,c=S);}
if(l!==Number.MAX_VALUE){a.distance=l,Re.scale(e.direction,l,a.position),Re.add(e.origin,a.position,a.position);var D=a.trianglePositions,C=D[0],E=D[1],P=D[2],M=C.elements,A=E.elements,O=P.elements,R=u+s;M[0]=n[R],M[1]=n[R+1],M[2]=n[R+2];var L=h+s;A[0]=n[L],A[1]=n[L+1],A[2]=n[L+2];var F=c+s;O[0]=n[F],O[1]=n[F+1],O[2]=n[F+2];var V=i.getVertexElementByUsage(3);if(V){var N=V.offset/4,U=a.triangleNormals,G=U[0],B=U[1],k=U[2],H=G.elements,z=B.elements,j=k.elements,W=u+N;H[0]=n[W],H[1]=n[W+1],H[2]=n[W+2];var K=h+N;z[0]=n[K],z[1]=n[K+1],z[2]=n[K+2];var X=c+N;j[0]=n[X],j[1]=n[X+1],j[2]=n[X+2];}
return!0;}
return a.position.toDefault(),a.distance=Number.MAX_VALUE,a.trianglePositions[0].toDefault(),a.trianglePositions[1].toDefault(),a.trianglePositions[2].toDefault(),a.triangleNormals[0].toDefault(),a.triangleNormals[1].toDefault(),a.triangleNormals[2].toDefault(),!1;},t.rayIntersectsTriangle=function(e,n,i,r){var a=t._tempVector30,o=t._tempVector31;Re.subtract(i,n,a),Re.subtract(r,n,o);var s=t._tempVector32;Re.cross(e.direction,o,s);var l;if((l=Re.dot(a,s))>-Number.MIN_VALUE&&l<Number.MIN_VALUE)return Number.NaN;var u=1/l,h=t._tempVector33;Re.subtract(e.origin,n,h);var c;if(c=Re.dot(h,s),(c*=u)<0||c>1)return Number.NaN;var _=t._tempVector34;Re.cross(h,a,_);var f;if(f=Re.dot(e.direction,_),(f*=u)<0||c+f>1)return Number.NaN;var d;return d=Re.dot(o,_),(d*=u)<0?Number.NaN:d;},i(t,["_tempVector30",function(){return this._tempVector30=new Re();},"_tempVector31",function(){return this._tempVector31=new Re();},"_tempVector32",function(){return this._tempVector32=new Re();},"_tempVector33",function(){return this._tempVector33=new Re();},"_tempVector34",function(){return this._tempVector34=new Re();},"_tempVector35",function(){return this._tempVector35=new Re();},"_tempVector36",function(){return this._tempVector36=new Re();},"_tempVector37",function(){return this._tempVector37=new Re();}]),t;}(),Ye=function(){function t(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new Re(),new Re(),new Re()],this.trianglePositions.length=3,this.triangleNormals=[new Re(),new Re(),new Re()],this.triangleNormals.length=3,this.position=new Re();}
r(t,"laya.d3.utils.RaycastHit");return t.prototype.cloneTo=function(t){t.distance=this.distance,this.trianglePositions[0].cloneTo(t.trianglePositions[0]),this.trianglePositions[1].cloneTo(t.trianglePositions[1]),this.trianglePositions[2].cloneTo(t.trianglePositions[2]),this.triangleNormals[0].cloneTo(t.triangleNormals[0]),this.triangleNormals[1].cloneTo(t.triangleNormals[1]),this.triangleNormals[2].cloneTo(t.triangleNormals[2]),this.position.cloneTo(t.position),t.sprite3D=this.sprite3D;},t;}(),qe=function(){function t(t,e){this._width=0,this._height=0,this._width=t,this._height=e;}
r(t,"laya.d3.utils.Size");var e=t.prototype;return a(0,e,"width",function(){return-1===this._width?_t.clientWidth:this._width;}),a(0,e,"height",function(){return-1===this._height?_t.clientHeight:this._height;}),a(1,t,"fullScreen",function(){return new t(-1,-1);}),t;}(),Ze=function(){function t(){}
return r(t,"laya.d3.utils.Utils3D"),t._rotationTransformScaleSkinAnimation=function(e,n,i,r,a,o,s,l,u,h,c,_){var f=t._tempArray16_0,d=t._tempArray16_1,p=t._tempArray16_2,m=r+r,g=a+a,y=o+o,v=r*m,I=a*m,x=a*g,T=o*m,S=o*g,b=o*y,w=s*m,D=s*g,C=s*y;f[15]=1,f[0]=1-x-b,f[1]=I+C,f[2]=T-D,f[4]=I-C,f[5]=1-v-b,f[6]=S+w,f[8]=T+D,f[9]=S-w,f[10]=1-v-x,d[15]=1,d[0]=l,d[5]=u,d[10]=h;var E,P,M,A,O;for(E=0;E<4;E++){P=f[E],M=f[E+4],A=f[E+8],O=f[E+12],p[E]=P,p[E+4]=M,p[E+8]=A,p[E+12]=P*e+M*n+A*i+O;}
for(E=0;E<4;E++){P=p[E],M=p[E+4],A=p[E+8],O=p[E+12],c[E+_]=P*d[0]+M*d[1]+A*d[2]+O*d[3],c[E+_+4]=P*d[4]+M*d[5]+A*d[6]+O*d[7],c[E+_+8]=P*d[8]+M*d[9]+A*d[10]+O*d[11],c[E+_+12]=P*d[12]+M*d[13]+A*d[14]+O*d[15];}},t._createNodeByJson=function(e,n,i,r){if(!i)switch(n.type){case "Sprite3D":i=new Nn();break;case "MeshSprite3D":i=new gi();break;case "SkinnedMeshSprite3D":i=new vi();break;case "ShuriKenParticle3D":i=new yi();break;case "TrailSprite3D":i=new Ii();break;case "Terrain":i=new di();break;case "Camera":i=new pi();break;case "DirectionLight":i=new mi();break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.");}
var a=n.props;if(a)for(var o in a){i[o]=a[o];}
var s=n.customProps;s&&(i instanceof laya.d3.core.Sprite3D?(i._parseBaseCustomProps(s),i._parseCustomProps(e,r,s,n),i._parseCustomComponent(e,r,n.components)):i._parseCustomProps(e,r,s,n));var l=n.child;if(l)for(var u=0,h=l.length;u<h;u++){var c=t._createNodeByJson(e,l[u],null,r);i.addChild(c);}
return i;},t._computeBoneAndAnimationDatasByBindPoseMatrxix=function(t,e,n,i,r,a){var o,s,l=0,u=0,h=t.length;for(o=0;o<h;l+=t[o].keyframeWidth,u+=16,o++){laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(e[l+0],e[l+1],e[l+2],e[l+3],e[l+4],e[l+5],e[l+6],e[l+7],e[l+8],e[l+9],i,u),0!=o&&(s=16*t[o].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(i,s,i,u,i,u));}
var c=n.length;for(o=0;o<c;o++){laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(i,16*a[o],n[o],r,16*o);}},t._computeAnimationDatasByArrayAndMatrixFast=function(t,e,n,i){for(var r=0,a=t.length;r<a;r++){laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(e,16*i[r],t[r],n,16*r);}},t._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(t,e,n,i,r){var a,o,s=0,l=0,u=t.length;for(a=0;a<u;s+=t[a].keyframeWidth,l+=16,a++){laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(e[s+7],e[s+8],e[s+9],e[s+3],e[s+4],e[s+5],e[s+6],e[s+0],e[s+1],e[s+2],i,l),0!=a&&(o=16*t[a].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(i,o,i,l,i,l));}
var h=n.length;for(a=0;a<h;a++){var c=16*a;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(i,c,n[a],r,c);}},t._computeAnimationDatasByArrayAndMatrixFastOld=function(t,e,n){for(var i=t.length,r=0;r<i;r++){var a=16*r;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(e,a,t[r],n,a);}},t._computeRootAnimationData=function(t,e,n){for(var i=0,r=0,a=0,o=t.length;i<o;r+=t[i].keyframeWidth,a+=16,i++){laya.d3.utils.Utils3D.createAffineTransformationArray(e[r+0],e[r+1],e[r+2],e[r+3],e[r+4],e[r+5],e[r+6],e[r+7],e[r+8],e[r+9],n,a);}},t.transformVector3ArrayByQuat=function(t,e,n,i,r){var a=n.elements,o=t[e],s=t[e+1],l=t[e+2],u=a[0],h=a[1],c=a[2],_=a[3],f=_*o+h*l-c*s,d=_*s+c*o-u*l,p=_*l+u*s-h*o,m=-u*o-h*s-c*l;i[r]=f*_+m*-u+d*-c-p*-h,i[r+1]=d*_+m*-h+p*-u-f*-c,i[r+2]=p*_+m*-c+f*-h-d*-u;},t.mulMatrixByArray=function(e,n,i,r,a,o){var s,l,u,h,c;if(a===i){for(i=t._tempArray16_3,s=0;s<16;++s){i[s]=a[o+s];}
r=0;}
for(s=0;s<4;s++){l=e[n+s],u=e[n+s+4],h=e[n+s+8],c=e[n+s+12],a[o+s]=l*i[r+0]+u*i[r+1]+h*i[r+2]+c*i[r+3],a[o+s+4]=l*i[r+4]+u*i[r+5]+h*i[r+6]+c*i[r+7],a[o+s+8]=l*i[r+8]+u*i[r+9]+h*i[r+10]+c*i[r+11],a[o+s+12]=l*i[r+12]+u*i[r+13]+h*i[r+14]+c*i[r+15];}},t.mulMatrixByArrayFast=function(t,e,n,i,r,a){var o,s,l,u,h;for(o=0;o<4;o++){s=t[e+o],l=t[e+o+4],u=t[e+o+8],h=t[e+o+12],r[a+o]=s*n[i+0]+l*n[i+1]+u*n[i+2]+h*n[i+3],r[a+o+4]=s*n[i+4]+l*n[i+5]+u*n[i+6]+h*n[i+7],r[a+o+8]=s*n[i+8]+l*n[i+9]+u*n[i+10]+h*n[i+11],r[a+o+12]=s*n[i+12]+l*n[i+13]+u*n[i+14]+h*n[i+15];}},t.mulMatrixByArrayAndMatrixFast=function(t,e,n,i,r){var a,o,s,l,u,h=n.elements,c=h[0],_=h[1],f=h[2],d=h[3],p=h[4],m=h[5],g=h[6],y=h[7],v=h[8],I=h[9],x=h[10],T=h[11],S=h[12],b=h[13],w=h[14],D=h[15],C=e,E=e+4,P=e+8,M=e+12,A=r,O=r+4,R=r+8,L=r+12;for(a=0;a<4;a++){o=t[C+a],s=t[E+a],l=t[P+a],u=t[M+a],i[A+a]=o*c+s*_+l*f+u*d,i[O+a]=o*p+s*m+l*g+u*y,i[R+a]=o*v+s*I+l*x+u*T,i[L+a]=o*S+s*b+l*w+u*D;}},t.createAffineTransformationArray=function(t,e,n,i,r,a,o,s,l,u,h,c){var _=i+i,f=r+r,d=a+a,p=i*_,m=i*f,g=i*d,y=r*f,v=r*d,I=a*d,x=o*_,T=o*f,S=o*d;h[c+0]=(1-(y+I))*s,h[c+1]=(m+S)*s,h[c+2]=(g-T)*s,h[c+3]=0,h[c+4]=(m-S)*l,h[c+5]=(1-(p+I))*l,h[c+6]=(v+x)*l,h[c+7]=0,h[c+8]=(g+T)*u,h[c+9]=(v-x)*u,h[c+10]=(1-(p+y))*u,h[c+11]=0,h[c+12]=t,h[c+13]=e,h[c+14]=n,h[c+15]=1;},t.transformVector3ArrayToVector3ArrayCoordinate=function(e,n,i,r,a){var o=t._tempArray4_0,s=e[n+0],l=e[n+1],u=e[n+2],h=i.elements;o[0]=s*h[0]+l*h[4]+u*h[8]+h[12],o[1]=s*h[1]+l*h[5]+u*h[9]+h[13],o[2]=s*h[2]+l*h[6]+u*h[10]+h[14],o[3]=1/(s*h[3]+l*h[7]+u*h[11]+h[15]),r[a+0]=o[0]*o[3],r[a+1]=o[1]*o[3],r[a+2]=o[2]*o[3];},t.transformLightingMapTexcoordByUV0Array=function(t,e,n,i,r){var a=n.elements;i[r+0]=t[e+0]*a[0]+a[2],i[r+1]=(t[e+1]-1)*a[1]+a[3];},t.transformLightingMapTexcoordByUV1Array=function(t,e,n,i,r){var a=n.elements;i[r+0]=t[e+0]*a[0]+a[2],i[r+1]=1+t[e+1]*a[1]+a[3];},t.getURLVerion=function(t){var e=t.indexOf("?");return e>=0?t.substr(e):null;},t._quaternionCreateFromYawPitchRollArray=function(t,e,n,i){var r=.5*n,a=.5*e,o=.5*t,s=Math.sin(r),l=Math.cos(r),u=Math.sin(a),h=Math.cos(a),c=Math.sin(o),_=Math.cos(o);i[0]=_*u*l+c*h*s,i[1]=c*h*l-_*u*s,i[2]=_*h*s-c*u*l,i[3]=_*h*l+c*u*s;},t._createAffineTransformationArray=function(t,e,n,i){var r=e[0],a=e[1],o=e[2],s=e[3],l=r+r,u=a+a,h=o+o,c=r*l,_=r*u,f=r*h,d=a*u,p=a*h,m=o*h,g=s*l,y=s*u,v=s*h,I=n[0],x=n[1],T=n[2];i[0]=(1-(d+m))*I,i[1]=(_+v)*I,i[2]=(f-y)*I,i[3]=0,i[4]=(_-v)*x,i[5]=(1-(c+m))*x,i[6]=(p+g)*x,i[7]=0,i[8]=(f+y)*T,i[9]=(p-g)*T,i[10]=(1-(c+d))*T,i[11]=0,i[12]=t[0],i[13]=t[1],i[14]=t[2],i[15]=1;},t._mulMatrixArray=function(t,e,n,i){var r,a,o,s,l,u=e.elements,h=u[0],c=u[1],_=u[2],f=u[3],d=u[4],p=u[5],m=u[6],g=u[7],y=u[8],v=u[9],I=u[10],x=u[11],T=u[12],S=u[13],b=u[14],w=u[15],D=i,C=i+4,E=i+8,P=i+12;for(r=0;r<4;r++){a=t[r],o=t[r+4],s=t[r+8],l=t[r+12],n[D+r]=a*h+o*c+s*_+l*f,n[C+r]=a*d+o*p+s*m+l*g,n[E+r]=a*y+o*v+s*I+l*x,n[P+r]=a*T+o*S+s*b+l*w;}},t.getYawPitchRoll=function(e,n){t.transformQuat(Re.ForwardRH,e,Pe.TEMPVector31),t.transformQuat(Re.Up,e,Pe.TEMPVector32);var i=Pe.TEMPVector32.elements;t.angleTo(Re.ZERO,Pe.TEMPVector31,Pe.TEMPVector33);var r=Pe.TEMPVector33.elements;r[0]==Math.PI/2?(r[1]=t.arcTanAngle(i[2],i[0]),r[2]=0):r[0]==-Math.PI/2?(r[1]=t.arcTanAngle(-i[2],-i[0]),r[2]=0):(De.createRotationY(-r[1],Pe.TEMPMatrix0),De.createRotationX(-r[0],Pe.TEMPMatrix1),Re.transformCoordinate(Pe.TEMPVector32,Pe.TEMPMatrix0,Pe.TEMPVector32),Re.transformCoordinate(Pe.TEMPVector32,Pe.TEMPMatrix1,Pe.TEMPVector32),r[2]=t.arcTanAngle(i[1],-i[0])),r[1]<=-Math.PI&&(r[1]=Math.PI),r[2]<=-Math.PI&&(r[2]=Math.PI),r[1]>=Math.PI&&r[2]>=Math.PI&&(r[1]=0,r[2]=0,r[0]=Math.PI-r[0]),n[0]=r[1],n[1]=r[0],n[2]=r[2];},t.arcTanAngle=function(t,e){return 0==t?1==e?Math.PI/2:-Math.PI/2:t>0?Math.atan(e/t):t<0?e>0?Math.atan(e/t)+Math.PI:Math.atan(e/t)-Math.PI:0;},t.angleTo=function(e,n,i){Re.subtract(n,e,Pe.TEMPVector30),Re.normalize(Pe.TEMPVector30,Pe.TEMPVector30),i.elements[0]=Math.asin(Pe.TEMPVector30.y),i.elements[1]=t.arcTanAngle(-Pe.TEMPVector30.z,-Pe.TEMPVector30.x);},t.transformQuat=function(t,e,n){var i=n.elements,r=t.elements,a=e,o=r[0],s=r[1],l=r[2],u=a[0],h=a[1],c=a[2],_=a[3],f=_*o+h*l-c*s,d=_*s+c*o-u*l,p=_*l+u*s-h*o,m=-u*o-h*s-c*l;i[0]=f*_+m*-u+d*-c-p*-h,i[1]=d*_+m*-h+p*-u-f*-c,i[2]=p*_+m*-c+f*-h-d*-u;},t.quaterionNormalize=function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],o=n*n+i*i+r*r+a*a;o>0&&(o=1/Math.sqrt(o),e[0]=n*o,e[1]=i*o,e[2]=r*o,e[3]=a*o);},t.matrix4x4MultiplyFFF=function(t,e,n){var i,r,a,o,s;if(n===e)for(e=new Float32Array(16),i=0;i<16;++i){e[i]=n[i];}
for(i=0;i<4;i++){r=t[i],a=t[i+4],o=t[i+8],s=t[i+12],n[i]=r*e[0]+a*e[1]+o*e[2]+s*e[3],n[i+4]=r*e[4]+a*e[5]+o*e[6]+s*e[7],n[i+8]=r*e[8]+a*e[9]+o*e[10]+s*e[11],n[i+12]=r*e[12]+a*e[13]+o*e[14]+s*e[15];}},t.matrix4x4MultiplyMFM=function(e,n,i){t.matrix4x4MultiplyFFF(e.elements,n,i.elements);},t._tempVector3_0=new Re(),t._tempVector3_1=new Re(),t._tempVector3_2=new Re(),t._tempVector3_3=new Re(),t._tempVector3_4=new Re(),t._tempVector3_5=new Re(),t._tempVector3_6=new Re(),t._tempArray4_0=new Float32Array(4),t._tempArray16_0=new Float32Array(16),t._tempArray16_1=new Float32Array(16),t._tempArray16_2=new Float32Array(16),t._tempArray16_3=new Float32Array(16),i(t,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"};}]),t;}(),Je=function(){function t(){}
return r(t,"Laya3D"),t._cancelLoadByUrl=function(e){n.loader.cancelLoadByUrl(e),t._innerFirstLevelLoaderManager.cancelLoadByUrl(e),t._innerSecondLevelLoaderManager.cancelLoadByUrl(e),t._innerThirdLevelLoaderManager.cancelLoadByUrl(e),t._innerFourthLevelLoaderManager.cancelLoadByUrl(e);},t._changeWebGLSize=function(t,e){R.onStageResize(t,e),_t.clientWidth=t,_t.clientHeight=e;},t.__init__=function(){var e=I.createMap;e.lh=[Nn,"SPRITE3DHIERARCHY"],e.ls=[Vn,"SPRITE3DHIERARCHY"],e.lm=[ri,"MESH"],e.lmat=[Wn,"MATERIAL"],e.lpbr=[Hn,"MATERIAL"],e.ltc=[ui,"TEXTURECUBE"],e.jpg=[li,"nativeimage"],e.jpeg=[li,"nativeimage"],e.png=[li,"nativeimage"],e.pkm=[li,"arraybuffer"],e.lsani=[l,"arraybuffer"],e.lrani=[l,"arraybuffer"],e.raw=[ni,"arraybuffer"],e.mipmaps=[ni,"arraybuffer"],e.thdata=[In,"arraybuffer"],e.lt=[xn,"TERRAIN"],e.lani=[pn,"arraybuffer"],e.lav=[mn,"json"],e.ani=[l,"arraybuffer"],v.parserMap.SPRITE3DHIERARCHY=t._loadHierarchy,v.parserMap.MESH=t._loadMesh,v.parserMap.MATERIAL=t._loadMaterial,v.parserMap.TEXTURECUBE=t._loadTextureCube,v.parserMap.TERRAIN=t._loadTerrain,t._innerFirstLevelLoaderManager.on("error",null,t._eventLoadManagerError),t._innerSecondLevelLoaderManager.on("error",null,t._eventLoadManagerError),t._innerThirdLevelLoaderManager.on("error",null,t._eventLoadManagerError),t._innerFourthLevelLoaderManager.on("error",null,t._eventLoadManagerError);},t.READ_BLOCK=function(){return t._readData.pos+=4,!0;},t.READ_DATA=function(){return t._DATA.offset=t._readData.getUint32(),t._DATA.size=t._readData.getUint32(),!0;},t.READ_STRINGS=function(){var e=[],n={offset:0,size:0};n.offset=t._readData.getUint16(),n.size=t._readData.getUint16();t._readData.pos;t._readData.pos=n.offset+t._DATA.offset;for(var i=0;i<n.size;i++){var r=t._readData.readUTFString();-1===r.lastIndexOf(".lmat")&&-1===r.lastIndexOf(".lpbr")||e.push(r);}
return e;},t.formatRelativePath=function(t,e){var n;if("."===e.charAt(0)){for(var i=(t+e).split("/"),r=0,a=i.length;r<a;r++){if(".."==i[r]){var o=r-1;o>0&&".."!==i[o]&&(i.splice(o,2),r-=2);}}
n=i.join("/");}else n=t+e;return null!=A.customFormat&&(n=A.customFormat(n,null)),n;},t._eventLoadManagerError=function(t){n.loader.event("error",t);},t._addHierarchyInnerUrls=function(e,n,i,r,a,o){var s=t.formatRelativePath(r,a);i&&(s+=i),e.push({url:s,clas:o}),n[a]=s;},t._getSprite3DHierarchyInnerUrls=function(e,n,i,r,a,o,s){var l,u=0,h=0;switch(e.type){case "Scene":var c=e.customProps.lightmaps;for(u=0,h=c.length;u<h;u++){var f=c[u].replace(".exr",".png");t._addHierarchyInnerUrls(r,a,o,s,f,li);}
break;case "MeshSprite3D":case "TrailSprite3D":case "LineSprite3D":case "SkinnedMeshSprite3D":var d;if(e.instanceParams)(d=e.instanceParams.loadPath)&&t._addHierarchyInnerUrls(n,a,o,s,d,ri);else{(d=(l=e.customProps).meshPath)&&t._addHierarchyInnerUrls(n,a,o,s,d,ri);var p=l.materials;if(p)for(u=0,h=p.length;u<h;u++){var m=p[u],g=m.type.split("."),y=_.window;if(g.forEach(function(t){y=y[t];}),"function"!=typeof y)throw "_getSprite3DHierarchyInnerUrls 错误: "+m.type+" 不是类";t._addHierarchyInnerUrls(i,a,o,s,m.path,y);}}
break;case "ShuriKenParticle3D":var v=(l=e.customProps).meshPath;v&&t._addHierarchyInnerUrls(n,a,o,s,v,ri);var I=l.material;if(I)g=I.type.split("."),y=_.window,g.forEach(function(t){y=y[t];}),t._addHierarchyInnerUrls(i,a,o,s,I.path,y);else{var x=l.materialPath;if(x)t._addHierarchyInnerUrls(i,a,o,s,x,Zn);else{var T=l.texturePath;T&&t._addHierarchyInnerUrls(r,a,o,s,T,li);}}
break;case "Terrain":t._addHierarchyInnerUrls(r,a,o,s,e.customProps.dataPath,xn);}
var S=e.components;for(var b in S){var w=S[b];switch(b){case "Animator":var D=w.avatarPath;if(D)t._addHierarchyInnerUrls(r,a,o,s,D,mn);else{var C=w.avatar;C&&t._addHierarchyInnerUrls(r,a,o,s,C.path,mn);}
var E=w.clipPaths;for(u=0,h=E.length;u<h;u++){t._addHierarchyInnerUrls(r,a,o,s,E[u],pn);}}}
var P=e.child;for(u=0,h=P.length;u<h;u++){t._getSprite3DHierarchyInnerUrls(P[u],n,i,r,a,o,s);}},t._loadHierarchy=function(e){e.on("loaded",null,t._onHierarchylhLoaded,[e,e._class._getGroup()]),e.load(e.url,"json",!1,null,!0);},t._onHierarchylhLoaded=function(e,n,i){if(e._class.destroyed)e.endLoad();else{var r=e.url,a=Ze.getURLVerion(r),o=A.getPath(r),s=[],l=[],u=[],h={};t._getSprite3DHierarchyInnerUrls(i,s,l,u,h,a,o);var c=s.length+l.length+u.length,_=c+1,f=1/_;if(t._onProcessChange(e,0,f,1),u.length>0){var d=c/_,p=y.create(null,t._onProcessChange,[e,f,d],!1);t._innerFourthLevelLoaderManager.create(u,y.create(null,t._onHierarchyInnerForthLevResouLoaded,[e,n,p,i,h,s,l,f+d*u.length,d]),p,null,null,1,!0,n);}else t._onHierarchyInnerForthLevResouLoaded(e,n,null,i,h,s,l,f,d);}},t._onHierarchyInnerForthLevResouLoaded=function(e,n,i,r,a,o,s,l,u){if(e._class.destroyed)e.endLoad();else if(i&&i.recover(),s.length>0){var h=y.create(null,t._onProcessChange,[e,l,u],!1);t._innerSecondLevelLoaderManager.create(s,y.create(null,t._onHierarchyInnerSecondLevResouLoaded,[e,n,h,r,a,o,l+u*s.length,u]),i,null,null,1,!0,n);}else t._onHierarchyInnerSecondLevResouLoaded(e,n,null,r,a,o,l,u);},t._onHierarchyInnerSecondLevResouLoaded=function(e,n,i,r,a,o,s,l){if(e._class.destroyed)e.endLoad();else if(i&&i.recover(),o.length>0){var u=y.create(null,t._onProcessChange,[e,s,l],!1);t._innerFirstLevelLoaderManager.create(o,y.create(null,t._onHierarchyInnerFirstLevResouLoaded,[e,u,r,a]),i,null,null,1,!0,n);}else t._onHierarchyInnerFirstLevResouLoaded(e,null,r,a);},t._onHierarchyInnerFirstLevResouLoaded=function(t,e,n,i){e&&e.recover(),t.endLoad([n,i]);},t._loadTerrain=function(e){e.on("loaded",null,t._onTerrainLtLoaded,[e,e._class._getGroup()]),e.load(e.url,"json",!1,null,!0);},t._onTerrainLtLoaded=function(e,n,i){if(e._class.destroyed)e.endLoad();else{var r,a,o=e.url,s=Ze.getURLVerion(o),l=A.getPath(o),u=[],h={},c=0,_=0,f=i.heightData;r=f.url,a=t.formatRelativePath(l,r),s&&(a+=s),h[r]=a,r=a;var d=i.detailTexture;for(c=0,_=d.length;c<_;c++){u.push({url:d[c].diffuse});}
var p=i.normalMap;for(c=0,_=p.length;c<_;c++){u.push({url:p[c]});}
var m=i.alphaMap;for(c=0,_=m.length;c<_;c++){u.push({url:m[c],params:[!1,!1,6408,!0]});}
for(c=0,_=u.length;c<_;c++){var g=u[c].url;a=t.formatRelativePath(l,g),s&&(a+=s),u[c].url=a,h[g]=a;}
var v=u.length,I=v+2,x=1/I;t._onProcessChange(e,0,x,1);var T={heightMapLoaded:!1,texturesLoaded:!1},S=y.create(null,t._onProcessChange,[e,x,x],!1);t._innerFourthLevelLoaderManager.create(r,y.create(null,t._onTerrainHeightMapLoaded,[e,S,i,h,T]),S,null,[f.numX,f.numZ,f.bitType,f.value],1,!0,n);var b=y.create(null,t._onProcessChange,[e,2*x,v/I],!1);t._innerFourthLevelLoaderManager.create(u,y.create(null,t._onTerrainTexturesLoaded,[e,b,i,h,T]),b,null,null,1,!0,n);}},t._onTerrainHeightMapLoaded=function(t,e,n,i,r){r.heightMapLoaded=!0,r.texturesLoaded&&(t.endLoad([n,i]),e.recover());},t._onTerrainTexturesLoaded=function(t,e,n,i,r){r.texturesLoaded=!0,r.heightMapLoaded&&(t.endLoad([n,i]),e.recover());},t._loadMesh=function(e){e.on("loaded",null,t._onMeshLmLoaded,[e,e._class._getGroup()]),e.load(e.url,"arraybuffer",!1,null,!0);},t._onMeshLmLoaded=function(e,n,i){if(e._class.destroyed)e.endLoad();else{var r,a,o=e.url,s=Ze.getURLVerion(o),l=A.getPath(o),u={},h=0,c=0,_=0;(t._readData=new d(i)).pos=0;switch(t._readData.readUTFString()){case "LAYAMODEL:02":case "LAYAMODEL:03":case "LAYAMODEL:0301":var f=t._readData.getUint32();t._readData.pos=t._readData.pos+4,_=t._readData.getUint16(),t._readData.pos=t._readData.pos+8*_;var p=t._readData.getUint32();for(_=t._readData.getUint16(),t._readData.pos=f+p,r=[],h=0;h<_;h++){var m=t._readData.readUTFString();-1!==m.lastIndexOf(".lmat")&&r.push(m);}
break;default:for(t.READ_BLOCK(),h=0;h<2;h++){var g=t._readData.getUint16(),v=t._strings[g],I=t["READ_"+v];if(null==I)throw new Error("model file err,no this function:"+g+" "+v);1===h?r=I.call():I.call();}}
for(h=0,c=r.length;h<c;h++){var x=r[h];a=t.formatRelativePath(l,x),s&&(a+=s),r[h]=a,u[x]=a;}
if(r.length>0){t._onProcessChange(e,0,.5,1);var T=y.create(null,t._onProcessChange,[e,.5,.5],!1);t._innerSecondLevelLoaderManager.create(r,y.create(null,t._onMeshMateialLoaded,[e,T,i,u]),T,null,null,1,!0,n);}else e.endLoad([i,u]);}},t._onMeshMateialLoaded=function(t,e,n,i){t.endLoad([n,i]),e.recover();},t._getMaterialTexturePath=function(e,n,i){var r=e.length-4;return e.indexOf(".dds")!=r&&e.indexOf(".tga")!=r&&e.indexOf(".exr")!=r&&e.indexOf(".DDS")!=r&&e.indexOf(".TGA")!=r&&e.indexOf(".EXR")!=r||(e=e.substr(0,r)+".png"),e=t.formatRelativePath(i,e),n&&(e+=n),e;},t._loadMaterial=function(e){e.on("loaded",null,t._onMaterilLmatLoaded,[e,e._class._getGroup()]),e.load(e.url,"json",!1,null,!0);},t._onMaterilLmatLoaded=function(e,n,i){if(e._class.destroyed)e.endLoad();else{var r,a=e.url,o=Ze.getURLVerion(a),s=A.getPath(a),l=[],u={},h=i.customProps,c=i.version;if(c)switch(c){case "LAYAMATERIAL:01":case "LAYAMATERIAL:02":for(var _=i.props.textures,f=0,d=_.length;f<d;f++){var p=_[f],m=p.path;if(m){var g=m.length-4;m.indexOf(".exr")!=g&&m.indexOf(".EXR")!=g||(m=m.substr(0,g)+".png"),r=t.formatRelativePath(s,m),o&&(r+=o),l.push({url:r,params:p.params}),u[m]=r;}}
break;default:throw new Error("Laya3D:unkonwn version.");}else{var v=h.diffuseTexture.texture2D;if(v&&(r=t._getMaterialTexturePath(v,o,s),l.push(r),u[v]=r),h.normalTexture){var I=h.normalTexture.texture2D;I&&(r=t._getMaterialTexturePath(I,o,s),l.push(r),u[I]=r);}
if(h.specularTexture){var x=h.specularTexture.texture2D;x&&(r=t._getMaterialTexturePath(x,o,s),l.push(r),u[x]=r);}
if(h.emissiveTexture){var T=h.emissiveTexture.texture2D;T&&(r=t._getMaterialTexturePath(T,o,s),l.push(r),u[T]=r);}
if(h.ambientTexture){var S=h.ambientTexture.texture2D;S&&(r=t._getMaterialTexturePath(S,o,s),l.push(r),u[S]=r);}
if(h.reflectTexture){var b=h.reflectTexture.texture2D;b&&(r=t._getMaterialTexturePath(b,o,s),l.push(r),u[b]=r);}}
var w=l.length,D=w+1,C=1/D;if(t._onProcessChange(e,0,C,1),w>0){var E=y.create(null,t._onProcessChange,[e,C,w/D],!1);t._innerFourthLevelLoaderManager.create(l,y.create(null,t._onMateialTexturesLoaded,[e,E,i,u]),E,li,null,1,!0,n);}else t._onMateialTexturesLoaded(e,null,i,null);}},t._onMateialTexturesLoaded=function(t,e,n,i){t.endLoad([n,i]),e&&e.recover();},t._loadTextureCube=function(e){e.on("loaded",null,t._onTextureCubeLtcLoaded,[e]),e.load(e.url,"json",!1,null,!0);},t._onTextureCubeLtcLoaded=function(e,n){if(e._class.destroyed)e.endLoad();else{var i=A.getPath(e.url),r=[t.formatRelativePath(i,n.px),t.formatRelativePath(i,n.nx),t.formatRelativePath(i,n.py),t.formatRelativePath(i,n.ny),t.formatRelativePath(i,n.pz),t.formatRelativePath(i,n.nz)];t._onProcessChange(e,0,1/7,1);var a=y.create(null,t._onProcessChange,[e,1/7,6/7],!1);t._innerFourthLevelLoaderManager.load(r,y.create(null,t._onTextureCubeImagesLoaded,[e,r,a]),a,"nativeimage");}},t._onTextureCubeImagesLoaded=function(t,e,n){var i=[];i.length=6;for(var r=0;r<6;r++){var a=e[r];i[r]=v.getRes(a),v.clearRes(a);}
t.endLoad(i),n.recover();},t._onProcessChange=function(t,e,n,i){(i=e+i*n)<1&&t.event("progress",i);},t.init=function(e,i,r,a,o,s){void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===o&&(o=!0),void 0===s&&(s=!0),D.update3DLoop=function(){rn._triggerCollision();},D.cancelLoadByUrl=function(e){t._cancelLoadByUrl(e);},m.isAntialias=r,m.isAlpha=a,m.premultipliedAlpha=o,m.isStencil=s,R.enable()?(D.changeWebGLSize=t._changeWebGLSize,S.is3DMode=!0,n.init(e,i),z.__init__(),Ke.__init__(),Bn.__init__(),Ge.__init__(),gi.__init__(),U.__init__(),t.__init__(),h.maxTextureCount=2,(t.debugMode||ft.debugMode)&&(t._debugPhasorSprite=new ut())):alert("Laya3D init error,must support webGL!");},t.HIERARCHY="SPRITE3DHIERARCHY",t.MESH="MESH",t.MATERIAL="MATERIAL",t.PBRMATERIAL="PBRMTL",t.TEXTURECUBE="TEXTURECUBE",t.TERRAIN="TERRAIN",t._readData=null,t._debugPhasorSprite=null,t.debugMode=!1,i(t,["_DATA",function(){return this._DATA={offset:0,size:0};},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"];},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new I();},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new I();},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new I();},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new I();}]),t;}(),$e=function(t){function e(t){e.__super.call(this),this._owner=t,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0;}
r(e,"laya.d3.animation.AnimationTransform3D",g);var n=e.prototype;return n._getlocalMatrix=function(){return this._localUpdate&&(Ze._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix;},n._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var t=0,e=this._childs.length;t<e;t++){this._childs[t]._onWorldTransform();}}},n._setWorldMatrixAndUpdate=function(t){if(this._worldMatrix=t,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var e=this._getlocalMatrix(),n=0;n<16;++n){this._worldMatrix[n]=e[n];}else Ze.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1;},n._setWorldMatrixNoUpdate=function(t){this._worldMatrix=t;},n._setWorldMatrixIgnoreUpdate=function(t){this._worldMatrix=t,this._worldUpdate=!1;},n.getLocalPosition=function(){return this._localPosition;},n.setLocalPosition=function(t){if(this._parent)this._localPosition=t,this._localUpdate=!0,this._onWorldTransform();else{var e=this._entity.owner._transform,n=this._entity.localPosition,i=n.elements;i[0]=t[0],i[1]=t[1],i[2]=t[2],e.localPosition=n;}},n.getLocalRotation=function(){if(this._localQuaternionUpdate){var t=this._localRotationEuler;Ze._quaternionCreateFromYawPitchRollArray(t[1]/e._angleToRandin,t[0]/e._angleToRandin,t[2]/e._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1;}
return this._localRotation;},n.setLocalRotation=function(t){if(this._parent)this._localRotation=t,Ze.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var e=this._entity.owner._transform,n=this._entity.localRotation,i=n.elements;i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],e.localRotation=n;}},n.getLocalScale=function(){return this._localScale;},n.setLocalScale=function(t){if(this._parent)this._localScale=t,this._localUpdate=!0,this._onWorldTransform();else{var e=this._entity.owner._transform,n=this._entity.localScale,i=n.elements;i[0]=t[0],i[1]=t[1],i[2]=t[2],e.localScale=n;}},n.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){Ze.getYawPitchRoll(this._localRotation,e._tempVector3);var t=e._tempVector3,n=this._localRotationEuler;n[0]=t[1]*e._angleToRandin,n[1]=t[0]*e._angleToRandin,n[2]=t[2]*e._angleToRandin,this._locaEulerlUpdate=!1;}
return this._localRotationEuler;},n.setLocalRotationEuler=function(t){if(this._parent)Ze._quaternionCreateFromYawPitchRollArray(t[1]/e._angleToRandin,t[0]/e._angleToRandin,t[2]/e._angleToRandin,this._localRotation),this._localRotationEuler=t,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var n=this._entity.owner._transform,i=this._entity.localRotationEuler,r=i.elements;r[0]=t[0],r[1]=t[1],r[2]=t[2],n.localRotationEuler=i;}},n.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)Ze.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var t=this._getlocalMatrix(),e=0;e<16;++e){this._worldMatrix[e]=t[e];}
this._worldUpdate=!1;}
return this._worldMatrix;},n.setParent=function(t){if(this._parent!==t){if(this._parent){var e=this._parent._childs,n=e.indexOf(this);e.splice(n,1);}
t&&(t._childs.push(this),t&&this._onWorldTransform()),this._parent=t;}},i(e,["_tempVector3",function(){return this._tempVector3=new Float32Array(3);},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI;}]),e;}(),Qe=function(t){function e(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,e.__super.call(this),this._destroyed=!1,this._id=e._uniqueIDCounter,e._uniqueIDCounter++;}
r(e,"laya.d3.component.Component3D",g);var i=e.prototype;return n.imps(i,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),i._initialize=function(t){this._owner=t,this._enable=!0,this.started=!1,this._load(t);},i._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0;},i._load=function(t){},i._start=function(t){},i._update=function(t){},i._lateUpdate=function(t){},i._preRenderUpdate=function(t){},i._postRenderUpdate=function(t){},i._unload=function(t){this.offAll();},i._cloneTo=function(t){},a(0,i,"id",function(){return this._id;}),a(0,i,"destroyed",function(){return this._destroyed;}),a(0,i,"owner",function(){return this._owner;}),a(0,i,"enable",function(){return this._enable;},function(t){this._enable!==t&&(this._enable=t,this.event("enablechanged",this._enable));}),a(0,i,"isSingleton",function(){return e._isSingleton;}),e._isSingleton=!0,e._uniqueIDCounter=1,e;}(),tn=function(t){function e(){this._destroyed=!1,e.__super.call(this),this._destroyed=!1;}
r(e,"laya.d3.core.GeometryFilter",g);var i=e.prototype;return n.imps(i,{"laya.resource.IDestroy":!0}),i._destroy=function(){this.offAll(),this._destroyed=!0;},a(0,i,"_isAsyncLoaded",function(){return!0;}),a(0,i,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.");}),a(0,i,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.");}),a(0,i,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.");}),a(0,i,"destroyed",function(){return this._destroyed;}),e;}(),en=function(t){function e(t){e.__super.call(this),this._id=++e._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new Ie(new Re(),new Re()),this._boundingBoxCenter=new Re(),this._boundingSphere=new Te(new Re(),0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=t,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange);}
r(e,"laya.d3.core.render.BaseRender",g);var o=e.prototype;return n.imps(o,{"laya.resource.IDestroy":!0}),o._changeMaterialReference=function(t,e){t&&t._removeReference(),e._addReference();},o._getInstanceMaterial=function(t,e){var n=new t.constructor();return t.cloneTo(n),n.name=n.name+"(Instance)",this._materialsInstance[e]=!0,this._changeMaterialReference(this._materials[e],n),this._materials[e]=n,n;},o._setShaderValuelightMap=function(t){this._setShaderValueTexture(3,t);},o._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0;},o._renderRenderableBoundBox=function(){var t=Je._debugPhasorSprite,n=this.boundingBox,i=e._tempBoundBoxCorners;n.getCorners(i),t.line(i[0],e._greenColor,i[1],e._greenColor),t.line(i[2],e._greenColor,i[3],e._greenColor),t.line(i[4],e._greenColor,i[5],e._greenColor),t.line(i[6],e._greenColor,i[7],e._greenColor),t.line(i[0],e._greenColor,i[3],e._greenColor),t.line(i[1],e._greenColor,i[2],e._greenColor),t.line(i[2],e._greenColor,i[6],e._greenColor),t.line(i[3],e._greenColor,i[7],e._greenColor),t.line(i[0],e._greenColor,i[4],e._greenColor),t.line(i[1],e._greenColor,i[5],e._greenColor),t.line(i[4],e._greenColor,i[7],e._greenColor),t.line(i[5],e._greenColor,i[6],e._greenColor);},o._calculateBoundingSphere=function(){throw "BaseRender: must override it.";},o._calculateBoundingBox=function(){throw "BaseRender: must override it.";},o._setShaderValueTexture=function(t,e){this._owner._shaderValues.setValue(t,e);},o._setShaderValueMatrix4x4=function(t,e){this._owner._shaderValues.setValue(t,e?e.elements:null);},o._setShaderValueColor=function(t,e){this._owner._shaderValues.setValue(t,e?e.elements:null);},o._setShaderValueBuffer=function(t,e){this._owner._shaderValues.setValue(t,e);},o._setShaderValueInt=function(t,e){this._owner._shaderValues.setValue(t,e);},o._setShaderValueBool=function(t,e){this._owner._shaderValues.setValue(t,e);},o._setShaderValueNumber=function(t,e){this._owner._shaderValues.setValue(t,e);},o._setShaderValueVector2=function(t,e){this._owner._shaderValues.setValue(t,e?e.elements:null);},o._addShaderDefine=function(t){this._owner._shaderDefineValue|=t;},o._removeShaderDefine=function(t){this._owner._shaderDefineValue&=~t;},o._renderUpdate=function(t){return!0;},o._applyLightMapParams=function(){if(this._lightmapIndex>=0){var t=this._owner.scene;if(t){var e=t.getlightmaps()[this._lightmapIndex];e?(this._addShaderDefine(_i.SAHDERDEFINE_LIGHTMAP),e.loaded?this._setShaderValuelightMap(e):e.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(_i.SAHDERDEFINE_LIGHTMAP);}else this._removeShaderDefine(_i.SAHDERDEFINE_LIGHTMAP);}else this._removeShaderDefine(_i.SAHDERDEFINE_LIGHTMAP);},o._updateOctreeNode=function(){var t=this._treeNode;t&&this._octreeNodeNeedChange&&(t.updateObject(this),this._octreeNodeNeedChange=!1);},o._destroy=function(){this.offAll();var t=0,e=0;for(t=0,e=this._renderElements.length;t<e;t++){this._renderElements[t]._destroy();}
for(t=0,e=this._materials.length;t<e;t++){this._materials[t]._removeReference();}
this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0;},a(0,o,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere;}),a(0,o,"id",function(){return this._id;}),a(0,o,"material",function(){var t=this._materials[0];if(t&&!this._materialsInstance[0]){var e=this._getInstanceMaterial(t,0);this.event("materialchanged",[this,0,e]);}
return this._materials[0];},function(t){this.sharedMaterial=t;}),a(0,o,"sharedMaterial",function(){return this._materials[0];},function(t){var e=this._materials[0];e!==t&&(this._materials[0]=t,this._materialsInstance[0]=!1,this._changeMaterialReference(e,t),this.event("materialchanged",[this,0,t]));}),a(0,o,"lightmapIndex",function(){return this._lightmapIndex;},function(t){this._lightmapIndex=t,this._applyLightMapParams();}),a(0,o,"lightmapScaleOffset",function(){return this._lightmapScaleOffset;},function(t){this._lightmapScaleOffset=t,this._setShaderValueColor(2,t),this._addShaderDefine(_i.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV);}),a(0,o,"enable",function(){return this._enable;},function(t){this._enable=t,this.event("enablechanged",[this,t]);}),a(0,o,"materials",function(){for(var t=0,e=this._materials.length;t<e;t++){if(!this._materialsInstance[t]){var n=this._getInstanceMaterial(this._materials[t],t);this.event("materialchanged",[this,t,n]);}}
return this._materials.slice();},function(t){this.sharedMaterials=t;}),a(0,o,"sharedMaterials",function(){return this._materials.slice();},function(t){if(!t)throw new Error("MeshRender: shadredMaterials value can't be null.");var e=t.length;this._materialsInstance.length=e;for(var n=0;n<e;n++){var i=this._materials[n];i!==t[n]&&(this._materialsInstance[n]=!1,this._changeMaterialReference(i,t[n]),this.event("materialchanged",[this,n,t[n]]));}
this._materials=t;}),a(0,o,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox;}),a(0,o,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var t=this.boundingBox;Re.add(t.min,t.max,this._boundingBoxCenter),Re.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1;}
return this._boundingBoxCenter;}),a(0,o,"receiveShadow",function(){return this._receiveShadow;},function(t){this._receiveShadow!==t&&(this._receiveShadow=t,t?this._addShaderDefine(ke.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(ke.SHADERDEFINE_RECEIVE_SHADOW));}),a(0,o,"destroyed",function(){return this._destroyed;}),e._uniqueIDCounter=0,i(e,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new Re(),new Re(),new Re(),new Re(),new Re(),new Re(),new Re(),new Re()];},"_greenColor",function(){return this._greenColor=new Le(0,1,0,1);}]),e;}(),nn=function(t){function e(t){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,e.__super.call(this),this._localPosition=new Re(),this._localRotation=new Pe(0,0,0,1),this._localScale=new Re(1,1,1),this._localRotationEuler=new Re(),this._localMatrix=new De(),this._position=new Re(),this._rotation=new Pe(0,0,0,1),this._scale=new Re(1,1,1),this._worldMatrix=new De(),this._forward=new Re(),this._up=new Re(),this._right=new Re(),this._owner=t,this._childs=[];}
r(e,"laya.d3.core.Transform3D",g);var n=e.prototype;return n._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)De.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var t=e._tempVector30;Re.multiply(this.pivot,this._localScale,t);var n=e._tempVector31;Re.subtract(t,this.pivot,n);var i=e._tempVector32,r=this.localRotation;Re.transformQuat(t,r,i),Re.subtract(i,t,i);var a=e._tempVector33;Re.subtract(this._localPosition,n,a),Re.subtract(a,i,a),De.createAffineTransformation(a,r,this._localScale,this._localMatrix);}},n._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var t=0,e=this._childs.length;t<e;t++){this._childs[t]._onWorldPositionRotationTransform();}}},n._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var t=0,e=this._childs.length;t<e;t++){this._childs[t]._onWorldPositionScaleTransform();}}},n._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var t=0,e=this._childs.length;t<e;t++){this._childs[t]._onWorldPositionTransform();}}},n._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var t=0,e=this._childs.length;t<e;t++){this._childs[t]._onWorldPositionRotationTransform();}}},n._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var t=0,e=this._childs.length;t<e;t++){this._childs[t]._onWorldPositionScaleTransform();}}},n._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var t=0,e=this._childs.length;t<e;t++){this._childs[t]._onWorldTransform();}}},n.translate=function(t,n){void 0===n&&(n=!0),n?(De.createFromQuaternion(this.localRotation,e._tempMatrix0),Re.transformCoordinate(t,e._tempMatrix0,e._tempVector30),Re.add(this.localPosition,e._tempVector30,this._localPosition),this.localPosition=this._localPosition):(Re.add(this.position,t,this._position),this.position=this._position);},n.rotate=function(t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0);var r;i?r=t:(Re.scale(t,Math.PI/180,e._tempVector30),r=e._tempVector30),Pe.createFromYawPitchRoll(r.y,r.x,r.z,e._tempQuaternion0),n?(Pe.multiply(this._localRotation,e._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(Pe.multiply(e._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation);},n.lookAt=function(t,e,n){void 0===n&&(n=!1);var i,r=t.elements;if(n){if(i=this._localPosition.elements,Math.abs(i[0]-r[0])<be.zeroTolerance&&Math.abs(i[1]-r[1])<be.zeroTolerance&&Math.abs(i[2]-r[2])<be.zeroTolerance)return;Pe.lookAt(this._localPosition,t,e,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation;}else{var a=this.position;if(i=a.elements,Math.abs(i[0]-r[0])<be.zeroTolerance&&Math.abs(i[1]-r[1])<be.zeroTolerance&&Math.abs(i[2]-r[2])<be.zeroTolerance)return;Pe.lookAt(a,t,e,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation;}},a(0,n,"_isFrontFaceInvert",function(){var t=this.scale,e=t.x<0;return t.y<0&&(e=!e),t.z<0&&(e=!e),e;}),a(0,n,"owner",function(){return this._owner;}),a(0,n,"localRotation",function(){if(this._localQuaternionUpdate){var t=this._localRotationEuler.elements;Pe.createFromYawPitchRoll(t[1]/e._angleToRandin,t[0]/e._angleToRandin,t[2]/e._angleToRandin,this._localRotation);}
return this._localRotation;},function(t){this._localRotation=t,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform();}),a(0,n,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?De.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix;},function(t){null===this._parent?t.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),De.multiply(this._localMatrix,t,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=t,this._worldUpdate=!1;}),a(0,n,"worldNeedUpdate",function(){return this._worldUpdate;}),a(0,n,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix;},function(t){this._localMatrix=t,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform();}),a(0,n,"dummy",function(){return this._dummy;},function(t){this._dummy!==t&&(this._dummy&&(this._dummy._entity=null),t&&(t._entity=this),this._dummy=t);}),a(0,n,"localPosition",function(){return this._localPosition;},function(t){this._localPosition=t,this._localUpdate=!0,this._onWorldPositionTransform();}),a(0,n,"position",function(){if(this._positionUpdate){if(null!=this._parent){var t=this._parent.position;Re.multiply(this._localPosition,this._parent.scale,e._tempVector30),Re.transformQuat(e._tempVector30,this._parent.rotation,e._tempVector30),Re.add(t,e._tempVector30,this._position);}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1;}
return this._position;},function(t){if(null!=this._parent){Re.subtract(t,this._parent.position,this._localPosition);var n=this._parent.scale.elements,i=n[0],r=n[1],a=n[2];if(1!==i||1!==r||1!==a){var o=e._tempVector30,s=o.elements;s[0]=1/i,s[1]=1/r,s[2]=1/a,Re.multiply(this._localPosition,o,this._localPosition);}
this._parent.rotation.invert(e._tempQuaternion0),Re.transformQuat(this._localPosition,e._tempQuaternion0,this._localPosition);}else t.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=t,this._positionUpdate=!1;}),a(0,n,"localScale",function(){return this._localScale;},function(t){this._localScale=t,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform();}),a(0,n,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(e._tempVector30);var t=e._tempVector30.elements,n=this._localRotationEuler.elements;n[0]=t[1]*e._angleToRandin,n[1]=t[0]*e._angleToRandin,n[2]=t[2]*e._angleToRandin;}
return this._localRotationEuler;},function(t){this._localRotationEuler=t,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform();}),a(0,n,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?Pe.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation;},function(t){null!=this._parent?(this._parent.rotation.invert(e._tempQuaternion0),Pe.multiply(t,e._tempQuaternion0,this._localRotation)):t.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=t,this._rotationUpdate=!1;}),a(0,n,"scale",function(){return this._scaleUpdate?(null!==this._parent?Re.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1,this._scale):this._scale;},function(t){if(null!==this._parent){var n=this._parent.scale.elements,i=e._tempVector30.elements;i[0]=1/n[0],i[1]=1/n[1],i[2]=1/n[2],Re.multiply(t,e._tempVector30,this._localScale);}else t.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=t,this._scaleUpdate=!1;}),a(0,n,"rotationEuler",null,function(t){Pe.createFromYawPitchRoll(t.y,t.x,t.z,this._rotation),this.rotation=this._rotation;}),a(0,n,"forward",function(){var t=this.worldMatrix.elements;return this._forward.elements[0]=-t[8],this._forward.elements[1]=-t[9],this._forward.elements[2]=-t[10],this._forward;}),a(0,n,"up",function(){var t=this.worldMatrix.elements;return this._up.elements[0]=t[4],this._up.elements[1]=t[5],this._up.elements[2]=t[6],this._up;}),a(0,n,"right",function(){var t=this.worldMatrix.elements;return this._right.elements[0]=t[0],this._right.elements[1]=t[1],this._right.elements[2]=t[2],this._right;}),a(0,n,"parent",function(){return this._parent;},function(t){if(this._parent!==t){if(this._parent){var e=this._parent._childs,n=e.indexOf(this);e.splice(n,1);}
t&&(t._childs.push(this),t&&this._onWorldTransform()),this._parent=t;}}),i(e,["_tempVector30",function(){return this._tempVector30=new Re();},"_tempVector31",function(){return this._tempVector31=new Re();},"_tempVector32",function(){return this._tempVector32=new Re();},"_tempVector33",function(){return this._tempVector33=new Re();},"_tempQuaternion0",function(){return this._tempQuaternion0=new Pe();},"_tempMatrix0",function(){return this._tempMatrix0=new De();},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI;}]),e;}(),rn=(function(t){function e(){this._rotation=0,this._matNeedUpdte=!1,e.__super.call(this),this._matrix=new De(),this._offset=new Oe(),this._tiling=new Oe(1,1);}
r(e,"laya.d3.core.TransformUV",g);var o=e.prototype;n.imps(o,{"laya.d3.core.IClone":!0}),o._updateMatrix=function(){e._tempOffsetV3.elements[0]=this._offset.x,e._tempOffsetV3.elements[1]=this._offset.y,Pe.createFromYawPitchRoll(0,0,this._rotation,e._tempRotationQua),e._tempTitlingV3.elements[0]=this._tiling.x,e._tempTitlingV3.elements[1]=this._tiling.y,De.createAffineTransformation(e._tempOffsetV3,e._tempRotationQua,e._tempTitlingV3,this._matrix);},o.cloneTo=function(t){t._matrix=this._matrix.clone(),t._offset=this._offset.clone(),t._rotation=this._rotation,t._tiling=this._tiling.clone();},o.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},a(0,o,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix;}),a(0,o,"tiling",function(){return this._tiling;},function(t){this._tiling=t,this._matNeedUpdte=!0;}),a(0,o,"offset",function(){return this._offset;},function(t){this._offset=t,this._matNeedUpdte=!0;}),a(0,o,"rotation",function(){return this._rotation;},function(t){this._rotation=t,this._matNeedUpdte=!0;}),i(e,["_tempOffsetV3",function(){return this._tempOffsetV3=new Re(0,0,0);},"_tempRotationQua",function(){return this._tempRotationQua=new Pe();},"_tempTitlingV3",function(){return this._tempTitlingV3=new Re(1,1,1);}]);}(),function(t){function e(){e.__super.call(this);}
return r(e,"laya.d3.utils.CollisionManager",g),e._onTrigger=function(t,e,n,i,r){var a=0,o=0,s=t.id,l=e.id;if(!t._ignoreCollisonMap[l]){var u=Ke.collisionManager,h=t._runtimeCollisonTestMap[l];if(null!=h){if(h){if(t._collisonTo(e)){if(t._runtimeCollisonMap[l]){for(a=0,o=n.length;a<o;a++){n[a].onTriggerStay(e);}
for(a=0,o=i.length;a<o;a++){i[a].onTriggerStay(t);}
u.event("triggerstay",[t,e]);}else{for(t._runtimeCollisonMap[l]=e,t._runtimeCollisonTestMap[l]=!1,e._runtimeCollisonMap[s]=t,r&&(e._runtimeCollisonTestMap[s]=!1),a=0,o=n.length;a<o;a++){n[a].onTriggerEnter(e);}
for(a=0,o=i.length;a<o;a++){i[a].onTriggerEnter(t);}
u.event("triggerenter",[t,e]);}}else{var c=t._runtimeCollisonMap;if(c[l]){for(delete c[l],delete t._runtimeCollisonTestMap[l],delete e._runtimeCollisonMap[s],r&&delete e._runtimeCollisonTestMap[s],a=0,o=n.length;a<o;a++){n[a].onTriggerExit(e);}
for(a=0,o=i.length;a<o;a++){i[a].onTriggerExit(t);}
u.event("triggerexit",[t,e]);}}}else{for(a=0,o=n.length;a<o;a++){n[a].onTriggerStay(e);}
for(a=0,o=i.length;a<o;a++){i[a].onTriggerStay(t);}
u.event("triggerstay",[t,e]);}}else if(t._collisonTo(e)){for(t._runtimeCollisonMap[l]=e,t._runtimeCollisonTestMap[l]=!1,e._runtimeCollisonMap[s]=t,r&&(e._runtimeCollisonTestMap[s]=!1),a=0,o=n.length;a<o;a++){n[a].onTriggerEnter(e);}
for(a=0,o=i.length;a<o;a++){i[a].onTriggerEnter(t);}
u.event("triggerenter",[t,e]);}}},e._triggerCollision=function(){for(var t=z._collsionTestList,n=t.length,i=Ke._layerCollsionMatrix,r=0;r<t.length;r++){if(a=t[r])for(var a=t[r],o=z.getLayerByNumber(a),s=o._colliders,l=o._nonRigidbodyOffset,u=n-1;u>=r;u--){var h=t[u];if(i[a][30-h]){var c,_,f,d=0,p=0,m=0,g=0,y=z.getLayerByNumber(h),v=y._colliders,I=y._nonRigidbodyOffset;if(o!==y){for(d=0;d<l;d++){if((c=s[d]).enable){for(f=c.owner._scripts,m=0,g=I;m<g;m++){(_=v[m]).enable&&e._onTrigger(c,_,f,_.owner._scripts,!0);}
for(m=I,g=v.length;m<g;m++){(_=v[m]).enable&&e._onTrigger(c,_,f,_.owner._scripts,!1);}}}
for(d=l,p=s.length;d<p;d++){if((c=s[d]).enable)for(f=c.owner._scripts,m=0,g=y._nonRigidbodyOffset;m<g;m++){(_=v[m]).enable&&e._onTrigger(_,c,f,_.owner._scripts,!1);}}}else for(d=0;d<l;d++){if((c=s[d]).enable){for(f=c.owner._scripts,m=d+1,g=l;m<g;m++){(_=v[m]).enable&&e._onTrigger(c,_,f,_.owner._scripts,!0);}
for(m=l,g=s.length;m<g;m++){(_=v[m]).enable&&e._onTrigger(c,_,f,_.owner._scripts,!1);}}}}}}},e;}()),an=(function(t){function e(){e.__super.call(this);}
r(e,"laya.d3.core.glitter.SplineCurvePosition",t);var n=e.prototype;n._CalcVelocity=function(t,e,n){Re.subtract(t,e,n),Re.scale(n,.5,n);},n.Init=function(e,n,i,r){this._CalcVelocity(n,e,this._tempVector30),this._CalcVelocity(r,i,this._tempVector31),t.prototype.Init.call(this,n,this._tempVector30,r,this._tempVector31);};}(k),function(t){function e(){this.x=NaN,this.y=NaN,this.z=NaN,e.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1;}
r(e,"laya.d3.core.particleShuriKen.module.shape.BoxShape",t);var n=e.prototype;return n._getShapeBoundBox=function(t){var e=t.min.elements;e[0]=.5*-this.x,e[1]=.5*-this.y,e[2]=.5*-this.z;var n=t.max.elements;n[0]=.5*this.x,n[1]=.5*this.y,n[2]=.5*this.z;},n._getSpeedBoundBox=function(t){var e=t.min.elements;e[0]=0,e[1]=0,e[2]=0;var n=t.max.elements;n[0]=0,n[1]=1,n[2]=0;},n.generatePositionAndDirection=function(t,e,n,i){var r=t.elements,a=e.elements;n?(n.seed=i[16],it._randomPointInsideHalfUnitBox(t,n),i[16]=n.seed):it._randomPointInsideHalfUnitBox(t),r[0]=this.x*r[0],r[1]=this.y*r[1],r[2]=this.z*r[2],this.randomDirection?n?(n.seed=i[17],it._randomPointUnitSphere(e,n),i[17]=n.seed):it._randomPointUnitSphere(e):(a[0]=0,a[1]=0,a[2]=1);},n.cloneTo=function(e){t.prototype.cloneTo.call(this,e);var n=e;n.x=this.x,n.y=this.y,n.z=this.z,n.randomDirection=this.randomDirection;},e;}(nt)),on=function(t){function e(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,e.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1;}
r(e,"laya.d3.core.particleShuriKen.module.shape.CircleShape",t);var n=e.prototype;return n._getShapeBoundBox=function(t){var e=t.min.elements;e[0]=e[2]=-this.radius,e[1]=0;var n=t.max.elements;n[0]=n[2]=this.radius,n[1]=0;},n._getSpeedBoundBox=function(t){var e=t.min.elements;e[0]=e[1]=-1,e[2]=0;var n=t.max.elements;n[0]=n[1]=1,n[2]=0;},n.generatePositionAndDirection=function(t,n,i,r){var a=t.elements,o=e._tempPositionPoint.elements;i?(i.seed=r[16],this.emitFromEdge?it._randomPointUnitArcCircle(this.arc,e._tempPositionPoint,i):it._randomPointInsideUnitArcCircle(this.arc,e._tempPositionPoint,i),r[16]=i.seed):this.emitFromEdge?it._randomPointUnitArcCircle(this.arc,e._tempPositionPoint):it._randomPointInsideUnitArcCircle(this.arc,e._tempPositionPoint),a[0]=-o[0],a[1]=o[1],a[2]=0,Re.scale(t,this.radius,t),this.randomDirection?i?(i.seed=r[17],it._randomPointUnitSphere(n,i),r[17]=i.seed):it._randomPointUnitSphere(n):t.cloneTo(n);},n.cloneTo=function(e){t.prototype.cloneTo.call(this,e);var n=e;n.radius=this.radius,n.arc=this.arc,n.emitFromEdge=this.emitFromEdge,n.randomDirection=this.randomDirection;},i(e,["_tempPositionPoint",function(){return this._tempPositionPoint=new Oe();}]),e;}(nt),sn=function(t){function e(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,e.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1;}
r(e,"laya.d3.core.particleShuriKen.module.shape.ConeShape",t);var n=e.prototype;return n._getShapeBoundBox=function(t){var e=this.radius+this.length*Math.sin(this.angle),n=this.length*Math.cos(this.angle),i=t.min.elements;i[0]=i[1]=-e,i[2]=0;var r=t.max.elements;r[0]=r[1]=e,r[2]=n;},n._getSpeedBoundBox=function(t){var e=Math.sin(this.angle),n=t.min.elements;n[0]=n[1]=-e,n[2]=0;var i=t.max.elements;i[0]=n[1]=e,i[2]=1;},n.generatePositionAndDirection=function(t,n,i,r){var a,o=t.elements,s=n.elements,l=e._tempPositionPoint.elements,u=NaN,h=NaN,c=Math.cos(this.angle),_=Math.sin(this.angle);switch(this.emitType){case 0:i?(i.seed=r[16],it._randomPointInsideUnitCircle(e._tempPositionPoint,i),r[16]=i.seed):it._randomPointInsideUnitCircle(e._tempPositionPoint),u=l[0],h=l[1],o[0]=u*this.radius,o[1]=h*this.radius,o[2]=0,this.randomDirection?(i?(i.seed=r[17],it._randomPointInsideUnitCircle(e._tempDirectionPoint,i),r[17]=i.seed):it._randomPointInsideUnitCircle(e._tempDirectionPoint),a=e._tempDirectionPoint.elements,s[0]=a[0]*_,s[1]=a[1]*_):(s[0]=u*_,s[1]=h*_),s[2]=c;break;case 1:i?(i.seed=r[16],it._randomPointUnitCircle(e._tempPositionPoint,i),r[16]=i.seed):it._randomPointUnitCircle(e._tempPositionPoint),u=l[0],h=l[1],o[0]=u*this.radius,o[1]=h*this.radius,o[2]=0,this.randomDirection?(i?(i.seed=r[17],it._randomPointInsideUnitCircle(e._tempDirectionPoint,i),r[17]=i.seed):it._randomPointInsideUnitCircle(e._tempDirectionPoint),a=e._tempDirectionPoint.elements,s[0]=a[0]*_,s[1]=a[1]*_):(s[0]=u*_,s[1]=h*_),s[2]=c;break;case 2:i?(i.seed=r[16],it._randomPointInsideUnitCircle(e._tempPositionPoint,i)):it._randomPointInsideUnitCircle(e._tempPositionPoint),u=l[0],h=l[1],o[0]=u*this.radius,o[1]=h*this.radius,o[2]=0,s[0]=u*_,s[1]=h*_,s[2]=c,Re.normalize(n,n),i?(Re.scale(n,this.length*i.getFloat(),n),r[16]=i.seed):Re.scale(n,this.length*Math.random(),n),Re.add(t,n,t),this.randomDirection&&(i?(i.seed=r[17],it._randomPointUnitSphere(n,i),r[17]=i.seed):it._randomPointUnitSphere(n));break;case 3:i?(i.seed=r[16],it._randomPointUnitCircle(e._tempPositionPoint,i)):it._randomPointUnitCircle(e._tempPositionPoint),u=l[0],h=l[1],o[0]=u*this.radius,o[1]=h*this.radius,o[2]=0,s[0]=u*_,s[1]=h*_,s[2]=c,Re.normalize(n,n),i?(Re.scale(n,this.length*i.getFloat(),n),r[16]=i.seed):Re.scale(n,this.length*Math.random(),n),Re.add(t,n,t),this.randomDirection&&(i?(i.seed=r[17],it._randomPointUnitSphere(n,i),r[17]=i.seed):it._randomPointUnitSphere(n));break;default:throw new Error("ConeShape:emitType is invalid.");}},n.cloneTo=function(e){t.prototype.cloneTo.call(this,e);var n=e;n.angle=this.angle,n.radius=this.radius,n.length=this.length,n.emitType=this.emitType,n.randomDirection=this.randomDirection;},i(e,["_tempPositionPoint",function(){return this._tempPositionPoint=new Oe();},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new Oe();}]),e;}(nt),ln=function(t){function e(){this.radius=NaN,this.emitFromShell=!1,e.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1;}
r(e,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",t);var n=e.prototype;return n._getShapeBoundBox=function(t){var e=t.min.elements;e[0]=e[1]=e[2]=-this.radius;var n=t.max.elements;n[0]=n[1]=this.radius,n[2]=0;},n._getSpeedBoundBox=function(t){var e=t.min.elements;e[0]=e[1]=-1,e[2]=0;var n=t.max.elements;n[0]=n[1]=n[2]=1;},n.generatePositionAndDirection=function(t,e,n,i){var r=t.elements;n?(n.seed=i[16],this.emitFromShell?it._randomPointUnitSphere(t,n):it._randomPointInsideUnitSphere(t,n),i[16]=n.seed):this.emitFromShell?it._randomPointUnitSphere(t):it._randomPointInsideUnitSphere(t),Re.scale(t,this.radius,t);var a=r[2];a<0&&(r[2]=-1*a),this.randomDirection?n?(n.seed=i[17],it._randomPointUnitSphere(e,n),i[17]=n.seed):it._randomPointUnitSphere(e):t.cloneTo(e);},n.cloneTo=function(e){t.prototype.cloneTo.call(this,e);var n=e;n.radius=this.radius,n.emitFromShell=this.emitFromShell,n.randomDirection=this.randomDirection;},e;}(nt),un=function(t){function e(){this.radius=NaN,this.emitFromShell=!1,e.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1;}
r(e,"laya.d3.core.particleShuriKen.module.shape.SphereShape",t);var n=e.prototype;return n._getShapeBoundBox=function(t){var e=t.min.elements;e[0]=e[1]=e[2]=-this.radius;var n=t.max.elements;n[0]=n[1]=n[2]=this.radius;},n._getSpeedBoundBox=function(t){var e=t.min.elements;e[0]=e[1]=e[2]=-1;var n=t.max.elements;n[0]=n[1]=n[2]=1;},n.generatePositionAndDirection=function(t,e,n,i){n?(n.seed=i[16],this.emitFromShell?it._randomPointUnitSphere(t,n):it._randomPointInsideUnitSphere(t,n),i[16]=n.seed):this.emitFromShell?it._randomPointUnitSphere(t):it._randomPointInsideUnitSphere(t),Re.scale(t,this.radius,t),this.randomDirection?n?(n.seed=i[17],it._randomPointUnitSphere(e,n),i[17]=n.seed):it._randomPointUnitSphere(e):t.cloneTo(e);},n.cloneTo=function(e){t.prototype.cloneTo.call(this,e);var n=e;n.radius=this.radius,n.emitFromShell=this.emitFromShell,n.randomDirection=this.randomDirection;},e;}(nt),hn=function(t){function e(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,e.__super.call(this);}
return r(e,"laya.d3.core.render.SubMeshRenderElement",ht),e;}(),cn=function(t){function e(t,n,i,r,a,o){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=t,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[ke.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[_i.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[_i.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[vi.SHADERDEFINE_BONE]="BONE",this._materialInt2name[gn.SHADERDEFINE_ALPHATEST]="ALPHATEST";e.__super.call(this,t,n,i,null,{}),this._attributeMap=r;var s;for(s in a){var l=a[s];switch(l[1]){case 0:this._renderElementUniformMap[s]=l[0];break;case 1:this._materialUniformMap[s]=l[0];break;case 2:this._spriteUniformMap[s]=l[0];break;case 3:this._cameraUniformMap[s]=l[0];break;case 4:this._sceneUniformMap[s]=l[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.");}}}
r(e,"laya.d3.shader.ShaderCompile3D",C);var n=e.prototype;return n._definesToNameDic=function(t,e){for(var n={},i=1,r=0;r<32&&!((i=1<<r)>t);r++){if(t&i){var a=e[i];a&&(n[a]="");}}
return n;},n.withCompile=function(t,n,i){var r,a,o;if(a=this.sharders[t]){if(o=a[n]){if(r=o[i])return r;}else o=a[n]=[];}else o=(a=this.sharders[t]=[])[n]=[];var s,l=this._definesToNameDic(t,e._globalInt2name),u=this._definesToNameDic(n,this._spriteInt2name),h=this._definesToNameDic(i,this._materialInt2name);if(laya.d3.shader.ShaderCompile3D.debugMode){var c="";for(s in l){c+=s+" ";}
var _="";for(s in u){_+=s+" ";}
var f="";for(s in h){f+=s+" ";}
console.log("ShaderCompile3DDebugMode---(Name:"+Un.nameKey.getName(this._name)+" PublicDefine:"+t+" SpriteDefine:"+n+" MaterialDefine:"+i+" PublicDefineGroup:"+c+" SpriteDefineGroup:"+_+"MaterialDefineGroup: "+f+")---ShaderCompile3DDebugMode");}
var d={},p="";if(l)for(s in l){p+="#define "+s+"\n",d[s]=!0;}
if(u)for(s in u){p+="#define "+s+"\n",d[s]=!0;}
if(h)for(s in h){p+="#define "+s+"\n",d[s]=!0;}
var m=this._VS.toscript(d,[]),g=this._PS.toscript(d,[]);return r=Un.create(p+m.join("\n"),p+g.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap),o[i]=r,r;},n.precompileShaderWithShaderDefine=function(t,e,n){this.withCompile(t,e,n);},n.addMaterialDefines=function(t){var e=t.defines;for(var n in e){var i=e[n],r=parseInt(n);this._materialInt2name[r]=i,this._materialName2Int[i]=r;}},n.addSpriteDefines=function(t){var e=t.defines;for(var n in e){var i=e[n],r=parseInt(n);this._spriteInt2name[r]=i,this._spriteName2Int[i]=r;}},n.getMaterialDefineByName=function(t){return this._materialName2Int[t];},n.registerMaterialDefine=function(t){var e=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[e]=t,this._materialName2Int[t]=e,e;},n.registerSpriteDefine=function(t){var e=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[e]=t,this._spriteName2Int[t]=e,e;},e._globalRegDefine=function(t,n){e._globalInt2name[n]=t;},e.add=function(t,n,i,r,a){return laya.d3.shader.ShaderCompile3D._preCompileShader[t]=new e(t,n,i,r,a,C.includes);},e.get=function(t){return laya.d3.shader.ShaderCompile3D._preCompileShader[Un.nameKey.getID(t)];},e._preCompileShader={},e._globalInt2name=[],e.debugMode=!1,e.SHADERDEFINE_HIGHPRECISION=1,e.SHADERDEFINE_FOG=4,e.SHADERDEFINE_DIRECTIONLIGHT=8,e.SHADERDEFINE_POINTLIGHT=16,e.SHADERDEFINE_SPOTLIGHT=32,e.SHADERDEFINE_UV0=64,e.SHADERDEFINE_COLOR=128,e.SHADERDEFINE_UV1=256,e.SAHDERDEFINE_DEPTHFOG=131072,e;}(),_n=function(t){function e(){e.__super.call(this);}
r(e,"laya.d3.graphics.MeshSprite3DStaticBatchManager",bt);var n=e.prototype;return n._getStaticBatch=function(t,e,n,i){var r,a;return a=t?t.id.toString()+n.id.toString()+e.id.toString()+i.toString():n.id.toString()+e.id.toString()+i.toString(),this._staticBatches[a]?r=this._staticBatches[a]:this._staticBatches[a]=r=new fn(a,this,t,e,n),r;},n._initStaticBatchs=function(t){this._initBatchRenderElements.sort(e._sortPrepareStaticBatch);for(var n,i,r,a=!1,o=0,s=0,l=this._initBatchRenderElements.length;s<l;s++){var u=this._initBatchRenderElements[s],h=u.renderObj._getVertexBuffer(0);u._sprite3D;if(i===h.vertexDeclaration&&n===u._material){var c;if(a)r._addCombineBatchRenderObjTest(u)?(c=u._staticBatch)!==r&&(c&&c._deleteCombineBatchRenderObj(u),r._addCombineBatchRenderObj(u)):(a=!1,o++);else{var _=this._initBatchRenderElements[s-1],f=_.renderObj,d=u.renderObj;f._getVertexBuffer().vertexCount+d._getVertexBuffer().vertexCount>65535?a=!1:(r=this._getStaticBatch(t,i,n,o),(c=_._staticBatch)!==r&&(c&&c._deleteCombineBatchRenderObj(_),r._addCombineBatchRenderObj(_)),(c=u._staticBatch)!==r&&(c&&c._deleteCombineBatchRenderObj(u),r._addCombineBatchRenderObj(u)),a=!0);}}else a=!1,o=0;n=u._material,i=h.vertexDeclaration;}},e._sortPrepareStaticBatch=function(t,e){var n=t._render,i=e._render,r=n.lightmapIndex-i.lightmapIndex;if(0===r){var a=n.receiveShadow-i.receiveShadow;if(0===a){var o=t._mainSortID-e._mainSortID;return 0===o?t.renderObj.triangleCount-e.renderObj.triangleCount:o;}
return a;}
return r;},e;}(),fn=function(t){function e(t,n,i,r,a){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,e.__super.call(this,t,n,i),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=r,this._material=a;}
r(e,"laya.d3.graphics.SubMeshStaticBatch",wt);var n=e.prototype;return n._compareBatchRenderElement=function(t,e){return t._batchIndexStart>e._batchIndexStart;},n._addCombineBatchRenderObjTest=function(t){var e=t.renderObj._vertexCount;return!((e>0?this._currentCombineVertexCount+e:this._currentCombineVertexCount+t.renderObj._getVertexBuffer().vertexCount)>65535);},n._addCombineBatchRenderObj=function(t){var e=t.renderObj,n=e._vertexCount;this._initBatchRenderElements.push(t),t._staticBatch=this,n>0?(this._currentCombineIndexCount+=e._indexCount,this._currentCombineVertexCount+=n):(this._currentCombineIndexCount=this._currentCombineIndexCount+e._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+e._getVertexBuffer().vertexCount),this._needFinishCombine=!0;},n._deleteCombineBatchRenderObj=function(t){var e=t.renderObj,n=this._initBatchRenderElements.indexOf(t);if(-1!==n){this._initBatchRenderElements.splice(n,1),t._staticBatch=null;var i=e._vertexCount;i>0?(this._currentCombineIndexCount=this._currentCombineIndexCount-e._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-i):(this._currentCombineIndexCount=this._currentCombineIndexCount-e._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-e._getVertexBuffer().vertexCount),this._needFinishCombine=!0;}},n._finishInit=function(){if(this._needFinishCombine){var t=0,e=0;this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex>=0?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var n=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),i=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=qn.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=Yn.create("ushort",this._currentCombineIndexCount,35044);for(var r=0,a=this._initBatchRenderElements.length;r<a;r++){var o=this._initBatchRenderElements[r],s=o.renderObj,l=s._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,o._sprite3D),u=s.getIndices(),h=o._sprite3D.transform._isFrontFaceInvert,c=t/(this._vertexDeclaration.vertexStride/4)-s._vertexStart,_=e,f=_+u.length;o._batchIndexStart=_,o._batchIndexEnd=f,i.set(u,e);var d=0;if(h)for(d=_;d<f;d+=3){i[d]=c+i[d];var p=i[d+1],m=i[d+2];i[d+1]=c+m,i[d+2]=c+p;}else for(d=_;d<f;d+=3){i[d]=c+i[d],i[d+1]=c+i[d+1],i[d+2]=c+i[d+2];}
e+=u.length,n.set(l,t),t+=l.length;}
this._vertexBuffer.setData(n),this._indexBuffer.setData(i),this._needFinishCombine=!1;}},n._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new hn());},n._getRenderElement=function(t,e,n){for(var i,r,a=this._batchRenderElements.length,o=!0,s=0;s<a;s++){var l,u=(r=this._batchRenderElements[s])._sprite3D._render;0!==s&&(o=(l=(i=this._batchRenderElements[s-1])._sprite3D._render).lightmapIndex!==u.lightmapIndex||l.receiveShadow!==u.receiveShadow||i._batchIndexEnd!==r._batchIndexStart);var h;if(o){(h=this._getCombineRenderElementFromPool()).renderObj=this,h._material=this._material,h._batchIndexStart=r._batchIndexStart,h._batchIndexEnd=r._batchIndexEnd;var c=u.lightmapIndex,_=c+1,f=this._batchOwnerIndices[_];f||(f=this._batchOwnerIndices[_]=[]);var d,p=f[r._render.receiveShadow?1:0];void 0===p?(f[u.receiveShadow?1:0]=this._batchOwners.length,(d=new gi(null,"StaticBatchMeshSprite3D"))._scene=e,d._transform=this._rootOwner?this._rootOwner._transform:null,d._render.lightmapIndex=c,d._render.receiveShadow=r._render.receiveShadow,this._batchOwners.push(d)):d=this._batchOwners[p],d._render._renderUpdate(n),h._sprite3D=d,t.push(h);}else h._batchIndexEnd=r._batchIndexEnd;}},n._beforeRender=function(t){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0;},n._render=function(t){var e=t.renderElement,n=e._batchIndexStart,i=e._batchIndexEnd-n;R.mainContext.drawElements(4,i,5123,2*n),P.drawCall++,P.trianglesFaces+=i/3;},n.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy();},n._getVertexBuffer=function(t){return void 0===t&&(t=0),this._vertexBuffer;},e;}(),dn=(function(t){function e(){e.__super.call(this),e._nameNumber++,this.loadShaderParams(),this.createResource(),this.alphaBlending=1,this.colorIntensity=1;}
r(e,"laya.d3.resource.models.SkyBox",t);var n=e.prototype;n._getShader=function(t){var e=t.scene._shaderDefineValue;return this._shader=this._shaderCompile.withCompile(e,0,0),this._shader;},n.createResource=function(){this._numberVertices=36,this._numberIndices=36;var t=new Uint16Array(this._numberIndices),n=e._vertexDeclaration.vertexStride/4,i=new Float32Array(this._numberVertices*n),r=new Re(-.5,.5,.5),a=new Re(-.5,-.5,.5),o=new Re(.5,.5,.5),s=new Re(.5,-.5,.5),l=new Re(-.5,.5,-.5),u=new Re(.5,.5,-.5),h=new Re(-.5,-.5,-.5),c=new Re(.5,-.5,-.5),_=0;_=this._addVertex(i,_,r),_=this._addVertex(i,_,a),_=this._addVertex(i,_,o),_=this._addVertex(i,_,a),_=this._addVertex(i,_,s),_=this._addVertex(i,_,o),_=this._addVertex(i,_,l),_=this._addVertex(i,_,u),_=this._addVertex(i,_,h),_=this._addVertex(i,_,h),_=this._addVertex(i,_,u),_=this._addVertex(i,_,c),_=this._addVertex(i,_,r),_=this._addVertex(i,_,u),_=this._addVertex(i,_,l),_=this._addVertex(i,_,r),_=this._addVertex(i,_,o),_=this._addVertex(i,_,u),_=this._addVertex(i,_,a),_=this._addVertex(i,_,h),_=this._addVertex(i,_,c),_=this._addVertex(i,_,a),_=this._addVertex(i,_,c),_=this._addVertex(i,_,s),_=this._addVertex(i,_,r),_=this._addVertex(i,_,h),_=this._addVertex(i,_,a),_=this._addVertex(i,_,l),_=this._addVertex(i,_,h),_=this._addVertex(i,_,r),_=this._addVertex(i,_,o),_=this._addVertex(i,_,s),_=this._addVertex(i,_,c),_=this._addVertex(i,_,u),_=this._addVertex(i,_,o),_=this._addVertex(i,_,c);for(var f=0;f<36;f++){t[f]=f;}
this._vertexBuffer=new qn(e._vertexDeclaration,this._numberVertices,35044,!0),this._indexBuffer=new Yn("ushort",this._numberIndices,35044,!0),this._vertexBuffer.setData(i),this._indexBuffer.setData(t);},n._addVertex=function(t,e,n){var i=n.elements;return t[e+0]=i[0],t[e+1]=i[1],t[e+2]=i[2],e+3;},n.loadShaderParams=function(){this._sharderNameID=Un.nameKey.getID("SkyBox"),this._shaderCompile=cn._preCompileShader[this._sharderNameID];},n._render=function(t){this._textureCube&&this._textureCube.loaded&&(this._vertexBuffer._bind(),this._indexBuffer._bind(),this._shader=this._getShader(t),this._shader.bind(),t.camera.transform.worldMatrix.cloneTo(e._tempMatrix4x40),e._tempMatrix4x40.transpose(),De.multiply(t._projectionMatrix,e._tempMatrix4x40,e._tempMatrix4x41),t.camera._shaderValues.setValue(4,e._tempMatrix4x41.elements),this._shader.uploadCameraUniforms(t.camera._shaderValues.data),this._shaderValue.setValue(1,this._colorIntensity),this._shaderValue.setValue(2,this._alphaBlending),this._shaderValue.setValue(3,this.textureCube),this._shader.uploadAttributes(e._vertexDeclaration.shaderValues.data,null),this._shader.uploadMaterialUniforms(this._shaderValue.data),R.mainContext.drawElements(4,36,5123,0),P.trianglesFaces+=12,P.drawCall++);},n.destroy=function(){t.prototype.destroy.call(this),this._textureCube&&(this._textureCube._removeReference(),this._textureCube=null);},a(0,n,"textureCube",function(){return this._textureCube;},function(t){this._textureCube!==t&&(this._textureCube&&this._textureCube._removeReference(),this._textureCube=t,t&&t._addReference());}),e._nameNumber=1,i(e,["_tempMatrix4x40",function(){return this._tempMatrix4x40=new De();},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new De();},"_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(12,[new Ct(0,"vector3",0)]);}]);}(Ve),function(t){function e(){this._stacks=16,this._slices=16,this._radius=1,e.__super.call(this),e._nameNumber++,this.loadShaderParams(),this.recreateResource(),this.alphaBlending=1,this.colorIntensity=1;}
r(e,"laya.d3.resource.models.SkyDome",t);var o=e.prototype;o._getShader=function(t){var e=t.scene._shaderDefineValue;return this._shader=this._shaderCompile.withCompile(e,0,0),this._shader;},o.recreateResource=function(){this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=3*this._stacks*(this._slices+1)*2;for(var t=new Uint16Array(this._numberIndices),n=e._vertexDeclaration.vertexStride/4,i=new Float32Array(this._numberVertices*n),r=Math.PI/this._stacks,a=2*Math.PI/this._slices,o=0,s=0,l=0,u=0;u<this._stacks+1;u++){for(var h=Math.sin(u*r),c=Math.cos(u*r),_=0;_<this._slices+1;_++){var f=h*Math.sin(_*a),d=h*Math.cos(_*a);i[s+0]=f*this._radius,i[s+1]=c*this._radius,i[s+2]=d*this._radius,i[s+3]=-_/this._slices+.75,i[s+4]=u/this._stacks,s+=n,u!=this._stacks-1&&(t[l++]=o+1,t[l++]=o,t[l++]=o+(this._slices+1),t[l++]=o+(this._slices+1),t[l++]=o,t[l++]=o+this._slices,o++);}}
this._vertexBuffer=new qn(e._vertexDeclaration,this._numberVertices,35044),this._indexBuffer=new Yn("ushort",this._numberIndices,35044),this._vertexBuffer.setData(i),this._indexBuffer.setData(t);},o.loadShaderParams=function(){this._sharderNameID=Un.nameKey.getID("SkyDome"),this._shaderCompile=cn._preCompileShader[this._sharderNameID];},o._render=function(t){this._texture&&this._texture.loaded&&(this._vertexBuffer._bind(),this._indexBuffer._bind(),this._shader=this._getShader(t),this._shader.bind(),t.camera.transform.worldMatrix.cloneTo(e._tempMatrix4x40),e._tempMatrix4x40.transpose(),De.multiply(t._projectionMatrix,e._tempMatrix4x40,e._tempMatrix4x41),t.camera._shaderValues.setValue(4,e._tempMatrix4x41.elements),this._shader.uploadCameraUniforms(t.camera._shaderValues.data),this._shaderValue.setValue(1,this._colorIntensity),this._shaderValue.setValue(2,this._alphaBlending),this._shaderValue.setValue(3,this.texture),this._shader.uploadAttributes(e._vertexDeclaration.shaderValues.data,null),this._shader.uploadMaterialUniforms(this._shaderValue.data),R.mainContext.drawElements(4,this._indexBuffer.indexCount,5123,0),P.trianglesFaces+=this._numberIndices/3,P.drawCall++);},o.onEnvDescLoaded=function(t){var e="",i=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));i>0&&(e=t.substr(0,i+1));var r=n.loader.getRes(t);void 0!=r.ev&&this.__ownerCamera?this.__ownerCamera._shaderValues.setValue(13,Math.pow(2,r.ev)):this.__ownerCamera._shaderValues.setValue(13,Math.pow(2,0)),this.texture=li.load(e+r.skytex),this.environmentSpecular=ni.load(e+r.prefiltedEnv);var a=new Float32Array(r.IrradianceMat);this.envDiffuseSHRed=a.slice(0,16),this.envDiffuseSHGreen=a.slice(16,32),this.envDiffuseSHBlue=a.slice(32,48);},o.loadEnvInfo=function(t){n.loader.load(t,y.create(this,this.onEnvDescLoaded,[t]));},o.destroy=function(){t.prototype.destroy.call(this),this._texture&&(this._texture._removeReference(),this._texture=null);},a(0,o,"texture",function(){return this._texture;},function(t){this._texture!==t&&(this._texture&&this._texture._removeReference(),this._texture=t,t&&t._addReference());}),e._nameNumber=1,i(e,["_tempMatrix4x40",function(){return this._tempMatrix4x40=new De();},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new De();},"_vertexDeclaration",function(){return this._vertexDeclaration=new Dt(20,[new Ct(0,"vector3",0),new Ct(12,"vector2",2)]);}]);}(Ve),function(t){function e(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,e.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[];}
r(e,"laya.d3.core.ComponentNode",T);var n=e.prototype;return n.addComponent=function(t){var e,n=this._componentsMap.indexOf(t);if(-1===n)e=[],this._componentsMap.push(t),this._typeComponentsIndices.push(e);else if(e=this._typeComponentsIndices[n],this._components[e[0]].isSingleton)throw new Error("无法单实例创建"+t+"组件，"+t+"组件已存在！");var i=p.getInstance(t);return e.push(this._components.length),this._components.push(i),i instanceof laya.d3.component.Script&&this._scripts.push(i),i._initialize(this),i;},n._removeComponent=function(t,e){var n=this._typeComponentsIndices[t],i=n[e],r=this._components[i];this._components.splice(i,1),r instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(r),1),n.splice(e,1),0===n.length&&(this._typeComponentsIndices.splice(t,1),this._componentsMap.splice(t,1));for(var a=0,o=this._componentsMap.length;a<o;a++){for(var s=(n=this._typeComponentsIndices[a]).length-1;s>=0;s--){var l=n[s];if(!(l>i))break;n[s]=--l;}}
r._destroy();},n.getComponentByType=function(t,e){void 0===e&&(e=0);var n=this._componentsMap.indexOf(t);return-1===n?null:this._components[this._typeComponentsIndices[n][e]];},n.getComponentsByType=function(t,e){var n=this._componentsMap.indexOf(t);if(-1!==n){var i=this._typeComponentsIndices[n],r=i.length;e.length=r;for(var a=0;a<r;a++){e[a]=this._components[i[a]];}}else e.length=0;},n.getComponentByIndex=function(t){return this._components[t];},n.removeComponentByType=function(t,e){void 0===e&&(e=0);var n=this._componentsMap.indexOf(t);-1!==n&&this._removeComponent(n,e);},n.removeComponentsByType=function(t){var e=this._componentsMap.indexOf(t);if(-1!==e)for(var n=this._typeComponentsIndices[e],i=0,r=n.length;i<r;n.length<r?r--:i++){this._removeComponent(e,i);}},n.removeAllComponent=function(){for(var t=0,e=this._componentsMap.length;t<e;this._componentsMap.length<e?e--:t++){this.removeComponentsByType(this._componentsMap[t]);}},n._updateComponents=function(t){for(var e=0,n=this._components.length;e<n;e++){var i=this._components[e];!i.started&&(i._start(t),i.started=!0),i.enable&&i._update(t);}},n._lateUpdateComponents=function(t){for(var e=0;e<this._components.length;e++){var n=this._components[e];!n.started&&(n._start(t),n.started=!0),n.enable&&n._lateUpdate(t);}},n._preRenderUpdateComponents=function(t){for(var e=0;e<this._components.length;e++){var n=this._components[e];!n.started&&(n._start(t),n.started=!0),n.enable&&n._preRenderUpdate(t);}},n._postRenderUpdateComponents=function(t){for(var e=0;e<this._components.length;e++){var n=this._components[e];!n.started&&(n._start(t),n.started=!0),n.enable&&n._postRenderUpdate(t);}},e;}()),pn=function(t){function e(){this._realTimeCurrentFrameIndexes=null,this._realTimeCurrentTimes=null,this._fullKeyframeIndicesCache=null,this._animationDatasCache=null,this._avatarDatasCache=null,this._skinnedDatasCache=null,this._version=null,this._nodes=null,this._nodesMap=null,this._cachePropertyMap=null,this._nodeToCachePropertyMap=null,this._unCachePropertyMap=null,this._duration=NaN,this._frameRate=0,this._animationEvents=null,this._publicClipDatas=null,this.islooping=!1,e.__super.call(this),this._fullKeyframeIndicesCache={},this._animationDatasCache=[],this._avatarDatasCache=[],this._skinnedDatasCache=[],this._animationEvents=[];}
r(e,"laya.d3.animation.AnimationClip",w);var i=e.prototype;return i.duration=function(){return this._duration;},i._hermiteInterpolate=function(t,e,n,i){for(var r=t.data,a=t.outTangent,o=t.next,s=o.data,l=o.inTangent,u=!1,h=NaN,c=NaN,_=NaN,f=NaN,d=0,p=i.length;d<p;d++){var m=a[d],g=l[d];if(Number.isFinite(m)&&Number.isFinite(g)){if(!u){var y=e*e,v=y*e;h=2*v-3*y+1,c=v-2*y+e,_=v-y,f=-2*v+3*y,u=!0;}
i[d]=h*r[d]+c*m*n+_*g*n+f*s[d];}else i[d]=r[d];}},i._getFullKeyframeIndicesWithCache=function(t){return this._fullKeyframeIndicesCache[t];},i._cacheFullKeyframeIndices=function(t,e){this._fullKeyframeIndicesCache[t]=e;},i._getAnimationDataWithCache=function(t,e){var n=this._animationDatasCache[t];return n?n[e]:null;},i._cacheAnimationData=function(t,e,n){(this._animationDatasCache[t]||(this._animationDatasCache[t]=[]))[e]=n;},i._getAvatarDataWithCache=function(t,e,n){var i=this._avatarDatasCache[t.id];if(i){var r=i[e];return r?r[n]:null;}
return null;},i._cacheAvatarData=function(t,e,n,i){var r=this._avatarDatasCache[t.id]||(this._avatarDatasCache[t.id]=[]);(r[e]||(r[e]=[]))[n]=i;},i._evaluateAnimationlDatasCacheMode=function(t,e,n,i,r){for(var a=0,o=0,s=0,l=r?r.length:this._nodes.length;s<l;s++){var u=r?r[s]:s,h=this._nodes[u],c=h._cacheProperty;if(t[u]){var _,f=e[u],d=f[n.currentFrameIndex],p=0;if(-1!==d){var m=h.keyFrames[d];if(m.next){r&&!c?(_=i[u])||(_=i[u]=new Float32Array(h.keyFrameWidth)):(_=new Float32Array(h.keyFrameWidth),i[s]=_);var g=NaN,y=m.duration;g=0!==y?(n.currentFrameTime-m.startTime)/y:0,this._hermiteInterpolate(m,g,y,_);}else{if(r&&!c)(_=i[u])||(_=i[u]=new Float32Array(h.keyFrameWidth));else{if(-1!==(p=n._lastFrameIndex)&&f[p]===d)continue;_=new Float32Array(h.keyFrameWidth),i[s]=_;}
var v=m.data;for(a=0,o=_.length;a<o;a++){_[a]=v[a];}}}else{if(r&&!c)(_=i[u])||(_=i[u]=new Float32Array(h.keyFrameWidth));else{if(-1!==(p=n._lastFrameIndex)&&f[p]===d)continue;_=new Float32Array(h.keyFrameWidth),i[s]=_;}
var I=h.keyFrames[0].data;for(a=0,o=_.length;a<o;a++){_[a]=I[a];}}}}},i._evaluateAnimationlDatasRealTime=function(t,e,n,i){var r=0,a=0,o=this._nodes;if(!this._realTimeCurrentFrameIndexes){for(this._realTimeCurrentFrameIndexes=new Int32Array(o.length),r=0,a=o.length;r<a;r++){this._realTimeCurrentFrameIndexes[r]=-1;}
this._realTimeCurrentTimes=new Float32Array(o.length);}
for(r=0,a=i?i.length:this._nodes.length;r<a;r++){var s=i?i[r]:r,l=o[s];e<this._realTimeCurrentTimes[s]&&(this._realTimeCurrentFrameIndexes[s]=-1),this._realTimeCurrentTimes[s]=e;for(var u=this._realTimeCurrentFrameIndexes[s]+1,h=l.keyFrames,c=h.length;u<c;){if(h[u].startTime>e){this._realTimeCurrentFrameIndexes[s]=u-1;break;}
u++;}
u===c&&(this._realTimeCurrentFrameIndexes[s]=c-1);var _=0,f=0,d=n[s];d||(d=n[s]=new Float32Array(l.keyFrameWidth));var p=h[this._realTimeCurrentFrameIndexes[s]];if(p){if(p.next){var m=p.duration,g=NaN;g=0!==m?(e-p.startTime)/m:0,this._hermiteInterpolate(p,g,m,d);}else{var y=p.data;for(_=0,f=d.length;_<f;_++){d[_]=y[_];}}}else{var v=l.keyFrames[0].data;for(_=0,f=d.length;_<f;_++){d[_]=v[_];}}
var I=t[s];I&&(i?U._propertySetFuncs[l.propertyNameID](I,null,d):U._propertySetFuncs[l.propertyNameID](null,I,d));}},i._binarySearchEventIndex=function(t){for(var e=0,n=this._animationEvents.length-1,i=0;e<=n;){i=Math.floor((e+n)/2);var r=this._animationEvents[i].time;if(r==t)return i;r>t?n=i-1:e=i+1;}
return e;},i.addEvent=function(t){var e=this._binarySearchEventIndex(t.time);this._animationEvents.splice(e,0,t);},i.onAsynLoaded=function(t,e,n){var i=new d(e);switch(this._version=i.readUTFString(),this._version){case "LAYAANIMATION:01":F.parse(this,i);break;case "LAYAANIMATION:02":V.parse(this,i);}
this.completeCreate(),this._endLoaded();},i.disposeResource=function(){this._realTimeCurrentFrameIndexes=null,this._realTimeCurrentTimes=null,this._fullKeyframeIndicesCache=null,this._animationDatasCache=null,this._avatarDatasCache=null,this._skinnedDatasCache=null,this._version=null,this._nodes=null,this._nodesMap=null,this._cachePropertyMap=null,this._nodeToCachePropertyMap=null,this._unCachePropertyMap=null,this._publicClipDatas=null;},e.load=function(t){return n.loader.create(t,null,null,e);},e;}(),mn=function(t){function e(){e.__super.call(this);}
r(e,"laya.d3.core.Avatar",w);var i=e.prototype;return n.imps(i,{"laya.d3.core.IClone":!0}),i._initCloneToAnimator=function(t,e){e._avatarNodeMap[t.name]=t,e._avatarNodes.push(t);for(var n=0,i=t.getChildCount();n<i;n++){this._initCloneToAnimator(t.getChildByIndex(n),e);}},i._parseNode=function(t,e){var n=t.props.name;if(e.name=n,e._parent){var i=t.customProps,r=e.transform;r._localRotationEuler=new Float32Array(3),r.setLocalPosition(new Float32Array(i.translate)),r.setLocalRotation(new Float32Array(i.rotation)),r.setLocalScale(new Float32Array(i.scale)),r._setWorldMatrixAndUpdate(new Float32Array(16));}
for(var a=t.child,o=0,s=a.length;o<s;o++){var l=a[o],u=new U();e.addChild(u),this._parseNode(l,u);}},i.onAsynLoaded=function(t,e,n){if(this._rootNode=new U(),e.version){this._version=e.version;var i=e.rootNode;i&&this._parseNode(i,this._rootNode);}else this._parseNode(e,this._rootNode);this._endLoaded();},i._cloneDatasToAnimator=function(t){var e=this._rootNode.clone();e.transform._setWorldMatrixIgnoreUpdate(null);t._avatarNodeMap={},t._avatarNodes=[],this._initCloneToAnimator(e,t);},i.cloneTo=function(t){var e=t,n=this._rootNode.clone();e._rootNode=n;},i.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},e.load=function(t){return n.loader.create(t,null,null,e);},e;}(),gn=function(t){function e(){e.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new Be(),this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new Le(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0;}
r(e,"laya.d3.core.material.BaseMaterial",t);var o=e.prototype;return n.imps(o,{"laya.d3.core.IClone":!0}),o._addShaderDefine=function(t){this._shaderDefineValue|=t;},o._removeShaderDefine=function(t){this._shaderDefineValue&=~t;},o._addDisablePublicShaderDefine=function(t){this._disablePublicShaderDefine|=t;},o._removeDisablePublicShaderDefine=function(t){this._disablePublicShaderDefine&=~t;},o._setBuffer=function(t,e){this._shaderValues.setValue(t,e),this._values[t]=e;},o._getBuffer=function(t){return this._values[t];},o._setMatrix4x4=function(t,e){this._shaderValues.setValue(t,e?e.elements:null),this._values[t]=e;},o._getMatrix4x4=function(t){return this._values[t];},o._setInt=function(t,e){this._shaderValues.setValue(t,e),this._values[t]=e;},o._getInt=function(t){return this._values[t];},o._setNumber=function(t,e){this._shaderValues.setValue(t,e),this._values[t]=e;},o._getNumber=function(t){return this._values[t];},o._setBool=function(t,e){this._shaderValues.setValue(t,e),this._values[t]=e;},o._getBool=function(t){return this._values[t];},o._setVector2=function(t,e){this._shaderValues.setValue(t,e?e.elements:null),this._values[t]=e;},o._getVector2=function(t){return this._values[t];},o._setColor=function(t,e){this._shaderValues.setValue(t,e?e.elements:null),this._values[t]=e;},o._getColor=function(t){return this._values[t];},o._setTexture=function(t,e){var n=this._values[t];this._values[t]=e,this._shaderValues.setValue(t,e),this.referenceCount>0&&(n&&n._removeReference(),e&&e._addReference());},o._getTexture=function(t){return this._values[t];},o._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data);},o._getShader=function(t,e,n){var i=(t|e)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(i,n,this._shaderDefineValue),this._shader;},o._setRenderStateBlendDepth=function(){var t=R.mainContext;switch(L.setDepthMask(t,this.depthWrite),0===this.depthTest?L.setDepthTest(t,!1):(L.setDepthTest(t,!0),L.setDepthFunc(t,this.depthTest)),this.blend){case 0:L.setBlend(t,!1);break;case 1:L.setBlend(t,!0),L.setBlendFunc(t,this.srcBlend,this.dstBlend);break;case 2:L.setBlend(t,!0);}},o._setRenderStateFrontFace=function(t,e){var n=R.mainContext,i=0;switch(this.cull){case 0:L.setCullFace(n,!1);break;case 1:L.setCullFace(n,!0),i=t?e&&e._isFrontFaceInvert?2305:2304:e&&e._isFrontFaceInvert?2304:2305,L.setFrontFace(n,i);break;case 2:L.setCullFace(n,!0),i=t?e&&e._isFrontFaceInvert?2304:2305:e&&e._isFrontFaceInvert?2305:2304,L.setFrontFace(n,i);}},o.onAsynLoaded=function(t,e,n){var i=e[0],r=e[1];switch(i.version){case "LAYAMATERIAL:01":var a=0,o=0,s=i.props;for(var l in s){switch(l){case "vectors":var u=s[l];for(a=0,o=u.length;a<o;a++){var h=u[a],c=h.value;switch(c.length){case 2:this[h.name]=new Oe(c[0],c[1]);break;case 3:this[h.name]=new Re(c[0],c[1],c[2]);break;case 4:this[h.name]=new Le(c[0],c[1],c[2],c[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.");}}
break;case "textures":var _=s[l];for(a=0,o=_.length;a<o;a++){var f=_[a],d=f.path;d&&(this[f.name]=v.getRes(r[d]));}
break;case "defines":var p=s[l];for(a=0,o=p.length;a<o;a++){var m=this._shaderCompile.getMaterialDefineByName(p[a]);this._addShaderDefine(m);}
break;case "cull":case "blend":case "srcBlend":case "dstBlend":case "depthWrite":this[l]=s[l];break;case "renderQueue":switch(s[l]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3;}
break;default:this[l]=s[l];}}
break;case "LAYAMATERIAL:02":s=i.props;for(l in s){switch(l){case "vectors":for(a=0,o=(u=s[l]).length;a<o;a++){switch(h=u[a],(c=h.value).length){case 2:this[h.name]=new Oe(c[0],c[1]);break;case 3:this[h.name]=new Re(c[0],c[1],c[2]);break;case 4:this[h.name]=new Le(c[0],c[1],c[2],c[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.");}}
break;case "textures":for(a=0,o=(_=s[l]).length;a<o;a++){(d=(f=_[a]).path)&&(this[f.name]=v.getRes(r[d]));}
break;case "defines":for(a=0,o=(p=s[l]).length;a<o;a++){m=this._shaderCompile.getMaterialDefineByName(p[a]),this._addShaderDefine(m);}
break;default:this[l]=s[l];}}
break;default:throw new Error("BaseMaterial:unkonwn version.");}
this._endLoaded();},o._addReference=function(){t.prototype._addReference.call(this);for(var e=0,n=this._values.length;e<n;e++){var i=this._values[e];i&&i instanceof laya.d3.resource.BaseTexture&&i._addReference();}},o._removeReference=function(){t.prototype._removeReference.call(this);for(var e=0,n=this._values.length;e<n;e++){var i=this._values[e];i&&i instanceof laya.d3.resource.BaseTexture&&i._removeReference();}},o.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null;for(var t=0,e=this._values.length;t<e;t++){var n=this._values[t];n&&n instanceof laya.d3.resource.BaseTexture&&n._removeReference();}
this._values=null;},o.setShaderName=function(t){var e=Un.nameKey.getID(t);if(-1===e)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=cn._preCompileShader[e];},o.cloneTo=function(t){var e=t;e.name=this.name,e.cull=this.cull,e.blend=this.blend,e.srcBlend=this.srcBlend,e.dstBlend=this.dstBlend,e.srcBlendRGB=this.srcBlendRGB,e.dstBlendRGB=this.dstBlendRGB,e.srcBlendAlpha=this.srcBlendAlpha,e.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(e.blendConstColor),e.blendEquation=this.blendEquation,e.blendEquationRGB=this.blendEquationRGB,e.blendEquationAlpha=this.blendEquationAlpha,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.renderQueue=this.renderQueue,e._shader=this._shader,e._disablePublicShaderDefine=this._disablePublicShaderDefine,e._shaderDefineValue=this._shaderDefineValue;var n=0,i=0,r=e._shaderValues;e._shaderValues.data.length=this._shaderValues.data.length;var a=this._values.length,o=e._values;for(o.length=a,n=0,i=a;n<i;n++){var s=this._values[n];if(s)if("number"==typeof s)o[n]=s,r.data[n]=s;else if("number"==typeof s&&Math.floor(s)==s)o[n]=s,r.data[n]=s;else if("boolean"==typeof s)o[n]=s,r.data[n]=s;else if(s instanceof laya.d3.math.Vector2){var l=o[n]||(o[n]=new Oe());s.cloneTo(l),r.data[n]=l.elements;}else if(s instanceof laya.d3.math.Vector3){var u=o[n]||(o[n]=new Re());s.cloneTo(u),r.data[n]=u.elements;}else if(s instanceof laya.d3.math.Vector4){var h=o[n]||(o[n]=new Le());s.cloneTo(h),r.data[n]=h.elements;}else if(s instanceof laya.d3.math.Matrix4x4){var c=o[n]||(o[n]=new De());s.cloneTo(c),r.data[n]=c.elements;}else s instanceof laya.d3.resource.BaseTexture&&(o[n]=s,r.data[n]=s);}},o.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},a(0,o,"alphaTestValue",function(){return this._getNumber(0);},function(t){this._setNumber(0,t);}),a(0,o,"alphaTest",function(){return this._alphaTest;},function(t){this._alphaTest=t,t?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST);}),e.__init__=function(){e.SHADERDEFINE_ALPHATEST=e.shaderDefines.registerDefine("ALPHATEST");},e.RENDERQUEUE_OPAQUE=2e3,e.RENDERQUEUE_ALPHATEST=2450,e.RENDERQUEUE_TRANSPARENT=3e3,e.CULL_NONE=0,e.CULL_FRONT=1,e.CULL_BACK=2,e.BLEND_DISABLE=0,e.BLEND_ENABLE_ALL=1,e.BLEND_ENABLE_SEPERATE=2,e.BLENDPARAM_ZERO=0,e.BLENDPARAM_ONE=1,e.BLENDPARAM_SRC_COLOR=768,e.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,e.BLENDPARAM_DST_COLOR=774,e.BLENDPARAM_ONE_MINUS_DST_COLOR=775,e.BLENDPARAM_SRC_ALPHA=770,e.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,e.BLENDPARAM_DST_ALPHA=772,e.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,e.BLENDPARAM_SRC_ALPHA_SATURATE=776,e.BLENDEQUATION_ADD=0,e.BLENDEQUATION_SUBTRACT=1,e.BLENDEQUATION_REVERSE_SUBTRACT=2,e.DEPTHTEST_OFF=0,e.DEPTHTEST_NEVER=512,e.DEPTHTEST_LESS=513,e.DEPTHTEST_EQUAL=514,e.DEPTHTEST_LEQUAL=515,e.DEPTHTEST_GREATER=516,e.DEPTHTEST_NOTEQUAL=517,e.DEPTHTEST_GEQUAL=518,e.DEPTHTEST_ALWAYS=519,e.SHADERDEFINE_ALPHATEST=1,e.ALPHATESTVALUE=0,i(e,["shaderDefines",function(){return this.shaderDefines=new Ue();}]),e;}(w),yn=function(t){function e(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,e.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1;}
r(e,"laya.d3.resource.BaseTexture",w);var n=e.prototype;return a(0,n,"width",function(){return this._width;}),a(0,n,"repeat",function(){return this._repeat;},function(t){if(this._repeat!==t&&(this._repeat=t,this._source)){var e=R.mainContext;L.bindTexture(e,this._type,this._source);u.isPOT(this._width,this._height)&&this._repeat?(e.texParameteri(this._type,10242,10497),e.texParameteri(this._type,10243,10497)):(e.texParameteri(this._type,10242,33071),e.texParameteri(this._type,10243,33071));}}),a(0,n,"height",function(){return this._height;}),a(0,n,"magFifter",function(){return this._magFifter;},function(t){this._magFifter=t,t!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(t);}),a(0,n,"wrapModeV",function(){return this._wrapModeV;}),a(0,n,"size",function(){return this._size;}),a(0,n,"wrapModeU",function(){return this._wrapModeU;}),a(0,n,"mipmap",function(){return this._mipmap;},function(t){this._mipmap=t,this._mipmap!=t&&this._conchTexture&&this._conchTexture.setMipMap(t);}),a(0,n,"minFifter",function(){return this._minFifter;},function(t){this._minFifter=t,this._minFifter!=t&&this._conchTexture&&this._conchTexture.setMinFifter(t);}),a(0,n,"format",function(){return this._format;}),a(0,n,"source",function(){return this.activeResource(),this._source;}),a(0,n,"defaulteTexture",function(){return oi.grayTexture;}),e.WARPMODE_REPEAT=0,e.WARPMODE_CLAMP=1,e;}(),vn=function(t){function e(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,e.__super.call(this),this._boundingBoxCorners=o(8,null);}
r(e,"laya.d3.resource.models.BaseMesh",w);var n=e.prototype;return n._getPositions=function(){throw new Error("未Override,请重载该属性！");},n._generateBoundingObject=function(){this._boundingSphere=new Te(new Re(),0),Te.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new Ie(new Re(),new Re()),Ie.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners);},n.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！");},n.getRenderElement=function(t){throw new Error("未Override,请重载该属性！");},a(0,n,"subMeshCount",function(){return this._subMeshCount;}),a(0,n,"boundingBox",function(){return this._boundingBox;}),a(0,n,"boundingBoxCorners",function(){return this._boundingBoxCorners;}),a(0,n,"boundingSphere",function(){return this._boundingSphere;}),e;}(),In=function(t){function e(){this._terrainHeightData=null,this._width=0,this._height=0,this._bitType=0,this._value=NaN,e.__super.call(this);}
r(e,"laya.d3.terrain.TerrainHeightData",w);return e.prototype.onAsynLoaded=function(t,e,n){this._width=n[0],this._height=n[1],this._bitType=n[2],this._value=n[3];var i,r=NaN;8==this._bitType?(i=new Uint8Array(e),r=1/255):16==this._bitType&&(i=new Int16Array(e),r=1/32766),this._terrainHeightData=new Float32Array(this._height*this._width);for(var a=0,o=this._height*this._width;a<o;a++){this._terrainHeightData[a]=i[a]*r*this._value/2;}
this._endLoaded();},e.load=function(t,i,r,a,o){return n.loader.create(t,null,null,e,[i,r,a,o],1,!1);},e;}(),xn=function(t){function e(){this._version=NaN,this._cameraCoordinateInverse=!1,this._gridSize=NaN,this._chunkNumX=0,this._chunkNumZ=0,this._heightDataX=0,this._heightDataZ=0,this._heightDataBitType=0,this._heightDataValue=NaN,this._heightDataUrl=null,this._detailTextureInfos=null,this._chunkInfos=null,this._heightData=null,this._materialInfo=null,this._alphaMaps=null,this._normalMaps=null,e.__super.call(this);}
r(e,"laya.d3.terrain.TerrainRes",w);var i=e.prototype;return i.parseData=function(t){var e=t[0],n=t[1];if(this._version=e.version,1==this._version){this._cameraCoordinateInverse=e.cameraCoordinateInverse,this._gridSize=e.gridSize,this._chunkNumX=e.chunkNumX,this._chunkNumZ=e.chunkNumZ;var i=e.heightData;if(this._heightDataX=i.numX,this._heightDataZ=i.numZ,this._heightDataBitType=i.bitType,this._heightDataValue=i.value,this._heightDataUrl=n[i.url],this._materialInfo=new We(),e.material){var r=e.material.ambient,a=e.material.diffuse,s=e.material.specular;this._materialInfo.ambientColor=new Re(r[0],r[1],r[2]),this._materialInfo.diffuseColor=new Re(a[0],a[1],a[2]),this._materialInfo.specularColor=new Le(s[0],s[1],s[2],s[3]);}
var l=e.detailTexture;this._detailTextureInfos=o(l.length);for(var u=0;u<l.length;u++){var h=l[u],c=new je();c.diffuseTexture=n[h.diffuse],c.normalTexture=h.normal?n[h.normal]:null,h.scale?c.scale=new Oe(h.scale[0],h.scale[1]):c.scale=new Oe(1,1),h.offset?c.offset=new Oe(h.offset[0],h.offset[1]):c.offset=new Oe(0,0),this._detailTextureInfos[u]=c;}
var _=e.alphaMap;for(this._alphaMaps=o(_.length),u=0;u<this._alphaMaps.length;u++){this._alphaMaps[u]=e.alphaMap[u];}
var f=e.normalMap;for(this._normalMaps=o(f.length),u=0;u<this._normalMaps.length;u++){this._normalMaps[u]=e.normalMap[u];}
var d=e.chunkInfo;if(this._chunkNumX*this._chunkNumZ!=d.length)return alert("terrain data error"),!1;for(this._chunkInfos=o(d.length),u=0;u<d.length;u++){var p=d[u],m=new ze(),g=p.alphaMap.length,y=p.detailID.length;if(g!=y)return alert("terrain chunk data error"),!1;m.alphaMap=o(g),m.detailID=o(y),m.normalMap=n[this._normalMaps[p.normalMap]];for(var I=0;I<g;I++){m.alphaMap[I]=n[this._alphaMaps[p.alphaMap[I]]];var x=p.detailID[I],T=x.length;m.detailID[I]=new Uint8Array(T);for(var S=0;S<T;S++){m.detailID[I][S]=x[S];}}
this._chunkInfos[u]=m;}
this._heightData=v.getRes(this._heightDataUrl),this.onLoadTerrainComplete(this._heightData);}
return!0;},i.onLoadTerrainComplete=function(t){this._endLoaded();},i.onAsynLoaded=function(t,e,n){this.parseData(e);},e.load=function(t){return n.loader.create(t,null,null,e,null,1,!1);},e;}(),Tn=function(t){function e(){this._player=null,this._templet=null,e.__super.call(this),this._player=new s();}
r(e,"laya.d3.component.animation.KeyframeAnimations",t);var i=e.prototype;return i._updateAnimtionPlayer=function(){this._player._update(n.timer.delta);},i._addUpdatePlayerToTimer=function(){n.timer.frameLoop(1,this,this._updateAnimtionPlayer);},i._removeUpdatePlayerToTimer=function(){n.timer.clear(this,this._updateAnimtionPlayer);},i._onOwnerActiveHierarchyChanged=function(t){this._owner.displayedInStage&&(t?this._addUpdatePlayerToTimer():this._removeUpdatePlayerToTimer());},i._load=function(t){t.activeInHierarchy&&this._addUpdatePlayerToTimer(),t.on("activeinhierarchychanged",this,this._onOwnerActiveHierarchyChanged);},i._unload=function(e){t.prototype._unload.call(this,e),e.activeInHierarchy&&this._removeUpdatePlayerToTimer(),e.off("activeinhierarchychanged",this,this._onOwnerActiveHierarchyChanged),this._player._destroy(),this._player=null,this._templet=null;},a(0,i,"url",null,function(t){console.log("Warning: discard property,please use templet property instead.");var e=n.loader.create(t,null,null,l);this._templet!==e&&(0!==this._player.state&&this._player.stop(!0),this._templet=e,this._player.templet=e,this.event("animationchanged",this));}),a(0,i,"player",function(){return this._player;}),a(0,i,"templet",function(){return this._templet;},function(t){this._templet!==t&&(0!==this._player.state&&this._player.stop(!0),this._templet=t,this._player.templet=t,this.event("animationchanged",this));}),a(0,i,"currentFrameIndex",function(){return this._player.currentKeyframeIndex;}),a(0,i,"currentAnimationClipIndex",function(){return this._player.currentAnimationClipIndex;}),a(0,i,"nodeCount",function(){return this._templet.getNodeCount(this._player.currentAnimationClipIndex);}),e;}(Qe),Sn=function(t){function e(){e.__super.call(this),this._clipNames=[],this._clips=[],this._playStartFrames=[],this._playEndFrames=[],this._cacheNodesSpriteOwners=[],this._cacheNodesAvatarOwners=[],this._cacheNodesDefaultlValues=[],this._cacheNodesToSpriteMap=[],this._cacheSpriteToNodesMap=[],this._cacheFullFrames=[],this._publicClipsDatas=[],this._playEventIndex=-1,this._updateTransformPropertyLoopCount=-1,this._lastFrameIndex=-1,this._defaultClipIndex=-1,this._cachePlayRate=1,this._currentPlayClip=null,this._currentFrameIndex=-1,this._currentTime=0,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this.isCache=!0,this.cacheFrameRate=60,this.playbackRate=1,this.playOnWake=!0;}
r(e,"laya.d3.component.Animator",t);var o=e.prototype;return n.imps(o,{"laya.resource.IDestroy":!0}),o._getAvatarOwnersByClip=function(t){var e=this._clips[t]._nodes,n=e.length,i=this._cacheNodesAvatarOwners[t];i.length=n;var r=this._cacheNodesDefaultlValues[t];r.length=n;for(var a=0;a<n;a++){for(var o=this._avatarNodes[0],s=e[a],l=s.path,u=0,h=l.length;u<h;u++){var c=l[u];if(""===c)break;if(!(o=o.getChildByName(c)))break;}
if(o){i[a]=o;var _=U._propertyGetFuncs[s.propertyNameID](o);if(_){var f=new Float32Array(s.keyFrameWidth);for(r[a]=f,u=0,h=_.length;u<h;u++){f[u]=_[u];}}}}},o._handleSpriteOwnersByClip=function(t){var e=this._clips[t]._nodes,n=e.length,i=this._cacheNodesSpriteOwners[t];i.length=n;var r=this._cacheNodesDefaultlValues[t];r.length=n;for(var a=0;a<n;a++){var o=this._owner,s=e[a],l=s.path,u=0,h=0;for(u=0,h=l.length;u<h;u++){var c=l[u];if(""===c)break;if(!(o=o.getChildByName(c)))break;}
if(o){i[a]=o;var _=U._propertyGetFuncs[s.propertyNameID](null,o);if(_){var f=new Float32Array(s.keyFrameWidth);for(r[a]=f,u=0,h=_.length;u<h;u++){f[u]=_[u];}}}}},o._offClipAndAvatarRelateEvent=function(t,e){t.loaded?e.loaded||e.off("loaded",this,this._getAvatarOwnersByClip):t.off("loaded",this,this._getAvatarOwnersAndInitDatasAsync);},o._getAvatarOwnersByClipAsync=function(t,e){e.loaded?this._getAvatarOwnersByClip(t):e.once("loaded",this,this._getAvatarOwnersByClip,[t]);},o._offGetSpriteOwnersByClipAsyncEvent=function(t){t.loaded||t.off("loaded",this,this._getSpriteOwnersByClipAsync);},o._getSpriteOwnersByClipAsync=function(t,e){e.loaded?this._handleSpriteOwnersByClip(t):e.once("loaded",this,this._handleSpriteOwnersByClip,[t]);},o._getAvatarOwnersAndInitDatasAsync=function(){for(var t=0,e=this._clips.length;t<e;t++){this._getAvatarOwnersByClipAsync(t,this._clips[t]);}
for(this._avatar._cloneDatasToAnimator(this),t=0,e=this._avatarNodes.length;t<e;t++){this._checkAnimationNode(this._avatarNodes[t],this._owner);}},o._offGetClipCacheFullKeyframeIndicesEvent=function(t){t.loaded||t.off("loaded",this,this._computeCacheFullKeyframeIndices);},o._computeCacheFullKeyframeIndices=function(t){var e=this._clips[t],n=this._cacheFrameRateInterval*this._cachePlayRate,i=e._getFullKeyframeIndicesWithCache(n);if(i)this._cacheFullFrames[t]=i;else{i=this._cacheFullFrames[t]=[];var r=e._nodes,a=r.length;i.length=a;for(var o=Math.ceil(e._duration/n-1e-5)+1,s=0;s<a;s++){var l=r[s],u=new Int32Array(o);u.fill(-1);for(var h=l.keyFrames,c=0,_=h.length;c<_;c++){for(var f=h[c],d=f.startTime,p=d+f.duration;d<=p;){u[Math.ceil(d/n-1e-5)]=c,d+=n;}}
i[s]=u;}
e._cacheFullKeyframeIndices(n,i);}},o._updateAnimtionPlayer=function(){this._updatePlayer(n.timer.delta/1e3);},o._onOwnerActiveHierarchyChanged=function(){this._owner.activeInHierarchy?(n.timer.frameLoop(1,this,this._updateAnimtionPlayer),this.playOnWake&&this.clip&&this.play()):(0!==this.playState&&(this._stoped=!0),n.timer.clear(this,this._updateAnimtionPlayer));},o._eventScript=function(t,e){for(var n=this._currentPlayClip._animationEvents,i=n.length;this._playEventIndex<i;this._playEventIndex++){var r=n[this._playEventIndex],a=r.time;if(!(t<=a&&a<e))break;for(var o=this._owner._scripts,s=0,l=o.length;s<l;s++){var u=o[s],h=u[r.eventName];h&&h.apply(u,r.params);}}},o._setPlayParams=function(t,e){var n=this._currentTime;this._currentTime=t,this._currentFrameIndex=Math.max(Math.floor(this.currentPlayTime/e-1e-5),0),this._currentFrameTime=this._currentFrameIndex*e,this._eventScript(n,t);},o._setPlayParamsWhenStop=function(t,e){var n=this._currentTime;this._currentTime=t,this._currentFrameIndex=Math.max(Math.floor(t/e-1e-5),0),this._currentFrameTime=this._currentFrameIndex*e,this._eventScript(n,t),this._currentPlayClip=null;},o._revertKeyframeNodes=function(t,e){var n=this._cacheNodesDefaultlValues[e],i=t._nodes;if(this._avatar)for(var r=this._cacheNodesAvatarOwners[e],a=0,o=r.length;a<o;a++){var s=r[a];s&&U._propertySetFuncs[i[a].propertyNameID](s,null,n[a]);}else{var l=this._cacheNodesSpriteOwners[e];for(a=0,o=l.length;a<o;a++){var u=l[a];u&&U._propertySetFuncs[i[a].propertyNameID](null,u,n[a]);}}},o._onAnimationStop=function(){var t,e,n,i=0,r=0;this._lastFrameIndex=-1;var a=this._currentPlayClip._nodes;if(this._avatar){var o=this._cacheNodesAvatarOwners[this._currentPlayClipIndex];for(i=0,r=o.length;i<r;i++){var s=o[i];n=(e=(t=a[i]).keyFrames)[e.length-1].data,s&&U._propertySetFuncs[t.propertyNameID](s,null,n);}}else{var l=this._cacheNodesSpriteOwners[this._currentPlayClipIndex];for(i=0,r=l.length;i<r;i++){var u=l[i];n=(e=(t=a[i]).keyFrames)[e.length-1].data,u&&U._propertySetFuncs[t.propertyNameID](null,u,n);}}},o._setAnimationClipPropertyToAnimationNode=function(t,e,n){for(var i=0,r=e.length;i<r;i++){var a=e[i],o=t[a];if(o){var s=this._currentPlayClip._nodes[a],l=n[a];l&&U._propertySetFuncs[s.propertyNameID](o,null,l);}}},o._setAnimationClipPropertyToSprite3D=function(t,e){for(var n=0,i=t.length;n<i;n++){var r=t[n];if(r){var a=this._currentPlayClip._nodes[n],o=e[n];o&&U._propertySetFuncs[a.propertyNameID](null,r,o);}}},o._handleSpriteOwnersBySprite=function(t,e,n,i){var r=this._clips[t],a=n.join("/"),o=r._nodesMap[a];if(o)for(var s=this._cacheNodesSpriteOwners[t],l=r._nodes,u=this._cacheNodesDefaultlValues[t],h=0,c=o.length;h<c;h++){var _=o[h],f=l.indexOf(_);if(e){s[f]=i;var d=U._propertyGetFuncs[_.propertyNameID](null,i);if(d){var p=u[f];p||(u[f]=p=new Float32Array(_.keyFrameWidth));for(var m=0,g=d.length;m<g;m++){p[m]=d[m];}}}else s[f]=null;}},o._evaluateAvatarNodesCacheMode=function(t,n,i,r,a){n._evaluateAnimationlDatasCacheMode(t,this._cacheFullFrames[this._currentPlayClipIndex],this,i,a),this._setAnimationClipPropertyToAnimationNode(t,a,i);for(var o=0,s=this._avatarNodes.length;o<s;o++){var l=this._avatarNodes[o].transform;if(l._worldUpdate){var u=new Float32Array(16);r[o]=u,l._setWorldMatrixAndUpdate(u);}else{var h=l.getWorldMatrix();r[o]=h||e.deafaultMatrix;}}},o._evaluateAvatarNodesRealTime=function(t,n,i,r,a){n._evaluateAnimationlDatasRealTime(t,this.currentPlayTime,i,a),this._setAnimationClipPropertyToAnimationNode(t,a,i);for(var o=0,s=this._avatarNodes.length;o<s;o++){var l=this._avatarNodes[o].transform;l._worldUpdate?l._setWorldMatrixNoUpdate(r[o]):r[o]=e.deafaultMatrix;}},o._updateAvatarNodesToSpriteCacheMode=function(t,n){for(var i=0,r=this._cacheSpriteToNodesMap.length;i<r;i++){var a=this._cacheSpriteToNodesMap[i],o=n[a];if(o!==e.deafaultMatrix){var s=this._avatarNodes[a].transform._entity,l=s.worldMatrix;Ze.matrix4x4MultiplyMFM(this._owner._transform.worldMatrix,o,l),s.worldMatrix=l;}}},o._updateAvatarNodesToSpriteRealTime=function(){for(var t=0,n=this._cacheSpriteToNodesMap.length;t<n;t++){var i=this._avatarNodes[this._cacheSpriteToNodesMap[t]],r=i.transform._entity,a=i.transform;if(a._worldUpdate){var o=e._tempMatrix4x40;a._setWorldMatrixAndUpdate(o);var s=r.worldMatrix;Ze.matrix4x4MultiplyMFM(this._owner._transform.worldMatrix,o,s),r.worldMatrix=s;}}},o._updatePlayer=function(t){if(null!=this._currentPlayClip&&!this._stoped&&this._currentPlayClip.loaded){var e=this._cacheFrameRateInterval*this._cachePlayRate,n=0;this._startUpdateLoopCount!==P.loopCount&&(n=t*this.playbackRate,this._elapsedPlaybackTime+=n);var i=this._currentPlayClip._frameRate,r=this._playStartFrames[this._currentPlayClipIndex]/i,a=Math.min(this._playEndFrames[this._currentPlayClipIndex]/i,this._currentPlayClip._duration)-r;if(!this._currentPlayClip.islooping&&this._elapsedPlaybackTime>=a)return this._onAnimationStop(),this._setPlayParamsWhenStop(a,e),void this.event("stopped");if(n+=this._currentTime,a>0){if(n>=a)do{(n-=a)<a&&(this._setPlayParams(n,e),this.event("complete")),this._playEventIndex=0,this._eventScript(0,n);}while(n>=a);else this._setPlayParams(n,e);}else this._currentTime=this._currentFrameTime=this._currentFrameIndex=this._playEventIndex=0,this.event("complete");}},o._update=function(t){var e=this._currentPlayClip;if(2===this.playState&&e&&e.loaded){var i=this.playbackRate*n.timer.scale,r=this._cachePlayRate;this._canCache=this.isCache&&i>=r;var a,o=-1;if(this._canCache){if(o=this._currentFrameIndex,this._lastFrameIndex===o)return;if(a=e._getAnimationDataWithCache(r,o),this._avatar){var s=this._cacheNodesAvatarOwners[this._currentPlayClipIndex],l=e._cachePropertyMap,u=l.length;u>0&&(a||((a=[]).length=u,e._cacheAnimationData(r,o,a),e._evaluateAnimationlDatasCacheMode(s,this._cacheFullFrames[this._currentPlayClipIndex],this,a,l)),this._setAnimationClipPropertyToAnimationNode(s,l,a)),this._curAvatarNodeDatas=e._getAvatarDataWithCache(this._avatar,this._cachePlayRate,o),this._curAvatarNodeDatas||(this._curAvatarNodeDatas=[],this._curAvatarNodeDatas.length=this._avatarNodes.length,e._cacheAvatarData(this._avatar,this._cachePlayRate,o,this._curAvatarNodeDatas),this._evaluateAvatarNodesCacheMode(s,e,e._publicClipDatas,this._curAvatarNodeDatas,e._unCachePropertyMap)),this._updateAvatarNodesToSpriteCacheMode(e,this._curAvatarNodeDatas);}else{var h=this._cacheNodesSpriteOwners[this._currentPlayClipIndex];a||((a=[]).length=this._currentPlayClip._nodes.length,e._evaluateAnimationlDatasCacheMode(h,this._cacheFullFrames[this._currentPlayClipIndex],this,a,null),e._cacheAnimationData(r,o,a)),this._setAnimationClipPropertyToSprite3D(h,a);}}else if(a=e._publicClipDatas,this._avatar){if(e._evaluateAnimationlDatasRealTime(this._cacheNodesAvatarOwners[this._currentPlayClipIndex],this.currentPlayTime,a,e._cachePropertyMap),!this._publicAvatarNodeDatas){this._publicAvatarNodeDatas=[];var c=this._avatarNodes.length;this._publicAvatarNodeDatas.length=c;for(var _=1;_<c;_++){this._publicAvatarNodeDatas[_]=new Float32Array(16);}}
this._curAvatarNodeDatas=this._publicAvatarNodeDatas,this._evaluateAvatarNodesRealTime(this._cacheNodesAvatarOwners[this._currentPlayClipIndex],e,a,this._curAvatarNodeDatas,e._unCachePropertyMap),this._updateAvatarNodesToSpriteRealTime();}else e._evaluateAnimationlDatasRealTime(this._cacheNodesSpriteOwners[this._currentPlayClipIndex],this.currentPlayTime,a,null);this._lastFrameIndex=o;}},o._checkAnimationNode=function(t,e){t.name!==e.name||e._transform.dummy||e._isLinkSpriteToAnimationNode(this,t,!0);for(var n=0,i=e._childs.length;n<i;n++){this._checkAnimationNode(t,e.getChildAt(n));}},o._load=function(t){t.activeInHierarchy&&n.timer.frameLoop(1,this,this._updateAnimtionPlayer),this._owner.on("activeinhierarchychanged",this,this._onOwnerActiveHierarchyChanged);},o._unload=function(e){t.prototype._unload.call(this,e),e.activeInHierarchy&&n.timer.clear(this,this._updateAnimtionPlayer),this._owner.off("activeinhierarchychanged",this,this._onOwnerActiveHierarchyChanged),this._curAvatarNodeDatas=null;},o._destroy=function(){t.prototype._destroy.call(this);for(var e=0,n=this._clips.length;e<n;e++){this._clips[e]._removeReference();}
this._currentPlayClip=null,this._clipNames=null,this._cacheNodesSpriteOwners=null,this._cacheNodesAvatarOwners=null,this._cacheNodesDefaultlValues=null,this._clips=null,this._cacheFullFrames=null;},o._cloneTo=function(t){var e=t;e.avatar=this.avatar;this._clips.length;for(var n=0,i=this._clips.length;n<i;n++){e.addClip(this._clips[n]);}
if(this.clip&&(e.clip=this.clip),this._linkSpritesData){e._linkSpritesData={};for(var r in this._linkSpritesData){e._linkSpritesData[r]=this._linkSpritesData[r].slice();}}},o.addClip=function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=4294967295),e=e||t.name;var r=this._clipNames.indexOf(e);if(-1!==r){if(this._clips[r]!==t)throw new Error("Animation:this playName has exist with another clip.");}else{var a=this._clips.indexOf(t);if(n<0||i<0)throw new Error("Animator:startFrame and endFrame must large than zero.");if(n>i)throw new Error("Animator:startFrame must less than endFrame.");this._clipNames.push(e),this._clips.push(t),this._playStartFrames.push(n),this._playEndFrames.push(i),this._cacheNodesSpriteOwners.push([]),this._cacheNodesAvatarOwners.push([]),this._cacheNodesDefaultlValues.push([]),this._publicClipsDatas.push([]),t._addReference(),a=this._clips.length-1,this._avatar?this._avatar.loaded?this._getAvatarOwnersByClipAsync(a,t):this._avatar.once("loaded",this,this._getAvatarOwnersByClipAsync,[a,t]):this._getSpriteOwnersByClipAsync(a,t),t.loaded?this._computeCacheFullKeyframeIndices(a):t.once("loaded",this,this._computeCacheFullKeyframeIndices,[a]);}},o.removeClip=function(t){var e=this._clips.indexOf(t);-1!==e&&(this._avatar?this._offClipAndAvatarRelateEvent(this._avatar,t):this._offGetSpriteOwnersByClipAsyncEvent(t),this._offGetClipCacheFullKeyframeIndicesEvent(t),this._clipNames.splice(e,1),this._clips.splice(e,1),this._playStartFrames.splice(e,1),this._playEndFrames.splice(e,1),this._cacheNodesSpriteOwners.splice(e,1),this._cacheNodesAvatarOwners.splice(e,1),this._cacheNodesDefaultlValues.splice(e,1),this._publicClipsDatas.splice(e,1),t._removeReference());},o.removeClipByName=function(t){var e=this._clipNames.indexOf(t);if(-1!==e){var n=this._clips[e];this._avatar?this._offClipAndAvatarRelateEvent(this._avatar,n):this._offGetSpriteOwnersByClipAsyncEvent(n),this._offGetClipCacheFullKeyframeIndicesEvent(n),this._clipNames.splice(e,1),this._clips.splice(e,1),this._playStartFrames.splice(e,1),this._playEndFrames.splice(e,1),this._cacheNodesSpriteOwners.splice(e,1),this._cacheNodesAvatarOwners.splice(e,1),this._cacheNodesDefaultlValues.splice(e,1),this._publicClipsDatas.splice(e,1);}},o.getClip=function(t){var e=this._clipNames.indexOf(t);return-1!==e?this._clips[e]:null;},o.getClipCount=function(){return this._clips.length;},o.play=function(t,e){if(void 0===e&&(e=1),!t&&-1==this._defaultClipIndex)throw new Error("Animator:must have  default clip value,please set clip property.");t?(this._currentPlayClipIndex=this._clipNames.indexOf(t),this._currentPlayClip=this._clips[this._currentPlayClipIndex]):(this._currentPlayClipIndex=this._defaultClipIndex,this._currentPlayClip=this._clips[this._defaultClipIndex]),this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this._playEventIndex=0,this.playbackRate=e,this._stoped=!1,this._currentFrameIndex=0,this._startUpdateLoopCount=P.loopCount,this._lastPlayAnimationClip&&this._lastPlayAnimationClip!==this._currentPlayClip&&this._revertKeyframeNodes(this._lastPlayAnimationClip,this._lastPlayAnimationClipIndex),this._updatePlayer(0),this._lastPlayAnimationClip=this._currentPlayClip,this._lastPlayAnimationClipIndex=this._currentPlayClipIndex;},o.stop=function(){0!==this.playState&&(this._stoped=!0,this.event("stopped"));},o._getLinkSpritePath=function(t,e){e.unshift(t.name);var n=t._parent;n._hierarchyAnimator===this?this._getLinkSpritePath(n,e):e.shift();},o.linkSprite3DToAvatarNode=function(t,e){if(e._hierarchyAnimator===this){if(this._avatar){var n=this._avatarNodeMap[t];if(n){this._linkSpritesData=this._linkSpritesData||{};var i=[];return this._getLinkSpritePath(e,i),this._linkSpritesData[t]=i,e._isLinkSpriteToAnimationNode(this,n,!0),!0;}
return!1;}
return!1;}
throw "Animator:sprite3D must belong to this Animator";},o.unLinkSprite3DToAvatarNode=function(t){if(this._avatar){var e=t.transform.dummy;if(e){var n=this._avatarNodeMap[e._owner.name];return t._isLinkSpriteToAnimationNode(this,n,!1),!0;}
return!1;}
return!1;},a(0,o,"playState",function(){return null==this._currentPlayClip?0:this._stoped?0:2;}),a(0,o,"avatar",function(){return this._avatar;},function(t){if(this._avatar!==t){var e=this._avatar;this._avatar=t;for(var n=this._clips.length,i=0;i<n;i++){this._offClipAndAvatarRelateEvent(e,this._clips[i]);}
t&&(t.loaded?this._getAvatarOwnersAndInitDatasAsync():t.once("loaded",this,this._getAvatarOwnersAndInitDatasAsync));}}),a(0,o,"cacheFrameRate",function(){return this._cacheFrameRate;},function(t){if(this._cacheFrameRate!==t){this._cacheFrameRate=t,this._cacheFrameRateInterval=1/this._cacheFrameRate;for(var e=0,n=this._clips.length;e<n;e++){this._clips[e].loaded&&this._computeCacheFullKeyframeIndices(e);}}}),a(0,o,"clip",function(){return this._clips[this._defaultClipIndex];},function(t){var e=t?this._clips.indexOf(t):-1;this._defaultClipIndex!==e&&(-1!==this._defaultClipIndex&&this.removeClip(this._clips[this._defaultClipIndex]),-1!==e&&this.addClip(t,t.name),this._defaultClipIndex=e);}),a(0,o,"currentFrameIndex",function(){return this._currentFrameIndex;}),a(0,o,"cachePlayRate",function(){return this._cachePlayRate;},function(t){if(this._cachePlayRate!==t){this._cachePlayRate=t;for(var e=0,n=this._clips.length;e<n;e++){this._clips[e].loaded&&this._computeCacheFullKeyframeIndices(e);}}}),a(0,o,"currentFrameTime",function(){return this._currentFrameTime;}),a(0,o,"currentPlayClip",function(){return this._currentPlayClip;}),a(0,o,"currentPlayTime",function(){return this._currentTime+this._playStartFrames[this._currentPlayClipIndex]/this._currentPlayClip._frameRate;}),a(0,o,"playbackTime",null,function(t){if(null!=this._currentPlayClip&&this._currentPlayClip&&this._currentPlayClip.loaded){this._startUpdateLoopCount=P.loopCount;var e=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=t,this._currentFrameIndex=Math.floor(this.currentPlayTime/e),this._currentFrameTime=this._currentFrameIndex*e;}}),a(0,o,"paused",function(){return this._stoped;},function(t){this._stoped=t,t&&this.event("paused");}),i(e,["deafaultMatrix",function(){return this.deafaultMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new Float32Array(16);}]),e;}(Qe),bn=(function(t){function e(){this._attachSkeleton=null,this._extenData=null,this.attachBones=null,this.matrixs=null,e.__super.call(this),this.attachBones=[],this.matrixs=[];}
r(e,"laya.d3.component.AttachPoint",t);var n=e.prototype;n._load=function(e){t.prototype._load.call(this,e),this._attachSkeleton=e.getComponentByType($n);},n._update=function(t){if(this._attachSkeleton&&!this._attachSkeleton.destroyed&&0!==this._attachSkeleton.player.state&&this._attachSkeleton.curBonesDatas){var e=this._attachSkeleton.player,n=this._attachSkeleton.templet;this.matrixs.length=this.attachBones.length;for(var i=this._attachSkeleton.curBonesDatas,r=this.owner.transform.worldMatrix,a=0,o=this.attachBones.length;a<o;a++){var s=16*n.getNodeIndexWithName(e.currentAnimationClipIndex,this.attachBones[a]),l=this.matrixs[a];l||(l=this.matrixs[a]=new De());for(var u=l.elements,h=0;h<16;h++){u[h]=i[s+h];}
De.multiply(r,l,l);}
this.event("complete");}};}(Qe),function(t){function e(){e.__super.call(this),this._isRigidbody=!1,this._runtimeCollisonMap={},this._runtimeCollisonTestMap={},this._ignoreCollisonMap={},this.isTrigger=!0;}
r(e,"laya.d3.component.physics.Collider",t);var n=e.prototype;return n._clearCollsionMap=function(){for(var t in this._runtimeCollisonMap){var e=this._runtimeCollisonMap[t];delete e._runtimeCollisonMap[this.id],e._isRigidbody&&delete e._runtimeCollisonTestMap[this.id];var n=e.id;delete this._runtimeCollisonMap[n],this._isRigidbody&&delete this._runtimeCollisonTestMap[n];}},n._unload=function(t){for(var e in this._runtimeCollisonMap){var n=this._runtimeCollisonMap[e];delete n._runtimeCollisonMap[this.id],n._isRigidbody&&delete n._runtimeCollisonTestMap[this.id],delete this._ignoreCollisonMap[e]._ignoreCollisonMap[this.id];}},n._setIsRigidbody=function(t){if(this._isRigidbody!==t){this._isRigidbody=t;var e=this._owner;if(e.displayedInStage){var n=e.layer;n._removeCollider(this),n._addCollider(this);}}},n._getType=function(){return-1;},n._collisonTo=function(t){return!1;},n.raycast=function(t,e,n){throw void 0===n&&(n=1.79e308),new Error("Collider:Must override it.");},a(0,n,"enable",t.prototype._$get_enable,function(t){if(this._enable!==t){this._owner.displayedInStage&&(t||this._clearCollsionMap()),this._enable=t,this.event("enablechanged",this._enable);}}),a(0,n,"isSingleton",function(){return e._isSingleton;}),e._isSingleton=!1,e;}(Qe)),wn=function(t){function e(){e.__super.call(this);}
r(e,"laya.d3.component.Rigidbody",t);return a(0,e.prototype,"enable",t.prototype._$get_enable,function(t){if(this._enable!==t){for(var e=this._owner._colliders,n=0,i=e.length;n<i;n++){var r=e[n];r._setIsRigidbody(t);var a=r._runtimeCollisonMap,o=r._runtimeCollisonTestMap;if(!t)for(var s in a){delete o[s];}}
this._enable=t,this.event("enablechanged",this._enable);}}),e;}(Qe),Dn=(function(t){function e(){e.__super.call(this);}
r(e,"laya.d3.component.Script",Qe);var n=e.prototype;n.onTriggerEnter=function(t){},n.onTriggerExit=function(t){},n.onTriggerStay=function(t){},a(0,n,"isSingleton",function(){return e._isSingleton;}),e._isSingleton=!1;}(),function(t){function e(t){e.__super.call(this,t);}
r(e,"laya.d3.core.GlitterRender",en);var n=e.prototype;return n._calculateBoundingBox=function(){var t=this._boundingBox.min.elements;t[0]=-Number.MAX_VALUE,t[1]=-Number.MAX_VALUE,t[2]=-Number.MAX_VALUE;var e=this._boundingBox.min.elements;e[0]=Number.MAX_VALUE,e[1]=Number.MAX_VALUE,e[2]=Number.MAX_VALUE;},n._calculateBoundingSphere=function(){var t=this._boundingSphere.center.elements;t[0]=0,t[1]=0,t[2]=0,this._boundingSphere.radius=Number.MAX_VALUE;},n._renderUpdate=function(t){this._setShaderValueMatrix4x4(0,this._owner.transform.worldMatrix);var e=this._owner.getProjectionViewWorldMatrix(t);this._setShaderValueMatrix4x4(1,e);var n=this._owner.templet;return this._setShaderValueNumber(3,n.lifeTime),this._setShaderValueNumber(2,n._currentTime),!0;},e;}()),Cn=function(t){function e(t){this._owner=null,this._sharedMesh=null,e.__super.call(this),this._owner=t;}
r(e,"laya.d3.core.MeshFilter",t);var n=e.prototype;return n._sharedMeshLoaded=function(){this.event("loaded");},n._destroy=function(){t.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null);},a(0,n,"sharedMesh",function(){return this._sharedMesh;},function(t){var e=this._sharedMesh;e&&e._removeReference(),this._sharedMesh=t,t._addReference(),this.event("meshchanged",[this,e,t]),t.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded);}),a(0,n,"_isAsyncLoaded",function(){return this._sharedMesh.loaded;}),a(0,n,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners;}),a(0,n,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere;}),a(0,n,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox;}),e;}(tn),En=function(t){function e(t){e.__super.call(this,t),t.meshFilter.on("meshchanged",this,this._onMeshChanged);}
r(e,"laya.d3.core.MeshRender",en);var n=e.prototype;return n._onMeshChanged=function(t,e,n){n.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:n.once("loaded",this,this._onMeshLoaed);},n._onMeshLoaed=function(t,e){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0;},n._calculateBoundingSphereByInitSphere=function(t){var e=NaN,n=this._owner.transform,i=n.scale.elements,r=Math.abs(i[0]),a=Math.abs(i[1]),o=Math.abs(i[2]);e=r>=a&&r>=o?r:a>=o?a:o,Re.transformCoordinate(t.center,n.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=t.radius*e;},n._calculateBoundBoxByInitCorners=function(t){for(var e=this._owner.transform.worldMatrix,n=0;n<8;n++){Re.transformCoordinate(t[n],e,en._tempBoundBoxCorners[n]);}
Ie.createfromPoints(en._tempBoundBoxCorners,this._boundingBox);},n._calculateBoundingSphere=function(){var t=this._owner.meshFilter.sharedMesh;null==t||null==t.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(t.boundingSphere);},n._calculateBoundingBox=function(){var t=this._owner.meshFilter.sharedMesh;null==t||null==t.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(t.boundingBoxCorners);},n._renderUpdate=function(t){var e=this._owner.transform;if(e){this._setShaderValueMatrix4x4(0,e.worldMatrix);var n=this._owner.getProjectionViewWorldMatrix(t);this._setShaderValueMatrix4x4(1,n);}else this._setShaderValueMatrix4x4(0,De.DEFAULT),this._setShaderValueMatrix4x4(1,t);return Je.debugMode&&this._renderRenderableBoundBox(),!0;},e;}(),Pn=function(t){function e(t){e.__super.call(this),this._tempRotationMatrix=new De(),this._uvLength=new Oe(),this._firstActiveElement=0,this._firstNewElement=0,this._firstFreeElement=0,this._firstRetiredElement=0,this._owner=t,this._ownerRender=t.particleRender,this._boundingBoxCorners=o(8,null),this._boundingSphere=new Te(new Re(),Number.MAX_VALUE),this._boundingBox=new Ie(new Re(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),new Re(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)),this._currentTime=0,this._isEmitting=!1,this._isPlaying=!1,this._isPaused=!1,this._burstsIndex=0,this._frameRateTime=0,this._emissionTime=0,this._totalDelayTime=0,this._simulateUpdate=!1,this._bufferMaxParticles=1,this.duration=5,this.looping=!0,this.prewarm=!1,this.startDelayType=0,this.startDelay=0,this.startDelayMin=0,this.startDelayMax=0,this._startLifetimeType=0,this._startLifetimeConstant=5,this._startLifeTimeGradient=new $(),this._startLifetimeConstantMin=0,this._startLifetimeConstantMax=5,this._startLifeTimeGradientMin=new $(),this._startLifeTimeGradientMax=new $(),this._maxStartLifetime=5,this.startSpeedType=0,this.startSpeedConstant=5,this.startSpeedConstantMin=0,this.startSpeedConstantMax=5,this.threeDStartSize=!1,this.startSizeType=0,this.startSizeConstant=1,this.startSizeConstantSeparate=new Re(1,1,1),this.startSizeConstantMin=0,this.startSizeConstantMax=1,this.startSizeConstantMinSeparate=new Re(0,0,0),this.startSizeConstantMaxSeparate=new Re(1,1,1),this.threeDStartRotation=!1,this.startRotationType=0,this.startRotationConstant=0,this.startRotationConstantSeparate=new Re(0,0,0),this.startRotationConstantMin=0,this.startRotationConstantMax=0,this.startRotationConstantMinSeparate=new Re(0,0,0),this.startRotationConstantMaxSeparate=new Re(0,0,0),this.randomizeRotationDirection=0,this.startColorType=0,this.startColorConstant=new Le(1,1,1,1),this.startColorConstantMin=new Le(1,1,1,1),this.startColorConstantMax=new Le(1,1,1,1),this.gravityModifier=0,this.simulationSpace=1,this.scaleMode=0,this.playOnAwake=!0,this._rand=new Me(0),this.autoRandomSeed=!0,this.randomSeed=new Uint32Array(1),this._randomSeeds=new Uint32Array(e._RANDOMOFFSET.length),this.isPerformanceMode=!0,this._emission=new K(),this._emission.enbale=!0,this._owner.on("activeinhierarchychanged",this,this._onOwnerActiveHierarchyChanged);}
r(e,"laya.d3.core.particleShuriKen.ShurikenParticleSystem",t);var s=e.prototype;return n.imps(s,{"laya.d3.core.render.IRenderable":!0,"laya.d3.core.IClone":!0}),s._getVertexBuffer=function(t){return void 0===t&&(t=0),0===t?this._vertexBuffer:null;},s._getIndexBuffer=function(){return this._indexBuffer;},s._generateBoundingSphere=function(){var t=this._boundingSphere.center.elements;t[0]=0,t[1]=0,t[2]=0,this._boundingSphere.radius=Number.MAX_VALUE;},s._generateBoundingBox=function(){var t=this._owner.particleRender,n=this._boundingBox.min,i=this._boundingBox.max,r=0,a=0,o=NaN;switch(this.startLifetimeType){case 0:o=this.startLifetimeConstant;break;case 1:o=-Number.MAX_VALUE;var s=s;for(r=0,a=s.gradientCount;r<a;r++){o=Math.max(o,s.getValueByIndex(r));}
break;case 2:o=Math.max(this.startLifetimeConstantMin,this.startLifetimeConstantMax);break;case 3:o=-Number.MAX_VALUE;var l=l;for(r=0,a=l.gradientCount;r<a;r++){o=Math.max(o,l.getValueByIndex(r));}
var u=u;for(r=0,a=u.gradientCount;r<a;r++){o=Math.max(o,u.getValueByIndex(r));}}
var h=NaN,c=NaN;switch(this.startSpeedType){case 0:h=c=this.startSpeedConstant;break;case 1:break;case 2:h=this.startLifetimeConstantMin,c=this.startLifetimeConstantMax;}
var _,f,d,p;this._shape&&this._shape.enable||(_=f=Re.ZERO,d=Re.ZERO,p=Re.UnitZ);var m=new Re(d.x*h,d.y*h,d.z*h),g=new Re(p.x*c,p.y*c,p.z*c);if(this._velocityOverLifetime&&this._velocityOverLifetime.enbale){var y=this._velocityOverLifetime.velocity;switch(y.type){case 0:y.constant;break;case 1:new Re(y.gradientX.getAverageValue(),y.gradientY.getAverageValue(),y.gradientZ.getAverageValue());break;case 2:y.constantMin,y.constantMax;break;case 3:new Re(y.gradientXMin.getAverageValue(),y.gradientYMin.getAverageValue(),y.gradientZMin.getAverageValue()),new Re(y.gradientXMax.getAverageValue(),y.gradientYMax.getAverageValue(),y.gradientZMax.getAverageValue());}}
var v,I,x=this._owner.transform,T=x.position,S=e._tempVector39,b=S.elements,w=t.renderMode;switch(this.scaleMode){case 0:var D=x.scale;v=D,b[0]=D.x,b[1]=D.z,b[2]=D.y,1===w&&(I=D);break;case 1:var C=x.localScale;v=C,b[0]=C.x,b[1]=C.z,b[2]=C.y,1===w&&(I=C);break;case 2:v=x.scale,b[0]=b[1]=b[2]=1,1===w&&(I=Re.ONE);}
var E,P;switch(this._velocityOverLifetime&&this._velocityOverLifetime.enbale||(E=new Re(m.x*o,m.y*o,m.z*o),P=new Re(g.x*o,g.y*o,g.z*o),2!=this.scaleMode?(Re.add(_,E,n),Re.multiply(v,n,n),Re.add(f,P,i),Re.multiply(v,i,i)):(Re.multiply(v,_,n),Re.add(n,E,n),Re.multiply(v,f,i),Re.add(i,P,i))),this.simulationSpace){case 0:break;case 1:Re.add(n,T,n),Re.add(i,T,i);}
var M=NaN,A=NaN;switch(this.startSizeType){case 0:if(this.threeDStartSize){var O=O;M=Math.max(O.x,O.y),1===w&&(A=O.y);}else M=this.startSizeConstant,1===w&&(A=this.startSizeConstant);break;case 1:break;case 2:if(this.threeDStartSize){var R=R;M=Math.max(R.x,R.y),1===w&&(A=R.y);}else M=this.startSizeConstantMax,1===w&&(A=this.startSizeConstantMax);}
if(this._sizeOverLifetime&&this._sizeOverLifetime.enbale){this._sizeOverLifetime.size;M*=this._sizeOverLifetime.size.getMaxSizeInGradient();}
var L=e._tempVector30,F=L.elements,V=NaN,N=NaN;switch(w){case 0:V=M*e.halfKSqrtOf2,Re.scale(S,M,L),Re.subtract(n,L,n),Re.add(i,L,i);break;case 1:var U=e._tempVector31,G=e._tempVector32,B=e._tempVector33,k=e._tempVector34;this._velocityOverLifetime&&this._velocityOverLifetime.enbale||(Re.multiply(I,g,G),Re.multiply(I,m,B));var H=A*t.stretchedBillboardLengthScale,z=Re.scalarLength(G)*t.stretchedBillboardSpeedScale+H,j=Re.scalarLength(B)*t.stretchedBillboardSpeedScale+H,W=e._tempVector35,K=e._tempVector36;Re.normalize(G,W),Re.scale(W,z,k),Re.subtract(P,k,k),Re.normalize(B,K),Re.scale(K,j,U),Re.add(E,U,U),V=M*e.halfKSqrtOf2,Re.scale(S,V,L);var X=e._tempVector37,Y=e._tempVector38;Re.scale(W,.5,X),Re.scale(K,.5,Y),Re.multiply(X,S,X),Re.multiply(Y,S,Y),Re.add(n,Y,n),Re.min(n,k,n),Re.subtract(n,L,n),Re.subtract(i,X,i),Re.max(i,U,i),Re.add(i,L,i);break;case 2:N=.5*(M*=Math.cos(.7853981633974483)),F[0]=S.x*N,F[1]=S.z*N,Re.subtract(n,L,n),Re.add(i,L,i);break;case 3:N=.5*(M*=Math.cos(.7853981633974483)),Re.scale(S,N,L),Re.subtract(n,L,n),Re.add(i,L,i);}
this._boundingBox.getCorners(this._boundingBoxCorners);},s._updateEmission=function(){if(n.stage.isVisibility&&this.isAlive)if(this._simulateUpdate)this._simulateUpdate=!1;else{var t=this._startUpdateLoopCount===P.loopCount||this._isPaused?0:n.timer.delta/1e3;t=Math.min(e._maxElapsedTime,t),this._updateParticles(t);}},s._updateParticles=function(t){(4!==this._ownerRender.renderMode||this._ownerRender.mesh)&&(this._currentTime+=t,this._retireActiveParticles(),this._freeRetiredParticles(),this._totalDelayTime+=t,this._totalDelayTime<this._playStartDelay||this._emission.enbale&&this._isEmitting&&!this._isPaused&&this._advanceTime(t,this._currentTime));},s._updateParticlesSimulationRestart=function(t){this._firstActiveElement=0,this._firstNewElement=0,this._firstFreeElement=0,this._firstRetiredElement=0,this._burstsIndex=0,this._frameRateTime=t,this._emissionTime=0,this._totalDelayTime=0,this._currentTime=t;var e=t;e<this._playStartDelay?this._totalDelayTime=e:this._emission.enbale&&this._advanceTime(t,t);},s._addUpdateEmissionToTimer=function(){n.timer.frameLoop(1,this,this._updateEmission);},s._removeUpdateEmissionToTimer=function(){n.timer.clear(this,this._updateEmission);},s._onOwnerActiveHierarchyChanged=function(t){this._owner.displayedInStage&&(t?this._addUpdateEmissionToTimer():this._removeUpdateEmissionToTimer());},s._retireActiveParticles=function(){for(;this._firstActiveElement!=this._firstNewElement;){var t=this._firstActiveElement*this._floatCountPerVertex*this._vertexStride,e=t+this._timeIndex;if(this._currentTime-this._vertices[e]+1e-4<this._vertices[t+this._startLifeTimeIndex])break;this._vertices[e]=this._drawCounter,this._firstActiveElement++,this._firstActiveElement>=this._bufferMaxParticles&&(this._firstActiveElement=0);}},s._freeRetiredParticles=function(){for(;this._firstRetiredElement!=this._firstActiveElement;){var t=this._drawCounter-this._vertices[this._firstRetiredElement*this._floatCountPerVertex*this._vertexStride+this._timeIndex];if(this.isPerformanceMode&&t<3)break;this._firstRetiredElement++,this._firstRetiredElement>=this._bufferMaxParticles&&(this._firstRetiredElement=0);}},s._burst=function(t,e){for(var n=0,i=this._emission._bursts,r=i.length;this._burstsIndex<r;this._burstsIndex++){var a=i[this._burstsIndex],o=a.time;if(!(t<=o&&o<e))break;var s=0;this.autoRandomSeed?s=x.lerp(a.minCount,a.maxCount,Math.random()):(this._rand.seed=this._randomSeeds[0],s=x.lerp(a.minCount,a.maxCount,this._rand.getFloat()),this._randomSeeds[0]=this._rand.seed),n+=s;}
return n;},s._advanceTime=function(t,e){var n=0,i=this._emissionTime;this._emissionTime+=t;var r=0;if(this._emissionTime>this.duration){if(!this.looping){for(r=Math.min(this.maxParticles-this.aliveParticleCount,r),n=0;n<r;n++){this.emit(e);}
return this._isPlaying=!1,void this.stop();}
r+=this._burst(i,this._emissionTime),this._emissionTime-=this.duration,this.event("complete"),this._burstsIndex=0,r+=this._burst(0,this._emissionTime);}else r+=this._burst(i,this._emissionTime);for(r=Math.min(this.maxParticles-this.aliveParticleCount,r),n=0;n<r;n++){this.emit(e);}
var a=this.emission.emissionRate;if(a>0){var o=1/a;for(this._frameRateTime+=o,this._frameRateTime=this._currentTime-(this._currentTime-this._frameRateTime)%this._maxStartLifetime;this._frameRateTime<=e&&this.emit(this._frameRateTime);){this._frameRateTime+=o;}
this._frameRateTime=Math.floor(e/o)*o;}},s._initBufferDatas=function(){this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy());var t=this._ownerRender,e=t.renderMode;if(-1!==e&&this.maxParticles>0){var n,i,r=0,a=0,o=0,s=0,l=0,u=t.mesh;if(4===e){if(u){if(u._vertexBuffers.length>1)throw new Error("ShurikenParticleSystem: submesh Count mesh be One or all subMeshes have the same vertexDeclaration.");i=pe.vertexDeclaration,this._floatCountPerVertex=i.vertexStride/4,this._startLifeTimeIndex=12,this._timeIndex=16,this._vertexStride=u._vertexBuffers[0].vertexCount;var h=this._bufferMaxParticles*this._vertexStride,c=h%65535;if(Math.floor(h/65535)+1>1)throw new Error("ShurikenParticleSystem:the maxParticleCount multiply mesh vertexCount is large than 65535.");this._vertexBuffer=qn.create(i,c,35048),this._vertices=new Float32Array(this._floatCountPerVertex*c),this._indexStride=u._indexBuffer.indexCount;var _=u._indexBuffer.getData(),f=this._bufferMaxParticles*this._indexStride;for(this._indexBuffer=Yn.create("ushort",f,35044),n=new Uint16Array(f),s=0,r=0;r<this._bufferMaxParticles;r++){var d=r*this._vertexStride;for(a=0,o=_.length;a<o;a++){n[s++]=d+_[a];}}
this._indexBuffer.setData(n);}}else{for(i=de.vertexDeclaration,this._floatCountPerVertex=i.vertexStride/4,this._startLifeTimeIndex=7,this._timeIndex=11,this._vertexStride=4,this._vertexBuffer=qn.create(i,this._bufferMaxParticles*this._vertexStride,35048),this._vertices=new Float32Array(this._floatCountPerVertex*this._bufferMaxParticles*this._vertexStride),r=0;r<this._bufferMaxParticles;r++){l=r*this._floatCountPerVertex*this._vertexStride,this._vertices[l]=-.5,this._vertices[l+1]=-.5,this._vertices[l+2]=0,this._vertices[l+3]=1,l+=this._floatCountPerVertex,this._vertices[l]=.5,this._vertices[l+1]=-.5,this._vertices[l+2]=1,this._vertices[l+3]=1,l+=this._floatCountPerVertex,this._vertices[l]=.5,this._vertices[l+1]=.5,this._vertices[l+2]=1,this._vertices[l+3]=0,l+=this._floatCountPerVertex,this._vertices[l]=-.5,this._vertices[l+1]=.5,this._vertices[l+2]=0,this._vertices[l+3]=0;}
for(this._indexStride=6,this._indexBuffer=Yn.create("ushort",6*this._bufferMaxParticles,35044),n=new Uint16Array(6*this._bufferMaxParticles),r=0;r<this._bufferMaxParticles;r++){s=6*r;var p=r*this._vertexStride,m=p+2;n[s++]=p,n[s++]=m,n[s++]=p+1,n[s++]=p,n[s++]=p+3,n[s++]=m;}
this._indexBuffer.setData(n);}}},s._destroy=function(){t.prototype._destroy.call(this),this._owner.activeInHierarchy&&this._removeUpdateEmissionToTimer(),this._vertexBuffer.destroy(),this._indexBuffer.destroy(),this._emission._destroy(),this._owner=null,this._vertices=null,this._vertexBuffer=null,this._indexBuffer=null,this._emission=null,this._shape=null,this.startLifeTimeGradient=null,this.startLifeTimeGradientMin=null,this.startLifeTimeGradientMax=null,this.startSizeConstantSeparate=null,this.startSizeConstantMinSeparate=null,this.startSizeConstantMaxSeparate=null,this.startRotationConstantSeparate=null,this.startRotationConstantMinSeparate=null,this.startRotationConstantMaxSeparate=null,this.startColorConstant=null,this.startColorConstantMin=null,this.startColorConstantMax=null,this._velocityOverLifetime=null,this._colorOverLifetime=null,this._sizeOverLifetime=null,this._rotationOverLifetime=null,this._textureSheetAnimation=null;},s.emit=function(t){var n=e._tempPosition,i=e._tempDirection;if(this._shape&&this._shape.enable)this.autoRandomSeed?this._shape.generatePositionAndDirection(n,i):this._shape.generatePositionAndDirection(n,i,this._rand,this._randomSeeds);else{var r=n.elements,a=i.elements;r[0]=r[1]=r[2]=0,a[0]=a[1]=0,a[2]=1;}
return this.addParticle(n,i,t);},s.addParticle=function(t,e,n){Re.normalize(e,e);var i=this._firstFreeElement+1;if(i>=this._bufferMaxParticles&&(i=0),i===this._firstRetiredElement)return!1;lt.create(this,this._ownerRender,this._owner.transform);if(this._currentTime-n>=lt.startLifeTime)return!0;var r=NaN,a=NaN,o=NaN,s=NaN,l=NaN,u=NaN,h=NaN,c=this._velocityOverLifetime&&this._velocityOverLifetime.enbale;if(c){var _=this._velocityOverLifetime.velocity.type;2===_||3===_?this.autoRandomSeed?(r=Math.random(),a=Math.random(),o=Math.random()):(this._rand.seed=this._randomSeeds[9],r=this._rand.getFloat(),a=this._rand.getFloat(),o=this._rand.getFloat(),this._randomSeeds[9]=this._rand.seed):c=!1;}else c=!1;var f=this._colorOverLifetime&&this._colorOverLifetime.enbale;if(f){3===this._colorOverLifetime.color.type?this.autoRandomSeed?s=Math.random():(this._rand.seed=this._randomSeeds[10],s=this._rand.getFloat(),this._randomSeeds[10]=this._rand.seed):f=!1;}else f=!1;var d=this._sizeOverLifetime&&this._sizeOverLifetime.enbale;if(d){3===this._sizeOverLifetime.size.type?this.autoRandomSeed?l=Math.random():(this._rand.seed=this._randomSeeds[11],l=this._rand.getFloat(),this._randomSeeds[11]=this._rand.seed):d=!1;}else d=!1;var p=this._rotationOverLifetime&&this._rotationOverLifetime.enbale;if(p){var m=this._rotationOverLifetime.angularVelocity.type;2===m||3===m?this.autoRandomSeed?u=Math.random():(this._rand.seed=this._randomSeeds[12],u=this._rand.getFloat(),this._randomSeeds[12]=this._rand.seed):p=!1;}else p=!1;var g=this._textureSheetAnimation&&this._textureSheetAnimation.enable;if(g){3===this._textureSheetAnimation.frame.type?this.autoRandomSeed?h=Math.random():(this._rand.seed=this._randomSeeds[15],h=this._rand.getFloat(),this._randomSeeds[15]=this._rand.seed):g=!1;}else g=!1;var y,v=this._firstFreeElement*this._floatCountPerVertex*this._vertexStride,I=lt.startUVInfo[0],x=lt.startUVInfo[1],T=lt.startUVInfo[2],S=lt.startUVInfo[3],b=t.elements,w=e.elements,D=0,C=0,E=0,P=0,M=0,A=this._ownerRender;if(4===A.renderMode){var O=A.mesh._vertexBuffers[0];y=O.getData();var R=O.vertexDeclaration;C=R.getVertexElementByUsage(0).offset/4;var L=R.getVertexElementByUsage(1);E=L?L.offset/4:-1;var F=R.getVertexElementByUsage(2);P=F?F.offset/4:-1,D=R.vertexStride/4,M=0;}else{this._vertices[v+2]=T,this._vertices[v+3]=S+x;var V=v+this._floatCountPerVertex;this._vertices[V+2]=T+I,this._vertices[V+3]=S+x;var N=V+this._floatCountPerVertex;this._vertices[N+2]=T+I,this._vertices[N+3]=S;var U=N+this._floatCountPerVertex;this._vertices[U+2]=T,this._vertices[U+3]=S;}
for(var G=v,B=v+this._floatCountPerVertex*this._vertexStride;G<B;G+=this._floatCountPerVertex){var k=0;if(4===A.renderMode){k=G;var H=D*M++,z=H+C;this._vertices[k++]=y[z++],this._vertices[k++]=y[z++],this._vertices[k++]=y[z],-1===E?(this._vertices[k++]=1,this._vertices[k++]=1,this._vertices[k++]=1,this._vertices[k++]=1):(z=H+E,this._vertices[k++]=y[z++],this._vertices[k++]=y[z++],this._vertices[k++]=y[z++],this._vertices[k++]=y[z]),-1===P?(this._vertices[k++]=0,this._vertices[k++]=0):(z=H+P,this._vertices[k++]=T+y[z++]*I,this._vertices[k++]=S+y[z]*x);}else k=G+4;switch(this._vertices[k++]=b[0],this._vertices[k++]=b[1],this._vertices[k++]=b[2],this._vertices[k++]=lt.startLifeTime,this._vertices[k++]=w[0],this._vertices[k++]=w[1],this._vertices[k++]=w[2],this._vertices[k++]=n,this._vertices[k++]=lt.startColor[0],this._vertices[k++]=lt.startColor[1],this._vertices[k++]=lt.startColor[2],this._vertices[k++]=lt.startColor[3],this._vertices[k++]=lt.startSize[0],this._vertices[k++]=lt.startSize[1],this._vertices[k++]=lt.startSize[2],this._vertices[k++]=lt.startRotation[0],this._vertices[k++]=lt.startRotation[1],this._vertices[k++]=lt.startRotation[2],this._vertices[k++]=lt.startSpeed,f&&(this._vertices[k+1]=s),d&&(this._vertices[k+2]=l),p&&(this._vertices[k+3]=u),g&&(this._vertices[k+4]=h),c&&(this._vertices[k+5]=r,this._vertices[k+6]=a,this._vertices[k+7]=o),this.simulationSpace){case 0:k+=8,this._vertices[k++]=lt.simulationWorldPostion[0],this._vertices[k++]=lt.simulationWorldPostion[1],this._vertices[k++]=lt.simulationWorldPostion[2],this._vertices[k++]=lt.simulationWorldRotation[0],this._vertices[k++]=lt.simulationWorldRotation[1],this._vertices[k++]=lt.simulationWorldRotation[2],this._vertices[k++]=lt.simulationWorldRotation[3];break;case 1:break;default:throw new Error("ShurikenParticleMaterial: SimulationSpace value is invalid.");}}
return this._firstFreeElement=i,!0;},s.addNewParticlesToVertexBuffer=function(){var t=0;this._firstNewElement<this._firstFreeElement?(t=this._firstNewElement*this._vertexStride*this._floatCountPerVertex,this._vertexBuffer.setData(this._vertices,t,t,(this._firstFreeElement-this._firstNewElement)*this._vertexStride*this._floatCountPerVertex)):(t=this._firstNewElement*this._vertexStride*this._floatCountPerVertex,this._vertexBuffer.setData(this._vertices,t,t,(this._bufferMaxParticles-this._firstNewElement)*this._vertexStride*this._floatCountPerVertex),this._firstFreeElement>0&&this._vertexBuffer.setData(this._vertices,0,0,this._firstFreeElement*this._vertexStride*this._floatCountPerVertex)),this._firstNewElement=this._firstFreeElement;},s._beforeRender=function(t){return this._firstNewElement!=this._firstFreeElement&&this.addNewParticlesToVertexBuffer(),this._drawCounter++,this._firstActiveElement!=this._firstFreeElement&&(this._vertexBuffer._bind(),this._indexBuffer._bind(),!0);},s._render=function(t){var e=0,n=R.mainContext;this._firstActiveElement<this._firstFreeElement?(e=(this._firstFreeElement-this._firstActiveElement)*this._indexStride,n.drawElements(4,e,5123,2*this._firstActiveElement*this._indexStride),P.trianglesFaces+=e/3,P.drawCall++):(e=(this._bufferMaxParticles-this._firstActiveElement)*this._indexStride,n.drawElements(4,e,5123,2*this._firstActiveElement*this._indexStride),P.trianglesFaces+=e/3,P.drawCall++,this._firstFreeElement>0&&(e=this._firstFreeElement*this._indexStride,n.drawElements(4,e,5123,0),P.trianglesFaces+=e/3,P.drawCall++));},s.play=function(){if(this._burstsIndex=0,this._isEmitting=!0,this._isPlaying=!0,this._isPaused=!1,this._emissionTime=0,this._totalDelayTime=0,!this.autoRandomSeed)for(var t=0,n=this._randomSeeds.length;t<n;t++){this._randomSeeds[t]=this.randomSeed[0]+e._RANDOMOFFSET[t];}
switch(this.startDelayType){case 0:this._playStartDelay=this.startDelay;break;case 1:this.autoRandomSeed?this._playStartDelay=x.lerp(this.startDelayMin,this.startDelayMax,Math.random()):(this._rand.seed=this._randomSeeds[2],this._playStartDelay=x.lerp(this.startDelayMin,this.startDelayMax,this._rand.getFloat()),this._randomSeeds[2]=this._rand.seed);break;default:throw new Error("Utils3D: startDelayType is invalid.");}
this._frameRateTime=this._currentTime+this._playStartDelay,this._startUpdateLoopCount=P.loopCount,this.event("played");},s.pause=function(){this._isPaused=!0,this.event("paused");},s.simulate=function(t,e){void 0===e&&(e=!0),this._simulateUpdate=!0,e?this._updateParticlesSimulationRestart(t):(this._isPaused=!1,this._updateParticles(t)),this.pause();},s.stop=function(){this._burstsIndex=0,this._isEmitting=!1,this._emissionTime=0,this.event("stopped");},s.cloneTo=function(t){var e=t;e.duration=this.duration,e.looping=this.looping,e.prewarm=this.prewarm,e.startDelayType=this.startDelayType,e.startDelay=this.startDelay,e.startDelayMin=this.startDelayMin,e.startDelayMax=this.startDelayMax,e._maxStartLifetime=this._maxStartLifetime,e.startLifetimeType=this.startLifetimeType,e.startLifetimeConstant=this.startLifetimeConstant,this.startLifeTimeGradient.cloneTo(e.startLifeTimeGradient),e.startLifetimeConstantMin=this.startLifetimeConstantMin,e.startLifetimeConstantMax=this.startLifetimeConstantMax,this.startLifeTimeGradientMin.cloneTo(e.startLifeTimeGradientMin),this.startLifeTimeGradientMax.cloneTo(e.startLifeTimeGradientMax),e.startSpeedType=this.startSpeedType,e.startSpeedConstant=this.startSpeedConstant,e.startSpeedConstantMin=this.startSpeedConstantMin,e.startSpeedConstantMax=this.startSpeedConstantMax,e.threeDStartSize=this.threeDStartSize,e.startSizeType=this.startSizeType,e.startSizeConstant=this.startSizeConstant,this.startSizeConstantSeparate.cloneTo(e.startSizeConstantSeparate),e.startSizeConstantMin=this.startSizeConstantMin,e.startSizeConstantMax=this.startSizeConstantMax,this.startSizeConstantMinSeparate.cloneTo(e.startSizeConstantMinSeparate),this.startSizeConstantMaxSeparate.cloneTo(e.startSizeConstantMaxSeparate),e.threeDStartRotation=this.threeDStartRotation,e.startRotationType=this.startRotationType,e.startRotationConstant=this.startRotationConstant,this.startRotationConstantSeparate.cloneTo(e.startRotationConstantSeparate),e.startRotationConstantMin=this.startRotationConstantMin,e.startRotationConstantMax=this.startRotationConstantMax,this.startRotationConstantMinSeparate.cloneTo(e.startRotationConstantMinSeparate),this.startRotationConstantMaxSeparate.cloneTo(e.startRotationConstantMaxSeparate),e.randomizeRotationDirection=this.randomizeRotationDirection,e.startColorType=this.startColorType,this.startColorConstant.cloneTo(e.startColorConstant),this.startColorConstantMin.cloneTo(e.startColorConstantMin),this.startColorConstantMax.cloneTo(e.startColorConstantMax),e.gravityModifier=this.gravityModifier,e.simulationSpace=this.simulationSpace,e.scaleMode=this.scaleMode,e.playOnAwake=this.playOnAwake,e.maxParticles=this.maxParticles,this._emission&&(e._emission=this._emission.clone()),this.shape&&(e.shape=this.shape.clone()),this.velocityOverLifetime&&(e.velocityOverLifetime=this.velocityOverLifetime.clone()),this.colorOverLifetime&&(e.colorOverLifetime=this.colorOverLifetime.clone()),this.sizeOverLifetime&&(e.sizeOverLifetime=this.sizeOverLifetime.clone()),this.rotationOverLifetime&&(e.rotationOverLifetime=this.rotationOverLifetime.clone()),this.textureSheetAnimation&&(e.textureSheetAnimation=this.textureSheetAnimation.clone()),e.isPerformanceMode=this.isPerformanceMode,e._isEmitting=this._isEmitting,e._isPlaying=this._isPlaying,e._isPaused=this._isPaused,e._playStartDelay=this._playStartDelay,e._frameRateTime=this._frameRateTime,e._emissionTime=this._emissionTime,e._totalDelayTime=this._totalDelayTime,e._burstsIndex=this._burstsIndex;},s.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},s._getVertexBuffers=function(){return null;},a(0,s,"maxParticles",function(){return this._bufferMaxParticles-1;},function(t){var e=t+1;e!==this._bufferMaxParticles&&(this._bufferMaxParticles=e,this._initBufferDatas());}),a(0,s,"isEmitting",function(){return this._isEmitting;}),a(0,s,"isAlive",function(){return!!(this._isPlaying||this.aliveParticleCount>0);}),a(0,s,"shape",function(){return this._shape;},function(t){this._shape!==t&&(t&&t.enable?this._ownerRender._addShaderDefine(yi.SHADERDEFINE_SHAPE):this._ownerRender._removeShaderDefine(yi.SHADERDEFINE_SHAPE),this._shape=t);}),a(0,s,"rotationOverLifetime",function(){return this._rotationOverLifetime;},function(t){var e=this._ownerRender;if(t){var n=t.angularVelocity;if(!n)return;var i=n.separateAxes,r=n.type;if(t.enbale)switch(i?e._addShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE):e._addShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIME),r){case 0:e._addShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT);break;case 1:e._addShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE);break;case 2:e._addShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS);break;case 3:e._addShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES);}else e._removeShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIME),e._removeShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE),e._removeShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT),e._removeShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE),e._removeShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS),e._removeShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES);switch(r){case 0:i?e._setShaderValueColor(35,n.constantSeparate):e._setShaderValueNumber(34,n.constant);break;case 1:i?(e._setShaderValueBuffer(37,n.gradientX._elements),e._setShaderValueBuffer(38,n.gradientY._elements),e._setShaderValueBuffer(39,n.gradientZ._elements),e._setShaderValueBuffer(40,n.gradientW._elements)):e._setShaderValueBuffer(36,n.gradient._elements);break;case 2:i?(e._setShaderValueColor(35,n.constantMinSeparate),e._setShaderValueColor(42,n.constantMaxSeparate)):(e._setShaderValueNumber(34,n.constantMin),e._setShaderValueNumber(41,n.constantMax));break;case 3:i?(e._setShaderValueBuffer(37,n.gradientXMin._elements),e._setShaderValueBuffer(44,n.gradientXMax._elements),e._setShaderValueBuffer(38,n.gradientYMin._elements),e._setShaderValueBuffer(45,n.gradientYMax._elements),e._setShaderValueBuffer(39,n.gradientZMin._elements),e._setShaderValueBuffer(46,n.gradientZMax._elements),e._setShaderValueBuffer(40,n.gradientWMin._elements),e._setShaderValueBuffer(47,n.gradientWMax._elements)):(e._setShaderValueBuffer(36,n.gradientMin._elements),e._setShaderValueBuffer(43,n.gradientMax._elements));}}else e._removeShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIME),e._removeShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE),e._removeShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT),e._removeShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE),e._removeShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS),e._removeShaderDefine(yi.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES),e._setShaderValueColor(35,null),e._setShaderValueColor(42,null),e._setShaderValueNumber(34,void 0),e._setShaderValueNumber(41,void 0),e._setShaderValueBuffer(37,null),e._setShaderValueBuffer(44,null),e._setShaderValueBuffer(38,null),e._setShaderValueBuffer(45,null),e._setShaderValueBuffer(39,null),e._setShaderValueBuffer(46,null),e._setShaderValueBuffer(40,null),e._setShaderValueBuffer(47,null),e._setShaderValueBuffer(36,null),e._setShaderValueBuffer(43,null);this._rotationOverLifetime=t;}),a(0,s,"emission",function(){return this._emission;}),a(0,s,"emissionTime",function(){return this._emissionTime>this.duration?this.duration:this._emissionTime;}),a(0,s,"aliveParticleCount",function(){return this._firstNewElement>=this._firstRetiredElement?this._firstNewElement-this._firstRetiredElement:this._bufferMaxParticles-this._firstRetiredElement+this._firstNewElement;}),a(0,s,"isPlaying",function(){return this._isPlaying;}),a(0,s,"isPaused",function(){return this._isPaused;}),a(0,s,"startLifetimeType",function(){return this._startLifetimeType;},function(t){var e=0,n=0;switch(this.startLifetimeType){case 0:this._maxStartLifetime=this.startLifetimeConstant;break;case 1:this._maxStartLifetime=-Number.MAX_VALUE;var i=i;for(e=0,n=i.gradientCount;e<n;e++){this._maxStartLifetime=Math.max(this._maxStartLifetime,i.getValueByIndex(e));}
break;case 2:this._maxStartLifetime=Math.max(this.startLifetimeConstantMin,this.startLifetimeConstantMax);break;case 3:this._maxStartLifetime=-Number.MAX_VALUE;var r=r;for(e=0,n=r.gradientCount;e<n;e++){this._maxStartLifetime=Math.max(this._maxStartLifetime,r.getValueByIndex(e));}
var a=a;for(e=0,n=a.gradientCount;e<n;e++){this._maxStartLifetime=Math.max(this._maxStartLifetime,a.getValueByIndex(e));}}
this._startLifetimeType=t;}),a(0,s,"_originalBoundingSphere",function(){return this._boundingSphere;}),a(0,s,"startLifetimeConstant",function(){return this._startLifetimeConstant;},function(t){0===this._startLifetimeType&&(this._maxStartLifetime=t),this._startLifetimeConstant=t;}),a(0,s,"startLifetimeConstantMin",function(){return this._startLifetimeConstantMin;},function(t){2===this._startLifetimeType&&(this._maxStartLifetime=Math.max(t,this._startLifetimeConstantMax)),this._startLifetimeConstantMin=t;}),a(0,s,"startLifeTimeGradient",function(){return this._startLifeTimeGradient;},function(t){if(1===this._startLifetimeType){this._maxStartLifetime=-Number.MAX_VALUE;for(var e=0,n=t.gradientCount;e<n;e++){this._maxStartLifetime=Math.max(this._maxStartLifetime,t.getValueByIndex(e));}}
this._startLifeTimeGradient=t;}),a(0,s,"startLifetimeConstantMax",function(){return this._startLifetimeConstantMax;},function(t){2===this._startLifetimeType&&(this._maxStartLifetime=Math.max(this._startLifetimeConstantMin,t)),this._startLifetimeConstantMax=t;}),a(0,s,"startLifeTimeGradientMin",function(){return this._startLifeTimeGradientMin;},function(t){if(3===this._startLifetimeType){var e=0,n=0;for(this._maxStartLifetime=-Number.MAX_VALUE,e=0,n=t.gradientCount;e<n;e++){this._maxStartLifetime=Math.max(this._maxStartLifetime,t.getValueByIndex(e));}
for(e=0,n=this._startLifeTimeGradientMax.gradientCount;e<n;e++){this._maxStartLifetime=Math.max(this._maxStartLifetime,this._startLifeTimeGradientMax.getValueByIndex(e));}}
this._startLifeTimeGradientMin=t;}),a(0,s,"startLifeTimeGradientMax",function(){return this._startLifeTimeGradientMax;},function(t){if(3===this._startLifetimeType){var e=0,n=0;for(this._maxStartLifetime=-Number.MAX_VALUE,e=0,n=this._startLifeTimeGradientMin.gradientCount;e<n;e++){this._maxStartLifetime=Math.max(this._maxStartLifetime,this._startLifeTimeGradientMin.getValueByIndex(e));}
for(e=0,n=t.gradientCount;e<n;e++){this._maxStartLifetime=Math.max(this._maxStartLifetime,t.getValueByIndex(e));}}
this._startLifeTimeGradientMax=t;}),a(0,s,"velocityOverLifetime",function(){return this._velocityOverLifetime;},function(t){var e=this._ownerRender;if(t){var n=t.velocity,i=n.type;if(t.enbale)switch(i){case 0:e._addShaderDefine(yi.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT);break;case 1:e._addShaderDefine(yi.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE);break;case 2:e._addShaderDefine(yi.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT);break;case 3:e._addShaderDefine(yi.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE);}else e._removeShaderDefine(yi.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT),e._removeShaderDefine(yi.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE),e._removeShaderDefine(yi.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT),e._removeShaderDefine(yi.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE);switch(i){case 0:e._setShaderValueColor(13,n.constant);break;case 1:e._setShaderValueBuffer(14,n.gradientX._elements),e._setShaderValueBuffer(15,n.gradientY._elements),e._setShaderValueBuffer(16,n.gradientZ._elements);break;case 2:e._setShaderValueColor(13,n.constantMin),e._setShaderValueColor(17,n.constantMax);break;case 3:e._setShaderValueBuffer(14,n.gradientXMin._elements),e._setShaderValueBuffer(18,n.gradientXMax._elements),e._setShaderValueBuffer(15,n.gradientYMin._elements),e._setShaderValueBuffer(19,n.gradientYMax._elements),e._setShaderValueBuffer(16,n.gradientZMin._elements),e._setShaderValueBuffer(20,n.gradientZMax._elements);}
e._setShaderValueInt(21,t.space);}else e._removeShaderDefine(yi.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT),e._removeShaderDefine(yi.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE),e._removeShaderDefine(yi.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT),e._removeShaderDefine(yi.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE),e._setShaderValueColor(13,null),e._setShaderValueBuffer(14,null),e._setShaderValueBuffer(15,null),e._setShaderValueBuffer(16,null),e._setShaderValueColor(13,null),e._setShaderValueColor(17,null),e._setShaderValueBuffer(14,null),e._setShaderValueBuffer(18,null),e._setShaderValueBuffer(15,null),e._setShaderValueBuffer(19,null),e._setShaderValueBuffer(16,null),e._setShaderValueBuffer(20,null),e._setShaderValueInt(21,void 0);this._velocityOverLifetime=t;}),a(0,s,"colorOverLifetime",function(){return this._colorOverLifetime;},function(t){var e=this._ownerRender;if(t){var n=t.color;if(t.enbale)switch(n.type){case 1:e._addShaderDefine(yi.SHADERDEFINE_COLOROVERLIFETIME);break;case 3:e._addShaderDefine(yi.SHADERDEFINE_RANDOMCOLOROVERLIFETIME);}else e._removeShaderDefine(yi.SHADERDEFINE_COLOROVERLIFETIME),e._removeShaderDefine(yi.SHADERDEFINE_RANDOMCOLOROVERLIFETIME);switch(n.type){case 1:var i=n.gradient;e._setShaderValueBuffer(22,i._alphaElements),e._setShaderValueBuffer(23,i._rgbElements);break;case 3:var r=n.gradientMin,a=n.gradientMax;e._setShaderValueBuffer(22,r._alphaElements),e._setShaderValueBuffer(23,r._rgbElements),e._setShaderValueBuffer(24,a._alphaElements),e._setShaderValueBuffer(25,a._rgbElements);}}else e._removeShaderDefine(yi.SHADERDEFINE_COLOROVERLIFETIME),e._removeShaderDefine(yi.SHADERDEFINE_RANDOMCOLOROVERLIFETIME),e._setShaderValueBuffer(22,i._alphaElements),e._setShaderValueBuffer(23,i._rgbElements),e._setShaderValueBuffer(22,r._alphaElements),e._setShaderValueBuffer(23,r._rgbElements),e._setShaderValueBuffer(24,a._alphaElements),e._setShaderValueBuffer(25,a._rgbElements);this._colorOverLifetime=t;}),a(0,s,"sizeOverLifetime",function(){return this._sizeOverLifetime;},function(t){var e=this._ownerRender;if(t){var n=t.size,i=n.separateAxes,r=n.type;if(t.enbale)switch(r){case 0:i?e._addShaderDefine(yi.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE):e._addShaderDefine(yi.SHADERDEFINE_SIZEOVERLIFETIMECURVE);break;case 2:i?e._addShaderDefine(yi.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE):e._addShaderDefine(yi.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES);}else e._removeShaderDefine(yi.SHADERDEFINE_SIZEOVERLIFETIMECURVE),e._removeShaderDefine(yi.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE),e._removeShaderDefine(yi.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES),e._removeShaderDefine(yi.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE);switch(r){case 0:i?(e._setShaderValueBuffer(27,n.gradientX._elements),e._setShaderValueBuffer(28,n.gradientY._elements),e._setShaderValueBuffer(29,n.gradientZ._elements)):e._setShaderValueBuffer(26,n.gradient._elements);break;case 2:i?(e._setShaderValueBuffer(27,n.gradientXMin._elements),e._setShaderValueBuffer(31,n.gradientXMax._elements),e._setShaderValueBuffer(28,n.gradientYMin._elements),e._setShaderValueBuffer(32,n.gradientYMax._elements),e._setShaderValueBuffer(29,n.gradientZMin._elements),e._setShaderValueBuffer(33,n.gradientZMax._elements)):(e._setShaderValueBuffer(26,n.gradientMin._elements),e._setShaderValueBuffer(30,n.gradientMax._elements));}}else e._removeShaderDefine(yi.SHADERDEFINE_SIZEOVERLIFETIMECURVE),e._removeShaderDefine(yi.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE),e._removeShaderDefine(yi.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES),e._removeShaderDefine(yi.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE),e._setShaderValueBuffer(27,null),e._setShaderValueBuffer(31,null),e._setShaderValueBuffer(28,null),e._setShaderValueBuffer(32,null),e._setShaderValueBuffer(29,null),e._setShaderValueBuffer(33,null),e._setShaderValueBuffer(26,null),e._setShaderValueBuffer(30,null);this._sizeOverLifetime=t;}),a(0,s,"textureSheetAnimation",function(){return this._textureSheetAnimation;},function(t){var e=this._ownerRender;if(t){var n=t.frame,i=n.type;if(t.enable)switch(i){case 1:e._addShaderDefine(yi.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE);break;case 3:e._addShaderDefine(yi.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE);}else e._removeShaderDefine(yi.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE),e._removeShaderDefine(yi.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE);if(1===i||3===i){e._setShaderValueInt(48,t.cycles);var r=t.tiles,a=this._uvLength.elements;a[0]=1/r.x,a[1]=1/r.y,e._setShaderValueVector2(49,this._uvLength);}
switch(i){case 1:e._setShaderValueBuffer(50,n.frameOverTimeData._elements);break;case 3:e._setShaderValueBuffer(50,n.frameOverTimeDataMin._elements),e._setShaderValueBuffer(51,n.frameOverTimeDataMax._elements);}}else e._removeShaderDefine(yi.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE),e._removeShaderDefine(yi.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE),e._setShaderValueInt(48,void 0),e._setShaderValueVector2(49,null),e._setShaderValueBuffer(50,null),e._setShaderValueBuffer(51,null);this._textureSheetAnimation=t;}),a(0,s,"_vertexBufferCount",function(){return 1;}),a(0,s,"triangleCount",function(){return this._indexBuffer?this._indexBuffer.indexCount/3:0;}),a(0,s,"_originalBoundingBox",function(){return this._boundingBox;}),a(0,s,"_originalBoundingBoxCorners",function(){return this._boundingBoxCorners;}),e.halfKSqrtOf2=.71,i(e,["_RANDOMOFFSET",function(){return this._RANDOMOFFSET=new Uint32Array([592910910,3276756734,322376503,306581307,1793934638,3737431713,2527743459,2368504881,4085612399,3774601268,326370691,1494990940,1089181156,3159510623,2941263940,2786374529,271901988,4233252447]);},"_maxElapsedTime",function(){return this._maxElapsedTime=1/3;},"_tempVector30",function(){return this._tempVector30=new Re();},"_tempVector31",function(){return this._tempVector31=new Re();},"_tempVector32",function(){return this._tempVector32=new Re();},"_tempVector33",function(){return this._tempVector33=new Re();},"_tempVector34",function(){return this._tempVector34=new Re();},"_tempVector35",function(){return this._tempVector35=new Re();},"_tempVector36",function(){return this._tempVector36=new Re();},"_tempVector37",function(){return this._tempVector37=new Re();},"_tempVector38",function(){return this._tempVector38=new Re();},"_tempVector39",function(){return this._tempVector39=new Re();},"_tempPosition",function(){return this._tempPosition=new Re();},"_tempDirection",function(){return this._tempDirection=new Re();}]),e;}(tn),Mn=function(t){function e(t){this._finalGravity=new Re(),this._tempRotationMatrix=new De(),e.__super.call(this,t),this._defaultBoundBox=new Ie(new Re(),new Re()),this._renderMode=-1,this.stretchedBillboardCameraSpeedScale=0,this.stretchedBillboardSpeedScale=0,this.stretchedBillboardLengthScale=1;}
r(e,"laya.d3.core.particleShuriKen.ShurikenParticleRender",t);var i=e.prototype;return i._calculateBoundingBox=function(){var t=this._boundingBox.min.elements;t[0]=-Number.MAX_VALUE,t[1]=-Number.MAX_VALUE,t[2]=-Number.MAX_VALUE;var e=this._boundingBox.min.elements;e[0]=Number.MAX_VALUE,e[1]=Number.MAX_VALUE,e[2]=Number.MAX_VALUE;},i._calculateBoundingSphere=function(){var t=this._owner.particleSystem._boundingSphere,e=NaN,n=this._owner.transform,i=n.scale.elements,r=Math.abs(i[0]),a=Math.abs(i[1]),o=Math.abs(i[2]);e=r>=a&&r>=o?r:a>=o?a:o,Re.transformCoordinate(t.center,n.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=t.radius*e;},i._renderUpdate=function(t){var e=this._owner.particleSystem;if(!n.stage.isVisibility||!e.isAlive)return!1;var i=this._owner.transform;switch(e.simulationSpace){case 0:break;case 1:this._setShaderValueColor(0,i.position),this._setShaderValueColor(1,i.rotation);break;default:throw new Error("ShurikenParticleMaterial: SimulationSpace value is invalid.");}
switch(e.scaleMode){case 0:var r=i.scale;this._setShaderValueColor(4,r),this._setShaderValueColor(5,r);break;case 1:var a=i.localScale;this._setShaderValueColor(4,a),this._setShaderValueColor(5,a);break;case 2:this._setShaderValueColor(4,i.scale),this._setShaderValueColor(5,Re.ONE);}
var o=this._finalGravity.elements,s=Ke.gravity.elements,l=e.gravityModifier;return o[0]=s[0]*l,o[1]=s[1]*l,o[2]=s[2]*l,this._setShaderValueBuffer(7,o),this._setShaderValueInt(11,e.simulationSpace),this._setShaderValueBool(8,e.threeDStartRotation),this._setShaderValueInt(6,e.scaleMode),this._setShaderValueInt(9,this.stretchedBillboardLengthScale),this._setShaderValueInt(10,this.stretchedBillboardSpeedScale),this._setShaderValueNumber(12,e._currentTime),Je.debugMode&&this._renderRenderableBoundBox(),!0;},i._destroy=function(){t.prototype._destroy.call(this),this._mesh&&(this._mesh._removeReference(),this._mesh=null);},a(0,i,"boundingBox",function(){return this._owner.particleSystem.isAlive?(this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox):this._defaultBoundBox;}),a(0,i,"renderMode",function(){return this._renderMode;},function(t){if(this._renderMode!==t){switch(this._renderMode){case 0:this._removeShaderDefine(yi.SHADERDEFINE_RENDERMODE_BILLBOARD);break;case 1:this._removeShaderDefine(yi.SHADERDEFINE_RENDERMODE_STRETCHEDBILLBOARD);break;case 2:this._removeShaderDefine(yi.SHADERDEFINE_RENDERMODE_HORIZONTALBILLBOARD);break;case 3:this._removeShaderDefine(yi.SHADERDEFINE_RENDERMODE_VERTICALBILLBOARD);break;case 4:this._removeShaderDefine(yi.SHADERDEFINE_RENDERMODE_MESH);}
switch(this._renderMode=t,t){case 0:this._addShaderDefine(yi.SHADERDEFINE_RENDERMODE_BILLBOARD);break;case 1:this._addShaderDefine(yi.SHADERDEFINE_RENDERMODE_STRETCHEDBILLBOARD);break;case 2:this._addShaderDefine(yi.SHADERDEFINE_RENDERMODE_HORIZONTALBILLBOARD);break;case 3:this._addShaderDefine(yi.SHADERDEFINE_RENDERMODE_VERTICALBILLBOARD);break;case 4:this._addShaderDefine(yi.SHADERDEFINE_RENDERMODE_MESH);break;default:throw new Error("ShurikenParticleRender: unknown renderMode Value.");}
this._owner.particleSystem._initBufferDatas();}}),a(0,i,"mesh",function(){return this._mesh;},function(t){this._mesh!==t&&(this._mesh&&this._mesh._removeReference(),this._mesh=t,t&&t._addReference(),this._owner.particleSystem._initBufferDatas());}),e;}(en),An=function(t){function e(t){this._owner=null,this._trailRenderElements=null,this._minVertexDistance=NaN,this._widthMultiplier=NaN,this._time=NaN,this._widthCurve=null,this._colorGradient=null,this._textureMode=0,this._curtime=0,this._curSubTrailFinishCurTime=0,this._curSubTrailFinished=!1,this._hasLifeSubTrail=!1,this._trailTotalLength=0,this._trailSupplementLength=0,this._trailDeadLength=0,this._isStart=!1,this._trailRenderElementIndex=0,e.__super.call(this),this._curSubTrailFinishPosition=new Re(),this._curSubTrailFinishDirection=new Re(),this._owner=t,this._trailRenderElements=[],this.addRenderElement();}
r(e,"laya.d3.core.trail.TrailFilter",t);var n=e.prototype;return n.getRenderElementsCount=function(){return this._trailRenderElements.length;},n.addRenderElement=function(){for(var t=0;t<this._trailRenderElements.length;t++){if(1==this._trailRenderElements[t]._isDead)return this._trailRenderElements[t].reActivate(),t;}
var e=new vt(this);return this._trailRenderElements.push(e),this._trailRenderElements.length-1;},n.getRenderElement=function(t){return this._trailRenderElements[t];},n._update=function(t){this._curtime+=t.elapsedTime/1e3,this._owner._render._setShaderValueNumber(3,this._curtime),this._curSubTrailFinished&&(this._curSubTrailFinished=!1,this._trailRenderElementIndex=this.addRenderElement(),this.event("trailfilterchange",[this._trailRenderElementIndex,this._trailRenderElements[this._trailRenderElementIndex]]));},n.reset=function(){for(var t=0;t<this._trailRenderElements.length;t++){this._trailRenderElements[t].reActivate();}
this._isStart=!1,this._hasLifeSubTrail=!1,this._curSubTrailFinished=!1,this._curSubTrailFinishCurTime=0,this._trailTotalLength=0,this._trailSupplementLength=0,this._trailDeadLength=0;},n._destroy=function(){t.prototype._destroy.call(this);for(var e=0;e<this._trailRenderElements.length;e++){this._trailRenderElements[e]._destroy();}
this._trailRenderElements=null,this._widthCurve=null,this._colorGradient=null,this._curSubTrailFinishPosition=null,this._curSubTrailFinishDirection=null;},a(0,n,"widthMultiplier",function(){return this._widthMultiplier;},function(t){this._widthMultiplier=t;}),a(0,n,"time",function(){return this._time;},function(t){this._time=t,this._owner._render._setShaderValueNumber(4,t);}),a(0,n,"widthCurve",function(){return this._widthCurve;},function(t){this._widthCurve=t;var e=new Float32Array(4*t.length),n=0,i=0,r=0;for(n=0,i=t.length;n<i;n++){e[r++]=t[n].time,e[r++]=t[n].inTangent,e[r++]=t[n].outTangent,e[r++]=t[n].value;}
this._owner._render._setShaderValueBuffer(5,e),this._owner._render._setShaderValueInt(6,t.length);}),a(0,n,"minVertexDistance",function(){return this._minVertexDistance;},function(t){this._minVertexDistance=t;}),a(0,n,"colorGradient",function(){return this._colorGradient;},function(t){this._colorGradient=t,this._owner._render._setShaderValueBuffer(7,t._colorKeyData),this._owner._render._setShaderValueBuffer(8,t._alphaKeyData),0==t.mode?this._owner._render._addShaderDefine(Ii.SHADERDEFINE_GRADIENTMODE_BLEND):this._owner._render._removeShaderDefine(Ii.SHADERDEFINE_GRADIENTMODE_BLEND);}),a(0,n,"textureMode",function(){return this._textureMode;},function(t){this._textureMode=t;}),e;}(tn),On=function(t){function e(t){e.__super.call(this,t);}
r(e,"laya.d3.core.trail.TrailRenderer",en);var n=e.prototype;return n._calculateBoundingBox=function(){var t=this._boundingBox.min.elements;t[0]=-Number.MAX_VALUE,t[1]=-Number.MAX_VALUE,t[2]=-Number.MAX_VALUE;var e=this._boundingBox.min.elements;e[0]=Number.MAX_VALUE,e[1]=Number.MAX_VALUE,e[2]=Number.MAX_VALUE;},n._calculateBoundingSphere=function(){var t=this._boundingSphere.center.elements;t[0]=0,t[1]=0,t[2]=0,this._boundingSphere.radius=Number.MAX_VALUE;},n._renderUpdate=function(t){return!0;},e;}(),Rn=function(t){function e(t){this._floatCountPerVertex=6,this._owner=null,this._vertices=null,this._vertexBuffer=null,this._firstActiveElement=0,this._firstNewElement=0,this._firstFreeElement=0,this._firstRetiredElement=0,this._currentTime=NaN,this._drawCounter=0,this.scLeft=null,this.scRight=null,this._numPositionMode=0,this._numPositionVelocityMode=0,this._lastTime=NaN,this._needPatch=!1,this._lastPatchAddPos0=null,this._lastPatchAddPos1=null,this._lastPatchAddTime=NaN,this.lifeTime=NaN,this.minSegmentDistance=NaN,this.minInterpDistance=NaN,this.maxSlerpCount=0,this._maxSegments=0,e.__super.call(this),this._tempVector0=new Re(),this._tempVector1=new Re(),this._tempVector2=new Re(),this._tempVector3=new Re(),this._posModeLastPosition0=new Re(),this._posModeLastPosition1=new Re(),this._posModePosition0=new Re(),this._posModePosition1=new Re(),this._posVelModePosition0=new Re(),this._posVelModeVelocity0=new Re(),this._posVelModePosition1=new Re(),this._posVelModeVelocity1=new Re(),this._owner=t,this._lastTime=0,this._firstActiveElement=0,this._firstNewElement=0,this._firstFreeElement=0,this._firstRetiredElement=0,this._currentTime=0,this._drawCounter=0,this._needPatch=!1,this._lastPatchAddPos0=new Re(),this._lastPatchAddPos1=new Re(),this.scLeft=new k(),this.scRight=new k(),this.lifeTime=.5,this.minSegmentDistance=.1,this.minInterpDistance=.6,this.maxSlerpCount=128,this._maxSegments=200,this._owner.on("activeinhierarchychanged",this,this._onActiveHierarchyChanged);}
r(e,"laya.d3.resource.tempelet.GlitterTemplet",t);var i=e.prototype;return n.imps(i,{"laya.d3.core.render.IRenderable":!0}),i._getVertexBuffer=function(t){return void 0===t&&(t=0),0===t?this._vertexBuffer:null;},i._getIndexBuffer=function(){return null;},i._initialize=function(){this._vertexBuffer=qn.create(Et.vertexDeclaration,2*this.maxSegments,35048),this._vertices=new Float32Array(this.maxSegments*this._floatCountPerVertex*2);},i._onActiveHierarchyChanged=function(t){t||(this._numPositionMode=0,this._numPositionVelocityMode=0,this._firstActiveElement=0,this._firstNewElement=0,this._firstFreeElement=0,this._firstRetiredElement=0,this._currentTime=0,this._drawCounter=0);},i._updateTextureCoordinates=function(){this._firstActiveElement<this._firstFreeElement?this._updateSubTextureCoordinates(this._firstActiveElement,2*(this._firstFreeElement-this._firstActiveElement)):(this._updateSubTextureCoordinates(this._firstActiveElement,2*(this.maxSegments-this._firstActiveElement)),this._firstFreeElement>0&&this._updateSubTextureCoordinates(0,2*this._firstFreeElement));},i._updateSubTextureCoordinates=function(t,e){for(var n=2*t,i=0;i<e;i+=2){var r=n+i,a=r*this._floatCountPerVertex,o=(r+1)*this._floatCountPerVertex;this._vertices[a+3]=this._vertices[o+3]=(this._vertices[a+5]-this._currentTime)/this.lifeTime;}},i._retireActiveGlitter=function(){for(var t=this.lifeTime,e=2*this._floatCountPerVertex;this._firstActiveElement!=this._firstNewElement;){var n=this._firstActiveElement*e+5;if(this._currentTime-this._vertices[n]<t)break;this._vertices[n]=this._drawCounter,this._firstActiveElement++,this._firstActiveElement>=this.maxSegments&&(this._firstActiveElement=0);}},i._freeRetiredGlitter=function(){for(var t=2*this._floatCountPerVertex;this._firstRetiredElement!=this._firstActiveElement;){if(this._drawCounter-this._vertices[this._firstRetiredElement*t+5]<3)break;this._firstRetiredElement++,this._firstRetiredElement>=this.maxSegments&&(this._firstRetiredElement=0);}},i._calcVelocity=function(t,e,n){Re.subtract(t,e,n),Re.scale(n,.5,n);},i._addNewGlitterSegementToVertexBuffer=function(){var t=0;this._firstActiveElement<this._firstFreeElement?(t=2*this._firstActiveElement*this._floatCountPerVertex,this._vertexBuffer.setData(this._vertices,t,t,2*(this._firstFreeElement-this._firstActiveElement)*this._floatCountPerVertex)):(t=2*this._firstActiveElement*this._floatCountPerVertex,this._vertexBuffer.setData(this._vertices,t,t,2*(this.maxSegments-this._firstActiveElement)*this._floatCountPerVertex),this._firstFreeElement>0&&this._vertexBuffer.setData(this._vertices,0,0,2*this._firstFreeElement*this._floatCountPerVertex)),this._firstNewElement=this._firstFreeElement;},i._addGlitter=function(t,e,n){this._needPatch&&(this._needPatch=!1,this._addGlitter(this._lastPatchAddPos0,this._lastPatchAddPos1,this._lastPatchAddTime));var i=this._firstFreeElement+1;i>=this.maxSegments&&(i=0,t.cloneTo(this._lastPatchAddPos0),e.cloneTo(this._lastPatchAddPos1),this._lastPatchAddTime=n,this._needPatch=!0),i===this._firstRetiredElement&&console.log("GlitterTemplet:current segement count have large than maxSegments,please adjust the  value of maxSegments or add Glitter Vertex Frequency.");var r=t.elements,a=e.elements,o=0,s=this._firstFreeElement*this._floatCountPerVertex*2;for(o=0;o<3;o++){this._vertices[s+o]=r[o];}
this._vertices[s+3]=0,this._vertices[s+4]=0,this._vertices[s+5]=n;var l=s+this._floatCountPerVertex;for(o=0;o<3;o++){this._vertices[l+o]=a[o];}
this._vertices[l+3]=0,this._vertices[l+4]=1,this._vertices[l+5]=n,this._firstFreeElement=i;},i._update=function(t){this._currentTime+=t/1e3,this._retireActiveGlitter(),this._freeRetiredGlitter(),this._firstActiveElement==this._firstFreeElement&&(this._currentTime=0),this._firstRetiredElement==this._firstActiveElement&&(this._drawCounter=0),this._updateTextureCoordinates();},i._beforeRender=function(t){return this._firstNewElement!=this._firstFreeElement&&this._addNewGlitterSegementToVertexBuffer(),this._drawCounter++,this._firstActiveElement!=this._firstFreeElement&&(this._vertexBuffer.bindWithIndexBuffer(null),!0);},i._render=function(t){var e=0,n=R.mainContext;this._firstActiveElement<this._firstFreeElement?(e=2*(this._firstFreeElement-this._firstActiveElement),n.drawArrays(5,2*this._firstActiveElement,e),P.trianglesFaces+=e-2,P.drawCall++):(e=2*(this.maxSegments-this._firstActiveElement),n.drawArrays(5,2*this._firstActiveElement,e),P.trianglesFaces+=e-2,P.drawCall++,this._firstFreeElement>0&&(e=2*this._firstFreeElement,n.drawArrays(5,0,e),P.trianglesFaces+=e-2,P.drawCall++));},i.addVertexPosition=function(t,e){if(this._owner.activeInHierarchy)if(this._numPositionMode<2)0===this._numPositionMode?(t.cloneTo(this._posModeLastPosition0),e.cloneTo(this._posModeLastPosition1)):(t.cloneTo(this._posModePosition0),e.cloneTo(this._posModePosition1)),this._numPositionMode++;else{var n=this._tempVector2;this._calcVelocity(t,this._posModeLastPosition0,n);var i=this._tempVector3;this._calcVelocity(e,this._posModeLastPosition1,i),this.addVertexPositionVelocity(this._posModePosition0,n,this._posModePosition1,i),this._posModePosition0.cloneTo(this._posModeLastPosition0),this._posModePosition1.cloneTo(this._posModeLastPosition1),t.cloneTo(this._posModePosition0),e.cloneTo(this._posModePosition1);}},i.addVertexPositionVelocity=function(t,e,n,i){if(this._owner.activeInHierarchy){if(0===this._numPositionVelocityMode)this._numPositionVelocityMode++;else{var r=this._tempVector0;Re.subtract(t,this._posVelModePosition0,r);var a=Re.scalarLength(r);Re.subtract(n,this._posVelModePosition1,r);var o=Re.scalarLength(r),s=0,l=l;if(a<l&&o<l)return;if(1===(s=1+Math.floor(Math.max(a,o)/this.minInterpDistance)))this._addGlitter(t,n,this._currentTime);else{s=Math.min(s,this.maxSlerpCount),this.scLeft.Init(this._posVelModePosition0,this._posVelModeVelocity0,t,e),this.scRight.Init(this._posVelModePosition1,this._posVelModeVelocity1,n,i);for(var u=1/s,h=u,c=this._currentTime-this._lastTime,_=1;_<=s;_++){var f=this._tempVector0;this.scLeft.Slerp(h,f);var d=this._tempVector1;this.scRight.Slerp(h,d);var p=this._lastTime+c*_/s;this._addGlitter(f,d,p),h+=u;}}}
this._lastTime=this._currentTime,t.cloneTo(this._posVelModePosition0),e.cloneTo(this._posVelModeVelocity0),n.cloneTo(this._posVelModePosition1),i.cloneTo(this._posVelModeVelocity1);}},i._destroy=function(){t.prototype._destroy.call(this),this._tempVector0=null,this._tempVector1=null,this._tempVector2=null,this._tempVector3=null,this._owner=null,this._vertices=null,this._vertexBuffer.destroy(),this._vertexBuffer=null,this.scLeft=null,this.scRight=null,this._posModeLastPosition0=null,this._posModeLastPosition1=null,this._posModePosition0=null,this._posModePosition1=null,this._posVelModePosition0=null,this._posVelModeVelocity0=null,this._posVelModePosition1=null,this._posVelModeVelocity1=null,this._lastPatchAddPos0=null,this._lastPatchAddPos1=null;},i._getVertexBuffers=function(){return null;},a(0,i,"maxSegments",function(){return this._maxSegments-1;},function(t){var e=t+1;e!==this._maxSegments&&(this._maxSegments=e,this._vertexBuffer&&this._vertexBuffer.destroy(),this._initialize());}),a(0,i,"_vertexBufferCount",function(){return 1;}),a(0,i,"triangleCount",function(){var t=0;return this._firstActiveElement<this._firstFreeElement?t=2*(this._firstFreeElement-this._firstActiveElement)-2:(t=2*(this.maxSegments-this._firstActiveElement)-2,t+=2*this._firstFreeElement-2),t;}),a(0,i,"_originalBoundingSphere",function(){return n.superGet(tn,this,"_originalBoundingSphere");}),a(0,i,"_originalBoundingBox",function(){return n.superGet(tn,this,"_originalBoundingBox");}),e;}(tn),Ln=function(t){function e(t,n,i,r,a,s,l,u){this._owner=null,this._gridSize=NaN,this.memorySize=0,this._numberVertices=0,this._maxNumberIndices=0,this._currentNumberIndices=0,this._numberTriangle=0,this._vertexBuffer=null,this._indexBuffer=null,this._boundingSphere=null,this._boundingBox=null,this._indexArrayBuffer=null,this._boundingBoxCorners=null,this._leafs=null,this._leafNum=0,this._terrainHeightData=null,this._terrainHeightDataWidth=0,this._terrainHeightDataHeight=0,this._chunkOffsetX=0,this._chunkOffsetZ=0,this._cameraCoordinateInverse=!1,this._cameraPos=null,this._currentLOD=0,this._perspectiveFactor=NaN,this._LODTolerance=0,e.__super.call(this),this._owner=t,this._cameraPos=new Re(),this._chunkOffsetX=n,this._chunkOffsetZ=i,this._gridSize=r,this._terrainHeightData=a,this._terrainHeightDataWidth=s,this._terrainHeightDataHeight=l,this._leafNum=He.CHUNK_GRID_NUM/He.LEAF_GRID_NUM*(He.CHUNK_GRID_NUM/He.LEAF_GRID_NUM),this._leafs=o(this._leafNum),this._cameraCoordinateInverse=u;for(var h=0;h<this._leafNum;h++){this._leafs[h]=new He();}
this.recreateResource();}
r(e,"laya.d3.terrain.TerrainFilter",t);var s=e.prototype;return n.imps(s,{"laya.d3.core.render.IRenderable":!0}),s._destroy=function(){t.prototype._destroy.call(this),this._owner=null,this._vertexBuffer&&this._vertexBuffer.destroy(),this._indexBuffer&&this._indexBuffer.destroy();},s.recreateResource=function(){this._currentNumberIndices=0,this._numberTriangle=0;var t=He.LEAF_VERTEXT_COUNT,e=He.LEAF_MAX_INDEX_COUNT;this._numberVertices=t*this._leafNum,this._maxNumberIndices=e*this._leafNum,this._indexArrayBuffer=new Uint16Array(this._maxNumberIndices);var n=_e.vertexDeclaration,i=n.vertexStride/4,r=new Float32Array(this._numberVertices*i),a=He.CHUNK_GRID_NUM/He.LEAF_GRID_NUM,o=0,s=0,l=0;for(o=0;o<this._leafNum;o++){s=o%a,l=Math.floor(o/a),this._leafs[o].calcVertextBuffer(this._chunkOffsetX,this._chunkOffsetZ,s*He.LEAF_GRID_NUM,l*He.LEAF_GRID_NUM,this._gridSize,r,o*He.LEAF_PLANE_VERTEXT_COUNT,i,this._terrainHeightData,this._terrainHeightDataWidth,this._terrainHeightDataHeight,this._cameraCoordinateInverse);}
for(o=0;o<this._leafNum;o++){s=o%a,l=Math.floor(o/a),this._leafs[o].calcSkirtVertextBuffer(this._chunkOffsetX,this._chunkOffsetZ,s*He.LEAF_GRID_NUM,l*He.LEAF_GRID_NUM,this._gridSize,r,this._leafNum*He.LEAF_PLANE_VERTEXT_COUNT+o*He.LEAF_SKIRT_VERTEXT_COUNT,i,this._terrainHeightData,this._terrainHeightDataWidth,this._terrainHeightDataHeight);}
this.assembleIndexInit(),this._vertexBuffer=new qn(n,this._numberVertices,35044,!1),this._indexBuffer=new Yn("ushort",this._maxNumberIndices,35044,!1),this._vertexBuffer.setData(r),this._indexBuffer.setData(this._indexArrayBuffer),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.calcOriginalBoudingBoxAndSphere();},s.setLODLevel=function(t){if(4!=t.length)return!0;var e=(t[0]+1<<24)+(t[1]+1<<16)+(t[2]+1<<8)+(t[3]+1);return this._currentLOD!=e&&(this._currentLOD=e,!0);},s.assembleIndexInit=function(){this._currentNumberIndices=0,this._numberTriangle=0;for(var t=0,e=0;e<this._leafNum;e++){var n=He.getPlaneLODIndex(e,0);this._indexArrayBuffer.set(n,t),t+=n.length;var i=He.getSkirtLODIndex(e,0);this._indexArrayBuffer.set(i,t),t+=i.length,this._currentNumberIndices+=n.length+i.length;}
this._numberTriangle=this._currentNumberIndices/3;},s.isNeedAssemble=function(t,e){var n=Math.min(t.viewport.width,t.viewport.height)/(2*Math.tan(Math.PI*t.fieldOfView/180));return this._perspectiveFactor!=n?(this._perspectiveFactor=n,1):this._LODTolerance!=di.LOD_TOLERANCE_VALUE?(this._LODTolerance=di.LOD_TOLERANCE_VALUE,1):0==Re.equals(e,this._cameraPos)?(this._cameraPos.x=e.x,this._cameraPos.y=e.y,this._cameraPos.z=e.z,2):0;},s.assembleIndex=function(t,n){var i=this.isNeedAssemble(t,n);if(i>0){for(var r=0;r<this._leafNum;r++){e._TEMP_ARRAY_BUFFER[r]=this._leafs[r].determineLod(n,this._perspectiveFactor,di.LOD_TOLERANCE_VALUE,1==i);}
if(this.setLODLevel(e._TEMP_ARRAY_BUFFER)){this._currentNumberIndices=0,this._numberTriangle=0;var a=0;for(r=0;r<this._leafNum;r++){var o=e._TEMP_ARRAY_BUFFER[r],s=He.getPlaneLODIndex(r,o);this._indexArrayBuffer.set(s,a),a+=s.length;var l=He.getSkirtLODIndex(r,o);this._indexArrayBuffer.set(l,a),a+=l.length,this._currentNumberIndices+=s.length+l.length;}
return this._numberTriangle=this._currentNumberIndices/3,!0;}}
return!1;},s.calcOriginalBoudingBoxAndSphere=function(){for(var t=new Oe(2147483647,-2147483647),e=0;e<this._leafNum;e++){t.x=this._leafs[e]._sizeOfY.x<t.x?this._leafs[e]._sizeOfY.x:t.x,t.y=this._leafs[e]._sizeOfY.y>t.y?this._leafs[e]._sizeOfY.y:t.y;}
var n=new Re(this._chunkOffsetX*He.CHUNK_GRID_NUM*this._gridSize,t.x,this._chunkOffsetZ*He.CHUNK_GRID_NUM*this._gridSize),i=new Re((this._chunkOffsetX+1)*He.CHUNK_GRID_NUM*this._gridSize,t.y,(this._chunkOffsetZ+1)*He.CHUNK_GRID_NUM*this._gridSize);He.__ADAPT_MATRIX__&&(Re.transformV3ToV3(n,He.__ADAPT_MATRIX__,n),Re.transformV3ToV3(i,He.__ADAPT_MATRIX__,i)),this._boundingBox=new Ie(n,i);var r=new Re();Re.subtract(i,n,r),Re.scale(r,.5,r);var a=new Re();Re.add(n,r,a),this._boundingSphere=new Te(a,Re.scalarLength(r)),this._boundingBoxCorners=o(8,null),this._boundingBox.getCorners(this._boundingBoxCorners);},s.calcLeafBoudingBox=function(t){for(var e=0;e<this._leafNum;e++){this._leafs[e].calcLeafBoudingBox(t);}},s.calcLeafBoudingSphere=function(t,e){for(var n=0;n<this._leafNum;n++){this._leafs[n].calcLeafBoudingSphere(t,e);}},s._getVertexBuffer=function(t){return void 0===t&&(t=0),0==t?this._vertexBuffer:null;},s._getIndexBuffer=function(){return this._indexBuffer;},s._beforeRender=function(t){this._vertexBuffer._bind(),this._indexBuffer._bind();if(0==t.renderElement._material.blend){var e=t.camera;this.assembleIndex(e,e.position)&&this._indexBuffer.setData(this._indexArrayBuffer);}
return!0;},s._getVertexBuffers=function(){return null;},s._render=function(t){R.mainContext.drawElements(di.RENDER_LINE_MODEL?1:4,this._currentNumberIndices,5123,0),P.trianglesFaces+=this._numberTriangle,P.drawCall++;},a(0,s,"_originalBoundingSphere",function(){return this._boundingSphere;}),a(0,s,"_originalBoundingBox",function(){return this._boundingBox;}),a(0,s,"_vertexBufferCount",function(){return this._numberVertices;}),a(0,s,"triangleCount",function(){return this._numberTriangle;}),i(e,["_TEMP_ARRAY_BUFFER",function(){return this._TEMP_ARRAY_BUFFER=new Uint32Array(He.CHUNK_GRID_NUM/He.LEAF_GRID_NUM*He.CHUNK_GRID_NUM/He.LEAF_GRID_NUM);}]),e;}(tn),Fn=function(t){function e(t){this._terrainSprite3DOwner=null,e.__super.call(this,t),this._terrainSprite3DOwner=t;}
r(e,"laya.d3.terrain.TerrainRender",t);var n=e.prototype;return n._calculateBoundingSphere=function(){var t=this._terrainSprite3DOwner.terrainFilter;if(null==t)this._boundingSphere.toDefault();else{var e=t._originalBoundingSphere,n=NaN,i=this._terrainSprite3DOwner.transform,r=i.scale;n=r.x>=r.y&&r.x>=r.z?r.x:r.y>=r.z?r.y:r.z,Re.transformCoordinate(e.center,i.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=e.radius*n,t.calcLeafBoudingSphere(i.worldMatrix,n);}},n._calculateBoundingBox=function(){var t=this._terrainSprite3DOwner.terrainFilter;if(null==t)this._boundingBox.toDefault();else{for(var e=this._terrainSprite3DOwner.transform.worldMatrix,n=t._boundingBoxCorners,i=0;i<8;i++){Re.transformCoordinate(n[i],e,en._tempBoundBoxCorners[i]);}
Ie.createfromPoints(en._tempBoundBoxCorners,this._boundingBox),t.calcLeafBoudingBox(e);}},n._renderUpdate=function(t){this._setShaderValueMatrix4x4(0,this._owner.transform.worldMatrix);var e=this._owner.getProjectionViewWorldMatrix(t);return this._setShaderValueMatrix4x4(1,e),!0;},n._destroy=function(){t.prototype._destroy.call(this),this._terrainSprite3DOwner=null;},e;}(en),Vn=function(t){function e(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,e.__super.call(this),this._renderState=new _t(),this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new Be(),this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new Tt(),this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new Re(.7,.7,.7),this.ambientColor=new Re(.212,.227,.259),R.shaderHighPrecision&&this.addShaderDefine(cn.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[];}
r(e,"laya.d3.core.scene.Scene",t);var i=e.prototype;return n.imps(i,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),i._setUrl=function(t){this._url=t;},i._getGroup=function(){return this._group;},i._setGroup=function(t){this._group=t;},i._display=function(){n.stage._scenes.push(this),n.stage._scenes.sort(e._sortScenes);for(var t=0,i=this._childs.length;t<i;t++){var r=this._childs[t];r.active&&r._activeHierarchy();}},i._unDisplay=function(){var t=n.stage._scenes;t.splice(t.indexOf(this),1);for(var e=0,i=this._childs.length;e<i;e++){var r=this._childs[e];r.active&&r._inActiveHierarchy();}},i._addChild3D=function(t){t.transform._onWorldTransform(),t._setBelongScene(this),this.displayedInStage&&t.active&&t._activeHierarchy();},i._removeChild3D=function(t){t.transform.parent=null,this.displayedInStage&&t.active&&t._inActiveHierarchy(),t._setUnBelongScene();},i.initOctree=function(t,e,n,i,r){void 0===r&&(r=6),this.treeSize=new Re(t,e,n),this.treeLevel=r,this.treeRoot=new ft(this,0),this.treeRoot.init(i,this.treeSize);},i._prepareUpdateToRenderState=function(t,e){e.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,e.scene=this;},i._prepareSceneToRender=function(t){var e=this._lights.length;if(e>0)for(var n=0,i=0;i<e&&!(this._lights[i]._prepareToScene(t)&&++n>=this._enableLightCount);i++){}},i._updateChilds=function(t){for(var e=0,n=this._childs.length;e<n;++e){this._childs[e]._update(t);}},i._preRenderScene=function(t,e,n){var i=e._viewMatrix,r=e._projectionMatrix,a=e._projectionViewMatrix,o=0,s=0,l=e.camera;for(l.useOcclusionCulling?this.treeRoot?St.renderObjectCullingOctree(n,this,l,i,r,a):St.renderObjectCulling(n,this,l,i,r,a):St.renderObjectCullingNoBoundFrustum(this,l,i,r,a),o=0,s=this._quenes.length;o<s;o++){this._quenes[o]&&this._quenes[o]._preRender(e);}},i._clear=function(t,e){var n=e._viewport,i=e.camera,r=n.x,a=i.renderTargetSize.height-n.y-n.height,o=n.width,s=n.height;t.viewport(r,a,o,s);var l=256,u=i.renderTarget;switch(i.clearFlag){case 0:var h=i.clearColor;if(h){t.enable(3089),t.scissor(r,a,o,s);var c=h.elements;t.clearColor(c[0],c[1],c[2],c[3]),l|=16384;}
if(u)switch(h||(l=16384),u.depthStencilFormat){case 33189:l|=256;break;case 36168:l|=1024;break;case 34041:l|=256,l|=1024;}
t.clear(l),h&&t.disable(3089);break;case 1:case 2:if(u)switch(l=16384,u.depthStencilFormat){case 33189:l|=256;break;case 36168:l|=1024;break;case 34041:l|=256,l|=1024;}
t.clear(l);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.");}},i._renderScene=function(t,e){var n,i=e.camera,r=0,a=0;for(r=0;r<2;r++){(n=this._quenes[r])&&(i.renderTarget?n._render(e,!0):n._render(e,!1));}
if(1===i.clearFlag){var o=i.sky;o&&(L.setCullFace(t,!1),L.setDepthFunc(t,515),L.setDepthMask(t,!1),o._render(e),L.setDepthFunc(t,513),L.setDepthMask(t,!0));}
for(r=2,a=this._quenes.length;r<a;r++){(n=this._quenes[r])&&(n._sortAlpha(e.camera.transform.position),i.renderTarget?n._render(e,!0):n._render(e,!1));}},i._set3DRenderConfig=function(t){t.disable(3042),L._blend=!1,t.blendFunc(770,771),L._sFactor=770,L._dFactor=771,t.disable(2929),L._depthTest=!1,t.enable(2884),L._cullFace=!0,t.depthMask(1),L._depthMask=!0,t.frontFace(2304),L._frontFace=2304;},i._set2DRenderConfig=function(t){L.setBlend(t,!0),L.setBlendFunc(t,1,771),L.setDepthTest(t,!1),L.setCullFace(t,!1),L.setDepthMask(t,!0),L.setFrontFace(t,2305),t.viewport(0,0,b.width,b.height);},i._parseCustomProps=function(t,e,n,i){var r=i.customProps.lightmaps,a=r.length,o=this._lightmaps;o.length=a;for(var s=0;s<a;s++){o[s]=v.getRes(e[r[s].replace(".exr",".png")]);}
this.setlightmaps(o);var l=i.customProps.ambientColor;l&&(this.ambientColor=new Re(l[0],l[1],l[2]));var u=i.customProps.fogColor;u&&(this.fogColor=new Re(u[0],u[1],u[2]));},i._addLight=function(t){this._lights.indexOf(t)<0&&this._lights.push(t);},i._removeLight=function(t){var e=this._lights.indexOf(t);e>=0&&this._lights.splice(e,1);},i._updateScene=function(){var t=this._renderState;this._prepareUpdateToRenderState(R.mainContext,t),this._updateComponents(t),this._updateChilds(t),this._lateUpdateComponents(t),this._time+=t.elapsedTime/1e3,this._shaderValues.setValue(22,this._time);},i._updateSceneConch=function(){var t=this._renderState;this._prepareUpdateToRenderState(R.mainContext,t),this._updateComponents(t),this._lateUpdateComponents(t),this._prepareSceneToRender(t);for(var e=0,n=this._cameraPool.length;e<n;e++){var i=this._cameraPool[e];t.camera=i,i._prepareCameraToRender();}},i._preRenderShadow=function(t,e,n,i,r){this.treeRoot?St.renderShadowObjectCullingOctree(this,e,n,i,r):St.renderShadowObjectCulling(this,e,n,i,r);for(var a=0,o=n.length;a<o;a++){n[a]&&n[a]._preRender(t);}},i._renderShadowMap=function(t,e,n){var i=this.parallelSplitShadowMaps[0];i._calcAllLightCameraInfo(n);var r=i.PSSMNum;this._preRenderShadow(e,i._lightCulling,i._shadowQuenes,i._lightVPMatrix[0],r),this.addShaderDefine(ke.SHADERDEFINE_CAST_SHADOW);var a,o,s;if(r>1)for(var l=0;l<r;l++){a=i.getRenderTarget(l+1),i.beginRenderTarget(l+1),t.clearColor(1,1,1,1),t.clear(16640),t.viewport(0,0,a.width,a.height),e.camera=s=i.getLightCamera(l),s._prepareCameraToRender(),s._prepareCameraViewProject(s.viewMatrix,s.projectionMatrix),e._projectionViewMatrix=i._lightVPMatrix[l+1],(o=i._shadowQuenes[l])._preRender(e),o._renderShadow(e,!1),i.endRenderTarget(l+1);}else a=i.getRenderTarget(1),i.beginRenderTarget(1),t.clearColor(1,1,1,1),t.clear(16640),t.viewport(0,0,a.width,a.height),e.camera=s=i.getLightCamera(0),s._prepareCameraToRender(),s._prepareCameraViewProject(s.viewMatrix,s.projectionMatrix),e._projectionViewMatrix=i._lightVPMatrix[0],(o=i._shadowQuenes[0])._preRender(e),o._renderShadow(e,!0),i.endRenderTarget(1);this.removeShaderDefine(ke.SHADERDEFINE_CAST_SHADOW);},i.addTreeNode=function(t){this.treeRoot.addTreeNode(t);},i.removeTreeNode=function(t){this.treeSize&&t._treeNode&&t._treeNode.removeObject(t);},i.setlightmaps=function(t){this._lightmaps=t;for(var e=0,n=this._renderableSprite3Ds.length;e<n;e++){this._renderableSprite3Ds[e]._render._applyLightMapParams();}},i.getlightmaps=function(){return this._lightmaps;},i.addChildAt=function(t,e){if(!(t instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!t||this.destroyed||t===this)return t;if(t.zOrder&&this._set$P("hasZorder",!0),e>=0&&e<=this._childs.length){if(t._parent===this){var n=this.getChildIndex(t);this._childs.splice(n,1),this._childs.splice(e,0,t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,e)),this._childChanged();}else t.parent&&t.parent.removeChild(t),this._childs===T.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(e,0,t),this.conchModel&&this.conchModel.addChildAt(t.conchModel,e),t.parent=this,this._addChild3D(t);return t;}
throw new Error("appendChildAt:The index is out of bounds");},i.addChild=function(t){if(!(t instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!t||this.destroyed||t===this)return t;if(t.zOrder&&this._set$P("hasZorder",!0),t._parent===this){var e=this.getChildIndex(t);e!==this._childs.length-1&&(this._childs.splice(e,1),this._childs.push(t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,this._childs.length-1)),this._childChanged());}else t.parent&&t.parent.removeChild(t),this._childs===T.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(t),this.conchModel&&this.conchModel.addChildAt(t.conchModel,this._childs.length-1),t.parent=this,this._childChanged(),this._addChild3D(t);return t;},i.removeChildAt=function(t){var e=this.getChildAt(t);return e&&(this._removeChild3D(e),this._childs.splice(t,1),this.conchModel&&this.conchModel.removeChild(e.conchModel),e.parent=null),e;},i.removeChildren=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=2147483647),this._childs&&this._childs.length>0){var n=this._childs;if(0===t&&e>=a){var i=n;this._childs=T.ARRAY_EMPTY;}else i=n.splice(t,e-t);for(var r=0,a=i.length;r<a;r++){this._removeChild3D(i[r]),i[r].parent=null,this.conchModel&&this.conchModel.removeChild(i[r].conchModel);}}
return this;},i.addFrustumCullingObject=function(t){this.treeRoot?this.addTreeNode(t):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(t):this._cullingRenders[this._cullingRendersLength]=t,t._indexInSceneFrustumCullingObjects=this._cullingRendersLength++);},i.removeFrustumCullingObject=function(t){if(this.treeRoot)this.removeTreeNode(t);else{this._cullingRendersLength--;var e=t._indexInSceneFrustumCullingObjects;if(e!==this._cullingRendersLength){var n=this._cullingRenders[this._cullingRendersLength];this._cullingRenders[e]=n,n._indexInSceneFrustumCullingObjects=e,t._indexInSceneFrustumCullingObjects=-1;}}},i.getRenderQueue=function(t){return t<3e3?this._quenes[1]||(this._quenes[1]=new ct(this)):this._quenes[2]||(this._quenes[2]=new ct(this));},i.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new ct(this);},i.addShaderDefine=function(t){this._shaderDefineValue|=t;},i.removeShaderDefine=function(t){this._shaderDefineValue&=~t;},i.addScript=function(t){return this._addComponent(t);},i.getScriptByType=function(t,e){return void 0===e&&(e=0),this._getComponentByType(t,e);},i.getScriptsByType=function(t,e){this._getComponentsByType(t,e);},i.getScriptByIndex=function(t){return this._getComponentByIndex(t);},i.removeScriptByType=function(t,e){void 0===e&&(e=0),this._removeComponentByType(t,e);},i.removeScriptsByType=function(t){this._removeComponentByType(t);},i.removeAllScript=function(){this._removeAllComponent();},i.render=function(t,e,n){S._context.ctx._renderKey=0,this._childs.length>0&&t.addRenderObject(this);},i.renderSubmit=function(){var t=R.mainContext,e=this._renderState;this._set3DRenderConfig(t),this._prepareSceneToRender(this._renderState);var n,i=0,r=0;if(Je.debugMode||ft.debugMode)for(i=0,r=this._cameraPool.length;i<r;i++){n=this._cameraPool[i],Je._debugPhasorSprite.begin(1,n),n.activeInHierarchy&&n._renderCamera(t,e,this),Je._debugPhasorSprite.end();}else for(i=0,r=this._cameraPool.length;i<r;i++){(n=this._cameraPool[i]).activeInHierarchy&&n._renderCamera(t,e,this);}
return this._set2DRenderConfig(t),1;},i.onAsynLoaded=function(t,e,n){var i=e[0];if("Scene"!==i.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var r=e[1];Ze._createNodeByJson(this,i,this,r),this.event("hierarchyloaded",[this]),this.__loaded=!0;},i.destroy=function(e){void 0===e&&(e=!0),this.destroyed||(t.prototype.destroy.call(this,e),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,v.clearRes(this.url),this.loaded||Je._cancelLoadByUrl(this.url));},i.getRenderType=function(){return 0;},i.releaseRender=function(){},i._addComponent=function(t){var e,n=this._componentsMap.indexOf(t);if(-1===n)e=[],this._componentsMap.push(t),this._typeComponentsIndices.push(e);else if(e=this._typeComponentsIndices[n],this._components[e[0]].isSingleton)throw new Error("无法单实例创建"+t+"组件，"+t+"组件已存在！");var i=p.getInstance(t);e.push(this._components.length),this._components.push(i);return i._initialize(this),i;},i._removeComponent=function(t,e){var n=this._typeComponentsIndices[t],i=n[e],r=this._components[i];this._components.splice(i,1),n.splice(e,1),0===n.length&&(this._typeComponentsIndices.splice(t,1),this._componentsMap.splice(t,1));for(var a=0,o=this._componentsMap.length;a<o;a++){for(var s=(n=this._typeComponentsIndices[a]).length-1;s>=0;s--){var l=n[s];if(!(l>i))break;n[s]=--l;}}
r._destroy();},i._getComponentByType=function(t,e){void 0===e&&(e=0);var n=this._componentsMap.indexOf(t);return-1===n?null:this._components[this._typeComponentsIndices[n][e]];},i._getComponentsByType=function(t,e){var n=this._componentsMap.indexOf(t);if(-1!==n){var i=this._typeComponentsIndices[n],r=i.length;e.length=r;for(var a=0;a<r;a++){e[a]=this._components[i[a]];}}else e.length=0;},i._getComponentByIndex=function(t){return this._components[t];},i._removeComponentByType=function(t,e){void 0===e&&(e=0);var n=this._componentsMap.indexOf(t);-1!==n&&this._removeComponent(n,e);},i._removeComponentsByType=function(t){var e=this._componentsMap.indexOf(t);if(-1!==e)for(var n=this._typeComponentsIndices[e],i=0,r=n.length;i<r;n.length<r?r--:i++){this._removeComponent(e,i);}},i._removeAllComponent=function(){for(var t=0,e=this._componentsMap.length;t<e;this._componentsMap.length<e?e--:t++){this._removeComponentsByType(this._componentsMap[t]);}},i._updateComponents=function(t){for(var e=0,n=this._components.length;e<n;e++){var i=this._components[e];!i.started&&(i._start(t),i.started=!0),i.enable&&i._update(t);}},i._lateUpdateComponents=function(t){for(var e=0;e<this._components.length;e++){var n=this._components[e];!n.started&&(n._start(t),n.started=!0),n.enable&&n._lateUpdate(t);}},i._preRenderUpdateComponents=function(t){for(var e=0;e<this._components.length;e++){var n=this._components[e];!n.started&&(n._start(t),n.started=!0),n.enable&&n._preRenderUpdate(t);}},i._postRenderUpdateComponents=function(t){for(var e=0;e<this._components.length;e++){var n=this._components[e];!n.started&&(n._start(t),n.started=!0),n.enable&&n._postRenderUpdate(t);}},a(0,i,"_loaded",null,function(t){this.__loaded=t;}),a(0,i,"fogColor",function(){return this._fogColor;},function(t){this._fogColor=t,this._shaderValues.setValue(0,t.elements);}),a(0,i,"enableFog",function(){return this._enableFog;},function(t){this._enableFog!==t&&(this._enableFog=t,t?(this.addShaderDefine(cn.SHADERDEFINE_FOG),this.removeShaderDefine(cn.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(cn.SHADERDEFINE_FOG));}),a(0,i,"url",function(){return this._url;}),a(0,i,"loaded",function(){return this.__loaded;}),a(0,i,"enableDepthFog",function(){return this._enableDepthFog;},function(t){this._enableDepthFog!=t&&(this._enableDepthFog=t,t?(this.addShaderDefine(cn.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(cn.SHADERDEFINE_FOG)):this.removeShaderDefine(cn.SAHDERDEFINE_DEPTHFOG));}),a(0,i,"fogStart",function(){return this._fogStart;},function(t){this._fogStart=t,this._shaderValues.setValue(1,t);}),a(0,i,"fogRange",function(){return this._fogRange;},function(t){this._fogRange=t,this._shaderValues.setValue(2,t);}),a(0,i,"ambientColor",function(){return this._ambientColor;},function(t){this._ambientColor=t,this._shaderValues.setValue(21,t.elements);}),a(0,i,"scene",function(){return this;}),a(0,i,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice();}),e._sortScenes=function(t,i){if(t.parent===n.stage&&i.parent===n.stage){var r=n.stage._childs;return r.indexOf(t)-r.indexOf(i);}
return t.parent!==n.stage&&i.parent!==n.stage?e._sortScenes(t.parent,i.parent):t.parent===n.stage?-1:1;},e.load=function(t){return n.loader.create(t,null,null,e);},e.FOGCOLOR=0,e.FOGSTART=1,e.FOGRANGE=2,e.LIGHTDIRECTION=3,e.LIGHTDIRCOLOR=4,e.POINTLIGHTPOS=5,e.POINTLIGHTRANGE=6,e.POINTLIGHTATTENUATION=7,e.POINTLIGHTCOLOR=8,e.SPOTLIGHTPOS=9,e.SPOTLIGHTDIRECTION=10,e.SPOTLIGHTSPOT=11,e.SPOTLIGHTRANGE=12,e.SPOTLIGHTATTENUATION=13,e.SPOTLIGHTCOLOR=14,e.SHADOWDISTANCE=15,e.SHADOWLIGHTVIEWPROJECT=16,e.SHADOWMAPPCFOFFSET=17,e.SHADOWMAPTEXTURE1=18,e.SHADOWMAPTEXTURE2=19,e.SHADOWMAPTEXTURE3=20,e.AMBIENTCOLOR=21,e.TIME=22,e;}(E),Nn=function(t){function e(t){e.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new De(),this._shaderValues=new Be(),this._colliders=[],this._id=++e._uniqueIDCounter,this._transform=new nn(this),this.name=t||"Sprite3D-"+e._nameNumberCounter++,this.layer=z.currentCreationLayer,this.active=!0;}
r(e,"laya.d3.core.Sprite3D",dn);var i=e.prototype;return n.imps(i,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),i._setUrl=function(t){this._url=t;},i._getGroup=function(){return this._group;},i._setGroup=function(t){this._group=t;},i._addChild3D=function(t){t.transform.parent=this.transform,this._hierarchyAnimator&&(!t._hierarchyAnimator&&t._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(t,!0,[t.name])),this._scene&&(t._setBelongScene(this._scene),this._activeInHierarchy&&t._active&&t._activeHierarchy());},i._removeChild3D=function(t){t.transform.parent=null,this._scene&&(this._activeInHierarchy&&t._active&&t._inActiveHierarchy(),t._setUnBelongScene()),this._hierarchyAnimator&&(t._hierarchyAnimator==this._hierarchyAnimator&&t._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(t,!1,[t.name]));},i._parseBaseCustomProps=function(t){var e=this.transform.localPosition;e.fromArray(t.translate),this.transform.localPosition=e;var n=this.transform.localRotation;n.fromArray(t.rotation),this.transform.localRotation=n;var i=this.transform.localScale;i.fromArray(t.scale),this.transform.localScale=i;var r=t.layer;null!=r&&(this.layer=z.getLayerByNumber(r));},i._parseCustomComponent=function(t,e,n){for(var i in n){var r=n[i];switch(i){case "Animator":var a=this.addComponent(Sn);if(r.avatarPath)a.avatar=v.getRes(e[r.avatarPath]);else{var o=r.avatar;if(o){a.avatar=v.getRes(e[o.path]);var s=o.linkSprites;s&&t.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[a,s]);}}
for(var l=r.clipPaths,u=l.length,h=0;h<u;h++){a.addClip(v.getRes(e[l[h]]));}
a.clip=v.getRes(e[l[0]]);var c=r.playOnWake;void 0!==c&&(a.playOnWake=c);break;case "Rigidbody":this.addComponent(wn);break;case "SphereCollider":var _=this.addComponent(ei);_.isTrigger=r.isTrigger;var f=_.center;f.fromArray(r.center),_.center=f,_.radius=r.radius;break;case "BoxCollider":var d=this.addComponent(Qn);d.isTrigger=r.isTrigger,d.center.fromArray(r.center);var p=d.size;p.fromArray(r.size),d.size=p;break;case "MeshCollider":this.addComponent(ti);}}},i._onRootNodeHierarchyLoaded=function(t,e){for(var n in e){for(var i=this,r=e[n],a=0,o=r.length;a<o;a++){var s=r[a];if(""===s)break;if(!(i=i.getChildByName(s)))break;}
i&&t.linkSprite3DToAvatarNode(n,i);}},i._setHierarchyAnimator=function(t,e){this._changeHierarchyAnimator(t);for(var n=0,i=this._childs.length;n<i;n++){var r=this._childs[n];r._hierarchyAnimator==e&&r._setHierarchyAnimator(t,e);}},i._clearHierarchyAnimator=function(t,e){this._changeHierarchyAnimator(e);for(var n=0,i=this._childs.length;n<i;n++){var r=this._childs[n];r._hierarchyAnimator==t&&r._clearHierarchyAnimator(t,e);}},i._getAnimatorToLinkSprite3D=function(t,e,n){var i=this.getComponentByType(Sn);if(i&&(i.avatar?i.avatar._version||t._setAnimatorToLinkAvatar(i,e):t._setAnimatorToLinkSprite3DNoAvatar(i,e,n)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){n.unshift(this._parent.name);var r=this._parent;r._hierarchyAnimator&&r._getAnimatorToLinkSprite3D(t,e,n);}},i._setAnimatorToLinkSprite3DNoAvatar=function(t,e,n){var i=0,r=0;for(i=0,r=t.getClipCount();i<r;i++){t._handleSpriteOwnersBySprite(i,e,n,this);}
for(i=0,r=this._childs.length;i<r;i++){var a=this._childs[i],o=n.length;n.push(a.name),a._setAnimatorToLinkSprite3DNoAvatar(t,e,n),n.splice(o,1);}},i._changeHierarchyAnimator=function(t){this._hierarchyAnimator=t;},i._isLinkSpriteToAnimationNode=function(t,e,n){var i=t._avatarNodes.indexOf(e),r=t._cacheSpriteToNodesMap;if(n)this._transform.dummy=e.transform,t._cacheNodesToSpriteMap[i]=r.length,r.push(i);else{this._transform.dummy=null;var a=t._cacheNodesToSpriteMap[i];t._cacheNodesToSpriteMap[i]=null,r.splice(a,1);}},i._setBelongScene=function(t){this._scene=t;for(var e=0,n=this._childs.length;e<n;e++){this._childs[e]._setBelongScene(t);}},i._setUnBelongScene=function(){this._scene=null;for(var t=0,e=this._childs.length;t<e;t++){this._childs[t]._setUnBelongScene();}},i._activeHierarchy=function(){var t=0,e=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),t=0,e=this._colliders.length;t<e;t++){this._layer._addCollider(this._colliders[t]);}
for(this.event("activeinhierarchychanged",!0),t=0,e=this._childs.length;t<e;t++){var n=this._childs[t];n._active&&n._activeHierarchy();}},i._inActiveHierarchy=function(){var t=0,e=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),t=0,e=this._colliders.length;t<e;t++){var n=this._colliders[t];n._clearCollsionMap(),this._layer._removeCollider(n);}
for(this.event("activeinhierarchychanged",!1),t=0,e=this._childs.length;t<e;t++){var i=this._childs[t];i._active&&i._inActiveHierarchy();}},i.addComponent=function(t){var e,n=this._componentsMap.indexOf(t);if(-1===n)e=[],this._componentsMap.push(t),this._typeComponentsIndices.push(e);else if(e=this._typeComponentsIndices[n],this._components[e[0]].isSingleton)throw new Error("无法单实例创建"+t+"组件，"+t+"组件已存在！");var i=p.getInstance(t);if(e.push(this._components.length),this._components.push(i),i instanceof laya.d3.component.physics.Collider){this.getComponentByType(wn)&&(i._isRigidbody=!0),this._activeInHierarchy&&this._layer._addCollider(i),this._colliders.push(i);}else if(i instanceof laya.d3.component.Animator){var r=i;this._setHierarchyAnimator(r,this._parent?this._parent._hierarchyAnimator:null),this._setAnimatorToLinkSprite3DNoAvatar(r,!0,[]);}else if(i instanceof laya.d3.component.Rigidbody)for(var a=0,o=this._colliders.length;a<o;a++){this._colliders[a]._setIsRigidbody(!0);}
return i instanceof laya.d3.component.Script&&this._scripts.push(i),i._initialize(this),i;},i._removeComponent=function(t,e){var n=0,i=0,r=this._typeComponentsIndices[t],a=r[e],o=this._components[a];if(o instanceof laya.d3.component.physics.Collider){var s=o;this._activeInHierarchy&&this._layer._removeCollider(s),this._colliders.splice(this._colliders.indexOf(s),1);}else if(o instanceof laya.d3.component.Animator){var l=o;this._clearHierarchyAnimator(l,this._parent?this._parent._hierarchyAnimator:null);}else if(o instanceof laya.d3.component.Rigidbody)for(n=0,i=this._colliders.length;n<i;n++){var u=this._colliders[n];u._setIsRigidbody(!1);var h=u._runtimeCollisonMap,c=u._runtimeCollisonTestMap;for(var _ in h){delete c[_];}}
for(this._components.splice(a,1),o instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(o),1),r.splice(e,1),0===r.length&&(this._typeComponentsIndices.splice(t,1),this._componentsMap.splice(t,1)),n=0,i=this._componentsMap.length;n<i;n++){for(var f=(r=this._typeComponentsIndices[n]).length-1;f>=0;f--){var d=r[f];if(!(d>a))break;r[f]=--d;}}
o._destroy();},i._clearSelfRenderObjects=function(){},i._addSelfRenderObjects=function(){},i._parseCustomProps=function(t,e,n,i){},i._updateChilds=function(t){var e=this._childs.length;if(0!==e)for(var n=0;n<e;++n){this._childs[n]._update(t);}},i._getSortID=function(t,e){return 1e3*e.id+t._getVertexBuffer().vertexDeclaration.id;},i._update=function(t){t.owner=this,this._activeInHierarchy&&(this._updateComponents(t),this._lateUpdateComponents(t),P.spriteCount++,this._childs.length&&this._updateChilds(t));},i.getProjectionViewWorldMatrix=function(t){return De.multiply(t,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix;},i.loadHierarchy=function(t){this.addChild(laya.d3.core.Sprite3D.load(t));},i.addChildAt=function(t,e){if(!(t instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!t||this.destroyed||t===this)return t;if(t.zOrder&&this._set$P("hasZorder",!0),e>=0&&e<=this._childs.length){if(t._parent===this){var n=this.getChildIndex(t);this._childs.splice(n,1),this._childs.splice(e,0,t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,e)),this._childChanged();}else t.parent&&t.parent.removeChild(t),this._childs===T.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(e,0,t),this.conchModel&&this.conchModel.addChildAt(t.conchModel,e),t.parent=this,this._addChild3D(t);return t;}
throw new Error("appendChildAt:The index is out of bounds");},i.addChild=function(t){if(!(t instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!t||this.destroyed||t===this)return t;if(t.zOrder&&this._set$P("hasZorder",!0),t._parent===this){var e=this.getChildIndex(t);e!==this._childs.length-1&&(this._childs.splice(e,1),this._childs.push(t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,this._childs.length-1)),this._childChanged());}else t.parent&&t.parent.removeChild(t),this._childs===T.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(t),this.conchModel&&this.conchModel.addChildAt(t.conchModel,this._childs.length-1),t.parent=this,this._childChanged(),this._addChild3D(t);return t;},i.removeChildAt=function(t){var e=this.getChildAt(t);return e&&(this._removeChild3D(e),this._childs.splice(t,1),this.conchModel&&this.conchModel.removeChild(e.conchModel),e.parent=null),e;},i.removeChildren=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=2147483647),this._childs&&this._childs.length>0){var n=this._childs;if(0===t&&e>=a){var i=n;this._childs=T.ARRAY_EMPTY;}else i=n.splice(t,e-t);for(var r=0,a=i.length;r<a;r++){this._removeChild3D(i[r]),i[r].parent=null,this.conchModel&&this.conchModel.removeChild(i[r].conchModel);}}
return this;},i.onAsynLoaded=function(t,e,n){var i=e[0];if("Sprite3D"!==i.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var r=e[1];Ze._createNodeByJson(this,i,this,r),this.event("hierarchyloaded",[this]),this.__loaded=!0;},i.cloneTo=function(t){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var e=t;e.name=this.name,e._destroyed=this._destroyed,e.timer=this.timer,e._$P=this._$P,e.active=this._active;var n=e.transform.localPosition;this.transform.localPosition.cloneTo(n),e.transform.localPosition=n;var i=e.transform.localRotation;this.transform.localRotation.cloneTo(i),e.transform.localRotation=i;var r=e.transform.localScale;this.transform.localScale.cloneTo(r),e.transform.localScale=r,e.isStatic=this.isStatic;var a=0,o=0;for(a=0,o=this._componentsMap.length;a<o;a++){var s=e.addComponent(this._componentsMap[a]);this._components[a]._cloneTo(s);}
for(a=0,o=this._childs.length;a<o;a++){e.addChild(this._childs[a].clone());}
var l=e.getComponentByType(Sn);if(l){var u=l._linkSpritesData;if(u)for(var h in u){for(var c=u[h],_=e,f=0,d=c.length;f<d&&(_=_.getChildByName(c[f]));f++){}
if(_){var p=l._avatarNodeMap[h];_._isLinkSpriteToAnimationNode(l,p,!0);}}}},i.clone=function(){var t=new this.constructor();return this.cloneTo(t),t;},i.destroy=function(t){if(void 0===t&&(t=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,t);var e=0,n=0;for(e=0,n=this._components.length;e<n;e++){this._components[e]._destroy();}
this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,v.clearRes(this.url),this.loaded||Je._cancelLoadByUrl(this.url);}},i._handleSpriteToAvatar=function(t,e){t._avatarNodes;var n=t._avatarNodeMap[this.name];n&&n.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(t,n,e);},i._setAnimatorToLinkAvatar=function(t,e){this._handleSpriteToAvatar(t,e);for(var n=0,i=this._childs.length;n<i;n++){this._childs[n]._setAnimatorToLinkAvatar(t,e);}},a(0,i,"activeInHierarchy",function(){return this._activeInHierarchy;}),a(0,i,"_loaded",null,function(t){this.__loaded=t;}),a(0,i,"active",function(){return this._active;},function(t){this._active!==t&&(this._active=t,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(t?this._activeHierarchy():this._inActiveHierarchy()));}),a(0,i,"componentsCount",function(){return this._components.length;}),a(0,i,"loaded",function(){return this.__loaded;}),a(0,i,"id",function(){return this._id;}),a(0,i,"url",function(){return this._url;}),a(0,i,"layer",function(){return this._layer;},function(t){if(this._layer!==t){if(!t)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var e=0,n=this._colliders.length;if(this._layer)for(e=0;e<n;e++){this._layer._removeCollider(this._colliders[e]);}
for(e=0;e<n;e++){t._addCollider(this._colliders[e]);}}
this._layer=t,this.event("layerchanged",t);}}),a(0,i,"scene",function(){return this._scene;}),a(0,i,"transform",function(){return this._transform;}),e.instantiate=function(t,e,n,i,r){void 0===n&&(n=!0);try{var a=t.clone();e&&e.addChild(a);var o=a.transform;}catch(e){console.log(e);}
if(n&&o){var s=o.worldMatrix;t.transform.worldMatrix.cloneTo(s),o.worldMatrix=s;}else i&&(o.position=i),r&&(o.rotation=r);return a;},e.load=function(t){return n.loader.create(t,null,null,e);},e.WORLDMATRIX=0,e.MVPMATRIX=1,e._uniqueIDCounter=0,e._nameNumberCounter=0,e;}(),Un=function(t){function e(t,n,i,r,a,o,s,l){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],e.__super.call(this),!t||!n)throw "Shader Error";this._id=++e._count,this._vs=t,this._ps=n,this._attributeMap=i,this._sceneUniformMap=r,this._cameraUniformMap=a,this._spriteUniformMap=o,this._materialUniformMap=s,this._renderElementUniformMap=l,this.recreateResource();}
r(e,"laya.d3.shader.Shader3D",c);var n=e.prototype;return n.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0;},n.disposeResource=function(){R.mainContext.deleteShader(this._vshader),R.mainContext.deleteShader(this._pshader),R.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0;},n._compile=function(){if(this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var t=[this._vs,this._ps],n=R.mainContext;if(this._program=n.createProgram(),this._vshader=e._createShader(n,t[0],35633),this._pshader=e._createShader(n,t[1],35632),n.attachShader(this._program,this._vshader),n.attachShader(this._program,this._pshader),n.linkProgram(this._program),!S.isConchApp&&cn.debugMode&&!n.getProgramParameter(this._program,35714))throw n.getProgramInfoLog(this._program);var i,r=0,a=0,o=0;for(o=S.isConchApp?n.getProgramParameterEx(this._vs,this._ps,"",35721):n.getProgramParameter(this._program,35721),r=0;r<o;r++){var s=null;i={vartype:"attribute",ivartype:0,attrib:s=S.isConchApp?n.getActiveAttribEx(this._vs,this._ps,"",r):n.getActiveAttrib(this._program,r),location:n.getAttribLocation(this._program,s.name),name:s.name,type:s.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(i);}
var l=0;for(l=S.isConchApp?n.getProgramParameterEx(this._vs,this._ps,"",35718):n.getProgramParameter(this._program,35718),r=0;r<l;r++){var u=null;u=S.isConchApp?n.getActiveUniformEx(this._vs,this._ps,"",r):n.getActiveUniform(this._program,r),(i={vartype:"uniform",ivartype:1,attrib:s,location:n.getUniformLocation(this._program,u.name),name:u.name,type:u.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")>0&&(i.name=i.name.substr(0,i.name.length-3),i.isArray=!0,i.location=n.getUniformLocation(this._program,i.name)),this._uniformParams.push(i);}
for(r=0,a=this._attributeParams.length;r<a;r++){(i=this._attributeParams[r]).indexOfParams=r,i.index=1,i.value=[i.location,null],i.codename=i.name,i.name=null!=this._attributeMap[i.codename]?this._attributeMap[i.codename]:i.codename,this._attributeParamsMap.push(i.name),this._attributeParamsMap.push(i),i._this=this,i.uploadedValue=[],i.fun=this._attribute;}
for(r=0,a=this._uniformParams.length;r<a;r++){switch(i=this._uniformParams[r],i.indexOfParams=r,i.index=1,i.value=[i.location,null],i.codename=i.name,null!=this._sceneUniformMap[i.codename]?(i.name=this._sceneUniformMap[i.codename],this._sceneUniformParamsMap.push(i.name),this._sceneUniformParamsMap.push(i)):null!=this._cameraUniformMap[i.codename]?(i.name=this._cameraUniformMap[i.codename],this._cameraUniformParamsMap.push(i.name),this._cameraUniformParamsMap.push(i)):null!=this._spriteUniformMap[i.codename]?(i.name=this._spriteUniformMap[i.codename],this._spriteUniformParamsMap.push(i.name),this._spriteUniformParamsMap.push(i)):null!=this._materialUniformMap[i.codename]?(i.name=this._materialUniformMap[i.codename],this._materialUniformParamsMap.push(i.name),this._materialUniformParamsMap.push(i)):null!=this._renderElementUniformMap[i.codename]?(i.name=this._renderElementUniformMap[i.codename],this._renderElementUniformParamsMap.push(i.name),this._renderElementUniformParamsMap.push(i)):console.log("Shader:can't find uinform name:"+i.codename+" in shader file."),i._this=this,i.uploadedValue=[],i.type){case 5124:i.fun=i.isArray?this._uniform1iv:this._uniform1i;break;case 5126:i.fun=i.isArray?this._uniform1fv:this._uniform1f;break;case 35664:i.fun=i.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:i.fun=i.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:i.fun=i.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:i.fun=this._uniform_sampler2D;break;case 35680:i.fun=this._uniform_samplerCube;break;case 35676:i.fun=this._uniformMatrix4fv;break;case 35670:i.fun=this._uniform1i;break;case 35674:i.fun=this._uinformMatrix2fv;break;case 35675:i.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!");}}}},n._attribute=function(t,e){var n=R.mainContext,i=f._enableAtributes,r=t.location;return i[r]||n.enableVertexAttribArray(r),n.vertexAttribPointer(r,e[0],e[1],e[2],e[3],e[4]),i[r]=f._bindVertexBuffer,1;},n._uniform1f=function(t,e){var n=t.uploadedValue;return n[0]!==e?(R.mainContext.uniform1f(t.location,n[0]=e),1):0;},n._uniform1fv=function(t,e){if(e.length<4){var n=t.uploadedValue;return n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]?(R.mainContext.uniform1fv(t.location,e),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],1):0;}
return R.mainContext.uniform1fv(t.location,e),1;},n._uniform_vec2=function(t,e){var n=t.uploadedValue;return n[0]!==e[0]||n[1]!==e[1]?(R.mainContext.uniform2f(t.location,n[0]=e[0],n[1]=e[1]),1):0;},n._uniform_vec2v=function(t,e){if(e.length<2){var n=t.uploadedValue;return n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]?(R.mainContext.uniform2fv(t.location,e),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],1):0;}
return R.mainContext.uniform2fv(t.location,e),1;},n._uniform_vec3=function(t,e){var n=t.uploadedValue;return n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]?(R.mainContext.uniform3f(t.location,n[0]=e[0],n[1]=e[1],n[2]=e[2]),1):0;},n._uniform_vec3v=function(t,e){return R.mainContext.uniform3fv(t.location,e),1;},n._uniform_vec4=function(t,e){var n=t.uploadedValue;return n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]?(R.mainContext.uniform4f(t.location,n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]),1):0;},n._uniform_vec4v=function(t,e){return R.mainContext.uniform4fv(t.location,e),1;},n._uniformMatrix2fv=function(t,e){return R.mainContext.uniformMatrix2fv(t.location,!1,e),1;},n._uniformMatrix3fv=function(t,e){return R.mainContext.uniformMatrix3fv(t.location,!1,e),1;},n._uniformMatrix4fv=function(t,e){return R.mainContext.uniformMatrix4fv(t.location,!1,e),1;},n._uinformMatrix2fv=function(t,e){return R.mainContext.uniformMatrix2fv(t.location,!1,e),1;},n._uinformMatrix3fv=function(t,e){return R.mainContext.uniformMatrix3fv(t.location,!1,e),1;},n._uniform1i=function(t,e){var n=t.uploadedValue;return n[0]!==e?(R.mainContext.uniform1i(t.location,n[0]=e),1):0;},n._uniform1iv=function(t,e){return R.mainContext.uniform1iv(t.location,e),1;},n._uniform_ivec2=function(t,e){var n=t.uploadedValue;return n[0]!==e[0]||n[1]!==e[1]?(R.mainContext.uniform2i(t.location,n[0]=e[0],n[1]=e[1]),1):0;},n._uniform_ivec2v=function(t,e){return R.mainContext.uniform2iv(t.location,e),1;},n._uniform_vec3i=function(t,e){var n=t.uploadedValue;return n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]?(R.mainContext.uniform3i(t.location,n[0]=e[0],n[1]=e[1],n[2]=e[2]),1):0;},n._uniform_vec3vi=function(t,e){return R.mainContext.uniform3iv(t.location,e),1;},n._uniform_vec4i=function(t,e){var n=t.uploadedValue;return n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]?(R.mainContext.uniform4i(t.location,n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]),1):0;},n._uniform_vec4vi=function(t,e){return R.mainContext.uniform4iv(t.location,e),1;},n._uniform_sampler2D=function(t,n){var i=n.source||n.defaulteTexture.source,r=R.mainContext,a=t.uploadedValue;if(null==a[0]){if(this._curActTexIndex>7)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return a[0]=this._curActTexIndex,r.uniform1i(t.location,this._curActTexIndex),r.activeTexture(e._TEXTURES[this._curActTexIndex]),i&&L.bindTexture(r,3553,i),this._curActTexIndex++,1;}
return r.activeTexture(e._TEXTURES[a[0]]),i&&L.bindTexture(r,3553,i),0;},n._uniform_samplerCube=function(t,n){var i=n.source||n.defaulteTexture.source,r=R.mainContext,a=t.uploadedValue;if(null==a[0]){if(this._curActTexIndex>7)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return a[0]=this._curActTexIndex,r.uniform1i(t.location,this._curActTexIndex),r.activeTexture(e._TEXTURES[this._curActTexIndex]),i?L.bindTexture(r,34067,i):L.bindTexture(r,34067,si.grayTexture.source),this._curActTexIndex++,1;}
return r.activeTexture(e._TEXTURES[a[0]]),i?L.bindTexture(r,34067,i):L.bindTexture(r,34067,si.grayTexture.source),0;},n._noSetValue=function(t){console.log("no....:"+t.name);},n.bind=function(){return c.activeShader=this,c.bindShader=this,this.activeResource(),L.UseProgram(this._program);},n.uploadAttributes=function(t,e){for(var n,i,r=0,a=0,o=this._attributeParamsMap.length;a<o;a+=2){i=this._attributeParamsMap[a+1],null!=(n=t[this._attributeParamsMap[a]])&&(e&&e[i.name]&&e[i.name].bind(),r+=i.fun.call(this,i,n));}
P.shaderCall+=r;},n.uploadAttributesX=function(t,e){for(var n,i,r=0,a=0,o=this._attributeParamsMap.length;a<o;a+=2){i=this._attributeParamsMap[a+1],null!=(n=t[this._attributeParamsMap[a]])&&(e._bind(),r+=i.fun.call(this,i,n));}
P.shaderCall+=r;},n.uploadSceneUniforms=function(t){for(var e,n,i=0,r=0,a=this._sceneUniformParamsMap.length;r<a;r+=2){n=this._sceneUniformParamsMap[r+1],null!=(e=t[this._sceneUniformParamsMap[r]])&&(i+=n.fun.call(this,n,e));}
P.shaderCall+=i;},n.uploadCameraUniforms=function(t){for(var e,n,i=0,r=0,a=this._cameraUniformParamsMap.length;r<a;r+=2){n=this._cameraUniformParamsMap[r+1],null!=(e=t[this._cameraUniformParamsMap[r]])&&(i+=n.fun.call(this,n,e));}
P.shaderCall+=i;},n.uploadSpriteUniforms=function(t){for(var e,n,i=0,r=0,a=this._spriteUniformParamsMap.length;r<a;r+=2){n=this._spriteUniformParamsMap[r+1],null!=(e=t[this._spriteUniformParamsMap[r]])&&(i+=n.fun.call(this,n,e));}
P.shaderCall+=i;},n.uploadMaterialUniforms=function(t){for(var e,n,i=0,r=0,a=this._materialUniformParamsMap.length;r<a;r+=2){n=this._materialUniformParamsMap[r+1],null!=(e=t[this._materialUniformParamsMap[r]])&&(i+=n.fun.call(this,n,e));}
P.shaderCall+=i;},n.uploadRenderElementUniforms=function(t){for(var e,n,i=0,r=0,a=this._renderElementUniformParamsMap.length;r<a;r+=2){n=this._renderElementUniformParamsMap[r+1],null!=(e=t[this._renderElementUniformParamsMap[r]])&&(i+=n.fun.call(this,n,e));}
P.shaderCall+=i;},e.create=function(t,n,i,r,a,o,s,l){return new e(t,n,i,r,a,o,s,l);},e.addInclude=function(t,e){C.addInclude(t,e);},e._createShader=function(t,e,n){var i=t.createShader(n);if(t.shaderSource(i,e),t.compileShader(i),cn.debugMode&&!t.getShaderParameter(i,35713))throw t.getShaderInfoLog(i);return i;},e.PERIOD_RENDERELEMENT=0,e.PERIOD_MATERIAL=1,e.PERIOD_SPRITE=2,e.PERIOD_CAMERA=3,e.PERIOD_SCENE=4,e._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],e._count=0,i(e,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680};},"nameKey",function(){return this.nameKey=new M();}]),e;}(),Gn=function(t){function e(){e.__super.call(this),this.setShaderName("BLINNPHONG"),this._albedoIntensity=1,this._albedoColor=new Le(1,1,1,1),this._setColor(6,new Le(1,1,1,1)),this._setColor(8,new Re(1,1,1)),this._setNumber(9,.078125),this._setColor(10,new Re(1,1,1)),this._setNumber(0,.5),this._setColor(11,new Le(1,1,0,0)),this._enableLighting=!0,this.renderMode=0;}
r(e,"laya.d3.core.material.BlinnPhongMaterial",t);var o=e.prototype;return o.disableLight=function(){this._addDisablePublicShaderDefine(cn.SHADERDEFINE_POINTLIGHT|cn.SHADERDEFINE_SPOTLIGHT|cn.SHADERDEFINE_DIRECTIONLIGHT);},o.disableFog=function(){this._addDisablePublicShaderDefine(cn.SHADERDEFINE_FOG);},o.cloneTo=function(e){t.prototype.cloneTo.call(this,e);var n=e;n._enableLighting=this._enableLighting,n._albedoIntensity=this._albedoIntensity,this._albedoColor.cloneTo(n._albedoColor);},a(0,o,"renderMode",null,function(t){switch(t){case 0:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this.depthTest=513,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 1:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this.depthTest=513,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this.depthTest=513,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this.depthTest=513,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.");}
this._conchMaterial&&this._conchMaterial.setRenderMode(t);}),a(0,o,"normalTexture",function(){return this._getTexture(2);},function(t){t?this._addShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,t);}),a(0,o,"reflectColor",function(){return this._getColor(10);},function(t){this._setColor(10,t);}),a(0,o,"tilingOffset",function(){return this._getColor(11);},function(t){if(t){var e=t.elements;1!=e[0]||1!=e[1]||0!=e[2]||0!=e[3]?this._addShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_TILINGOFFSET);}else this._removeShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(11,t);}),a(0,o,"specularColor",function(){return this._getColor(8);},function(t){this._setColor(8,t);}),a(0,o,"albedoColor",function(){return this._albedoColor;},function(t){var e=this._getColor(6);Le.scale(t,this._albedoIntensity,e),this._albedoColor=t;}),a(0,o,"albedoIntensity",function(){return this._albedoIntensity;},function(t){if(this._albedoIntensity!==t){var e=this._getColor(6);Le.scale(this._albedoColor,t,e),this._albedoIntensity=t;}}),a(0,o,"albedoTexture",function(){return this._getTexture(1);},function(t){t?this._addShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,t);}),a(0,o,"shininess",function(){return this._getNumber(9);},function(t){t=Math.max(0,Math.min(1,t)),this._setNumber(9,t);}),a(0,o,"specularTexture",function(){return this._getTexture(3);},function(t){t?this._addShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,t);}),a(0,o,"reflectTexture",function(){return this._getTexture(5);},function(t){t?this._addShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(5,t);}),a(0,o,"enableLighting",function(){return this._enableLighting;},function(t){this._enableLighting!==t&&(t?this._removeDisablePublicShaderDefine(cn.SHADERDEFINE_POINTLIGHT|cn.SHADERDEFINE_SPOTLIGHT|cn.SHADERDEFINE_DIRECTIONLIGHT):this._addDisablePublicShaderDefine(cn.SHADERDEFINE_POINTLIGHT|cn.SHADERDEFINE_SPOTLIGHT|cn.SHADERDEFINE_DIRECTIONLIGHT),this._enableLighting=t);}),e.__init__=function(){e.SHADERDEFINE_DIFFUSEMAP=e.shaderDefines.registerDefine("DIFFUSEMAP"),e.SHADERDEFINE_NORMALMAP=e.shaderDefines.registerDefine("NORMALMAP"),e.SHADERDEFINE_SPECULARMAP=e.shaderDefines.registerDefine("SPECULARMAP"),e.SHADERDEFINE_REFLECTMAP=e.shaderDefines.registerDefine("REFLECTMAP"),e.SHADERDEFINE_TILINGOFFSET=e.shaderDefines.registerDefine("TILINGOFFSET"),e.SHADERDEFINE_ADDTIVEFOG=e.shaderDefines.registerDefine("ADDTIVEFOG");},e.load=function(t){return n.loader.create(t,null,null,e);},e.SPECULARSOURCE_DIFFUSEMAPALPHA=0,e.SPECULARSOURCE_SPECULARMAP=0,e.RENDERMODE_OPAQUE=0,e.RENDERMODE_CUTOUT=1,e.RENDERMODE_TRANSPARENT=2,e.RENDERMODE_ADDTIVE=3,e.SHADERDEFINE_DIFFUSEMAP=0,e.SHADERDEFINE_NORMALMAP=0,e.SHADERDEFINE_SPECULARMAP=0,e.SHADERDEFINE_REFLECTMAP=0,e.SHADERDEFINE_TILINGOFFSET=0,e.SHADERDEFINE_ADDTIVEFOG=0,e.ALBEDOTEXTURE=1,e.NORMALTEXTURE=2,e.SPECULARTEXTURE=3,e.EMISSIVETEXTURE=4,e.REFLECTTEXTURE=5,e.ALBEDOCOLOR=6,e.MATERIALSPECULAR=8,e.SHININESS=9,e.MATERIALREFLECT=10,e.TILINGOFFSET=11,i(e,["defaultMaterial",function(){return this.defaultMaterial=new e();},"shaderDefines",function(){return this.shaderDefines=new Ue(gn.shaderDefines);}]),e;}(gn),Bn=function(t){function e(){e.__super.call(this),this.setShaderName("ExtendTerrain"),this.renderMode=1;}
r(e,"laya.d3.core.material.ExtendTerrainMaterial",gn);var n=e.prototype;return n._setDetailNum=function(t){switch(t){case 1:this._addShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM4),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM5);break;case 2:this._addShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM4),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM5);break;case 3:this._addShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM4),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM5);break;case 4:this._addShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM4),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM5);break;case 5:this._addShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM5),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._removeShaderDefine(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM4);}},n.disableLight=function(){this._addDisablePublicShaderDefine(cn.SHADERDEFINE_POINTLIGHT|cn.SHADERDEFINE_SPOTLIGHT|cn.SHADERDEFINE_DIRECTIONLIGHT);},a(0,n,"diffuseScaleOffset2",null,function(t){this._setColor(7,t);}),a(0,n,"splatAlphaTexture",function(){return this._getTexture(0);},function(t){this._setTexture(0,t);}),a(0,n,"diffuseScaleOffset3",null,function(t){this._setColor(8,t);}),a(0,n,"diffuseTexture1",null,function(t){this._setTexture(1,t),this._setDetailNum(1);}),a(0,n,"renderMode",null,function(t){switch(t){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.depthTest=513;break;case 2:this.renderQueue=2e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.depthTest=515;break;default:throw new Error("ExtendTerrainMaterial:renderMode value error.");}
this._conchMaterial&&this._conchMaterial.setRenderMode(t);}),a(0,n,"diffuseTexture2",function(){return this._getTexture(2);},function(t){this._setTexture(2,t),this._setDetailNum(2);}),a(0,n,"diffuseScaleOffset1",null,function(t){this._setColor(6,t);}),a(0,n,"diffuseTexture3",function(){return this._getTexture(3);},function(t){this._setTexture(3,t),this._setDetailNum(3);}),a(0,n,"diffuseTexture4",function(){return this._getTexture(4);},function(t){this._setTexture(4,t),this._setDetailNum(4);}),a(0,n,"diffuseTexture5",function(){return this._getTexture(5);},function(t){this._setTexture(5,t),this._setDetailNum(5);}),a(0,n,"diffuseScaleOffset4",null,function(t){this._setColor(9,t);}),a(0,n,"diffuseScaleOffset5",null,function(t){this._setColor(10,t);}),a(0,n,"albedo",function(){return this._getColor(14);},function(t){this._setColor(14,t);}),a(0,n,"ambientColor",function(){return this._getColor(11);},function(t){this._setColor(11,t);}),a(0,n,"diffuseColor",function(){return this._getColor(12);},function(t){this._setColor(12,t);}),a(0,n,"specularColor",function(){return this._getColor(13);},function(t){this._setColor(13,t);}),e.__init__=function(){e.SHADERDEFINE_DETAIL_NUM1=e.shaderDefines.registerDefine("ExtendTerrain_DETAIL_NUM1"),e.SHADERDEFINE_DETAIL_NUM2=e.shaderDefines.registerDefine("ExtendTerrain_DETAIL_NUM2"),e.SHADERDEFINE_DETAIL_NUM3=e.shaderDefines.registerDefine("ExtendTerrain_DETAIL_NUM3"),e.SHADERDEFINE_DETAIL_NUM4=e.shaderDefines.registerDefine("ExtendTerrain_DETAIL_NUM4"),e.SHADERDEFINE_DETAIL_NUM5=e.shaderDefines.registerDefine("ExtendTerrain_DETAIL_NUM5");},e.RENDERMODE_OPAQUE=1,e.RENDERMODE_TRANSPARENT=2,e.SPLATALPHATEXTURE=0,e.DIFFUSETEXTURE1=1,e.DIFFUSETEXTURE2=2,e.DIFFUSETEXTURE3=3,e.DIFFUSETEXTURE4=4,e.DIFFUSETEXTURE5=5,e.DIFFUSESCALEOFFSET1=6,e.DIFFUSESCALEOFFSET2=7,e.DIFFUSESCALEOFFSET3=8,e.DIFFUSESCALEOFFSET4=9,e.DIFFUSESCALEOFFSET5=10,e.MATERIALAMBIENT=11,e.MATERIALDIFFUSE=12,e.MATERIALSPECULAR=13,e.MATERIALALBEDO=14,e.SHADERDEFINE_DETAIL_NUM1=0,e.SHADERDEFINE_DETAIL_NUM2=0,e.SHADERDEFINE_DETAIL_NUM3=0,e.SHADERDEFINE_DETAIL_NUM4=0,e.SHADERDEFINE_DETAIL_NUM5=0,i(e,["shaderDefines",function(){return this.shaderDefines=new Ue(gn.shaderDefines);}]),e;}(),kn=function(t){function e(){e.__super.call(this),this.setShaderName("GLITTER"),this.renderMode=1,this._setColor(3,new Le(1,1,1,1)),this._setColor(2,new Le(1,1,1,1));}
r(e,"laya.d3.core.material.GlitterMaterial",t);var o=e.prototype;return o.setShaderName=function(e){t.prototype.setShaderName.call(this,e);},a(0,o,"renderMode",null,function(t){switch(t){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0;break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0;break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771;break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771;break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1;break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1;break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771;break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771;break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1;break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1;break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771;break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771;break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1;break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1;break;default:throw new Error("Material:renderMode value error.");}
this._conchMaterial&&this._conchMaterial.setRenderMode(t);}),a(0,o,"diffuseTexture",function(){return this._getTexture(1);},function(t){this._setTexture(1,t);}),a(0,o,"albedo",function(){return this._getColor(2);},function(t){this._setColor(2,t);}),a(0,o,"color",function(){return this._getColor(3);},function(t){this._setColor(3,t);}),e.load=function(t){return n.loader.create(t,null,null,e);},e.RENDERMODE_OPAQUE=1,e.RENDERMODE_OPAQUEDOUBLEFACE=2,e.RENDERMODE_TRANSPARENT=13,e.RENDERMODE_TRANSPARENTDOUBLEFACE=14,e.RENDERMODE_ADDTIVE=15,e.RENDERMODE_ADDTIVEDOUBLEFACE=16,e.RENDERMODE_DEPTHREAD_TRANSPARENT=5,e.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,e.RENDERMODE_DEPTHREAD_ADDTIVE=7,e.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,e.RENDERMODE_NONDEPTH_TRANSPARENT=9,e.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,e.RENDERMODE_NONDEPTH_ADDTIVE=11,e.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,e.DIFFUSETEXTURE=1,e.ALBEDO=2,e.UNICOLOR=3,i(e,["defaultMaterial",function(){return this.defaultMaterial=new e();}]),e;}(gn),Hn=function(t){function e(){if(this._transformUV=null,e.__super.call(this),!laya.d3.core.material.PBRMaterial.pbrlutTex){var t=_.window.__pbrlutdata;if(!t)throw alert("no pbr lutdata, need pbrlut.js"),"no pbr lutdata, need pbrlut.js";var n=ni.create(new Uint32Array(t).buffer,256,256,9728,9728,!1);laya.d3.core.material.PBRMaterial.pbrlutTex=n;}
this._setTexture(4,laya.d3.core.material.PBRMaterial.pbrlutTex),this.setShaderName("PBR"),this._setNumber(0,.5),this.use_groundtruth=!1;}
r(e,"laya.d3.core.material.PBRMaterial",t);var o=e.prototype;return o.disableLight=function(){this._addDisablePublicShaderDefine(cn.SHADERDEFINE_POINTLIGHT|cn.SHADERDEFINE_SPOTLIGHT|cn.SHADERDEFINE_DIRECTIONLIGHT);},o.disableFog=function(){this._addDisablePublicShaderDefine(cn.SHADERDEFINE_FOG);},o.onAsynLoaded=function(e,n,i){t.prototype.onAsynLoaded.call(this,e,n,i);},o.radicalInverse_VdC=function(t){var e=new Uint32Array(1);return function(t){return t=t<<16|t>>>16,t=(1431655765&t)<<1|(2863311530&t)>>>1,t=(858993459&t)<<2|(3435973836&t)>>>2,t=(252645135&t)<<4|(4042322160&t)>>>4,t=(16711935&t)<<8|(4278255360&t)>>>8,e[0]=t,2.3283064365386963e-10*e[0];}(t);},o.createHammersleyTex=function(t,e){var n=new Uint8Array(t*e*4),i=0,r=0;for(r=0;r<t*e;r++){var a=this.radicalInverse_VdC(r);n[i++]=255*a,n[i++]=0,n[i++]=0,n[i++]=255;}
return n;},a(0,o,"normalTexture",function(){return this._getTexture(2);},function(t){this._setTexture(2,t);}),a(0,o,"has_tangent",null,function(t){this._addShaderDefine(e.SHADERDEFINE_HAS_TANGENT);}),a(0,o,"roughness",function(){return this._getNumber(6);},function(t){this._setNumber(6,t),this._addShaderDefine(e.SHADERDEFINE_FIX_ROUGHNESS);}),a(0,o,"metaless",function(){return this._getNumber(7);},function(t){this._setNumber(7,t),this._addShaderDefine(e.SHADERDEFINE_FIX_METALESS);}),a(0,o,"pbrlutTexture",function(){return this._getTexture(4);},function(t){this._setTexture(4,t);}),a(0,o,"use_groundtruth",null,function(t){if(t){if(this._addShaderDefine(e.SHADERDEFINE_USE_GROUNDTRUTH),!laya.d3.core.material.PBRMaterial.HammersleyNoiseTex){var n=this.createHammersleyTex(32,32);laya.d3.core.material.PBRMaterial.HammersleyNoiseTex=ni.create(n.buffer,32,32,9728,9728,!1);}
this._setTexture(15,e.HammersleyNoiseTex);}else laya.d3.core.material.PBRMaterial.HammersleyNoiseTex=null,this._removeShaderDefine(e.SHADERDEFINE_USE_GROUNDTRUTH);}),a(0,o,"transformUV",function(){return this._transformUV;},function(t){this._transformUV=t,this._setMatrix4x4(8,t.matrix),this._conchMaterial&&this._conchMaterial.setShaderValue(8,t.matrix.elements,0);}),a(0,o,"diffuseTexture",function(){return this._getTexture(1);},function(t){this._setTexture(1,t);}),a(0,o,"renderMode",null,function(t){switch(t){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1;break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1;break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3;break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771;break;default:throw new Error("PBRMaterial:renderMode value error.");}}),a(0,o,"pbrInfoTexture",function(){return this._getTexture(3);},function(t){this._setTexture(3,t),this._addShaderDefine(e.SHADERDEFINE_HAS_PBRINFO);}),a(0,o,"testClipZ",null,function(t){this._addShaderDefine(e.SHADERDEFINE_TEST_CLIPZ);}),e.__init__=function(){e.SHADERDEFINE_FIX_METALESS=e.shaderDefines.registerDefine("FIX_METALESS"),e.SHADERDEFINE_FIX_ROUGHNESS=e.shaderDefines.registerDefine("FIX_ROUGHNESS"),e.SHADERDEFINE_HAS_TANGENT=e.shaderDefines.registerDefine("HAS_TANGENT"),e.SHADERDEFINE_HAS_PBRINFO=e.shaderDefines.registerDefine("HAS_PBRINFO"),e.SHADERDEFINE_USE_GROUNDTRUTH=e.shaderDefines.registerDefine("USE_GROUNDTRUTH"),e.SHADERDEFINE_TEST_CLIPZ=e.shaderDefines.registerDefine("CLIPZ");},e.load=function(t){return n.loader.create(t,null,null,e);},e.DIFFUSETEXTURE=1,e.NORMALTEXTURE=2,e.PBRINFOTEXTURE=3,e.PBRLUTTEXTURE=4,e.UVANIAGE=5,e.MATERIALROUGHNESS=6,e.MATERIALMETALESS=7,e.UVMATRIX=8,e.UVAGE=9,e.AOOBJPOS=14,e.HSNOISETEXTURE=15,e.SHADERDEFINE_FIX_ROUGHNESS=0,e.SHADERDEFINE_FIX_METALESS=0,e.SHADERDEFINE_HAS_TANGENT=0,e.SHADERDEFINE_TEST_CLIPZ=0,e.SHADERDEFINE_HAS_PBRINFO=0,e.SHADERDEFINE_USE_GROUNDTRUTH=0,e.RENDERMODE_OPAQUE=1,e.RENDERMODE_OPAQUEDOUBLEFACE=2,e.RENDERMODE_CUTOUT=3,e.RENDERMODE_CUTOUTDOUBLEFACE=4,e.RENDERMODE_TRANSPARENT=13,e.pbrlutTex=null,e.HammersleyNoiseTex=null,i(e,["defaultMaterial",function(){return this.defaultMaterial=new e();},"shaderDefines",function(){return this.shaderDefines=new Ue(gn.shaderDefines);}]),e;}(gn),zn=function(t){function e(){e.__super.call(this),this.setShaderName("PBRSpecular"),this._setColor(7,new Le(1,1,1,1)),this._setColor(9,new Le(0,0,0,0)),this._setColor(8,new Le(.2,.2,.2,.2)),this._setNumber(10,.5),this._setNumber(11,1),this._setNumber(12,0),this._setNumber(13,1),this._setNumber(14,1),this._setNumber(15,.001),this._setBool(16,!1),this._setNumber(0,.5);}
r(e,"laya.d3.core.material.PBRSpecularMaterial",gn);var n=e.prototype;return a(0,n,"albedoColor",function(){return this._getColor(7);},function(t){this._setColor(7,t);}),a(0,n,"specularTexture",function(){return this._getTexture(2);},function(t){t?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_SPECULARTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_SPECULARTEXTURE),this._setTexture(2,t);}),a(0,n,"albedoTexture",function(){return this._getTexture(1);},function(t){t?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_DIFFUSETEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_DIFFUSETEXTURE),this._setTexture(1,t);}),a(0,n,"occlusionTexture",function(){return this._getTexture(5);},function(t){t?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_OCCLUSIONTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_OCCLUSIONTEXTURE),this._setTexture(5,t);}),a(0,n,"normalTexture",function(){return this._getTexture(3);},function(t){t?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_NORMALTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_NORMALTEXTURE),this._setTexture(3,t);}),a(0,n,"parallaxTexture",function(){return this._getTexture(4);},function(t){t?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_PARALLAXTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_PARALLAXTEXTURE),this._setTexture(4,t);}),a(0,n,"emissionColor",function(){return this._getColor(9);},function(t){this._setColor(9,t);}),a(0,n,"normalTextureScale",function(){return this._getNumber(14);},function(t){this._setNumber(14,t);}),a(0,n,"parallaxTextureScale",function(){return this._getNumber(15);},function(t){t=Math.max(.005,Math.min(.08,t)),this._setNumber(15,t);}),a(0,n,"occlusionTextureStrength",function(){return this._getNumber(13);},function(t){t=Math.max(0,Math.min(1,t)),this._setNumber(13,t);}),a(0,n,"specularColor",function(){return this._getColor(8);},function(t){this._setColor(8,t);}),a(0,n,"smoothness",function(){return this._getNumber(10);},function(t){t=Math.max(0,Math.min(1,t)),this._setNumber(10,t);}),a(0,n,"smoothnessTextureScale",function(){return this._getNumber(11);},function(t){t=Math.max(0,Math.min(1,t)),this._setNumber(11,t);}),a(0,n,"smoothnessSource",function(){return this._getNumber(12);},function(t){1==t?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA):(this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA),t=0),this._setNumber(12,t);}),a(0,n,"enableEmission",function(){return this._getBool(16);},function(t){t?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_EMISSION):this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_EMISSION),this._setBool(16,t);}),a(0,n,"emissionTexture",function(){return this._getTexture(6);},function(t){t?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_EMISSIONTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_EMISSIONTEXTURE),this._setTexture(6,t);}),a(0,n,"tilingOffset",function(){return this._getColor(17);},function(t){if(t){var e=t.elements;1!=e[0]||1!=e[1]||0!=e[2]||0!=e[3]?this._addShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_TILINGOFFSET);}else this._removeShaderDefine(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(17,t);}),e.__init__=function(){e.SHADERDEFINE_DIFFUSETEXTURE=e.shaderDefines.registerDefine("DIFFUSETEXTURE"),e.SHADERDEFINE_SPECULARTEXTURE=e.shaderDefines.registerDefine("SPECULARTEXTURE"),e.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA=e.shaderDefines.registerDefine("SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA"),e.SHADERDEFINE_NORMALTEXTURE=e.shaderDefines.registerDefine("NORMALTEXTURE"),e.SHADERDEFINE_PARALLAXTEXTURE=e.shaderDefines.registerDefine("PARALLAXTEXTURE"),e.SHADERDEFINE_OCCLUSIONTEXTURE=e.shaderDefines.registerDefine("OCCLUSIONTEXTURE"),e.SHADERDEFINE_EMISSION=e.shaderDefines.registerDefine("EMISSION"),e.SHADERDEFINE_EMISSIONTEXTURE=e.shaderDefines.registerDefine("EMISSIONTEXTURE"),e.SHADERDEFINE_TILINGOFFSET=e.shaderDefines.registerDefine("TILINGOFFSET");},e.SmoothnessSource_MetallicGlossTexture_Alpha=0,e.SmoothnessSource_DiffuseTexture_Alpha=1,e.SHADERDEFINE_DIFFUSETEXTURE=0,e.SHADERDEFINE_NORMALTEXTURE=0,e.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA=0,e.SHADERDEFINE_SPECULARTEXTURE=0,e.SHADERDEFINE_OCCLUSIONTEXTURE=0,e.SHADERDEFINE_PARALLAXTEXTURE=0,e.SHADERDEFINE_EMISSION=0,e.SHADERDEFINE_EMISSIONTEXTURE=0,e.SHADERDEFINE_TILINGOFFSET=0,e.DIFFUSETEXTURE=1,e.SPECULARTEXTURE=2,e.NORMALTEXTURE=3,e.PARALLAXTEXTURE=4,e.OCCLUSIONTEXTURE=5,e.EMISSIONTEXTURE=6,e.DIFFUSECOLOR=7,e.SPECULARCOLOR=8,e.EMISSIONCOLOR=9,e.SMOOTHNESS=10,e.SMOOTHNESSSCALE=11,e.SMOOTHNESSSOURCE=12,e.OCCLUSIONSTRENGTH=13,e.NORMALSCALE=14,e.PARALLAXSCALE=15,e.ENABLEEMISSION=16,e.TILINGOFFSET=17,i(e,["shaderDefines",function(){return this.shaderDefines=new Ue(gn.shaderDefines);}]),e;}(),jn=function(t){function e(){e.__super.call(this),this.setShaderName("PBRStandard"),this._setColor(7,new Le(1,1,1,1)),this._setColor(8,new Le(0,0,0,0)),this._setNumber(9,0),this._setNumber(10,.5),this._setNumber(11,1),this._setNumber(12,0),this._setNumber(13,1),this._setNumber(14,1),this._setNumber(15,.001),this._setBool(16,!1),this._setNumber(0,.5);}
r(e,"laya.d3.core.material.PBRStandardMaterial",gn);var n=e.prototype;return a(0,n,"albedoColor",function(){return this._getColor(7);},function(t){this._setColor(7,t);}),a(0,n,"albedoTexture",function(){return this._getTexture(1);},function(t){t?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_DIFFUSETEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_DIFFUSETEXTURE),this._setTexture(1,t);}),a(0,n,"enableEmission",function(){return this._getBool(16);},function(t){t?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_EMISSION):this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_EMISSION),this._setBool(16,t);}),a(0,n,"metallicGlossTexture",function(){return this._getTexture(2);},function(t){t?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_METALLICGLOSSTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_METALLICGLOSSTEXTURE),this._setTexture(2,t);}),a(0,n,"occlusionTexture",function(){return this._getTexture(5);},function(t){t?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_OCCLUSIONTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_OCCLUSIONTEXTURE),this._setTexture(5,t);}),a(0,n,"normalTexture",function(){return this._getTexture(3);},function(t){t?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_NORMALTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_NORMALTEXTURE),this._setTexture(3,t);}),a(0,n,"parallaxTexture",function(){return this._getTexture(4);},function(t){t?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_PARALLAXTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_PARALLAXTEXTURE),this._setTexture(4,t);}),a(0,n,"emissionColor",function(){return this._getColor(8);},function(t){this._setColor(8,t);}),a(0,n,"normalTextureScale",function(){return this._getNumber(14);},function(t){this._setNumber(14,t);}),a(0,n,"parallaxTextureScale",function(){return this._getNumber(15);},function(t){t=Math.max(.005,Math.min(.08,t)),this._setNumber(15,t);}),a(0,n,"occlusionTextureStrength",function(){return this._getNumber(13);},function(t){t=Math.max(0,Math.min(1,t)),this._setNumber(13,t);}),a(0,n,"metallic",function(){return this._getNumber(9);},function(t){t=Math.max(0,Math.min(1,t)),this._setNumber(9,t);}),a(0,n,"smoothness",function(){return this._getNumber(10);},function(t){t=Math.max(0,Math.min(1,t)),this._setNumber(10,t);}),a(0,n,"smoothnessTextureScale",function(){return this._getNumber(11);},function(t){t=Math.max(0,Math.min(1,t)),this._setNumber(11,t);}),a(0,n,"smoothnessSource",function(){return this._getNumber(12);},function(t){1==t?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA):(this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA),t=0),this._setNumber(12,t);}),a(0,n,"emissionTexture",function(){return this._getTexture(6);},function(t){t?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_EMISSIONTEXTURE):this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_EMISSIONTEXTURE),this._setTexture(6,t);}),a(0,n,"tilingOffset",function(){return this._getColor(17);},function(t){if(t){var e=t.elements;1!=e[0]||1!=e[1]||0!=e[2]||0!=e[3]?this._addShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_TILINGOFFSET);}else this._removeShaderDefine(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(17,t);}),e.__init__=function(){e.SHADERDEFINE_DIFFUSETEXTURE=e.shaderDefines.registerDefine("DIFFUSETEXTURE"),e.SHADERDEFINE_METALLICGLOSSTEXTURE=e.shaderDefines.registerDefine("METALLICGLOSSTEXTURE"),e.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA=e.shaderDefines.registerDefine("SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA"),e.SHADERDEFINE_NORMALTEXTURE=e.shaderDefines.registerDefine("NORMALTEXTURE"),e.SHADERDEFINE_PARALLAXTEXTURE=e.shaderDefines.registerDefine("PARALLAXTEXTURE"),e.SHADERDEFINE_OCCLUSIONTEXTURE=e.shaderDefines.registerDefine("OCCLUSIONTEXTURE"),e.SHADERDEFINE_EMISSION=e.shaderDefines.registerDefine("EMISSION"),e.SHADERDEFINE_EMISSIONTEXTURE=e.shaderDefines.registerDefine("EMISSIONTEXTURE"),e.SHADERDEFINE_TILINGOFFSET=e.shaderDefines.registerDefine("TILINGOFFSET");},e.SmoothnessSource_MetallicGlossTexture_Alpha=0,e.SmoothnessSource_DiffuseTexture_Alpha=1,e.SHADERDEFINE_DIFFUSETEXTURE=0,e.SHADERDEFINE_NORMALTEXTURE=0,e.SHADERDEFINE_SMOOTHNESSSOURCE_DIFFUSETEXTURE_ALPHA=0,e.SHADERDEFINE_METALLICGLOSSTEXTURE=0,e.SHADERDEFINE_OCCLUSIONTEXTURE=0,e.SHADERDEFINE_PARALLAXTEXTURE=0,e.SHADERDEFINE_EMISSION=0,e.SHADERDEFINE_EMISSIONTEXTURE=0,e.SHADERDEFINE_TILINGOFFSET=0,e.DIFFUSETEXTURE=1,e.METALLICGLOSSTEXTURE=2,e.NORMALTEXTURE=3,e.PARALLAXTEXTURE=4,e.OCCLUSIONTEXTURE=5,e.EMISSIONTEXTURE=6,e.DIFFUSECOLOR=7,e.EMISSIONCOLOR=8,e.METALLIC=9,e.SMOOTHNESS=10,e.SMOOTHNESSSCALE=11,e.SMOOTHNESSSOURCE=12,e.OCCLUSIONSTRENGTH=13,e.NORMALSCALE=14,e.PARALLAXSCALE=15,e.ENABLEEMISSION=16,e.TILINGOFFSET=17,i(e,["shaderDefines",function(){return this.shaderDefines=new Ue(gn.shaderDefines);}]),e;}(),Wn=function(t){function e(){this._transformUV=null,e.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new Re(.6,.6,.6)),this._setColor(10,new Re(1,1,1)),this._setColor(11,new Le(1,1,1,8)),this._setColor(12,new Re(1,1,1)),this._setColor(7,new Le(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new Le(1,1,0,0)),this.renderMode=1;}
r(e,"laya.d3.core.material.StandardMaterial",t);var o=e.prototype;return o.disableLight=function(){this._addDisablePublicShaderDefine(cn.SHADERDEFINE_POINTLIGHT|cn.SHADERDEFINE_SPOTLIGHT|cn.SHADERDEFINE_DIRECTIONLIGHT);},o.disableFog=function(){this._addDisablePublicShaderDefine(cn.SHADERDEFINE_FOG);},o.onAsynLoaded=function(n,i,r){var a=i[0];if(a.version)t.prototype.onAsynLoaded.call(this,n,i,r);else{var o=i[1],s=a.props;for(var l in s){this[l]=s[l];}
e._parseStandardMaterial(o,this,a),this._endLoaded();}},o.cloneTo=function(e){t.prototype.cloneTo.call(this,e);var n=e;this._transformUV&&(n._transformUV=this._transformUV.clone());},a(0,o,"ambientColor",function(){return this._getColor(9);},function(t){this._setColor(9,t);}),a(0,o,"ambientTexture",function(){return this._getTexture(5);},function(t){t?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,t);}),a(0,o,"renderMode",null,function(t){switch(t){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.");}
this._conchMaterial&&this._conchMaterial.setRenderMode(t);}),a(0,o,"reflectColor",function(){return this._getColor(12);},function(t){this._setColor(12,t);}),a(0,o,"tilingOffset",function(){return this._getColor(15);},function(t){if(t){var e=t.elements;1!=e[0]||1!=e[1]||0!=e[2]||0!=e[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,t);}),a(0,o,"albedo",function(){return this._getColor(7);},function(t){this._setColor(7,t);}),a(0,o,"diffuseColor",function(){return this._getColor(10);},function(t){this._setColor(10,t);}),a(0,o,"albedoColor",function(){return this._getColor(7);},function(t){this._setColor(7,t);}),a(0,o,"specularColor",function(){return this._getColor(11);},function(t){this._setColor(11,t);}),a(0,o,"diffuseTexture",function(){return this._getTexture(1);},function(t){t?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,t);}),a(0,o,"normalTexture",function(){return this._getTexture(2);},function(t){t?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,t);}),a(0,o,"specularTexture",function(){return this._getTexture(3);},function(t){t?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,t);}),a(0,o,"emissiveTexture",function(){return this._getTexture(4);},function(t){t?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,t);}),a(0,o,"reflectTexture",function(){return this._getTexture(6);},function(t){t?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,t);}),a(0,o,"transformUV",function(){return this._transformUV;},function(t){this._transformUV=t,this._setMatrix4x4(13,t.matrix),t?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,t.matrix.elements,0);}),e.__init__=function(){e.SHADERDEFINE_DIFFUSEMAP=e.shaderDefines.registerDefine("DIFFUSEMAP"),e.SHADERDEFINE_NORMALMAP=e.shaderDefines.registerDefine("NORMALMAP"),e.SHADERDEFINE_SPECULARMAP=e.shaderDefines.registerDefine("SPECULARMAP"),e.SHADERDEFINE_EMISSIVEMAP=e.shaderDefines.registerDefine("EMISSIVEMAP"),e.SHADERDEFINE_AMBIENTMAP=e.shaderDefines.registerDefine("AMBIENTMAP"),e.SHADERDEFINE_REFLECTMAP=e.shaderDefines.registerDefine("REFLECTMAP"),e.SHADERDEFINE_UVTRANSFORM=e.shaderDefines.registerDefine("UVTRANSFORM"),e.SHADERDEFINE_TILINGOFFSET=e.shaderDefines.registerDefine("TILINGOFFSET"),e.SHADERDEFINE_ADDTIVEFOG=e.shaderDefines.registerDefine("ADDTIVEFOG");},e.load=function(t){return n.loader.create(t,null,null,e);},e._parseStandardMaterial=function(t,e,n){var i=n.customProps,r=i.ambientColor;e.ambientColor=new Re(r[0],r[1],r[2]);var a=i.diffuseColor;e.diffuseColor=new Re(a[0],a[1],a[2]);var o=i.specularColor;e.specularColor=new Le(o[0],o[1],o[2],o[3]);var s=i.reflectColor;e.reflectColor=new Re(s[0],s[1],s[2]);var l=i.albedoColor;l&&(e.albedo=new Le(l[0],l[1],l[2],l[3]));var u=i.diffuseTexture.texture2D;u&&(e.diffuseTexture=v.getRes(t[u]));var h=i.normalTexture.texture2D;h&&(e.normalTexture=v.getRes(t[h]));var c=i.specularTexture.texture2D;c&&(e.specularTexture=v.getRes(t[c]));var _=i.emissiveTexture.texture2D;_&&(e.emissiveTexture=v.getRes(t[_]));var f=i.ambientTexture.texture2D;f&&(e.ambientTexture=v.getRes(t[f]));var d=i.reflectTexture.texture2D;d&&(e.reflectTexture=v.getRes(t[d]));},e.RENDERMODE_OPAQUE=1,e.RENDERMODE_OPAQUEDOUBLEFACE=2,e.RENDERMODE_CUTOUT=3,e.RENDERMODE_CUTOUTDOUBLEFACE=4,e.RENDERMODE_TRANSPARENT=13,e.RENDERMODE_TRANSPARENTDOUBLEFACE=14,e.RENDERMODE_ADDTIVE=15,e.RENDERMODE_ADDTIVEDOUBLEFACE=16,e.RENDERMODE_DEPTHREAD_TRANSPARENT=5,e.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,e.RENDERMODE_DEPTHREAD_ADDTIVE=7,e.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,e.RENDERMODE_NONDEPTH_TRANSPARENT=9,e.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,e.RENDERMODE_NONDEPTH_ADDTIVE=11,e.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,e.SHADERDEFINE_DIFFUSEMAP=0,e.SHADERDEFINE_NORMALMAP=0,e.SHADERDEFINE_SPECULARMAP=0,e.SHADERDEFINE_EMISSIVEMAP=0,e.SHADERDEFINE_AMBIENTMAP=0,e.SHADERDEFINE_REFLECTMAP=0,e.SHADERDEFINE_UVTRANSFORM=0,e.SHADERDEFINE_TILINGOFFSET=0,e.SHADERDEFINE_ADDTIVEFOG=0,e.DIFFUSETEXTURE=1,e.NORMALTEXTURE=2,e.SPECULARTEXTURE=3,e.EMISSIVETEXTURE=4,e.AMBIENTTEXTURE=5,e.REFLECTTEXTURE=6,e.ALBEDO=7,e.UVANIAGE=8,e.MATERIALAMBIENT=9,e.MATERIALDIFFUSE=10,e.MATERIALSPECULAR=11,e.MATERIALREFLECT=12,e.UVMATRIX=13,e.UVAGE=14,e.TILINGOFFSET=15,i(e,["defaultMaterial",function(){return this.defaultMaterial=new e();},"shaderDefines",function(){return this.shaderDefines=new Ue(gn.shaderDefines);}]),e;}(gn),Kn=function(t){function e(){this._diffuseScale1=null,this._diffuseScale2=null,this._diffuseScale3=null,this._diffuseScale4=null,e.__super.call(this),this.setShaderName("Terrain"),this.renderMode=1,this._diffuseScale1=new Oe(),this._diffuseScale2=new Oe(),this._diffuseScale3=new Oe(),this._diffuseScale4=new Oe(),this.ambientColor=new Re(.6,.6,.6),this.diffuseColor=new Re(1,1,1),this.specularColor=new Le(.2,.2,.2,32);}
r(e,"laya.d3.core.material.TerrainMaterial",t);var o=e.prototype;return o.setDiffuseScale1=function(t,e){this._diffuseScale1.x=t,this._diffuseScale1.y=e,this._setColor(6,this._diffuseScale1);},o.setDiffuseScale2=function(t,e){this._diffuseScale2.x=t,this._diffuseScale2.y=e,this._setColor(7,this._diffuseScale2);},o.setDiffuseScale3=function(t,e){this._diffuseScale3.x=t,this._diffuseScale3.y=e,this._setColor(8,this._diffuseScale3);},o.setDiffuseScale4=function(t,e){this._diffuseScale4.x=t,this._diffuseScale4.y=e,this._setColor(9,this._diffuseScale4);},o.setDetailNum=function(t){switch(t){case 1:this._addShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM4);break;case 2:this._addShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM4);break;case 3:this._addShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM4);break;case 4:this._addShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM4),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._removeShaderDefine(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM3);}},o.disableLight=function(){this._addDisablePublicShaderDefine(cn.SHADERDEFINE_POINTLIGHT|cn.SHADERDEFINE_SPOTLIGHT|cn.SHADERDEFINE_DIRECTIONLIGHT);},o.setShaderName=function(e){t.prototype.setShaderName.call(this,e);},a(0,o,"renderMode",null,function(t){switch(t){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.depthTest=513;break;case 2:this.renderQueue=2e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.depthTest=515;break;default:throw new Error("TerrainMaterial:renderMode value error.");}
this._conchMaterial&&this._conchMaterial.setRenderMode(t);}),a(0,o,"diffuseTexture2",function(){return this._getTexture(3);},function(t){this._setTexture(3,t);}),a(0,o,"ambientColor",function(){return this._getColor(10);},function(t){this._setColor(10,t);}),a(0,o,"diffuseTexture4",function(){return this._getTexture(5);},function(t){this._setTexture(5,t);}),a(0,o,"diffuseColor",function(){return this._getColor(11);},function(t){this._setColor(11,t);}),a(0,o,"diffuseTexture1",function(){return this._getTexture(2);},function(t){this._setTexture(2,t);}),a(0,o,"specularColor",function(){return this._getColor(12);},function(t){this._setColor(12,t);}),a(0,o,"diffuseTexture3",function(){return this._getTexture(4);},function(t){this._setTexture(4,t);}),a(0,o,"splatAlphaTexture",function(){return this._getTexture(0);},function(t){this._setTexture(0,t);}),a(0,o,"normalTexture",function(){return this._getTexture(1);},function(t){this._setTexture(1,t);}),e.__init__=function(){e.SHADERDEFINE_DETAIL_NUM1=e.shaderDefines.registerDefine("DETAIL_NUM1"),e.SHADERDEFINE_DETAIL_NUM2=e.shaderDefines.registerDefine("DETAIL_NUM2"),e.SHADERDEFINE_DETAIL_NUM4=e.shaderDefines.registerDefine("DETAIL_NUM4"),e.SHADERDEFINE_DETAIL_NUM3=e.shaderDefines.registerDefine("DETAIL_NUM3");},e.load=function(t){return n.loader.create(t,null,null,e);},e.RENDERMODE_OPAQUE=1,e.RENDERMODE_TRANSPARENT=2,e.SPLATALPHATEXTURE=0,e.NORMALTEXTURE=1,e.DIFFUSETEXTURE1=2,e.DIFFUSETEXTURE2=3,e.DIFFUSETEXTURE3=4,e.DIFFUSETEXTURE4=5,e.DIFFUSESCALE1=6,e.DIFFUSESCALE2=7,e.DIFFUSESCALE3=8,e.DIFFUSESCALE4=9,e.MATERIALAMBIENT=10,e.MATERIALDIFFUSE=11,e.MATERIALSPECULAR=12,e.SHADERDEFINE_DETAIL_NUM1=0,e.SHADERDEFINE_DETAIL_NUM2=0,e.SHADERDEFINE_DETAIL_NUM3=0,e.SHADERDEFINE_DETAIL_NUM4=0,i(e,["defaultMaterial",function(){return this.defaultMaterial=new e();},"shaderDefines",function(){return this.shaderDefines=new Ue(gn.shaderDefines);}]),e;}(gn),Xn=function(t){function e(){this._useVertexDeep=!1,e.__super.call(this),this.setShaderName("Water");}
r(e,"laya.d3.core.material.WaterMaterial",t);var o=e.prototype;return o.disableFog=function(){this._addDisablePublicShaderDefine(cn.SHADERDEFINE_FOG);},o.onAsynLoaded=function(e,n,i){t.prototype.onAsynLoaded.call(this,e,n,i);},a(0,o,"diffuseTexture",function(){return this._getTexture(1);},function(t){this._setTexture(1,t);}),a(0,o,"normalTexture",function(){return this._getTexture(2);},function(t){this._setTexture(2,t);}),a(0,o,"underWaterTexture",function(){return this._getTexture(3);},function(t){this._setTexture(3,t);}),a(0,o,"deepColorTexture",function(){return this._getTexture(10);},function(t){this._setTexture(10,t);}),a(0,o,"useFoam",null,function(t){t?this._addShaderDefine(e.SHADERDEFINE_USE_FOAM):this._removeShaderDefine(e.SHADERDEFINE_USE_FOAM);}),a(0,o,"skyTexture",function(){return this._getTexture(11);},function(t){this._setTexture(11,t);}),a(0,o,"deepScale",function(){return this._getNumber(20);},function(t){this._setNumber(20,t);}),a(0,o,"detailTexture",function(){return this._getTexture(9);},function(t){this._setTexture(9,t);}),a(0,o,"foamTexture",function(){return this._getTexture(17);},function(t){this._setTexture(17,t);}),a(0,o,"waterInfoTexture",function(){return this._getTexture(16);},function(t){this._setTexture(16,t);}),a(0,o,"vertexDispTexture",function(){return this._getTexture(4);},function(t){this._setTexture(4,t);}),a(0,o,"currentTm",function(){return this._getNumber(8);},function(t){this._setNumber(8,t);}),a(0,o,"waveInfo",function(){return this._getBuffer(12);},function(t){this._setBuffer(12,t);}),a(0,o,"waveInfoD",function(){return this._getBuffer(13);},function(t){this._setBuffer(13,t);}),a(0,o,"waveMainDir",function(){return this._getNumber(14);},function(t){this._setNumber(14,t*Math.PI/180);}),a(0,o,"geoWaveUVScale",function(){return this._getNumber(18);},function(t){this._setNumber(18,t);}),a(0,o,"windSpeed",function(){return 0;},function(t){}),a(0,o,"scrsize",null,function(t){this._setBuffer(15,t);}),a(0,o,"seaColor",function(){return this._getBuffer(19);},function(t){this._setBuffer(19,t);}),a(0,o,"useVertexDeep",function(){return this._useVertexDeep;},function(t){this._useVertexDeep=t,t?this._addShaderDefine(e.SHADERDEFINE_USEVERTEXHEIGHT):this._removeShaderDefine(e.SHADERDEFINE_USEVERTEXHEIGHT);}),a(0,o,"windDir",function(){return 0;},function(t){}),a(0,o,"useRefractTexture",null,function(t){t?this._addShaderDefine(e.SHADERDEFINE_USE_REFRACT_TEX):this._removeShaderDefine(e.SHADERDEFINE_USE_REFRACT_TEX);}),a(0,o,"renderMode",null,function(t){switch(t){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1;break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1;break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3;break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771;break;default:throw new Error("PBRMaterial:renderMode value error.");}}),e.__init__=function(){e.SHADERDEFINE_CUBE_ENV=e.shaderDefines.registerDefine("CUBE_ENV"),e.SHADERDEFINE_HDR_ENV=e.shaderDefines.registerDefine("HDR_ENV"),e.SHADERDEFINE_SHOW_NORMAL=e.shaderDefines.registerDefine("SHOW_NORMAL"),e.SHADERDEFINE_USEVERTEXHEIGHT=e.shaderDefines.registerDefine("USE_VERTEX_DEEPINFO"),e.SHADERDEFINE_USE_FOAM=e.shaderDefines.registerDefine("USE_FOAM"),e.SHADERDEFINE_USE_REFRACT_TEX=e.shaderDefines.registerDefine("USE_REFR_TEX");},e.load=function(t){return n.loader.create(t,null,null,e);},e.DIFFUSETEXTURE=1,e.NORMALTEXTURE=2,e.UNDERWATERTEXTURE=3,e.VERTEXDISPTEXTURE=4,e.UVANIAGE=5,e.UVMATRIX=6,e.UVAGE=7,e.CURTM=8,e.DETAILTEXTURE=9,e.DEEPCOLORTEXTURE=10,e.SKYTEXTURE=11,e.WAVEINFO=12,e.WAVEINFOD=13,e.WAVEMAINDIR=14,e.SCRSIZE=15,e.WATERINFO=16,e.FOAMTEXTURE=17,e.GEOWAVE_UV_SCALE=18,e.SEA_COLOR=19,e.WAVEINFODEEPSCALE=20,e.SHADERDEFINE_SHOW_NORMAL=0,e.SHADERDEFINE_CUBE_ENV=0,e.SHADERDEFINE_HDR_ENV=0,e.SHADERDEFINE_USE_FOAM=0,e.SHADERDEFINE_USE_REFRACT_TEX=0,e.SHADERDEFINE_USEVERTEXHEIGHT=0,e.RENDERMODE_OPAQUE=1,e.RENDERMODE_OPAQUEDOUBLEFACE=2,e.RENDERMODE_CUTOUT=3,e.RENDERMODE_CUTOUTDOUBLEFACE=4,e.RENDERMODE_TRANSPARENT=13,i(e,["defaultMaterial",function(){return this.defaultMaterial=new e();},"shaderDefines",function(){return this.shaderDefines=new Ue(gn.shaderDefines);}]),e;}(gn),Yn=function(t){function e(t,n,i,r){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===i&&(i=35044),void 0===r&&(r=!1),e.__super.call(this),this._indexType=t,this._indexCount=n,this._bufferUsage=i,this._bufferType=34963,this._canRead=r;var a=0;if("ushort"==t)this._indexTypeByteCount=2;else{if("ubyte"!=t)throw new Error("unidentification index type.");this._indexTypeByteCount=1;}
a=this._indexTypeByteCount*n,this._byteLength=a,this._bind(),f._gl.bufferData(this._bufferType,a,this._bufferUsage),r?("ushort"==t?this._buffer=new Uint16Array(n):"ubyte"==t&&(this._buffer=new Uint8Array(n)),this.memorySize=2*a):this.memorySize=a;}
r(e,"laya.d3.graphics.IndexBuffer3D",t);var n=e.prototype;return n.setData=function(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=4294967295);var r=0;if("ushort"==this._indexType?(r=2,0===n&&4294967295===i||(t=new Uint16Array(t.buffer,n*r,i))):"ubyte"==this._indexType&&(r=1,0===n&&4294967295===i||(t=new Uint8Array(t.buffer,n*r,i))),this._bind(),f._gl.bufferSubData(this._bufferType,e*r,t),this._canRead)if(0!==e||0!==n||4294967295!==i){var a=this._buffer.length-e;i>a&&(i=a);for(var o=0;o<i;o++){this._buffer[e+o]=t[o];}}else this._buffer=t;},n.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!");},n.disposeResource=function(){t.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0;},a(0,n,"indexType",function(){return this._indexType;}),a(0,n,"indexTypeByteCount",function(){return this._indexTypeByteCount;}),a(0,n,"indexCount",function(){return this._indexCount;}),a(0,n,"canRead",function(){return this._canRead;}),e.INDEXTYPE_UBYTE="ubyte",e.INDEXTYPE_USHORT="ushort",e.create=function(t,n,i,r){return void 0===i&&(i=35044),void 0===r&&(r=!1),new e(t,n,i,r);},e;}(f),qn=function(t){function e(t,n,i,r){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===r&&(r=!1),e.__super.call(this),this._vertexDeclaration=t,this._vertexCount=n,this._bufferUsage=i,this._bufferType=34962,this._canRead=r,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*n,this._bind(),f._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),r&&(this._buffer=new Float32Array(this._byteLength/4));}
r(e,"laya.d3.graphics.VertexBuffer3D",t);var n=e.prototype;return n.bindWithIndexBuffer=function(t){t&&t._bind(),this._bind();},n.setData=function(t,e,n,i){if(void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=4294967295),0===n&&4294967295===i||(t=new Float32Array(t.buffer,4*n,i)),this._bind(),f._gl.bufferSubData(this._bufferType,4*e,t),this._canRead)if(0!==e||0!==n||4294967295!==i){var r=this._buffer.length-e;i>r&&(i=r);for(var a=0;a<i;a++){this._buffer[e+a]=t[a];}}else this._buffer=t;},n.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!");},n.disposeResource=function(){for(var e=R.mainContext,n=this._vertexDeclaration.getVertexElements(),i=f._enableAtributes,r=0,a=n.length;r<a;r++){i[r]===this._glBuffer&&(e.disableVertexAttribArray(r),i[r]=null);}
t.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0;},a(0,n,"vertexDeclaration",function(){return this._vertexDeclaration;}),a(0,n,"vertexCount",function(){return this._vertexCount;}),a(0,n,"canRead",function(){return this._canRead;}),e.create=function(t,n,i,r){return void 0===i&&(i=35044),void 0===r&&(r=!1),new e(t,n,i,r);},e;}(f),Zn=function(t){function e(){e.__super.call(this),this.setShaderName("PARTICLESHURIKEN"),this.renderMode=6;}
r(e,"laya.d3.core.particleShuriKen.ShurikenParticleMaterial",t);var o=e.prototype;return o.onAsynLoaded=function(n,i,r){var a=i[0];if(a.version)t.prototype.onAsynLoaded.call(this,n,i,r);else{var o=i[1],s=a.props;for(var l in s){this[l]=s[l];}
e._parseShurikenParticleMaterial(o,this,a),this._endLoaded();}},a(0,o,"renderMode",null,function(t){switch(t){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.");}
this._conchMaterial&&this._conchMaterial.setRenderMode(t);}),a(0,o,"tintColor",function(){return this._getColor(2);},function(t){t?this._addShaderDefine(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_TINTCOLOR):this._removeShaderDefine(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_TINTCOLOR),this._setColor(2,t);}),a(0,o,"tilingOffset",function(){return this._getColor(3);},function(t){if(t){var e=t.elements;1!=e[0]||1!=e[1]||0!=e[2]||0!=e[3]?this._addShaderDefine(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_TILINGOFFSET);}else this._removeShaderDefine(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(3,t);}),a(0,o,"diffuseTexture",function(){return this._getTexture(1);},function(t){t?this._addShaderDefine(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,t);}),e.__init__=function(){e.SHADERDEFINE_DIFFUSEMAP=e.shaderDefines.registerDefine("DIFFUSEMAP"),e.SHADERDEFINE_TINTCOLOR=e.shaderDefines.registerDefine("TINTCOLOR"),e.SHADERDEFINE_ADDTIVEFOG=e.shaderDefines.registerDefine("ADDTIVEFOG"),e.SHADERDEFINE_TILINGOFFSET=e.shaderDefines.registerDefine("TILINGOFFSET");},e.load=function(t){return n.loader.create(t,null,null,e);},e._parseShurikenParticleMaterial=function(t,e,n){var i=n.customProps,r=i.diffuseTexture.texture2D;r&&(e.diffuseTexture=v.getRes(t[r]));var a=i.tintColor;a&&(e.tintColor=new Le(a[0],a[1],a[2],a[3]));},e.RENDERMODE_OPAQUE=1,e.RENDERMODE_OPAQUEDOUBLEFACE=2,e.RENDERMODE_CUTOUT=3,e.RENDERMODE_CUTOUTDOUBLEFACE=4,e.RENDERMODE_TRANSPARENT=13,e.RENDERMODE_TRANSPARENTDOUBLEFACE=14,e.RENDERMODE_ADDTIVE=15,e.RENDERMODE_ADDTIVEDOUBLEFACE=16,e.RENDERMODE_DEPTHREAD_TRANSPARENT=5,e.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,e.RENDERMODE_DEPTHREAD_ADDTIVE=7,e.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,e.RENDERMODE_NONDEPTH_TRANSPARENT=9,e.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,e.RENDERMODE_NONDEPTH_ADDTIVE=11,e.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,e.SHADERDEFINE_DIFFUSEMAP=0,e.SHADERDEFINE_TINTCOLOR=0,e.SHADERDEFINE_TILINGOFFSET=0,e.SHADERDEFINE_ADDTIVEFOG=0,e.DIFFUSETEXTURE=1,e.TINTCOLOR=2,e.TILINGOFFSET=3,i(e,["defaultMaterial",function(){return this.defaultMaterial=new e();},"shaderDefines",function(){return this.shaderDefines=new Ue(gn.shaderDefines);}]),e;}(gn),Jn=function(t){function e(){e.__super.call(this),this.setShaderName("Trail"),this._setColor(2,new Le(1,1,1,1));}
r(e,"laya.d3.core.trail.TrailMaterial",gn);var o=e.prototype;return a(0,o,"tintColor",function(){return this._getColor(2);},function(t){this._setColor(2,t);}),a(0,o,"diffuseTexture",function(){return this._getTexture(1);},function(t){t?this._addShaderDefine(laya.d3.core.trail.TrailMaterial.SHADERDEFINE_DIFFUSETEXTURE):this._removeShaderDefine(laya.d3.core.trail.TrailMaterial.SHADERDEFINE_DIFFUSETEXTURE),this._setTexture(1,t);}),a(0,o,"tilingOffset",function(){return this._getColor(3);},function(t){if(t){var e=t.elements;1!=e[0]||1!=e[1]||0!=e[2]||0!=e[3]?this._addShaderDefine(laya.d3.core.trail.TrailMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.trail.TrailMaterial.SHADERDEFINE_TILINGOFFSET);}else this._removeShaderDefine(laya.d3.core.trail.TrailMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(3,t);}),e.__init__=function(){e.SHADERDEFINE_DIFFUSETEXTURE=e.shaderDefines.registerDefine("DIFFUSETEXTURE"),e.SHADERDEFINE_TILINGOFFSET=e.shaderDefines.registerDefine("TILINGOFFSET");},e.load=function(t){return n.loader.create(t,null,null,e);},e.SHADERDEFINE_DIFFUSETEXTURE=0,e.SHADERDEFINE_TILINGOFFSET=0,e.DIFFUSETEXTURE=1,e.TINTCOLOR=2,e.TILINGOFFSET=3,i(e,["defaultMaterial",function(){return this.defaultMaterial=new e();},"shaderDefines",function(){return this.shaderDefines=new Ue(gn.shaderDefines);}]),e;}(),$n=(function(t){function e(){this._animationSprites=null,this._animationSpritesInitLocalMatrix=null,this._tempCurAnimationData=null,this._curOriginalData=null,this._lastFrameIndex=-1,this._curAnimationDatas=null,e.__super.call(this),this._animationSprites=[],this._animationSpritesInitLocalMatrix=[];}
r(e,"laya.d3.component.animation.RigidAnimations",t);var i=e.prototype;i._init=function(){for(var t=this._templet.getNodes(this.currentAnimationClipIndex),e=this._owner,n=t.length,i=0,r=new Uint16Array(this._templet.getPublicExtData()),a=0;a<n;a++){var o=r.slice(i+1,i+1+r[i]);i+=r[i]+1;for(var s=1;s<o.length;s++){o[s];e=e._childs[o[s]];}
var l=e.getChildByName(t[a].name);if(!l)break;this._animationSprites[a]=l;var u=this._animationSpritesInitLocalMatrix[a];u||(u=this._animationSpritesInitLocalMatrix[a]=new De()),l.transform.localMatrix.cloneTo(u),e=this._owner;}},i._animtionPlay=function(){this._templet.loaded?this._init():this._templet.once("loaded",this,this._init);},i._animtionStop=function(){if(this._lastFrameIndex=-1,this._player.returnToZeroStopped){this._curAnimationDatas=null;for(var t=0;t<this._animationSprites.length;t++){this._animationSprites[t].transform.localMatrix=this._animationSpritesInitLocalMatrix[t];}}},i._effectAnimation=function(t){for(var e=0,n=this._animationSprites.length;e<n;e++){for(var i=this._animationSprites[e],r=i.transform.localMatrix,a=r.elements,o=0;o<16;o++){a[o]=this._curAnimationDatas[16*e+o];}
i.transform.localMatrix=r;}},i._load=function(e){t.prototype._load.call(this,e),this._player.on("stopped",this,this._animtionStop),this._player.on("played",this,this._animtionPlay);},i._update=function(t){if(2===this._player.state&&this._templet&&this._templet.loaded){var e=this._player.playbackRate*n.timer.scale,i=this._player.cachePlayRate,r=this._player.isCache&&e>=i,a=r?this.currentFrameIndex:-1;if(-1===a||this._lastFrameIndex!==a){var o=this.currentAnimationClipIndex,s=this._templet.getNodes(o),l=this._templet._animationDatasCache;if(r){var u=this._templet.getAnimationDataWithCache(i,l,o,a);if(u)return this._curAnimationDatas=u,this._lastFrameIndex=a,void this._effectAnimation(s);}
var h=16*s.length;r?this._curAnimationDatas=new Float32Array(h):(this._tempCurAnimationData||(this._tempCurAnimationData=new Float32Array(h)),this._curAnimationDatas=this._tempCurAnimationData),this._curOriginalData||(this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(o))),r?this._templet.getOriginalData(o,this._curOriginalData,this._player._fullFrames[o],a,this._player.currentFrameTime):this._templet.getOriginalDataUnfixedRate(o,this._curOriginalData,this._player.currentPlayTime),Ze._computeRootAnimationData(s,this._curOriginalData,this._curAnimationDatas),r&&this._templet.setAnimationDataWithCache(i,l,o,a,this._curAnimationDatas),this._lastFrameIndex=a,this._effectAnimation(s);}}},i._unload=function(e){t.prototype._unload.call(this,e),this._animationSprites=null,this._animationSpritesInitLocalMatrix=null,this._tempCurAnimationData=null,this._curOriginalData=null,this._curAnimationDatas=null;},a(0,i,"url",null,function(t){console.log("Warning: discard property,please use templet property instead.");var e=n.loader.create(t,null,null,l);this._templet!==e&&(0!==this._player.state&&this._player.stop(!0),this._templet=e,this._player.templet=e,this._curOriginalData=null,this._curAnimationDatas=null,this._tempCurAnimationData=null,this._templet._animationDatasCache||(this._templet._animationDatasCache=[]),this.event("animationchanged",this));}),a(0,i,"templet",t.prototype._$get_templet,function(t){this._templet!==t&&(0!==this._player.state&&this._player.stop(!0),this._templet=t,this._player.templet=t,this._curOriginalData=null,this._curAnimationDatas=null,this._tempCurAnimationData=null,this._templet._animationDatasCache||(this._templet._animationDatasCache=[]),this.event("animationchanged",this));});}(Tn),function(t){function e(){this._tempCurAnimationData=null,this._tempCurBonesData=null,this._curOriginalData=null,this._lastFrameIndex=-1,this._curMeshAnimationData=null,this._curBonesDatas=null,this._curAnimationDatas=null,this._ownerMesh=null,this._boneIndexToMeshList=null,this._oldVersion=!1,e.__super.call(this),this._boneIndexToMeshList=[];}
r(e,"laya.d3.component.animation.SkinAnimations",t);var i=e.prototype;return i._computeBoneIndexToMeshOnTemplet=function(){this._templet.loaded?this._computeBoneIndexToMeshOnMesh():this._templet.once("loaded",this,this._computeBoneIndexToMeshOnMesh);},i._computeBoneIndexToMeshOnMesh=function(){"LAYAANIMATION:02"===this._templet._aniVersion?this._oldVersion=!1:this._oldVersion=!0;var t=this._owner.meshFilter.sharedMesh;t.loaded?this._computeBoneIndexToMesh(t):t.on("loaded",this,this._computeBoneIndexToMesh);},i._computeBoneIndexToMesh=function(t){var e=t._boneNames;if(e)for(var n=e.length,i=this._templet._anis,r=0,a=i.length;r<a;r++){var o=this._boneIndexToMeshList[r];o||(o=this._boneIndexToMeshList[r]=[]),o.length=n;for(var s=i[r],l=0;l<n;l++){o[l]=s.bone3DMap[e[l]];}}},i._getAnimationDatasWithCache=function(t,e,n,i,r){var a=n[i];if(a){var o=a[t];if(o){var s=o[e.id];return s?s[r]:null;}
return null;}
return null;},i._setAnimationDatasWithCache=function(t,e,n,i,r,a){var o=n[i]||(n[i]={}),s=o[t]||(o[t]={});(s[e.id]||(s[e.id]=[]))[r]=a;},i._onAnimationPlayMeshLoaded=function(){for(var t=this._ownerMesh.meshRender._renderElements,e=0,n=t.length;e<n;e++){t[e]._canDynamicBatch=!1;}},i._onAnimationPlay=function(){this._ownerMesh._render._addShaderDefine(vi.SHADERDEFINE_BONE);var t=this._ownerMesh.meshFilter.sharedMesh;t.loaded?this._onAnimationPlayMeshLoaded():t.once("loaded",this,this._onAnimationPlayMeshLoaded);},i._onAnimationStop=function(){this._lastFrameIndex=-1,this._player.returnToZeroStopped&&(this._curBonesDatas=null,this._curAnimationDatas=null,this._ownerMesh._render._removeShaderDefine(vi.SHADERDEFINE_BONE));for(var t=this._ownerMesh.meshRender._renderElements,e=0,n=t.length;e<n;e++){t[e]._canDynamicBatch=!0;}},i._load=function(e){t.prototype._load.call(this,e),this._ownerMesh=e,this._player.on("played",this,this._onAnimationPlay),this._player.on("stopped",this,this._onAnimationStop),this._owner.meshFilter.on("meshchanged",this,this._computeBoneIndexToMeshOnTemplet);},i._update=function(t){var i=this._ownerMesh.meshFilter.sharedMesh;if(2===this._player.state&&this._templet&&this._templet.loaded&&i.loaded){var r=this._player.playbackRate*n.timer.scale,a=this._player.cachePlayRate,o=this._player.isCache&&r>=a,s=o?this.currentFrameIndex:-1;if(-1===s||this._lastFrameIndex!==s){var l=this.currentAnimationClipIndex,u=this._templet._animationDatasCache[0],h=this._templet._animationDatasCache[1];if(o){var c=this._getAnimationDatasWithCache(a,i,h,l,s);if(c)return this._curAnimationDatas=c,this._curBonesDatas=this._templet.getAnimationDataWithCache(a,u,l,s),void(this._lastFrameIndex=s);}
var _=!1;o&&(this._curBonesDatas=this._templet.getAnimationDataWithCache(a,u,l,s),_=!!this._curBonesDatas);var f=this._templet.getNodes(l),d=16*f.length,p=i.InverseAbsoluteBindPoses;this._oldVersion?this._curMeshAnimationData||(this._curMeshAnimationData=new Float32Array(d)):this._curMeshAnimationData||(this._curMeshAnimationData=new Float32Array(16*p.length));var m,g,y=0,v=0,I=0,x=i.getSubMeshCount();if(o){for(this._curAnimationDatas=[],this._curAnimationDatas.length=x,y=0;y<x;y++){for(m=this._curAnimationDatas[y]=[],I=(g=i.getSubMesh(y))._boneIndicesList.length,m.length=I,v=0;v<I;v++){m[v]=new Float32Array(16*g._boneIndicesList[v].length);}}
_||(this._curBonesDatas=new Float32Array(d));}else{if(!this._tempCurAnimationData)for(this._tempCurAnimationData=[],this._tempCurAnimationData.length=x,y=0;y<x;y++){for(m=this._tempCurAnimationData[y]=[],I=(g=i.getSubMesh(y))._boneIndicesList.length,m.length=I,v=0;v<I;v++){m[v]=new Float32Array(16*g._boneIndicesList[v].length);}}
this._tempCurBonesData||(this._tempCurBonesData=new Float32Array(d)),this._curAnimationDatas=this._tempCurAnimationData,this._curBonesDatas=this._tempCurBonesData;}
if(this._curOriginalData||(this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(l))),o?this._templet.getOriginalData(l,this._curOriginalData,this._player._fullFrames[l],s,this._player.currentFrameTime):this._templet.getOriginalDataUnfixedRate(l,this._curOriginalData,this._player.currentPlayTime),this._oldVersion)o&&_?Ze._computeAnimationDatasByArrayAndMatrixFastOld(p,this._curBonesDatas,this._curMeshAnimationData):Ze._computeBoneAndAnimationDatasByBindPoseMatrxixOld(f,this._curOriginalData,p,this._curBonesDatas,this._curMeshAnimationData);else{var T=this._boneIndexToMeshList[l];o&&_?Ze._computeAnimationDatasByArrayAndMatrixFast(p,this._curBonesDatas,this._curMeshAnimationData,T):Ze._computeBoneAndAnimationDatasByBindPoseMatrxix(f,this._curOriginalData,p,this._curBonesDatas,this._curMeshAnimationData,T);}
for(y=0;y<x;y++){var S=i.getSubMesh(y)._boneIndicesList;for(I=S.length,m=this._curAnimationDatas[y],v=0;v<I;v++){e._splitAnimationDatas(S[v],this._curMeshAnimationData,m[v]);}}
o&&(this._setAnimationDatasWithCache(a,i,h,l,s,this._curAnimationDatas),_||this._templet.setAnimationDataWithCache(a,u,l,s,this._curBonesDatas)),this._lastFrameIndex=s;}}},i._preRenderUpdate=function(t){var e=t.renderElement.renderObj;this._curAnimationDatas?e._skinAnimationDatas=this._curAnimationDatas[e._indexInMesh]:e._skinAnimationDatas=null;},i._unload=function(e){2==this.player.state&&this._ownerMesh._render._removeShaderDefine(vi.SHADERDEFINE_BONE),this._templet&&!this._templet.loaded&&this._templet.off("loaded",this,this._computeBoneIndexToMeshOnMesh);var n=this._ownerMesh.meshFilter.sharedMesh;n.loaded||n.off("loaded",this,this._onAnimationPlayMeshLoaded),t.prototype._unload.call(this,e),this._tempCurAnimationData=null,this._tempCurBonesData=null,this._curOriginalData=null,this._curMeshAnimationData=null,this._curBonesDatas=null,this._curAnimationDatas=null,this._ownerMesh=null;},a(0,i,"curBonesDatas",function(){return this._curBonesDatas;}),a(0,i,"templet",t.prototype._$get_templet,function(t){this._templet!==t&&(0!==this._player.state&&this._player.stop(!0),this._templet=t,this._player.templet=t,this._computeBoneIndexToMeshOnTemplet(),this._curOriginalData=null,this._curMeshAnimationData=null,this._tempCurBonesData=null,this._tempCurAnimationData=null,this._templet._animationDatasCache||(this._templet._animationDatasCache=[[],[]]),this.event("animationchanged",this));}),e._splitAnimationDatas=function(t,e,n){for(var i=0,r=t.length,a=0;i<r;i++){for(var o=0;o<16;o++,a++){n[a]=e[(t[i]<<4)+o];}}},e;}(Tn)),Qn=function(t){function e(){this._size=null,this._transformOrientedBoundBox=null,this.center=null,e.__super.call(this),this._needUpdate=!1;}
r(e,"laya.d3.component.physics.BoxCollider",bn);var n=e.prototype;return n._updateCollider=function(){if(this._needUpdate){var t=this._transformOrientedBoundBox.transformation,n=this._owner.transform,i=n.rotation,r=n.scale,a=this.center.elements;0===a[0]&&0===a[1]&&0===a[2]?De.createAffineTransformation(n.position,i,Re.ONE,t):(Re.multiply(this.center,r,e._deviationV3),Re.transformQuat(e._deviationV3,i,e._deviationV3),Re.add(n.position,e._deviationV3,e._deviationV3),De.createAffineTransformation(e._deviationV3,i,Re.ONE,t)),this._transformOrientedBoundBox.transformation=t;var o=this._transformOrientedBoundBox.extents.elements,s=this._size.elements,l=r.elements;o[0]=.5*s[0]*l[0],o[1]=.5*s[1]*l[1],o[2]=.5*s[2]*l[2],this._needUpdate=!1;}},n._onWorldMatrixChanged=function(){this._needUpdate=!0;for(var t in this._runtimeCollisonMap){this._runtimeCollisonTestMap[t]=!0,this._runtimeCollisonMap[t]._runtimeCollisonTestMap[this.id]=!0;}},n._initialize=function(t){laya.d3.component.Component3D.prototype._initialize.call(this,t),this._transformOrientedBoundBox=new Ce(new Re(),new De()),this._size=new Re(),this.center=new Re(),t.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged),this._needUpdate=!0;},n._getType=function(){return 1;},n._collisonTo=function(t){switch(t._getType()){case 0:return 0!==this.boundBox.containsSphere(t.boundSphere);case 1:return 0!==this.boundBox.containsOrientedBoundBox(t.boundBox);case 2:var e=t;if(0!==this.boundBox.containsBoundBox(e._boundBox)){for(var n=t.mesh._positions,i=0,r=n.length;i<r;i++){if(1===this.boundBox.containsPoint(n[i]))return!0;}
return!1;}
return!1;default:throw new Error("BoxCollider:unknown collider type.");}},n._cloneTo=function(t){var e=t,n=e.size;this.size.cloneTo(n),e.size=n,this.center.cloneTo(e.center);},n.raycast=function(t,e,n){void 0===n&&(n=1.79e308),this._updateCollider();var i=this._transformOrientedBoundBox.intersectsRay(t,e.position);return-1!==i&&i<=n?(e.distance=i,e.sprite3D=this._owner,!0):(e.distance=-1,e.sprite3D=null,!1);},n.setFromBoundBox=function(t){Ce.createByBoundBox(t,this._transformOrientedBoundBox);var e=this._transformOrientedBoundBox.extents;this._size=new Re(2*e.x,2*e.y,2*e.z),this.center=new Re(),Re.add(t.min,t.max,this.center),Re.scale(this.center,.5,this.center),this._needUpdate=!0;},a(0,n,"boundBox",function(){return this._updateCollider(),this._transformOrientedBoundBox;}),a(0,n,"size",function(){return this._size;},function(t){this._size=t,this._needUpdate=!0;}),i(e,["_deviationV3",function(){return this._deviationV3=new Re();},"_obbCenterV3",function(){return this._obbCenterV3=new Re();}]),e;}(),ti=function(t){function e(){this._transformBoundingBox=null,this._mesh=null,e.__super.call(this),this._transformBoundingBox=new Ie(new Re(),new Re()),this._needUpdate=!1;}
r(e,"laya.d3.component.physics.MeshCollider",bn);var n=e.prototype;return n._updateBoundBoxCollider=function(){if(this._needUpdate){for(var t=this._owner.transform.worldMatrix,n=this._mesh.boundingBoxCorners,i=0;i<8;i++){Re.transformCoordinate(n[i],t,e._tempBoundBoxCorners[i]);}
Ie.createfromPoints(e._tempBoundBoxCorners,this._transformBoundingBox),this._needUpdate=!1;}},n._raycastMesh=function(t,n,i,r){void 0===r&&(r=1.79e308);var a=n.transform.worldMatrix,o=e._tempMatrix4x40;a.invert(o);var s=t.origin,l=t.direction,u=e._tempRay0;Re.transformCoordinate(s,o,u.origin),Re.TransformNormal(l,o,u.direction);for(var h=Number.MAX_VALUE,c=0,_=this._mesh.getRenderElementsCount();c<_;c++){var f=this._mesh.getRenderElement(c),d=f._getVertexBuffer(0),p=d.getData(),m=f._getIndexBuffer().getData(),g=e._tempRaycastHit;if(Xe.rayIntersectsPositionsAndIndices(u,p,d.vertexDeclaration,m,g)){Re.transformCoordinate(g.position,a,g.position);var y=e._tempVector30;Re.subtract(s,g.position,y);var v=Re.scalarLength(y);if(v<r&&v<h){g.distance=v,g.sprite3D=n;var I=g.trianglePositions;Re.transformCoordinate(I[0],a,I[0]),Re.transformCoordinate(I[1],a,I[1]),Re.transformCoordinate(I[2],a,I[2]);var x=g.triangleNormals;return Re.transformCoordinate(x[0],a,x[0]),Re.transformCoordinate(x[1],a,x[1]),Re.transformCoordinate(x[2],a,x[2]),h=v,g.cloneTo(i),!0;}
return!1;}}
return!1;},n._onWorldMatrixChanged=function(){this._needUpdate=!0;},n._initialize=function(t){laya.d3.component.Component3D.prototype._initialize.call(this,t),t.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged),this._needUpdate=!0;},n._getType=function(){return 2;},n._collisonTo=function(t){var e=0,n=0,i=this.mesh._positions;switch(t._getType()){case 0:var r=t;if(0!==Se.sphereContainsBox(r.boundSphere,this._boundBox)){for(e=0,n=i.length;e<n;e++){if(1===Se.sphereContainsPoint(r.boundSphere,i[e]))return!0;}
return!1;}
return!1;case 1:var a=t;if(0!==a.boundBox.containsBoundBox(this._boundBox)){for(e=0,n=i.length;e<n;e++){if(1===a.boundBox.containsPoint(i[e]))return!0;}
return!1;}
return!1;case 2:var o=t;return 1!==Se.intersectsBoxAndBox(o._boundBox,this._boundBox);default:throw new Error("MeshCollider:unknown collider type.");}},n._cloneTo=function(t){t.mesh=this._mesh;},n.raycast=function(t,e,n){if(void 0===n&&(n=1.79e308),null==this._mesh||!this._mesh.loaded)return!1;var i=Se.intersectsRayAndBoxRD(t,this._boundBox);return!!(-1!==i&&i<=n&&this._raycastMesh(t,this._owner,e,n))||(e.distance=-1,e.sprite3D=null,!1);},a(0,n,"_boundBox",function(){return this._updateBoundBoxCollider(),this._transformBoundingBox;}),a(0,n,"mesh",function(){return this._mesh;},function(t){this._mesh=t;}),i(e,["_tempRay0",function(){return this._tempRay0=new Ae(new Re(),new Re());},"_tempVector30",function(){return this._tempVector30=new Re();},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new De();},"_tempRaycastHit",function(){return this._tempRaycastHit=new Ye();},"_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new Re(),new Re(),new Re(),new Re(),new Re(),new Re(),new Re(),new Re()];}]),e;}(),ei=function(t){function e(){this._originalBoundSphere=null,this._transformBoundSphere=null,e.__super.call(this),this._needUpdate=!1;}
r(e,"laya.d3.component.physics.SphereCollider",bn);var n=e.prototype;return n._updateCollider=function(){if(this._needUpdate){var t=NaN,e=this._owner.transform,n=e.scale;t=n.x>=n.y&&n.x>=n.z?n.x:n.y>=n.z?n.y:n.z,Re.transformCoordinate(this._originalBoundSphere.center,e.worldMatrix,this._transformBoundSphere.center),this._transformBoundSphere.radius=this._originalBoundSphere.radius*t,this._needUpdate=!1;}},n._onWorldMatrixChanged=function(){this._needUpdate=!0;for(var t in this._runtimeCollisonMap){this._runtimeCollisonTestMap[t]=!0,this._runtimeCollisonMap[t]._runtimeCollisonTestMap[this.id]=!0;}},n._initialize=function(t){laya.d3.component.Component3D.prototype._initialize.call(this,t),this._originalBoundSphere=new Te(new Re(0,0,0),.5),this._transformBoundSphere=new Te(new Re(0,0,0),.5),t.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged),this._needUpdate=!0;},n._getType=function(){return 0;},n._collisonTo=function(t){switch(t._getType()){case 0:return 0!==Se.sphereContainsSphere(this.boundSphere,t.boundSphere);case 1:return 0!==t.boundBox.containsSphere(this.boundSphere);case 2:var e=t;if(0!==Se.sphereContainsBox(this.boundSphere,e._boundBox)){for(var n=e.mesh._positions,i=0,r=n.length;i<r;i++){if(1===Se.sphereContainsPoint(this.boundSphere,n[i]))return!0;}
return!1;}
return!1;default:throw new Error("SphereCollider:unknown collider type.");}},n._cloneTo=function(t){var e=t;e.radius=this.radius;var n=e.center;this.center.cloneTo(n),e.center=n;},n.raycast=function(t,e,n){void 0===n&&(n=1.79e308),this._updateCollider();var i=this._transformBoundSphere.intersectsRayPoint(t,e.position);return-1!==i&&i<=n?(e.distance=i,e.sprite3D=this._owner,!0):(e.distance=-1,e.sprite3D=null,!1);},a(0,n,"center",function(){return this._originalBoundSphere.center;},function(t){this._originalBoundSphere.center=t;}),a(0,n,"radius",function(){return this._originalBoundSphere.radius;},function(t){this._originalBoundSphere.radius=t;}),a(0,n,"boundSphere",function(){return this._updateCollider(),this._transformBoundSphere;}),e;}(),ni=function(t){function e(){this.simLodInfo=null,this._src=null,this._buffer=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,e.__super.call(this),this._type=3553;}
r(e,"laya.d3.resource.DataTexture2D",yn);var o=e.prototype;return o.genDebugMipmaps=function(){var t=[];return t.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),t.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),t.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),t.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),t.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),t.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),t.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),t.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),t.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),t.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),t;},o._onTextureLoaded=function(t){},o._createWebGlTexture=function(){if(!this._buffer&&!this._mipmaps)throw "create GLTextur err:no data";var t=R.mainContext;t.getExtension("EXT_shader_texture_lod");var n=this._source=t.createTexture(),i=this._width,r=this._height,a=L.curBindTexTarget,o=L.curBindTexValue;if(L.bindTexture(t,this._type,n),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var s=0;t.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var l=0;l<this._mipmaps.length;l++){if(this._mipmaps[l].byteLength!=h*c*4)throw "mipmap size error  level:"+l;t.texSubImage2D(this._type,0,e.simLodRect[s++],e.simLodRect[s++],e.simLodRect[s++],e.simLodRect[s++],6408,5121,new Uint8Array(this._mipmaps[l]));}
this.minFifter=9729,this.magFifter=9729;}else{var h=this._width,c=this._height;for(s=0,t.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),l=0;l<this._mipmaps.length;l++){if(this._mipmaps[l].byteLength!=h*c*4)throw "mipmap size error  level:"+l;t.texImage2D(this._type,l,6408,h,c,0,6408,5121,new Uint8Array(this._mipmaps[l])),c/=2,(h/=2)<1&&(h=1),c<1&&(c=1),this.minFifter=9987,this.magFifter=9729;}}
this.mipmap=!1;}else t.texImage2D(this._type,0,6408,i,r,0,6408,5121,new Uint8Array(this._buffer));var _=this._minFifter,f=this._magFifter,d=this._repeat?10497:33071,p=u.isPOT(i,r);if(!p)throw "data texture must be POT";this._mipmap||this._mipmaps?-1!==_||(_=9987):-1!==_||(_=9729),-1!==f||(f=9729),t.texParameteri(this._type,10241,_),t.texParameteri(this._type,10240,f),t.texParameteri(this._type,10242,d),this._mipmaps?t.texParameteri(this._type,10243,33071):t.texParameteri(this._type,10243,d),this._mipmap&&t.generateMipmap(this._type),a&&o&&L.bindTexture(t,a,o),this.src&&this.src.length>0&&(this._buffer=null),this.memorySize=p?i*r*4*(1+1/3):i*r*4,this._recreateLock=!1;},o.recreateResource=function(){if(this._buffer||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate();}else{this._recreateLock=!0;}},o.onAsynLoaded=function(t,e,n){var i;n&&(i=n[0].call(this,e)),i&&(this._width=i.width,this._height=i.height,this._buffer=i.data),this._src=t,this._size=new qe(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded();},o.getPixels=function(){return new Uint8Array(this._buffer);},o.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(R.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this.memorySize=0);},a(0,o,"src",function(){return this._src;}),e.create=function(t,n,i,r,a,o){if(void 0===r&&(r=9729),void 0===a&&(a=9729),void 0===o&&(o=!0),!t||t.byteLength<n*i*4)throw "DataTexture2D create error";var s=new e();return s._buffer=t,s._width=n,s._height=i,s._mipmap=o,s._magFifter=r,s._minFifter=a,s._size=new qe(s._width,s._height),s._conchTexture?alert("怎么给runtime传递datatexture数据"):s.activeResource(),s;},e.load=function(t,i,r,a,o){void 0===i&&(i=0),void 0===r&&(r=0),void 0===a&&(a=9729),void 0===o&&(o=9729);if("mipmaps"===O.getFileExtension(t)){var s=n.loader.create(t,null,null,e,[function(t){this._mipmaps=[];var e=new Uint32Array(t);this._width=e[0];var n=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,n=1024),this._width!=n)throw console.error("现在只支持512x256的环境贴图。当前的是"+e[0]),"现在只支持512x256的环境贴图。当前的是"+e[0];this._height=e[1];for(var i=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,r=this._height,a=8;;){var o=i*r*4;if(a+o>t.byteLength)throw "load mipmaps data size error ";var s=new Uint8Array(t,a,o);if(this._mipmaps.push(s),a+=o,1==i&&1==r)break;r/=2,(i/=2)<1&&(i=1),r<1&&(r=1);}
return null;}]);if(laya.d3.resource.DataTexture2D.lodasatlas){s.simLodInfo=new Float32Array(40);for(var l=0;l<s.simLodInfo.length;){s.simLodInfo[l]=(e.simLodRect[l]+.5)/1024,l++,s.simLodInfo[l]=(e.simLodRect[l]+.5)/256,l++,s.simLodInfo[l]=Math.max(e.simLodRect[l]-1,.1)/1024,l++,s.simLodInfo[l]=Math.max(e.simLodRect[l]-1.5,.1)/256,l++;}}
return s;}
if("number"==typeof i)return n.loader.create(t,null,null,e,[function(t){return this._width=i,this._height=r,this._buffer=t,null;}]);if("function"==typeof i)return n.loader.create(t,null,null,e,[i]);throw new Error("unknown params.");},e.lodasatlas=!1,i(e,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1]);}]),e;}(),ii=function(t){function e(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,e.__super.call(this);}
r(e,"laya.d3.resource.models.PrimitiveMesh",vn);var i=e.prototype;return n.imps(i,{"laya.d3.core.render.IRenderable":!0}),i._getVertexBuffer=function(t){return void 0===t&&(t=0),0===t?this._vertexBuffer:null;},i._getVertexBuffers=function(){return null;},i._getIndexBuffer=function(){return this._indexBuffer;},i._getPositions=function(){var t,e=[],n=this._vertexBuffer.vertexDeclaration.getVertexElements(),i=0;for(i=0;i<n.length;i++){var r=n[i];if("vector3"===r.elementFormat&&0===r.elementUsage){t=r;break;}}
var a=this._vertexBuffer.getData();for(i=0;i<a.length;i+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var o=i+t.offset/4,s=new Re(a[o+0],a[o+1],a[o+2]);e.push(s);}
return e;},i.getRenderElement=function(t){return this;},i.getRenderElementsCount=function(){return 1;},i.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer.destroy(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer.destroy(),this._indexBuffer=null),this.memorySize=0;},i._beforeRender=function(t){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0;},i._render=function(t){R.mainContext.drawElements(4,this._numberIndices,5123,0),P.drawCall++,P.trianglesFaces+=this._numberIndices/3;},a(0,i,"_vertexBufferCount",function(){return 1;}),a(0,i,"triangleCount",function(){return this._indexBuffer.indexCount/3;}),e;}(),ri=function(t){function e(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,e.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[];}
r(e,"laya.d3.resource.models.Mesh",vn);var i=e.prototype;return i._getPositions=function(){var t,e,n,i,r,a=[],o=0,s=0,l=0;if(0!==this._vertexBuffers.length){var u=this._vertexBuffers.length;for(o=0;o<u;o++){for(n=(t=this._vertexBuffers[o]).vertexDeclaration.getVertexElements(),s=0;s<n.length;s++){if("vector3"===(i=n[s]).elementFormat&&0===i.elementUsage){e=i;break;}}
for(r=t.getData(),s=0;s<r.length;s+=t.vertexDeclaration.vertexStride/4){l=s+e.offset/4,a.push(new Re(r[l+0],r[l+1],r[l+2]));}}}else{var h=this._subMeshes.length;for(o=0;o<h;o++){for(n=(t=this._subMeshes[o]._getVertexBuffer()).vertexDeclaration.getVertexElements(),s=0;s<n.length;s++){if("vector3"===(i=n[s]).elementFormat&&0===i.elementUsage){e=i;break;}}
for(r=t.getData(),s=0;s<r.length;s+=t.vertexDeclaration.vertexStride/4){l=s+e.offset/4,a.push(new Re(r[l+0],r[l+1],r[l+2]));}}}
return a;},i._setSubMeshes=function(t){this._subMeshes=t,this._subMeshCount=t.length;for(var e=0;e<this._subMeshCount;e++){t[e]._indexInMesh=e;}
this._positions=this._getPositions(),this._generateBoundingObject();},i.onAsynLoaded=function(t,e,n){var i=e[0],r=e[1];ve.read(i,this,this._materials,this._subMeshes,r),this.completeCreate(),this._endLoaded();},i.getSubMesh=function(t){return this._subMeshes[t];},i.getSubMeshCount=function(){return this._subMeshes.length;},i.getRenderElementsCount=function(){return this._subMeshes.length;},i.getRenderElement=function(t){return this._subMeshes[t];},i.disposeResource=function(){for(var t=0;t<this._subMeshes.length;t++){this._subMeshes[t].dispose();}
this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null;},a(0,i,"materials",function(){return this._materials.slice();}),a(0,i,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses;}),e.load=function(t){return n.loader.create(t,null,null,e);},e;}(),ai=function(t){function e(t,n,i,r,a,o,s,l,u){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===i&&(i=6408),void 0===r&&(r=5121),void 0===a&&(a=33189),void 0===o&&(o=!1),void 0===s&&(s=!1),void 0===l&&(l=-1),void 0===u&&(u=-1),e.__super.call(this),this._type=3553,this._width=t,this._height=n,this._size=new qe(t,n),this._surfaceFormat=i,this._surfaceType=r,this._depthStencilFormat=a,this._mipmap=o,this._repeat=s,this._minFifter=l,this._magFifter=u,this.activeResource(),this._alreadyResolved=!0;}
r(e,"laya.d3.resource.RenderTexture",yn);var i=e.prototype;return i.recreateResource=function(){var t=R.mainContext;this._frameBuffer=t.createFramebuffer(),this._source=t.createTexture();var e=L.curBindTexTarget,n=L.curBindTexValue;L.bindTexture(t,this._type,this._source),t.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var i=this._minFifter,r=this._magFifter,a=this._repeat?10497:33071;if(u.isPOT(this._width,this._height)?(this._mipmap?-1!==i||(i=9987):-1!==i||(i=9729),-1!==r||(r=9729),t.texParameteri(this._type,10241,i),t.texParameteri(this._type,10240,r),t.texParameteri(this._type,10242,a),t.texParameteri(this._type,10243,a),this._mipmap&&t.generateMipmap(this._type)):(-1!==i||(i=9729),-1!==r||(r=9729),t.texParameteri(this._type,10241,i),t.texParameteri(this._type,10240,r),t.texParameteri(this._type,10242,33071),t.texParameteri(this._type,10243,33071)),t.bindFramebuffer(36160,this._frameBuffer),t.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,this._depthStencilBuffer),t.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),this._depthStencilFormat){case 33189:t.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:t.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:t.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer);}
t.bindFramebuffer(36160,null),e&&n&&L.bindTexture(t,e,n),t.bindRenderbuffer(36161,null),this.memorySize=this._width*this._height*4,this.completeCreate();},i.start=function(){R.mainContext.bindFramebuffer(36160,this.frameBuffer),e._currentRenderTarget=this,this._alreadyResolved=!1;},i.end=function(){R.mainContext.bindFramebuffer(36160,null),e._currentRenderTarget=null,this._alreadyResolved=!0;},i.getData=function(t,e,n,i){var r=R.mainContext;r.bindFramebuffer(36160,this._frameBuffer);if(!(36053===r.checkFramebufferStatus(36160)))return r.bindFramebuffer(36160,null),null;var a=new Uint8Array(this._width*this._height*4);return r.readPixels(t,e,n,i,this._surfaceFormat,this._surfaceType,a),r.bindFramebuffer(36160,null),a;},i.disposeResource=function(){if(this._frameBuffer){var t=R.mainContext;t.deleteTexture(this._source),t.deleteFramebuffer(this._frameBuffer),t.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0;}},a(0,i,"surfaceFormat",function(){return this._surfaceFormat;}),a(0,i,"surfaceType",function(){return this._surfaceType;}),a(0,i,"depthStencilFormat",function(){return this._depthStencilFormat;}),a(0,i,"source",function(){return this._alreadyResolved?n.superGet(yn,this,"source"):null;}),a(0,i,"depthStencilBuffer",function(){return this._depthStencilBuffer;}),a(0,i,"frameBuffer",function(){return this._frameBuffer;}),e._currentRenderTarget=null,e;}(),oi=function(t){function e(t){this._color=null,this._pixels=null,e.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new qe(this.width,this.height),this._color=t,this._pixels=new Uint8Array([255*t.x,255*t.y,255*t.z,255*t.w]);}
r(e,"laya.d3.resource.SolidColorTexture2D",yn);var n=e.prototype;return n._createWebGlTexture=function(){var t=R.mainContext,e=this._source=t.createTexture(),n=this._width,i=this._height,r=L.curBindTexTarget,a=L.curBindTexValue;L.bindTexture(t,this._type,e),t.texImage2D(this._type,0,6408,n,i,0,6408,5121,this._pixels);var o=this._minFifter,s=this._magFifter,l=this._repeat?10497:33071,h=u.isPOT(n,i);h?(this._mipmap?-1!==o||(o=9987):-1!==o||(o=9729),-1!==s||(s=9729),t.texParameteri(this._type,10241,o),t.texParameteri(this._type,10240,s),t.texParameteri(this._type,10242,l),t.texParameteri(this._type,10243,l),this._mipmap&&t.generateMipmap(this._type)):(-1!==o||(o=9729),-1!==s||(s=9729),t.texParameteri(this._type,10241,o),t.texParameteri(this._type,10240,s),t.texParameteri(this._type,10242,33071),t.texParameteri(this._type,10243,33071)),r&&a&&L.bindTexture(t,r,a),this.memorySize=h?n*i*4*(1+1/3):n*i*4;},n.recreateResource=function(){this._createWebGlTexture(),this.completeCreate();},n.disposeResource=function(){this._source&&(R.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},i(e,["magentaTexture",function(){return this.magentaTexture=new e(new Le(1,0,1,1));},"grayTexture",function(){return this.grayTexture=new e(new Le(.5,.5,.5,1));}]),e;}(),si=function(t){function e(t){this._color=null,this._pixels=null,this._texCount=6,e.__super.call(this),this._type=34067,this._width=1,this._height=1,this._size=new qe(this.width,this.height),this._color=t,this._pixels=new Uint8Array([255*t.x,255*t.y,255*t.z,255*t.w]);}
r(e,"laya.d3.resource.SolidColorTextureCube",yn);var n=e.prototype;return n._createWebGlTexture=function(){var t=R.mainContext,e=this._source=t.createTexture(),n=this._width,i=this._height,r=L.curBindTexTarget,a=L.curBindTexValue;L.bindTexture(t,this._type,e),t.texImage2D(34069,0,6408,n,i,0,6408,5121,this._pixels),t.texImage2D(34070,0,6408,n,i,0,6408,5121,this._pixels),t.texImage2D(34071,0,6408,n,i,0,6408,5121,this._pixels),t.texImage2D(34072,0,6408,n,i,0,6408,5121,this._pixels),t.texImage2D(34073,0,6408,n,i,0,6408,5121,this._pixels),t.texImage2D(34074,0,6408,n,i,0,6408,5121,this._pixels);var o=this.minFifter,s=this.magFifter,l=this._repeat?10497:33071,h=u.isPOT(n,i);h?(this.mipmap?-1!==o||(o=9987):-1!==o||(o=9729),-1!==s||(s=9729),t.texParameteri(this._type,10241,o),t.texParameteri(this._type,10240,s),t.texParameteri(this._type,10242,l),t.texParameteri(this._type,10243,l),this.mipmap&&t.generateMipmap(this._type)):(-1!==o||(o=9729),-1!==s||(s=9729),t.texParameteri(this._type,10241,o),t.texParameteri(this._type,10240,s),t.texParameteri(this._type,10242,33071),t.texParameteri(this._type,10243,33071)),r&&a&&L.bindTexture(t,r,a),this.memorySize=h?n*i*4*(1+1/3)*this._texCount:n*i*4*this._texCount;},n.recreateResource=function(){this._createWebGlTexture(),this.completeCreate();},n.disposeResource=function(){this._source&&(R.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},i(e,["magentaTexture",function(){return this.magentaTexture=new e(new Le(1,0,1,1));},"grayTexture",function(){return this.grayTexture=new e(new Le(.5,.5,.5,1));}]),e;}(),li=function(e){function i(t,e,n,r){this._canRead=!1,this._image=null,this._pixels=null,void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===n&&(n=6408),void 0===r&&(r=!0),i.__super.call(this),this._type=3553,this._repeat=e,this._canRead=t,this._format=n,this._mipmap=r;}
r(i,"laya.d3.resource.Texture2D",yn);var o=i.prototype;return o._createWebGlTexture=function(){if(!this._image)throw "create GLTextur err:no data:"+this._image;var t=R.mainContext,e=this._source=t.createTexture(),n=this._width,i=this._height,r=L.curBindTexTarget,a=L.curBindTexValue;switch(L.bindTexture(t,this._type,e),this._format){case 6407:case 6408:this._canRead?t.texImage2D(this._type,0,this._format,n,i,0,this._format,5121,this._pixels):t.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case R.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:t.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);}
var o=this._minFifter,s=this._magFifter,l=this._repeat?10497:33071,h=0==this._wrapModeU?10497:33071,c=0==this._wrapModeV?10497:33071,_=u.isPOT(n,i);_?(this._mipmap?-1!==o||(o=9987):-1!==o||(o=9729),-1!==s||(s=9729),t.texParameteri(this._type,10241,o),t.texParameteri(this._type,10240,s),t.texParameteri(this._type,10242,l),t.texParameteri(this._type,10243,l),t.texParameteri(this._type,10242,h),t.texParameteri(this._type,10243,c),this._mipmap&&t.generateMipmap(this._type)):(-1!==o||(o=9729),-1!==s||(s=9729),t.texParameteri(this._type,10241,o),t.texParameteri(this._type,10240,s),t.texParameteri(this._type,10242,33071),t.texParameteri(this._type,10243,33071)),r&&a&&L.bindTexture(t,r,a),this._image.onload=null,this._image=null,this.memorySize=_?n*i*4*(1+1/3):n*i*4;},o.recreateResource=function(){this._createWebGlTexture(),this.completeCreate();},o.onAsynLoaded=function(e,n,i){if(i){var r=i[0];void 0!==r&&(this._canRead=r);var a=i[1];void 0!==a&&(this._repeat=a);var o=i[2];void 0!==o&&(this._format=o);var s=i[3];void 0!==s&&(this._mipmap=s);var l=i.wrapModeU;void 0!==l&&(this._wrapModeU=l);var u=i.wrapModeV;void 0!==u&&(this._wrapModeV=u);}
switch(this._format){case 6407:case 6408:this._image=n;var h=n.width,c=n.height;this._width=h,this._height=c,this._size=new qe(h,c),this._canRead&&(S.isConchApp?n instanceof t.HTMLElement&&(this._pixels=new Uint8Array(n.getImageData(0,0,h,c))):(_.canvas.size(h,c),_.canvas.clear(),_.context.drawImage(n,0,0,h,c),this._pixels=new Uint8Array(_.context.getImageData(0,0,h,c).data.buffer)));break;case R.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var f=new d(n);f.readUTFBytes(4),f.readUTFBytes(2),f.getInt16();f.endian="bigEndian",this._width=f.getInt16(),this._height=f.getInt16(),this._size=new qe(this._width,this._height);f.getInt16(),f.getInt16();this._image=new Uint8Array(n,f.pos);}
this.recreateResource(),this._endLoaded();},o.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.");},o.disposeResource=function(){this._source&&(R.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0);},a(0,o,"_src",function(){return this.url;}),a(0,o,"src",function(){return this.url;}),i.load=function(t){return n.loader.create(t,null,null,i);},i;}(),ui=function(t){function e(){e.__super.call(this),this._type=34067;}
r(e,"laya.d3.resource.TextureCube",yn);var i=e.prototype;return i._onTextureLoaded=function(t){this._images=t;for(var e=2147483647,n=2147483647,i=0;i<6;i++){var r=t[i];e=Math.min(e,r.width),n=Math.min(n,r.height);}
this._width=e,this._height=n,this._size=new qe(e,n);},i._createWebGlTexture=function(){var t=0;for(t=0;t<6;t++){if(!this._images[t])throw "create GLTextur err:no data:"+this._images[t];}
var e=R.mainContext,n=this._source=e.createTexture(),i=this._width,r=this._height,a=L.curBindTexTarget,o=L.curBindTexValue;L.bindTexture(e,this._type,n),e.texImage2D(34069,0,6408,6408,5121,this._images[0]),e.texImage2D(34070,0,6408,6408,5121,this._images[1]),e.texImage2D(34071,0,6408,6408,5121,this._images[2]),e.texImage2D(34072,0,6408,6408,5121,this._images[3]),e.texImage2D(34073,0,6408,6408,5121,this._images[4]),e.texImage2D(34074,0,6408,6408,5121,this._images[5]);var s=this.minFifter,l=this.magFifter,h=this._repeat?10497:33071,c=u.isPOT(i,r);for(c?(this.mipmap?-1!==s||(s=9987):-1!==s||(s=9729),-1!==l||(l=9729),e.texParameteri(this._type,10241,s),e.texParameteri(this._type,10240,l),e.texParameteri(this._type,10242,h),e.texParameteri(this._type,10243,h),this.mipmap&&e.generateMipmap(this._type)):(-1!==s||(s=9729),-1!==l||(l=9729),e.texParameteri(this._type,10241,s),e.texParameteri(this._type,10240,l),e.texParameteri(this._type,10242,33071),e.texParameteri(this._type,10243,33071)),a&&o&&L.bindTexture(e,a,o),t=0;t<6;t++){this._images[t].onload=null,this._images[t]=null;}
this.memorySize=c?i*r*4*(1+1/3)*6:i*r*4*6;},i.recreateResource=function(){null!=this._url&&(this._createWebGlTexture(),this.completeCreate());},i.onAsynLoaded=function(t,e,n){this._onTextureLoaded(e),this.activeResource(),this._endLoaded();},i.disposeResource=function(){this._source&&(R.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},a(0,i,"defaulteTexture",function(){return si.grayTexture;}),e.load=function(t){return n.loader.create(t,null,null,e);},e;}(),hi=function(t){function e(t){this._hasIndependentBound=!0,e.__super.call(this,t),this._owner.transform.off("worldmatrixneedchanged",this,this._onWorldMatNeedChange),this._cacheAnimationNodeIndex=[],this._cacheAnimationNode=[],this._localBoundingBoxCorners=o(8,null),this._owner.meshFilter.on("meshchanged",this,this._$3__onMeshChanged);}
r(e,"laya.d3.core.SkinnedMeshRender",t);var n=e.prototype;return n._getCacheAnimationNodes=function(){var t=this._cacheMesh._boneNames,e=t.length;this._cacheAnimationNode.length=e,this._cacheAnimationNodeIndex.length=e;for(var n=this._cacheAnimator._avatarNodes,i=this._cacheAnimator._avatarNodeMap,r=0;r<e;r++){var a=i[t[r]];this._cacheAnimationNode[r]=a,this._cacheAnimationNodeIndex[r]=n.indexOf(a);}},n._offComputeBoneIndexToMeshEvent=function(t,e){t.loaded?e.loaded||e.off("loaded",this,this._getCacheAnimationNodes):t.off("loaded",this,this._computeBoneIndexToMeshWithAsyncMesh);},n._computeBoneIndexToMeshWithAsyncAvatar=function(){this._cacheAvatar.loaded?this._computeBoneIndexToMeshWithAsyncMesh():this._cacheAvatar.once("loaded",this,this._computeBoneIndexToMeshWithAsyncMesh);},n._computeBoneIndexToMeshWithAsyncMesh=function(){this._cacheMesh.loaded?this._getCacheAnimationNodes():this._cacheMesh.on("loaded",this,this._getCacheAnimationNodes);},n._$3__onMeshChanged=function(t,e,n){this._cacheMesh=n,e&&!e.loaded&&n.off("loaded",this,this._onMeshLoaded),n.loaded?this._onMeshLoaded(n):n.on("loaded",this,this._onMeshLoaded),this._cacheAvatar&&(e&&this._offComputeBoneIndexToMeshEvent(this._cacheAvatar,e),n&&this._computeBoneIndexToMeshWithAsyncAvatar());},n._onMeshLoaded=function(t){var e=t.subMeshCount;this._subSkinnedDatas=[],this._subSkinnedDatas.length=e;for(var n=0;n<e;n++){for(var i=this._subSkinnedDatas[n]=[],r=t.getSubMesh(n)._boneIndicesList,a=0,o=r.length;a<o;a++){i[a]=new Float32Array(16*r[a].length);}}},n._setCacheAnimator=function(t){this._cacheAnimator=t,this._rootBone&&(this._rootIndex=t._avatarNodes.indexOf(t._avatarNodeMap[this._rootBone]));},n._setRootBone=function(t){this._rootBone=t,this._cacheAnimator&&(this._rootIndex=this._cacheAnimator._avatarNodes.indexOf(this._cacheAnimator._avatarNodeMap[t]));},n._setCacheAvatar=function(t){this._cacheAvatar!==t&&(this._cacheMesh?(this._cacheAvatar&&this._offComputeBoneIndexToMeshEvent(this._cacheAvatar,this._cacheMesh),this._cacheAvatar=t,t&&(this._addShaderDefine(vi.SHADERDEFINE_BONE),this._computeBoneIndexToMeshWithAsyncAvatar())):this._cacheAvatar=t);},n._calculateBoundingBox=function(){if(this._hasIndependentBound){if(this._cacheAnimator){var e=this._owner.transform,n=e.worldMatrix;if(this._cacheAnimator._canCache){var i=this._cacheAnimator._curAvatarNodeDatas;Ze.matrix4x4MultiplyMFM(this._cacheAnimator.owner.transform.worldMatrix,i[this._rootIndex],n);}else Ze.matrix4x4MultiplyMFM(this._cacheAnimator.owner.transform.worldMatrix,this._cacheAnimator._avatarNodeMap[this._rootBone].transform.getWorldMatrix(),n);e.worldMatrix=n;null==this._cacheAnimator._avatarNodeMap[this._rootBone]||null==this._localBoundBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(this._localBoundingBoxCorners);}}else t.prototype._calculateBoundingBox.call(this);},n._calculateBoundingSphere=function(){if(this._hasIndependentBound){if(this._cacheAnimator){var e=this._owner.transform,n=e.worldMatrix;if(this._cacheAnimator._canCache){var i=this._cacheAnimator._curAvatarNodeDatas;Ze.matrix4x4MultiplyMFM(this._cacheAnimator.owner.transform.worldMatrix,i[this._rootIndex],n);}else Ze.matrix4x4MultiplyMFM(this._cacheAnimator.owner.transform.worldMatrix,this._cacheAnimator._avatarNodeMap[this._rootBone].transform.getWorldMatrix(),n);e.worldMatrix=n;null==this._cacheAnimator._avatarNodeMap[this._rootBone]||null==this.localBoundSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(this.localBoundSphere);}}else t.prototype._calculateBoundingSphere.call(this);},n._updateOctreeNode=function(){var t=this._treeNode;t&&t.updateObject(this);},n._renderUpdate=function(t){var n,i=this._cacheAnimator,r=this._cacheMesh.subMeshCount,a=this._owner.transform;if(i){var o=i._canCache,s=this._cacheAnimator._curAvatarNodeDatas,l=i.owner;if(this._setShaderValueMatrix4x4(0,l._transform.worldMatrix),n=l.getProjectionViewWorldMatrix(t),this._setShaderValueMatrix4x4(1,n),this._cacheMesh&&this._cacheMesh.loaded&&this._cacheAvatar&&this._cacheAvatar.loaded){var u=0,h=0,c=this._cacheMesh._inverseBindPoses,_=this._cacheMesh._skinnedDatas;if(o)for(u=0,h=c.length;u<h;u++){Ze._mulMatrixArray(s[this._cacheAnimationNodeIndex[u]],c[u],_,16*u);}else for(u=0,h=c.length;u<h;u++){Ze._mulMatrixArray(this._cacheAnimationNode[u].transform.getWorldMatrix(),c[u],_,16*u);}
for(u=0;u<r;u++){for(var f=this._cacheMesh.getSubMesh(u)._boneIndicesList,d=f.length,p=this._subSkinnedDatas[u],m=0;m<d;m++){e._splitAnimationDatas(f[m],_,p[m]);}
this._renderElements[u]._skinAnimationDatas=p;}}}else this._setShaderValueMatrix4x4(0,a.worldMatrix),n=this._owner.getProjectionViewWorldMatrix(t),this._setShaderValueMatrix4x4(1,n);return Je.debugMode&&this._renderRenderableBoundBox(),!0;},a(0,n,"localBoundBox",function(){return this._localBoundBox;},function(t){this._localBoundBox=t,t.getCorners(this._localBoundingBoxCorners);}),a(0,n,"boundingSphere",function(){return this._calculateBoundingSphere(),this._boundingSphere;}),a(0,n,"boundingBox",function(){return this._calculateBoundingBox(),this._boundingBox;}),a(0,n,"boundingBoxCenter",function(){var t=this.boundingBox;return Re.add(t.min,t.max,this._boundingBoxCenter),Re.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenter;}),e._splitAnimationDatas=function(t,e,n){for(var i=0,r=t.length,a=0;i<r;i++){for(var o=t[i]<<4,s=0;s<16;s++,a++){n[a]=e[o+s];}}},e;}(En),ci=function(t){function e(t,i){e.__super.call(this),void 0===t&&(t=.3),void 0===i&&(i=1e3),this._tempVector3=new Re(),this._position=new Re(),this._up=new Re(),this._forward=new Re(),this._right=new Re(),this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=qe.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=t,this._farPlane=i,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),n.stage.on("resize",this,this._onScreenSizeChanged);}
r(e,"laya.d3.core.BaseCamera",t);var o=e.prototype;return o._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var t=this.scene._cameraPool,e=t.length-1,n=0;n<e;n++){if(t[n].renderingOrder>t[e].renderingOrder){var i=t[n];t[n]=t[e],t[e]=i;}}},o._calculateProjectionMatrix=function(){},o._onScreenSizeChanged=function(){this._calculateProjectionMatrix();},o._prepareCameraToRender=function(){z._currentCameraCullingMask=this.cullingMask;var t=this._shaderValues;t.setValue(0,this.transform.position.elements),t.setValue(5,this.forward.elements),t.setValue(6,this.up.elements);},o._prepareCameraViewProject=function(t,e){var n=this._shaderValues;n.setValue(1,t.elements),n.setValue(2,e.elements);},o._renderCamera=function(t,e,n){},o.addLayer=function(t){29!==t.number&&30!=t.number&&(this.cullingMask=this.cullingMask|t.mask);},o.removeLayer=function(t){29!==t.number&&30!=t.number&&(this.cullingMask=this.cullingMask&~t.mask);},o.addAllLayers=function(){this.cullingMask=2147483647;},o.removeAllLayers=function(){this.cullingMask=0|z.getLayerByNumber(29).mask|z.getLayerByNumber(30).mask;},o.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix();},o.moveForward=function(t){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=t,this.transform.translate(this._tempVector3);},o.moveRight=function(t){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=t,this.transform.translate(this._tempVector3);},o.moveVertical=function(t){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=t,this.transform.translate(this._tempVector3,!1);},o._addSelfRenderObjects=function(){var t=this.scene._cameraPool,e=t.length;if(e>0){for(var n=e-1;n>=0;n--){if(this.renderingOrder<=t[n].renderingOrder){t.splice(n+1,0,this);break;}}}else t.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel);},o._clearSelfRenderObjects=function(){var t=this.scene._cameraPool;t.splice(t.indexOf(this),1);},o.destroy=function(e){void 0===e&&(e=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,n.stage.off("resize",this,this._onScreenSizeChanged),t.prototype.destroy.call(this,e);},a(0,o,"sky",function(){return this._sky;},function(t){this._sky=t,t._ownerCamera=this;}),a(0,o,"forward",function(){var t=this.transform.worldMatrix.elements,e=this._forward.elements;return e[0]=-t[8],e[1]=-t[9],e[2]=-t[10],this._forward;}),a(0,o,"position",function(){var t=this.transform.worldMatrix.elements,e=this._position.elements;return e[0]=t[12],e[1]=t[13],e[2]=t[14],this._position;}),a(0,o,"renderTarget",function(){return this._renderTarget;},function(t){this._renderTarget=t,null!=t&&(this._renderTargetSize=t.size);}),a(0,o,"up",function(){var t=this.transform.worldMatrix.elements,e=this._up.elements;return e[0]=t[4],e[1]=t[5],e[2]=t[6],this._up;}),a(0,o,"right",function(){var t=this.transform.worldMatrix.elements,e=this._right.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],this._right;}),a(0,o,"renderTargetSize",function(){return this._renderTargetSize;},function(t){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=t,this._calculateProjectionMatrix();}),a(0,o,"fieldOfView",function(){return this._fieldOfView;},function(t){this._fieldOfView=t,this._calculateProjectionMatrix();}),a(0,o,"nearPlane",function(){return this._nearPlane;},function(t){this._nearPlane=t,this._calculateProjectionMatrix();}),a(0,o,"farPlane",function(){return this._farPlane;},function(t){this._farPlane=t,this._calculateProjectionMatrix();}),a(0,o,"orthographic",function(){return this._orthographic;},function(t){this._orthographic=t,this._calculateProjectionMatrix();}),a(0,o,"orthographicVerticalSize",function(){return this._orthographicVerticalSize;},function(t){this._orthographicVerticalSize=t,this._calculateProjectionMatrix();}),a(0,o,"renderingOrder",function(){return this._renderingOrder;},function(t){this._renderingOrder=t,this._sortCamerasByRenderingOrder();}),e.CAMERAPOS=0,e.VIEWMATRIX=1,e.PROJECTMATRIX=2,e.VPMATRIX=3,e.VPMATRIX_NO_TRANSLATE=4,e.CAMERADIRECTION=5,e.CAMERAUP=6,e.ENVIRONMENTDIFFUSE=7,e.ENVIRONMENTSPECULAR=8,e.SIMLODINFO=9,e.DIFFUSEIRRADMATR=10,e.DIFFUSEIRRADMATG=11,e.DIFFUSEIRRADMATB=12,e.HDREXPOSURE=13,e.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",e.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",e.CLEARFLAG_SOLIDCOLOR=0,e.CLEARFLAG_SKY=1,e.CLEARFLAG_DEPTHONLY=2,e.CLEARFLAG_NONE=3,i(e,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new De(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1);},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new De();},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new De();}]),e;}(Nn),_i=function(t){function e(t){this._render=null,this._geometryFilter=null,e.__super.call(this,t);}
r(e,"laya.d3.core.RenderableSprite3D",t);var n=e.prototype;return n._addToInitStaticBatchManager=function(){},n._setBelongScene=function(e){t.prototype._setBelongScene.call(this,e),e._renderableSprite3Ds.push(this),this._render._applyLightMapParams();},n._setUnBelongScene=function(){var e=this._scene._renderableSprite3Ds,n=e.indexOf(this);e.splice(n,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),t.prototype._setUnBelongScene.call(this);},n._update=function(t){t.owner=this,this._activeInHierarchy&&(this._updateComponents(t),this._render._updateOctreeNode(),this._lateUpdateComponents(t),P.spriteCount++,this._childs.length&&this._updateChilds(t));},n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._render._destroy(),this._render=null;},e.__init__=function(){e.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=e.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),e.SAHDERDEFINE_LIGHTMAP=e.shaderDefines.registerDefine("LIGHTMAP");},e.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,e.SAHDERDEFINE_LIGHTMAP=4,e.LIGHTMAPSCALEOFFSET=2,e.LIGHTMAP=3,i(e,["shaderDefines",function(){return this.shaderDefines=new Ue();}]),e;}(Nn),fi=function(t){function e(){this._intensityColor=null,this._intensity=NaN,this._shadow=!1,this._shadowFarPlane=0,this._shadowMapSize=0,this._shadowMapCount=0,this._shadowMapPCFType=0,this._parallelSplitShadowMap=null,this._lightmapBakedType=0,this.color=null,e.__super.call(this),this._intensity=1,this._intensityColor=new Re(),this.color=new Re(1,1,1),this._shadow=!1,this._shadowFarPlane=8,this._shadowMapSize=512,this._shadowMapCount=1,this._shadowMapPCFType=0,this._lightmapBakedType=e.LIGHTMAPBAKEDTYPE_REALTIME;}
r(e,"laya.d3.core.light.LightSprite",Nn);var n=e.prototype;return n._parseCustomProps=function(t,e,n,i){var r=n.color,a=this.color.elements;a[0]=r[0],a[1]=r[1],a[2]=r[2];},n._addSelfRenderObjects=function(){this.lightmapBakedType!==e.LIGHTMAPBAKEDTYPE_BAKED&&this._scene._addLight(this);},n._clearSelfRenderObjects=function(){this.lightmapBakedType!==e.LIGHTMAPBAKEDTYPE_BAKED&&this._scene._removeLight(this);},n._prepareToScene=function(t){return!1;},a(0,n,"lightmapBakedType",function(){return this._lightmapBakedType;},function(t){this._lightmapBakedType!==t&&(this._lightmapBakedType=t,this._activeInHierarchy&&(t!==e.LIGHTMAPBAKEDTYPE_BAKED?this._scene._addLight(this):this._scene._removeLight(this)));}),a(0,n,"shadowPCFType",function(){return this._shadowMapPCFType;},function(t){this._shadowMapPCFType=t,this._parallelSplitShadowMap&&this._parallelSplitShadowMap.setPCFType(t);}),a(0,n,"intensity",function(){return this._intensity;},function(t){this._intensity=t;}),a(0,n,"shadow",function(){return this._shadow;},function(t){throw new Error("LightSprite: must override it.");}),a(0,n,"shadowDistance",function(){return this._shadowFarPlane;},function(t){this._shadowFarPlane=t,this._parallelSplitShadowMap&&this._parallelSplitShadowMap.setFarDistance(t);}),a(0,n,"shadowPSSMCount",function(){return this._shadowMapCount;},function(t){this._shadowMapCount=t,this._parallelSplitShadowMap&&(this._parallelSplitShadowMap.PSSMNum=t);}),a(0,n,"shadowResolution",function(){return this._shadowMapSize;},function(t){this._shadowMapSize=t,this._parallelSplitShadowMap&&this._parallelSplitShadowMap.setShadowMapTextureSize(t);}),a(0,n,"diffuseColor",function(){return console.log("LightSprite: discard property,please use color property instead."),this.color;},function(t){console.log("LightSprite: discard property,please use color property instead."),this.color=t;}),e.LIGHTMAPBAKEDTYPE_REALTIME=0,e.LIGHTMAPBAKEDTYPE_MIXED=1,e.LIGHTMAPBAKEDTYPE_BAKED=2,e;}(),di=function(t){function e(t){this._terrainRes=null,this._lightmapScaleOffset=null,e.__super.call(this),this._lightmapScaleOffset=new Le(1,1,0,0),t&&(this._terrainRes=t,t.loaded?this.buildTerrain(t):t.once("loaded",this,this.buildTerrain));}
r(e,"laya.d3.terrain.Terrain",Nn);var i=e.prototype;return i._parseCustomProps=function(t,e,n,i){this.terrainRes=v.getRes(e[n.dataPath]);var r=n.lightmapIndex;null!=r&&this.setLightmapIndex(r);var a=n.lightmapScaleOffset;a&&this.setLightmapScaleOffset(new Le(a[0],a[1],a[2],a[3]));},i.setLightmapIndex=function(t){for(var e=0;e<this._childs.length;e++){this._childs[e].terrainRender.lightmapIndex=t;}},i.setLightmapScaleOffset=function(t){if(t){t.cloneTo(this._lightmapScaleOffset);for(var e=0;e<this._childs.length;e++){this._childs[e].terrainRender.lightmapScaleOffset=this._lightmapScaleOffset;}}},i.disableLight=function(){for(var t=0,e=this._childs.length;t<e;t++){for(var n=this._childs[t],i=0,r=n._render.sharedMaterials.length;i<r;i++){n._render.sharedMaterials[i].disableLight();}}},i.buildTerrain=function(t){for(var e=t._chunkNumX,n=t._chunkNumZ,i=t._heightData,r=0,a=0;a<n;a++){for(var o=0;o<e;o++){for(var s=new xi(o,a,t._gridSize,i._terrainHeightData,i._width,i._height,t._cameraCoordinateInverse),l=t._chunkInfos[r++],u=0;u<l.alphaMap.length;u++){var h=l.detailID[u].length,c=h>0?t._detailTextureInfos[l.detailID[u][0]].diffuseTexture:null,_=h>1?t._detailTextureInfos[l.detailID[u][1]].diffuseTexture:null,f=h>2?t._detailTextureInfos[l.detailID[u][2]].diffuseTexture:null,d=h>3?t._detailTextureInfos[l.detailID[u][3]].diffuseTexture:null,p=h>0?t._detailTextureInfos[l.detailID[u][0]].scale:null,m=h>1?t._detailTextureInfos[l.detailID[u][1]].scale:null,g=h>2?t._detailTextureInfos[l.detailID[u][2]].scale:null,y=h>3?t._detailTextureInfos[l.detailID[u][3]].scale:null;s.buildRenderElementAndMaterial(h,l.normalMap,l.alphaMap[u],c,_,f,d,t._materialInfo.ambientColor,t._materialInfo.diffuseColor,t._materialInfo.specularColor,p?p.x:1,p?p.y:1,m?m.x:1,m?m.y:1,g?g.x:1,g?g.y:1,y?y.x:1,y?y.y:1);}
s.terrainRender.receiveShadow=!0,s.terrainRender.lightmapScaleOffset=this._lightmapScaleOffset,this.addChild(s);}}},i.width=function(){return this._terrainRes._chunkNumX*He.CHUNK_GRID_NUM*this._terrainRes._gridSize;},i.depth=function(){return this._terrainRes._chunkNumZ*He.CHUNK_GRID_NUM*this._terrainRes._gridSize;},i.getHeightXZ=function(t,n){if(!this._terrainRes||!this._terrainRes.loaded)return NaN;if(t-=this.transform.position.x,n-=this.transform.position.z,e.__VECTOR3__||(e.__VECTOR3__=new Re()),e.__VECTOR3__.elements[0]=t,e.__VECTOR3__.elements[1]=0,e.__VECTOR3__.elements[2]=n,Re.transformV3ToV3(e.__VECTOR3__,He.__ADAPT_MATRIX_INV__,e.__VECTOR3__),t=e.__VECTOR3__.elements[0],n=e.__VECTOR3__.elements[2],t<0||t>this.width()||n<0||n>this.depth())return NaN;var i=this._terrainRes._gridSize,r=parseInt(""+t/i),a=parseInt(""+n/i),o=t-r*i,s=n-a*i,l=NaN,u=NaN,h=NaN,c=NaN,_=NaN,f=this._terrainRes._heightData;return o+s>i?(l=f._terrainHeightData[(a+1-1)*f._width+r+1],u=f._terrainHeightData[(a+1-1)*f._width+r],h=f._terrainHeightData[(a-1)*f._width+r+1],c=(i-o)/i,_=(i-s)/i,l+(u-l)*c+(h-l)*_):(l=f._terrainHeightData[Math.max(0,a-1)*f._width+r],u=f._terrainHeightData[Math.min(f._width*f._height-1,(a+1-1)*f._width+r)],h=f._terrainHeightData[Math.min(f._width*f._height-1,Math.max(0,a-1)*f._width+r+1)],c=o/i,_=s/i,l+(u-l)*_+(h-l)*c);},a(0,i,"terrainRes",null,function(t){t&&(this._terrainRes=t,t.loaded?this.buildTerrain(t):t.once("loaded",this,this.buildTerrain));}),e.load=function(t){return n.loader.create(t,null,null,e,null,1,!1);},e.RENDER_LINE_MODEL=!1,e.LOD_TOLERANCE_VALUE=4,e.LOD_DISTANCE_FACTOR=2,e.__VECTOR3__=null,e;}(),pi=(function(t){function e(t,n,i){this._long=NaN,this._width=NaN,this._height=NaN,void 0===t&&(t=1),void 0===n&&(n=1),void 0===i&&(i=1),e.__super.call(this),this._long=t,this._width=n,this._height=i,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject();}
r(e,"laya.d3.resource.models.BoxMesh",ii);var n=e.prototype;n.recreateResource=function(){this._numberVertices=24,this._numberIndices=36;var t=Jt.vertexDeclaration,e=(t.vertexStride,this._long/2),n=this._height/2,i=this._width/2,r=new Float32Array([-e,n,-i,0,1,0,0,0,e,n,-i,0,1,0,1,0,e,n,i,0,1,0,1,1,-e,n,i,0,1,0,0,1,-e,-n,-i,0,-1,0,0,1,e,-n,-i,0,-1,0,1,1,e,-n,i,0,-1,0,1,0,-e,-n,i,0,-1,0,0,0,-e,n,-i,-1,0,0,0,0,-e,n,i,-1,0,0,1,0,-e,-n,i,-1,0,0,1,1,-e,-n,-i,-1,0,0,0,1,e,n,-i,1,0,0,1,0,e,n,i,1,0,0,0,0,e,-n,i,1,0,0,0,1,e,-n,-i,1,0,0,1,1,-e,n,i,0,0,1,0,0,e,n,i,0,0,1,1,0,e,-n,i,0,0,1,1,1,-e,-n,i,0,0,1,0,1,-e,n,-i,0,0,-1,1,0,e,n,-i,0,0,-1,0,0,e,-n,-i,0,0,-1,0,1,-e,-n,-i,0,0,-1,1,1]),a=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new qn(t,this._numberVertices,35044,!0),this._indexBuffer=new Yn("ushort",this._numberIndices,35044,!0),this._vertexBuffer.setData(r),this._indexBuffer.setData(a),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate();},a(0,n,"long",function(){return this._long;},function(t){this._long!==t&&(this._long=t,this.releaseResource(),this.activeResource());}),a(0,n,"width",function(){return this._width;},function(t){this._width!==t&&(this._width=t,this.releaseResource(),this.activeResource());}),a(0,n,"height",function(){return this._height;},function(t){this._height!==t&&(this._height=t,this.releaseResource(),this.activeResource());});}(),function(t){function e(t,n,i,r){this._radius=NaN,this._height=NaN,this._slices=0,this._stacks=0,void 0===t&&(t=.5),void 0===n&&(n=2),void 0===i&&(i=16),void 0===r&&(r=32),e.__super.call(this),this._radius=t,this._height=n<2*t?2*t:n,this._stacks=i,this._slices=r,this.recreateResource(),this._positions=this._getPositions(),this._generateBoundingObject();}
r(e,"laya.d3.resource.models.CapsuleMesh",ii);var n=e.prototype;n.recreateResource=function(){this._numberVertices=(this._stacks+1)*(this.slices+1)*2+2*(this._slices+1),this._numberIndices=3*this._stacks*(this._slices+1)*2*2+2*this._slices*3;var t=Jt.vertexDeclaration,e=t.vertexStride/4,n=new Float32Array(this._numberVertices*e),i=new Uint16Array(this._numberIndices),r=Math.PI/2/this._stacks,a=2*Math.PI/this._slices,o=this._height/2-this._radius,s=0,l=0,u=0,h=0,c=0,_=0,f=0,d=0;for(f=0;f<=this._stacks;f++){for(d=0;d<=this._slices;d++){s=this._radius*Math.cos(f*r)*Math.cos(d*a+Math.PI),l=this._radius*Math.sin(f*r),u=this._radius*Math.cos(f*r)*Math.sin(d*a+Math.PI),n[h++]=s,n[h++]=l+o,n[h++]=u,n[h++]=s,n[h++]=l,n[h++]=u,n[h++]=1-d/this._slices,n[h++]=(1-f/this._stacks)*(Math.PI*this._radius/2/(this._height+Math.PI*this._radius)),f<this._stacks&&(i[c++]=f*(this._slices+1)+d+(this._slices+1),i[c++]=f*(this._slices+1)+d,i[c++]=f*(this._slices+1)+d+1,i[c++]=f*(this._slices+1)+d+this._slices,i[c++]=f*(this._slices+1)+d,i[c++]=f*(this._slices+1)+d+(this._slices+1));}}
for(_+=(this._stacks+1)*(this._slices+1),f=0;f<=this._stacks;f++){for(d=0;d<=this._slices;d++){s=this._radius*Math.cos(f*r)*Math.cos(d*a+Math.PI),l=this._radius*Math.sin(-f*r),u=this._radius*Math.cos(f*r)*Math.sin(d*a+Math.PI),n[h++]=s,n[h++]=l-o,n[h++]=u,n[h++]=s,n[h++]=l,n[h++]=u,n[h++]=1-d/this._slices,n[h++]=(f/this._stacks*(Math.PI*this._radius/2)+(this._height+Math.PI*this._radius/2))/(this._height+Math.PI*this._radius),f<this._stacks&&(i[c++]=_+f*(this._slices+1)+d,i[c++]=_+f*(this._slices+1)+d+(this._slices+1),i[c++]=_+f*(this._slices+1)+d+1,i[c++]=_+f*(this._slices+1)+d,i[c++]=_+f*(this._slices+1)+d+this._slices,i[c++]=_+f*(this._slices+1)+d+(this._slices+1));}}
for(_+=(this._stacks+1)*(this._slices+1),d=0;d<=this._slices;d++){s=this._radius*Math.cos(d*a+Math.PI),l=o,u=this._radius*Math.sin(d*a+Math.PI),n[h++]=s,n[h+8*(this._slices+1)-1]=s,n[h++]=l,n[h+8*(this._slices+1)-1]=-l,n[h++]=u,n[h+8*(this._slices+1)-1]=u,n[h++]=s,n[h+8*(this._slices+1)-1]=s,n[h++]=0,n[h+8*(this._slices+1)-1]=0,n[h++]=u,n[h+8*(this._slices+1)-1]=u,n[h++]=1-1*d/this._slices,n[h+8*(this._slices+1)-1]=1-1*d/this._slices,n[h++]=Math.PI*this._radius/2/(this._height+Math.PI*this._radius),n[h+8*(this._slices+1)-1]=(Math.PI*this._radius/2+this._height)/(this._height+Math.PI*this._radius);}
for(d=0;d<this._slices;d++){i[c++]=d+_+(this._slices+1),i[c++]=d+_+1,i[c++]=d+_,i[c++]=d+_+(this._slices+1),i[c++]=d+_+(this._slices+1)+1,i[c++]=d+_+1;}
_+=2*(this._slices+1),this._vertexBuffer=new qn(t,this._numberVertices,35044,!0),this._indexBuffer=new Yn("ushort",this._numberIndices,35044,!0),this._vertexBuffer.setData(n),this._indexBuffer.setData(i),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate();},a(0,n,"radius",function(){return this._radius;},function(t){this._radius!==t&&(this._radius=t,this.releaseResource(),this.activeResource());}),a(0,n,"height",function(){return this._height;},function(t){this._height!==t&&(this._height=t,this.releaseResource(),this.activeResource());}),a(0,n,"stacks",function(){return this._stacks;},function(t){this._stacks!==t&&(this._stacks=t,this.releaseResource(),this.activeResource());}),a(0,n,"slices",function(){return this._slices;},function(t){this._slices!==t&&(this._slices=t,this.releaseResource(),this.activeResource());});}(),function(t){function e(t,n,i){this._radius=NaN,this._height=NaN,this._slices=0,void 0===t&&(t=.5),void 0===n&&(n=2),void 0===i&&(i=32),e.__super.call(this),this._radius=t,this._height=n,this._slices=i,this.recreateResource(),this._positions=this._getPositions(),this._generateBoundingObject();}
r(e,"laya.d3.resource.models.CylinderMesh",ii);var n=e.prototype;n.recreateResource=function(){this._numberVertices=this._slices+1+1+2*(this._slices+1)+(this._slices+1+1),this._numberIndices=3*this._slices+6*this._slices+3*this._slices;for(var t=Jt.vertexDeclaration,e=t.vertexStride/4,n=new Float32Array(this._numberVertices*e),i=new Uint16Array(this._numberIndices),r=2*Math.PI/this._slices,a=this._height/2,o=0,s=0,l=0,u=0,h=0,c=0,_=0,f=0;f<=this._slices;f++){0===f&&(n[c++]=0,n[c++]=a,n[c++]=0,n[c++]=0,n[c++]=1,n[c++]=0,n[c++]=.5,n[c++]=.5),o=f*r,l=Math.cos(o)*this._radius,u=a,h=Math.sin(o)*this._radius,n[c++]=l,n[c++]=u,n[c++]=h,n[c++]=0,n[c++]=1,n[c++]=0,n[c++]=.5+.5*Math.cos(o),n[c++]=.5+.5*Math.sin(o);}
for(var d=0;d<this._slices;d++){i[_++]=0,i[_++]=d+1,i[_++]=d+2;}
s+=this._slices+1+1;for(var p=0;p<=this._slices;p++){o=p*r,l=Math.cos(o+Math.PI)*this._radius,u=a,h=Math.sin(o+Math.PI)*this._radius,n[c++]=l,n[c+8*(this._slices+1)-1]=l,n[c++]=u,n[c+8*(this._slices+1)-1]=-u,n[c++]=h,n[c+8*(this._slices+1)-1]=h,n[c++]=l,n[c+8*(this._slices+1)-1]=l,n[c++]=0,n[c+8*(this._slices+1)-1]=0,n[c++]=h,n[c+8*(this._slices+1)-1]=h,n[c++]=1-1*p/this._slices,n[c+8*(this._slices+1)-1]=1-1*p/this._slices,n[c++]=0,n[c+8*(this._slices+1)-1]=1;}
c+=8*(this._slices+1);for(var m=0;m<this._slices;m++){i[_++]=m+s+(this._slices+1),i[_++]=m+s+1,i[_++]=m+s,i[_++]=m+s+(this._slices+1),i[_++]=m+s+(this._slices+1)+1,i[_++]=m+s+1;}
s+=2*(this._slices+1);for(var g=0;g<=this._slices;g++){0===g&&(n[c++]=0,n[c++]=-a,n[c++]=0,n[c++]=0,n[c++]=-1,n[c++]=0,n[c++]=.5,n[c++]=.5),o=g*r,l=Math.cos(o+Math.PI)*this._radius,u=-a,h=Math.sin(o+Math.PI)*this._radius,n[c++]=l,n[c++]=u,n[c++]=h,n[c++]=0,n[c++]=-1,n[c++]=0,n[c++]=.5+.5*Math.cos(o),n[c++]=.5+.5*Math.sin(o);}
for(var y=0;y<this._slices;y++){i[_++]=0+s,i[_++]=y+2+s,i[_++]=y+1+s;}
s+=this._slices+1+1,this._vertexBuffer=new qn(t,this._numberVertices,35044,!0),this._indexBuffer=new Yn("ushort",this._numberIndices,35044,!0),this._vertexBuffer.setData(n),this._indexBuffer.setData(i),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate();},a(0,n,"radius",function(){return this._radius;},function(t){this._radius!==t&&(this._radius=t,this.releaseResource(),this.activeResource());}),a(0,n,"height",function(){return this._height;},function(t){this._height!==t&&(this._height=t,this.releaseResource(),this.activeResource());}),a(0,n,"slices",function(){return this._slices;},function(t){this._slices!==t&&(this._slices=t,this.releaseResource(),this.activeResource());});}(),function(t){function e(t,n,i,r){this._long=NaN,this._width=NaN,this._stacks=0,this._slices=0,void 0===t&&(t=10),void 0===n&&(n=10),void 0===i&&(i=10),void 0===r&&(r=10),e.__super.call(this),this._long=t,this._width=n,this._stacks=i,this._slices=r,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject();}
r(e,"laya.d3.resource.models.PlaneMesh",ii);var n=e.prototype;n.recreateResource=function(){this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var t=new Uint16Array(this._numberIndices),e=Jt.vertexDeclaration,n=e.vertexStride/4,i=new Float32Array(this._numberVertices*n),r=this._long/2,a=this._width/2,o=this._long/this._stacks,s=this._width/this._slices,l=0,u=0;u<=this._slices;u++){for(var h=0;h<=this._stacks;h++){i[l++]=h*o-r,i[l++]=0,i[l++]=u*s-a,i[l++]=0,i[l++]=1,i[l++]=0,i[l++]=1*h/this._stacks,i[l++]=1*u/this._slices;}}
var c=0;for(u=0;u<this._slices;u++){for(h=0;h<this._stacks;h++){t[c++]=(u+1)*(this._stacks+1)+h,t[c++]=u*(this._stacks+1)+h,t[c++]=(u+1)*(this._stacks+1)+h+1,t[c++]=u*(this._stacks+1)+h,t[c++]=u*(this._stacks+1)+h+1,t[c++]=(u+1)*(this._stacks+1)+h+1;}}
this._vertexBuffer=new qn(e,this._numberVertices,35044,!0),this._indexBuffer=new Yn("ushort",this._numberIndices,35044,!0),this._vertexBuffer.setData(i),this._indexBuffer.setData(t),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate();},a(0,n,"long",function(){return this._long;},function(t){this._long!==t&&(this._long=t,this.releaseResource(),this.activeResource());}),a(0,n,"width",function(){return this._width;},function(t){this._width!==t&&(this._width=t,this.releaseResource(),this.activeResource());}),a(0,n,"stacks",function(){return this._stacks;},function(t){this._stacks!==t&&(this._stacks=t,this.releaseResource(),this.activeResource());}),a(0,n,"slices",function(){return this._slices;},function(t){this._slices!==t&&(this._slices=t,this.releaseResource(),this.activeResource());});}(),function(t){function e(t,n){this._long=NaN,this._width=NaN,void 0===t&&(t=1),void 0===n&&(n=1),e.__super.call(this),this._long=t,this._width=n,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject();}
r(e,"laya.d3.resource.models.QuadMesh",ii);var n=e.prototype;n.recreateResource=function(){this._numberVertices=4,this._numberIndices=6;var t=Jt.vertexDeclaration,e=(t.vertexStride,this._long/2),n=this._width/2,i=new Float32Array([-e,n,0,0,0,1,0,0,e,n,0,0,0,1,1,0,-e,-n,0,0,0,1,0,1,e,-n,0,0,0,1,1,1]),r=new Uint16Array([0,1,2,3,2,1]);this._vertexBuffer=new qn(t,this._numberVertices,35044,!0),this._indexBuffer=new Yn("ushort",this._numberIndices,35044,!0),this._vertexBuffer.setData(i),this._indexBuffer.setData(r),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate();},a(0,n,"long",function(){return this._long;},function(t){this._long!==t&&(this._long=t,this.releaseResource(),this.activeResource());}),a(0,n,"width",function(){return this._width;},function(t){this._width!==t&&(this._width=t,this.releaseResource(),this.activeResource());});}(),function(t){function e(t,n,i){this._radius=NaN,this._slices=0,this._stacks=0,void 0===t&&(t=.5),void 0===n&&(n=32),void 0===i&&(i=32),e.__super.call(this),this._radius=t,this._stacks=n,this._slices=i,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject();}
r(e,"laya.d3.resource.models.SphereMesh",ii);var n=e.prototype;n.recreateResource=function(){this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=3*this._stacks*(this._slices+1)*2;for(var t=new Uint16Array(this._numberIndices),e=Jt.vertexDeclaration,n=e.vertexStride/4,i=new Float32Array(this._numberVertices*n),r=Math.PI/this._stacks,a=2*Math.PI/this._slices,o=0,s=0,l=0,u=0;u<this._stacks+1;u++){for(var h=Math.sin(u*r),c=Math.cos(u*r),_=0;_<this._slices+1;_++){var f=h*Math.sin(_*a+1*Math.PI/2),d=h*Math.cos(_*a+1*Math.PI/2);i[s+0]=f*this._radius,i[s+1]=c*this._radius,i[s+2]=d*this._radius,i[s+3]=f,i[s+4]=c,i[s+5]=d,i[s+6]=_/this._slices,i[s+7]=u/this._stacks,s+=n,u!=this._stacks-1&&(t[l++]=o+(this._slices+1),t[l++]=o,t[l++]=o+1,t[l++]=o+this._slices,t[l++]=o,t[l++]=o+(this._slices+1),o++);}}
this._vertexBuffer=new qn(e,this._numberVertices,35044,!0),this._indexBuffer=new Yn("ushort",this._numberIndices,35044,!0),this._vertexBuffer.setData(i),this._indexBuffer.setData(t),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate();},a(0,n,"radius",function(){return this._radius;},function(t){this._radius!==t&&(this._radius=t,this.releaseResource(),this.activeResource());}),a(0,n,"slices",function(){return this._slices;},function(t){this._slices!==t&&(this._slices=t,this.releaseResource(),this.activeResource());}),a(0,n,"stacks",function(){return this._stacks;},function(t){this._stacks!==t&&(this._stacks=t,this.releaseResource(),this.activeResource());});}(),function(t){function e(t,n,i){void 0===t&&(t=0),void 0===n&&(n=.3),void 0===i&&(i=1e3),this._viewMatrix=new De(),this._projectionMatrix=new De(),this._projectionViewMatrix=new De(),this._viewport=new Fe(0,0,0,0),this._normalizedViewport=new Fe(0,0,1,1),this._aspectRatio=t,this._boundFrustumUpdate=!0,this._boundFrustum=new xe(De.DEFAULT),e.__super.call(this,n,i),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged);}
r(e,"laya.d3.core.Camera",ci);var o=e.prototype;return o._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0;},o._parseCustomProps=function(t,e,n,i){var r=n.clearColor;this.clearColor=new Le(r[0],r[1],r[2],r[3]);var a=n.viewport;this.normalizedViewport=new Fe(a[0],a[1],a[2],a[3]);},o._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var t=this.orthographicVerticalSize*this.aspectRatio*.5,e=.5*this.orthographicVerticalSize;De.createOrthoOffCenterRH(-t,t,-e,e,this.nearPlane,this.farPlane,this._projectionMatrix);}else De.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0;},o._update=function(t){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,t);},o._renderCamera=function(t,e,n){n.parallelSplitShadowMaps[0]&&n._renderShadowMap(t,e,this),e.camera=this,this._prepareCameraToRender(),n._preRenderUpdateComponents(e);var i,r;i=e._viewMatrix=this.viewMatrix;var a=this._renderTarget;a?(a.start(),De.multiply(ci._invertYScaleMatrix,this._projectionMatrix,ci._invertYProjectionMatrix),De.multiply(ci._invertYScaleMatrix,this.projectionViewMatrix,ci._invertYProjectionViewMatrix),r=e._projectionMatrix=ci._invertYProjectionMatrix,e._projectionViewMatrix=ci._invertYProjectionViewMatrix):(r=e._projectionMatrix=this._projectionMatrix,e._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(i,r),e._viewport=this.viewport,n._preRenderScene(t,e,this.boundFrustum),n._clear(t,e),n._renderScene(t,e),n._postRenderUpdateComponents(e),a&&a.end();},o.viewportPointToRay=function(t,e){Xe.calculateCursorRay(t,this.viewport,this._projectionMatrix,this.viewMatrix,null,e);},o.normalizedViewportPointToRay=function(t,n){var i=e._tempVector20,r=this.viewport,a=t.elements,o=i.elements;o[0]=a[0]*r.width,o[1]=a[1]*r.height,Xe.calculateCursorRay(i,this.viewport,this._projectionMatrix,this.viewMatrix,null,n);},o.worldToViewportPoint=function(t,e){De.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(t,this._projectionViewMatrix,e);var i=e.elements;i[0]=i[0]/n.stage.clientScaleX,i[1]=i[1]/n.stage.clientScaleY;},o.worldToNormalizedViewportPoint=function(t,e){De.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(t,this._projectionViewMatrix,e);var i=e.elements;i[0]=i[0]/n.stage.clientScaleX,i[1]=i[1]/n.stage.clientScaleY;},o.convertScreenCoordToOrthographicCoord=function(t,e){if(this._orthographic){var n=_t.clientWidth,i=_t.clientHeight,r=this.orthographicVerticalSize*this.aspectRatio/n,a=this.orthographicVerticalSize/i,o=t.elements,s=e.elements;return s[0]=(-n/2+o[0])*r,s[1]=(i/2-o[1])*a,s[2]=(this.nearPlane-this.farPlane)*(o[2]+1)/2-this.nearPlane,Re.transformCoordinate(e,this.transform.worldMatrix,e),!0;}
return!1;},a(0,o,"projectionViewMatrix",function(){return De.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix;}),a(0,o,"aspectRatio",function(){if(0===this._aspectRatio){var t=this.viewport;return t.width/t.height;}
return this._aspectRatio;},function(t){if(t<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=t,this._calculateProjectionMatrix();}),a(0,o,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum;}),a(0,o,"needViewport",function(){var t=this.normalizedViewport;return 0===t.x&&0===t.y&&1===t.width&&1===t.height;}),a(0,o,"viewport",function(){if(this._viewportExpressedInClipSpace){var t=this._normalizedViewport,e=this.renderTargetSize,n=e.width,i=e.height;this._viewport.x=t.x*n,this._viewport.y=t.y*i,this._viewport.width=t.width*n,this._viewport.height=t.height*i;}
return this._viewport;},function(t){if(null!=this.renderTarget&&(t.x<0||t.y<0||0==t.width||0==t.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=t,this._calculateProjectionMatrix();}),a(0,o,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var t=this._viewport,e=this.renderTargetSize,n=e.width,i=e.height;this._normalizedViewport.x=t.x/n,this._normalizedViewport.y=t.y/i,this._normalizedViewport.width=t.width/n,this._normalizedViewport.height=t.height/i;}
return this._normalizedViewport;},function(t){t.x<0&&(t.x=0,console.warn("Camera: viewport.x must large than 0.0.")),t.y<0&&(t.y=0,console.warn("Camera: viewport.y must large than 0.0.")),t.x+t.width>1&&(t.width=1-t.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),t.y+t.height>1&&(t.height=1-t.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=t,this._calculateProjectionMatrix();}),a(0,o,"projectionMatrix",function(){return this._projectionMatrix;},function(t){this._projectionMatrix=t,this._useUserProjectionMatrix=!0;}),a(0,o,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix;}),i(e,["_tempVector20",function(){return this._tempVector20=new Oe();}]),e;}()),mi=(function(t){function e(){e.__super.call(this),this._render=new Dn(this),this._render.on("materialchanged",this,this._onMaterialChanged);var t=new kn();this._render.sharedMaterial=t,this._geometryFilter=new Rn(this),t.renderMode=8,this._changeRenderObject(0);}
r(e,"laya.d3.core.glitter.Glitter",t);var n=e.prototype;n._changeRenderObject=function(t){var e=this._render._renderElements,n=e[t];n||(n=e[t]=new ht()),n._render=this._render;var i=this._render.sharedMaterials[t];i||(i=kn.defaultMaterial);var r=this._geometryFilter;return n._mainSortID=0,n._sprite3D=this,n.renderObj=r,n._material=i,n;},n._onMaterialChanged=function(t,e,n){e<t._renderElements.length&&this._changeRenderObject(e);},n._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render);},n._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render);},n._update=function(e){this._geometryFilter._update(e.elapsedTime),t.prototype._update.call(this,e);},n.addGlitterByPositions=function(t,e){this._geometryFilter.addVertexPosition(t,e);},n.addGlitterByPositionsVelocitys=function(t,e,n,i){this._geometryFilter.addVertexPositionVelocity(t,e,n,i);},n.cloneTo=function(t){var e=t,n=e.templet,i=this._geometryFilter;n.lifeTime=i.lifeTime,n.minSegmentDistance=i.minSegmentDistance,n.minInterpDistance=i.minInterpDistance,n.maxSlerpCount=i.maxSlerpCount,n._maxSegments=i._maxSegments;var r=e._render,a=this._render;r.sharedMaterials=a.sharedMaterials,r.enable=a.enable,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,t);},n.destroy=function(e){void 0===e&&(e=!0),this.destroyed||(t.prototype.destroy.call(this,e),this._geometryFilter._destroy(),this._geometryFilter=null);},a(0,n,"templet",function(){return this._geometryFilter;}),a(0,n,"glitterRender",function(){return this._render;}),e.CURRENTTIME=2,e.DURATION=3;}(_i),function(t){function e(){this._direction=null,this._updateDirection=!1,e.__super.call(this),this._updateDirection=!1,this._direction=new Re(),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChange);}
r(e,"laya.d3.core.light.DirectionLight",t);var n=e.prototype;return n._initShadow=function(){if(this._shadow)this._parallelSplitShadowMap=new ke(),this.scene.parallelSplitShadowMaps.push(this._parallelSplitShadowMap),this.transform.worldMatrix.getForward(this._direction),Re.normalize(this._direction,this._direction),this._parallelSplitShadowMap.setInfo(this.scene,this._shadowFarPlane,this._direction,this._shadowMapSize,this._shadowMapCount,this._shadowMapPCFType);else{var t=this.scene.parallelSplitShadowMaps;t.splice(t.indexOf(this._parallelSplitShadowMap),1),this._parallelSplitShadowMap.disposeAllRenderTarget(),this._parallelSplitShadowMap=null,this.scene.removeShaderDefine(ke.SHADERDEFINE_SHADOW_PSSM1),this.scene.removeShaderDefine(ke.SHADERDEFINE_SHADOW_PSSM2),this.scene.removeShaderDefine(ke.SHADERDEFINE_SHADOW_PSSM3);}},n._addSelfRenderObjects=function(){t.prototype._addSelfRenderObjects.call(this),this._shadow&&this._initShadow();},n._clearSelfRenderObjects=function(){var t=this.scene,e=t._shaderValues;e.setValue(4,null),e.setValue(3,null),t.removeShaderDefine(cn.SHADERDEFINE_DIRECTIONLIGHT);},n._prepareToScene=function(t){var e=t.scene;if(e.enableLight&&this._activeInHierarchy){var n=e._shaderValues;return e.addShaderDefine(cn.SHADERDEFINE_DIRECTIONLIGHT),Re.scale(this.color,this._intensity,this._intensityColor),n.setValue(4,this._intensityColor.elements),this.transform.worldMatrix.getForward(this._direction),Re.normalize(this._direction,this._direction),n.setValue(3,this._direction.elements),!0;}
return e.removeShaderDefine(cn.SHADERDEFINE_DIRECTIONLIGHT),!1;},n._onWorldMatrixChange=function(){this._updateDirection=!0;},a(0,n,"shadow",t.prototype._$get_shadow,function(t){this._shadow!==t&&(this._shadow=t,this.scene&&this._initShadow());}),a(0,n,"direction",function(){return console.log("Warning: discard property,please use transform's property instead."),this._updateDirection&&(this.transform.worldMatrix.getForward(this._direction),Re.normalize(this._direction,this._direction),this._updateDirection=!1),this._direction;},function(t){console.log("Warning: discard property,please use transform's property instead.");var e=this.transform.worldMatrix;e.setForward(t),this.transform.worldMatrix=e,Re.normalize(t,t),this._direction=t,this.shadow&&this._parallelSplitShadowMap&&this._parallelSplitShadowMap._setGlobalParallelLightDir(this._direction);}),e;}(fi)),gi=(function(t){function e(){this._range=NaN,this._attenuation=null,e.__super.call(this),this._range=6,this._attenuation=new Re(.6,.6,.6);}
r(e,"laya.d3.core.light.PointLight",fi);var n=e.prototype;n._clearSelfRenderObjects=function(){var t=this.scene,e=t._shaderValues;e.setValue(8,null),e.setValue(5,null),e.setValue(6,null),e.setValue(7,null),t.removeShaderDefine(cn.SHADERDEFINE_POINTLIGHT);},n._prepareToScene=function(t){var e=t.scene;if(e.enableLight&&this._activeInHierarchy){var n=e._shaderValues;return e.addShaderDefine(cn.SHADERDEFINE_POINTLIGHT),Re.scale(this.color,this._intensity,this._intensityColor),n.setValue(8,this._intensityColor.elements),n.setValue(5,this.transform.position.elements),n.setValue(6,this.range),n.setValue(7,this.attenuation.elements),!0;}
return e.removeShaderDefine(cn.SHADERDEFINE_POINTLIGHT),!1;},a(0,n,"range",function(){return this._range;},function(t){this._range=t;}),a(0,n,"attenuation",function(){return this._attenuation;},function(t){this._attenuation=t;});}(),function(t){function e(){this._updateDirection=!1,this._direction=null,this._spot=NaN,this._range=NaN,this._attenuation=null,e.__super.call(this),this._updateDirection=!1,this.direction=new Re(0,-1,-1),this._attenuation=new Re(.6,.6,.6),this._spot=96,this._range=6,this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChange);}
r(e,"laya.d3.core.light.SpotLight",fi);var n=e.prototype;n._onWorldMatrixChange=function(){this._updateDirection=!0;},n._clearSelfRenderObjects=function(){var t=this.scene,e=t._shaderValues;e.setValue(14,null),e.setValue(9,null),e.setValue(10,null),e.setValue(12,null),e.setValue(11,null),e.setValue(13,null),t.removeShaderDefine(cn.SHADERDEFINE_SPOTLIGHT);},n._prepareToScene=function(t){var e=t.scene;if(e.enableLight&&this._activeInHierarchy){var n=e._shaderValues;return e.addShaderDefine(cn.SHADERDEFINE_SPOTLIGHT),Re.scale(this.color,this._intensity,this._intensityColor),n.setValue(14,this._intensityColor.elements),n.setValue(9,this.transform.position.elements),this.transform.worldMatrix.getForward(this._direction),Re.normalize(this._direction,this._direction),n.setValue(10,this._direction.elements),n.setValue(12,this.range),n.setValue(11,this.spot),n.setValue(13,this.attenuation.elements),!0;}
return e.removeShaderDefine(cn.SHADERDEFINE_SPOTLIGHT),!1;},a(0,n,"spot",function(){return this._spot;},function(t){this._spot=t;}),a(0,n,"direction",function(){return console.log("Warning: discard property,please use transform's property instead."),this._updateDirection&&(this.transform.worldMatrix.getForward(this._direction),this._updateDirection=!1),this._direction;},function(t){console.log("Warning: discard property,please use transform's property instead.");var e=this.transform.worldMatrix;e.setForward(t),this.transform.worldMatrix=e,this._direction=t;}),a(0,n,"range",function(){return this._range;},function(t){this._range=t;}),a(0,n,"attenuation",function(){return this._attenuation;},function(t){this._attenuation=t;});}(),function(t){function e(t,n){e.__super.call(this,n),this._geometryFilter=new Cn(this),this._render=new En(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),t&&(this._geometryFilter.sharedMesh=t,t instanceof laya.d3.resource.models.Mesh&&(t.loaded?this._render.sharedMaterials=t.materials:t.once("loaded",this,this._applyMeshMaterials)));}
r(e,"laya.d3.core.MeshSprite3D",t);var o=e.prototype;return o._changeRenderObjectByMesh=function(t){var e=this._render._renderElements,n=e[t];n||(n=e[t]=new hn()),n._render=this._render;var i=this._render.sharedMaterials[t];i||(i=Wn.defaultMaterial);var r=this._geometryFilter.sharedMesh.getRenderElement(t);return n._mainSortID=this._getSortID(r,i),n._sprite3D=this,n.renderObj=r,n._material=i,n;},o._changeRenderObjectByMaterial=function(t,e){var n=this._render._renderElements[t];e||(e=Wn.defaultMaterial);var i=this._geometryFilter.sharedMesh.getRenderElement(t);return n._mainSortID=this._getSortID(i,e),n._sprite3D=this,n.renderObj=i,n._material=e,n;},o._changeRenderObjectsByMesh=function(){var t=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=t;for(var e=0;e<t;e++){this._changeRenderObjectByMesh(e);}},o._onMeshChanged=function(t){var e=t.sharedMesh;e.loaded?this._changeRenderObjectsByMesh():e.once("loaded",this,this._onMeshLoaded);},o._onMeshLoaded=function(t){t===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh();},o._onMaterialChanged=function(t,e,n){e<this._render._renderElements.length&&this._changeRenderObjectByMaterial(e,n);},o._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render);},o._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render);},o._parseCustomProps=function(t,e,n,i){var r=this.meshRender,a=n.lightmapIndex;null!=a&&(r.lightmapIndex=a);var o=n.lightmapScaleOffset;o&&(r.lightmapScaleOffset=new Le(o[0],o[1],o[2],o[3]));var s,l;if(i.instanceParams)(s=i.instanceParams.loadPath)&&(l=v.getRes(e[s]),this.meshFilter.sharedMesh=l,l.loaded?r.sharedMaterials=l.materials:l.once("loaded",this,this._applyMeshMaterials));else{(s=n.meshPath)&&(l=v.getRes(e[s]),this.meshFilter.sharedMesh=l);var u=n.materials;if(u){var h=r.sharedMaterials,c=u.length;h.length=c;for(var _=0;_<c;_++){h[_]=v.getRes(e[u[_].path]);}
r.sharedMaterials=h;}}},o._applyMeshMaterials=function(t){for(var e=this._render.sharedMaterials,n=t.materials,i=0,r=n.length;i<r;i++){e[i]||(e[i]=n[i]);}
this._render.sharedMaterials=e;},o._addToInitStaticBatchManager=function(){e._staticBatchManager._addInitBatchSprite(this);},o.cloneTo=function(t){var e=t;e._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var n=this._render,i=e._render;i.enable=n.enable,i.sharedMaterials=n.sharedMaterials,i.castShadow=n.castShadow;var r=n.lightmapScaleOffset;r&&(i.lightmapScaleOffset=r.clone()),i.lightmapIndex=n.lightmapIndex,i.receiveShadow=n.receiveShadow,i.sortingFudge=n.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,t);},o.destroy=function(e){if(void 0===e&&(e=!0),!this.destroyed){var n=this.meshFilter.sharedMesh;n.loaded||n.off("loaded",this,this._applyMeshMaterials),t.prototype.destroy.call(this,e),this._geometryFilter._destroy();}},a(0,o,"meshFilter",function(){return this._geometryFilter;}),a(0,o,"meshRender",function(){return this._render;}),e.__init__=function(){bt._staticBatchManagers.push(e._staticBatchManager);},e.load=function(t){return n.loader.create(t,null,null,e);},i(e,["_staticBatchManager",function(){return this._staticBatchManager=new _n();}]),e;}(_i)),yi=function(t){function e(t){e.__super.call(this),this._render=new Mn(this),this._render.on("materialchanged",this,this._onMaterialChanged),this._geometryFilter=new Pn(this),this._createRenderElement(0),t&&(this._render.sharedMaterial=t);}
r(e,"laya.d3.core.particleShuriKen.ShuriKenParticle3D",t);var o=e.prototype;return o._initParticleVelocity=function(t){for(var e=new $(),n=t.velocitys,i=0,r=n.length;i<r;i++){var a=n[i];e.add(a.key,a.value);}
return e;},o._initParticleColor=function(t){var e=new Z(),n=t.alphas,i=0,r=0;for(i=0,r=n.length;i<r;i++){var a=n[i];e.addAlpha(a.key,a.value);}
var o=t.rgbs;for(i=0,r=o.length;i<r;i++){var s=o[i],l=s.value;e.addRGB(s.key,new Re(l[0],l[1],l[2]));}
return e;},o._initParticleSize=function(t){for(var e=new $(),n=t.sizes,i=0,r=n.length;i<r;i++){var a=n[i];e.add(a.key,a.value);}
return e;},o._initParticleRotation=function(t){for(var e=new $(),n=t.angularVelocitys,i=0,r=n.length;i<r;i++){var a=n[i];e.add(a.key,a.value/180*Math.PI);}
return e;},o._initParticleFrame=function(t){for(var e=new J(),n=t.frames,i=0,r=n.length;i<r;i++){var a=n[i];e.add(a.key,a.value);}
return e;},o._createRenderElement=function(t){var e=this._render._renderElements[t]=new ht();e._render=this._render;var n=this._render.sharedMaterials[t];n||(n=Zn.defaultMaterial);var i=this._geometryFilter;e._mainSortID=0,e._sprite3D=this,e.renderObj=i,e._material=n;},o._onMaterialChanged=function(t,e,n){var i=t._renderElements;if(e<i.length){i[e]._material=n||Zn.defaultMaterial;}},o._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render);},o._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render);},o._parseCustomProps=function(t,n,i,r){var a,o=Math.PI/180,s=0,l=0,u=this.particleRender,h=i.material;if(h)a=v.getRes(n[h.path]);else{var c=i.materialPath;c?a=v.getRes(n[c]):(a=new Zn()).diffuseTexture=n?v.getRes(n[i.texturePath]):li.load(i.texturePath);}
u.sharedMaterial=a;var _=i.meshPath;_&&(u.mesh=v.getRes(n[_])),u.renderMode=i.renderMode,u.stretchedBillboardCameraSpeedScale=i.stretchedBillboardCameraSpeedScale,u.stretchedBillboardSpeedScale=i.stretchedBillboardSpeedScale,u.stretchedBillboardLengthScale=i.stretchedBillboardLengthScale,u.sortingFudge=i.sortingFudge?i.sortingFudge:0;var f=this.particleSystem;f.isPerformanceMode=i.isPerformanceMode,f.duration=i.duration,f.looping=i.looping,f.prewarm=i.prewarm,f.startDelayType=i.startDelayType,f.startDelay=i.startDelay,f.startDelayMin=i.startDelayMin,f.startDelayMax=i.startDelayMax,f.startLifetimeType=i.startLifetimeType,f.startLifetimeConstant=i.startLifetimeConstant,f.startLifeTimeGradient=e._initStartLife(i.startLifetimeGradient),f.startLifetimeConstantMin=i.startLifetimeConstantMin,f.startLifetimeConstantMax=i.startLifetimeConstantMax,f.startLifeTimeGradientMin=e._initStartLife(i.startLifetimeGradientMin),f.startLifeTimeGradientMax=e._initStartLife(i.startLifetimeGradientMax),f.startSpeedType=i.startSpeedType,f.startSpeedConstant=i.startSpeedConstant,f.startSpeedConstantMin=i.startSpeedConstantMin,f.startSpeedConstantMax=i.startSpeedConstantMax,f.threeDStartSize=i.threeDStartSize,f.startSizeType=i.startSizeType,f.startSizeConstant=i.startSizeConstant;var d=i.startSizeConstantSeparate,p=f.startSizeConstantSeparate.elements;p[0]=d[0],p[1]=d[1],p[2]=d[2],f.startSizeConstantMin=i.startSizeConstantMin,f.startSizeConstantMax=i.startSizeConstantMax;var m=i.startSizeConstantMinSeparate,g=f.startSizeConstantMinSeparate.elements;g[0]=m[0],g[1]=m[1],g[2]=m[2];var y=i.startSizeConstantMaxSeparate,I=f.startSizeConstantMaxSeparate.elements;I[0]=y[0],I[1]=y[1],I[2]=y[2],f.threeDStartRotation=i.threeDStartRotation,f.startRotationType=i.startRotationType,f.startRotationConstant=i.startRotationConstant*o;var x=i.startRotationConstantSeparate,T=f.startRotationConstantSeparate.elements;T[0]=x[0]*o,T[1]=x[1]*o,T[2]=x[2]*o,f.startRotationConstantMin=i.startRotationConstantMin*o,f.startRotationConstantMax=i.startRotationConstantMax*o;var S=i.startRotationConstantMinSeparate,b=f.startRotationConstantMinSeparate.elements;b[0]=S[0]*o,b[1]=S[1]*o,b[2]=S[2]*o;var w=i.startRotationConstantMaxSeparate,D=f.startRotationConstantMaxSeparate.elements;D[0]=w[0]*o,D[1]=w[1]*o,D[2]=w[2]*o,f.randomizeRotationDirection=i.randomizeRotationDirection,f.startColorType=i.startColorType;var C=i.startColorConstant,E=f.startColorConstant.elements;E[0]=C[0],E[1]=C[1],E[2]=C[2],E[3]=C[3];var P=i.startColorConstantMin,M=f.startColorConstantMin.elements;M[0]=P[0],M[1]=P[1],M[2]=P[2],M[3]=P[3];var A=i.startColorConstantMax,O=f.startColorConstantMax.elements;O[0]=A[0],O[1]=A[1],O[2]=A[2],O[3]=A[3],f.gravityModifier=i.gravityModifier,f.simulationSpace=i.simulationSpace,f.scaleMode=i.scaleMode,f.playOnAwake=i.playOnAwake,f.maxParticles=i.maxParticles;var R=i.autoRandomSeed;null!=R&&(f.autoRandomSeed=R);var L=i.randomSeed;null!=L&&(f.randomSeed[0]=L);var F=i.emission,V=f.emission;if(F){V.emissionRate=F.emissionRate;var N=F.bursts;if(N)for(s=0,l=N.length;s<l;s++){var U=N[s];V.addBurst(new j(U.time,U.min,U.max));}
V.enbale=F.enable;}else V.enbale=!1;var G=i.shape;if(G){var B;switch(G.shapeType){case 0:var k;B=k=new un(),k.radius=G.sphereRadius,k.emitFromShell=G.sphereEmitFromShell,k.randomDirection=G.sphereRandomDirection;break;case 1:var H;B=H=new ln(),H.radius=G.hemiSphereRadius,H.emitFromShell=G.hemiSphereEmitFromShell,H.randomDirection=G.hemiSphereRandomDirection;break;case 2:var z;B=z=new sn(),z.angle=G.coneAngle*o,z.radius=G.coneRadius,z.length=G.coneLength,z.emitType=G.coneEmitType,z.randomDirection=G.coneRandomDirection;break;case 3:var K;B=K=new an(),K.x=G.boxX,K.y=G.boxY,K.z=G.boxZ,K.randomDirection=G.boxRandomDirection;break;case 7:var Z;B=Z=new on(),Z.radius=G.circleRadius,Z.arc=G.circleArc*o,Z.emitFromEdge=G.circleEmitFromEdge,Z.randomDirection=G.circleRandomDirection;break;default:var J;B=J=new on(),J.radius=G.circleRadius,J.arc=G.circleArc*o,J.emitFromEdge=G.circleEmitFromEdge,J.randomDirection=G.circleRandomDirection;}
B.enable=G.enable,f.shape=B;}
var $=i.velocityOverLifetime;if($){var nt,it=$.velocity;switch(it.type){case 0:var lt=it.constant;nt=tt.createByConstant(new Re(lt[0],lt[1],lt[2]));break;case 1:nt=tt.createByGradient(this._initParticleVelocity(it.gradientX),this._initParticleVelocity(it.gradientY),this._initParticleVelocity(it.gradientZ));break;case 2:var ut=it.constantMin,ht=it.constantMax;nt=tt.createByRandomTwoConstant(new Re(ut[0],ut[1],ut[2]),new Re(ht[0],ht[1],ht[2]));break;case 3:nt=tt.createByRandomTwoGradient(this._initParticleVelocity(it.gradientXMin),this._initParticleVelocity(it.gradientXMax),this._initParticleVelocity(it.gradientYMin),this._initParticleVelocity(it.gradientYMax),this._initParticleVelocity(it.gradientZMin),this._initParticleVelocity(it.gradientZMax));}
var ct=new st(nt);ct.space=$.space,ct.enbale=$.enable,f.velocityOverLifetime=ct;}
var _t=i.colorOverLifetime;if(_t){var ft,dt=_t.color;switch(dt.type){case 0:var pt=dt.constant;ft=q.createByConstant(new Le(pt[0],pt[1],pt[2],pt[3]));break;case 1:ft=q.createByGradient(this._initParticleColor(dt.gradient));break;case 2:var mt=dt.constantMin,gt=dt.constantMax;ft=q.createByRandomTwoConstant(new Le(mt[0],mt[1],mt[2],mt[3]),new Le(gt[0],gt[1],gt[2],gt[3]));break;case 3:ft=q.createByRandomTwoGradient(this._initParticleColor(dt.gradientMin),this._initParticleColor(dt.gradientMax));}
var yt=new W(ft);yt.enbale=_t.enable,f.colorOverLifetime=yt;}
var vt=i.sizeOverLifetime;if(vt){var It,xt=vt.size;switch(xt.type){case 0:It=xt.separateAxes?Q.createByGradientSeparate(this._initParticleSize(xt.gradientX),this._initParticleSize(xt.gradientY),this._initParticleSize(xt.gradientZ)):Q.createByGradient(this._initParticleSize(xt.gradient));break;case 1:if(xt.separateAxes){var Tt=xt.constantMinSeparate,St=xt.constantMaxSeparate;It=Q.createByRandomTwoConstantSeparate(new Re(Tt[0],Tt[1],Tt[2]),new Re(St[0],St[1],St[2]));}else It=Q.createByRandomTwoConstant(xt.constantMin,xt.constantMax);break;case 2:It=xt.separateAxes?Q.createByRandomTwoGradientSeparate(this._initParticleSize(xt.gradientXMin),this._initParticleSize(xt.gradientYMin),this._initParticleSize(xt.gradientZMin),this._initParticleSize(xt.gradientXMax),this._initParticleSize(xt.gradientYMax),this._initParticleSize(xt.gradientZMax)):Q.createByRandomTwoGradient(this._initParticleSize(xt.gradientMin),this._initParticleSize(xt.gradientMax));}
var bt=new rt(It);bt.enbale=vt.enable,f.sizeOverLifetime=bt;}
var wt=i.rotationOverLifetime;if(wt){var Dt,Ct=wt.angularVelocity;switch(Ct.type){case 0:Ct.separateAxes||(Dt=Y.createByConstant(Ct.constant*o));break;case 1:Ct.separateAxes||(Dt=Y.createByGradient(this._initParticleRotation(Ct.gradient)));break;case 2:if(Ct.separateAxes){var Et=Ct.constantMinSeparate,Pt=Ct.constantMaxSeparate;Dt=Y.createByRandomTwoConstantSeparate(new Re(Et[0]*o,Et[1]*o,Et[2]*o),new Re(Pt[0]*o,Pt[1]*o,Pt[2]*o));}else Dt=Y.createByRandomTwoConstant(Ct.constantMin*o,Ct.constantMax*o);break;case 3:Ct.separateAxes||(Dt=Y.createByRandomTwoGradient(this._initParticleRotation(Ct.gradientMin),this._initParticleRotation(Ct.gradientMax)));}
var Mt=new et(Dt);Mt.enbale=wt.enable,f.rotationOverLifetime=Mt;}
var At=i.textureSheetAnimation;if(At){var Ot,Rt=At.frame;switch(Rt.type){case 0:Ot=X.createByConstant(Rt.constant);break;case 1:Ot=X.createByOverTime(this._initParticleFrame(Rt.overTime));break;case 2:Ot=X.createByRandomTwoConstant(Rt.constantMin,Rt.constantMax);break;case 3:Ot=X.createByRandomTwoOverTime(this._initParticleFrame(Rt.overTimeMin),this._initParticleFrame(Rt.overTimeMax));}
var Lt,Ft=At.startFrame;switch(Ft.type){case 0:Lt=at.createByConstant(Ft.constant);break;case 1:Lt=at.createByRandomTwoConstant(Ft.constantMin,Ft.constantMax);}
var Vt=new ot(Ot,Lt);Vt.enable=At.enable;var Nt=At.tiles;Vt.tiles=new Oe(Nt[0],Nt[1]),Vt.type=At.type,Vt.randomRow=At.randomRow;var Ut=At.rowIndex;void 0!==Ut&&(Vt.rowIndex=Ut),Vt.cycles=At.cycles,f.textureSheetAnimation=Vt;}},o._activeHierarchy=function(){laya.d3.core.Sprite3D.prototype._activeHierarchy.call(this),this.particleSystem.playOnAwake&&this.particleSystem.play();},o._inActiveHierarchy=function(){laya.d3.core.Sprite3D.prototype._inActiveHierarchy.call(this),this.particleSystem.isAlive&&this.particleSystem.simulate(0,!0);},o.cloneTo=function(t){var e=t,n=e._geometryFilter;this._geometryFilter.cloneTo(n);var i=e._render,r=this._render;i.sharedMaterials=r.sharedMaterials,i.enable=r.enable,i.renderMode=r.renderMode,i.mesh=r.mesh,i.stretchedBillboardCameraSpeedScale=r.stretchedBillboardCameraSpeedScale,i.stretchedBillboardSpeedScale=r.stretchedBillboardSpeedScale,i.stretchedBillboardLengthScale=r.stretchedBillboardLengthScale,i.sortingFudge=r.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,t);},o.destroy=function(e){void 0===e&&(e=!0),this.destroyed||(t.prototype.destroy.call(this,e),this._geometryFilter._destroy(),this._geometryFilter=null);},a(0,o,"particleSystem",function(){return this._geometryFilter;}),a(0,o,"particleRender",function(){return this._render;}),e.__init__=function(){e.SHADERDEFINE_RENDERMODE_BILLBOARD=e.shaderDefines.registerDefine("SPHERHBILLBOARD"),e.SHADERDEFINE_RENDERMODE_STRETCHEDBILLBOARD=e.shaderDefines.registerDefine("STRETCHEDBILLBOARD"),e.SHADERDEFINE_RENDERMODE_HORIZONTALBILLBOARD=e.shaderDefines.registerDefine("HORIZONTALBILLBOARD"),e.SHADERDEFINE_RENDERMODE_VERTICALBILLBOARD=e.shaderDefines.registerDefine("VERTICALBILLBOARD"),e.SHADERDEFINE_COLOROVERLIFETIME=e.shaderDefines.registerDefine("COLOROVERLIFETIME"),e.SHADERDEFINE_RANDOMCOLOROVERLIFETIME=e.shaderDefines.registerDefine("RANDOMCOLOROVERLIFETIME"),e.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT=e.shaderDefines.registerDefine("VELOCITYOVERLIFETIMECONSTANT"),e.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE=e.shaderDefines.registerDefine("VELOCITYOVERLIFETIMECURVE"),e.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT=e.shaderDefines.registerDefine("VELOCITYOVERLIFETIMERANDOMCONSTANT"),e.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE=e.shaderDefines.registerDefine("VELOCITYOVERLIFETIMERANDOMCURVE"),e.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE=e.shaderDefines.registerDefine("TEXTURESHEETANIMATIONCURVE"),e.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE=e.shaderDefines.registerDefine("TEXTURESHEETANIMATIONRANDOMCURVE"),e.SHADERDEFINE_ROTATIONOVERLIFETIME=e.shaderDefines.registerDefine("ROTATIONOVERLIFETIME"),e.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE=e.shaderDefines.registerDefine("ROTATIONOVERLIFETIMESEPERATE"),e.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT=e.shaderDefines.registerDefine("ROTATIONOVERLIFETIMECONSTANT"),e.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE=e.shaderDefines.registerDefine("ROTATIONOVERLIFETIMECURVE"),e.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS=e.shaderDefines.registerDefine("ROTATIONOVERLIFETIMERANDOMCURVES"),e.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES=e.shaderDefines.registerDefine("ROTATIONOVERLIFETIMERANDOMCURVES"),e.SHADERDEFINE_SIZEOVERLIFETIMECURVE=e.shaderDefines.registerDefine("SIZEOVERLIFETIMECURVE"),e.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE=e.shaderDefines.registerDefine("SIZEOVERLIFETIMECURVESEPERATE"),e.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES=e.shaderDefines.registerDefine("SIZEOVERLIFETIMERANDOMCURVES"),e.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE=e.shaderDefines.registerDefine("SIZEOVERLIFETIMERANDOMCURVESSEPERATE"),e.SHADERDEFINE_RENDERMODE_MESH=e.shaderDefines.registerDefine("RENDERMODE_MESH"),e.SHADERDEFINE_SHAPE=e.shaderDefines.registerDefine("SHAPE");},e.load=function(t){return n.loader.create(t,null,null,e);},e._initStartLife=function(t){for(var e=new $(),n=t.startLifetimes,i=0,r=n.length;i<r;i++){var a=n[i];e.add(a.key,a.value);}
return e;},e.SHADERDEFINE_RENDERMODE_BILLBOARD=0,e.SHADERDEFINE_RENDERMODE_STRETCHEDBILLBOARD=0,e.SHADERDEFINE_RENDERMODE_HORIZONTALBILLBOARD=0,e.SHADERDEFINE_RENDERMODE_VERTICALBILLBOARD=0,e.SHADERDEFINE_COLOROVERLIFETIME=0,e.SHADERDEFINE_RANDOMCOLOROVERLIFETIME=0,e.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT=0,e.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE=0,e.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT=0,e.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE=0,e.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE=0,e.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE=0,e.SHADERDEFINE_ROTATIONOVERLIFETIME=0,e.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE=0,e.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT=0,e.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE=0,e.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS=0,e.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES=0,e.SHADERDEFINE_SIZEOVERLIFETIMECURVE=0,e.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE=0,e.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES=0,e.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE=0,e.SHADERDEFINE_RENDERMODE_MESH=0,e.SHADERDEFINE_SHAPE=0,e.WORLDPOSITION=0,e.WORLDROTATION=1,e.POSITIONSCALE=4,e.SIZESCALE=5,e.SCALINGMODE=6,e.GRAVITY=7,e.THREEDSTARTROTATION=8,e.STRETCHEDBILLBOARDLENGTHSCALE=9,e.STRETCHEDBILLBOARDSPEEDSCALE=10,e.SIMULATIONSPACE=11,e.CURRENTTIME=12,e.VOLVELOCITYCONST=13,e.VOLVELOCITYGRADIENTX=14,e.VOLVELOCITYGRADIENTY=15,e.VOLVELOCITYGRADIENTZ=16,e.VOLVELOCITYCONSTMAX=17,e.VOLVELOCITYGRADIENTXMAX=18,e.VOLVELOCITYGRADIENTYMAX=19,e.VOLVELOCITYGRADIENTZMAX=20,e.VOLSPACETYPE=21,e.COLOROVERLIFEGRADIENTALPHAS=22,e.COLOROVERLIFEGRADIENTCOLORS=23,e.MAXCOLOROVERLIFEGRADIENTALPHAS=24,e.MAXCOLOROVERLIFEGRADIENTCOLORS=25,e.SOLSIZEGRADIENT=26,e.SOLSIZEGRADIENTX=27,e.SOLSIZEGRADIENTY=28,e.SOLSizeGradientZ=29,e.SOLSizeGradientMax=30,e.SOLSIZEGRADIENTXMAX=31,e.SOLSIZEGRADIENTYMAX=32,e.SOLSizeGradientZMAX=33,e.ROLANGULARVELOCITYCONST=34,e.ROLANGULARVELOCITYCONSTSEPRARATE=35,e.ROLANGULARVELOCITYGRADIENT=36,e.ROLANGULARVELOCITYGRADIENTX=37,e.ROLANGULARVELOCITYGRADIENTY=38,e.ROLANGULARVELOCITYGRADIENTZ=39,e.ROLANGULARVELOCITYGRADIENTW=40,e.ROLANGULARVELOCITYCONSTMAX=41,e.ROLANGULARVELOCITYCONSTMAXSEPRARATE=42,e.ROLANGULARVELOCITYGRADIENTMAX=43,e.ROLANGULARVELOCITYGRADIENTXMAX=44,e.ROLANGULARVELOCITYGRADIENTYMAX=45,e.ROLANGULARVELOCITYGRADIENTZMAX=46,e.ROLANGULARVELOCITYGRADIENTWMAX=47,e.TEXTURESHEETANIMATIONCYCLES=48,e.TEXTURESHEETANIMATIONSUBUVLENGTH=49,e.TEXTURESHEETANIMATIONGRADIENTUVS=50,e.TEXTURESHEETANIMATIONGRADIENTMAXUVS=51,i(e,["shaderDefines",function(){return this.shaderDefines=new Ue(_i.shaderDefines);}]),e;}(_i),vi=function(t){function e(t,n){this._subMeshOffset=null,e.__super.call(this,n),this._subMeshOffset=[],this._geometryFilter=new Cn(this),this._render=new hi(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),t&&(this._geometryFilter.sharedMesh=t);}
r(e,"laya.d3.core.SkinnedMeshSprite3D",t);var o=e.prototype;return o._changeRenderObjectByMesh=function(t){var e=this._render._renderElements,n=e[t];n||(n=e[t]=new hn()),n._render=this._render;var i=this._render.sharedMaterials[t];i||(i=Wn.defaultMaterial);var r=this._geometryFilter.sharedMesh.getRenderElement(t);return n._mainSortID=this._getSortID(r,i),n._sprite3D=this,n.renderObj=r,n._material=i,n;},o._changeRenderObjectByMaterial=function(t,e){var n=this._render._renderElements[t];e||(e=Wn.defaultMaterial);var i=this._geometryFilter.sharedMesh.getRenderElement(t);return n._mainSortID=this._getSortID(i,e),n._sprite3D=this,n.renderObj=i,n._material=e,n;},o._changeRenderObjectsByMesh=function(){var t=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=t;for(var e=0;e<t;e++){this._changeRenderObjectByMesh(e);}},o._onMeshChanged=function(t){var e=t.sharedMesh;e.loaded?this._changeRenderObjectsByMesh():e.once("loaded",this,this._changeRenderObjectsByMesh);},o._onMaterialChanged=function(t,e,n){e<this._render._renderElements.length&&this._changeRenderObjectByMaterial(e,n);},o._parseCustomProps=function(t,e,n,i){var r=this.skinnedMeshRender,a=n.lightmapIndex;null!=a&&(r.lightmapIndex=a);var o=n.lightmapScaleOffset;o&&(r.lightmapScaleOffset=new Le(o[0],o[1],o[2],o[3]));var s,l;if(i.instanceParams)(s=i.instanceParams.loadPath)&&(l=v.getRes(e[s]),this.meshFilter.sharedMesh=l,l.loaded?r.sharedMaterials=l.materials:l.once("loaded",this,this._applyMeshMaterials));else{(s=n.meshPath)&&(l=v.getRes(e[s]),this.meshFilter.sharedMesh=l);var u=n.materials;if(u){var h=r.sharedMaterials,c=u.length;h.length=c;for(var _=0;_<c;_++){h[_]=v.getRes(e[u[_].path]);}
r.sharedMaterials=h;}
var f=n.rootBone;f&&r._setRootBone(f);var d=n.boundBox;if(d){var p=d.min,m=d.max,g=new Ie(new Re(p[0],p[1],p[2]),new Re(m[0],m[1],m[2]));r.localBoundBox=g;}else r._hasIndependentBound=!1;var y=n.boundSphere;if(y){var I=y.center,x=new Te(new Re(I[0],I[1],I[2]),y.radius);r.localBoundSphere=x;}}},o._changeHierarchyAnimator=function(t){if(t){var e=this.skinnedMeshRender;e._setCacheAnimator(t);var n=t.avatar;n&&e._setCacheAvatar(n);}
laya.d3.core.Sprite3D.prototype._changeHierarchyAnimator.call(this,t);},o._clearSelfRenderObjects=function(){this._scene.removeFrustumCullingObject(this._render);},o._addSelfRenderObjects=function(){this._scene.addFrustumCullingObject(this._render);},o._applyMeshMaterials=function(t){for(var e=this._render.sharedMaterials,n=t.materials,i=0,r=n.length;i<r;i++){e[i]||(e[i]=n[i]);}
this._render.sharedMaterials=e;},o.cloneTo=function(t){var e=t;e._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var n=this._render,i=e._render;i.enable=n.enable,i.sharedMaterials=n.sharedMaterials,i.castShadow=n.castShadow;var r=n.lightmapScaleOffset;r&&(i.lightmapScaleOffset=r.clone()),i.receiveShadow=n.receiveShadow,i.sortingFudge=n.sortingFudge,i._rootBone=n._rootBone;var a=n.localBoundSphere;a&&(i.localBoundSphere=a.clone());var o=n.localBoundBox;o&&(i.localBoundBox=o.clone()),i._hasIndependentBound=n._hasIndependentBound,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,t);},o.destroy=function(e){void 0===e&&(e=!0),this.destroyed||(t.prototype.destroy.call(this,e),this._geometryFilter._destroy());},a(0,o,"meshFilter",function(){return this._geometryFilter;}),a(0,o,"skinnedMeshRender",function(){return this._render;}),e.__init__=function(){e.SHADERDEFINE_BONE=e.shaderDefines.registerDefine("BONE");},e.load=function(t){return n.loader.create(t,null,null,e);},e.SHADERDEFINE_BONE=8,e.BONES=0,i(e,["shaderDefines",function(){return this.shaderDefines=new Ue(_i.shaderDefines);}]),e;}(_i),Ii=(function(t){function e(t,n,i,r,a){void 0===t&&(t=.1),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=.3),void 0===a&&(a=1e3),this._tempMatrix=new De(),this._leftViewMatrix=new De(),this._leftProjectionMatrix=new De(),this._leftProjectionViewMatrix=new De(),this._leftViewport=new Fe(0,0,0,0),this._leftNormalizedViewport=new Fe(0,0,.5,1),this._leftAspectRatio=n,this._rightViewMatrix=new De(),this._rightProjectionMatrix=new De(),this._rightProjectionViewMatrix=new De(),this._rightViewport=new Fe(0,0,0,0),this._rightNormalizedViewport=new Fe(.5,0,.5,1),this._rightAspectRatio=i,this._pupilDistande=t,this._leftBoundFrustumUpdate=!0,this._leftBoundFrustum=new xe(De.DEFAULT),this._rightBoundFrustumUpdate=!0,this._rightBoundFrustum=new xe(De.DEFAULT),e.__super.call(this,r,a),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged);}
r(e,"laya.d3.core.VRCamera",ci);var n=e.prototype;n._onWorldMatrixChanged=function(){this._leftBoundFrustumUpdate=this._rightBoundFrustumUpdate=!0;},n._calculatePupilOffset=function(){var t=this._tempVector3;return Re.scale(this.right,this._pupilDistande/2,t),t.elements;},n._calculateLeftProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var t=this.orthographicVerticalSize*this.leftAspectRatio*.5,e=.5*this.orthographicVerticalSize;De.createOrthoOffCenterRH(-t,t,-e,e,this.nearPlane,this.farPlane,this._leftProjectionMatrix);}else De.createPerspective(3.1416*this.fieldOfView/180,this.leftAspectRatio,this.nearPlane,this.farPlane,this._rightProjectionMatrix);this._leftBoundFrustumUpdate=!0;},n._calculateRightProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var t=this.orthographicVerticalSize*this.rightAspectRatio*.5,e=.5*this.orthographicVerticalSize;De.createOrthoOffCenterRH(-t,t,e,e,this.nearPlane,this.farPlane,this._rightProjectionMatrix);}else De.createPerspective(3.1416*this.fieldOfView/180,this.rightAspectRatio,this.nearPlane,this.farPlane,this._rightProjectionMatrix);this._rightBoundFrustumUpdate=!0;},n._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var t=this.orthographicVerticalSize*this.leftAspectRatio*.5,e=.5*this.orthographicVerticalSize,n=this.orthographicVerticalSize*this.rightAspectRatio*.5,i=.5*this.orthographicVerticalSize;De.createOrthoOffCenterRH(-t,t,-e,e,this.nearPlane,this.farPlane,this._leftProjectionMatrix),De.createOrthoOffCenterRH(-n,n,i,i,this.nearPlane,this.farPlane,this._rightProjectionMatrix);}else De.createPerspective(3.1416*this.fieldOfView/180,this.leftAspectRatio,this.nearPlane,this.farPlane,this._leftProjectionMatrix),De.createPerspective(3.1416*this.fieldOfView/180,this.rightAspectRatio,this.nearPlane,this.farPlane,this._rightProjectionMatrix);this._leftBoundFrustumUpdate=this._rightBoundFrustumUpdate=!0;},n._renderCamera=function(t,e,n){e.camera=this,this._prepareCameraToRender(),n._preRenderUpdateComponents(e);var i,r;i=e._viewMatrix=this.leftViewMatrix;var a=this._renderTarget;a?(a.start(),De.multiply(ci._invertYScaleMatrix,this._leftProjectionMatrix,ci._invertYProjectionMatrix),De.multiply(ci._invertYScaleMatrix,this.leftProjectionViewMatrix,ci._invertYProjectionViewMatrix),r=e._projectionMatrix=ci._invertYProjectionMatrix,e._projectionViewMatrix=ci._invertYProjectionViewMatrix):(r=e._projectionMatrix=this._leftProjectionMatrix,e._projectionViewMatrix=this.leftProjectionViewMatrix),this._prepareCameraViewProject(i,r),e._viewport=this.leftViewport,n._preRenderScene(t,e,this.leftBoundFrustum),n._clear(t,e),n._renderScene(t,e);var o,s;o=e._viewMatrix=this.rightViewMatrix,a?(a.start(),De.multiply(ci._invertYScaleMatrix,this._rightProjectionMatrix,ci._invertYProjectionMatrix),De.multiply(ci._invertYScaleMatrix,this.rightProjectionViewMatrix,ci._invertYProjectionViewMatrix),e._projectionMatrix=ci._invertYProjectionMatrix,s=e._projectionViewMatrix=ci._invertYProjectionViewMatrix):(s=e._projectionMatrix=this._rightProjectionMatrix,e._projectionViewMatrix=this.rightProjectionViewMatrix),this._prepareCameraViewProject(o,s),e._viewport=this.rightViewport,n._preRenderScene(t,e,this.rightBoundFrustum),n._clear(t,e),n._renderScene(t,e),n._postRenderUpdateComponents(e),a&&a.end();},a(0,n,"rightBoundFrustum",function(){return this._rightBoundFrustumUpdate&&(this._rightBoundFrustum.matrix=this.rightProjectionViewMatrix),this._rightBoundFrustum;}),a(0,n,"leftNormalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var t=this._leftViewport,e=this.renderTargetSize,n=e.width,i=e.height;this._leftNormalizedViewport.x=t.x/n,this._leftNormalizedViewport.y=t.y/i,this._leftNormalizedViewport.width=t.width/n,this._leftNormalizedViewport.height=t.height/i;}
return this._leftNormalizedViewport;}),a(0,n,"rightViewport",function(){if(this._viewportExpressedInClipSpace){var t=this._rightNormalizedViewport,e=this.renderTargetSize,n=e.width,i=e.height;this._rightViewport.x=t.x*n,this._rightViewport.y=t.y*i,this._rightViewport.width=t.width*n,this._rightViewport.height=t.height*i;}
return this._rightViewport;}),a(0,n,"viewport",null,function(t){if(null!=this.renderTarget&&(t.x<0||t.y<0||0==t.width||0==t.height))throw new Error("VRCamera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._leftViewport=new Fe(0,0,t.width/2,t.height),this._rightViewport=new Fe(t.width/2,0,t.width/2,t.height),this._calculateProjectionMatrix();}),a(0,n,"leftAspectRatio",function(){if(0===this._leftAspectRatio){var t=this.leftViewport;return t.width/t.height;}
return this._leftAspectRatio;}),a(0,n,"rightAspectRatio",function(){if(0===this._rightAspectRatio){var t=this.rightViewport;return t.width/t.height;}
return this._rightAspectRatio;}),a(0,n,"aspectRatio",null,function(t){if(t<0)throw new Error("VRCamera: the aspect ratio has to be a positive real number.");this._leftAspectRatio=t,this._rightAspectRatio=t,this._calculateRightProjectionMatrix();}),a(0,n,"rightNormalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var t=this._rightViewport,e=this.renderTargetSize,n=e.width,i=e.height;this._rightNormalizedViewport.x=t.x/n,this._rightNormalizedViewport.y=t.y/i,this._rightNormalizedViewport.width=t.width/n,this._rightNormalizedViewport.height=t.height/i;}
return this._rightNormalizedViewport;}),a(0,n,"normalizedViewport",null,function(t){if(t.x<0||t.y<0||t.x+t.width>1||t.x+t.height>1)throw new Error("VRCamera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!0,this._leftNormalizedViewport=new Fe(0,0,t.width/2,t.height),this._rightNormalizedViewport=new Fe(t.width/2,0,t.width/2,t.height),this._calculateProjectionMatrix();}),a(0,n,"leftViewport",function(){if(this._viewportExpressedInClipSpace){var t=this._leftNormalizedViewport,e=this.renderTargetSize,n=e.width,i=e.height;this._leftViewport.x=t.x*n,this._leftViewport.y=t.y*i,this._leftViewport.width=t.width*n,this._leftViewport.height=t.height*i;}
return this._leftViewport;}),a(0,n,"needLeftViewport",function(){var t=this.leftNormalizedViewport;return 0===t.x&&0===t.y&&1===t.width&&1===t.height;}),a(0,n,"needRightViewport",function(){var t=this.rightNormalizedViewport;return 0===t.x&&0===t.y&&1===t.width&&1===t.height;}),a(0,n,"leftViewMatrix",function(){var t=this._calculatePupilOffset(),e=this._tempMatrix;this.transform.worldMatrix.cloneTo(e);var n=e.elements;return n[12]-=t[0],n[13]-=t[1],n[14]-=t[2],e.invert(this._leftViewMatrix),this._leftViewMatrix;}),a(0,n,"rightViewMatrix",function(){var t=this._calculatePupilOffset(),e=this._tempMatrix;this.transform.worldMatrix.cloneTo(e);var n=e.elements;return n[12]+=t[0],n[13]+=t[1],n[14]+=t[2],e.invert(this._rightViewMatrix),this._rightViewMatrix;}),a(0,n,"leftProjectionMatrix",function(){return this._leftProjectionMatrix;}),a(0,n,"leftProjectionViewMatrix",function(){return De.multiply(this.leftProjectionMatrix,this.leftViewMatrix,this._leftProjectionViewMatrix),this._leftProjectionViewMatrix;}),a(0,n,"rightProjectionMatrix",function(){return this._rightProjectionMatrix;}),a(0,n,"rightProjectionViewMatrix",function(){return De.multiply(this.rightProjectionMatrix,this.rightViewMatrix,this._rightProjectionViewMatrix),this._rightProjectionViewMatrix;}),a(0,n,"leftBoundFrustum",function(){return this._leftBoundFrustumUpdate&&(this._leftBoundFrustum.matrix=this.leftProjectionViewMatrix),this._leftBoundFrustum;});}(),function(t){function e(){e.__super.call(this),this._geometryFilter=new An(this),this._render=new On(this),this._changeRenderObjectsByMaterial(this._render,0,Jn.defaultMaterial),this._render.on("materialchanged",this,this._changeRenderObjectsByMaterial),this._geometryFilter.on("trailfilterchange",this,this._changeRenderObjectsByRenderElement);}
r(e,"laya.d3.core.trail.TrailSprite3D",t);var n=e.prototype;return n._changeRenderObjectsByMaterial=function(t,e,n){var i=this._geometryFilter.getRenderElementsCount();this._render._renderElements.length=i;for(var r=0;r<i;r++){this._changeRenderObjectByMaterial(r,n);}},n._changeRenderObjectByMaterial=function(t,e){var n=this._render._renderElements;e||(e=Jn.defaultMaterial);var i=n[t];i||(i=n[t]=new ht()),i._sprite3D=this,i.renderObj=this._geometryFilter.getRenderElement(t),i._render=this._render,i._material=e;},n._changeRenderObjectsByRenderElement=function(t,e){var n=this._render._renderElements,i=n[t];i||(i=n[t]=new ht()),i._sprite3D=this,i.renderObj=e,i._render=this._render,i._material=this._render.sharedMaterial;},n._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render);},n._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render);},n._update=function(e){t.prototype._update.call(this,e),this._geometryFilter._update(e);},n._parseCustomProps=function(t,e,n,i){var r=this._render,a=this._geometryFilter,o=0,s=0,l=n.materials;if(l){var u=r.sharedMaterials,h=l.length;for(u.length=h,o=0;o<h;o++){u[o]=v.getRes(e[l[o].path]);}
r.sharedMaterials=u;}
var c=i.props;a.time=c.time,a.minVertexDistance=c.minVertexDistance,a.widthMultiplier=c.widthMultiplier,a.textureMode=c.textureMode;var _=[],f=n.widthCurve;for(o=0,s=f.length;o<s;o++){var d=new yt();d.time=f[o].time,d.inTangent=f[o].inTangent,d.outTangent=f[o].outTangent,d.value=f[o].value,_.push(d);}
a.widthCurve=_;var p=n.colorGradient,m=new pt();m.mode=p.mode;var g,y,I=[],x=p.colorKeys;for(o=0,s=x.length;o<s;o++){y=x[o],g=new gt(new dt(y.value[0],y.value[1],y.value[2],1),y.time),I.push(g);}
var T,S,b=[],w=p.alphaKeys;for(o=0,s=w.length;o<s;o++){S=w[o],T=new mt(S.value,S.time),b.push(T);}
m.setKeys(I,b),a.colorGradient=m;},n.reset=function(){this.trailFilter.reset();},n.cloneTo=function(t){laya.d3.core.Sprite3D.prototype.cloneTo.call(this,t);var e=0,n=0,i=t,r=i.trailFilter;r.time=this.trailFilter.time,r.minVertexDistance=this.trailFilter.minVertexDistance,r.widthMultiplier=this.trailFilter.widthMultiplier;var a=this.trailFilter.widthCurve,o=[];for(e=0,n=a.length;e<n;e++){var s=new yt();a[e].cloneTo(s),o.push(s);}
r.widthCurve=o;var l=new pt();this.trailFilter.colorGradient.cloneTo(l),r.colorGradient=l,r.textureMode=this.trailFilter.textureMode;i.trailRender.sharedMaterial=this.trailRender.sharedMaterial;},n.destroy=function(e){void 0===e&&(e=!0),this.destroyed||(t.prototype.destroy.call(this,e),this._geometryFilter._destroy(),this._geometryFilter=null);},a(0,n,"trailFilter",function(){return this._geometryFilter;}),a(0,n,"trailRender",function(){return this._render;}),e.__init__=function(){e.SHADERDEFINE_GRADIENTMODE_BLEND=e.shaderDefines.registerDefine("GRADIENTMODE_BLEND");},e.CURTIME=3,e.LIFETIME=4,e.WIDTHCURVE=5,e.WIDTHCURVEKEYLENGTH=6,e.GRADIENTCOLORKEY=7,e.GRADIENTALPHAKEY=8,e.SHADERDEFINE_GRADIENTMODE_BLEND=0,i(e,["shaderDefines",function(){return this.shaderDefines=new Ue(_i.shaderDefines);}]),e;}(_i)),xi=function(t){function e(t,n,i,r,a,o,s,l){e.__super.call(this,l),this._geometryFilter=new Ln(this,t,n,i,r,a,o,s),this._render=new Fn(this);}
r(e,"laya.d3.terrain.TerrainChunk",t);var i=e.prototype;return i.buildRenderElementAndMaterial=function(t,e,n,i,r,a,o,s,l,u,h,c,_,f,d,p,m,g){void 0===h&&(h=1),void 0===c&&(c=1),void 0===_&&(_=1),void 0===f&&(f=1),void 0===d&&(d=1),void 0===p&&(p=1),void 0===m&&(m=1),void 0===g&&(g=1);var y=new Kn();l&&(y.diffuseColor=l),s&&(y.ambientColor=s),u&&(y.specularColor=u),y.splatAlphaTexture=v.getRes(n),y.normalTexture=e?v.getRes(e):null,y.diffuseTexture1=i?v.getRes(i):null,y.diffuseTexture2=r?v.getRes(r):null,y.diffuseTexture3=a?v.getRes(a):null,y.diffuseTexture4=o?v.getRes(o):null,y.setDiffuseScale1(h,c),y.setDiffuseScale2(_,f),y.setDiffuseScale3(d,p),y.setDiffuseScale4(m,g),y.setDetailNum(t),0!=this._render._renderElements.length&&(y.renderMode=2);var I=new ht();I._mainSortID=0,I._sprite3D=this,I.renderObj=this._geometryFilter,I._material=y,this._render._materials.push(y),this._render._renderElements.push(I);},i._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render);},i._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render);},i._applyMeshMaterials=function(t){for(var e=this._render.sharedMaterials,n=t.materials,i=0,r=n.length;i<r;i++){e[i]||(e[i]=n[i]);}
this._render.sharedMaterials=e;},i.cloneTo=function(t){console.log("Terrain Chunk can't clone");},i.destroy=function(e){void 0===e&&(e=!0),this.destroyed||(t.prototype.destroy.call(this,e),this._geometryFilter._destroy());},a(0,i,"terrainFilter",function(){return this._geometryFilter;}),a(0,i,"terrainRender",function(){return this._render;}),e.load=function(t){return n.loader.create(t,null,null,e,null,1,!1);},e;}(_i);!function(t){function e(t,n,i){this._minX=NaN,this._minZ=NaN,this._cellSize=null,this._heightMap=null,e.__super.call(this,t,i),this._heightMap=n,this._cellSize=new Oe();}
r(e,"laya.d3.core.MeshTerrainSprite3D",gi);var n=e.prototype;n._disableRotation=function(){var t=this.transform.rotation;t.elements[0]=0,t.elements[1]=0,t.elements[2]=0,t.elements[3]=1,this.transform.rotation=t;},n._getScaleX=function(){var t=this.transform.worldMatrix.elements,e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i);},n._getScaleZ=function(){var t=this.transform.worldMatrix.elements,e=t[8],n=t[9],i=t[10];return Math.sqrt(e*e+n*n+i*i);},n._initCreateFromMesh=function(t,e){this._heightMap=H.creatFromMesh(this.meshFilter.sharedMesh,t,e,this._cellSize);var n=this.meshFilter.sharedMesh.boundingBox,i=n.min;n.max;this._minX=i.x,this._minZ=i.z;},n._initCreateFromMeshHeightMap=function(t,e,n){var i=this,r=this.meshFilter.sharedMesh.boundingBox;t.loaded?(this._heightMap=H.createFromImage(t,e,n),this._computeCellSize(r)):t.once("loaded",null,function(){i._heightMap=H.createFromImage(t,e,n),i._computeCellSize(r);});var a=r.min;r.max;this._minX=a.x,this._minZ=a.z;},n._computeCellSize=function(t){var e=t.min,n=t.max,i=e.x,r=e.z,a=n.x-i,o=n.z-r;this._cellSize.elements[0]=a/(this._heightMap.width-1),this._cellSize.elements[1]=o/(this._heightMap.height-1);},n._update=function(t){this._disableRotation(),laya.d3.core.RenderableSprite3D.prototype._update.call(this,t);},n.getHeight=function(t,n){e._tempVector3.elements[0]=t,e._tempVector3.elements[1]=0,e._tempVector3.elements[2]=n,this._disableRotation();var i=this.transform.worldMatrix;i.invert(e._tempMatrix4x4),Re.transformCoordinate(e._tempVector3,e._tempMatrix4x4,e._tempVector3),t=e._tempVector3.elements[0],n=e._tempVector3.elements[2];var r=(t-this._minX)/this._cellSize.x,a=(n-this._minZ)/this._cellSize.y,o=Math.floor(a),s=Math.floor(r),l=r-s,u=a-o,h=NaN,c=NaN,_=i.elements,f=_[4],d=_[5],p=_[6],m=Math.sqrt(f*f+d*d+p*p),g=_[13],y=this._heightMap.getHeight(o,s+1),v=this._heightMap.getHeight(o+1,s);if(isNaN(y)||isNaN(v))return NaN;if(l+u<=1){var I=this._heightMap.getHeight(o,s);return isNaN(I)?NaN:(h=y-I,c=v-I,(I+l*h+u*c)*m+g);}
var x=this._heightMap.getHeight(o+1,s+1);return isNaN(x)?NaN:(h=v-x,c=y-x,(x+(1-l)*h+(1-u)*c)*m+g);},a(0,n,"minX",function(){var t=this.transform.worldMatrix.elements;return this._minX*this._getScaleX()+t[12];}),a(0,n,"width",function(){return(this._heightMap.width-1)*this._cellSize.x*this._getScaleX();}),a(0,n,"minZ",function(){var t=this.transform.worldMatrix.elements;return this._minZ*this._getScaleZ()+t[14];}),a(0,n,"depth",function(){return(this._heightMap.height-1)*this._cellSize.y*this._getScaleZ();}),e.createFromMesh=function(t,n,i,r){var a=new e(t,null,r);return t.loaded?a._initCreateFromMesh(n,i):t.once("loaded",a,a._initCreateFromMesh,[n,i]),a;},e.createFromMeshAndHeightMap=function(t,n,i,r,a){var o=new e(t,null,a);return t.loaded?o._initCreateFromMeshHeightMap(n,i,r):t.once("loaded",o,o._initCreateFromMeshHeightMap,[n,i,r]),o;},i(e,["_tempVector3",function(){return this._tempVector3=new Re();},"_tempMatrix4x4",function(){return this._tempMatrix4x4=new De();}]);}();}(window,document,Laya),"function"==typeof window.define&&window.define.amd&&window.define("laya.core",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var n in Laya){var i=Laya[n];i&&i.__isclass&&(e[n]=i);}}),function(global,undefined){"use strict";!function(t,e,n){function i(n){var r=e[n];return r||t[n][0].call(r=e[n]={exports:{}},i,r,r.exports),r.exports;}
var r=global.protobuf=i(n[0]);"function"==typeof window.define&&window.define.amd&&window.define(["long"],function(t){return t&&t.isLong&&(r.util.Long=t,r.configure()),r;}),"object"==(false?undefined:(0,_typeof2.default)(module))&&module&&module.exports&&(module.exports=r);}({1:[function(t,e,n){e.exports=function(t,e){for(var n=new Array(arguments.length-1),i=0,r=2,a=!0;r<arguments.length;){n[i++]=arguments[r++];}
return new Promise(function(r,o){n[i]=function(t){if(a)if(a=!1,t)o(t);else{for(var e=new Array(arguments.length-1),n=0;n<e.length;){e[n++]=arguments[n];}
r.apply(null,e);}};try{t.apply(e||null,n);}catch(t){a&&(a=!1,o(t));}});};},{}],2:[function(t,e,n){var i=n;i.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&"="===t.charAt(e);){++n;}
return Math.ceil(3*t.length)/4-n;};for(var r=new Array(64),a=new Array(123),o=0;o<64;){a[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;}
i.encode=function(t,e,n){for(var i,a=null,o=[],s=0,l=0;e<n;){var u=t[e++];switch(l){case 0:o[s++]=r[u>>2],i=(3&u)<<4,l=1;break;case 1:o[s++]=r[i|u>>4],i=(15&u)<<2,l=2;break;case 2:o[s++]=r[i|u>>6],o[s++]=r[63&u],l=0;}
s>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,o)),s=0);}
return l&&(o[s++]=r[i],o[s++]=61,1===l&&(o[s++]=61)),a?(s&&a.push(String.fromCharCode.apply(String,o.slice(0,s))),a.join("")):String.fromCharCode.apply(String,o.slice(0,s));};i.decode=function(t,e,n){for(var i,r=n,o=0,s=0;s<t.length;){var l=t.charCodeAt(s++);if(61===l&&o>1)break;if((l=a[l])===undefined)throw Error("invalid encoding");switch(o){case 0:i=l,o=1;break;case 1:e[n++]=i<<2|(48&l)>>4,i=l,o=2;break;case 2:e[n++]=(15&i)<<4|(60&l)>>2,i=l,o=3;break;case 3:e[n++]=(3&i)<<6|l,o=0;}}
if(1===o)throw Error("invalid encoding");return n-r;},i.test=function(t){return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t);};},{}],3:[function(t,e,n){function i(t,e){function n(t){if("string"!=typeof t){var e=r();if(i.verbose&&console.log("codegen: "+e),e="return "+e,t){for(var o=Object.keys(t),s=new Array(o.length+1),l=new Array(o.length),u=0;u<o.length;){s[u]=o[u],l[u]=t[o[u++]];}
return s[u]=e,Function.apply(null,s).apply(null,l);}
return Function(e)();}
for(var h=new Array(arguments.length-1),c=0;c<h.length;){h[c]=arguments[++c];}
if(c=0,t=t.replace(/%([%dfijs])/g,function(t,e){var n=h[c++];switch(e){case "d":case "f":return String(Number(n));case "i":return String(Math.floor(n));case "j":return JSON.stringify(n);case "s":return String(n);}
return "%";}),c!==h.length)throw Error("parameter count mismatch");return a.push(t),n;}
function r(n){return "function "+(n||e||"")+"("+(t&&t.join(",")||"")+"){\n  "+a.join("\n  ")+"\n}";}
"string"==typeof t&&(e=t,t=undefined);var a=[];return n.toString=r,n;}
e.exports=i,i.verbose=!1;},{}],4:[function(t,e,n){function i(){this._listeners={};}
e.exports=i,i.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this;},i.prototype.off=function(t,e){if(t===undefined)this._listeners={};else if(e===undefined)this._listeners[t]=[];else for(var n=this._listeners[t],i=0;i<n.length;){n[i].fn===e?n.splice(i,1):++i;}
return this;},i.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],i=1;i<arguments.length;){n.push(arguments[i++]);}
for(i=0;i<e.length;){e[i].fn.apply(e[i++].ctx,n);}}
return this;};},{}],5:[function(t,e,n){function i(t,e,n){return "function"==typeof e?(n=e,e={}):e||(e={}),n?!e.xhr&&a&&a.readFile?a.readFile(t,function(r,a){return r&&"undefined"!=typeof XMLHttpRequest?i.xhr(t,e,n):r?n(r):n(null,e.binary?a:a.toString("utf8"));}):i.xhr(t,e,n):r(i,this,t,e);}
e.exports=i;var r=t(1),a=t(7)("fs");i.xhr=function(t,e,n){var i=new XMLHttpRequest();i.onreadystatechange=function(){if(4!==i.readyState)return undefined;if(0!==i.status&&200!==i.status)return n(Error("status "+i.status));if(e.binary){var t=i.response;if(!t){t=[];for(var r=0;r<i.responseText.length;++r){t.push(255&i.responseText.charCodeAt(r));}}
return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t);}
return n(null,i.responseText);},e.binary&&("overrideMimeType"in i&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.responseType="arraybuffer"),i.open("GET",t),i.send();};},{1:1,7:7}],6:[function(t,e,n){function i(t){return "undefined"!=typeof Float32Array?function(){function e(t,e,n){a[0]=t,e[n]=o[0],e[n+1]=o[1],e[n+2]=o[2],e[n+3]=o[3];}
function n(t,e,n){a[0]=t,e[n]=o[3],e[n+1]=o[2],e[n+2]=o[1],e[n+3]=o[0];}
function i(t,e){return o[0]=t[e],o[1]=t[e+1],o[2]=t[e+2],o[3]=t[e+3],a[0];}
function r(t,e){return o[3]=t[e],o[2]=t[e+1],o[1]=t[e+2],o[0]=t[e+3],a[0];}
var a=new Float32Array([-0]),o=new Uint8Array(a.buffer),s=128===o[3];t.writeFloatLE=s?e:n,t.writeFloatBE=s?n:e,t.readFloatLE=s?i:r,t.readFloatBE=s?r:i;}():function(){function e(t,e,n,i){var r=e<0?1:0;if(r&&(e=-e),0===e)t(1/e>0?0:2147483648,n,i);else if(isNaN(e))t(2143289344,n,i);else if(e>3.4028234663852886e38)t((r<<31|2139095040)>>>0,n,i);else if(e<1.1754943508222875e-38)t((r<<31|Math.round(e/1.401298464324817e-45))>>>0,n,i);else{var a=Math.floor(Math.log(e)/Math.LN2);t((r<<31|a+127<<23|8388607&Math.round(e*Math.pow(2,-a)*8388608))>>>0,n,i);}}
function n(t,e,n){var i=t(e,n),r=2*(i>>31)+1,a=i>>>23&255,o=8388607&i;return 255===a?o?NaN:r*(1/0):0===a?1.401298464324817e-45*r*o:r*Math.pow(2,a-150)*(o+8388608);}
t.writeFloatLE=e.bind(null,r),t.writeFloatBE=e.bind(null,a),t.readFloatLE=n.bind(null,o),t.readFloatBE=n.bind(null,s);}(),"undefined"!=typeof Float64Array?function(){function e(t,e,n){a[0]=t,e[n]=o[0],e[n+1]=o[1],e[n+2]=o[2],e[n+3]=o[3],e[n+4]=o[4],e[n+5]=o[5],e[n+6]=o[6],e[n+7]=o[7];}
function n(t,e,n){a[0]=t,e[n]=o[7],e[n+1]=o[6],e[n+2]=o[5],e[n+3]=o[4],e[n+4]=o[3],e[n+5]=o[2],e[n+6]=o[1],e[n+7]=o[0];}
function i(t,e){return o[0]=t[e],o[1]=t[e+1],o[2]=t[e+2],o[3]=t[e+3],o[4]=t[e+4],o[5]=t[e+5],o[6]=t[e+6],o[7]=t[e+7],a[0];}
function r(t,e){return o[7]=t[e],o[6]=t[e+1],o[5]=t[e+2],o[4]=t[e+3],o[3]=t[e+4],o[2]=t[e+5],o[1]=t[e+6],o[0]=t[e+7],a[0];}
var a=new Float64Array([-0]),o=new Uint8Array(a.buffer),s=128===o[7];t.writeDoubleLE=s?e:n,t.writeDoubleBE=s?n:e,t.readDoubleLE=s?i:r,t.readDoubleBE=s?r:i;}():function(){function e(t,e,n,i,r,a){var o=i<0?1:0;if(o&&(i=-i),0===i)t(0,r,a+e),t(1/i>0?0:2147483648,r,a+n);else if(isNaN(i))t(0,r,a+e),t(2146959360,r,a+n);else if(i>1.7976931348623157e308)t(0,r,a+e),t((o<<31|2146435072)>>>0,r,a+n);else{var s;if(i<2.2250738585072014e-308)t((s=i/5e-324)>>>0,r,a+e),t((o<<31|s/4294967296)>>>0,r,a+n);else{var l=Math.floor(Math.log(i)/Math.LN2);1024===l&&(l=1023),t(4503599627370496*(s=i*Math.pow(2,-l))>>>0,r,a+e),t((o<<31|l+1023<<20|1048576*s&1048575)>>>0,r,a+n);}}}
function n(t,e,n,i,r){var a=t(i,r+e),o=t(i,r+n),s=2*(o>>31)+1,l=o>>>20&2047,u=4294967296*(1048575&o)+a;return 2047===l?u?NaN:s*(1/0):0===l?5e-324*s*u:s*Math.pow(2,l-1075)*(u+4503599627370496);}
t.writeDoubleLE=e.bind(null,r,0,4),t.writeDoubleBE=e.bind(null,a,4,0),t.readDoubleLE=n.bind(null,o,0,4),t.readDoubleBE=n.bind(null,s,4,0);}(),t;}
function r(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24;}
function a(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t;}
function o(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0;}
function s(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0;}
e.exports=i(i);},{}],7:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod;}catch(t){}
return null;}
module.exports=inquire;},{}],8:[function(t,e,n){var i=n,r=i.isAbsolute=function(t){return /^(?:\/|\w+:)/.test(t);},a=i.normalize=function(t){var e=(t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=r(t),i="";n&&(i=e.shift()+"/");for(var a=0;a<e.length;){".."===e[a]?a>0&&".."!==e[a-1]?e.splice(--a,2):n?e.splice(a,1):++a:"."===e[a]?e.splice(a,1):++a;}
return i+e.join("/");};i.resolve=function(t,e,n){return n||(e=a(e)),r(e)?e:(n||(t=a(t)),(t=t.replace(/(?:\/|^)[^/]+$/,"")).length?a(t+"/"+e):e);};},{}],9:[function(t,e,n){e.exports=function(t,e,n){var i=n||8192,r=i>>>1,a=null,o=i;return function(n){if(n<1||n>r)return t(n);o+n>i&&(a=t(i),o=0);var s=e.call(a,o,o+=n);return 7&o&&(o=1+(7|o)),s;};};},{}],10:[function(t,e,n){var i=n;i.length=function(t){for(var e=0,n=0,i=0;i<t.length;++i){(n=t.charCodeAt(i))<128?e+=1:n<2048?e+=2:55296==(64512&n)&&56320==(64512&t.charCodeAt(i+1))?(++i,e+=4):e+=3;}
return e;},i.read=function(t,e,n){if(n-e<1)return "";for(var i,r=null,a=[],o=0;e<n;){(i=t[e++])<128?a[o++]=i:i>191&&i<224?a[o++]=(31&i)<<6|63&t[e++]:i>239&&i<365?(i=((7&i)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,a[o++]=55296+(i>>10),a[o++]=56320+(1023&i)):a[o++]=(15&i)<<12|(63&t[e++])<<6|63&t[e++],o>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,a)),o=0);}
return r?(o&&r.push(String.fromCharCode.apply(String,a.slice(0,o))),r.join("")):String.fromCharCode.apply(String,a.slice(0,o));},i.write=function(t,e,n){for(var i,r,a=n,o=0;o<t.length;++o){(i=t.charCodeAt(o))<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&56320==(64512&(r=t.charCodeAt(o+1)))?(i=65536+((1023&i)<<10)+(1023&r),++o,e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128);}
return n-a;};},{}],11:[function(t,e,n){function i(t,e){r.test(t)||(t="google/protobuf/"+t+".proto",e={nested:{google:{nested:{protobuf:{nested:e}}}}}),i[t]=e;}
e.exports=i;var r=/\/|\./;i("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var a;i("duration",{Duration:a={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),i("timestamp",{Timestamp:a}),i("empty",{Empty:{fields:{}}}),i("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),i("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),i.get=function(t){return i[t]||null;};},{}],12:[function(t,e,n){function i(t,e,n,i){if(e.resolvedType){if(e.resolvedType instanceof o){t("switch(d%s){",i);for(var r=e.resolvedType.values,a=Object.keys(r),s=0;s<a.length;++s){e.repeated&&r[a[s]]===e.typeDefault&&t("default:"),t("case%j:",a[s])("case %i:",r[a[s]])("m%s=%j",i,r[a[s]])("break");}
t("}");}else t('if(typeof d%s!=="object")',i)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",i,n,i);}else{var l=!1;switch(e.type){case "double":case "float":t("m%s=Number(d%s)",i,i);break;case "uint32":case "fixed32":t("m%s=d%s>>>0",i,i);break;case "int32":case "sint32":case "sfixed32":t("m%s=d%s|0",i,i);break;case "uint64":l=!0;case "int64":case "sint64":case "fixed64":case "sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",i,i,l)('else if(typeof d%s==="string")',i)("m%s=parseInt(d%s,10)",i,i)('else if(typeof d%s==="number")',i)("m%s=d%s",i,i)('else if(typeof d%s==="object")',i)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",i,i,i,l?"true":"");break;case "bytes":t('if(typeof d%s==="string")',i)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",i,i,i)("else if(d%s.length)",i)("m%s=d%s",i,i);break;case "string":t("m%s=String(d%s)",i,i);break;case "bool":t("m%s=Boolean(d%s)",i,i);}}
return t;}
function r(t,e,n,i){if(e.resolvedType)e.resolvedType instanceof o?t("d%s=o.enums===String?types[%i].values[m%s]:m%s",i,n,i,i):t("d%s=types[%i].toObject(m%s,o)",i,n,i);else{var r=!1;switch(e.type){case "double":case "float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",i,i,i,i);break;case "uint64":r=!0;case "int64":case "sint64":case "fixed64":case "sfixed64":t('if(typeof m%s==="number")',i)("d%s=o.longs===String?String(m%s):m%s",i,i,i)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",i,i,i,i,r?"true":"",i);break;case "bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",i,i,i,i,i);break;default:t("d%s=m%s",i,i);}}
return t;}
var a=n,o=t(15),s=t(37);a.fromObject=function(t){var e=t.fieldsArray,n=s.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!e.length)return n("return new this.ctor");n("var m=new this.ctor");for(var r=0;r<e.length;++r){var a=e[r].resolve(),l=s.safeProp(a.name);a.map?(n("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),i(n,a,r,l+"[ks[i]]")("}")("}")):a.repeated?(n("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),i(n,a,r,l+"[i]")("}")("}")):(a.resolvedType instanceof o||n("if(d%s!=null){",l),i(n,a,r,l),a.resolvedType instanceof o||n("}"));}
return n("return m");},a.toObject=function(t){var e=t.fieldsArray.slice().sort(s.compareFieldsById);if(!e.length)return s.codegen()("return {}");for(var n=s.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),i=[],a=[],l=[],u=0;u<e.length;++u){e[u].partOf||(e[u].resolve().repeated?i:e[u].map?a:l).push(e[u]);}
if(i.length){for(n("if(o.arrays||o.defaults){"),u=0;u<i.length;++u){n("d%s=[]",s.safeProp(i[u].name));}
n("}");}
if(a.length){for(n("if(o.objects||o.defaults){"),u=0;u<a.length;++u){n("d%s={}",s.safeProp(a[u].name));}
n("}");}
if(l.length){for(n("if(o.defaults){"),u=0;u<l.length;++u){var h=l[u],c=s.safeProp(h.name);h.resolvedType instanceof o?n("d%s=o.enums===String?%j:%j",c,h.resolvedType.valuesById[h.typeDefault],h.typeDefault):h.long?n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",h.typeDefault.low,h.typeDefault.high,h.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",c)("}else")("d%s=o.longs===String?%j:%i",c,h.typeDefault.toString(),h.typeDefault.toNumber()):h.bytes?n("d%s=o.bytes===String?%j:%s",c,String.fromCharCode.apply(String,h.typeDefault),"["+Array.prototype.slice.call(h.typeDefault).join(",")+"]"):n("d%s=%j",c,h.typeDefault);}
n("}");}
var _=!1;for(u=0;u<e.length;++u){var h=e[u],f=t._fieldsArray.indexOf(h),c=s.safeProp(h.name);h.map?(_||(_=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",c,c)("d%s={}",c)("for(var j=0;j<ks2.length;++j){"),r(n,h,f,c+"[ks2[j]]")("}")):h.repeated?(n("if(m%s&&m%s.length){",c,c)("d%s=[]",c)("for(var j=0;j<m%s.length;++j){",c),r(n,h,f,c+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",c,h.name),r(n,h,f,c),h.partOf&&n("if(o.oneofs)")("d%s=%j",s.safeProp(h.partOf.name),h.name)),n("}");}
return n("return d");};},{15:15,37:37}],13:[function(t,e,n){function i(t){return "missing required '"+t.name+"'";}
e.exports=function(t){var e=o.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(t){return t.map;}).length?",k":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&e("if((t&7)===4)")("break"),e("switch(t>>>3){");for(var n=0;n<t.fieldsArray.length;++n){var s=t._fieldsArray[n].resolve(),l=s.resolvedType instanceof r?"int32":s.type,u="m"+o.safeProp(s.name);e("case %i:",s.id),s.map?(e("r.skip().pos++")("if(%s===util.emptyObject)",u)("%s={}",u)("k=r.%s()",s.keyType)("r.pos++"),a.long[s.keyType]!==undefined?a.basic[l]===undefined?e('%s[typeof k==="object"?util.longToHash(k):k]=types[%i].decode(r,r.uint32())',u,n):e('%s[typeof k==="object"?util.longToHash(k):k]=r.%s()',u,l):a.basic[l]===undefined?e("%s[k]=types[%i].decode(r,r.uint32())",u,n):e("%s[k]=r.%s()",u,l)):s.repeated?(e("if(!(%s&&%s.length))",u,u)("%s=[]",u),a.packed[l]!==undefined&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,l)("}else"),a.basic[l]===undefined?e(s.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,n):e("%s.push(r.%s())",u,l)):a.basic[l]===undefined?e(s.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,n):e("%s=r.%s()",u,l),e("break");}
for(e("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<t._fieldsArray.length;++n){var h=t._fieldsArray[n];h.required&&e("if(!m.hasOwnProperty(%j))",h.name)("throw util.ProtocolError(%j,{instance:m})",i(h));}
return e("return m");};var r=t(15),a=t(36),o=t(37);},{15:15,36:36,37:37}],14:[function(t,e,n){function i(t,e,n,i){return e.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,i,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,i,(e.id<<3|2)>>>0);}
e.exports=function(t){for(var e,n=o.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),s=t.fieldsArray.slice().sort(o.compareFieldsById),l=0;l<s.length;++l){var u=s[l].resolve(),h=t._fieldsArray.indexOf(u),c=u.resolvedType instanceof r?"int32":u.type,_=a.basic[c];e="m"+o.safeProp(u.name),u.map?(n("if(%s!=null&&m.hasOwnProperty(%j)){",e,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",e)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|a.mapKey[u.keyType],u.keyType),_===undefined?n("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",h,e):n(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|_,c,e),n("}")("}")):u.repeated?(n("if(%s!=null&&%s.length){",e,e),u.packed&&a.packed[c]!==undefined?n("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",e)("w.%s(%s[i])",c,e)("w.ldelim()"):(n("for(var i=0;i<%s.length;++i)",e),_===undefined?i(n,u,h,e+"[i]"):n("w.uint32(%i).%s(%s[i])",(u.id<<3|_)>>>0,c,e)),n("}")):(u.optional&&n("if(%s!=null&&m.hasOwnProperty(%j))",e,u.name),_===undefined?i(n,u,h,e):n("w.uint32(%i).%s(%s)",(u.id<<3|_)>>>0,c,e));}
return n("return w");};var r=t(15),a=t(36),o=t(37);},{15:15,36:36,37:37}],15:[function(t,e,n){function i(t,e,n){if(r.call(this,t,n),e&&"object"!=(0,_typeof2.default)(e))throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comments={},this.reserved=undefined,e)for(var i=Object.keys(e),a=0;a<i.length;++a){"number"==typeof e[i[a]]&&(this.valuesById[this.values[i[a]]=e[i[a]]]=i[a]);}}
e.exports=i;var r=t(24);((i.prototype=Object.create(r.prototype)).constructor=i).className="Enum";var a=t(23),o=t(37);i.fromJSON=function(t,e){var n=new i(t,e.values,e.options);return n.reserved=e.reserved,n;},i.prototype.toJSON=function(){return o.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined]);},i.prototype.add=function(t,e,n){if(!o.isString(t))throw TypeError("name must be a string");if(!o.isInteger(e))throw TypeError("id must be an integer");if(this.values[t]!==undefined)throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(e))throw Error("id "+e+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(this.valuesById[e]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+e+" in "+this);this.values[t]=e;}else this.valuesById[this.values[t]=e]=t;return this.comments[t]=n||null,this;},i.prototype.remove=function(t){if(!o.isString(t))throw TypeError("name must be a string");var e=this.values[t];if(null==e)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[e],delete this.values[t],delete this.comments[t],this;},i.prototype.isReservedId=function(t){return a.isReservedId(this.reserved,t);},i.prototype.isReservedName=function(t){return a.isReservedName(this.reserved,t);};},{23:23,24:24,37:37}],16:[function(t,e,n){function i(t,e,n,i,a,o){if(l.isObject(i)?(o=i,i=a=undefined):l.isObject(a)&&(o=a,a=undefined),r.call(this,t,o),!l.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!l.isString(n))throw TypeError("type must be a string");if(i!==undefined&&!u.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(a!==undefined&&!l.isString(a))throw TypeError("extend must be a string");this.rule=i&&"optional"!==i?i:undefined,this.type=n,this.id=e,this.extend=a||undefined,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!l.Long&&s.long[n]!==undefined,this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null;}
e.exports=i;var r=t(24);((i.prototype=Object.create(r.prototype)).constructor=i).className="Field";var a,o=t(15),s=t(36),l=t(37),u=/^required|optional|repeated$/;i.fromJSON=function(t,e){return new i(t,e.id,e.type,e.rule,e.extend,e.options);},Object.defineProperty(i.prototype,"packed",{get:function t(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed;}}),i.prototype.setOption=function(t,e,n){return "packed"===t&&(this._packed=null),r.prototype.setOption.call(this,t,e,n);},i.prototype.toJSON=function(){return l.toObject(["rule","optional"!==this.rule&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options]);},i.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=s.defaults[this.type])===undefined&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof a?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof o&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof o)||delete this.options.packed,Object.keys(this.options).length||(this.options=undefined)),this.long)this.typeDefault=l.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var t;l.base64.test(this.typeDefault)?l.base64.decode(this.typeDefault,t=l.newBuffer(l.base64.length(this.typeDefault)),0):l.utf8.write(this.typeDefault,t=l.newBuffer(l.utf8.length(this.typeDefault)),0),this.typeDefault=t;}
return this.map?this.defaultValue=l.emptyObject:this.repeated?this.defaultValue=l.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof a&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this);},i.d=function(t,e,n,r){return "function"==typeof e?e=l.decorateType(e).name:e&&"object"==(0,_typeof2.default)(e)&&(e=l.decorateEnum(e).name),function(a,o){l.decorateType(a.constructor).add(new i(o,t,e,n,{default:r}));};},i._configure=function(t){a=t;};},{15:15,24:24,36:36,37:37}],17:[function(t,e,n){var i=e.exports=t(18);i.build="light",i.load=function(t,e,n){return "function"==typeof e?(n=e,e=new i.Root()):e||(e=new i.Root()),e.load(t,n);},i.loadSync=function(t,e){return e||(e=new i.Root()),e.loadSync(t);},i.encoder=t(14),i.decoder=t(13),i.verifier=t(40),i.converter=t(12),i.ReflectionObject=t(24),i.Namespace=t(23),i.Root=t(29),i.Enum=t(15),i.Type=t(35),i.Field=t(16),i.OneOf=t(25),i.MapField=t(20),i.Service=t(33),i.Method=t(22),i.Message=t(21),i.wrappers=t(41),i.types=t(36),i.util=t(37),i.ReflectionObject._configure(i.Root),i.Namespace._configure(i.Type,i.Service),i.Root._configure(i.Type),i.Field._configure(i.Type);},{12:12,13:13,14:14,15:15,16:16,18:18,20:20,21:21,22:22,23:23,24:24,25:25,29:29,33:33,35:35,36:36,37:37,40:40,41:41}],18:[function(t,e,n){function i(){r.Reader._configure(r.BufferReader),r.util._configure();}
var r=n;r.build="minimal",r.Writer=t(42),r.BufferWriter=t(43),r.Reader=t(27),r.BufferReader=t(28),r.util=t(39),r.rpc=t(31),r.roots=t(30),r.configure=i,r.Writer._configure(r.BufferWriter),i();},{27:27,28:28,30:30,31:31,39:39,42:42,43:43}],19:[function(t,e,n){var i=e.exports=t(17);i.build="full",i.tokenize=t(34),i.parse=t(26),i.common=t(11),i.Root._configure(i.Type,i.parse,i.common);},{11:11,17:17,26:26,34:34}],20:[function(t,e,n){function i(t,e,n,i,a){if(r.call(this,t,e,i,a),!o.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0;}
e.exports=i;var r=t(16);((i.prototype=Object.create(r.prototype)).constructor=i).className="MapField";var a=t(36),o=t(37);i.fromJSON=function(t,e){return new i(t,e.id,e.keyType,e.type,e.options);},i.prototype.toJSON=function(){return o.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options]);},i.prototype.resolve=function(){if(this.resolved)return this;if(a.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this);},i.d=function(t,e,n){return "function"==typeof n?n=o.decorateType(n).name:n&&"object"==(0,_typeof2.default)(n)&&(n=o.decorateEnum(n).name),function(r,a){o.decorateType(r.constructor).add(new i(a,t,e,n));};};},{16:16,36:36,37:37}],21:[function(t,e,n){function i(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n){this[e[n]]=t[e[n]];}}
e.exports=i;var r=t(39);i.create=function(t){return this.$type.create(t);},i.encode=function(t,e){return this.$type.encode(t,e);},i.encodeDelimited=function(t,e){return this.$type.encodeDelimited(t,e);},i.decode=function(t){return this.$type.decode(t);},i.decodeDelimited=function(t){return this.$type.decodeDelimited(t);},i.verify=function(t){return this.$type.verify(t);},i.fromObject=function(t){return this.$type.fromObject(t);},i.toObject=function(t,e){return this.$type.toObject(t,e);},i.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions);};},{39:39}],22:[function(t,e,n){function i(t,e,n,i,o,s,l){if(a.isObject(o)?(l=o,o=s=undefined):a.isObject(s)&&(l=s,s=undefined),e!==undefined&&!a.isString(e))throw TypeError("type must be a string");if(!a.isString(n))throw TypeError("requestType must be a string");if(!a.isString(i))throw TypeError("responseType must be a string");r.call(this,t,l),this.type=e||"rpc",this.requestType=n,this.requestStream=!!o||undefined,this.responseType=i,this.responseStream=!!s||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null;}
e.exports=i;var r=t(24);((i.prototype=Object.create(r.prototype)).constructor=i).className="Method";var a=t(37);i.fromJSON=function(t,e){return new i(t,e.type,e.requestType,e.responseType,e.requestStream,e.responseStream,e.options);},i.prototype.toJSON=function(){return a.toObject(["type","rpc"!==this.type&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options]);},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this));};},{24:24,37:37}],23:[function(t,e,n){function i(t){if(!t||!t.length)return undefined;for(var e={},n=0;n<t.length;++n){e[t[n].name]=t[n].toJSON();}
return e;}
function r(t,e){o.call(this,t,e),this.nested=undefined,this._nestedArray=null;}
function a(t){return t._nestedArray=null,t;}
e.exports=r;var o=t(24);((r.prototype=Object.create(o.prototype)).constructor=r).className="Namespace";var s,l,u=t(15),h=t(16),c=t(37);r.fromJSON=function(t,e){return new r(t,e.options).addJSON(e.nested);},r.arrayToJSON=i,r.isReservedId=function(t,e){if(t)for(var n=0;n<t.length;++n){if("string"!=typeof t[n]&&t[n][0]<=e&&t[n][1]>=e)return!0;}
return!1;},r.isReservedName=function(t,e){if(t)for(var n=0;n<t.length;++n){if(t[n]===e)return!0;}
return!1;},Object.defineProperty(r.prototype,"nestedArray",{get:function t(){return this._nestedArray||(this._nestedArray=c.toArray(this.nested));}}),r.prototype.toJSON=function(){return c.toObject(["options",this.options,"nested",i(this.nestedArray)]);},r.prototype.addJSON=function(t){if(t)for(var e,n=Object.keys(t),i=0;i<n.length;++i){e=t[n[i]],this.add((e.fields!==undefined?s.fromJSON:e.values!==undefined?u.fromJSON:e.methods!==undefined?l.fromJSON:e.id!==undefined?h.fromJSON:r.fromJSON)(n[i],e));}
return this;},r.prototype.get=function(t){return this.nested&&this.nested[t]||null;},r.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof u)return this.nested[t].values;throw Error("no such enum");},r.prototype.add=function(t){if(!(t instanceof h&&t.extend!==undefined||t instanceof s||t instanceof u||t instanceof l||t instanceof r))throw TypeError("object must be a valid nested object");if(this.nested){var e=this.get(t.name);if(e){if(!(e instanceof r&&t instanceof r)||e instanceof s||e instanceof l)throw Error("duplicate name '"+t.name+"' in "+this);for(var n=e.nestedArray,i=0;i<n.length;++i){t.add(n[i]);}
this.remove(e),this.nested||(this.nested={}),t.setOptions(e.options,!0);}}else this.nested={};return this.nested[t.name]=t,t.onAdd(this),a(this);},r.prototype.remove=function(t){if(!(t instanceof o))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=undefined),t.onRemove(this),a(this);},r.prototype.define=function(t,e){if(c.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var n=this;t.length>0;){var i=t.shift();if(n.nested&&n.nested[i]){if(!((n=n.nested[i])instanceof r))throw Error("path conflicts with non-namespace objects");}else n.add(n=new r(i));}
return e&&n.addJSON(e),n;},r.prototype.resolveAll=function(){for(var t=this.nestedArray,e=0;e<t.length;){t[e]instanceof r?t[e++].resolveAll():t[e++].resolve();}
return this.resolve();},r.prototype.lookup=function(t,e,n){if("boolean"==typeof e?(n=e,e=undefined):e&&!Array.isArray(e)&&(e=[e]),c.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".");}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),e);var i=this.get(t[0]);if(i){if(1===t.length){if(!e||e.indexOf(i.constructor)>-1)return i;}else if(i instanceof r&&(i=i.lookup(t.slice(1),e,!0)))return i;}else for(var a=0;a<this.nestedArray.length;++a){if(this._nestedArray[a]instanceof r&&(i=this._nestedArray[a].lookup(t,e,!0)))return i;}
return null===this.parent||n?null:this.parent.lookup(t,e);},r.prototype.lookupType=function(t){var e=this.lookup(t,[s]);if(!e)throw Error("no such type");return e;},r.prototype.lookupEnum=function(t){var e=this.lookup(t,[u]);if(!e)throw Error("no such Enum '"+t+"' in "+this);return e;},r.prototype.lookupTypeOrEnum=function(t){var e=this.lookup(t,[s,u]);if(!e)throw Error("no such Type or Enum '"+t+"' in "+this);return e;},r.prototype.lookupService=function(t){var e=this.lookup(t,[l]);if(!e)throw Error("no such Service '"+t+"' in "+this);return e;},r._configure=function(t,e){s=t,l=e;};},{15:15,16:16,24:24,37:37}],24:[function(t,e,n){function i(t,e){if(!a.isString(t))throw TypeError("name must be a string");if(e&&!a.isObject(e))throw TypeError("options must be an object");this.options=e,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null;}
e.exports=i,i.className="ReflectionObject";var r,a=t(37);Object.defineProperties(i.prototype,{root:{get:function t(){for(var e=this;null!==e.parent;){e=e.parent;}
return e;}},fullName:{get:function t(){for(var e=[this.name],n=this.parent;n;){e.unshift(n.name),n=n.parent;}
return e.join(".");}}}),i.prototype.toJSON=function(){throw Error();},i.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var e=t.root;e instanceof r&&e._handleAdd(this);},i.prototype.onRemove=function(t){var e=t.root;e instanceof r&&e._handleRemove(this),this.parent=null,this.resolved=!1;},i.prototype.resolve=function(){return this.resolved?this:(this.root instanceof r&&(this.resolved=!0),this);},i.prototype.getOption=function(t){return this.options?this.options[t]:undefined;},i.prototype.setOption=function(t,e,n){return n&&this.options&&this.options[t]!==undefined||((this.options||(this.options={}))[t]=e),this;},i.prototype.setOptions=function(t,e){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i){this.setOption(n[i],t[n[i]],e);}
return this;},i.prototype.toString=function(){var t=this.constructor.className,e=this.fullName;return e.length?t+" "+e:t;},i._configure=function(t){r=t;};},{37:37}],25:[function(t,e,n){function i(t,e,n){if(Array.isArray(e)||(n=e,e=undefined),a.call(this,t,n),e!==undefined&&!Array.isArray(e))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[];}
function r(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e){t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e]);}}
e.exports=i;var a=t(24);((i.prototype=Object.create(a.prototype)).constructor=i).className="OneOf";var o=t(16),s=t(37);i.fromJSON=function(t,e){return new i(t,e.oneof,e.options);},i.prototype.toJSON=function(){return s.toObject(["options",this.options,"oneof",this.oneof]);},i.prototype.add=function(t){if(!(t instanceof o))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),t.partOf=this,r(this),this;},i.prototype.remove=function(t){if(!(t instanceof o))throw TypeError("field must be a Field");var e=this.fieldsArray.indexOf(t);if(e<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(e,1),(e=this.oneof.indexOf(t.name))>-1&&this.oneof.splice(e,1),t.partOf=null,this;},i.prototype.onAdd=function(t){a.prototype.onAdd.call(this,t);for(var e=0;e<this.oneof.length;++e){var n=t.get(this.oneof[e]);n&&!n.partOf&&(n.partOf=this,this.fieldsArray.push(n));}
r(this);},i.prototype.onRemove=function(t){for(var e,n=0;n<this.fieldsArray.length;++n){(e=this.fieldsArray[n]).parent&&e.parent.remove(e);}
a.prototype.onRemove.call(this,t);},i.d=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;){t[e]=arguments[e++];}
return function(e,n){s.decorateType(e.constructor).add(new i(n,t)),Object.defineProperty(e,n,{get:s.oneOfGetter(t),set:s.oneOfSetter(t)});};};},{16:16,24:24,37:37}],26:[function(t,e,n){function i(t,e,n){function w(t,e,n){var r=i.filename;return n||(i.filename=null),Error("illegal "+(e||"token")+" '"+t+"' ("+(r?r+", ":"")+"line "+W.line+")");}
function D(){var t,e=[];do{if('"'!==(t=K())&&"'"!==t)throw w(t);e.push(K()),q(t),t=Y();}while('"'===t||"'"===t);return e.join("");}
function C(t){var e=K();switch(e){case "'":case '"':return X(e),D();case "true":case "TRUE":return!0;case "false":case "FALSE":return!1;}
try{return function(t,e){var n=1;"-"===t.charAt(0)&&(n=-1,t=t.substring(1));switch(t){case "inf":case "INF":case "Inf":return n*(1/0);case "nan":case "NAN":case "Nan":case "NaN":return NaN;case "0":return 0;}
if(p.test(t))return n*parseInt(t,10);if(g.test(t))return n*parseInt(t,16);if(v.test(t))return n*parseInt(t,8);if(x.test(t))return n*parseFloat(t);throw w(t,"number",e);}(e,!0);}catch(n){if(t&&S.test(e))return e;throw w(e,"value");}}
function E(t,e){var n,i;do{!e||'"'!==(n=Y())&&"'"!==n?t.push([i=P(K()),q("to",!0)?P(K()):i]):t.push(D());}while(q(",",!0));q(";");}
function P(t,e){switch(t){case "max":case "MAX":case "Max":return 536870911;case "0":return 0;}
if(!e&&"-"===t.charAt(0))throw w(t,"id");if(m.test(t))return parseInt(t,10);if(y.test(t))return parseInt(t,16);if(I.test(t))return parseInt(t,8);throw w(t,"id");}
function M(){if(B!==undefined)throw w("package");if(B=K(),!S.test(B))throw w(B,"name");Q=Q.define(B),q(";");}
function A(){var t,e=Y();switch(e){case "weak":t=H||(H=[]),K();break;case "public":K();default:t=k||(k=[]);}
e=D(),q(";"),t.push(e);}
function O(){if(q("="),z=D(),!($="proto3"===z)&&"proto2"!==z)throw w(z,"syntax");q(";");}
function R(t,e){switch(e){case "option":return V(t,e),q(";"),!0;case "message":return function(t,e){if(!T.test(e=K()))throw w(e,"type name");var n=new o(e);L(n,function(t){if(!R(n,t))switch(t){case "map":!function(t){q("<");var e=K();if(f.mapKey[e]===undefined)throw w(e,"type");q(",");var n=K();if(!S.test(n))throw w(n,"type");q(">");var i=K();if(!T.test(i))throw w(i,"name");q("=");var r=new l(tt(i),P(K()),e,n);L(r,function(t){if("option"!==t)throw w(t);V(r,t),q(";");},function(){G(r);}),t.add(r);}(n);break;case "required":case "optional":case "repeated":F(n,t);break;case "oneof":!function(t,e){if(!T.test(e=K()))throw w(e,"name");var n=new u(tt(e));L(n,function(t){"option"===t?(V(n,t),q(";")):(X(t),F(n,"optional"));}),t.add(n);}(n,t);break;case "extensions":E(n.extensions||(n.extensions=[]));break;case "reserved":E(n.reserved||(n.reserved=[]),!0);break;default:if(!$||!S.test(t))throw w(t);X(t),F(n,"optional");}}),t.add(n);}(t,e),!0;case "enum":return function(t,e){if(!T.test(e=K()))throw w(e,"name");var n=new h(e);L(n,function(t){switch(t){case "option":V(n,t),q(";");break;case "reserved":E(n.reserved||(n.reserved=[]),!0);break;default:!function(t,e){if(!T.test(e))throw w(e,"name");q("=");var n=P(K(),!0),i={};L(i,function(t){if("option"!==t)throw w(t);V(i,t),q(";");},function(){G(i);}),t.add(e,n,i.comment);}(n,t);}}),t.add(n);}(t,e),!0;case "service":return function(t,e){if(!T.test(e=K()))throw w(e,"service name");var n=new c(e);L(n,function(t){if(!R(n,t)){if("rpc"!==t)throw w(t);!function(t,e){var n=e;if(!T.test(e=K()))throw w(e,"name");var i,r,a,o,s=e;q("("),q("stream",!0)&&(r=!0);if(!S.test(e=K()))throw w(e);i=e,q(")"),q("returns"),q("("),q("stream",!0)&&(o=!0);if(!S.test(e=K()))throw w(e);a=e,q(")");var l=new _(s,n,i,a,r,o);L(l,function(t){if("option"!==t)throw w(t);V(l,t),q(";");}),t.add(l);}(n,t);}}),t.add(n);}(t,e),!0;case "extend":return function(t,e){if(!S.test(e=K()))throw w(e,"reference");var n=e;L(null,function(e){switch(e){case "required":case "repeated":case "optional":F(t,e,n);break;default:if(!$||!S.test(e))throw w(e);X(e),F(t,"optional",n);}});}(t,e),!0;}
return!1;}
function L(t,e,n){var r=W.line;if(t&&(t.comment=Z(),t.filename=i.filename),q("{",!0)){for(var a;"}"!==(a=K());){e(a);}
q(";",!0);}else n&&n(),q(";"),t&&"string"!=typeof t.comment&&(t.comment=Z(r));}
function F(t,e,n){var r=K();if("group"!==r){if(!S.test(r))throw w(r,"type");var a=K();if(!T.test(a))throw w(a,"name");a=tt(a),q("=");var l=new s(a,P(K()),r,e,n);L(l,function(t){if("option"!==t)throw w(t);V(l,t),q(";");},function(){G(l);}),t.add(l),$||!l.repeated||f.packed[r]===undefined&&f.basic[r]!==undefined||l.setOption("packed",!1,!0);}else!function(t,e){var n=K();if(!T.test(n))throw w(n,"name");var r=d.lcFirst(n);n===r&&(n=d.ucFirst(n));q("=");var a=P(K()),l=new o(n);l.group=!0;var u=new s(r,a,n,e);u.filename=i.filename,L(l,function(t){switch(t){case "option":V(l,t),q(";");break;case "required":case "optional":case "repeated":F(l,t);break;default:throw w(t);}}),t.add(l).add(u);}(t,e);}
function V(t,e){var n=q("(",!0);if(!S.test(e=K()))throw w(e,"name");var i=e;n&&(q(")"),i="("+i+")",e=Y(),b.test(e)&&(i+=e,K())),q("="),N(t,i);}
function N(t,e){if(q("{",!0))do{if(!T.test(j=K()))throw w(j,"name");"{"===Y()?N(t,e+"."+j):(q(":"),"{"===Y()?N(t,e+"."+j):U(t,e+"."+j,C(!0)));}while(!q("}",!0));else U(t,e,C(!0));}
function U(t,e,n){t.setOption&&t.setOption(e,n);}
function G(t){if(q("[",!0)){do{V(t,"option");}while(q(",",!0));q("]");}
return t;}
e instanceof a||(n=e,e=new a()),n||(n=i.defaults);for(var B,k,H,z,j,W=r(t),K=W.next,X=W.push,Y=W.peek,q=W.skip,Z=W.cmnt,J=!0,$=!1,Q=e,tt=n.keepCase?function(t){return t;}:d.camelCase;null!==(j=K());){switch(j){case "package":if(!J)throw w(j);M();break;case "import":if(!J)throw w(j);A();break;case "syntax":if(!J)throw w(j);O();break;case "option":if(!J)throw w(j);V(Q,j),q(";");break;default:if(R(Q,j)){J=!1;continue;}
throw w(j);}}
return i.filename=null,{package:B,imports:k,weakImports:H,syntax:z,root:e};}
e.exports=i,i.filename=null,i.defaults={keepCase:!1};var r=t(34),a=t(29),o=t(35),s=t(16),l=t(20),u=t(25),h=t(15),c=t(33),_=t(22),f=t(36),d=t(37),p=/^[1-9][0-9]*$/,m=/^-?[1-9][0-9]*$/,g=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,I=/^-?0[0-7]+$/,x=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,T=/^[a-zA-Z_][a-zA-Z_0-9]*$/,S=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,b=/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/;},{15:15,16:16,20:20,22:22,25:25,29:29,33:33,34:34,35:35,36:36,37:37}],27:[function(t,e,n){function i(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len);}
function r(t){this.buf=t,this.pos=0,this.len=t.length;}
function a(){var t=new h(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw i(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;}
return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t;}
for(;e<4;++e){if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;}
if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e){if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t;}}else for(;e<5;++e){if(this.pos>=this.len)throw i(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t;}
throw Error("invalid varint encoding");}
function o(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0;}
function s(){if(this.pos+8>this.len)throw i(this,8);return new h(o(this.buf,this.pos+=4),o(this.buf,this.pos+=4));}
e.exports=r;var l,u=t(39),h=u.LongBits,c=u.utf8,_="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new r(t);throw Error("illegal buffer");}:function(t){if(Array.isArray(t))return new r(t);throw Error("illegal buffer");};r.create=u.Buffer?function(t){return(r.create=function(t){return u.Buffer.isBuffer(t)?new l(t):_(t);})(t);}:_,r.prototype._slice=u.Array.prototype.subarray||u.Array.prototype.slice,r.prototype.uint32=function(){var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,i(this,10);return t;};}(),r.prototype.int32=function(){return 0|this.uint32();},r.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0;},r.prototype.bool=function(){return 0!==this.uint32();},r.prototype.fixed32=function(){if(this.pos+4>this.len)throw i(this,4);return o(this.buf,this.pos+=4);},r.prototype.sfixed32=function(){if(this.pos+4>this.len)throw i(this,4);return 0|o(this.buf,this.pos+=4);},r.prototype.float=function(){if(this.pos+4>this.len)throw i(this,4);var t=u.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t;},r.prototype.double=function(){if(this.pos+8>this.len)throw i(this,4);var t=u.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t;},r.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw i(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n);},r.prototype.string=function(){var t=this.bytes();return c.read(t,0,t.length);},r.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw i(this,t);this.pos+=t;}else do{if(this.pos>=this.len)throw i(this);}while(128&this.buf[this.pos++]);return this;},r.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;;){if(4==(t=7&this.uint32()))break;this.skipType(t);}
break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos);}
return this;},r._configure=function(t){l=t;var e=u.Long?"toLong":"toNumber";u.merge(r.prototype,{int64:function t(){return a.call(this)[e](!1);},uint64:function t(){return a.call(this)[e](!0);},sint64:function t(){return a.call(this).zzDecode()[e](!1);},fixed64:function t(){return s.call(this)[e](!0);},sfixed64:function t(){return s.call(this)[e](!1);}});};},{39:39}],28:[function(t,e,n){function i(t){r.call(this,t);}
e.exports=i;var r=t(27);(i.prototype=Object.create(r.prototype)).constructor=i;var a=t(39);a.Buffer&&(i.prototype._slice=a.Buffer.prototype.slice),i.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len));};},{27:27,39:39}],29:[function(t,e,n){function i(t){o.call(this,"",t),this.deferred=[],this.files=[];}
function r(){}
function a(t,e){var n=e.parent.lookup(e.extend);if(n){var i=new h(e.fullName,e.id,e.type,e.rule,undefined,e.options);return i.declaringField=e,e.extensionField=i,n.add(i),!0;}
return!1;}
e.exports=i;var o=t(23);((i.prototype=Object.create(o.prototype)).constructor=i).className="Root";var s,l,u,h=t(16),c=t(15),_=t(25),f=t(37);i.fromJSON=function(t,e){return e||(e=new i()),t.options&&e.setOptions(t.options),e.addJSON(t.nested);},i.prototype.resolvePath=f.path.resolve,i.prototype.load=function t(e,n,i){function a(t,e){if(i){var n=i;if(i=null,c)throw t;n(t,e);}}
function o(t,e){try{if(f.isString(e)&&"{"===e.charAt(0)&&(e=JSON.parse(e)),f.isString(e)){l.filename=t;var i,r=l(e,h,n),o=0;if(r.imports)for(;o<r.imports.length;++o){(i=h.resolvePath(t,r.imports[o]))&&s(i);}
if(r.weakImports)for(o=0;o<r.weakImports.length;++o){(i=h.resolvePath(t,r.weakImports[o]))&&s(i,!0);}}else h.setOptions(e.options).addJSON(e.nested);}catch(t){a(t);}
c||_||a(null,h);}
function s(t,e){var n=t.lastIndexOf("google/protobuf/");if(n>-1){var r=t.substring(n);r in u&&(t=r);}
if(!(h.files.indexOf(t)>-1))if(h.files.push(t),t in u)c?o(t,u[t]):(++_,setTimeout(function(){--_,o(t,u[t]);}));else if(c){var s;try{s=f.fs.readFileSync(t).toString("utf8");}catch(t){return void(e||a(t));}
o(t,s);}else++_,f.fetch(t,function(n,r){--_,i&&(n?e?_||a(null,h):a(n):o(t,r));});}
"function"==typeof n&&(i=n,n=undefined);var h=this;if(!i)return f.asPromise(t,h,e,n);var c=i===r,_=0;f.isString(e)&&(e=[e]);for(var d,p=0;p<e.length;++p){(d=h.resolvePath("",e[p]))&&s(d);}
return c?h:(_||a(null,h),undefined);},i.prototype.loadSync=function(t,e){if(!f.isNode)throw Error("not supported");return this.load(t,e,r);},i.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(t){return "'extend "+t.extend+"' in "+t.parent.fullName;}).join(", "));return o.prototype.resolveAll.call(this);};var d=/^[A-Z]/;i.prototype._handleAdd=function(t){if(t instanceof h)t.extend===undefined||t.extensionField||a(0,t)||this.deferred.push(t);else if(t instanceof c)d.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof _)){if(t instanceof s)for(var e=0;e<this.deferred.length;){a(0,this.deferred[e])?this.deferred.splice(e,1):++e;}
for(var n=0;n<t.nestedArray.length;++n){this._handleAdd(t._nestedArray[n]);}
d.test(t.name)&&(t.parent[t.name]=t);}},i.prototype._handleRemove=function(t){if(t instanceof h){if(t.extend!==undefined)if(t.extensionField)t.extensionField.parent.remove(t.extensionField),t.extensionField=null;else{var e=this.deferred.indexOf(t);e>-1&&this.deferred.splice(e,1);}}else if(t instanceof c)d.test(t.name)&&delete t.parent[t.name];else if(t instanceof o){for(var n=0;n<t.nestedArray.length;++n){this._handleRemove(t._nestedArray[n]);}
d.test(t.name)&&delete t.parent[t.name];}},i._configure=function(t,e,n){s=t,l=e,u=n;};},{15:15,16:16,23:23,25:25,37:37}],30:[function(t,e,n){e.exports={};},{}],31:[function(t,e,n){n.Service=t(32);},{32:32}],32:[function(t,e,n){function i(t,e,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n);}
e.exports=i;var r=t(39);(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function t(e,n,i,a,o){if(!a)throw TypeError("request must be specified");var s=this;if(!o)return r.asPromise(t,s,e,n,i,a);if(!s.rpcImpl)return setTimeout(function(){o(Error("already ended"));},0),undefined;try{return s.rpcImpl(e,n[s.requestDelimited?"encodeDelimited":"encode"](a).finish(),function(t,n){if(t)return s.emit("error",t,e),o(t);if(null===n)return s.end(!0),undefined;if(!(n instanceof i))try{n=i[s.responseDelimited?"decodeDelimited":"decode"](n);}catch(t){return s.emit("error",t,e),o(t);}
return s.emit("data",n,e),o(null,n);});}catch(t){return s.emit("error",t,e),setTimeout(function(){o(t);},0),undefined;}},i.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this;};},{39:39}],33:[function(t,e,n){function i(t,e){a.call(this,t,e),this.methods={},this._methodsArray=null;}
function r(t){return t._methodsArray=null,t;}
e.exports=i;var a=t(23);((i.prototype=Object.create(a.prototype)).constructor=i).className="Service";var o=t(22),s=t(37),l=t(31);i.fromJSON=function(t,e){var n=new i(t,e.options);if(e.methods)for(var r=Object.keys(e.methods),a=0;a<r.length;++a){n.add(o.fromJSON(r[a],e.methods[r[a]]));}
return e.nested&&n.addJSON(e.nested),n;},i.prototype.toJSON=function(){var t=a.prototype.toJSON.call(this);return s.toObject(["options",t&&t.options||undefined,"methods",a.arrayToJSON(this.methodsArray)||{},"nested",t&&t.nested||undefined]);},Object.defineProperty(i.prototype,"methodsArray",{get:function t(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods));}}),i.prototype.get=function(t){return this.methods[t]||a.prototype.get.call(this,t);},i.prototype.resolveAll=function(){for(var t=this.methodsArray,e=0;e<t.length;++e){t[e].resolve();}
return a.prototype.resolve.call(this);},i.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof o?(this.methods[t.name]=t,t.parent=this,r(this)):a.prototype.add.call(this,t);},i.prototype.remove=function(t){if(t instanceof o){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,r(this);}
return a.prototype.remove.call(this,t);},i.prototype.create=function(t,e,n){for(var i,r=new l.Service(t,e,n),a=0;a<this.methodsArray.length;++a){var o=s.lcFirst((i=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");r[o]=s.codegen(["r","c"],s.isReserved(o)?o+"_":o)("return this.rpcCall(m,q,s,r,c)")({m:i,q:i.resolvedRequestType.ctor,s:i.resolvedResponseType.ctor});}
return r;};},{22:22,23:23,31:31,37:37}],34:[function(t,e,n){function i(t){return t.replace(c,function(t,e){switch(e){case "\\":case "":return e;default:return _[e]||"";}});}
function r(t){function e(t){return Error("illegal "+t+" (line "+m+")");}
function n(e){return t.charAt(e);}
function r(e,n){g=t.charAt(e++),v=m,I=!1;var i,r=e-3;do{if(--r<0||"\n"===(i=t.charAt(r))){I=!0;break;}}while(" "===i||"\t"===i);for(var a=t.substring(e,n).split(u),o=0;o<a.length;++o){a[o]=a[o].replace(l,"").trim();}
y=a.join("\n").trim();}
function c(){if(x.length>0)return x.shift();if(T)return function(){var n="'"===T?s:o;n.lastIndex=d-1;var r=n.exec(t);if(!r)throw e("string");return d=n.lastIndex,_(T),T=null,i(r[1]);}();var l,u,c,f,g;do{if(d===p)return null;for(l=!1;h.test(c=n(d));){if("\n"===c&&++m,++d===p)return null;}
if("/"===n(d)){if(++d===p)throw e("comment");if("/"===n(d)){for(g="/"===n(f=d+1);"\n"!==n(++d);){if(d===p)return null;}
++d,g&&r(f,d-1),++m,l=!0;}else{if("*"!==(c=n(d)))return "/";g="*"===n(f=d+1);do{if("\n"===c&&++m,++d===p)throw e("comment");u=c,c=n(d);}while("*"!==u||"/"!==c);++d,g&&r(f,d-2),l=!0;}}}while(l);var y=d;a.lastIndex=0;if(!a.test(n(y++)))for(;y<p&&!a.test(n(y));){++y;}
var v=t.substring(d,d=y);return '"'!==v&&"'"!==v||(T=v),v;}
function _(t){x.push(t);}
function f(){if(!x.length){var t=c();if(null===t)return null;_(t);}
return x[0];}
var d=0,p=(t=t.toString()).length,m=1,g=null,y=null,v=0,I=!1,x=[],T=null;return Object.defineProperty({next:c,peek:f,push:_,skip:function t(n,i){var r=f();if(r===n)return c(),!0;if(!i)throw e("token '"+r+"', '"+n+"' expected");return!1;},cmnt:function t(e){var n=null;return e===undefined?v!==m-1||"*"!==g&&!I||(n=y):(v<e&&f(),v!==e||I||"/"!==g||(n=y)),n;}},"line",{get:function t(){return m;}});}
e.exports=r;var a=/[\s{}=;:[\],'"()<>]/g,o=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,s=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,l=/^ *[*/]+ */,u=/\n/g,h=/\s/,c=/\\(.?)/g,_={0:"\0",r:"\r",n:"\n",t:"\t"};r.unescape=i;},{}],35:[function(t,e,n){function i(t,e){a.call(this,t,e),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null;}
function r(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=null,delete t.encode,delete t.decode,delete t.verify,t;}
e.exports=i;var a=t(23);((i.prototype=Object.create(a.prototype)).constructor=i).className="Type";var o=t(15),s=t(25),l=t(16),u=t(20),h=t(33),c=t(21),_=t(27),f=t(42),d=t(37),p=t(14),m=t(13),g=t(40),y=t(12),v=t(41);Object.defineProperties(i.prototype,{fieldsById:{get:function t(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),n=0;n<e.length;++n){var i=this.fields[e[n]],r=i.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=i;}
return this._fieldsById;}},fieldsArray:{get:function t(){return this._fieldsArray||(this._fieldsArray=d.toArray(this.fields));}},oneofsArray:{get:function t(){return this._oneofsArray||(this._oneofsArray=d.toArray(this.oneofs));}},ctor:{get:function t(){return this._ctor||(this.ctor=i.generateConstructor(this)());},set:function t(e){var n=e.prototype;n instanceof c||((e.prototype=new c()).constructor=e,d.merge(e.prototype,n)),e.$type=e.prototype.$type=this,d.merge(e,c,!0),this._ctor=e;for(var i=0;i<this.fieldsArray.length;++i){this._fieldsArray[i].resolve();}
var r={};for(i=0;i<this.oneofsArray.length;++i){r[this._oneofsArray[i].resolve().name]={get:d.oneOfGetter(this._oneofsArray[i].oneof),set:d.oneOfSetter(this._oneofsArray[i].oneof)};}
i&&Object.defineProperties(e.prototype,r);}}}),i.generateConstructor=function(t){for(var e,n=d.codegen(["p"],t.name),i=0;i<t.fieldsArray.length;++i){(e=t._fieldsArray[i]).map?n("this%s={}",d.safeProp(e.name)):e.repeated&&n("this%s=[]",d.safeProp(e.name));}
return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]");},i.fromJSON=function(t,e){var n=new i(t,e.options);n.extensions=e.extensions,n.reserved=e.reserved;for(var r=Object.keys(e.fields),c=0;c<r.length;++c){n.add((void 0!==e.fields[r[c]].keyType?u.fromJSON:l.fromJSON)(r[c],e.fields[r[c]]));}
if(e.oneofs)for(r=Object.keys(e.oneofs),c=0;c<r.length;++c){n.add(s.fromJSON(r[c],e.oneofs[r[c]]));}
if(e.nested)for(r=Object.keys(e.nested),c=0;c<r.length;++c){var _=e.nested[r[c]];n.add((_.id!==undefined?l.fromJSON:_.fields!==undefined?i.fromJSON:_.values!==undefined?o.fromJSON:_.methods!==undefined?h.fromJSON:a.fromJSON)(r[c],_));}
return e.extensions&&e.extensions.length&&(n.extensions=e.extensions),e.reserved&&e.reserved.length&&(n.reserved=e.reserved),e.group&&(n.group=!0),n;},i.prototype.toJSON=function(){var t=a.prototype.toJSON.call(this);return d.toObject(["options",t&&t.options||undefined,"oneofs",a.arrayToJSON(this.oneofsArray),"fields",a.arrayToJSON(this.fieldsArray.filter(function(t){return!t.declaringField;}))||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",t&&t.nested||undefined]);},i.prototype.resolveAll=function(){for(var t=this.fieldsArray,e=0;e<t.length;){t[e++].resolve();}
var n=this.oneofsArray;for(e=0;e<n.length;){n[e++].resolve();}
return a.prototype.resolveAll.call(this);},i.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null;},i.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof l&&t.extend===undefined){if(this._fieldsById?this._fieldsById[t.id]:this.fieldsById[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),this.fields[t.name]=t,t.message=this,t.onAdd(this),r(this);}
return t instanceof s?(this.oneofs||(this.oneofs={}),this.oneofs[t.name]=t,t.onAdd(this),r(this)):a.prototype.add.call(this,t);},i.prototype.remove=function(t){if(t instanceof l&&t.extend===undefined){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),r(this);}
if(t instanceof s){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),r(this);}
return a.prototype.remove.call(this,t);},i.prototype.isReservedId=function(t){return a.isReservedId(this.reserved,t);},i.prototype.isReservedName=function(t){return a.isReservedName(this.reserved,t);},i.prototype.create=function(t){return new this.ctor(t);},i.prototype.setup=function(){for(var t=this.fullName,e=[],n=0;n<this.fieldsArray.length;++n){e.push(this._fieldsArray[n].resolve().resolvedType);}
this.encode=p(this)({Writer:f,types:e,util:d}),this.decode=m(this)({Reader:_,types:e,util:d}),this.verify=g(this)({types:e,util:d}),this.fromObject=y.fromObject(this)({types:e,util:d}),this.toObject=y.toObject(this)({types:e,util:d});var i=v[t];if(i){var r=Object.create(this);r.fromObject=this.fromObject,this.fromObject=i.fromObject.bind(r),r.toObject=this.toObject,this.toObject=i.toObject.bind(r);}
return this;},i.prototype.encode=function(t,e){return this.setup().encode(t,e);},i.prototype.encodeDelimited=function(t,e){return this.encode(t,e&&e.len?e.fork():e).ldelim();},i.prototype.decode=function(t,e){return this.setup().decode(t,e);},i.prototype.decodeDelimited=function(t){return t instanceof _||(t=_.create(t)),this.decode(t,t.uint32());},i.prototype.verify=function(t){return this.setup().verify(t);},i.prototype.fromObject=function(t){return this.setup().fromObject(t);},i.prototype.toObject=function(t,e){return this.setup().toObject(t,e);},i.d=function(t){return function(e){d.decorateType(e,t);};};},{12:12,13:13,14:14,15:15,16:16,20:20,21:21,23:23,25:25,27:27,33:33,37:37,40:40,41:41,42:42}],36:[function(t,e,n){function i(t,e){var n=0,i={};for(e|=0;n<t.length;){i[o[n+e]]=t[n++];}
return i;}
var r=n,a=t(37),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];r.basic=i([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=i([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",a.emptyArray,null]),r.long=i([0,0,0,1,1],7),r.mapKey=i([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=i([1,5,0,0,0,5,5,0,0,0,1,1,0]);},{37:37}],37:[function(t,e,n){var i,r,a=e.exports=t(39),o=t(30);a.codegen=t(3),a.fetch=t(5),a.path=t(8),a.fs=a.inquire("fs"),a.toArray=function(t){if(t){for(var e=Object.keys(t),n=new Array(e.length),i=0;i<e.length;){n[i]=t[e[i++]];}
return n;}
return[];},a.toObject=function(t){for(var e={},n=0;n<t.length;){var i=t[n++],r=t[n++];r!==undefined&&(e[i]=r);}
return e;};var s=/\\/g,l=/"/g;a.isReserved=function(t){return /^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t);},a.safeProp=function(t){return!/^[$\w_]+$/.test(t)||a.isReserved(t)?'["'+t.replace(s,"\\\\").replace(l,'\\"')+'"]':"."+t;},a.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1);};var u=/_([a-z])/g;a.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(u,function(t,e){return e.toUpperCase();});},a.compareFieldsById=function(t,e){return t.id-e.id;},a.decorateType=function(e,n){if(e.$type)return n&&e.$type.name!==n&&(a.decorateRoot.remove(e.$type),e.$type.name=n,a.decorateRoot.add(e.$type)),e.$type;i||(i=t(35));var r=new i(n||e.name);return a.decorateRoot.add(r),r.ctor=e,Object.defineProperty(e,"$type",{value:r,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:r,enumerable:!1}),r;};var h=0;a.decorateEnum=function(e){if(e.$type)return e.$type;r||(r=t(15));var n=new r("Enum"+h++,e);return a.decorateRoot.add(n),Object.defineProperty(e,"$type",{value:n,enumerable:!1}),n;},Object.defineProperty(a,"decorateRoot",{get:function e(){return o.decorated||(o.decorated=new(t(29))());}});},{15:15,29:29,3:3,30:30,35:35,39:39,5:5,8:8}],38:[function(t,e,n){function i(t,e){this.lo=t>>>0,this.hi=e>>>0;}
e.exports=i;var r=t(39),a=i.zero=new i(0,0);a.toNumber=function(){return 0;},a.zzEncode=a.zzDecode=function(){return this;},a.length=function(){return 1;};var o=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return a;var e=t<0;e&&(t=-t);var n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r);},i.from=function(t){if("number"==typeof t)return i.fromNumber(t);if(r.isString(t)){if(!r.Long)return i.fromNumber(parseInt(t,10));t=r.Long.fromString(t);}
return t.low||t.high?new i(t.low>>>0,t.high>>>0):a;},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n);}
return this.lo+4294967296*this.hi;},i.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)};};var s=String.prototype.charCodeAt;i.fromHash=function(t){return t===o?a:new i((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0);},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24);},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this;},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this;},i.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10;};},{39:39}],39:[function(t,e,n){function i(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;++r){t[i[r]]!==undefined&&n||(t[i[r]]=e[i[r]]);}
return t;}
function r(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function e(){return t;}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&i(this,n);}
return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function e(){return t;}}),e.prototype.toString=function(){return this.name+": "+this.message;},e;}
var a=n;a.asPromise=t(1),a.base64=t(2),a.EventEmitter=t(4),a.float=t(6),a.inquire=t(7),a.utf8=t(10),a.pool=t(9),a.LongBits=t(38),a.emptyArray=Object.freeze?Object.freeze([]):[],a.emptyObject=Object.freeze?Object.freeze({}):{},a.isNode=Boolean(global.process&&global.process.versions&&global.process.versions.node),a.isInteger=Number.isInteger||function(t){return "number"==typeof t&&isFinite(t)&&Math.floor(t)===t;},a.isString=function(t){return "string"==typeof t||t instanceof String;},a.isObject=function(t){return t&&"object"==(0,_typeof2.default)(t);},a.isset=a.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!=(0,_typeof2.default)(n)||(Array.isArray(n)?n.length:Object.keys(n).length)>0);},a.Buffer=function(){try{var t=a.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null;}catch(t){return null;}}(),a._Buffer_from=null,a._Buffer_allocUnsafe=null,a.newBuffer=function(t){return "number"==typeof t?a.Buffer?a._Buffer_allocUnsafe(t):new a.Array(t):a.Buffer?a._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t);},a.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,a.Long=global.dcodeIO&&global.dcodeIO.Long||a.inquire("long"),a.key2Re=/^true|false|0|1$/,a.key32Re=/^-?(?:0|[1-9][0-9]*)$/,a.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,a.longToHash=function(t){return t?a.LongBits.from(t).toHash():a.LongBits.zeroHash;},a.longFromHash=function(t,e){var n=a.LongBits.fromHash(t);return a.Long?a.Long.fromBits(n.lo,n.hi,e):n.toNumber(Boolean(e));},a.merge=i,a.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1);},a.newError=r,a.ProtocolError=r("ProtocolError"),a.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n){e[t[n]]=1;}
return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n){if(1===e[t[n]]&&this[t[n]]!==undefined&&null!==this[t[n]])return t[n];}};},a.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n){t[n]!==e&&delete this[t[n]];}};},a.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},a._configure=function(){var t=a.Buffer;t?(a._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,n){return new t(e,n);},a._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e);}):a._Buffer_from=a._Buffer_allocUnsafe=null;};},{1:1,10:10,2:2,38:38,4:4,6:6,7:7,9:9}],40:[function(t,e,n){function i(t,e){return t.name+": "+e+(t.repeated&&"array"!==e?"[]":t.map&&"object"!==e?"{k:"+t.keyType+"}":"")+" expected";}
function r(t,e,n,r){if(e.resolvedType){if(e.resolvedType instanceof o){t("switch(%s){",r)("default:")("return%j",i(e,"enum value"));for(var a=Object.keys(e.resolvedType.values),s=0;s<a.length;++s){t("case %i:",e.resolvedType.values[a[s]]);}
t("break")("}");}else t("{")("var e=types[%i].verify(%s);",n,r)("if(e)")("return%j+e",e.name+".")("}");}else switch(e.type){case "int32":case "uint32":case "sint32":case "fixed32":case "sfixed32":t("if(!util.isInteger(%s))",r)("return%j",i(e,"integer"));break;case "int64":case "uint64":case "sint64":case "fixed64":case "sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",r,r,r,r)("return%j",i(e,"integer|Long"));break;case "float":case "double":t('if(typeof %s!=="number")',r)("return%j",i(e,"number"));break;case "bool":t('if(typeof %s!=="boolean")',r)("return%j",i(e,"boolean"));break;case "string":t("if(!util.isString(%s))",r)("return%j",i(e,"string"));break;case "bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',r,r,r)("return%j",i(e,"buffer"));}
return t;}
function a(t,e,n){switch(e.keyType){case "int32":case "uint32":case "sint32":case "fixed32":case "sfixed32":t("if(!util.key32Re.test(%s))",n)("return%j",i(e,"integer key"));break;case "int64":case "uint64":case "sint64":case "fixed64":case "sfixed64":t("if(!util.key64Re.test(%s))",n)("return%j",i(e,"integer|Long key"));break;case "bool":t("if(!util.key2Re.test(%s))",n)("return%j",i(e,"boolean key"));}
return t;}
e.exports=function(t){var e=s.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n={};t.oneofsArray.length&&e("var p={}");for(var o=0;o<t.fieldsArray.length;++o){var l=t._fieldsArray[o].resolve(),u="m"+s.safeProp(l.name);if(l.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",u,l.name),l.map)e("if(!util.isObject(%s))",u)("return%j",i(l,"object"))("var k=Object.keys(%s)",u)("for(var i=0;i<k.length;++i){"),a(e,l,"k[i]"),r(e,l,o,u+"[k[i]]")("}");else if(l.repeated)e("if(!Array.isArray(%s))",u)("return%j",i(l,"array"))("for(var i=0;i<%s.length;++i){",u),r(e,l,o,u+"[i]")("}");else{if(l.partOf){var h=s.safeProp(l.partOf.name);1===n[l.partOf.name]&&e("if(p%s===1)",h)("return%j",l.partOf.name+": multiple values"),n[l.partOf.name]=1,e("p%s=1",h);}
r(e,l,o,u);}
l.optional&&e("}");}
return e("return null");};var o=t(15),s=t(37);},{15:15,37:37}],41:[function(t,e,n){var i=n,r=t(21);i[".google.protobuf.Any"]={fromObject:function t(e){if(e&&e["@type"]){var n=this.lookup(e["@type"]);if(n){var i="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return this.create({type_url:"/"+i,value:n.encode(n.fromObject(e)).finish()});}}
return this.fromObject(e);},toObject:function t(e,n){if(n&&n.json&&e.type_url&&e.value){var i=e.type_url.substring(e.type_url.lastIndexOf("/")+1),a=this.lookup(i);a&&(e=a.decode(e.value));}
if(!(e instanceof this.ctor)&&e instanceof r){var o=e.$type.toObject(e,n);return o["@type"]=e.$type.fullName,o;}
return this.toObject(e,n);}};},{21:21}],42:[function(t,e,n){function i(t,e,n){this.fn=t,this.len=e,this.next=undefined,this.val=n;}
function r(){}
function a(){this.len=0,this.head=new i(r,0,0),this.tail=this.head,this.states=null;}
function o(t,e,n){e[n]=255&t;}
function s(t,e){this.len=t,this.next=undefined,this.val=e;}
function l(t,e,n){for(;t.hi;){e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;}
for(;t.lo>127;){e[n++]=127&t.lo|128,t.lo=t.lo>>>7;}
e[n++]=t.lo;}
function u(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24;}
e.exports=a;var h,c=t(39),_=c.LongBits,f=c.base64,d=c.utf8;a.create=c.Buffer?function(){return(a.create=function(){return new h();})();}:function(){return new a();},a.alloc=function(t){return new c.Array(t);},c.Array!==Array&&(a.alloc=c.pool(a.alloc,c.Array.prototype.subarray)),a.prototype._push=function(t,e,n){return this.tail=this.tail.next=new i(t,e,n),this.len+=e,this;},(s.prototype=Object.create(i.prototype)).fn=function(t,e,n){for(;t>127;){e[n++]=127&t|128,t>>>=7;}
e[n]=t;},a.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new s((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this;},a.prototype.int32=function(t){return t<0?this._push(l,10,_.fromNumber(t)):this.uint32(t);},a.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0);},a.prototype.uint64=function(t){var e=_.from(t);return this._push(l,e.length(),e);},a.prototype.int64=a.prototype.uint64,a.prototype.sint64=function(t){var e=_.from(t).zzEncode();return this._push(l,e.length(),e);},a.prototype.bool=function(t){return this._push(o,1,t?1:0);},a.prototype.fixed32=function(t){return this._push(u,4,t>>>0);},a.prototype.sfixed32=a.prototype.fixed32,a.prototype.fixed64=function(t){var e=_.from(t);return this._push(u,4,e.lo)._push(u,4,e.hi);},a.prototype.sfixed64=a.prototype.fixed64,a.prototype.float=function(t){return this._push(c.float.writeFloatLE,4,t);},a.prototype.double=function(t){return this._push(c.float.writeDoubleLE,8,t);};var p=c.Array.prototype.set?function(t,e,n){e.set(t,n);}:function(t,e,n){for(var i=0;i<t.length;++i){e[n+i]=t[i];}};a.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(o,1,0);if(c.isString(t)){var n=a.alloc(e=f.length(t));f.decode(t,n,0),t=n;}
return this.uint32(e)._push(p,e,t);},a.prototype.string=function(t){var e=d.length(t);return e?this.uint32(e)._push(d.write,e,t):this._push(o,1,0);},a.prototype.fork=function(){return this.states=new function(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states;}(this),this.head=this.tail=new i(r,0,0),this.len=0,this;},a.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new i(r,0,0),this.len=0),this;},a.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this;},a.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;){t.fn(t.val,e,n),n+=t.len,t=t.next;}
return e;},a._configure=function(t){h=t;};},{39:39}],43:[function(t,e,n){function i(){a.call(this);}
function r(t,e,n){t.length<40?o.utf8.write(t,e,n):e.utf8Write(t,n);}
e.exports=i;var a=t(42);(i.prototype=Object.create(a.prototype)).constructor=i;var o=t(39),s=o.Buffer;i.alloc=function(t){return(i.alloc=o._Buffer_allocUnsafe)(t);};var l=s&&s.prototype instanceof Uint8Array&&"set"===s.prototype.set.name?function(t,e,n){e.set(t,n);}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var i=0;i<t.length;){e[n++]=t[i++];}};i.prototype.bytes=function(t){o.isString(t)&&(t=o._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(l,e,t),this;},i.prototype.string=function(t){var e=s.byteLength(t);return this.uint32(e),e&&this._push(r,e,t),this;};},{39:39,42:42}]},{},[19]);}("object"==(false?undefined:(0,_typeof2.default)(window))&&window||"object"==(typeof self==="undefined"?"undefined":(0,_typeof2.default)(self))&&self||void 0);var $protobuf=window.protobuf;$protobuf.roots.default=window;var $Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots.default||($protobuf.roots.default={});$root.terrain=function(){var t={};return t.ProptoVector3=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n){null!=t[e[n]]&&(this[e[n]]=t[e[n]]);}}
return t.prototype.x=0,t.prototype.y=0,t.prototype.z=0,t.create=function(e){return new t(e);},t.encode=function(t,e){return e||(e=$Writer.create()),null!=t.x&&t.hasOwnProperty("x")&&e.uint32(13).float(t.x),null!=t.y&&t.hasOwnProperty("y")&&e.uint32(21).float(t.y),null!=t.z&&t.hasOwnProperty("z")&&e.uint32(29).float(t.z),e;},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim();},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new $root.terrain.ProptoVector3();t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:i.x=t.float();break;case 2:i.y=t.float();break;case 3:i.z=t.float();break;default:t.skipType(7&r);}}
return i;},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32());},t.verify=function(t){return "object"!=(0,_typeof2.default)(t)||null===t?"object expected":null!=t.x&&t.hasOwnProperty("x")&&"number"!=typeof t.x?"x: number expected":null!=t.y&&t.hasOwnProperty("y")&&"number"!=typeof t.y?"y: number expected":null!=t.z&&t.hasOwnProperty("z")&&"number"!=typeof t.z?"z: number expected":null;},t.fromObject=function(t){if(t instanceof $root.terrain.ProptoVector3)return t;var e=new $root.terrain.ProptoVector3();return null!=t.x&&(e.x=Number(t.x)),null!=t.y&&(e.y=Number(t.y)),null!=t.z&&(e.z=Number(t.z)),e;},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.x=0,n.y=0,n.z=0),null!=t.x&&t.hasOwnProperty("x")&&(n.x=e.json&&!isFinite(t.x)?String(t.x):t.x),null!=t.y&&t.hasOwnProperty("y")&&(n.y=e.json&&!isFinite(t.y)?String(t.y):t.y),null!=t.z&&t.hasOwnProperty("z")&&(n.z=e.json&&!isFinite(t.z)?String(t.z):t.z),n;},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},t;}(),t.BITypeV2=function(){var t={},e=Object.create(t);return e[t[0]="Static"]=0,e[t[1]="Dynamic"]=1,e;}(),t.BISourceType=function(){var t={},e=Object.create(t);return e[t[1]="Objects"]=1,e[t[2]="PropRandom"]=2,e[t[3]="MapRandom"]=3,e[t[4]="AIRoot"]=4,e[t[5]="AIPoint"]=5,e;}(),t.BIAIActionType=function(){var t={},e=Object.create(t);return e[t[0]="None"]=0,e[t[1]="Free"]=1,e[t[2]="Run"]=2,e[t[3]="Jump"]=3,e[t[4]="Down"]=4,e;}(),t.MapFieldEntry=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n){null!=t[e[n]]&&(this[e[n]]=t[e[n]]);}}
return t.prototype.key=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.value=null,t.create=function(e){return new t(e);},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int64(t.key),$root.terrain.TerrainData.encode(t.value,e.uint32(18).fork()).ldelim(),e;},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim();},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new $root.terrain.MapFieldEntry();t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:i.key=t.int64();break;case 2:i.value=$root.terrain.TerrainData.decode(t,t.uint32());break;default:t.skipType(7&r);}}
if(!i.hasOwnProperty("key"))throw $util.ProtocolError("missing required 'key'",{instance:i});if(!i.hasOwnProperty("value"))throw $util.ProtocolError("missing required 'value'",{instance:i});return i;},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32());},t.verify=function(t){if("object"!=(0,_typeof2.default)(t)||null===t)return "object expected";if(!($util.isInteger(t.key)||t.key&&$util.isInteger(t.key.low)&&$util.isInteger(t.key.high)))return "key: integer|Long expected";var e=$root.terrain.TerrainData.verify(t.value);return e?"value."+e:null;},t.fromObject=function(t){if(t instanceof $root.terrain.MapFieldEntry)return t;var e=new $root.terrain.MapFieldEntry();if(null!=t.key&&($util.Long?(e.key=$util.Long.fromValue(t.key)).unsigned=!1:"string"==typeof t.key?e.key=parseInt(t.key,10):"number"==typeof t.key?e.key=t.key:"object"==(0,_typeof2.default)(t.key)&&(e.key=new $util.LongBits(t.key.low>>>0,t.key.high>>>0).toNumber())),null!=t.value){if("object"!=(0,_typeof2.default)(t.value))throw TypeError(".terrain.MapFieldEntry.value: object expected");e.value=$root.terrain.TerrainData.fromObject(t.value);}
return e;},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if($util.Long){var i=new $util.Long(0,0,!1);n.key=e.longs===String?i.toString():e.longs===Number?i.toNumber():i;}else n.key=e.longs===String?"0":0;n.value=null;}
return null!=t.key&&t.hasOwnProperty("key")&&("number"==typeof t.key?n.key=e.longs===String?String(t.key):t.key:n.key=e.longs===String?$util.Long.prototype.toString.call(t.key):e.longs===Number?new $util.LongBits(t.key.low>>>0,t.key.high>>>0).toNumber():t.key),null!=t.value&&t.hasOwnProperty("value")&&(n.value=$root.terrain.TerrainData.toObject(t.value,e)),n;},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},t;}(),t.TerrainLevelData=function(){function t(t){if(this.terrains=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n){null!=t[e[n]]&&(this[e[n]]=t[e[n]]);}}
return t.prototype.terrains=$util.emptyArray,t.prototype.id=0,t.create=function(e){return new t(e);},t.encode=function(t,e){if(e||(e=$Writer.create()),null!=t.terrains&&t.terrains.length)for(var n=0;n<t.terrains.length;++n){$root.terrain.MapFieldEntry.encode(t.terrains[n],e.uint32(10).fork()).ldelim();}
return e.uint32(16).int32(t.id),e;},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim();},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new $root.terrain.TerrainLevelData();t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:i.terrains&&i.terrains.length||(i.terrains=[]),i.terrains.push($root.terrain.MapFieldEntry.decode(t,t.uint32()));break;case 2:i.id=t.int32();break;default:t.skipType(7&r);}}
if(!i.hasOwnProperty("id"))throw $util.ProtocolError("missing required 'id'",{instance:i});return i;},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32());},t.verify=function(t){if("object"!=(0,_typeof2.default)(t)||null===t)return "object expected";if(null!=t.terrains&&t.hasOwnProperty("terrains")){if(!Array.isArray(t.terrains))return "terrains: array expected";for(var e=0;e<t.terrains.length;++e){var n=$root.terrain.MapFieldEntry.verify(t.terrains[e]);if(n)return "terrains."+n;}}
return $util.isInteger(t.id)?null:"id: integer expected";},t.fromObject=function(t){if(t instanceof $root.terrain.TerrainLevelData)return t;var e=new $root.terrain.TerrainLevelData();if(t.terrains){if(!Array.isArray(t.terrains))throw TypeError(".terrain.TerrainLevelData.terrains: array expected");e.terrains=[];for(var n=0;n<t.terrains.length;++n){if("object"!=(0,_typeof2.default)(t.terrains[n]))throw TypeError(".terrain.TerrainLevelData.terrains: object expected");e.terrains[n]=$root.terrain.MapFieldEntry.fromObject(t.terrains[n]);}}
return null!=t.id&&(e.id=0|t.id),e;},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.terrains=[]),e.defaults&&(n.id=0),t.terrains&&t.terrains.length){n.terrains=[];for(var i=0;i<t.terrains.length;++i){n.terrains[i]=$root.terrain.MapFieldEntry.toObject(t.terrains[i],e);}}
return null!=t.id&&t.hasOwnProperty("id")&&(n.id=t.id),n;},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},t;}(),t.TerrainData=function(){function t(t){if(this.elements=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n){null!=t[e[n]]&&(this[e[n]]=t[e[n]]);}}
return t.prototype.elements=$util.emptyArray,t.prototype.id=$util.Long?$util.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e);},t.encode=function(t,e){if(e||(e=$Writer.create()),null!=t.elements&&t.elements.length)for(var n=0;n<t.elements.length;++n){$root.terrain.TerrainElementData.encode(t.elements[n],e.uint32(10).fork()).ldelim();}
return e.uint32(16).int64(t.id),e;},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim();},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new $root.terrain.TerrainData();t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:i.elements&&i.elements.length||(i.elements=[]),i.elements.push($root.terrain.TerrainElementData.decode(t,t.uint32()));break;case 2:i.id=t.int64();break;default:t.skipType(7&r);}}
if(!i.hasOwnProperty("id"))throw $util.ProtocolError("missing required 'id'",{instance:i});return i;},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32());},t.verify=function(t){if("object"!=(0,_typeof2.default)(t)||null===t)return "object expected";if(null!=t.elements&&t.hasOwnProperty("elements")){if(!Array.isArray(t.elements))return "elements: array expected";for(var e=0;e<t.elements.length;++e){var n=$root.terrain.TerrainElementData.verify(t.elements[e]);if(n)return "elements."+n;}}
return $util.isInteger(t.id)||t.id&&$util.isInteger(t.id.low)&&$util.isInteger(t.id.high)?null:"id: integer|Long expected";},t.fromObject=function(t){if(t instanceof $root.terrain.TerrainData)return t;var e=new $root.terrain.TerrainData();if(t.elements){if(!Array.isArray(t.elements))throw TypeError(".terrain.TerrainData.elements: array expected");e.elements=[];for(var n=0;n<t.elements.length;++n){if("object"!=(0,_typeof2.default)(t.elements[n]))throw TypeError(".terrain.TerrainData.elements: object expected");e.elements[n]=$root.terrain.TerrainElementData.fromObject(t.elements[n]);}}
return null!=t.id&&($util.Long?(e.id=$util.Long.fromValue(t.id)).unsigned=!1:"string"==typeof t.id?e.id=parseInt(t.id,10):"number"==typeof t.id?e.id=t.id:"object"==(0,_typeof2.default)(t.id)&&(e.id=new $util.LongBits(t.id.low>>>0,t.id.high>>>0).toNumber())),e;},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.elements=[]),e.defaults)if($util.Long){var i=new $util.Long(0,0,!1);n.id=e.longs===String?i.toString():e.longs===Number?i.toNumber():i;}else n.id=e.longs===String?"0":0;if(t.elements&&t.elements.length){n.elements=[];for(var r=0;r<t.elements.length;++r){n.elements[r]=$root.terrain.TerrainElementData.toObject(t.elements[r],e);}}
return null!=t.id&&t.hasOwnProperty("id")&&("number"==typeof t.id?n.id=e.longs===String?String(t.id):t.id:n.id=e.longs===String?$util.Long.prototype.toString.call(t.id):e.longs===Number?new $util.LongBits(t.id.low>>>0,t.id.high>>>0).toNumber():t.id),n;},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},t;}(),t.TerrainElementData=function(){function t(t){if(this.child=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n){null!=t[e[n]]&&(this[e[n]]=t[e[n]]);}}
return t.prototype.objectId=0,t.prototype.type=void 0,t.prototype.souceType=void 0,t.prototype.aiActionType=void 0,t.prototype.activityDistance=0,t.prototype.moveSpeed=0,t.prototype.appendParam=0,t.prototype.child=$util.emptyArray,t.prototype.localPosition=null,t.prototype.localEulerAngles=null,t.prototype.localScale=null,t.create=function(e){return new t(e);},t.encode=function(t,e){if(e||(e=$Writer.create()),e.uint32(8).int32(t.objectId),null!=t.type&&t.hasOwnProperty("type")&&e.uint32(16).int32(t.type),null!=t.souceType&&t.hasOwnProperty("souceType")&&e.uint32(24).int32(t.souceType),null!=t.aiActionType&&t.hasOwnProperty("aiActionType")&&e.uint32(32).int32(t.aiActionType),null!=t.activityDistance&&t.hasOwnProperty("activityDistance")&&e.uint32(45).float(t.activityDistance),null!=t.moveSpeed&&t.hasOwnProperty("moveSpeed")&&e.uint32(53).float(t.moveSpeed),null!=t.appendParam&&t.hasOwnProperty("appendParam")&&e.uint32(61).float(t.appendParam),null!=t.child&&t.child.length)for(var n=0;n<t.child.length;++n){$root.terrain.TerrainElementData.encode(t.child[n],e.uint32(66).fork()).ldelim();}
return $root.terrain.ProptoVector3.encode(t.localPosition,e.uint32(74).fork()).ldelim(),$root.terrain.ProptoVector3.encode(t.localEulerAngles,e.uint32(82).fork()).ldelim(),$root.terrain.ProptoVector3.encode(t.localScale,e.uint32(90).fork()).ldelim(),e;},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim();},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new $root.terrain.TerrainElementData();t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:i.objectId=t.int32();break;case 2:i.type=t.int32();break;case 3:i.souceType=t.int32();break;case 4:i.aiActionType=t.int32();break;case 5:i.activityDistance=t.float();break;case 6:i.moveSpeed=t.float();break;case 7:i.appendParam=t.float();break;case 8:i.child&&i.child.length||(i.child=[]),i.child.push($root.terrain.TerrainElementData.decode(t,t.uint32()));break;case 9:i.localPosition=$root.terrain.ProptoVector3.decode(t,t.uint32());break;case 10:i.localEulerAngles=$root.terrain.ProptoVector3.decode(t,t.uint32());break;case 11:i.localScale=$root.terrain.ProptoVector3.decode(t,t.uint32());break;default:t.skipType(7&r);}}
if(!i.hasOwnProperty("objectId"))throw $util.ProtocolError("missing required 'objectId'",{instance:i});if(!i.hasOwnProperty("localPosition"))throw $util.ProtocolError("missing required 'localPosition'",{instance:i});if(!i.hasOwnProperty("localEulerAngles"))throw $util.ProtocolError("missing required 'localEulerAngles'",{instance:i});if(!i.hasOwnProperty("localScale"))throw $util.ProtocolError("missing required 'localScale'",{instance:i});return i;},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32());},t.verify=function(t){if("object"!=(0,_typeof2.default)(t)||null===t)return "object expected";if(!$util.isInteger(t.objectId))return "objectId: integer expected";if(null!=t.type&&t.hasOwnProperty("type"))switch(t.type){default:return "type: enum value expected";case 0:case 1:}
if(null!=t.souceType&&t.hasOwnProperty("souceType"))switch(t.souceType){default:return "souceType: enum value expected";case 1:case 2:case 3:case 4:case 5:}
if(null!=t.aiActionType&&t.hasOwnProperty("aiActionType"))switch(t.aiActionType){default:return "aiActionType: enum value expected";case 0:case 1:case 2:case 3:case 4:}
if(null!=t.activityDistance&&t.hasOwnProperty("activityDistance")&&"number"!=typeof t.activityDistance)return "activityDistance: number expected";if(null!=t.moveSpeed&&t.hasOwnProperty("moveSpeed")&&"number"!=typeof t.moveSpeed)return "moveSpeed: number expected";if(null!=t.appendParam&&t.hasOwnProperty("appendParam")&&"number"!=typeof t.appendParam)return "appendParam: number expected";if(null!=t.child&&t.hasOwnProperty("child")){if(!Array.isArray(t.child))return "child: array expected";for(var e=0;e<t.child.length;++e){if(n=$root.terrain.TerrainElementData.verify(t.child[e]))return "child."+n;}}
if(n=$root.terrain.ProptoVector3.verify(t.localPosition))return "localPosition."+n;if(n=$root.terrain.ProptoVector3.verify(t.localEulerAngles))return "localEulerAngles."+n;var n=$root.terrain.ProptoVector3.verify(t.localScale);return n?"localScale."+n:null;},t.fromObject=function(t){if(t instanceof $root.terrain.TerrainElementData)return t;var e=new $root.terrain.TerrainElementData();switch(null!=t.objectId&&(e.objectId=0|t.objectId),t.type){case "Static":case 0:e.type=0;break;case "Dynamic":case 1:e.type=1;}
switch(t.souceType){case "Objects":case 1:e.souceType=1;break;case "PropRandom":case 2:e.souceType=2;break;case "MapRandom":case 3:e.souceType=3;break;case "AIRoot":case 4:e.souceType=4;break;case "AIPoint":case 5:e.souceType=5;}
switch(t.aiActionType){case "None":case 0:e.aiActionType=0;break;case "Free":case 1:e.aiActionType=1;break;case "Run":case 2:e.aiActionType=2;break;case "Jump":case 3:e.aiActionType=3;break;case "Down":case 4:e.aiActionType=4;}
if(null!=t.activityDistance&&(e.activityDistance=Number(t.activityDistance)),null!=t.moveSpeed&&(e.moveSpeed=Number(t.moveSpeed)),null!=t.appendParam&&(e.appendParam=Number(t.appendParam)),t.child){if(!Array.isArray(t.child))throw TypeError(".terrain.TerrainElementData.child: array expected");e.child=[];for(var n=0;n<t.child.length;++n){if("object"!=(0,_typeof2.default)(t.child[n]))throw TypeError(".terrain.TerrainElementData.child: object expected");e.child[n]=$root.terrain.TerrainElementData.fromObject(t.child[n]);}}
if(null!=t.localPosition){if("object"!=(0,_typeof2.default)(t.localPosition))throw TypeError(".terrain.TerrainElementData.localPosition: object expected");e.localPosition=$root.terrain.ProptoVector3.fromObject(t.localPosition);}
if(null!=t.localEulerAngles){if("object"!=(0,_typeof2.default)(t.localEulerAngles))throw TypeError(".terrain.TerrainElementData.localEulerAngles: object expected");e.localEulerAngles=$root.terrain.ProptoVector3.fromObject(t.localEulerAngles);}
if(null!=t.localScale){if("object"!=(0,_typeof2.default)(t.localScale))throw TypeError(".terrain.TerrainElementData.localScale: object expected");e.localScale=$root.terrain.ProptoVector3.fromObject(t.localScale);}
return e;},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.child=[]),e.defaults&&(n.objectId=0,n.type=(e.enums,void String),n.souceType=(e.enums,void String),n.aiActionType=(e.enums,void String),n.activityDistance=0,n.moveSpeed=0,n.appendParam=0,n.localPosition=null,n.localEulerAngles=null,n.localScale=null),null!=t.objectId&&t.hasOwnProperty("objectId")&&(n.objectId=t.objectId),null!=t.type&&t.hasOwnProperty("type")&&(n.type=e.enums===String?$root.terrain.BITypeV2[t.type]:t.type),null!=t.souceType&&t.hasOwnProperty("souceType")&&(n.souceType=e.enums===String?$root.terrain.BISourceType[t.souceType]:t.souceType),null!=t.aiActionType&&t.hasOwnProperty("aiActionType")&&(n.aiActionType=e.enums===String?$root.terrain.BIAIActionType[t.aiActionType]:t.aiActionType),null!=t.activityDistance&&t.hasOwnProperty("activityDistance")&&(n.activityDistance=e.json&&!isFinite(t.activityDistance)?String(t.activityDistance):t.activityDistance),null!=t.moveSpeed&&t.hasOwnProperty("moveSpeed")&&(n.moveSpeed=e.json&&!isFinite(t.moveSpeed)?String(t.moveSpeed):t.moveSpeed),null!=t.appendParam&&t.hasOwnProperty("appendParam")&&(n.appendParam=e.json&&!isFinite(t.appendParam)?String(t.appendParam):t.appendParam),t.child&&t.child.length){n.child=[];for(var i=0;i<t.child.length;++i){n.child[i]=$root.terrain.TerrainElementData.toObject(t.child[i],e);}}
return null!=t.localPosition&&t.hasOwnProperty("localPosition")&&(n.localPosition=$root.terrain.ProptoVector3.toObject(t.localPosition,e)),null!=t.localEulerAngles&&t.hasOwnProperty("localEulerAngles")&&(n.localEulerAngles=$root.terrain.ProptoVector3.toObject(t.localEulerAngles,e)),null!=t.localScale&&t.hasOwnProperty("localScale")&&(n.localScale=$root.terrain.ProptoVector3.toObject(t.localScale,e)),n;},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},t;}(),t;}(),function(global,undefined){"use strict";!function(t,e,n){function i(n){var r=e[n];return r||t[n][0].call(r=e[n]={exports:{}},i,r,r.exports),r.exports;}
var r=global.protobuf=i(n[0]);"function"==typeof window.define&&window.define.amd&&window.define(["long"],function(t){return r.util.Long=t,r.configure(),r;}),"object"==(false?undefined:(0,_typeof2.default)(module))&&module&&module.exports&&(module.exports=r);}({1:[function(t,e,n){e.exports=function(t,e){for(var n=[],i=2;i<arguments.length;){n.push(arguments[i++]);}
var r=!0;return new Promise(function(i,a){n.push(function(t){if(r)if(r=!1,t)a(t);else{for(var e=[],n=1;n<arguments.length;){e.push(arguments[n++]);}
i.apply(null,e);}});try{t.apply(e||this,n);}catch(t){r&&(r=!1,a(t));}});};},{}],2:[function(t,e,n){var i=n;i.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&"="===t.charAt(e);){++n;}
return Math.ceil(3*t.length)/4-n;};for(var r=new Array(64),a=new Array(123),o=0;o<64;){a[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;}
i.encode=function(t,e,n){for(var i,a=[],o=0,s=0;e<n;){var l=t[e++];switch(s){case 0:a[o++]=r[l>>2],i=(3&l)<<4,s=1;break;case 1:a[o++]=r[i|l>>4],i=(15&l)<<2,s=2;break;case 2:a[o++]=r[i|l>>6],a[o++]=r[63&l],s=0;}}
return s&&(a[o++]=r[i],a[o]=61,1===s&&(a[o+1]=61)),String.fromCharCode.apply(String,a);};i.decode=function(t,e,n){for(var i,r=n,o=0,s=0;s<t.length;){var l=t.charCodeAt(s++);if(61===l&&o>1)break;if((l=a[l])===undefined)throw Error("invalid encoding");switch(o){case 0:i=l,o=1;break;case 1:e[n++]=i<<2|(48&l)>>4,i=l,o=2;break;case 2:e[n++]=(15&i)<<4|(60&l)>>2,i=l,o=3;break;case 3:e[n++]=(3&i)<<6|l,o=0;}}
if(1===o)throw Error("invalid encoding");return n-r;},i.test=function(t){return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t);};},{}],3:[function(t,e,n){function i(){function t(){for(var e=[],i=0;i<arguments.length;){e.push(arguments[i++]);}
var _=r.apply(null,e),f=h;if(n.length){var d=n[n.length-1];a.test(d)?f=++h:l.test(d)&&++f,s.test(d)&&!s.test(_)?(f=++h,c=!0):c&&u.test(d)&&(f=--h,c=!1),o.test(_)&&(f=--h);}
for(i=0;i<f;++i){_="\t"+_;}
return n.push(_),t;}
for(var e=[],n=[],h=1,c=!1,_=0;_<arguments.length;){e.push(arguments[_++]);}
return t.str=function(t){return "function"+(t?" "+t.replace(/[^\w_$]/g,"_"):"")+"("+e.join(",")+") {\n"+n.join("\n")+"\n}";},t.eof=function(e,n){"object"==(0,_typeof2.default)(e)&&(n=e,e=undefined);var r=t.str(e);i.verbose&&console.log("--- codegen ---\n"+r.replace(/^/gm,"> ").replace(/\t/g,"  "));var a=Object.keys(n||(n={}));return Function.apply(null,a.concat("return "+r)).apply(null,a.map(function(t){return n[t];}));},t;}
function r(t){for(var e=[],n=1;n<arguments.length;){e.push(arguments[n++]);}
if(n=0,t=t.replace(/%([dfjs])/g,function(t,i){switch(i){case "d":return Math.floor(e[n++]);case "f":return Number(e[n++]);case "j":return JSON.stringify(e[n++]);default:return e[n++];}}),n!==e.length)throw Error("argument count mismatch");return t;}
e.exports=i;var a=/[{[]$/,o=/^[}\]]/,s=/:$/,l=/^\s*(?:if|}?else if|while|for)\b|\b(?:else)\s*$/,u=/\b(?:break|continue)(?: \w+)?;?$|^\s*return\b/;i.sprintf=r,i.supported=!1;try{i.supported=1===i("a","b")("return a-b").eof()(2,1);}catch(t){}
i.verbose=!1;},{}],4:[function(t,e,n){function i(){this._listeners={};}
e.exports=i,i.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this;},i.prototype.off=function(t,e){if(t===undefined)this._listeners={};else if(e===undefined)this._listeners[t]=[];else for(var n=this._listeners[t],i=0;i<n.length;){n[i].fn===e?n.splice(i,1):++i;}
return this;},i.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],i=1;i<arguments.length;){n.push(arguments[i++]);}
for(i=0;i<e.length;){e[i].fn.apply(e[i++].ctx,n);}}
return this;};},{}],5:[function(t,e,n){function i(t,e,n){return "function"==typeof e?(n=e,e={}):e||(e={}),n?!e.xhr&&a&&a.readFile?a.readFile(t,function(r,a){return r&&"undefined"!=typeof XMLHttpRequest?i.xhr(t,e,n):r?n(r):n(null,e.binary?a:a.toString("utf8"));}):i.xhr(t,e,n):r(i,this,t,e);}
e.exports=i;var r=t(1),a=t(6)("fs");i.xhr=function(t,e,n){var i=new XMLHttpRequest();i.onreadystatechange=function(){if(4!==i.readyState)return undefined;if(0!==i.status&&200!==i.status)return n(Error("status "+i.status));if(e.binary){var t=i.response;if(!t){t=[];for(var r=0;r<i.responseText.length;++r){t.push(255&i.responseText.charCodeAt(r));}}
return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t);}
return n(null,i.responseText);},e.binary&&("overrideMimeType"in i&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.responseType="arraybuffer"),i.open("GET",t),i.send();};},{1:1,6:6}],6:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod;}catch(t){}
return null;}
module.exports=inquire;},{}],7:[function(t,e,n){var i=n,r=i.isAbsolute=function(t){return /^(?:\/|\w+:)/.test(t);},a=i.normalize=function(t){var e=(t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=r(t),i="";n&&(i=e.shift()+"/");for(var a=0;a<e.length;){".."===e[a]?a>0&&".."!==e[a-1]?e.splice(--a,2):n?e.splice(a,1):++a:"."===e[a]?e.splice(a,1):++a;}
return i+e.join("/");};i.resolve=function(t,e,n){return n||(e=a(e)),r(e)?e:(n||(t=a(t)),(t=t.replace(/(?:\/|^)[^/]+$/,"")).length?a(t+"/"+e):e);};},{}],8:[function(t,e,n){e.exports=function(t,e,n){var i=n||8192,r=i>>>1,a=null,o=i;return function(n){if(n<1||n>r)return t(n);o+n>i&&(a=t(i),o=0);var s=e.call(a,o,o+=n);return 7&o&&(o=1+(7|o)),s;};};},{}],9:[function(t,e,n){var i=n;i.length=function(t){for(var e=0,n=0,i=0;i<t.length;++i){(n=t.charCodeAt(i))<128?e+=1:n<2048?e+=2:55296==(64512&n)&&56320==(64512&t.charCodeAt(i+1))?(++i,e+=4):e+=3;}
return e;},i.read=function(t,e,n){if(n-e<1)return "";for(var i,r=null,a=[],o=0;e<n;){(i=t[e++])<128?a[o++]=i:i>191&&i<224?a[o++]=(31&i)<<6|63&t[e++]:i>239&&i<365?(i=((7&i)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,a[o++]=55296+(i>>10),a[o++]=56320+(1023&i)):a[o++]=(15&i)<<12|(63&t[e++])<<6|63&t[e++],o>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,a)),o=0);}
return r?(o&&r.push(String.fromCharCode.apply(String,a.slice(0,o))),r.join("")):String.fromCharCode.apply(String,a.slice(0,o));},i.write=function(t,e,n){for(var i,r,a=n,o=0;o<t.length;++o){(i=t.charCodeAt(o))<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&56320==(64512&(r=t.charCodeAt(o+1)))?(i=65536+((1023&i)<<10)+(1023&r),++o,e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128);}
return n-a;};},{}],10:[function(t,e,n){function i(e,n){if(r||(r=t(34)),!(e instanceof r))throw TypeError("type must be a Type");if(n){if("function"!=typeof n)throw TypeError("ctor must be a function");}else n=i.generate(e).eof(e.name);n.constructor=i,(n.prototype=new a()).constructor=n,o.merge(n,a,!0),n.$type=e,n.prototype.$type=e;for(var s=0;s<e.fieldsArray.length;++s){n.prototype[e._fieldsArray[s].name]=Array.isArray(e._fieldsArray[s].resolve().defaultValue)?o.emptyArray:o.isObject(e._fieldsArray[s].defaultValue)&&!e._fieldsArray[s].long?o.emptyObject:e._fieldsArray[s].defaultValue;}
var l={};for(s=0;s<e.oneofsArray.length;++s){l[e._oneofsArray[s].resolve().name]={get:o.oneOfGetter(e._oneofsArray[s].oneof),set:o.oneOfSetter(e._oneofsArray[s].oneof)};}
return s&&Object.defineProperties(n.prototype,l),e.ctor=n,n.prototype;}
e.exports=i;var r,a=t(21),o=t(36);i.generate=function(t){return o.codegen("p")("if(p){")("for(var ks=Object.keys(p),i=0;i<ks.length;++i)")("this[ks[i]]=p[ks[i]];")("}");},i.create=i,i.prototype=a;},{21:21,34:34,36:36}],11:[function(t,e,n){function i(t,e){r.test(t)||(t="google/protobuf/"+t+".proto",e={nested:{google:{nested:{protobuf:{nested:e}}}}}),i[t]=e;}
e.exports=i;var r=/\/|\./;i("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var a;i("duration",{Duration:a={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),i("timestamp",{Timestamp:a}),i("empty",{Empty:{fields:{}}}),i("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),i("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});},{}],12:[function(t,e,n){function i(t,e,n,i){if(e.resolvedType){if(e.resolvedType instanceof o){t("switch(d%s){",i);for(var r=e.resolvedType.values,a=Object.keys(r),s=0;s<a.length;++s){e.repeated&&r[a[s]]===e.typeDefault&&t("default:"),t("case%j:",a[s])("case %j:",r[a[s]])("m%s=%j",i,r[a[s]])("break");}
t("}");}else t('if(typeof d%s!=="object")',i)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%d].fromObject(d%s)",i,n,i);}else{var l=!1;switch(e.type){case "double":case "float":t("m%s=Number(d%s)",i,i);break;case "uint32":case "fixed32":t("m%s=d%s>>>0",i,i);break;case "int32":case "sint32":case "sfixed32":t("m%s=d%s|0",i,i);break;case "uint64":l=!0;case "int64":case "sint64":case "fixed64":case "sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",i,i,l)('else if(typeof d%s==="string")',i)("m%s=parseInt(d%s,10)",i,i)('else if(typeof d%s==="number")',i)("m%s=d%s",i,i)('else if(typeof d%s==="object")',i)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",i,i,i,l?"true":"");break;case "bytes":t('if(typeof d%s==="string")',i)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",i,i,i)("else if(d%s.length)",i)("m%s=d%s",i,i);break;case "string":t("m%s=String(d%s)",i,i);break;case "bool":t("m%s=Boolean(d%s)",i,i);}}
return t;}
function r(t,e,n,i){if(e.resolvedType)e.resolvedType instanceof o?t("d%s=o.enums===String?types[%d].values[m%s]:m%s",i,n,i,i):t("d%s=types[%d].toObject(m%s,o)",i,n,i);else{var r=!1;switch(e.type){case "uint64":r=!0;case "int64":case "sint64":case "fixed64":case "sfixed64":t('if(typeof m%s==="number")',i)("d%s=o.longs===String?String(m%s):m%s",i,i,i)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",i,i,i,i,r?"true":"",i);break;case "bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",i,i,i,i,i);break;default:t("d%s=m%s",i,i);}}
return t;}
var a=n,o=t(15),s=t(36);a.fromObject=function(t){var e=t.fieldsArray,n=s.codegen("d")("if(d instanceof this.ctor)")("return d");if(!e.length)return n("return new this.ctor");n("var m=new this.ctor");for(var r=0;r<e.length;++r){var a=e[r].resolve(),l=s.safeProp(a.name);a.map?(n("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),i(n,a,r,l+"[ks[i]]")("}")("}")):a.repeated?(n("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),i(n,a,r,l+"[i]")("}")("}")):(a.resolvedType instanceof o||n("if(d%s!==undefined&&d%s!==null){",l,l),i(n,a,r,l),a.resolvedType instanceof o||n("}"));}
return n("return m");},a.toObject=function(t){var e=t.fieldsArray;if(!e.length)return s.codegen()("return {}");for(var n=s.codegen("m","o")("if(!o)")("o={}")("var d={}"),i=[],a=[],l=[],u=0;u<e.length;++u){e[u].resolve().repeated?i.push(e[u]):e[u].map?a.push(e[u]):l.push(e[u]);}
if(i.length){for(n("if(o.arrays||o.defaults){"),u=0;u<i.length;++u){n("d%s=[]",s.safeProp(i[u].name));}
n("}");}
if(a.length){for(n("if(o.objects||o.defaults){"),u=0;u<a.length;++u){n("d%s={}",s.safeProp(a[u].name));}
n("}");}
if(l.length){for(n("if(o.defaults){"),u=0,h;u<l.length;++u){var h=l[u],c=s.safeProp(h.name);h.resolvedType instanceof o?n("d%s=o.enums===String?%j:%j",c,h.resolvedType.valuesById[h.typeDefault],h.typeDefault):h.long?n("if(util.Long){")("var n=new util.Long(%d,%d,%j)",h.typeDefault.low,h.typeDefault.high,h.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",c)("}else")("d%s=o.longs===String?%j:%d",c,h.typeDefault.toString(),h.typeDefault.toNumber()):h.bytes?n("d%s=o.bytes===String?%j:%s",c,String.fromCharCode.apply(String,h.typeDefault),"["+Array.prototype.slice.call(h.typeDefault).join(",")+"]"):n("d%s=%j",c,h.typeDefault);}
n("}");}
for(u=0,h;u<e.length;++u){h=e[u];n("if(m%s!==undefined&&m%s!==null&&m.hasOwnProperty(%j)){",c=s.safeProp(h.name),c,h.name),h.map?(n("d%s={}",c)("for(var ks2=Object.keys(m%s),j=0;j<ks2.length;++j){",c),r(n,h,u,c+"[ks2[j]]")("}")):h.repeated?(n("d%s=[]",c)("for(var j=0;j<m%s.length;++j){",c),r(n,h,u,c+"[j]")("}")):r(n,h,u,c),n("}");}
return n("return d");};},{15:15,36:36}],13:[function(t,e,n){function i(t){return "missing required '"+t.name+"'";}
function r(t){var e=s.codegen("r","l")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor")("while(r.pos<c){")("var t=r.uint32()");t.group&&e("if((t&7)===4)")("break"),e("switch(t>>>3){");for(var n=0;n<t.fieldsArray.length;++n){var l=t._fieldsArray[n].resolve(),u=l.resolvedType instanceof a?"uint32":l.type,h="m"+s.safeProp(l.name);e("case %d:",l.id),l.map?(e("r.skip().pos++")("if(%s===util.emptyObject)",h)("%s={}",h)("var k=r.%s()",l.keyType)("r.pos++"),o.basic[u]===undefined?e('%s[typeof k==="object"?util.longToHash(k):k]=types[%d].decode(r,r.uint32())',h,n):e('%s[typeof k==="object"?util.longToHash(k):k]=r.%s()',h,u)):l.repeated?(e("if(!(%s&&%s.length))",h,h)("%s=[]",h),(r.compat||l.packed)&&o.packed[u]!==undefined&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",h,u)("}else"),o.basic[u]===undefined?e(l.resolvedType.group?"%s.push(types[%d].decode(r))":"%s.push(types[%d].decode(r,r.uint32()))",h,n):e("%s.push(r.%s())",h,u)):o.basic[u]===undefined?e(l.resolvedType.group?"%s=types[%d].decode(r)":"%s=types[%d].decode(r,r.uint32())",h,n):e("%s=r.%s()",h,u),e("break");}
for(e("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<t._fieldsArray.length;++n){var c=t._fieldsArray[n];c.required&&e("if(!m.hasOwnProperty(%j))",c.name)("throw util.ProtocolError(%j,{instance:m})",i(c));}
return e("return m");}
e.exports=r,r.compat=!0;var a=t(15),o=t(35),s=t(36);},{15:15,35:35,36:36}],14:[function(t,e,n){function i(t,e,n,i){return e.resolvedType.group?t("types[%d].encode(%s,w.uint32(%d)).uint32(%d)",n,i,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%d].encode(%s,w.uint32(%d).fork()).ldelim()",n,i,(e.id<<3|2)>>>0);}
function r(t,e){return t.id-e.id;}
function a(t){var e,n=l.codegen("m","w")("if(!w)")("w=Writer.create()"),u=t.fieldsArray;a.compat&&(u=u.slice().sort(r));for(d=0;d<u.length;++d){var h=u[d].resolve(),c=a.compat?t._fieldsArray.indexOf(h):d;if(!h.partOf){var _=h.resolvedType instanceof o?"uint32":h.type,f=s.basic[_];e="m"+l.safeProp(h.name),h.map?(n("if(%s&&m.hasOwnProperty(%j)){",e,h.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",e)("w.uint32(%d).fork().uint32(%d).%s(ks[i])",(h.id<<3|2)>>>0,8|s.mapKey[h.keyType],h.keyType),f===undefined?n("types[%d].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",c,e):n(".uint32(%d).%s(%s[ks[i]]).ldelim()",16|f,_,e),n("}")("}")):h.repeated?h.packed&&s.packed[_]!==undefined?n("if(%s&&%s.length&&m.hasOwnProperty(%j)){",e,e,h.name)("w.uint32(%d).fork()",(h.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",e)("w.%s(%s[i])",_,e)("w.ldelim()")("}"):(n("if(%s!==undefined&&m.hasOwnProperty(%j)){",e,h.name)("for(var i=0;i<%s.length;++i)",e),f===undefined?i(n,h,c,e+"[i]"):n("w.uint32(%d).%s(%s[i])",(h.id<<3|f)>>>0,_,e),n("}")):(h.required||(h.long?n("if(%s!==undefined&&%s!==null&&m.hasOwnProperty(%j))",e,e,h.name):h.bytes||h.resolvedType&&!(h.resolvedType instanceof o)?n("if(%s&&m.hasOwnProperty(%j))",e,h.name):n("if(%s!==undefined&&m.hasOwnProperty(%j))",e,h.name)),f===undefined?i(n,h,c,e):n("w.uint32(%d).%s(%s)",(h.id<<3|f)>>>0,_,e));}}
for(var d=0;d<t.oneofsArray.length;++d){var p=t._oneofsArray[d];n("switch(%s){","m"+l.safeProp(p.name));for(var m=0;m<p.fieldsArray.length;++m){var _=(h=p.fieldsArray[m]).resolvedType instanceof o?"uint32":h.type,f=s.basic[_];e="m"+l.safeProp(h.name),n("case%j:",h.name),f===undefined?i(n,h,t._fieldsArray.indexOf(h),e):n("w.uint32(%d).%s(%s)",(h.id<<3|f)>>>0,_,e),n("break");}
n("}");}
return n("return w");}
e.exports=a,a.compat=!0;var o=t(15),s=t(35),l=t(36);},{15:15,35:35,36:36}],15:[function(t,e,n){function i(t,e,n){if(r.call(this,t,n),e&&"object"!=(0,_typeof2.default)(e))throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comments={},e)for(var i=Object.keys(e),a=0;a<i.length;++a){this.valuesById[this.values[i[a]]=e[i[a]]]=i[a];}}
e.exports=i;var r=t(24);((i.prototype=Object.create(r.prototype)).constructor=i).className="Enum";var a=t(36);i.fromJSON=function(t,e){return new i(t,e.values,e.options);},i.prototype.toJSON=function(){return{options:this.options,values:this.values};},i.prototype.add=function(t,e,n){if(!a.isString(t))throw TypeError("name must be a string");if(!a.isInteger(e))throw TypeError("id must be an integer");if(this.values[t]!==undefined)throw Error("duplicate name");if(this.valuesById[e]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id");this.values[t]=e;}else this.valuesById[this.values[t]=e]=t;return this.comments[t]=n||null,this;},i.prototype.remove=function(t){if(!a.isString(t))throw TypeError("name must be a string");var e=this.values[t];if(e===undefined)throw Error("name does not exist");return delete this.valuesById[e],delete this.values[t],delete this.comments[t],this;};},{24:24,36:36}],16:[function(t,e,n){function i(t,e,n,i,a,o){if(l.isObject(i)?(o=i,i=a=undefined):l.isObject(a)&&(o=a,a=undefined),r.call(this,t,o),!l.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!l.isString(n))throw TypeError("type must be a string");if(i!==undefined&&!u.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(a!==undefined&&!l.isString(a))throw TypeError("extend must be a string");this.rule=i&&"optional"!==i?i:undefined,this.type=n,this.id=e,this.extend=a||undefined,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!l.Long&&s.long[n]!==undefined,this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null;}
e.exports=i;var r=t(24);((i.prototype=Object.create(r.prototype)).constructor=i).className="Field";var a,o=t(15),s=t(35),l=t(36),u=/^required|optional|repeated$/;Object.defineProperty(i.prototype,"packed",{get:function t(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed;}}),i.prototype.setOption=function(t,e,n){return "packed"===t&&(this._packed=null),r.prototype.setOption.call(this,t,e,n);},i.fromJSON=function(t,e){return new i(t,e.id,e.type,e.rule,e.extend,e.options);},i.prototype.toJSON=function(){return{rule:"optional"!==this.rule&&this.rule||undefined,type:this.type,id:this.id,extend:this.extend,options:this.options};},i.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=s.defaults[this.type])===undefined){a||(a=t(34));var e=this.declaringField?this.declaringField.parent:this.parent;if(this.resolvedType=e.lookup(this.type,a))this.typeDefault=null;else{if(!(this.resolvedType=e.lookup(this.type,o)))throw Error("unresolvable field type: "+this.type+" in "+e);this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]];}}
if(this.options&&this.options.default!==undefined&&(this.typeDefault=this.options.default,this.resolvedType instanceof o&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),!this.options||this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof o||delete this.options.packed,this.long)this.typeDefault=l.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var n;l.base64.test(this.typeDefault)?l.base64.decode(this.typeDefault,n=l.newBuffer(l.base64.length(this.typeDefault)),0):l.utf8.write(this.typeDefault,n=l.newBuffer(l.utf8.length(this.typeDefault)),0),this.typeDefault=n;}
return this.map?this.defaultValue=l.emptyObject:this.repeated?this.defaultValue=l.emptyArray:this.defaultValue=this.typeDefault,r.prototype.resolve.call(this);};},{15:15,24:24,34:34,35:35,36:36}],17:[function(t,e,n){var i=e.exports=t(18);i.build="light",i.load=function(t,e,n){return "function"==typeof e?(n=e,e=new i.Root()):e||(e=new i.Root()),e.load(t,n);},i.loadSync=function(t,e){return e||(e=new i.Root()),e.loadSync(t);},i.encoder=t(14),i.decoder=t(13),i.verifier=t(39),i.converter=t(12),i.ReflectionObject=t(24),i.Namespace=t(23),i.Root=t(29),i.Enum=t(15),i.Type=t(34),i.Field=t(16),i.OneOf=t(25),i.MapField=t(20),i.Service=t(32),i.Method=t(22),i.Class=t(10),i.Message=t(21),i.types=t(35),i.util=t(36),i.ReflectionObject._configure(i.Root),i.Namespace._configure(i.Type,i.Service),i.Root._configure(i.Type);},{10:10,12:12,13:13,14:14,15:15,16:16,18:18,20:20,21:21,22:22,23:23,24:24,25:25,29:29,32:32,34:34,35:35,36:36,39:39}],18:[function(t,e,n){function i(){r.Reader._configure(r.BufferReader),r.util._configure();}
var r=n;r.build="minimal",r.roots={},r.Writer=t(40),r.BufferWriter=t(41),r.Reader=t(27),r.BufferReader=t(28),r.util=t(38),r.rpc=t(30),r.configure=i,r.Writer._configure(r.BufferWriter),i();},{27:27,28:28,30:30,38:38,40:40,41:41}],19:[function(t,e,n){var i=e.exports=t(17);i.build="full",i.tokenize=t(33),i.parse=t(26),i.common=t(11),i.Root._configure(i.Type,i.parse,i.common);},{11:11,17:17,26:26,33:33}],20:[function(t,e,n){function i(t,e,n,i,a){if(r.call(this,t,e,i,a),!o.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0;}
e.exports=i;var r=t(16);((i.prototype=Object.create(r.prototype)).constructor=i).className="MapField";var a=t(35),o=t(36);i.fromJSON=function(t,e){return new i(t,e.id,e.keyType,e.type,e.options);},i.prototype.toJSON=function(){return{keyType:this.keyType,type:this.type,id:this.id,extend:this.extend,options:this.options};},i.prototype.resolve=function(){if(this.resolved)return this;if(a.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this);};},{16:16,35:35,36:36}],21:[function(t,e,n){function i(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n){this[e[n]]=t[e[n]];}}
e.exports=i;var r=t(36);i.encode=function(t,e){return this.$type.encode(t,e);},i.encodeDelimited=function(t,e){return this.$type.encodeDelimited(t,e);},i.decode=function(t){return this.$type.decode(t);},i.decodeDelimited=function(t){return this.$type.decodeDelimited(t);},i.verify=function(t){return this.$type.verify(t);},i.from=i.fromObject=function(t){return this.$type.fromObject(t);},i.toObject=function(t,e){return this.$type.toObject(t,e);},i.prototype.toObject=function(t){return this.$type.toObject(this,t);},i.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions);};},{36:36}],22:[function(t,e,n){function i(t,e,n,i,o,s,l){if(a.isObject(o)?(l=o,o=s=undefined):a.isObject(s)&&(l=s,s=undefined),e!==undefined&&!a.isString(e))throw TypeError("type must be a string");if(!a.isString(n))throw TypeError("requestType must be a string");if(!a.isString(i))throw TypeError("responseType must be a string");r.call(this,t,l),this.type=e||"rpc",this.requestType=n,this.requestStream=!!o||undefined,this.responseType=i,this.responseStream=!!s||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null;}
e.exports=i;var r=t(24);((i.prototype=Object.create(r.prototype)).constructor=i).className="Method";var a=t(36);i.fromJSON=function(t,e){return new i(t,e.type,e.requestType,e.responseType,e.requestStream,e.responseStream,e.options);},i.prototype.toJSON=function(){return{type:"rpc"!==this.type&&this.type||undefined,requestType:this.requestType,requestStream:this.requestStream,responseType:this.responseType,responseStream:this.responseStream,options:this.options};},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this));};},{24:24,36:36}],23:[function(t,e,n){function i(t){if(!t||!t.length)return undefined;for(var e={},n=0;n<t.length;++n){e[t[n].name]=t[n].toJSON();}
return e;}
function r(t,e){o.call(this,t,e),this.nested=undefined,this._nestedArray=null;}
function a(t){return t._nestedArray=null,t;}
e.exports=r;var o=t(24);((r.prototype=Object.create(o.prototype)).constructor=r).className="Namespace";var s,l,u=t(15),h=t(16),c=t(36);r.fromJSON=function(t,e){return new r(t,e.options).addJSON(e.nested);},r.arrayToJSON=i,Object.defineProperty(r.prototype,"nestedArray",{get:function t(){return this._nestedArray||(this._nestedArray=c.toArray(this.nested));}}),r.prototype.toJSON=function(){return{options:this.options,nested:i(this.nestedArray)};},r.prototype.addJSON=function(t){if(t)for(var e,n=Object.keys(t),i=0;i<n.length;++i){e=t[n[i]],this.add((e.fields!==undefined?s.fromJSON:e.values!==undefined?u.fromJSON:e.methods!==undefined?l.fromJSON:e.id!==undefined?h.fromJSON:r.fromJSON)(n[i],e));}
return this;},r.prototype.get=function(t){return this.nested&&this.nested[t]||null;},r.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof u)return this.nested[t].values;throw Error("no such enum");},r.prototype.add=function(t){if(!(t instanceof h&&t.extend!==undefined||t instanceof s||t instanceof u||t instanceof l||t instanceof r))throw TypeError("object must be a valid nested object");if(this.nested){var e=this.get(t.name);if(e){if(!(e instanceof r&&t instanceof r)||e instanceof s||e instanceof l)throw Error("duplicate name '"+t.name+"' in "+this);for(var n=e.nestedArray,i=0;i<n.length;++i){t.add(n[i]);}
this.remove(e),this.nested||(this.nested={}),t.setOptions(e.options,!0);}}else this.nested={};return this.nested[t.name]=t,t.onAdd(this),a(this);},r.prototype.remove=function(t){if(!(t instanceof o))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=undefined),t.onRemove(this),a(this);},r.prototype.define=function(t,e){if(c.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var n=this;t.length>0;){var i=t.shift();if(n.nested&&n.nested[i]){if(!((n=n.nested[i])instanceof r))throw Error("path conflicts with non-namespace objects");}else n.add(n=new r(i));}
return e&&n.addJSON(e),n;},r.prototype.resolveAll=function(){for(var t=this.nestedArray,e=0;e<t.length;){t[e]instanceof r?t[e++].resolveAll():t[e++].resolve();}
return this.resolve();},r.prototype.lookup=function(t,e,n){if("boolean"==typeof e&&(n=e,e=undefined),c.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".");}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),e);var i=this.get(t[0]);if(i)if(1===t.length){if(!e||i instanceof e)return i;}else if(i instanceof r&&(i=i.lookup(t.slice(1),e,!0)))return i;return null===this.parent||n?null:this.parent.lookup(t,e);},r.prototype.lookupType=function(t){var e=this.lookup(t,s);if(!e)throw Error("no such type");return e;},r.prototype.lookupService=function(t){var e=this.lookup(t,l);if(!e)throw Error("no such service");return e;},r.prototype.lookupEnum=function(t){var e=this.lookup(t,u);if(!e)throw Error("no such enum");return e.values;},r._configure=function(t,e){s=t,l=e;};},{15:15,16:16,24:24,36:36}],24:[function(t,e,n){function i(t,e){if(!a.isString(t))throw TypeError("name must be a string");if(e&&!a.isObject(e))throw TypeError("options must be an object");this.options=e,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null;}
e.exports=i,i.className="ReflectionObject";var r,a=t(36);Object.defineProperties(i.prototype,{root:{get:function t(){for(var e=this;null!==e.parent;){e=e.parent;}
return e;}},fullName:{get:function t(){for(var e=[this.name],n=this.parent;n;){e.unshift(n.name),n=n.parent;}
return e.join(".");}}}),i.prototype.toJSON=function(){throw Error();},i.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var e=t.root;e instanceof r&&e._handleAdd(this);},i.prototype.onRemove=function(t){var e=t.root;e instanceof r&&e._handleRemove(this),this.parent=null,this.resolved=!1;},i.prototype.resolve=function(){return this.resolved?this:(this.root instanceof r&&(this.resolved=!0),this);},i.prototype.getOption=function(t){return this.options?this.options[t]:undefined;},i.prototype.setOption=function(t,e,n){return n&&this.options&&this.options[t]!==undefined||((this.options||(this.options={}))[t]=e),this;},i.prototype.setOptions=function(t,e){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i){this.setOption(n[i],t[n[i]],e);}
return this;},i.prototype.toString=function(){var t=this.constructor.className,e=this.fullName;return e.length?t+" "+e:t;},i._configure=function(t){r=t;};},{36:36}],25:[function(t,e,n){function i(t,e,n){if(Array.isArray(e)||(n=e,e=undefined),a.call(this,t,n),e!==undefined&&!Array.isArray(e))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[];}
function r(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e){t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e]);}}
e.exports=i;var a=t(24);((i.prototype=Object.create(a.prototype)).constructor=i).className="OneOf";var o=t(16);i.fromJSON=function(t,e){return new i(t,e.oneof,e.options);},i.prototype.toJSON=function(){return{oneof:this.oneof,options:this.options};},i.prototype.add=function(t){if(!(t instanceof o))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),t.partOf=this,r(this),this;},i.prototype.remove=function(t){if(!(t instanceof o))throw TypeError("field must be a Field");var e=this.fieldsArray.indexOf(t);if(e<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(e,1),(e=this.oneof.indexOf(t.name))>-1&&this.oneof.splice(e,1),t.partOf=null,this;},i.prototype.onAdd=function(t){a.prototype.onAdd.call(this,t);for(var e=0;e<this.oneof.length;++e){var n=t.get(this.oneof[e]);n&&!n.partOf&&(n.partOf=this,this.fieldsArray.push(n));}
r(this);},i.prototype.onRemove=function(t){for(var e,n=0;n<this.fieldsArray.length;++n){(e=this.fieldsArray[n]).parent&&e.parent.remove(e);}
a.prototype.onRemove.call(this,t);};},{16:16,24:24}],26:[function(t,e,n){function i(t){return null===t?null:t.toLowerCase();}
function r(t,e,n){function C(t,e,n){var i=r.filename;return n||(r.filename=null),Error("illegal "+(e||"token")+" '"+t+"' ("+(i?i+", ":"")+"line "+K.line()+")");}
function E(){var t,e=[];do{if('"'!==(t=X())&&"'"!==t)throw C(t);e.push(X()),Z(t),t=q();}while('"'===t||"'"===t);return e.join("");}
function P(t){var e=X();switch(i(e)){case "'":case '"':return Y(e),E();case "true":return!0;case "false":return!1;}
try{return function(t,e){var n=1;"-"===t.charAt(0)&&(n=-1,t=t.substring(1));var r=i(t);switch(r){case "inf":return n*(1/0);case "nan":return NaN;case "0":return 0;}
if(m.test(t))return n*parseInt(t,10);if(y.test(r))return n*parseInt(t,16);if(I.test(t))return n*parseInt(t,8);if(T.test(r))return n*parseFloat(t);throw C(t,"number",e);}(e,!0);}catch(n){if(t&&b.test(e))return e;throw C(e,"value");}}
function M(t,e){var n,i;do{!e||'"'!==(n=q())&&"'"!==n?t.push([i=A(X()),Z("to",!0)?A(X()):i]):t.push(E());}while(Z(",",!0));Z(";");}
function A(t,e){var n=i(t);switch(n){case "max":return 536870911;case "0":return 0;}
if("-"===t.charAt(0)&&!e)throw C(t,"id");if(g.test(t))return parseInt(t,10);if(v.test(n))return parseInt(t,16);if(x.test(t))return parseInt(t,8);throw C(t,"id");}
function O(){if(k!==undefined)throw C("package");if(k=X(),!b.test(k))throw C(k,"name");tt=tt.define(k),Z(";");}
function R(){var t,e=q();switch(e){case "weak":t=z||(z=[]),X();break;case "public":X();default:t=H||(H=[]);}
e=E(),Z(";"),t.push(e);}
function L(){if(Z("="),j=i(E()),!(Q="proto3"===j)&&"proto2"!==j)throw C(j,"syntax");Z(";");}
function F(t,e){switch(e){case "option":return N(t,e),Z(";"),!0;case "message":return function(t,e){var n=X();if(!S.test(n))throw C(n,"type name");var a=new s(n);if(a.comment=J(),a.filename=r.filename,Z("{",!0)){for(;"}"!==(e=X());){var o=i(e);if(!F(a,e))switch(o){case "map":!function(t){Z("<");var e=X();if(d.mapKey[e]===undefined)throw C(e,"type");Z(",");var n=X();if(!b.test(n))throw C(n,"type");Z(">");var i=X();if(!S.test(i))throw C(i,"name");i=et(i),Z("=");var a=new u(i,A(X()),e,n),o=K.line();a.comment=J(),a.filename=r.filename,B(a),a.comment||(a.comment=J(o));t.add(a);}(a);break;case "required":case "optional":case "repeated":V(a,o);break;case "oneof":!function(t,e){var n=X();if(!S.test(n))throw C(n,"name");n=et(n);var i=new h(n),a=K.line();if(i.comment=J(),i.filename=r.filename,Z("{",!0)){for(;"}"!==(e=X());){"option"===e?(N(i,e),Z(";")):(Y(e),V(i,"optional"));}
Z(";",!0);}else Z(";"),i.comment||(i.comment=J(a));t.add(i);}(a,o);break;case "extensions":M(a.extensions||(a.extensions=[]));break;case "reserved":M(a.reserved||(a.reserved=[]),!0);break;default:if(!Q||!b.test(e))throw C(e);Y(e),V(a,"optional");}}
Z(";",!0);}else Z(";");t.add(a);}(t,e),!0;case "enum":return function(t,e){var n=X();if(!S.test(n))throw C(n,"name");var a=new c(n);if(a.comment=J(),a.filename=r.filename,Z("{",!0)){for(;"}"!==(e=X());){"option"===i(e)?(N(a,e),Z(";")):function(t,e){if(!S.test(e))throw C(e,"name");var n=e;Z("=");var i=A(X(),!0),r=K.line();t.add(n,i,J()),B({}),t.comments[n]||(t.comments[n]=J(r));}(a,e);}
Z(";",!0);}else Z(";");t.add(a);}(t,e),!0;case "service":return function(t,e){if(e=X(),!S.test(e))throw C(e,"service name");var n=new _(e);if(n.comment=J(),n.filename=r.filename,Z("{",!0)){for(;"}"!==(e=X());){var a=i(e);switch(a){case "option":N(n,a),Z(";");break;case "rpc":!function(t,e){var n=e,a=X();if(!S.test(a))throw C(a,"name");var o,s,l,u;Z("("),Z("stream",!0)&&(s=!0);if(!b.test(e=X()))throw C(e);o=e,Z(")"),Z("returns"),Z("("),Z("stream",!0)&&(u=!0);if(!b.test(e=X()))throw C(e);l=e,Z(")");var h=new f(a,n,o,l,s,u),c=K.line();if(h.comment=J(),h.filename=r.filename,Z("{",!0)){for(;"}"!==(e=X());){var _=i(e);switch(_){case "option":N(h,_),Z(";");break;default:throw C(e);}}
Z(";",!0);}else Z(";"),h.comment||(h.comment=J(c));t.add(h);}(n,a);break;default:throw C(e);}}
Z(";",!0);}else Z(";");t.add(n);}(t,e),!0;case "extend":return function(t,e){var n=X();if(!b.test(n))throw C(n,"reference");if(Z("{",!0)){for(;"}"!==(e=X());){var r=i(e);switch(r){case "required":case "repeated":case "optional":V(t,r,n);break;default:if(!Q||!b.test(e))throw C(e);Y(e),V(t,"optional",n);}}
Z(";",!0);}else Z(";");}(t,e),!0;}
return!1;}
function V(t,e,n){var a=X();if("group"!==a){if(!b.test(a))throw C(a,"type");var o=X();if(!S.test(o))throw C(o,"name");o=et(o),Z("=");var u=new l(o,A(X()),a,e,n),h=K.line();u.comment=J(),u.filename=r.filename,B(u),u.comment||(u.comment=J(h)),!Q&&u.repeated&&u.setOption("packed",!1,!0),t.add(u);}else!function(t,e){var n=X();if(!S.test(n))throw C(n,"name");var a=p.lcFirst(n);n===a&&(n=p.ucFirst(n));Z("=");var o=A(X()),u=new s(n);u.group=!0,u.comment=J();var h=new l(a,o,n,e);u.filename=h.filename=r.filename,Z("{");for(;"}"!==(W=X());){switch(W=i(W)){case "option":N(u,W),Z(";");break;case "required":case "optional":case "repeated":V(u,W);break;default:throw C(W);}}
Z(";",!0),t.add(u).add(h);}(t,e);}
function N(t,e){var n=Z("(",!0),i=X();if(!b.test(i))throw C(i,"name");n&&(Z(")"),i="("+i+")",e=q(),w.test(e)&&(i+=e,X())),Z("="),U(t,i);}
function U(t,e){if(Z("{",!0))do{if(!S.test(W=X()))throw C(W,"name");"{"===q()?U(t,e+"."+W):(Z(":"),G(t,e+"."+W,P(!0)));}while(!Z("}",!0));else G(t,e,P(!0));}
function G(t,e,n){t.setOption&&t.setOption(e,n);}
function B(t){if(Z("[",!0)){do{N(t,"option");}while(Z(",",!0));Z("]");}
return Z(";"),t;}
e instanceof o||(n=e,e=new o()),n||(n=r.defaults);for(var k,H,z,j,W,K=a(t),X=K.next,Y=K.push,q=K.peek,Z=K.skip,J=K.cmnt,$=!0,Q=!1,tt=e,et=n.keepCase?function(t){return t;}:function(t){return t.substring(0,1)+t.substring(1).replace(D,function(t,e){return e.toUpperCase();});};null!==(W=X());){switch(i(W)){case "package":if(!$)throw C(W);O();break;case "import":if(!$)throw C(W);R();break;case "syntax":if(!$)throw C(W);L();break;case "option":if(!$)throw C(W);N(tt,W),Z(";");break;default:if(F(tt,W)){$=!1;continue;}
throw C(W);}}
return r.filename=null,{package:k,imports:H,weakImports:z,syntax:j,root:e};}
e.exports=r,r.filename=null,r.defaults={keepCase:!1};var a=t(33),o=t(29),s=t(34),l=t(16),u=t(20),h=t(25),c=t(15),_=t(32),f=t(22),d=t(35),p=t(36),m=/^[1-9][0-9]*$/,g=/^-?[1-9][0-9]*$/,y=/^0[x][0-9a-f]+$/,v=/^-?0[x][0-9a-f]+$/,I=/^0[0-7]+$/,x=/^-?0[0-7]+$/,T=/^(?!e)[0-9]*(?:\.[0-9]*)?(?:[e][+-]?[0-9]+)?$/,S=/^[a-zA-Z_][a-zA-Z_0-9]*$/,b=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,w=/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,D=/_([a-z])(?=[a-z]|$)/g;},{15:15,16:16,20:20,22:22,25:25,29:29,32:32,33:33,34:34,35:35,36:36}],27:[function(t,e,n){function i(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len);}
function r(t){this.buf=t,this.pos=0,this.len=t.length;}
function a(){var t=new h(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw i(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;}
return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t;}
for(;e<4;++e){if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;}
if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e){if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t;}}else for(;e<5;++e){if(this.pos>=this.len)throw i(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t;}
throw Error("invalid varint encoding");}
function o(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0;}
function s(){if(this.pos+8>this.len)throw i(this,8);return new h(o(this.buf,this.pos+=4),o(this.buf,this.pos+=4));}
e.exports=r;var l,u=t(38),h=u.LongBits,c=u.utf8,_="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new r(t);throw Error("illegal buffer");}:function(t){if(Array.isArray(t))return new r(t);throw Error("illegal buffer");};r.create=u.Buffer?function(t){return(r.create=function(t){return u.Buffer.isBuffer(t)?new l(t):_(t);})(t);}:_,r.prototype._slice=u.Array.prototype.subarray||u.Array.prototype.slice,r.prototype.uint32=function(){var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,i(this,10);return t;};}(),r.prototype.int32=function(){return 0|this.uint32();},r.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0;},r.prototype.bool=function(){return 0!==this.uint32();},r.prototype.fixed32=function(){if(this.pos+4>this.len)throw i(this,4);return o(this.buf,this.pos+=4);},r.prototype.sfixed32=function(){if(this.pos+4>this.len)throw i(this,4);return 0|o(this.buf,this.pos+=4);};var f="undefined"!=typeof Float32Array?function(){var t=new Float32Array(1),e=new Uint8Array(t.buffer);return t[0]=-0,e[3]?function(n,i){return e[0]=n[i],e[1]=n[i+1],e[2]=n[i+2],e[3]=n[i+3],t[0];}:function(n,i){return e[0]=n[i+3],e[1]=n[i+2],e[2]=n[i+1],e[3]=n[i],t[0];};}():function(t,e){var n=o(t,e+4),i=2*(n>>31)+1,r=n>>>23&255,a=8388607&n;return 255===r?a?NaN:i*(1/0):0===r?1.401298464324817e-45*i*a:i*Math.pow(2,r-150)*(a+8388608);};r.prototype.float=function(){if(this.pos+4>this.len)throw i(this,4);var t=f(this.buf,this.pos);return this.pos+=4,t;};var d="undefined"!=typeof Float64Array?function(){var t=new Float64Array(1),e=new Uint8Array(t.buffer);return t[0]=-0,e[7]?function(n,i){return e[0]=n[i],e[1]=n[i+1],e[2]=n[i+2],e[3]=n[i+3],e[4]=n[i+4],e[5]=n[i+5],e[6]=n[i+6],e[7]=n[i+7],t[0];}:function(n,i){return e[0]=n[i+7],e[1]=n[i+6],e[2]=n[i+5],e[3]=n[i+4],e[4]=n[i+3],e[5]=n[i+2],e[6]=n[i+1],e[7]=n[i],t[0];};}():function(t,e){var n=o(t,e+4),i=o(t,e+8),r=2*(i>>31)+1,a=i>>>20&2047,s=4294967296*(1048575&i)+n;return 2047===a?s?NaN:r*(1/0):0===a?5e-324*r*s:r*Math.pow(2,a-1075)*(s+4503599627370496);};r.prototype.double=function(){if(this.pos+8>this.len)throw i(this,4);var t=d(this.buf,this.pos);return this.pos+=8,t;},r.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw i(this,t);return this.pos+=t,e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n);},r.prototype.string=function(){var t=this.bytes();return c.read(t,0,t.length);},r.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw i(this,t);this.pos+=t;}else do{if(this.pos>=this.len)throw i(this);}while(128&this.buf[this.pos++]);return this;},r.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;;){if(4==(t=7&this.uint32()))break;this.skipType(t);}
break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos);}
return this;},r._configure=function(t){l=t;var e=u.Long?"toLong":"toNumber";u.merge(r.prototype,{int64:function t(){return a.call(this)[e](!1);},uint64:function t(){return a.call(this)[e](!0);},sint64:function t(){return a.call(this).zzDecode()[e](!1);},fixed64:function t(){return s.call(this)[e](!0);},sfixed64:function t(){return s.call(this)[e](!1);}});};},{38:38}],28:[function(t,e,n){function i(t){r.call(this,t);}
e.exports=i;var r=t(27);(i.prototype=Object.create(r.prototype)).constructor=i;var a=t(38);a.Buffer&&(i.prototype._slice=a.Buffer.prototype.slice),i.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len));};},{27:27,38:38}],29:[function(t,e,n){function i(t){o.call(this,"",t),this.deferred=[],this.files=[];}
function r(){}
function a(t,e){var n=e.parent.lookup(e.extend);if(n){var i=new h(e.fullName,e.id,e.type,e.rule,undefined,e.options);return i.declaringField=e,e.extensionField=i,n.add(i),!0;}
return!1;}
e.exports=i;var o=t(23);((i.prototype=Object.create(o.prototype)).constructor=i).className="Root";var s,l,u,h=t(16),c=t(15),_=t(36);i.fromJSON=function(t,e){return e||(e=new i()),t.options&&e.setOptions(t.options),e.addJSON(t.nested);},i.prototype.resolvePath=_.path.resolve,i.prototype.load=function t(e,n,i){function a(t,e){if(i){var n=i;if(i=null,c)throw t;n(t,e);}}
function o(t,e){try{if(_.isString(e)&&"{"===e.charAt(0)&&(e=JSON.parse(e)),_.isString(e)){l.filename=t;var i,r=l(e,h,n),o=0;if(r.imports)for(;o<r.imports.length;++o){(i=h.resolvePath(t,r.imports[o]))&&s(i);}
if(r.weakImports)for(o=0;o<r.weakImports.length;++o){(i=h.resolvePath(t,r.weakImports[o]))&&s(i,!0);}}else h.setOptions(e.options).addJSON(e.nested);}catch(t){a(t);}
c||f||a(null,h);}
function s(t,e){var n=t.lastIndexOf("google/protobuf/");if(n>-1){var r=t.substring(n);r in u&&(t=r);}
if(!(h.files.indexOf(t)>-1))if(h.files.push(t),t in u)c?o(t,u[t]):(++f,setTimeout(function(){--f,o(t,u[t]);}));else if(c){var s;try{s=_.fs.readFileSync(t).toString("utf8");}catch(t){return void(e||a(t));}
o(t,s);}else++f,_.fetch(t,function(n,r){--f,i&&(n?e?f||a(null,h):a(n):o(t,r));});}
"function"==typeof n&&(i=n,n=undefined);var h=this;if(!i)return _.asPromise(t,h,e,n);var c=i===r,f=0;_.isString(e)&&(e=[e]);for(var d,p=0;p<e.length;++p){(d=h.resolvePath("",e[p]))&&s(d);}
return c?h:(f||a(null,h),undefined);},i.prototype.loadSync=function(t,e){if(!_.isNode)throw Error("not supported");return this.load(t,e,r);},i.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(t){return "'extend "+t.extend+"' in "+t.parent.fullName;}).join(", "));return o.prototype.resolveAll.call(this);};var f=/^[A-Z]/;i.prototype._handleAdd=function(t){if(t instanceof h)t.extend===undefined||t.extensionField||a(0,t)||this.deferred.push(t);else if(t instanceof c)f.test(t.name)&&(t.parent[t.name]=t.values);else{if(t instanceof s)for(var e=0;e<this.deferred.length;){a(0,this.deferred[e])?this.deferred.splice(e,1):++e;}
for(var n=0;n<t.nestedArray.length;++n){this._handleAdd(t._nestedArray[n]);}
f.test(t.name)&&(t.parent[t.name]=t);}},i.prototype._handleRemove=function(t){if(t instanceof h){if(t.extend!==undefined)if(t.extensionField)t.extensionField.parent.remove(t.extensionField),t.extensionField=null;else{var e=this.deferred.indexOf(t);e>-1&&this.deferred.splice(e,1);}}else if(t instanceof c)f.test(t.name)&&delete t.parent[t.name];else if(t instanceof o){for(var n=0;n<t.nestedArray.length;++n){this._handleRemove(t._nestedArray[n]);}
f.test(t.name)&&delete t.parent[t.name];}},i._configure=function(t,e,n){s=t,l=e,u=n;};},{15:15,16:16,23:23,36:36}],30:[function(t,e,n){n.Service=t(31);},{31:31}],31:[function(t,e,n){function i(t,e,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n);}
e.exports=i;var r=t(38);(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function t(e,n,i,a,o){if(!a)throw TypeError("request must be specified");var s=this;if(!o)return r.asPromise(t,s,e,n,i,a);if(!s.rpcImpl)return setTimeout(function(){o(Error("already ended"));},0),undefined;try{return s.rpcImpl(e,n[s.requestDelimited?"encodeDelimited":"encode"](a).finish(),function(t,n){if(t)return s.emit("error",t,e),o(t);if(null===n)return s.end(!0),undefined;if(!(n instanceof i))try{n=i[s.responseDelimited?"decodeDelimited":"decode"](n);}catch(t){return s.emit("error",t,e),o(t);}
return s.emit("data",n,e),o(null,n);});}catch(t){return s.emit("error",t,e),setTimeout(function(){o(t);},0),undefined;}},i.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this;};},{38:38}],32:[function(t,e,n){function i(t,e){a.call(this,t,e),this.methods={},this._methodsArray=null;}
function r(t){return t._methodsArray=null,t;}
e.exports=i;var a=t(23);((i.prototype=Object.create(a.prototype)).constructor=i).className="Service";var o=t(22),s=t(36),l=t(30);i.fromJSON=function(t,e){var n=new i(t,e.options);if(e.methods)for(var r=Object.keys(e.methods),a=0;a<r.length;++a){n.add(o.fromJSON(r[a],e.methods[r[a]]));}
return n;},Object.defineProperty(i.prototype,"methodsArray",{get:function t(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods));}}),i.prototype.toJSON=function(){var t=a.prototype.toJSON.call(this);return{options:t&&t.options||undefined,methods:a.arrayToJSON(this.methodsArray)||{},nested:t&&t.nested||undefined};},i.prototype.get=function(t){return this.methods[t]||a.prototype.get.call(this,t);},i.prototype.resolveAll=function(){for(var t=this.methodsArray,e=0;e<t.length;++e){t[e].resolve();}
return a.prototype.resolve.call(this);},i.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof o?(this.methods[t.name]=t,t.parent=this,r(this)):a.prototype.add.call(this,t);},i.prototype.remove=function(t){if(t instanceof o){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,r(this);}
return a.prototype.remove.call(this,t);},i.prototype.create=function(t,e,n){for(var i=new l.Service(t,e,n),r=0;r<this.methodsArray.length;++r){i[s.lcFirst(this._methodsArray[r].resolve().name)]=s.codegen("r","c")("return this.rpcCall(m,q,s,r,c)").eof(s.lcFirst(this._methodsArray[r].name),{m:this._methodsArray[r],q:this._methodsArray[r].resolvedRequestType.ctor,s:this._methodsArray[r].resolvedResponseType.ctor});}
return i;};},{22:22,23:23,30:30,36:36}],33:[function(t,e,n){function i(t){return t.replace(c,function(t,e){switch(e){case "\\":case "":return e;default:return _[e]||"";}});}
function r(t){function e(t){return Error("illegal "+t+" (line "+m+")");}
function n(e){return t.charAt(e);}
function r(e,n){g=t.charAt(e++),v=m;for(var i=t.substring(e,n).split(u),r=0;r<i.length;++r){i[r]=i[r].replace(l,"").trim();}
y=i.join("\n").trim();}
function c(){if(I.length>0)return I.shift();if(x)return function(){var n="'"===x?s:o;n.lastIndex=d-1;var r=n.exec(t);if(!r)throw e("string");return d=n.lastIndex,_(x),x=null,i(r[1]);}();var l,u,c,f,g;do{if(d===p)return null;for(l=!1;h.test(c=n(d));){if("\n"===c&&++m,++d===p)return null;}
if("/"===n(d)){if(++d===p)throw e("comment");if("/"===n(d)){for(g="/"===n(f=d+1);"\n"!==n(++d);){if(d===p)return null;}
++d,g&&r(f,d-1),++m,l=!0;}else{if("*"!==(c=n(d)))return "/";g="*"===n(f=d+1);do{if("\n"===c&&++m,++d===p)throw e("comment");u=c,c=n(d);}while("*"!==u||"/"!==c);++d,g&&r(f,d-2),l=!0;}}}while(l);var y=d;a.lastIndex=0;if(!a.test(n(y++)))for(;y<p&&!a.test(n(y));){++y;}
var v=t.substring(d,d=y);return '"'!==v&&"'"!==v||(x=v),v;}
function _(t){I.push(t);}
function f(){if(!I.length){var t=c();if(null===t)return null;_(t);}
return I[0];}
var d=0,p=(t=t.toString()).length,m=1,g=null,y=null,v=0,I=[],x=null;return{next:c,peek:f,push:_,skip:function t(n,i){var r=f();if(r===n)return c(),!0;if(!i)throw e("token '"+r+"', '"+n+"' expected");return!1;},line:function t(){return m;},cmnt:function t(e){var n;return e===undefined?n=v===m-1&&y||null:(y||f(),n=v===e&&"/"===g&&y||null),n&&(g=y=null,v=0),n;}};}
e.exports=r;var a=/[\s{}=;:[\],'"()<>]/g,o=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,s=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,l=/^ *[*/]+ */,u=/\n/g,h=/\s/,c=/\\(.?)/g,_={0:"\0",r:"\r",n:"\n",t:"\t"};r.unescape=i;},{}],34:[function(t,e,n){function i(t,e){a.call(this,t,e),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null;}
function r(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=t._ctor=null,delete t.encode,delete t.decode,delete t.verify,t;}
e.exports=i;var a=t(23);((i.prototype=Object.create(a.prototype)).constructor=i).className="Type";var o=t(15),s=t(25),l=t(16),u=t(20),h=t(32),c=t(10),_=t(21),f=t(27),d=t(40),p=t(36),m=t(14),g=t(13),y=t(39),v=t(12);i.fromJSON=function(t,e){var n=new i(t,e.options);n.extensions=e.extensions,n.reserved=e.reserved;for(var r=Object.keys(e.fields),c=0;c<r.length;++c){n.add((void 0!==e.fields[r[c]].keyType?u.fromJSON:l.fromJSON)(r[c],e.fields[r[c]]));}
if(e.oneofs)for(r=Object.keys(e.oneofs),c=0;c<r.length;++c){n.add(s.fromJSON(r[c],e.oneofs[r[c]]));}
if(e.nested)for(r=Object.keys(e.nested),c=0;c<r.length;++c){var _=e.nested[r[c]];n.add((_.id!==undefined?l.fromJSON:_.fields!==undefined?i.fromJSON:_.values!==undefined?o.fromJSON:_.methods!==undefined?h.fromJSON:a.fromJSON)(r[c],_));}
return e.extensions&&e.extensions.length&&(n.extensions=e.extensions),e.reserved&&e.reserved.length&&(n.reserved=e.reserved),e.group&&(n.group=!0),n;},Object.defineProperties(i.prototype,{fieldsById:{get:function t(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),n=0;n<e.length;++n){var i=this.fields[e[n]],r=i.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=i;}
return this._fieldsById;}},fieldsArray:{get:function t(){return this._fieldsArray||(this._fieldsArray=p.toArray(this.fields));}},oneofsArray:{get:function t(){return this._oneofsArray||(this._oneofsArray=p.toArray(this.oneofs));}},ctor:{get:function t(){return this._ctor||(this._ctor=c(this).constructor);},set:function t(e){if(e&&!(e.prototype instanceof _))throw TypeError("ctor must be a Message constructor");e.from||(e.from=_.from),this._ctor=e;}}}),i.prototype.toJSON=function(){var t=a.prototype.toJSON.call(this);return{options:t&&t.options||undefined,oneofs:a.arrayToJSON(this.oneofsArray),fields:a.arrayToJSON(this.fieldsArray.filter(function(t){return!t.declaringField;}))||{},extensions:this.extensions&&this.extensions.length?this.extensions:undefined,reserved:this.reserved&&this.reserved.length?this.reserved:undefined,group:this.group||undefined,nested:t&&t.nested||undefined};},i.prototype.resolveAll=function(){for(var t=this.fieldsArray,e=0;e<t.length;){t[e++].resolve();}
var n=this.oneofsArray;for(e=0;e<n.length;){n[e++].resolve();}
return a.prototype.resolve.call(this);},i.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null;},i.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof l&&t.extend===undefined){if(this._fieldsById?this._fieldsById[t.id]:this.fieldsById[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),this.fields[t.name]=t,t.message=this,t.onAdd(this),r(this);}
return t instanceof s?(this.oneofs||(this.oneofs={}),this.oneofs[t.name]=t,t.onAdd(this),r(this)):a.prototype.add.call(this,t);},i.prototype.remove=function(t){if(t instanceof l&&t.extend===undefined){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),r(this);}
if(t instanceof s){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),r(this);}
return a.prototype.remove.call(this,t);},i.prototype.isReservedId=function(t){if(this.reserved)for(var e=0;e<this.reserved.length;++e){if("string"!=typeof this.reserved[e]&&this.reserved[e][0]<=t&&this.reserved[e][1]>=t)return!0;}
return!1;},i.prototype.isReservedName=function(t){if(this.reserved)for(var e=0;e<this.reserved.length;++e){if(this.reserved[e]===t)return!0;}
return!1;},i.prototype.create=function(t){return new this.ctor(t);},i.prototype.setup=function(){for(var t=this.fullName,e=[],n=0;n<this.fieldsArray.length;++n){e.push(this._fieldsArray[n].resolve().resolvedType);}
return this.encode=m(this).eof(t+"$encode",{Writer:d,types:e,util:p}),this.decode=g(this).eof(t+"$decode",{Reader:f,types:e,util:p}),this.verify=y(this).eof(t+"$verify",{types:e,util:p}),this.fromObject=this.from=v.fromObject(this).eof(t+"$fromObject",{types:e,util:p}),this.toObject=v.toObject(this).eof(t+"$toObject",{types:e,util:p}),this;},i.prototype.encode=function(t,e){return this.setup().encode(t,e);},i.prototype.encodeDelimited=function(t,e){return this.encode(t,e&&e.len?e.fork():e).ldelim();},i.prototype.decode=function(t,e){return this.setup().decode(t,e);},i.prototype.decodeDelimited=function(t){return t instanceof f||(t=f.create(t)),this.decode(t,t.uint32());},i.prototype.verify=function(t){return this.setup().verify(t);},i.prototype.fromObject=function(t){return this.setup().fromObject(t);},i.prototype.from=i.prototype.fromObject,i.prototype.toObject=function(t,e){return this.setup().toObject(t,e);};},{10:10,12:12,13:13,14:14,15:15,16:16,20:20,21:21,23:23,25:25,27:27,32:32,36:36,39:39,40:40}],35:[function(t,e,n){function i(t,e){var n=0,i={};for(e|=0;n<t.length;){i[o[n+e]]=t[n++];}
return i;}
var r=n,a=t(36),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];r.basic=i([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=i([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",a.emptyArray,null]),r.long=i([0,0,0,1,1],7),r.mapKey=i([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=i([1,5,0,0,0,5,5,0,0,0,1,1,0]);},{36:36}],36:[function(t,e,n){var i=e.exports=t(38);i.codegen=t(3),i.fetch=t(5),i.path=t(7),i.fs=i.inquire("fs"),i.toArray=function(t){var e=[];if(t)for(var n=Object.keys(t),i=0;i<n.length;++i){e.push(t[n[i]]);}
return e;};var r=/\\/g,a=/"/g;i.safeProp=function(t){return '["'+t.replace(r,"\\\\").replace(a,'\\"')+'"]';},i.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1);};},{3:3,38:38,5:5,7:7}],37:[function(t,e,n){function i(t,e){this.lo=t>>>0,this.hi=e>>>0;}
e.exports=i;var r=t(38),a=i.zero=new i(0,0);a.toNumber=function(){return 0;},a.zzEncode=a.zzDecode=function(){return this;},a.length=function(){return 1;};var o=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return a;var e=t<0;e&&(t=-t);var n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r);},i.from=function(t){if("number"==typeof t)return i.fromNumber(t);if(r.isString(t)){if(!r.Long)return i.fromNumber(parseInt(t,10));t=r.Long.fromString(t);}
return t.low||t.high?new i(t.low>>>0,t.high>>>0):a;},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n);}
return this.lo+4294967296*this.hi;},i.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)};};var s=String.prototype.charCodeAt;i.fromHash=function(t){return t===o?a:new i((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0);},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24);},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this;},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this;},i.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10;};},{38:38}],38:[function(t,e,n){function i(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;++r){t[i[r]]!==undefined&&n||(t[i[r]]=e[i[r]]);}
return t;}
function r(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function e(){return t;}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&i(this,n);}
return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function e(){return t;}}),e.prototype.toString=function(){return this.name+": "+this.message;},e;}
var a=n;a.asPromise=t(1),a.base64=t(2),a.EventEmitter=t(4),a.inquire=t(6),a.utf8=t(9),a.pool=t(8),a.LongBits=t(37),a.emptyArray=Object.freeze?Object.freeze([]):[],a.emptyObject=Object.freeze?Object.freeze({}):{},a.isNode=Boolean(global.process&&global.process.versions&&global.process.versions.node),a.isInteger=Number.isInteger||function(t){return "number"==typeof t&&isFinite(t)&&Math.floor(t)===t;},a.isString=function(t){return "string"==typeof t||t instanceof String;},a.isObject=function(t){return t&&"object"==(0,_typeof2.default)(t);},a.Buffer=function(){try{var t=a.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null;}catch(t){return null;}}(),a._Buffer_from=null,a._Buffer_allocUnsafe=null,a.newBuffer=function(t){return "number"==typeof t?a.Buffer?a._Buffer_allocUnsafe(t):new a.Array(t):a.Buffer?a._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t);},a.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,a.Long=global.dcodeIO&&global.dcodeIO.Long||a.inquire("long"),a.key2Re=/^true|false|0|1$/,a.key32Re=/^-?(?:0|[1-9][0-9]*)$/,a.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,a.longToHash=function(t){return t?a.LongBits.from(t).toHash():a.LongBits.zeroHash;},a.longFromHash=function(t,e){var n=a.LongBits.fromHash(t);return a.Long?a.Long.fromBits(n.lo,n.hi,e):n.toNumber(Boolean(e));},a.merge=i,a.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1);},a.newError=r,a.ProtocolError=r("ProtocolError"),a.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n){e[t[n]]=1;}
return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n){if(1===e[t[n]]&&this[t[n]]!==undefined&&null!==this[t[n]])return t[n];}};},a.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n){t[n]!==e&&delete this[t[n]];}};},a.lazyResolve=function(t,e){for(var n=0;n<e.length;++n){for(var i=Object.keys(e[n]),r=0;r<i.length;++r){for(var a=e[n][i[r]].split("."),o=t;a.length;){o=o[a.shift()];}
e[n][i[r]]=o;}}},a.toJSONOptions={longs:String,enums:String,bytes:String},a._configure=function(){var t=a.Buffer;t?(a._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,n){return new t(e,n);},a._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e);}):a._Buffer_from=a._Buffer_allocUnsafe=null;};},{1:1,2:2,37:37,4:4,6:6,8:8,9:9}],39:[function(t,e,n){function i(t,e){return t.name+": "+e+(t.repeated&&"array"!==e?"[]":t.map&&"object"!==e?"{k:"+t.keyType+"}":"")+" expected";}
function r(t,e,n,r){if(e.resolvedType){if(e.resolvedType instanceof o){t("switch(%s){",r)("default:")("return%j",i(e,"enum value"));for(var a=Object.keys(e.resolvedType.values),s=0;s<a.length;++s){t("case %d:",e.resolvedType.values[a[s]]);}
t("break")("}");}else t("var e=types[%d].verify(%s);",n,r)("if(e)")("return%j+e",e.name+".");}else switch(e.type){case "int32":case "uint32":case "sint32":case "fixed32":case "sfixed32":t("if(!util.isInteger(%s))",r)("return%j",i(e,"integer"));break;case "int64":case "uint64":case "sint64":case "fixed64":case "sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",r,r,r,r)("return%j",i(e,"integer|Long"));break;case "float":case "double":t('if(typeof %s!=="number")',r)("return%j",i(e,"number"));break;case "bool":t('if(typeof %s!=="boolean")',r)("return%j",i(e,"boolean"));break;case "string":t("if(!util.isString(%s))",r)("return%j",i(e,"string"));break;case "bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',r,r,r)("return%j",i(e,"buffer"));}
return t;}
function a(t,e,n){switch(e.keyType){case "int32":case "uint32":case "sint32":case "fixed32":case "sfixed32":t("if(!util.key32Re.test(%s))",n)("return%j",i(e,"integer key"));break;case "int64":case "uint64":case "sint64":case "fixed64":case "sfixed64":t("if(!util.key64Re.test(%s))",n)("return%j",i(e,"integer|Long key"));break;case "bool":t("if(!util.key2Re.test(%s))",n)("return%j",i(e,"boolean key"));}
return t;}
e.exports=function(t){for(var e=s.codegen("m")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n=0;n<t.fieldsArray.length;++n){var l=t._fieldsArray[n].resolve(),u="m"+s.safeProp(l.name);l.map?(e("if(%s!==undefined){",u)("if(!util.isObject(%s))",u)("return%j",i(l,"object"))("var k=Object.keys(%s)",u)("for(var i=0;i<k.length;++i){"),a(e,l,"k[i]"),r(e,l,n,u+"[k[i]]")("}")("}")):l.repeated?(e("if(%s!==undefined){",u)("if(!Array.isArray(%s))",u)("return%j",i(l,"array"))("for(var i=0;i<%s.length;++i){",u),r(e,l,n,u+"[i]")("}")("}")):(l.required||(!l.resolvedType||l.resolvedType instanceof o?e("if(%s!==undefined){",u):e("if(%s!==undefined&&%s!==null){",u,u)),r(e,l,n,u),l.required||e("}"));}
return e("return null");};var o=t(15),s=t(36);},{15:15,36:36}],40:[function(t,e,n){function i(t,e,n){this.fn=t,this.len=e,this.next=undefined,this.val=n;}
function r(){}
function a(){this.len=0,this.head=new i(r,0,0),this.tail=this.head,this.states=null;}
function o(t,e,n){e[n]=255&t;}
function s(t,e){this.len=t,this.next=undefined,this.val=e;}
function l(t,e,n){for(;t.hi;){e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;}
for(;t.lo>127;){e[n++]=127&t.lo|128,t.lo=t.lo>>>7;}
e[n++]=t.lo;}
function u(t,e,n){e[n++]=255&t,e[n++]=t>>>8&255,e[n++]=t>>>16&255,e[n]=t>>>24;}
e.exports=a;var h,c=t(38),_=c.LongBits,f=c.base64,d=c.utf8;a.create=c.Buffer?function(){return(a.create=function(){return new h();})();}:function(){return new a();},a.alloc=function(t){return new c.Array(t);},c.Array!==Array&&(a.alloc=c.pool(a.alloc,c.Array.prototype.subarray)),a.prototype.push=function(t,e,n){return this.tail=this.tail.next=new i(t,e,n),this.len+=e,this;},(s.prototype=Object.create(i.prototype)).fn=function(t,e,n){for(;t>127;){e[n++]=127&t|128,t>>>=7;}
e[n]=t;},a.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new s((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this;},a.prototype.int32=function(t){return t<0?this.push(l,10,_.fromNumber(t)):this.uint32(t);},a.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0);},a.prototype.uint64=function(t){var e=_.from(t);return this.push(l,e.length(),e);},a.prototype.int64=a.prototype.uint64,a.prototype.sint64=function(t){var e=_.from(t).zzEncode();return this.push(l,e.length(),e);},a.prototype.bool=function(t){return this.push(o,1,t?1:0);},a.prototype.fixed32=function(t){return this.push(u,4,t>>>0);},a.prototype.sfixed32=a.prototype.fixed32,a.prototype.fixed64=function(t){var e=_.from(t);return this.push(u,4,e.lo).push(u,4,e.hi);},a.prototype.sfixed64=a.prototype.fixed64;var p="undefined"!=typeof Float32Array?function(){var t=new Float32Array(1),e=new Uint8Array(t.buffer);return t[0]=-0,e[3]?function(n,i,r){t[0]=n,i[r++]=e[0],i[r++]=e[1],i[r++]=e[2],i[r]=e[3];}:function(n,i,r){t[0]=n,i[r++]=e[3],i[r++]=e[2],i[r++]=e[1],i[r]=e[0];};}():function(t,e,n){var i=t<0?1:0;if(i&&(t=-t),0===t)u(1/t>0?0:2147483648,e,n);else if(isNaN(t))u(2147483647,e,n);else if(t>3.4028234663852886e38)u((i<<31|2139095040)>>>0,e,n);else if(t<1.1754943508222875e-38)u((i<<31|Math.round(t/1.401298464324817e-45))>>>0,e,n);else{var r=Math.floor(Math.log(t)/Math.LN2);u((i<<31|r+127<<23|8388607&Math.round(t*Math.pow(2,-r)*8388608))>>>0,e,n);}};a.prototype.float=function(t){return this.push(p,4,t);};var m="undefined"!=typeof Float64Array?function(){var t=new Float64Array(1),e=new Uint8Array(t.buffer);return t[0]=-0,e[7]?function(n,i,r){t[0]=n,i[r++]=e[0],i[r++]=e[1],i[r++]=e[2],i[r++]=e[3],i[r++]=e[4],i[r++]=e[5],i[r++]=e[6],i[r]=e[7];}:function(n,i,r){t[0]=n,i[r++]=e[7],i[r++]=e[6],i[r++]=e[5],i[r++]=e[4],i[r++]=e[3],i[r++]=e[2],i[r++]=e[1],i[r]=e[0];};}():function(t,e,n){var i=t<0?1:0;if(i&&(t=-t),0===t)u(0,e,n),u(1/t>0?0:2147483648,e,n+4);else if(isNaN(t))u(4294967295,e,n),u(2147483647,e,n+4);else if(t>1.7976931348623157e308)u(0,e,n),u((i<<31|2146435072)>>>0,e,n+4);else{var r;if(t<2.2250738585072014e-308)u((r=t/5e-324)>>>0,e,n),u((i<<31|r/4294967296)>>>0,e,n+4);else{var a=Math.floor(Math.log(t)/Math.LN2);1024===a&&(a=1023),u(4503599627370496*(r=t*Math.pow(2,-a))>>>0,e,n),u((i<<31|a+1023<<20|1048576*r&1048575)>>>0,e,n+4);}}};a.prototype.double=function(t){return this.push(m,8,t);};var g=c.Array.prototype.set?function(t,e,n){e.set(t,n);}:function(t,e,n){for(var i=0;i<t.length;++i){e[n+i]=t[i];}};a.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this.push(o,1,0);if(c.isString(t)){var n=a.alloc(e=f.length(t));f.decode(t,n,0),t=n;}
return this.uint32(e).push(g,e,t);},a.prototype.string=function(t){var e=d.length(t);return e?this.uint32(e).push(d.write,e,t):this.push(o,1,0);},a.prototype.fork=function(){return this.states=new function(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states;}(this),this.head=this.tail=new i(r,0,0),this.len=0,this;},a.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new i(r,0,0),this.len=0),this;},a.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this;},a.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;){t.fn(t.val,e,n),n+=t.len,t=t.next;}
return e;},a._configure=function(t){h=t;};},{38:38}],41:[function(t,e,n){function i(){a.call(this);}
function r(t,e,n){t.length<40?o.utf8.write(t,e,n):e.utf8Write(t,n);}
e.exports=i;var a=t(40);(i.prototype=Object.create(a.prototype)).constructor=i;var o=t(38),s=o.Buffer;i.alloc=function(t){return(i.alloc=o._Buffer_allocUnsafe)(t);};var l=s&&s.prototype instanceof Uint8Array&&"set"===s.prototype.set.name?function(t,e,n){e.set(t,n);}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var i=0;i<t.length;){e[n++]=t[i++];}};i.prototype.bytes=function(t){o.isString(t)&&(t=o._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this.push(l,e,t),this;},i.prototype.string=function(t){var e=s.byteLength(t);return this.uint32(e),e&&this.push(r,e,t),this;};},{38:38,40:40}]},{},[19]);}("object"==(false?undefined:(0,_typeof2.default)(window))&&window||"object"==(typeof self==="undefined"?"undefined":(0,_typeof2.default)(self))&&self||void 0),function(t,e){"object"==(false?undefined:(0,_typeof2.default)(exports))&&"undefined"!=typeof module?module.exports=e(t):"function"==typeof window.define&&window.define.amd?window.define(e):e(t);}("undefined"!=typeof self?self:true?window:undefined,function(t){"use strict";var e,n=t.Base64;if(true&&module.exports)try{e=__webpack_require__(19).Buffer;}catch(t){}
var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(t){for(var e={},n=0,i=t.length;n<i;n++){e[t.charAt(n)]=n;}
return e;}(i),a=String.fromCharCode,o=function t(e){if(e.length<2){return(n=e.charCodeAt(0))<128?e:n<2048?a(192|n>>>6)+a(128|63&n):a(224|n>>>12&15)+a(128|n>>>6&63)+a(128|63&n);}
var n=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return a(240|n>>>18&7)+a(128|n>>>12&63)+a(128|n>>>6&63)+a(128|63&n);},s=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,l=function t(e){return e.replace(s,o);},u=function t(e){var n=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[i.charAt(r>>>18),i.charAt(r>>>12&63),n>=2?"=":i.charAt(r>>>6&63),n>=1?"=":i.charAt(63&r)].join("");},h=t.btoa?function(e){return t.btoa(e);}:function(t){return t.replace(/[\s\S]{1,3}/g,u);},c=e?e.from&&Uint8Array&&e.from!==Uint8Array.from?function(t){return(t.constructor===e.constructor?t:e.from(t)).toString("base64");}:function(t){return(t.constructor===e.constructor?t:new e(t)).toString("base64");}:function(t){return h(l(t));},_=function t(e,n){return n?c(String(e)).replace(/[+\/]/g,function(t){return "+"==t?"-":"_";}).replace(/=/g,""):c(String(e));},f=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),d=function t(e){switch(e.length){case 4:var n=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return a(55296+(n>>>10))+a(56320+(1023&n));case 3:return a((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return a((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1));}},p=function t(e){return e.replace(f,d);},m=function t(e){var n=e.length,i=n%4,o=(n>0?r[e.charAt(0)]<<18:0)|(n>1?r[e.charAt(1)]<<12:0)|(n>2?r[e.charAt(2)]<<6:0)|(n>3?r[e.charAt(3)]:0),s=[a(o>>>16),a(o>>>8&255),a(255&o)];return s.length-=[0,0,2,1][i],s.join("");},g=t.atob?function(e){return t.atob(e);}:function(t){return t.replace(/[\s\S]{1,4}/g,m);},y=e?e.from&&Uint8Array&&e.from!==Uint8Array.from?function(t){return(t.constructor===e.constructor?t:e.from(t,"base64")).toString();}:function(t){return(t.constructor===e.constructor?t:new e(t,"base64")).toString();}:function(t){return p(g(t));},v=function t(e){return y(String(e).replace(/[-_]/g,function(t){return "-"==t?"+":"/";}).replace(/[^A-Za-z0-9\+\/]/g,""));};if(t.Base64={VERSION:"2.4.5",atob:g,btoa:h,fromBase64:v,toBase64:_,utob:l,encode:_,encodeURI:function t(e){return _(e,!0);},btou:p,decode:v,noConflict:function e(){var i=t.Base64;return t.Base64=n,i;}},"function"==typeof Object.defineProperty){var I=function t(e){return{value:e,enumerable:!1,writable:!0,configurable:!0};};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",I(function(){return v(this);})),Object.defineProperty(String.prototype,"toBase64",I(function(t){return _(this,t);})),Object.defineProperty(String.prototype,"toBase64URI",I(function(){return _(this,!0);}));};}
return t.Meteor&&(Base64=t.Base64),true&&module.exports?module.exports.Base64=t.Base64:"function"==typeof window.define&&window.define.amd&&window.define([],function(){return t.Base64;}),{Base64:t.Base64};});var hexcase=0;!function(t,e,n){var i=(n.un,n.uns,n.static),r=n.class,a=n.getset,o=(n.__newvec,laya.utils.Browser,laya.utils.Byte,laya.filters.ColorFilter,laya.utils.Ease,laya.events.Event,laya.events.EventDispatcher,laya.display.Graphics,laya.html.dom.HTMLDivElement,laya.utils.Handler,laya.utils.HitArea,laya.display.Input,laya.utils.Log,laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render,laya.media.Sound,laya.media.SoundManager,laya.display.Sprite,laya.display.Stage,laya.display.Text,laya.resource.Texture,laya.utils.Tween,laya.utils.Utils,n.Vector4),s=n.ShaderCompile3D;!function(t){function e(){e.__super.call(this),this.setShaderName("curvedworld_BLINNPHONG"),this._albedoIntensity=1,this._albedoColor=new n.Vector4(1,1,1,1),this._setColor(6,new n.Vector4(1,1,1,1)),this._setColor(8,new n.Vector3(1,1,1)),this._setNumber(9,.078125),this._setColor(10,new n.Vector3(1,1,1)),this._setNumber(0,.5),this._setColor(11,new n.Vector4(1,1,0,0)),this._enableLighting=!0,this.renderMode=0;}
r(e,"curvedworld.BlinnPhongMaterial",t);var l=e.prototype;l.disableLight=function(){this._addDisablePublicShaderDefine(s.SHADERDEFINE_POINTLIGHT|s.SHADERDEFINE_SPOTLIGHT|s.SHADERDEFINE_DIRECTIONLIGHT);},l.disableFog=function(){this._addDisablePublicShaderDefine(s.SHADERDEFINE_FOG);},l.cloneTo=function(e){t.prototype.cloneTo.call(this,e);var n=e;n._enableLighting=this._enableLighting,n._albedoIntensity=this._albedoIntensity,this._albedoColor.cloneTo(n._albedoColor);},a(0,l,"renderMode",null,function(t){switch(t){case 0:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this.depthTest=513,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 1:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this.depthTest=513,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this.depthTest=513,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this.depthTest=513,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.");}
this._conchMaterial&&this._conchMaterial.setRenderMode(t);}),a(0,l,"normalTexture",function(){return this._getTexture(2);},function(t){t?this._addShaderDefine(e.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(e.SHADERDEFINE_NORMALMAP),this._setTexture(2,t);}),a(0,l,"reflectColor",function(){return this._getColor(10);},function(t){this._setColor(10,t);}),a(0,l,"tilingOffset",function(){return this._getColor(11);},function(t){if(t){var n=t.elements;1!=n[0]||1!=n[1]||0!=n[2]||0!=n[3]?this._addShaderDefine(e.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(e.SHADERDEFINE_TILINGOFFSET);}else this._removeShaderDefine(e.SHADERDEFINE_TILINGOFFSET);this._setColor(11,t);}),a(0,l,"specularColor",function(){return this._getColor(8);},function(t){this._setColor(8,t);}),a(0,l,"albedoColor",function(){return this._albedoColor;},function(t){var e=this._getColor(6);o.scale(t,this._albedoIntensity,e),this._albedoColor=t;}),a(0,l,"albedoIntensity",function(){return this._albedoIntensity;},function(t){if(this._albedoIntensity!==t){var e=this._getColor(6);o.scale(this._albedoColor,t,e),this._albedoIntensity=t;}}),a(0,l,"albedoTexture",function(){return this._getTexture(1);},function(t){t?this._addShaderDefine(e.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(e.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,t);}),a(0,l,"shininess",function(){return this._getNumber(9);},function(t){t=Math.max(0,Math.min(1,t)),this._setNumber(9,t);}),a(0,l,"specularTexture",function(){return this._getTexture(3);},function(t){t?this._addShaderDefine(e.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(e.SHADERDEFINE_SPECULARMAP),this._setTexture(3,t);}),a(0,l,"reflectTexture",function(){return this._getTexture(5);},function(t){t?this._addShaderDefine(e.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(e.SHADERDEFINE_REFLECTMAP),this._setTexture(5,t);}),a(0,l,"enableLighting",function(){return this._enableLighting;},function(t){this._enableLighting!==t&&(t?this._removeDisablePublicShaderDefine(s.SHADERDEFINE_POINTLIGHT|s.SHADERDEFINE_SPOTLIGHT|s.SHADERDEFINE_DIRECTIONLIGHT):this._addDisablePublicShaderDefine(s.SHADERDEFINE_POINTLIGHT|s.SHADERDEFINE_SPOTLIGHT|s.SHADERDEFINE_DIRECTIONLIGHT),this._enableLighting=t);}),e.__init__=function(){e.SHADERDEFINE_DIFFUSEMAP=e.shaderDefines.registerDefine("DIFFUSEMAP"),e.SHADERDEFINE_NORMALMAP=e.shaderDefines.registerDefine("NORMALMAP"),e.SHADERDEFINE_SPECULARMAP=e.shaderDefines.registerDefine("SPECULARMAP"),e.SHADERDEFINE_REFLECTMAP=e.shaderDefines.registerDefine("REFLECTMAP"),e.SHADERDEFINE_TILINGOFFSET=e.shaderDefines.registerDefine("TILINGOFFSET"),e.SHADERDEFINE_ADDTIVEFOG=e.shaderDefines.registerDefine("ADDTIVEFOG");},e.load=function(t){return n.loader.create(t,null,null,e);},e.InitShander=function(){var t=n.Shader3D.nameKey.add("curvedworld_BLINNPHONG"),i=n.ShaderCompile3D.add(t,'uniform vec3 u_curved;\nattribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(LIGHTMAP)&&defined(UV1)\nattribute vec2 a_Texcoord1;\n#endif\n\n#ifdef LIGHTMAP\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nconst int c_MaxBoneCount = 24;\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal; \n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nuniform vec3 u_CameraPos;\nvarying vec3 v_ViewDir; \n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec4 a_Tangent0;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n#ifdef SHADOWMAP_PSSM1\nvarying vec4 v_lightMVPPos;\nuniform mat4 u_lightShadowVP[4];\n#endif\n#endif\n\n#ifdef TILINGOFFSET\nuniform vec4 u_TilingOffset;\n#endif\n\nuniform mat4 u_WorldMat;\nuniform mat4 u_VMatrix;\n uniform mat4 u_PMatrix;\nvoid main_castShadow()\n{\n#ifdef BONE\nmat4 skinTransform=mat4(0.0);\nskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\nskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\nskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\nskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\nvec4 position=skinTransform*a_Position;\nvec4 vPos = u_VMatrix * u_WorldMat * position;\nfloat zOff = vPos.z/u_curved.z;\nvPos +=vec4(u_curved.x,u_curved.y,0.0,0.0)*zOff*zOff;\nvec4 mvp =u_PMatrix * vPos;\ngl_Position = mvp;\n#else\nvec4 vPos = u_VMatrix * u_WorldMat * a_Position;\nfloat zOff = vPos.z/u_curved.z;\nvPos +=vec4(u_curved.x,u_curved.y,0.0,0.0)*zOff*zOff;\nvec4 mvp =u_PMatrix * vPos;\ngl_Position = mvp;\n#endif\n\n\t//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\nv_Texcoord0=a_Texcoord0;\n#endif\nv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\nmat4 skinTransform=mat4(0.0);\nskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\nskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\nskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\nskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\nvec4 position=skinTransform*a_Position;\nvec4 vPos = u_VMatrix * u_WorldMat * position;\nfloat zOff = vPos.z/u_curved.z;\nvPos +=vec4(u_curved.x,u_curved.y,0.0,0.0)*zOff*zOff;\nvec4 mvp =u_PMatrix * vPos;\ngl_Position = mvp;\n#else\nvec4 vPos = u_VMatrix * u_WorldMat * a_Position;\nfloat zOff = vPos.z/u_curved.z;\nvPos +=vec4(u_curved.x,u_curved.y,0.0,0.0)*zOff*zOff;\nvec4 mvp =u_PMatrix * vPos;\ngl_Position = mvp;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nmat3 worldMat;\n#ifdef BONE\nworldMat=mat3(u_WorldMat*skinTransform);\n#else\nworldMat=mat3(u_WorldMat);\n#endif  \nv_Normal=worldMat*a_Normal;//TODO:法线可以用"魔法"矩阵\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nv_Tangent=worldMat*a_Tangent0.xyz;\nv_Binormal=cross(v_Normal,v_Tangent)*a_Tangent0.w;\n#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n#ifdef BONE\nv_PositionWorld=(u_WorldMat*position).xyz;\n#else\nv_PositionWorld=(u_WorldMat*a_Position).xyz;\n#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nv_ViewDir=u_CameraPos-v_PositionWorld;\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))\nv_Texcoord0=a_Texcoord0;\n#ifdef TILINGOFFSET\nv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\nv_Texcoord0=vec2(v_Texcoord0.x,1.0+v_Texcoord0.y);\n#endif\n#endif\n\n#ifdef LIGHTMAP\n#ifdef SCALEOFFSETLIGHTINGMAPUV\n#ifdef UV1\nv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n#else\nv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n#endif \n#else\n#ifdef UV1\nv_LightMapUV=a_Texcoord1;\n#else\nv_LightMapUV=a_Texcoord0;\n#endif \n#endif \n#endif\n\n#ifdef COLOR\nv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\nv_posViewZ = gl_Position.w;\n#ifdef SHADOWMAP_PSSM1 \nv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\nmain_castShadow();\n#else\nmain_normal();\n#endif\n}\n','#ifdef HIGHPRECISION\n\tprecision highp float;\n#else\n\tprecision mediump float;\n#endif\n\n#include "Lighting.glsl";\n\nuniform vec4 u_DiffuseColor;\n\n#ifdef COLOR\n\tvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvarying vec3 v_ViewDir; \n#endif\n\n#ifdef ALPHATEST\n\tuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\n\tuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\n\tuniform samplerCube u_ReflectTexture;\n\tuniform vec3 u_MaterialReflect;\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))\n\tvarying vec2 v_Texcoord0;\n#endif\n\n#ifdef LIGHTMAP\n\tvarying vec2 v_LightMapUV;\n\tuniform sampler2D u_LightMap;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tuniform vec3 u_MaterialSpecular;\n\tuniform float u_Shininess;\n\t#ifdef SPECULARMAP \n\t\tuniform sampler2D u_SpecularTexture;\n\t#endif\n#endif\n\n#ifdef FOG\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\n\tvarying vec3 v_Tangent;\n\tvarying vec3 v_Binormal;\n#endif\n\n#ifdef DIRECTIONLIGHT\n\tuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\n\tuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\n\tuniform SpotLight u_SpotLight;\n#endif\n\n uniform vec3 u_AmbientColor;\n\n\n#if defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\t\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n#endif\n}\nvoid main_normal()\n{\n\tvec4 mainColor=u_DiffuseColor;\n\t#ifdef DIFFUSEMAP\n\t\tvec4 difTexColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\t\tmainColor=mainColor*difTexColor;\n\t#endif \n\t#ifdef COLOR\n\t\tmainColor=mainColor*v_Color;\n\t#endif \n    \n\t#ifdef ALPHATEST\n\t\tif(mainColor.a<u_AlphaTestValue)\n\t\t\tdiscard;\n\t#endif\n  \n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\t\tvec3 normal;\n\t\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent,v_Binormal));\n\t\t#else\n\t\t\tnormal = normalize(v_Normal);\n\t\t#endif\n\t#endif\n\t\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tvec3 viewDir= normalize(v_ViewDir);\n\t\tvec3 diffuse = vec3(0.0);\n\t\tvec3 specular= vec3(0.0);\n\t\tvec3 dif,spe;\n\t\t#ifdef SPECULARMAP\n\t\t\tvec3 gloss=texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n\t\t#else\n\t\t\t#ifdef DIFFUSEMAP\n\t\t\t\tvec3 gloss=vec3(difTexColor.a);\n\t\t\t#else\n\t\t\t\tvec3 gloss=vec3(1.0);\n\t\t\t#endif\n\t\t#endif\n\t#endif\n\n\t\n\t#ifdef DIRECTIONLIGHT\n\t\tLayaAirBlinnPhongDiectionLight(u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_DirectionLight,dif,spe);\n\t\tdiffuse+=dif;\n\t\tspecular+=spe;\n\t#endif\n \n\t#ifdef POINTLIGHT\n\t\tLayaAirBlinnPhongPointLight(v_PositionWorld,u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_PointLight,dif,spe);\n\t\tdiffuse+=dif;\n\t\tspecular+=spe;\n\t#endif\n\n\t#ifdef SPOTLIGHT\n\t\tLayaAirBlinnPhongSpotLight(v_PositionWorld,u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_SpotLight,dif,spe);\n\t\tdiffuse+=dif;\n\t\tspecular+=spe;\n\t#endif\n\n\t\n\tvec3 finalDiffuse;\n\t#ifdef LIGHTMAP\n\t\tfinalDiffuse=texture2D(u_LightMap, v_LightMapUV).rgb*2.0;\n\t\t//float exponent = texture2D(u_LightMap, v_LightMapUV).a;\n\t\t//finalDiffuse = texture2D(u_LightMap, v_LightMapUV).rgb;\n\t\t//float ratio = pow(2.0, exponent * 255.0 - (128.0 + 8.0));\n\t\t//finalDiffuse = finalDiffuse * 255.0 * ratio;\t\n\t\t//finalDiffuse = sqrt(finalDiffuse);\n\t#else\n\t\tfinalDiffuse=vec3(0.0);\n\t#endif\n\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tfinalDiffuse+=diffuse;\n\t#endif\n\n\t#ifdef RECEIVESHADOW\n\t\tfloat shadowValue = 1.0;\n\t\t#ifdef SHADOWMAP_PSSM3\n\t\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t\t#endif\n\t\t#ifdef SHADOWMAP_PSSM2\n\t\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t\t#endif \n\t\t#ifdef SHADOWMAP_PSSM1\n\t\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t\t#endif\n\t\tgl_FragColor =vec4(mainColor.rgb*(u_AmbientColor + finalDiffuse)*shadowValue,mainColor.a);\n\t#else\n\t\tgl_FragColor =vec4(mainColor.rgb*(u_AmbientColor + finalDiffuse),mainColor.a);\n\t#endif\n\t\n\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\t#ifdef RECEIVESHADOW\n\t\t\tgl_FragColor.rgb+=specular*shadowValue;\n\t\t#else\n\t\t\tgl_FragColor.rgb+=specular;\n\t\t#endif\n\t#endif\n\n\n\t#ifdef REFLECTMAP\n\t\tvec3 incident = -viewDir;\n\t\tvec3 reflectionVector = reflect(incident,normal);\n\t\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\t\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n\t#endif\n\t  \n\t#ifdef FOG\n\t\tfloat lerpFact=clamp((1.0/gl_FragCoord.w-u_FogStart)/u_FogRange,0.0,1.0);\n\t\t#ifdef ADDTIVEFOG\n\t\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t\t#else\n\t\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t\t#endif\n\t#endif\n}\n\nvoid main()\n{\n\t#ifdef CASTSHADOW\t\t\n\t\tmain_castShadow();\n\t#else\n\t  main_normal();\n\t#endif  \n}\n\n',{a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},{u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_ReflectTexture:[5,1],u_AlphaTestValue:[0,1],u_DiffuseColor:[6,1],u_MaterialSpecular:[8,1],u_Shininess:[9,1],u_MaterialReflect:[10,1],u_TilingOffset:[11,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_VMatrix:[1,3],u_PMatrix:[2,3],u_curved:[16,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Color":[4,4],"u_DirectionLight.Direction":[3,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Color":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Color":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]});e.SHADERDEFINE_DIFFUSEMAP=i.registerMaterialDefine("DIFFUSEMAP"),e.SHADERDEFINE_NORMALMAP=i.registerMaterialDefine("NORMALMAP"),e.SHADERDEFINE_SPECULARMAP=i.registerMaterialDefine("SPECULARMAP"),e.SHADERDEFINE_REFLECTMAP=i.registerMaterialDefine("REFLECTMAP"),e.SHADERDEFINE_TILINGOFFSET=i.registerMaterialDefine("TILINGOFFSET"),e.SHADERDEFINE_ADDTIVEFOG=i.registerMaterialDefine("ADDTIVEFOG");},e.CopyLayaMaterial=function(t){if(t instanceof n.MeshSprite3D)if(1<t.meshRender.sharedMaterials.length){for(var e=[],i=0;i<t.meshRender.sharedMaterials.length;i++){var r=t.meshRender.sharedMaterials[i],a=new curvedworld.BlinnPhongMaterial();r.cloneTo(a),e.push(a);}
t.meshRender.sharedMaterials=e;}else r=t.meshRender.sharedMaterial,a=new curvedworld.BlinnPhongMaterial(),r.cloneTo(a),t.meshRender.sharedMaterial=a;},e.SPECULARSOURCE_DIFFUSEMAPALPHA=0,e.SPECULARSOURCE_SPECULARMAP=0,e.RENDERMODE_OPAQUE=0,e.RENDERMODE_CUTOUT=1,e.RENDERMODE_TRANSPARENT=2,e.RENDERMODE_ADDTIVE=3,e.SHADERDEFINE_DIFFUSEMAP=0,e.SHADERDEFINE_NORMALMAP=0,e.SHADERDEFINE_SPECULARMAP=0,e.SHADERDEFINE_REFLECTMAP=0,e.SHADERDEFINE_TILINGOFFSET=0,e.SHADERDEFINE_ADDTIVEFOG=0,e.ALBEDOTEXTURE=1,e.NORMALTEXTURE=2,e.SPECULARTEXTURE=3,e.EMISSIVETEXTURE=4,e.REFLECTTEXTURE=5,e.ALBEDOCOLOR=6,e.MATERIALSPECULAR=8,e.SHININESS=9,e.MATERIALREFLECT=10,e.TILINGOFFSET=11,i(e,["defaultMaterial",function(){return this.defaultMaterial=new e();},"shaderDefines",function(){return this.shaderDefines=new ShaderDefines$1(BaseMaterial.shaderDefines);}]);}(n.BaseMaterial),function(t){function e(){e.__super.call(this),this.setShaderName("curvedworld_PARTICLESHURIKEN"),this.renderMode=6;}
r(e,"curvedworld.ShurikenParticleMaterial",t);var s=e.prototype;s.onAsynLoaded=function(n,i,r){var a=i[0];if(a.version)t.prototype.onAsynLoaded.call(this,n,i,r);else{var o=i[1],s=a.props;for(var l in s){this[l]=s[l];}
e._parseShurikenParticleMaterial(o,this,a),this._endLoaded();}},a(0,s,"renderMode",null,function(t){switch(t){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.");}
this._conchMaterial&&this._conchMaterial.setRenderMode(t);}),a(0,s,"tintColor",function(){return this._getColor(2);},function(t){t?this._addShaderDefine(curvedworld.ShurikenParticleMaterial.SHADERDEFINE_TINTCOLOR):this._removeShaderDefine(curvedworld.ShurikenParticleMaterial.SHADERDEFINE_TINTCOLOR),this._setColor(2,t);}),a(0,s,"tilingOffset",function(){return this._getColor(3);},function(t){if(t){var e=t.elements;1!=e[0]||1!=e[1]||0!=e[2]||0!=e[3]?this._addShaderDefine(curvedworld.ShurikenParticleMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(curvedworld.ShurikenParticleMaterial.SHADERDEFINE_TILINGOFFSET);}else this._removeShaderDefine(curvedworld.ShurikenParticleMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(3,t);}),a(0,s,"diffuseTexture",function(){return this._getTexture(1);},function(t){t?this._addShaderDefine(curvedworld.ShurikenParticleMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(curvedworld.ShurikenParticleMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,t);}),e.__init__=function(){e.SHADERDEFINE_DIFFUSEMAP=e.shaderDefines.registerDefine("DIFFUSEMAP"),e.SHADERDEFINE_TINTCOLOR=e.shaderDefines.registerDefine("TINTCOLOR"),e.SHADERDEFINE_ADDTIVEFOG=e.shaderDefines.registerDefine("ADDTIVEFOG"),e.SHADERDEFINE_TILINGOFFSET=e.shaderDefines.registerDefine("TILINGOFFSET");},e.load=function(t){return n.loader.create(t,null,null,e);},e._parseShurikenParticleMaterial=function(t,e,n){var i=n.customProps,r=i.diffuseTexture.texture2D;r&&(e.diffuseTexture=Loader.getRes(t[r]));var a=i.tintColor;a&&(e.tintColor=new o(a[0],a[1],a[2],a[3]));},e.InitShander=function(){var t=n.Shader3D.nameKey.add("curvedworld_PARTICLESHURIKEN"),i=n.ShaderCompile3D.add(t,"uniform vec3 u_curved;\n#ifdef HIGHPRECISION\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n\n#if defined(SPHERHBILLBOARD)||defined(STRETCHEDBILLBOARD)||defined(HORIZONTALBILLBOARD)||defined(VERTICALBILLBOARD)\n\tattribute vec4 a_CornerTextureCoordinate;\n#endif\n#ifdef RENDERMODE_MESH\n\tattribute vec3 a_MeshPosition;\n\tattribute vec4 a_MeshColor;\n\tattribute vec2 a_MeshTextureCoordinate;\n\tvarying vec4 v_MeshColor;\n#endif\n\nattribute vec4 a_ShapePositionStartLifeTime;\nattribute vec4 a_DirectionTime;\nattribute vec4 a_StartColor;\nattribute vec3 a_StartSize;\nattribute vec3 a_StartRotation0;\nattribute float a_StartSpeed;\n#if defined(COLOROVERLIFETIME)||defined(RANDOMCOLOROVERLIFETIME)||defined(SIZEOVERLIFETIMERANDOMCURVES)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\n  attribute vec4 a_Random0;\n#endif\n#if defined(TEXTURESHEETANIMATIONRANDOMCURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n  attribute vec4 a_Random1;\n#endif\nattribute vec3 a_SimulationWorldPostion;\nattribute vec4 a_SimulationWorldRotation;\n\nvarying float v_Discard;\nvarying vec4 v_Color;\n#ifdef DIFFUSEMAP\n\tvarying vec2 v_TextureCoordinate;\n#endif\n\nuniform float u_CurrentTime;\nuniform vec3 u_Gravity;\n\nuniform vec3 u_WorldPosition;\nuniform vec4 u_WorldRotation;\nuniform bool u_ThreeDStartRotation;\nuniform int u_ScalingMode;\nuniform vec3 u_PositionScale;\nuniform vec3 u_SizeScale;\nuniform mat4 u_View;\nuniform mat4 u_Projection;\n\n#ifdef STRETCHEDBILLBOARD\n\tuniform vec3 u_CameraPosition;\n#endif\nuniform vec3 u_CameraDirection;//TODO:只有几种广告牌模式需要用\nuniform vec3 u_CameraUp;\n\nuniform  float u_StretchedBillboardLengthScale;\nuniform  float u_StretchedBillboardSpeedScale;\nuniform int u_SimulationSpace;\n\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n  uniform  int  u_VOLSpaceType;\n#endif\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)\n  uniform  vec3 u_VOLVelocityConst;\n#endif\n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n  uniform  vec2 u_VOLVelocityGradientX[4];//x为key,y为速度\n  uniform  vec2 u_VOLVelocityGradientY[4];//x为key,y为速度\n  uniform  vec2 u_VOLVelocityGradientZ[4];//x为key,y为速度\n#endif\n#ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\n  uniform  vec3 u_VOLVelocityConstMax;\n#endif\n#ifdef VELOCITYOVERLIFETIMERANDOMCURVE\n  uniform  vec2 u_VOLVelocityGradientMaxX[4];//x为key,y为速度\n  uniform  vec2 u_VOLVelocityGradientMaxY[4];//x为key,y为速度\n  uniform  vec2 u_VOLVelocityGradientMaxZ[4];//x为key,y为速度\n#endif\n\n#ifdef COLOROVERLIFETIME\n  uniform  vec4 u_ColorOverLifeGradientColors[4];//x为key,yzw为Color\n  uniform  vec2 u_ColorOverLifeGradientAlphas[4];//x为key,y为Alpha\n#endif\n#ifdef RANDOMCOLOROVERLIFETIME\n  uniform  vec4 u_ColorOverLifeGradientColors[4];//x为key,yzw为Color\n  uniform  vec2 u_ColorOverLifeGradientAlphas[4];//x为key,y为Alpha\n  uniform  vec4 u_MaxColorOverLifeGradientColors[4];//x为key,yzw为Color\n  uniform  vec2 u_MaxColorOverLifeGradientAlphas[4];//x为key,y为Alpha\n#endif\n\n\n#if defined(SIZEOVERLIFETIMECURVE)||defined(SIZEOVERLIFETIMERANDOMCURVES)\n  uniform  vec2 u_SOLSizeGradient[4];//x为key,y为尺寸\n#endif\n#ifdef SIZEOVERLIFETIMERANDOMCURVES\n  uniform  vec2 u_SOLSizeGradientMax[4];//x为key,y为尺寸\n#endif\n#if defined(SIZEOVERLIFETIMECURVESEPERATE)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)\n  uniform  vec2 u_SOLSizeGradientX[4];//x为key,y为尺寸\n  uniform  vec2 u_SOLSizeGradientY[4];//x为key,y为尺寸\n  uniform  vec2 u_SOLSizeGradientZ[4];//x为key,y为尺寸\n#endif\n#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\n  uniform  vec2 u_SOLSizeGradientMaxX[4];//x为key,y为尺寸\n  uniform  vec2 u_SOLSizeGradientMaxY[4];//x为key,y为尺寸\n  uniform  vec2 u_SOLSizeGradientMaxZ[4];//x为key,y为尺寸\n#endif\n\n\n#ifdef ROTATIONOVERLIFETIME\n  #if defined(ROTATIONOVERLIFETIMECONSTANT)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)\n    uniform  float u_ROLAngularVelocityConst;\n  #endif\n  #ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n    uniform  float u_ROLAngularVelocityConstMax;\n  #endif\n  #if defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\n    uniform  vec2 u_ROLAngularVelocityGradient[4];//x为key,y为旋转\n  #endif\n  #ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n    uniform  vec2 u_ROLAngularVelocityGradientMax[4];//x为key,y为旋转\n  #endif\n#endif\n#ifdef ROTATIONOVERLIFETIMESEPERATE\n  #if defined(ROTATIONOVERLIFETIMECONSTANT)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)\n    uniform  vec3 u_ROLAngularVelocityConstSeprarate;\n  #endif\n  #ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n    uniform  vec3 u_ROLAngularVelocityConstMaxSeprarate;\n  #endif\n  #if defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\n    uniform  vec2 u_ROLAngularVelocityGradientX[4];\n    uniform  vec2 u_ROLAngularVelocityGradientY[4];\n    uniform  vec2 u_ROLAngularVelocityGradientZ[4];\n\tuniform  vec2 u_ROLAngularVelocityGradientW[4];\n  #endif\n  #ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n    uniform  vec2 u_ROLAngularVelocityGradientMaxX[4];\n    uniform  vec2 u_ROLAngularVelocityGradientMaxY[4];\n    uniform  vec2 u_ROLAngularVelocityGradientMaxZ[4];\n\tuniform  vec2 u_ROLAngularVelocityGradientMaxW[4];\n  #endif\n#endif\n\n#if defined(TEXTURESHEETANIMATIONCURVE)||defined(TEXTURESHEETANIMATIONRANDOMCURVE)\n  uniform  float u_TSACycles;\n  uniform  vec2 u_TSASubUVLength;\n  uniform  vec2 u_TSAGradientUVs[4];//x为key,y为frame\n#endif\n#ifdef TEXTURESHEETANIMATIONRANDOMCURVE\n  uniform  vec2 u_TSAMaxGradientUVs[4];//x为key,y为frame\n#endif\n\n#ifdef FOG\n\tvarying vec3 v_PositionWorld;\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvec3 rotationByEuler(in vec3 vector,in vec3 rot)\n{\n\tfloat halfRoll = rot.z * 0.5;\n    float halfPitch = rot.x * 0.5;\n\tfloat halfYaw = rot.y * 0.5;\n\n\tfloat sinRoll = sin(halfRoll);\n\tfloat cosRoll = cos(halfRoll);\n\tfloat sinPitch = sin(halfPitch);\n\tfloat cosPitch = cos(halfPitch);\n\tfloat sinYaw = sin(halfYaw);\n\tfloat cosYaw = cos(halfYaw);\n\n\tfloat quaX = (cosYaw * sinPitch * cosRoll) + (sinYaw * cosPitch * sinRoll);\n\tfloat quaY = (sinYaw * cosPitch * cosRoll) - (cosYaw * sinPitch * sinRoll);\n\tfloat quaZ = (cosYaw * cosPitch * sinRoll) - (sinYaw * sinPitch * cosRoll);\n\tfloat quaW = (cosYaw * cosPitch * cosRoll) + (sinYaw * sinPitch * sinRoll);\n\t\n\t//vec4 q=vec4(quaX,quaY,quaZ,quaW);\n\t//vec3 temp = cross(q.xyz, vector) + q.w * vector;\n\t//return (cross(temp, -q.xyz) + dot(q.xyz,vector) * q.xyz + q.w * temp);\n\t\n\tfloat x = quaX + quaX;\n    float y = quaY + quaY;\n    float z = quaZ + quaZ;\n    float wx = quaW * x;\n    float wy = quaW * y;\n    float wz = quaW * z;\n\tfloat xx = quaX * x;\n    float xy = quaX * y;\n\tfloat xz = quaX * z;\n    float yy = quaY * y;\n    float yz = quaY * z;\n    float zz = quaZ * z;\n\n    return vec3(((vector.x * ((1.0 - yy) - zz)) + (vector.y * (xy - wz))) + (vector.z * (xz + wy)),\n                ((vector.x * (xy + wz)) + (vector.y * ((1.0 - xx) - zz))) + (vector.z * (yz - wx)),\n                ((vector.x * (xz - wy)) + (vector.y * (yz + wx))) + (vector.z * ((1.0 - xx) - yy)));\n\t\n}\n\n//假定axis已经归一化\nvec3 rotationByAxis(in vec3 vector,in vec3 axis, in float angle)\n{\n\tfloat halfAngle = angle * 0.5;\n\tfloat sin = sin(halfAngle);\n\t\n\tfloat quaX = axis.x * sin;\n\tfloat quaY = axis.y * sin;\n\tfloat quaZ = axis.z * sin;\n\tfloat quaW = cos(halfAngle);\n\t\n\t//vec4 q=vec4(quaX,quaY,quaZ,quaW);\n\t//vec3 temp = cross(q.xyz, vector) + q.w * vector;\n\t//return (cross(temp, -q.xyz) + dot(q.xyz,vector) * q.xyz + q.w * temp);\n\t\n\tfloat x = quaX + quaX;\n    float y = quaY + quaY;\n    float z = quaZ + quaZ;\n    float wx = quaW * x;\n    float wy = quaW * y;\n    float wz = quaW * z;\n\tfloat xx = quaX * x;\n    float xy = quaX * y;\n\tfloat xz = quaX * z;\n    float yy = quaY * y;\n    float yz = quaY * z;\n    float zz = quaZ * z;\n\n    return vec3(((vector.x * ((1.0 - yy) - zz)) + (vector.y * (xy - wz))) + (vector.z * (xz + wy)),\n                ((vector.x * (xy + wz)) + (vector.y * ((1.0 - xx) - zz))) + (vector.z * (yz - wx)),\n                ((vector.x * (xz - wy)) + (vector.y * (yz + wx))) + (vector.z * ((1.0 - xx) - yy)));\n\t\n}\n\nvec3 rotationByQuaternions(in vec3 v,in vec4 q) \n{\n\treturn v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);\n}\n\n \n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)||defined(SIZEOVERLIFETIMECURVE)||defined(SIZEOVERLIFETIMECURVESEPERATE)||defined(SIZEOVERLIFETIMERANDOMCURVES)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)\nfloat getCurValueFromGradientFloat(in vec2 gradientNumbers[4],in float normalizedAge)\n{\n\tfloat curValue;\n\tfor(int i=1;i<4;i++)\n\t{\n\t\tvec2 gradientNumber=gradientNumbers[i];\n\t\tfloat key=gradientNumber.x;\n\t\tif(key>=normalizedAge)\n\t\t{\n\t\t\tvec2 lastGradientNumber=gradientNumbers[i-1];\n\t\t\tfloat lastKey=lastGradientNumber.x;\n\t\t\tfloat age=(normalizedAge-lastKey)/(key-lastKey);\n\t\t\tcurValue=mix(lastGradientNumber.y,gradientNumber.y,age);\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn curValue;\n}\n#endif\n\n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)||defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\nfloat getTotalValueFromGradientFloat(in vec2 gradientNumbers[4],in float normalizedAge)\n{\n\tfloat totalValue=0.0;\n\tfor(int i=1;i<4;i++)\n\t{\n\t\tvec2 gradientNumber=gradientNumbers[i];\n\t\tfloat key=gradientNumber.x;\n\t\tvec2 lastGradientNumber=gradientNumbers[i-1];\n\t\tfloat lastValue=lastGradientNumber.y;\n\t\t\n\t\tif(key>=normalizedAge){\n\t\t\tfloat lastKey=lastGradientNumber.x;\n\t\t\tfloat age=(normalizedAge-lastKey)/(key-lastKey);\n\t\t\ttotalValue+=(lastValue+mix(lastValue,gradientNumber.y,age))/2.0*a_ShapePositionStartLifeTime.w*(normalizedAge-lastKey);\n\t\t\tbreak;\n\t\t}\n\t\telse{\ntotalValue+=(lastValue+gradientNumber.y)/2.0*a_ShapePositionStartLifeTime.w*(key-lastGradientNumber.x);\n\t\t}\n\t}\n\treturn totalValue;\n}\n#endif\n\n#if defined(COLOROVERLIFETIME)||defined(RANDOMCOLOROVERLIFETIME)\nvec4 getColorFromGradient(in vec2 gradientAlphas[4],in vec4 gradientColors[4],in float normalizedAge)\n{\n\tvec4 overTimeColor;\n\tfor(int i=1;i<4;i++)\n\t{\n\t\tvec2 gradientAlpha=gradientAlphas[i];\n\t\tfloat alphaKey=gradientAlpha.x;\n\t\tif(alphaKey>=normalizedAge)\n\t\t{\n\t\t\tvec2 lastGradientAlpha=gradientAlphas[i-1];\n\t\t\tfloat lastAlphaKey=lastGradientAlpha.x;\n\t\t\tfloat age=(normalizedAge-lastAlphaKey)/(alphaKey-lastAlphaKey);\n\t\t\toverTimeColor.a=mix(lastGradientAlpha.y,gradientAlpha.y,age);\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\tfor(int i=1;i<4;i++)\n\t{\n\t\tvec4 gradientColor=gradientColors[i];\n\t\tfloat colorKey=gradientColor.x;\n\t\tif(colorKey>=normalizedAge)\n\t\t{\n\t\t\tvec4 lastGradientColor=gradientColors[i-1];\n\t\t\tfloat lastColorKey=lastGradientColor.x;\n\t\t\tfloat age=(normalizedAge-lastColorKey)/(colorKey-lastColorKey);\n\t\t\toverTimeColor.rgb=mix(gradientColors[i-1].yzw,gradientColor.yzw,age);\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn overTimeColor;\n}\n#endif\n\n\n#if defined(TEXTURESHEETANIMATIONCURVE)||defined(TEXTURESHEETANIMATIONRANDOMCURVE)\nfloat getFrameFromGradient(in vec2 gradientFrames[4],in float normalizedAge)\n{\n\tfloat overTimeFrame;\n\tfor(int i=1;i<4;i++)\n\t{\n\t\tvec2 gradientFrame=gradientFrames[i];\n\t\tfloat key=gradientFrame.x;\n\t\tif(key>=normalizedAge)\n\t\t{\n\t\t\tvec2 lastGradientFrame=gradientFrames[i-1];\n\t\t\tfloat lastKey=lastGradientFrame.x;\n\t\t\tfloat age=(normalizedAge-lastKey)/(key-lastKey);\n\t\t\toverTimeFrame=mix(lastGradientFrame.y,gradientFrame.y,age);\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn floor(overTimeFrame);\n}\n#endif\n\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\nvec3 computeParticleLifeVelocity(in float normalizedAge)\n{\n  vec3 outLifeVelocity;\n  #ifdef VELOCITYOVERLIFETIMECONSTANT\n\t outLifeVelocity=u_VOLVelocityConst; \n  #endif\n  #ifdef VELOCITYOVERLIFETIMECURVE\n     outLifeVelocity= vec3(getCurValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge));\n  #endif\n  #ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\n\t outLifeVelocity=mix(u_VOLVelocityConst,u_VOLVelocityConstMax,vec3(a_Random1.y,a_Random1.z,a_Random1.w)); \n  #endif\n  #ifdef VELOCITYOVERLIFETIMERANDOMCURVE\n     outLifeVelocity=vec3(mix(getCurValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxX,normalizedAge),a_Random1.y),\n\t                 mix(getCurValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxY,normalizedAge),a_Random1.z),\n\t\t\t\t\t mix(getCurValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxZ,normalizedAge),a_Random1.w));\n  #endif\n\t\t\t\t\t\n  return outLifeVelocity;\n} \n#endif\n\nvec3 computeParticlePosition(in vec3 startVelocity, in vec3 lifeVelocity,in float age,in float normalizedAge,vec3 gravityVelocity,vec4 worldRotation)\n{\n   vec3 startPosition;\n   vec3 lifePosition;\n   #if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n\t#ifdef VELOCITYOVERLIFETIMECONSTANT\n\t\t  startPosition=startVelocity*age;\n\t\t  lifePosition=lifeVelocity*age;\n\t#endif\n\t#ifdef VELOCITYOVERLIFETIMECURVE\n\t\t  startPosition=startVelocity*age;\n\t\t  lifePosition=vec3(getTotalValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge));\n\t#endif\n\t#ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\n\t\t  startPosition=startVelocity*age;\n\t\t  lifePosition=lifeVelocity*age;\n\t#endif\n\t#ifdef VELOCITYOVERLIFETIMERANDOMCURVE\n\t\t  startPosition=startVelocity*age;\n\t\t  lifePosition=vec3(mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxX,normalizedAge),a_Random1.y)\n\t      ,mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxY,normalizedAge),a_Random1.z)\n\t      ,mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxZ,normalizedAge),a_Random1.w));\n\t#endif\n\t\n\tvec3 finalPosition;\n\tif(u_VOLSpaceType==0){\n\t  if(u_ScalingMode!=2)\n\t   finalPosition =rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition+lifePosition),worldRotation);\n\t  else\n\t   finalPosition =rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition+lifePosition,worldRotation);\n\t}\n\telse{\n\t  if(u_ScalingMode!=2)\n\t    finalPosition = rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition),worldRotation)+lifePosition;\n\t  else\n\t    finalPosition = rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition,worldRotation)+lifePosition;\n\t}\n  #else\n\t startPosition=startVelocity*age;\n\t vec3 finalPosition;\n\t if(u_ScalingMode!=2)\n\t   finalPosition = rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition),worldRotation);\n\t else\n\t   finalPosition = rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition,worldRotation);\n  #endif\n  \n  if(u_SimulationSpace==0)\n    finalPosition=finalPosition+a_SimulationWorldPostion;\n  else if(u_SimulationSpace==1) \n    finalPosition=finalPosition+u_WorldPosition;\n  \n  finalPosition+=0.5*gravityVelocity*age;\n \n  return  finalPosition;\n}\n\n\nvec4 computeParticleColor(in vec4 color,in float normalizedAge)\n{\n\t#ifdef COLOROVERLIFETIME\n\t  color*=getColorFromGradient(u_ColorOverLifeGradientAlphas,u_ColorOverLifeGradientColors,normalizedAge);\n\t#endif\n\t\n\t#ifdef RANDOMCOLOROVERLIFETIME\n\t  color*=mix(getColorFromGradient(u_ColorOverLifeGradientAlphas,u_ColorOverLifeGradientColors,normalizedAge),getColorFromGradient(u_MaxColorOverLifeGradientAlphas,u_MaxColorOverLifeGradientColors,normalizedAge),a_Random0.y);\n\t#endif\n\n    return color;\n}\n\nvec2 computeParticleSizeBillbard(in vec2 size,in float normalizedAge)\n{\n\t#ifdef SIZEOVERLIFETIMECURVE\n\t\tsize*=getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge);\n\t#endif\n\t#ifdef SIZEOVERLIFETIMERANDOMCURVES\n\t    size*=mix(getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMax,normalizedAge),a_Random0.z); \n\t#endif\n\t#ifdef SIZEOVERLIFETIMECURVESEPERATE\n\t\tsize*=vec2(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge));\n\t#endif\n\t#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\n\t    size*=vec2(mix(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxX,normalizedAge),a_Random0.z)\n\t    ,mix(getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxY,normalizedAge),a_Random0.z));\n\t#endif\n\treturn size;\n}\n\n#ifdef RENDERMODE_MESH\nvec3 computeParticleSizeMesh(in vec3 size,in float normalizedAge)\n{\n\t#ifdef SIZEOVERLIFETIMECURVE\n\t\tsize*=getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge);\n\t#endif\n\t#ifdef SIZEOVERLIFETIMERANDOMCURVES\n\t    size*=mix(getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMax,normalizedAge),a_Random0.z); \n\t#endif\n\t#ifdef SIZEOVERLIFETIMECURVESEPERATE\n\t\tsize*=vec3(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientZ,normalizedAge));\n\t#endif\n\t#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\n\t    size*=vec3(mix(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxX,normalizedAge),a_Random0.z)\n\t    ,mix(getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxY,normalizedAge),a_Random0.z)\n\t\t,mix(getCurValueFromGradientFloat(u_SOLSizeGradientZ,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxZ,normalizedAge),a_Random0.z));\n\t#endif\n\treturn size;\n}\n#endif\n\nfloat computeParticleRotationFloat(in float rotation,in float age,in float normalizedAge)\n{ \n\t#ifdef ROTATIONOVERLIFETIME\n\t\t#ifdef ROTATIONOVERLIFETIMECONSTANT\n\t\t\tfloat ageRot=u_ROLAngularVelocityConst*age;\n\t        rotation+=ageRot;\n\t\t#endif\n\t\t#ifdef ROTATIONOVERLIFETIMECURVE\n\t\t\trotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge);\n\t\t#endif\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n\t\t\tfloat ageRot=mix(u_ROLAngularVelocityConst,u_ROLAngularVelocityConstMax,a_Random0.w)*age;\n\t        rotation+=ageRot;\n\t    #endif\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n\t\t\trotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMax,normalizedAge),a_Random0.w);\n\t\t#endif\n\t#endif\n\t#ifdef ROTATIONOVERLIFETIMESEPERATE\n\t\t#ifdef ROTATIONOVERLIFETIMECONSTANT\n\t\t\tfloat ageRot=u_ROLAngularVelocityConstSeprarate.z*age;\n\t        rotation+=ageRot;\n\t\t#endif\n\t\t#ifdef ROTATIONOVERLIFETIMECURVE\n\t\t\trotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge);\n\t\t#endif\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n\t\t\tfloat ageRot=mix(u_ROLAngularVelocityConstSeprarate.z,u_ROLAngularVelocityConstMaxSeprarate.z,a_Random0.w)*age;\n\t        rotation+=ageRot;\n#endif\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n\t\t\trotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxZ,normalizedAge),a_Random0.w));\n\t\t#endif\n\t#endif\n\treturn rotation;\n}\n\n\n#if defined(RENDERMODE_MESH)&&(defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE))\nvec3 computeParticleRotationVec3(in vec3 rotation,in float age,in float normalizedAge)\n{ \n\t#ifdef ROTATIONOVERLIFETIME\n\t#ifdef ROTATIONOVERLIFETIMECONSTANT\n\t\t\tfloat ageRot=u_ROLAngularVelocityConst*age;\n\t        rotation+=ageRot;\n\t\t#endif\n\t\t#ifdef ROTATIONOVERLIFETIMECURVE\n\t\t\trotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge);\n\t\t#endif\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n\t\t\tfloat ageRot=mix(u_ROLAngularVelocityConst,u_ROLAngularVelocityConstMax,a_Random0.w)*age;\n\t        rotation+=ageRot;\n\t    #endif\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n\t\t\trotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMax,normalizedAge),a_Random0.w);\n\t\t#endif\n\t#endif\n\t#ifdef ROTATIONOVERLIFETIMESEPERATE\n\t#ifdef ROTATIONOVERLIFETIMECONSTANT\n\t\t\tvec3 ageRot=u_ROLAngularVelocityConstSeprarate*age;\n\t        rotation+=ageRot;\n\t\t#endif\n\t\t#ifdef ROTATIONOVERLIFETIMECURVE\n\t\t\trotation+=vec3(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge));\n\t\t#endif\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n\t\t\tvec3 ageRot=mix(u_ROLAngularVelocityConstSeprarate,u_ROLAngularVelocityConstMaxSeprarate,a_Random0.w)*age;\n\t        rotation+=ageRot;\n\t    #endif\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n\t\t\trotation+=vec3(mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxX,normalizedAge),a_Random0.w)\n\t        ,mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxY,normalizedAge),a_Random0.w)\n\t        ,mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxZ,normalizedAge),a_Random0.w));\n\t\t#endif\n\t#endif\n\treturn rotation;\n}\n#endif\n\nvec2 computeParticleUV(in vec2 uv,in float normalizedAge)\n{ \n\t#ifdef TEXTURESHEETANIMATIONCURVE\n\t\tfloat cycleNormalizedAge=normalizedAge*u_TSACycles;\n\t\tfloat frame=getFrameFromGradient(u_TSAGradientUVs,cycleNormalizedAge-floor(cycleNormalizedAge));\n\t\tfloat totalULength=frame*u_TSASubUVLength.x;\n\t\tfloat floorTotalULength=floor(totalULength);\n\t    uv.x+=totalULength-floorTotalULength;\n\t\tuv.y+=floorTotalULength*u_TSASubUVLength.y;\n    #endif\n\t#ifdef TEXTURESHEETANIMATIONRANDOMCURVE\n\t\tfloat cycleNormalizedAge=normalizedAge*u_TSACycles;\n\t\tfloat uvNormalizedAge=cycleNormalizedAge-floor(cycleNormalizedAge);\n\t    float frame=floor(mix(getFrameFromGradient(u_TSAGradientUVs,uvNormalizedAge),getFrameFromGradient(u_TSAMaxGradientUVs,uvNormalizedAge),a_Random1.x));\n\t\tfloat totalULength=frame*u_TSASubUVLength.x;\n\t\tfloat floorTotalULength=floor(totalULength);\n\t    uv.x+=totalULength-floorTotalULength;\n\t\tuv.y+=floorTotalULength*u_TSASubUVLength.y;\n    #endif\n\treturn uv;\n}\n\nvoid main()\n{\n\tfloat age = u_CurrentTime - a_DirectionTime.w;\n\tfloat normalizedAge = age/a_ShapePositionStartLifeTime.w;\n\tvec3 lifeVelocity;\n\tif(normalizedAge<1.0){ \n\tvec3 startVelocity=a_DirectionTime.xyz*a_StartSpeed;\n\t#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n\t\tlifeVelocity= computeParticleLifeVelocity(normalizedAge);//计算粒子生命周期速度\n\t#endif \n\tvec3 gravityVelocity=u_Gravity*age;\n\t\n\tvec4 worldRotation;\n\tif(u_SimulationSpace==0)\n\t\tworldRotation=a_SimulationWorldRotation;\n\telse\n\t\tworldRotation=u_WorldRotation;\n\t\n\tvec3 center=computeParticlePosition(startVelocity, lifeVelocity, age, normalizedAge,gravityVelocity,worldRotation);//计算粒子位置\n   \n   \n   #ifdef SPHERHBILLBOARD\n\t\tvec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n        vec3 cameraUpVector =normalize(u_CameraUp);//TODO:是否外面归一化\n        vec3 sideVector = normalize(cross(u_CameraDirection,cameraUpVector));\n        vec3 upVector = normalize(cross(sideVector,u_CameraDirection));\n\t    corner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n\t\t#if defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE)\n\t\t\tif(u_ThreeDStartRotation){\n\t\t\t\tvec3 rotation=vec3(a_StartRotation0.xy,computeParticleRotationFloat(a_StartRotation0.z,age,normalizedAge));\n\t\t\t\tcenter += u_SizeScale.xzy*rotationByEuler(corner.x*sideVector+corner.y*upVector,rotation);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tfloat rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n\t\t\t\tfloat c = cos(rot);\n\t\t\t\tfloat s = sin(rot);\n\t\t\t\tmat2 rotation= mat2(c, -s, s, c);\n\t\t\t\tcorner=rotation*corner;\n\t\t\t\tcenter += u_SizeScale.xzy*(corner.x*sideVector+corner.y*upVector);\n\t\t\t}\n\t\t#else\n\t\t\tif(u_ThreeDStartRotation){\n\t\t\t\tcenter += u_SizeScale.xzy*rotationByEuler(corner.x*sideVector+corner.y*upVector,a_StartRotation0);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tfloat c = cos(a_StartRotation0.x);\n\t\t\t\tfloat s = sin(a_StartRotation0.x);\n\t\t\t\tmat2 rotation= mat2(c, -s, s, c);\n\t\t\t\tcorner=rotation*corner;\n\t\t\t\tcenter += u_SizeScale.xzy*(corner.x*sideVector+corner.y*upVector);\n\t\t\t}\n\t\t#endif\n   #endif\n   \n   #ifdef STRETCHEDBILLBOARD\n\tvec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n\tvec3 velocity;\n\t#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n\t    if(u_VOLSpaceType==0)\n\t\t  velocity=rotationByQuaternions(u_SizeScale*(startVelocity+lifeVelocity),worldRotation)+gravityVelocity;\n\t    else\n\t\t  velocity=rotationByQuaternions(u_SizeScale*startVelocity,worldRotation)+lifeVelocity+gravityVelocity;\n    #else\n\t    velocity= rotationByQuaternions(u_SizeScale*startVelocity,worldRotation)+gravityVelocity;\n    #endif\t\n\t\tvec3 cameraUpVector = normalize(velocity);\n\t\tvec3 direction = normalize(center-u_CameraPosition);\n        vec3 sideVector = normalize(cross(direction,normalize(velocity)));\n\t\t\n\t\tsideVector=u_SizeScale.xzy*sideVector;\n\t\tcameraUpVector=length(vec3(u_SizeScale.x,0.0,0.0))*cameraUpVector;\n\t\t\n\t    vec2 size=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n\t\t\n\t    const mat2 rotaionZHalfPI=mat2(0.0, -1.0, 1.0, 0.0);\n\t    corner=rotaionZHalfPI*corner;\n\t    corner.y=corner.y-abs(corner.y);\n\t\t\n\t    float speed=length(velocity);//TODO:\n\t    center +=sign(u_SizeScale.x)*(sign(u_StretchedBillboardLengthScale)*size.x*corner.x*sideVector+(speed*u_StretchedBillboardSpeedScale+size.y*u_StretchedBillboardLengthScale)*corner.y*cameraUpVector);\n   #endif\n   \n   #ifdef HORIZONTALBILLBOARD\n\t\tvec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n        const vec3 cameraUpVector=vec3(0.0,0.0,1.0);\n\t    const vec3 sideVector = vec3(-1.0,0.0,0.0);\n\t\t\n\t\tfloat rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n        float c = cos(rot);\n        float s = sin(rot);\n        mat2 rotation= mat2(c, -s, s, c);\n\t    corner=rotation*corner*cos(0.78539816339744830961566084581988);//TODO:临时缩小cos45,不确定U3D原因\n\t\tcorner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n        center +=u_SizeScale.xzy*(corner.x*sideVector+ corner.y*cameraUpVector);\n   #endif\n   \n   #ifdef VERTICALBILLBOARD\n\t\tvec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n        const vec3 cameraUpVector =vec3(0.0,1.0,0.0);\n        vec3 sideVector = normalize(cross(u_CameraDirection,cameraUpVector));\n\t\t\n\t\tfloat rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n        float c = cos(rot);\n        float s = sin(rot);\n        mat2 rotation= mat2(c, -s, s, c);\n\t    corner=rotation*corner*cos(0.78539816339744830961566084581988);//TODO:临时缩小cos45,不确定U3D原因\n\t\tcorner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n        center +=u_SizeScale.xzy*(corner.x*sideVector+ corner.y*cameraUpVector);\n   #endif\n   \n   #ifdef RENDERMODE_MESH\n\t    vec3 size=computeParticleSizeMesh(a_StartSize,normalizedAge);\n\t\t#if defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE)\n\t\t\tif(u_ThreeDStartRotation){\n\t\t\t\tvec3 rotation=vec3(a_StartRotation0.xy,-computeParticleRotationFloat(a_StartRotation0.z, age,normalizedAge));\n\t\t\t\tcenter+= rotationByQuaternions(u_SizeScale*rotationByEuler(a_MeshPosition*size,rotation),worldRotation);\n\t\t\t}\n\t\t\telse{\n\t\t\t\t#ifdef ROTATIONOVERLIFETIME\n\t\t\t\t\tfloat angle=computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n\t\t\t\t\tif(a_ShapePositionStartLifeTime.x!=0.0||a_ShapePositionStartLifeTime.y!=0.0){\n\t\t\t\t\t\tcenter+= (rotationByQuaternions(rotationByAxis(u_SizeScale*a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),angle),worldRotation));//已验证\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\t#ifdef SHAPE\n\t\t\t\t\t\t\tcenter+= u_SizeScale.xzy*(rotationByQuaternions(rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),angle),worldRotation));\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tif(u_SimulationSpace==0)\n\t\t\t\t\t\t\t\tcenter+=rotationByAxis(u_SizeScale*a_MeshPosition*size,vec3(0.0,0.0,-1.0),angle);//已验证\n\t\t\t\t\t\t\telse if(u_SimulationSpace==1)\n\t\t\t\t\t\t\t\tcenter+=rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,0.0,-1.0),angle),worldRotation);//已验证\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}\n\t\t\t\t#endif\n\t\t\t\t#ifdef ROTATIONOVERLIFETIMESEPERATE\n\t\t\t\t\t//TODO:是否应合并if(u_ThreeDStartRotation)分支代码,待测试\nvec3 angle=computeParticleRotationVec3(vec3(0.0,0.0,a_StartRotation0.z), age,normalizedAge);\n\t\t\t\t\tcenter+= (rotationByQuaternions(rotationByEuler(u_SizeScale*a_MeshPosition*size,vec3(angle.x,angle.y,angle.z)),worldRotation));//已验证\n\t\t\t\t#endif\t\n\t\t\t}\n\t\t#else\n\t\t\tif(u_ThreeDStartRotation){\n\t\t\t\tcenter+= rotationByQuaternions(u_SizeScale*rotationByEuler(a_MeshPosition*size,a_StartRotation0),worldRotation);//已验证\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(a_ShapePositionStartLifeTime.x!=0.0||a_ShapePositionStartLifeTime.y!=0.0){\n\t\t\t\t\tif(u_SimulationSpace==0)\n\t\t\t\t\t\tcenter+= rotationByAxis(u_SizeScale*a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),a_StartRotation0.x);\n\t\t\t\t\telse if(u_SimulationSpace==1)\n\t\t\t\t\t\tcenter+= (rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),a_StartRotation0.x),worldRotation));//已验证\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\t#ifdef SHAPE\n\t\t\t\t\t\tif(u_SimulationSpace==0)\n\t\t\t\t\t\t\tcenter+= u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),a_StartRotation0.x);\n\t\t\t\t\t\telse if(u_SimulationSpace==1)\n\t\t\t\t\t\t\tcenter+= rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),a_StartRotation0.x),worldRotation);\t\n\t\t\t\t\t#else\n\t\t\t\t\t\tif(u_SimulationSpace==0)\n\t\t\t\t\t\t\tcenter+= rotationByAxis(u_SizeScale*a_MeshPosition*size,vec3(0.0,0.0,-1.0),a_StartRotation0.x);\n\t\t\t\t\t\telse if(u_SimulationSpace==1)\n\t\t\t\t\t\t\tcenter+= rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,0.0,-1.0),a_StartRotation0.x),worldRotation);//已验证\n\t\t\t\t\t#endif\n\t\t\t\t}\n\t\t\t}\n\t\t#endif\n\t\tv_MeshColor=a_MeshColor;\n   #endif\n   \nvec4 vPos = u_View * vec4(center,1.0);\nfloat zOff = vPos.z/u_curved.z;\nvPos +=vec4(u_curved.x,u_curved.y,0.0,0.0)*zOff*zOff;\nvec4 mvp =u_Projection * vPos;\ngl_Position = mvp;\nv_Color = computeParticleColor(a_StartColor, normalizedAge);\n\t#ifdef DIFFUSEMAP\n\t\t#if defined(SPHERHBILLBOARD)||defined(STRETCHEDBILLBOARD)||defined(HORIZONTALBILLBOARD)||defined(VERTICALBILLBOARD)\n\t\t\tv_TextureCoordinate =computeParticleUV(a_CornerTextureCoordinate.zw, normalizedAge);\n\t\t#endif\n\t\t#ifdef RENDERMODE_MESH\n\t\t\tv_TextureCoordinate =computeParticleUV(a_MeshTextureCoordinate, normalizedAge);\n\t\t#endif\n\t\t\n\t\t#ifdef TILINGOFFSET\n\t\t\tv_TextureCoordinate=vec2(v_TextureCoordinate.x,1.0-v_TextureCoordinate.y)*u_TilingOffset.xy+vec2(u_TilingOffset.z,-u_TilingOffset.w);//需要特殊处理\n\t\t\tv_TextureCoordinate=vec2(v_TextureCoordinate.x,1.0-v_TextureCoordinate.y);//需要特殊处理\n\t\t#endif\n\t#endif\n    v_Discard=0.0;\n\t  \n\t#ifdef FOG\n\t\tv_PositionWorld=center;\n\t#endif\n   }\n   else\n\t{\n\t\tv_Discard=1.0;\n\t}\n}\n\n","#ifdef HIGHPRECISION\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n\nvarying float v_Discard;\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\nuniform sampler2D u_texture;\nuniform vec4 u_Tintcolor;\n\n#ifdef RENDERMODE_MESH\n\tvarying vec4 v_MeshColor;\n#endif\n\n#ifdef FOG\n\tvarying vec3 v_PositionWorld;\n\tuniform vec3 u_CameraPosition;\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\nvoid main()\n{\t\n\t#ifdef RENDERMODE_MESH\n\t\tgl_FragColor=v_MeshColor;\n\t#else\n\t\tgl_FragColor=vec4(1.0);\t\n\t#endif\n\t\t\n\t#ifdef DIFFUSEMAP\n\t\tif(v_Discard!=0.0)\n\t\t\tdiscard;\n\t\t#ifdef TINTCOLOR\n\t\t\tgl_FragColor*=texture2D(u_texture,v_TextureCoordinate)*u_Tintcolor*2.0*v_Color;\n\t\t#else\n\t\t\tgl_FragColor*=texture2D(u_texture,v_TextureCoordinate)*v_Color;\n\t\t#endif\n\t#else\n\t\t#ifdef TINTCOLOR\n\t\t\tgl_FragColor*=u_Tintcolor*2.0*v_Color;\n\t\t#else\n\t\t\tgl_FragColor*=v_Color;\n\t\t#endif\n\t#endif\n\t\n\t#ifdef FOG\n\t\tvec3 toEye=u_CameraPosition-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t\t\n\t\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t\t#ifdef ADDTIVEFOG\n\t\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t\t#else\n\t\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t\t#endif\n\t#endif\n}",{a_CornerTextureCoordinate:17,a_MeshPosition:0,a_MeshColor:1,a_MeshTextureCoordinate:2,a_ShapePositionStartLifeTime:30,a_DirectionTime:32,a_StartColor:19,a_EndColor:23,a_StartSize:20,a_StartRotation0:22,a_StartSpeed:31,a_Random0:34,a_Random1:35,a_SimulationWorldPostion:36,a_SimulationWorldRotation:37},{u_Tintcolor:[2,1],u_TilingOffset:[3,1],u_texture:[1,1],u_WorldPosition:[0,2],u_WorldRotation:[1,2],u_PositionScale:[4,2],u_SizeScale:[5,2],u_ScalingMode:[6,2],u_Gravity:[7,2],u_ThreeDStartRotation:[8,2],u_StretchedBillboardLengthScale:[9,2],u_StretchedBillboardSpeedScale:[10,2],u_SimulationSpace:[11,2],u_CurrentTime:[12,2],u_ColorOverLifeGradientAlphas:[22,2],u_ColorOverLifeGradientColors:[23,2],u_MaxColorOverLifeGradientAlphas:[24,2],u_MaxColorOverLifeGradientColors:[25,2],u_VOLVelocityConst:[13,2],u_VOLVelocityGradientX:[14,2],u_VOLVelocityGradientY:[15,2],u_VOLVelocityGradientZ:[16,2],u_VOLVelocityConstMax:[17,2],u_VOLVelocityGradientMaxX:[18,2],u_VOLVelocityGradientMaxY:[19,2],u_VOLVelocityGradientMaxZ:[20,2],u_VOLSpaceType:[21,2],u_SOLSizeGradient:[26,2],u_SOLSizeGradientX:[27,2],u_SOLSizeGradientY:[28,2],u_SOLSizeGradientZ:[29,2],u_SOLSizeGradientMax:[30,2],u_SOLSizeGradientMaxX:[31,2],u_SOLSizeGradientMaxY:[32,2],u_SOLSizeGradientMaxZ:[33,2],u_ROLAngularVelocityConst:[34,2],u_ROLAngularVelocityConstSeprarate:[35,2],u_ROLAngularVelocityGradient:[36,2],u_ROLAngularVelocityGradientX:[37,2],u_ROLAngularVelocityGradientY:[38,2],u_ROLAngularVelocityGradientZ:[39,2],u_ROLAngularVelocityGradientW:[40,2],u_ROLAngularVelocityConstMax:[41,2],u_ROLAngularVelocityConstMaxSeprarate:[42,2],u_ROLAngularVelocityGradientMax:[43,2],u_ROLAngularVelocityGradientMaxX:[44,2],u_ROLAngularVelocityGradientMaxY:[45,2],u_ROLAngularVelocityGradientMaxZ:[46,2],u_ROLAngularVelocityGradientMaxW:[47,2],u_TSACycles:[48,2],u_TSASubUVLength:[49,2],u_TSAGradientUVs:[50,2],u_TSAMaxGradientUVs:[51,2],u_CameraPosition:[0,3],u_CameraDirection:[5,3],u_CameraUp:[6,3],u_View:[1,3],u_Projection:[2,3],u_curved:[16,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4]});e.SHADERDEFINE_DIFFUSEMAP=i.registerMaterialDefine("DIFFUSEMAP"),e.SHADERDEFINE_TINTCOLOR=i.registerMaterialDefine("TINTCOLOR"),e.SHADERDEFINE_ADDTIVEFOG=i.registerMaterialDefine("ADDTIVEFOG"),e.SHADERDEFINE_TILINGOFFSET=i.registerMaterialDefine("TILINGOFFSET"),n.ShuriKenParticle3D.SHADERDEFINE_RENDERMODE_BILLBOARD=i.registerSpriteDefine("SPHERHBILLBOARD"),n.ShuriKenParticle3D.SHADERDEFINE_RENDERMODE_STRETCHEDBILLBOARD=i.registerSpriteDefine("STRETCHEDBILLBOARD"),n.ShuriKenParticle3D.SHADERDEFINE_RENDERMODE_HORIZONTALBILLBOARD=i.registerSpriteDefine("HORIZONTALBILLBOARD"),n.ShuriKenParticle3D.SHADERDEFINE_RENDERMODE_VERTICALBILLBOARD=i.registerSpriteDefine("VERTICALBILLBOARD"),n.ShuriKenParticle3D.SHADERDEFINE_COLOROVERLIFETIME=i.registerSpriteDefine("COLOROVERLIFETIME"),n.ShuriKenParticle3D.SHADERDEFINE_RANDOMCOLOROVERLIFETIME=i.registerSpriteDefine("RANDOMCOLOROVERLIFETIME"),n.ShuriKenParticle3D.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT=i.registerSpriteDefine("VELOCITYOVERLIFETIMECONSTANT"),n.ShuriKenParticle3D.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE=i.registerSpriteDefine("VELOCITYOVERLIFETIMECURVE"),n.ShuriKenParticle3D.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT=i.registerSpriteDefine("VELOCITYOVERLIFETIMERANDOMCONSTANT"),n.ShuriKenParticle3D.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE=i.registerSpriteDefine("VELOCITYOVERLIFETIMERANDOMCURVE"),n.ShuriKenParticle3D.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE=i.registerSpriteDefine("TEXTURESHEETANIMATIONCURVE"),n.ShuriKenParticle3D.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE=i.registerSpriteDefine("TEXTURESHEETANIMATIONRANDOMCURVE"),n.ShuriKenParticle3D.SHADERDEFINE_ROTATIONOVERLIFETIME=i.registerSpriteDefine("ROTATIONOVERLIFETIME"),n.ShuriKenParticle3D.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE=i.registerSpriteDefine("ROTATIONOVERLIFETIMESEPERATE"),n.ShuriKenParticle3D.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT=i.registerSpriteDefine("ROTATIONOVERLIFETIMECONSTANT"),n.ShuriKenParticle3D.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE=i.registerSpriteDefine("ROTATIONOVERLIFETIMECURVE"),n.ShuriKenParticle3D.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS=i.registerSpriteDefine("ROTATIONOVERLIFETIMERANDOMCONSTANTS"),n.ShuriKenParticle3D.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES=i.registerSpriteDefine("ROTATIONOVERLIFETIMERANDOMCURVES"),n.ShuriKenParticle3D.SHADERDEFINE_SIZEOVERLIFETIMECURVE=i.registerSpriteDefine("SIZEOVERLIFETIMECURVE"),n.ShuriKenParticle3D.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE=i.registerSpriteDefine("SIZEOVERLIFETIMECURVESEPERATE"),n.ShuriKenParticle3D.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES=i.registerSpriteDefine("SIZEOVERLIFETIMERANDOMCURVES"),n.ShuriKenParticle3D.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE=i.registerSpriteDefine("SIZEOVERLIFETIMERANDOMCURVESSEPERATE"),n.ShuriKenParticle3D.SHADERDEFINE_RENDERMODE_MESH=i.registerSpriteDefine("RENDERMODE_MESH"),n.ShuriKenParticle3D.SHADERDEFINE_SHAPE=i.registerSpriteDefine("SHAPE");},e.CopyLayaMaterial=function(t){if(t instanceof n.ShuriKenParticle3D)if(1<t.particleRender.sharedMaterials.length){for(var e=[],i=0;i<t.particleRender.sharedMaterials.length;i++){var r=t.particleRender.sharedMaterials[i],a=new curvedworld.ShurikenParticleMaterial();r.cloneTo(a),e.push(a);}
t.particleRender.sharedMaterials=e;}else r=t.particleRender.sharedMaterial,a=new curvedworld.ShurikenParticleMaterial(),r.cloneTo(a),t.particleRender.sharedMaterial=a;},e.RENDERMODE_OPAQUE=1,e.RENDERMODE_OPAQUEDOUBLEFACE=2,e.RENDERMODE_CUTOUT=3,e.RENDERMODE_CUTOUTDOUBLEFACE=4,e.RENDERMODE_TRANSPARENT=13,e.RENDERMODE_TRANSPARENTDOUBLEFACE=14,e.RENDERMODE_ADDTIVE=15,e.RENDERMODE_ADDTIVEDOUBLEFACE=16,e.RENDERMODE_DEPTHREAD_TRANSPARENT=5,e.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,e.RENDERMODE_DEPTHREAD_ADDTIVE=7,e.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,e.RENDERMODE_NONDEPTH_TRANSPARENT=9,e.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,e.RENDERMODE_NONDEPTH_ADDTIVE=11,e.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,e.SHADERDEFINE_DIFFUSEMAP=0,e.SHADERDEFINE_TINTCOLOR=0,e.SHADERDEFINE_TILINGOFFSET=0,e.SHADERDEFINE_ADDTIVEFOG=0,e.DIFFUSETEXTURE=1,e.TINTCOLOR=2,e.TILINGOFFSET=3,i(e,["defaultMaterial",function(){return this.defaultMaterial=new e();},"shaderDefines",function(){return this.shaderDefines=new ShaderDefines$1(BaseMaterial.shaderDefines);}]);}(n.BaseMaterial),function(){function t(){}
r(t,"curvedworld.Manager"),t.SetCurved=function(e,n,i){t.value.x=n,t.value.y=i,t.value.z=t.distance,e._shaderValues.setValue(t.CURVED_VALUE_ID,t.value.elements);},t.value=new n.Vector3(0,0,0),t.CURVED_VALUE_ID=16,t.distance=60;}();}(window,document,Laya),function(t,e,n){n.un,n.uns;var i=n.static,r=n.class,a=n.getset,o=n.__newvec,s=laya.utils.Browser,l=laya.utils.Byte,u=laya.filters.ColorFilter,h=laya.utils.Ease,c=laya.events.Event,_=laya.events.EventDispatcher,f=(laya.display.Graphics,laya.html.dom.HTMLDivElement),d=laya.utils.Handler,p=laya.utils.HitArea,m=laya.display.Input,g=laya.utils.Log,y=(laya.display.Node,laya.maths.Point),v=laya.maths.Rectangle,I=laya.renders.Render,x=(laya.media.Sound,laya.media.SoundManager),T=laya.display.Sprite,S=(laya.display.Stage,laya.display.Text),b=laya.resource.Texture,w=laya.utils.Tween,D=laya.utils.Utils;n.interface("fairygui.IUISource"),n.interface("fairygui.IColorGear"),n.interface("fairygui.IAnimationGear");var C=function(){function t(){this.fromPage=null,this.toPage=null;}
r(t,"fairygui.action.ControllerAction");var e=t.prototype;return e.run=function(t,e,n){null!=this.fromPage&&0!=this.fromPage.length&&-1==this.fromPage.indexOf(e)||null!=this.toPage&&0!=this.toPage.length&&-1==this.toPage.indexOf(n)?this.leave(t):this.enter(t);},e.enter=function(t){},e.leave=function(t){},e.setup=function(t){var e;(e=t.getAttribute("fromPage"))&&(this.fromPage=e.split(",")),(e=t.getAttribute("toPage"))&&(this.toPage=e.split(","));},t.createAction=function(t){switch(t){case "play_transition":return new pt();case "change_page":return new dt();}
return null;},t;}(),E=function(){function t(){this._asset=null,this._asset=n.loader;}
r(t,"fairygui.AssetProxy");var e=t.prototype;return e.getRes=function(t){return this._asset.getRes(t);},e.load=function(t,e,n,i,r,a){void 0===r&&(r=1),void 0===a&&(a=!0),this._asset.load(t,e,n,i,r,a);},e.setAsset=function(t){this._asset=t;},a(1,t,"inst",function(){return null==fairygui.AssetProxy._inst&&(t._inst=new t()),fairygui.AssetProxy._inst;}),t._inst=null,t;}(),P=(function(){function t(){this.callback=null,this._itemList=null,this._objectPool=null,this._index=0,this._itemList=[],this._objectPool=[];}
r(t,"fairygui.AsyncOperation");var e=t.prototype;e.createObject=function(t,e){var n=st.getByName(t);if(!n)throw new Error("package not found: "+t);var i=n.getItemByName(e);if(!i)throw new Error("resource not found: "+e);this.internalCreateObject(i);},e.createObjectFromURL=function(t){var e=st.getItemByURL(t);if(!e)throw new Error("resource not found: "+t);this.internalCreateObject(e);},e.cancel=function(){if(n.timer.clear(this,this.run),(this._itemList.length=0)<this._objectPool.length){for(var t in this._objectPool){this._objectPool[t].dispose();}
this._objectPool.length=0;}},e.internalCreateObject=function(t){this._itemList.length=0,this._objectPool.length=0,this.collectComponentChildren(t),this._itemList.push(new V(t,null)),this._index=0,n.timer.frameLoop(1,this,this.run);},e.collectComponentChildren=function(t){t.owner.getItemAsset(t);for(var e=t.displayList.length,n=0;n<e;n++){var i=t.displayList[n];if(null!=i.packageItem&&4==i.packageItem.type)this.collectComponentChildren(i.packageItem);else if("list"==i.type){var r=null;i.listItemCount=0;for(var a=i.desc.childNodes,o=a.length,s=0;s<o;s++){var l=a[s];if("item"==l.nodeName){var u=l.getAttribute("url");if(u||(null==r&&(r=i.desc.getAttribute("defaultItem")),u=r)){var h=st.getItemByURL(u);h&&(4==h.type&&this.collectComponentChildren(h),this._itemList.push(new V(h,null)),i.listItemCount++);}}}}
this._itemList.push(i);}},e.run=function(){for(var t,e,i=0,r=0,a=s.now(),o=at.frameTimeForAsyncUIConstruction,l=this._itemList.length;this._index<l;){if(null!=(e=this._itemList[this._index]).packageItem)(t=ot.newObject(e.packageItem)).packageItem=e.packageItem,this._objectPool.push(t),st._constructing++,4==e.packageItem.type?(i=this._objectPool.length-e.packageItem.displayList.length-1,t.constructFromResource2(this._objectPool,i),this._objectPool.splice(i,e.packageItem.displayList.length)):t.constructFromResource(),st._constructing--;else if(t=ot.newObject2(e.type),this._objectPool.push(t),"list"==e.type&&0<e.listItemCount){for(i=this._objectPool.length-e.listItemCount-1,r=0;r<e.listItemCount;r++){t.itemPool.returnObject(this._objectPool[r+i]);}
this._objectPool.splice(i,e.listItemCount);}
if(this._index++,this._index%5==0&&s.now()-a>=o)return;}
n.timer.clear(this,this.run);var u=this._objectPool[0];this._itemList.length=0,this._objectPool.length=0,null!=this.callback&&this.callback.runWith(u);};}(),function(){function t(){}
return r(t,"fairygui.AutoSizeType"),t.parse=function(t){switch(t){case "none":return 0;case "both":return 1;case "height":return 2;default:return 0;}},t.None=0,t.Both=1,t.Height=2,t;}()),M=function(){function t(){}
return r(t,"fairygui.ButtonMode"),t.parse=function(t){switch(t){case "Common":return 0;case "Check":return 1;case "Radio":return 2;default:return 0;}},t.Common=0,t.Check=1,t.Radio=2,t;}(),A=function(){function t(){}
return r(t,"fairygui.ChildrenRenderOrder"),t.parse=function(t){switch(t){case "ascent":return 0;case "descent":return 1;case "arch":return 2;default:return 0;}},t.Ascent=0,t.Descent=1,t.Arch=2,t;}(),O=function(){function t(){this.id=null,this.size=0,this.ttf=!1,this.glyphs=null,this.resizable=!1,this.glyphs={};}
return r(t,"fairygui.display.BitmapFont",null,"BitmapFont$1"),t;}(),R=function(){function t(){this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.width=0,this.height=0,this.advance=0,this.lineHeight=0,this.channel=0,this.texture=null;}
return r(t,"fairygui.display.BMGlyph"),t;}(),L=function(){function t(){this.rect=null,this.addDelay=0,this.texture=null,this.rect=new v();}
return r(t,"fairygui.display.Frame"),t;}(),F=function(){function t(){this.reachEnding=!1,this.reversed=!1,this.repeatedCount=0,this._curFrame=0,this._curFrameDelay=0,this._lastUpdateSeq=0;}
r(t,"fairygui.display.PlayState");var e=t.prototype;return e.update=function(t){var e=NaN,i=n.timer.currFrame;e=i-this._lastUpdateSeq!=1?0:n.timer.delta,this._lastUpdateSeq=i,this.reachEnding=!1,this._curFrameDelay+=e;var r=t.interval+t.frames[this._curFrame].addDelay+(0==this._curFrame&&0<this.repeatedCount?t.repeatDelay:0);this._curFrameDelay<r||(this._curFrameDelay-=r,this._curFrameDelay>t.interval&&(this._curFrameDelay=t.interval),t.swing?this.reversed?(this._curFrame--,this._curFrame<=0&&(this._curFrame=0,this.repeatedCount++,this.reversed=!this.reversed)):(this._curFrame++,this._curFrame>t.frameCount-1&&(this._curFrame=Math.max(0,t.frameCount-2),this.repeatedCount++,this.reachEnding=!0,this.reversed=!this.reversed)):(this._curFrame++,this._curFrame>t.frameCount-1&&(this._curFrame=0,this.repeatedCount++,this.reachEnding=!0)));},e.rewind=function(){this._curFrame=0,this._curFrameDelay=0,this.reversed=!1,this.reachEnding=!1;},e.reset=function(){this._curFrame=0,this._curFrameDelay=0,this.repeatedCount=0,this.reachEnding=!1,this.reversed=!1;},e.copy=function(t){this._curFrame=t._curFrame,this._curFrameDelay=t._curFrameDelay,this.repeatedCount=t.repeatedCount,this.reachEnding=t.reachEnding,this.reversed=t.reversed;},a(0,e,"currentFrame",function(){return this._curFrame;},function(t){this._curFrame=t,this._curFrameDelay=0;}),t;}(),V=function(){function t(t,e){this.packageItem=null,this.type=null,this.desc=null,this.listItemCount=0,this.packageItem=t,this.type=e;}
return r(t,"fairygui.DisplayListItem"),t;}(),N=(function(){function t(){this._agent=null,this._sourceData=null,this._agent=new Pt(),this._agent.draggable=!0,this._agent.touchable=!1,this._agent.setSize(100,100),this._agent.setPivot(.5,.5,!0),this._agent.align="center",this._agent.verticalAlign="middle",this._agent.sortingOrder=1e6,this._agent.on("fui_drag_end",this,this.__dragEnd);}
r(t,"fairygui.DragDropManager");var e=t.prototype;e.startDrag=function(t,e,i,r){if(void 0===r&&(r=-1),null==this._agent.parent){this._sourceData=i,this._agent.url=e,Ut.inst.addChild(this._agent);var a=Ut.inst.globalToLocal(n.stage.mouseX,n.stage.mouseY);this._agent.setXY(a.x,a.y),this._agent.startDrag(r);}},e.cancel=function(){null!=this._agent.parent&&(this._agent.stopDrag(),Ut.inst.removeChild(this._agent),this._sourceData=null);},e.__dragEnd=function(t){if(null!=this._agent.parent){Ut.inst.removeChild(this._agent);var e=this._sourceData;this._sourceData=null;for(var n=G.cast(t.target);null!=n;){if(n.displayObject.hasListener("fui_drop"))return n.requestFocus(),void n.displayObject.event("fui_drop",[e,N.createEvent("fui_drop",n.displayObject,t)]);n=n.parent;}}},a(0,e,"dragAgent",function(){return this._agent;}),a(0,e,"dragging",function(){return null!=this._agent.parent;}),a(1,t,"inst",function(){return null==fairygui.DragDropManager._inst&&(fairygui.DragDropManager._inst=new t()),fairygui.DragDropManager._inst;}),t._inst=null;}(),function(){function t(){}
return r(t,"fairygui.Events"),t.createEvent=function(t,e,n){return fairygui.Events.$event.setTo(t,e,n?n.target:e),fairygui.Events.$event.nativeEvent=n?(fairygui.Events.$event.touchId=n.touchId,n.nativeEvent):null,fairygui.Events.$event._stoped=!1,fairygui.Events.$event;},t.dispatch=function(t,e,n){e.event(t,fairygui.Events.createEvent(t,e,n));},t.STATE_CHANGED="fui_state_changed",t.XY_CHANGED="fui_xy_changed",t.SIZE_CHANGED="fui_size_changed",t.SIZE_DELAY_CHANGE="fui_size_delay_change",t.CLICK_ITEM="fui_click_item",t.SCROLL="fui_scroll",t.SCROLL_END="fui_scroll_end",t.DROP="fui_drop",t.FOCUS_CHANGED="fui_focus_changed",t.DRAG_START="fui_drag_start",t.DRAG_MOVE="fui_drag_move",t.DRAG_END="fui_drag_end",t.PULL_DOWN_RELEASE="fui_pull_down_release",t.PULL_UP_RELEASE="fui_pull_up_release",t.GEAR_STOP="fui_gear_stop",i(t,["$event",function(){return this.$event=new c();}]),t;}()),U=function(){function t(){}
return r(t,"fairygui.FlipType"),t.parse=function(t){switch(t){case "hz":return 1;case "vt":return 2;case "both":return 3;default:return 0;}},t.None=0,t.Horizontal=1,t.Vertical=2,t.Both=3,t;}(),G=function(){function t(){this.data=null,this.packageItem=null,this._x=0,this._y=0,this._alpha=1,this._rotation=0,this._visible=!0,this._touchable=!0,this._grayed=!1,this._draggable=!1,this._scaleX=1,this._scaleY=1,this._skewX=0,this._skewY=0,this._pivotX=0,this._pivotY=0,this._pivotAsAnchor=!1,this._pivotOffsetX=0,this._pivotOffsetY=0,this._sortingOrder=0,this._internalVisible=!0,this._handlingController=!1,this._focusable=!1,this._tooltips=null,this._pixelSnapping=!1,this._relations=null,this._group=null,this._gears=null,this._dragBounds=null,this._displayObject=null,this._yOffset=0,this._sizeImplType=0,this.minWidth=0,this.minHeight=0,this.maxWidth=0,this.maxHeight=0,this.sourceWidth=0,this.sourceHeight=0,this.initWidth=0,this.initHeight=0,this._parent=null,this._width=0,this._height=0,this._rawWidth=0,this._rawHeight=0,this._id=null,this._name=null,this._underConstruct=!1,this._gearLocked=!1,this._sizePercentInGroup=0,this._touchDownPoint=null,this._id=""+fairygui.GObject._gInstanceCounter++,this._name="",this.createDisplayObject(),this._relations=new Q(this),this._gears=o(8,null);}
r(t,"fairygui.GObject");var e=t.prototype;return e.setXY=function(e,n){if(this._x!=e||this._y!=n){var i=e-this._x,r=n-this._y;this._x=e,this._y=n,this.handleXYChanged(),this instanceof fairygui.GGroup&&this.moveChildren(i,r),this.updateGear(1),!this._parent||this._parent instanceof fairygui.GList||(this._parent.setBoundsChangedFlag(),null!=this._group&&this._group.setBoundsChangedFlag(),this.displayObject.event("fui_xy_changed")),t.draggingObject!=this||t.sUpdateInDragging||this.localToGlobalRect(0,0,this.width,this.height,t.sGlobalRect);}},e.center=function(t){var e;void 0===t&&(t=!1),e=null!=this._parent?this.parent:this.root,this.setXY((e.width-this.width)/2,(e.height-this.height)/2),t&&(this.addRelation(e,3),this.addRelation(e,10));},e.setSize=function(t,e,n){if(void 0===n&&(n=!1),this._rawWidth!=t||this._rawHeight!=e){this._rawWidth=t,this._rawHeight=e,t<this.minWidth&&(t=this.minWidth),e<this.minHeight&&(e=this.minHeight),0<this.maxWidth&&t>this.maxWidth&&(t=this.maxWidth),0<this.maxHeight&&e>this.maxHeight&&(e=this.maxHeight);var i=t-this._width,r=e-this._height;this._width=t,this._height=e,this.handleSizeChanged(),0==this._pivotX&&0==this._pivotY||(this._pivotAsAnchor?this.applyPivot():(n||this.setXY(this.x-this._pivotX*i,this.y-this._pivotY*r),this.updatePivotOffset())),this instanceof fairygui.GGroup&&this.resizeChildren(i,r),this.updateGear(2),this._parent&&(this._relations.onOwnerSizeChanged(i,r,this._pivotAsAnchor||!n),this._parent.setBoundsChangedFlag(),null!=this._group&&this._group.setBoundsChangedFlag(!0)),this.displayObject.event("fui_size_changed");}},e.ensureSizeCorrect=function(){},e.setScale=function(t,e){this._scaleX==t&&this._scaleY==e||(this._scaleX=t,this._scaleY=e,this.handleScaleChanged(),this.applyPivot(),this.updateGear(2));},e.setSkew=function(t,e){this._skewX==t&&this._skewY==e||(this._skewX=t,this._skewY=e,null!=this._displayObject&&(this._displayObject.skew(-t,e),this.applyPivot()));},e.setPivot=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1),this._pivotX==t&&this._pivotY==e&&this._pivotAsAnchor==n||(this._pivotX=t,this._pivotY=e,this._pivotAsAnchor=n,this.updatePivotOffset(),this.handleXYChanged());},e.internalSetPivot=function(t,e,n){this._pivotX=t,this._pivotY=e,this._pivotAsAnchor=n,this._pivotAsAnchor&&this.handleXYChanged();},e.updatePivotOffset=function(){if(null!=this._displayObject)if(!this._displayObject.transform||0==this._pivotX&&0==this._pivotY)this._pivotOffsetX=0,this._pivotOffsetY=0;else{0==this._sizeImplType?(fairygui.GObject.sHelperPoint.x=this._pivotX*this._width,fairygui.GObject.sHelperPoint.y=this._pivotY*this._height):(fairygui.GObject.sHelperPoint.x=this._pivotX*this.sourceWidth,fairygui.GObject.sHelperPoint.y=this._pivotY*this.sourceHeight);var t=this._displayObject.transform.transformPoint(fairygui.GObject.sHelperPoint);this._pivotOffsetX=this._pivotX*this._width-t.x,this._pivotOffsetY=this._pivotY*this._height-t.y;}},e.applyPivot=function(){0==this._pivotX&&0==this._pivotY||(this.updatePivotOffset(),this.handleXYChanged());},e.requestFocus=function(){for(var t=this;t&&!t._focusable;){t=t.parent;}
null!=t&&(this.root.focus=t);},e.__rollOver=function(t){n.timer.once(100,this,this.__doShowTooltips);},e.__doShowTooltips=function(){this.root&&this.root.showTooltips(this._tooltips);},e.__rollOut=function(t){n.timer.clear(this,this.__doShowTooltips),this.root.hideTooltips();},e.getGear=function(t){var e=this._gears[t];if(null==e){switch(t){case 0:e=new It(this);break;case 1:e=new Et(this);break;case 2:e=new wt(this);break;case 3:e=new Tt(this);break;case 4:e=new vt(this);break;case 5:e=new yt(this);break;case 6:e=new Ct(this);break;case 7:e=new xt(this);break;default:throw new Error("FairyGUI: invalid gear index!");}
this._gears[t]=e;}
return e;},e.updateGear=function(t){if(!this._underConstruct&&!this._gearLocked){var e=this._gears[t];null!=e&&null!=e.controller&&e.updateState();}},e.checkGearController=function(t,e){return null!=this._gears[t]&&this._gears[t].controller==e;},e.updateGearFromRelations=function(t,e,n){null!=this._gears[t]&&this._gears[t].updateFromRelations(e,n);},e.addDisplayLock=function(){var t=this._gears[0];if(t&&t.controller){var e=t.addLock();return this.checkGearDisplay(),e;}
return 0;},e.releaseDisplayLock=function(t){var e=this._gears[0];e&&e.controller&&(e.releaseLock(t),this.checkGearDisplay());},e.checkGearDisplay=function(){if(!this._handlingController){var t=null==this._gears[0]||this._gears[0].connected;t!=this._internalVisible&&(this._internalVisible=t,this._parent&&this._parent.childStateChanged(this));}},e.addRelation=function(t,e,n){void 0===n&&(n=!1),this._relations.add(t,e,n);},e.removeRelation=function(t,e){void 0===e&&(e=0),this._relations.remove(t,e);},e.removeFromParent=function(){this._parent&&this._parent.removeChild(this);},e.dispose=function(){this.removeFromParent(),this._relations.dispose(),this._displayObject.destroy();},e.onClick=function(t,e,n){this.on("click",t,e,n);},e.offClick=function(t,e){this.off("click",t,e);},e.hasClickListener=function(){return this._displayObject.hasListener("click");},e.on=function(t,e,n,i){this._displayObject.on(t,e,n,i);},e.off=function(t,e,n){this._displayObject.off(t,e,n);},e.startDrag=function(t){void 0===t&&(t=-1),null!=this._displayObject.stage&&this.dragBegin();},e.stopDrag=function(){this.dragEnd();},e.localToGlobal=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),this._pivotAsAnchor&&(t+=this._pivotX*this._width,e+=this._pivotY*this._height),n?(n.x=t,n.y=e,this._displayObject.localToGlobal(n,!1)):((n=fairygui.GObject.sHelperPoint).x=t,n.y=e,this._displayObject.localToGlobal(n,!0));},e.globalToLocal=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),n?(n.x=t,n.y=e,this._displayObject.globalToLocal(n,!1)):((n=fairygui.GObject.sHelperPoint).x=t,n.y=e,n=this._displayObject.globalToLocal(n,!0)),this._pivotAsAnchor&&(n.x-=this._pivotX*this._width,n.y-=this._pivotY*this._height),n;},e.localToGlobalRect=function(t,e,n,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),null==r&&(r=new v());var a=this.localToGlobal(t,e);return r.x=a.x,r.y=a.y,a=this.localToGlobal(t+n,e+i),r.width=a.x-r.x,r.height=a.y-r.y,r;},e.globalToLocalRect=function(t,e,n,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),null==r&&(r=new v());var a=this.globalToLocal(t,e);return r.x=a.x,r.y=a.y,a=this.globalToLocal(t+n,e+i),r.width=a.x-r.x,r.height=a.y-r.y,r;},e.handleControllerChanged=function(t){this._handlingController=!0;for(var e=0;e<8;e++){var n=this._gears[e];null!=n&&n.controller==t&&n.apply();}
this._handlingController=!1,this.checkGearDisplay();},e.createDisplayObject=function(){this._displayObject=new T(),this._displayObject.$owner=this;},e.handleXYChanged=function(){var t=this._x,e=this._y+this._yOffset;this._pivotAsAnchor&&(t-=this._pivotX*this._width,e-=this._pivotY*this._height),this._pixelSnapping&&(t=Math.round(t),e=Math.round(e)),this._displayObject.pos(t+this._pivotOffsetX,e+this._pivotOffsetY);},e.handleSizeChanged=function(){null!=this._displayObject&&(0==this._sizeImplType||0==this.sourceWidth||0==this.sourceHeight?this._displayObject.size(this._width,this._height):this._displayObject.scale(this._width/this.sourceWidth*this._scaleX,this._height/this.sourceHeight*this._scaleY));},e.handleScaleChanged=function(){null!=this._displayObject&&(0==this._sizeImplType||0==this.sourceWidth||0==this.sourceHeight?this._displayObject.scale(this._scaleX,this._scaleY):this._displayObject.scale(this._width/this.sourceWidth*this._scaleX,this._height/this.sourceHeight*this._scaleY));},e.handleGrayedChanged=function(){this._displayObject&&(this._grayed?(null==t.grayFilter&&(t.grayFilter=new u([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])),this._displayObject.filters=[t.grayFilter]):this._displayObject.filters=null);},e.handleAlphaChanged=function(){this._displayObject&&(this._displayObject.alpha=this._alpha);},e.handleVisibleChanged=function(){this._displayObject&&(this._displayObject.visible=this.internalVisible2);},e.constructFromResource=function(){},e.setup_beforeAdd=function(t){var e,n;if(this._id=t.getAttribute("id"),this._name=t.getAttribute("name"),n=(e=t.getAttribute("xy")).split(","),this.setXY(parseInt(n[0]),parseInt(n[1])),(e=t.getAttribute("size"))&&(n=e.split(","),this.initWidth=parseInt(n[0]),this.initHeight=parseInt(n[1]),this.setSize(this.initWidth,this.initHeight,!0)),(e=t.getAttribute("restrictSize"))&&(n=e.split(","),this.minWidth=parseInt(n[0]),this.maxWidth=parseInt(n[1]),this.minHeight=parseInt(n[2]),this.maxHeight=parseInt(n[3])),(e=t.getAttribute("scale"))&&(n=e.split(","),this.setScale(parseFloat(n[0]),parseFloat(n[1]))),(e=t.getAttribute("skew"))&&(n=e.split(","),this.setSkew(parseFloat(n[0]),parseFloat(n[1]))),(e=t.getAttribute("rotation"))&&(this.rotation=parseFloat(e)),(e=t.getAttribute("pivot"))&&(n=e.split(","),e=t.getAttribute("anchor"),this.setPivot(parseFloat(n[0]),parseFloat(n[1]),"true"==e)),(e=t.getAttribute("alpha"))&&(this.alpha=parseFloat(e)),"false"==t.getAttribute("touchable")&&(this.touchable=!1),"false"==t.getAttribute("visible")&&(this.visible=!1),"true"==t.getAttribute("grayed")&&(this.grayed=!0),this.tooltips=t.getAttribute("tooltips"),(e=t.getAttribute("blend"))&&(this.blendMode=e),e=t.getAttribute("filter"))switch(e){case "color":n=(e=t.getAttribute("filterData")).split(",");var i=new ct();i.adjustBrightness(parseFloat(n[0])),i.adjustContrast(parseFloat(n[1])),i.adjustSaturation(parseFloat(n[2])),i.adjustHue(parseFloat(n[3]));var r=new u(i);this.filters=[r];}
(e=t.getAttribute("customData"))&&(this.data=e);},e.setup_afterAdd=function(t){var e=t.getAttribute("group");e&&(this._group=this._parent.getChildById(e));for(var n=t.childNodes,i=n.length,r=0;r<i;r++){var a=n[r];if(1==a.nodeType){var o=fairygui.GObject.GearXMLKeys[a.nodeName];null!=o&&this.getGear(o).setup(a);}}},e.initDrag=function(){this._draggable?this.on("mousedown",this,this.__begin):this.off("mousedown",this,this.__begin);},e.dragBegin=function(){null!=fairygui.GObject.draggingObject&&fairygui.GObject.draggingObject.stopDrag(),fairygui.GObject.sGlobalDragStart.x=n.stage.mouseX,fairygui.GObject.sGlobalDragStart.y=n.stage.mouseY,this.localToGlobalRect(0,0,this.width,this.height,fairygui.GObject.sGlobalRect),fairygui.GObject.draggingObject=this,n.stage.on("mousemove",this,this.__moving2),n.stage.on("mouseup",this,this.__end2);},e.dragEnd=function(){fairygui.GObject.draggingObject==this&&(n.stage.off("mousemove",this,this.__moving2),n.stage.off("mouseup",this,this.__end2),fairygui.GObject.draggingObject=null),fairygui.GObject.sDraggingQuery=!1;},e.reset=function(){n.stage.off("mousemove",this,this.__moving),n.stage.off("mouseup",this,this.__end);},e.__begin=function(){null==this._touchDownPoint&&(this._touchDownPoint=new y()),this._touchDownPoint.x=n.stage.mouseX,this._touchDownPoint.y=n.stage.mouseY,n.stage.on("mousemove",this,this.__moving),n.stage.on("mouseup",this,this.__end);},e.__end=function(){this.reset();},e.__moving=function(t){var e=at.touchDragSensitivity;null!=this._touchDownPoint&&Math.abs(this._touchDownPoint.x-n.stage.mouseX)<e&&Math.abs(this._touchDownPoint.y-n.stage.mouseY)<e||(this.reset(),fairygui.GObject.sDraggingQuery=!0,N.dispatch("fui_drag_start",this._displayObject,t),fairygui.GObject.sDraggingQuery&&this.dragBegin());},e.__moving2=function(e){var i=n.stage.mouseX-fairygui.GObject.sGlobalDragStart.x+fairygui.GObject.sGlobalRect.x,r=n.stage.mouseY-fairygui.GObject.sGlobalDragStart.y+fairygui.GObject.sGlobalRect.y;if(null!=this._dragBounds){var a=Ut.inst.localToGlobalRect(this._dragBounds.x,this._dragBounds.y,this._dragBounds.width,this._dragBounds.height,fairygui.GObject.sDragHelperRect);i<a.x?i=a.x:i+fairygui.GObject.sGlobalRect.width>a.right&&(i=a.right-fairygui.GObject.sGlobalRect.width)<a.x&&(i=a.x),r<a.y?r=a.y:r+fairygui.GObject.sGlobalRect.height>a.bottom&&(r=a.bottom-fairygui.GObject.sGlobalRect.height)<a.y&&(r=a.y);}
t.sUpdateInDragging=!0;var o=this.parent.globalToLocal(i,r,fairygui.GObject.sHelperPoint);this.setXY(Math.round(o.x),Math.round(o.y)),t.sUpdateInDragging=!1,N.dispatch("fui_drag_move",this._displayObject,e);},e.__end2=function(t){fairygui.GObject.draggingObject==this&&(this.stopDrag(),N.dispatch("fui_drag_end",this._displayObject,t));},a(0,e,"yMin",function(){return this._pivotAsAnchor?this._y-this._height*this._pivotY:this._y;},function(t){this._pivotAsAnchor?this.setXY(this._x,t+this._height*this._pivotY):this.setXY(this._x,t);}),a(0,e,"id",function(){return this._id;}),a(0,e,"name",function(){return this._name;},function(t){this._name=t;}),a(0,e,"rotation",function(){return this._rotation;},function(t){this._rotation!=t&&(this._rotation=t,null!=this._displayObject&&(this._displayObject.rotation=this.normalizeRotation,this.applyPivot()),this.updateGear(3));}),a(0,e,"width",function(){return this.ensureSizeCorrect(),this._relations.sizeDirty&&this._relations.ensureRelationsSizeCorrect(),this._width;},function(t){this.setSize(t,this._rawHeight);}),a(0,e,"x",function(){return this._x;},function(t){this.setXY(t,this._y);}),a(0,e,"draggable",function(){return this._draggable;},function(t){this._draggable!=t&&(this._draggable=t,this.initDrag());}),a(0,e,"y",function(){return this._y;},function(t){this.setXY(this._x,t);}),a(0,e,"gearXY",function(){return this.getGear(1);}),a(0,e,"xMin",function(){return this._pivotAsAnchor?this._x-this._width*this._pivotX:this._x;},function(t){this._pivotAsAnchor?this.setXY(t+this._width*this._pivotX,this._y):this.setXY(t,this._y);}),a(0,e,"pixelSnapping",function(){return this._pixelSnapping;},function(t){this._pixelSnapping!=t&&(this._pixelSnapping=t,this.handleXYChanged());}),a(0,e,"height",function(){return this.ensureSizeCorrect(),this._relations.sizeDirty&&this._relations.ensureRelationsSizeCorrect(),this._height;},function(t){this.setSize(this._rawWidth,t);}),a(0,e,"asButton",function(){return this;}),a(0,e,"actualWidth",function(){return this.width*Math.abs(this._scaleX);}),a(0,e,"actualHeight",function(){return this.height*Math.abs(this._scaleY);}),a(0,e,"blendMode",function(){return this._displayObject.blendMode;},function(t){this._displayObject.blendMode=t;}),a(0,e,"scaleX",function(){return this._scaleX;},function(t){this.setScale(t,this._scaleY);}),a(0,e,"scaleY",function(){return this._scaleY;},function(t){this.setScale(this._scaleX,t);}),a(0,e,"skewX",function(){return this._skewX;},function(t){this.setScale(t,this._skewY);}),a(0,e,"pivotAsAnchor",function(){return this._pivotAsAnchor;}),a(0,e,"skewY",function(){return this._skewY;},function(t){this.setSkew(this._skewX,t);}),a(0,e,"pivotX",function(){return this._pivotX;},function(t){this.setPivot(t,this._pivotY);}),a(0,e,"asLoader",function(){return this;}),a(0,e,"asTextInput",function(){return this;}),a(0,e,"displayObject",function(){return this._displayObject;}),a(0,e,"normalizeRotation",function(){var t=this._rotation%360;return 180<t?t-=360:t<-180&&(t=360+t),t;}),a(0,e,"pivotY",function(){return this._pivotY;},function(t){this.setPivot(this._pivotX,t);}),a(0,e,"touchable",function(){return this._touchable;},function(t){if(this._touchable!=t){if(this._touchable=t,this.updateGear(3),this instanceof fairygui.GImage||this instanceof fairygui.GMovieClip||this instanceof fairygui.GTextField&&!(this instanceof fairygui.GTextInput)&&!(this instanceof fairygui.GRichTextField))return;null!=this._displayObject&&(this._displayObject.mouseEnabled=this._touchable);}}),a(0,e,"alpha",function(){return this._alpha;},function(t){this._alpha!=t&&(this._alpha=t,this.handleAlphaChanged(),this.updateGear(3));}),a(0,e,"grayed",function(){return this._grayed;},function(t){this._grayed!=t&&(this._grayed=t,this.handleGrayedChanged(),this.updateGear(3));}),a(0,e,"dragBounds",function(){return this._dragBounds;},function(t){this._dragBounds=t;}),a(0,e,"asProgress",function(){return this;}),a(0,e,"enabled",function(){return!this._grayed&&this._touchable;},function(t){this.grayed=!t,this.touchable=t;}),a(0,e,"sortingOrder",function(){return this._sortingOrder;},function(t){if(t<0&&(t=0),this._sortingOrder!=t){var e=this._sortingOrder;this._sortingOrder=t,null!=this._parent&&this._parent.childSortingOrderChanged(this,e,this._sortingOrder);}}),a(0,e,"visible",function(){return this._visible;},function(t){this._visible!=t&&(this._visible=t,this.handleVisibleChanged(),this._parent&&this._parent.setBoundsChangedFlag());}),a(0,e,"internalVisible",function(){return this._internalVisible&&(!this._group||this._group.internalVisible)&&!this._displayObject._$P.maskParent;}),a(0,e,"icon",function(){return null;},function(t){}),a(0,e,"internalVisible2",function(){return this._visible&&(!this._group||this._group.internalVisible2);}),a(0,e,"asGraph",function(){return this;}),a(0,e,"gearSize",function(){return this.getGear(2);}),a(0,e,"focusable",function(){return this._focusable;},function(t){this._focusable=t;}),a(0,e,"focused",function(){return this.root.focus==this;}),a(0,e,"tooltips",function(){return this._tooltips;},function(t){this._tooltips&&(this.off("mouseover",this,this.__rollOver),this.off("mouseout",this,this.__rollOut)),this._tooltips=t,this._tooltips&&(this.on("mouseover",this,this.__rollOver),this.on("mouseout",this,this.__rollOut));}),a(0,e,"dragging",function(){return fairygui.GObject.draggingObject==this;}),a(0,e,"group",function(){return this._group;},function(t){this._group!=t&&(null!=this._group&&this._group.setBoundsChangedFlag(!0),this._group=t,null!=this._group&&this._group.setBoundsChangedFlag(!0));}),a(0,e,"filters",function(){return this._displayObject.filters;},function(t){this._displayObject.filters=t;}),a(0,e,"inContainer",function(){return null!=this._displayObject&&null!=this._displayObject.parent;}),a(0,e,"resourceURL",function(){return null!=this.packageItem?"ui://"+this.packageItem.owner.id+this.packageItem.id:null;}),a(0,e,"onStage",function(){return null!=this._displayObject&&null!=this._displayObject.stage;}),a(0,e,"root",function(){if(this instanceof fairygui.GRoot)return this;for(var t=this._parent;t;){if(t instanceof fairygui.GRoot)return t;t=t.parent;}
return Ut.inst;}),a(0,e,"gearLook",function(){return this.getGear(3);}),a(0,e,"asCom",function(){return this;}),a(0,e,"relations",function(){return this._relations;}),a(0,e,"parent",function(){return this._parent;},function(t){this._parent=t;}),a(0,e,"asLabel",function(){return this;}),a(0,e,"asImage",function(){return this;}),a(0,e,"asTextField",function(){return this;}),a(0,e,"asGroup",function(){return this;}),a(0,e,"asRichTextField",function(){return this;}),a(0,e,"asList",function(){return this;}),a(0,e,"asSlider",function(){return this;}),a(0,e,"asComboBox",function(){return this;}),a(0,e,"asMovieClip",function(){return this;}),a(0,e,"text",function(){return null;},function(t){}),t.cast=function(t){return t.$owner;},t.draggingObject=null,t._gInstanceCounter=0,t.grayFilter=null,t.sDraggingQuery=!1,t.sUpdateInDragging=!1,i(t,["GearXMLKeys",function(){return this.GearXMLKeys={gearDisplay:0,gearXY:1,gearSize:2,gearLook:3,gearColor:4,gearAni:5,gearText:6,gearIcon:7};},"sGlobalDragStart",function(){return this.sGlobalDragStart=new y();},"sGlobalRect",function(){return this.sGlobalRect=new v();},"sHelperPoint",function(){return this.sHelperPoint=new y();},"sDragHelperRect",function(){return this.sDragHelperRect=new v();}]),t;}(),B=function(){function t(t){this._tween=!1,this._easeType=null,this._tweenTime=.3,this._delay=0,this._displayLockToken=0,this._owner=null,this._controller=null,this._owner=t,this._easeType=h.quadOut;}
r(t,"fairygui.GearBase");var e=t.prototype;return e.setup=function(t){var e;if(this._controller=this._owner.parent.getController(t.getAttribute("controller")),null!=this._controller)if(this.init(),(e=t.getAttribute("tween"))&&(this._tween=!0),(e=t.getAttribute("ease"))&&(this._easeType=ut.parseEaseType(e)),(e=t.getAttribute("duration"))&&(this._tweenTime=parseFloat(e)),(e=t.getAttribute("delay"))&&(this._delay=parseFloat(e)),this instanceof fairygui.GearDisplay){if(e=t.getAttribute("pages")){var n=e.split(",");this.pages=n;}}else{var i,r;if((e=t.getAttribute("pages"))&&(i=e.split(",")),i){r=null!=(e=t.getAttribute("values"))?e.split("|"):[];for(var a=0;a<i.length;a++){null==(e=r[a])&&(e=""),this.addStatus(i[a],e);}}
(e=t.getAttribute("default"))&&this.addStatus(null,e);}},e.updateFromRelations=function(t,e){},e.addStatus=function(t,e){},e.init=function(){},e.apply=function(){},e.updateState=function(){},a(0,e,"controller",function(){return this._controller;},function(t){t!=this._controller&&(this._controller=t,this._controller&&this.init());}),a(0,e,"tween",function(){return this._tween;},function(t){this._tween=t;}),a(0,e,"delay",function(){return this._delay;},function(t){this._delay=t;}),a(0,e,"tweenTime",function(){return this._tweenTime;},function(t){this._tweenTime=t;}),a(0,e,"easeType",function(){return this._easeType;},function(t){this._easeType=t;}),t.disableAllTweenEffect=!1,t;}(),k=function(){function t(){this._pool=null,this._count=0,this._pool={};}
r(t,"fairygui.GObjectPool");var e=t.prototype;return e.clear=function(){for(var t in this._pool){for(var e=this._pool[t],n=e.length,i=0;i<n;i++){e[i].dispose();}}
this._pool={},this._count=0;},e.getObject=function(t){if(null==(t=st.normalizeURL(t)))return null;var e=this._pool[t];return null!=e&&0<e.length?(this._count--,e.shift()):st.createObjectFromURL(t);},e.returnObject=function(t){var e=t.resourceURL;if(e){var n=this._pool[e];null==n&&(n=[],this._pool[e]=n),this._count++,n.push(t);}},a(0,e,"count",function(){return this._count;}),t;}(),H=function(){function t(){}
return r(t,"fairygui.GroupLayoutType"),t.parse=function(t){switch(t){case "none":return 0;case "hz":return 1;case "vt":return 2;default:return 0;}},t.None=0,t.Horizontal=1,t.Vertical=2,t;}(),z=function(){function t(){}
return r(t,"fairygui.ListLayoutType"),t.parse=function(t){switch(t){case "column":return 0;case "row":return 1;case "flow_hz":return 2;case "flow_vt":return 3;case "pagination":return 4;default:return 0;}},t.SingleColumn=0,t.SingleRow=1,t.FlowHorizontal=2,t.FlowVertical=3,t.Pagination=4,t;}(),j=function(){function t(){}
return r(t,"fairygui.ListSelectionMode"),t.parse=function(t){switch(t){case "single":return 0;case "multiple":return 1;case "multipleSingleClick":return 2;case "none":return 3;default:return 0;}},t.Single=0,t.Multiple=1,t.Multiple_SingleClick=2,t.None=3,t;}(),W=function(){function t(){}
return r(t,"fairygui.LoaderFillType"),t.parse=function(t){switch(t){case "none":return 0;case "scale":return 1;case "scaleMatchHeight":return 2;case "scaleMatchWidth":return 3;case "scaleFree":return 4;case "scaleNoBorder":return 5;default:return 0;}},t.None=0,t.Scale=1,t.ScaleMatchHeight=2,t.ScaleMatchWidth=3,t.ScaleFree=4,t.ScaleNoBorder=5,t;}(),K=function(){function t(){this.left=0,this.right=0,this.top=0,this.bottom=0;}
r(t,"fairygui.Margin");var e=t.prototype;return e.parse=function(t){if(!t)return this.left=0,this.right=0,this.top=0,void(this.bottom=0);var e=t.split(",");if(1==e.length){var n=parseInt(e[0]);this.top=n,this.bottom=n,this.left=n,this.right=n;}else this.top=parseInt(e[0]),this.bottom=parseInt(e[1]),this.left=parseInt(e[2]),this.right=parseInt(e[3]);},e.copy=function(t){this.top=t.top,this.bottom=t.bottom,this.left=t.left,this.right=t.right;},t;}(),X=function(){function t(){}
return r(t,"fairygui.OverflowType"),t.parse=function(t){switch(t){case "visible":return 0;case "hidden":return 1;case "scroll":return 2;case "scale":return 3;case "scaleFree":return 4;default:return 0;}},t.Visible=0,t.Hidden=1,t.Scroll=2,t.Scale=3,t.ScaleFree=4,t;}(),Y=function(){function t(){this.owner=null,this.type=0,this.id=null,this.name=null,this.width=0,this.height=0,this.file=null,this.decoded=!1,this.scale9Grid=null,this.scaleByTile=!1,this.tileGridIndice=0,this.smoothing=!1,this.texture=null,this.interval=0,this.repeatDelay=0,this.swing=!1,this.frames=null,this.componentData=null,this.displayList=null,this.extensionType=null,this.sound=null,this.bitmapFont=null;}
r(t,"fairygui.PackageItem");var e=t.prototype;return e.load=function(){return this.owner.getItemAsset(this);},e.toString=function(){return this.name;},t;}(),q=function(){function t(){}
return r(t,"fairygui.PackageItemType"),t.parse=function(t){switch(t){case "image":return 0;case "movieclip":return 2;case "sound":return 3;case "component":return 4;case "swf":return 1;case "font":return 6;case "atlas":return 7;}
return 0;},t.Image=0,t.Swf=1,t.MovieClip=2,t.Sound=3,t.Component=4,t.Misc=5,t.Font=6,t.Atlas=7,t;}(),Z=function(){function t(){this._controller=null,this._id=null;}
r(t,"fairygui.PageOption");var e=t.prototype;return e.clear=function(){this._id=null;},a(0,e,"controller",null,function(t){this._controller=t;}),a(0,e,"index",function(){return this._id?this._controller.getPageIndexById(this._id):-1;},function(t){this._id=this._controller.getPageId(t);}),a(0,e,"name",function(){return this._id?this._controller.getPageNameById(this._id):null;},function(t){this._id=this._controller.getPageIdByName(t);}),a(0,e,"id",function(){return this._id;},function(t){this._id=t;}),t;}(),J=(function(){function t(t){if(this._contentPane=null,this._list=null,!t&&!(t=at.popupMenu))throw "UIConfig.popupMenu not defined";this._contentPane=st.createObjectFromURL(t).asCom,this._contentPane.on("display",this,this.__addedToStage),this._list=this._contentPane.getChild("list"),this._list.removeChildrenToPool(),this._list.addRelation(this._contentPane,14),this._list.removeRelation(this._contentPane,15),this._contentPane.addRelation(this._list,15),this._list.on("fui_click_item",this,this.__clickItem);}
r(t,"fairygui.PopupMenu");var e=t.prototype;e.dispose=function(){this._contentPane.dispose();},e.addItem=function(t,e){var n=this._list.addItemFromPool().asButton;n.title=t,n.data=e,n.grayed=!1;var i=n.getController("checked");return null!=i&&(i.selectedIndex=0),n;},e.addItemAt=function(t,e,n){var i=this._list.getFromPool().asButton;this._list.addChildAt(i,e),i.title=t,i.data=n,i.grayed=!1;var r=i.getController("checked");return null!=r&&(r.selectedIndex=0),i;},e.addSeperator=function(){if(null==at.popupMenu_seperator)throw "UIConfig.popupMenu_seperator not defined";this.list.addItemFromPool(at.popupMenu_seperator);},e.getItemName=function(t){return this._list.getChildAt(t).name;},e.setItemText=function(t,e){this._list.getChild(t).asButton.title=e;},e.setItemVisible=function(t,e){var n=this._list.getChild(t).asButton;n.visible!=e&&(n.visible=e,this._list.setBoundsChangedFlag());},e.setItemGrayed=function(t,e){this._list.getChild(t).asButton.grayed=e;},e.setItemCheckable=function(t,e){var n=this._list.getChild(t).asButton.getController("checked");null!=n&&(e?0==n.selectedIndex&&(n.selectedIndex=1):n.selectedIndex=0);},e.setItemChecked=function(t,e){var n=this._list.getChild(t).asButton.getController("checked");null!=n&&(n.selectedIndex=e?2:1);},e.isItemChecked=function(t){var e=this._list.getChild(t).asButton.getController("checked");return null!=e&&2==e.selectedIndex;},e.removeItem=function(t){var e=this._list.getChild(t);if(null==e)return!1;var n=this._list.getChildIndex(e);return this._list.removeChildToPoolAt(n),!0;},e.clearItems=function(){this._list.removeChildrenToPool();},e.show=function(t,e){(null!=t?t.root:Ut.inst).showPopup(this.contentPane,t instanceof fairygui.GRoot?null:t,e);},e.__clickItem=function(t){n.timer.once(100,this,this.__clickItem2,[t]);},e.__clickItem2=function(t){if(t instanceof fairygui.GButton)if(t.grayed)this._list.selectedIndex=-1;else{var e=t.asCom.getController("checked");null!=e&&0!=e.selectedIndex&&(1==e.selectedIndex?e.selectedIndex=2:e.selectedIndex=1),this._contentPane.parent.hidePopup(this.contentPane),null!=t.data&&t.data.run();}},e.__addedToStage=function(){this._list.selectedIndex=-1,this._list.resizeToFit(1e5,10);},a(0,e,"itemCount",function(){return this._list.numChildren;}),a(0,e,"contentPane",function(){return this._contentPane;}),a(0,e,"list",function(){return this._list;});}(),function(){function t(){}
return r(t,"fairygui.ProgressTitleType"),t.parse=function(t){switch(t){case "percent":return 0;case "valueAndmax":return 1;case "value":return 2;case "max":return 3;default:return 0;}},t.Percent=0,t.ValueAndMax=1,t.Value=2,t.Max=3,t;}()),$=function(){function t(t){this._owner=null,this._target=null,this._defs=null,this._targetX=NaN,this._targetY=NaN,this._targetWidth=NaN,this._targetHeight=NaN,this._owner=t,this._defs=[];}
var e;r(t,"fairygui.RelationItem");var n=t.prototype;return n.add=function(t,e){if(24==t)return this.add(14,e),void this.add(15,e);for(var n in this._defs){if(this._defs[n].type==t)return;}
this.internalAdd(t,e);},n.internalAdd=function(t,n){if(24==t)return this.internalAdd(14,n),void this.internalAdd(15,n);var i=new e();i.percent=n,i.type=t,i.axis=t<=6||14==t||16<=t&&t<=19?0:1,this._defs.push(i),(n||1==t||3==t||5==t||8==t||10==t||12==t)&&(this._owner.pixelSnapping=!0);},n.remove=function(t){if(24==t)return this.remove(14),void this.remove(15);for(var e=this._defs.length,n=0;n<e;n++){if(this._defs[n].type==t){this._defs.splice(n,1);break;}}},n.copyFrom=function(t){var n;for(var i in this.target=t.target,this._defs.length=0,t._defs){n=t._defs[i];var r=new e();r.copyFrom(n),this._defs.push(r);}},n.dispose=function(){null!=this._target&&(this.releaseRefTarget(this._target),this._target=null);},n.applyOnSelfResized=function(t,e,n){var i=this._defs.length;if(0!=i){for(var r=this._owner.x,a=this._owner.y,o=0;o<i;o++){switch(this._defs[o].type){case 3:this._owner.x-=(.5-(n?this._owner.pivotX:0))*t;break;case 5:case 4:case 6:this._owner.x-=(1-(n?this._owner.pivotX:0))*t;break;case 10:this._owner.y-=(.5-(n?this._owner.pivotY:0))*e;break;case 12:case 11:case 13:this._owner.y-=(1-(n?this._owner.pivotY:0))*e;}}
if((r!=this._owner.x||a!=this._owner.y)&&(r=this._owner.x-r,a=this._owner.y-a,this._owner.updateGearFromRelations(1,r,a),null!=this._owner.parent&&0<this._owner.parent._transitions.length))for(var s in this._owner.parent._transitions){this._owner.parent._transitions[s].updateFromRelations(this._owner.id,r,a);}}},n.applyOnXYChanged=function(t,e,n){var i=NaN;switch(t.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:this._owner.x+=e;break;case 7:case 8:case 9:case 10:case 11:case 12:case 13:this._owner.y+=n;break;case 14:case 15:break;case 16:case 17:i=this._owner.xMin,this._owner.width=this._owner._rawWidth-e,this._owner.xMin=i+e;break;case 18:case 19:i=this._owner.xMin,this._owner.width=this._owner._rawWidth+e,this._owner.xMin=i;break;case 20:case 21:i=this._owner.yMin,this._owner.height=this._owner._rawHeight-n,this._owner.yMin=i+n;break;case 22:case 23:i=this._owner.yMin,this._owner.height=this._owner._rawHeight+n,this._owner.yMin=i;}},n.applyOnSizeChanged=function(t){var e=0,n=0,i=0,r=NaN,a=NaN;switch(0==t.axis?(this._target!=this._owner.parent&&(e=this._target.x,this._target.pivotAsAnchor&&(n=this._target.pivotX)),t.percent?0!=this._targetWidth&&(i=this._target._width/this._targetWidth):i=this._target._width-this._targetWidth):(this._target!=this._owner.parent&&(e=this._target.y,this._target.pivotAsAnchor&&(n=this._target.pivotY)),t.percent?0!=this._targetHeight&&(i=this._target._height/this._targetHeight):i=this._target._height-this._targetHeight),t.type){case 0:t.percent?this._owner.xMin=e+(this._owner.xMin-e)*i:0!=n&&(this._owner.x+=i*-n);break;case 1:t.percent?this._owner.xMin=e+(this._owner.xMin-e)*i:this._owner.x+=i*(.5-n);break;case 2:t.percent?this._owner.xMin=e+(this._owner.xMin-e)*i:this._owner.x+=i*(1-n);break;case 3:t.percent?this._owner.xMin=e+(this._owner.xMin+.5*this._owner._rawWidth-e)*i-.5*this._owner._rawWidth:this._owner.x+=i*(.5-n);break;case 4:t.percent?this._owner.xMin=e+(this._owner.xMin+this._owner._rawWidth-e)*i-this._owner._rawWidth:0!=n&&(this._owner.x+=i*-n);break;case 5:t.percent?this._owner.xMin=e+(this._owner.xMin+this._owner._rawWidth-e)*i-this._owner._rawWidth:this._owner.x+=i*(.5-n);break;case 6:t.percent?this._owner.xMin=e+(this._owner.xMin+this._owner._rawWidth-e)*i-this._owner._rawWidth:this._owner.x+=i*(1-n);break;case 7:t.percent?this._owner.yMin=e+(this._owner.yMin-e)*i:0!=n&&(this._owner.y+=i*-n);break;case 8:t.percent?this._owner.yMin=e+(this._owner.yMin-e)*i:this._owner.y+=i*(.5-n);break;case 9:t.percent?this._owner.yMin=e+(this._owner.yMin-e)*i:this._owner.y+=i*(1-n);break;case 10:t.percent?this._owner.yMin=e+(this._owner.yMin+.5*this._owner._rawHeight-e)*i-.5*this._owner._rawHeight:this._owner.y+=i*(.5-n);break;case 11:t.percent?this._owner.yMin=e+(this._owner.yMin+this._owner._rawHeight-e)*i-this._owner._rawHeight:0!=n&&(this._owner.y+=i*-n);break;case 12:t.percent?this._owner.yMin=e+(this._owner.yMin+this._owner._rawHeight-e)*i-this._owner._rawHeight:this._owner.y+=i*(.5-n);break;case 13:t.percent?this._owner.yMin=e+(this._owner.yMin+this._owner._rawHeight-e)*i-this._owner._rawHeight:this._owner.y+=i*(1-n);break;case 14:r=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceWidth-this._target.initWidth:this._owner._rawWidth-this._targetWidth,t.percent&&(r*=i),this._target==this._owner.parent?this._owner.pivotAsAnchor?(a=this._owner.xMin,this._owner.setSize(this._target._width+r,this._owner._rawHeight,!0),this._owner.xMin=a):this._owner.setSize(this._target._width+r,this._owner._rawHeight,!0):this._owner.width=this._target._width+r;break;case 15:r=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceHeight-this._target.initHeight:this._owner._rawHeight-this._targetHeight,t.percent&&(r*=i),this._target==this._owner.parent?this._owner.pivotAsAnchor?(a=this._owner.yMin,this._owner.setSize(this._owner._rawWidth,this._target._height+r,!0),this._owner.yMin=a):this._owner.setSize(this._owner._rawWidth,this._target._height+r,!0):this._owner.height=this._target._height+r;break;case 16:a=this._owner.xMin,r=t.percent?e+(a-e)*i-a:i*-n,this._owner.width=this._owner._rawWidth-r,this._owner.xMin=a+r;break;case 17:a=this._owner.xMin,r=t.percent?e+(a-e)*i-a:i*(1-n),this._owner.width=this._owner._rawWidth-r,this._owner.xMin=a+r;break;case 18:a=this._owner.xMin,r=t.percent?e+(a+this._owner._rawWidth-e)*i-(a+this._owner._rawWidth):i*-n,this._owner.width=this._owner._rawWidth+r,this._owner.xMin=a;break;case 19:a=this._owner.xMin,t.percent?this._owner==this._target.parent?this._owner._underConstruct?this._owner.width=e+this._target._width-this._target._width*n+(this._owner.sourceWidth-e-this._target.initWidth+this._target.initWidth*n)*i:this._owner.width=e+(this._owner._rawWidth-e)*i:(r=e+(a+this._owner._rawWidth-e)*i-(a+this._owner._rawWidth),this._owner.width=this._owner._rawWidth+r,this._owner.xMin=a):this._owner==this._target.parent?this._owner._underConstruct?this._owner.width=this._owner.sourceWidth+(this._target._width-this._target.initWidth)*(1-n):this._owner.width=this._owner._rawWidth+i*(1-n):(r=i*(1-n),this._owner.width=this._owner._rawWidth+r,this._owner.xMin=a);break;case 20:a=this._owner.yMin,r=t.percent?e+(a-e)*i-a:i*-n,this._owner.height=this._owner._rawHeight-r,this._owner.yMin=a+r;break;case 21:a=this._owner.yMin,r=t.percent?e+(a-e)*i-a:i*(1-n),this._owner.height=this._owner._rawHeight-r,this._owner.yMin=a+r;break;case 22:a=this._owner.yMin,r=t.percent?e+(a+this._owner._rawHeight-e)*i-(a+this._owner._rawHeight):i*-n,this._owner.height=this._owner._rawHeight+r,this._owner.yMin=a;break;case 23:a=this._owner.yMin,t.percent?this._owner==this._target.parent?this._owner._underConstruct?this._owner.height=e+this._target._height-this._target._height*n+(this._owner.sourceHeight-e-this._target.initHeight+this._target.initHeight*n)*i:this._owner.height=e+(this._owner._rawHeight-e)*i:(r=e+(a+this._owner._rawHeight-e)*i-(a+this._owner._rawHeight),this._owner.height=this._owner._rawHeight+r,this._owner.yMin=a):this._owner==this._target.parent?this._owner._underConstruct?this._owner.height=this._owner.sourceHeight+(this._target._height-this._target.initHeight)*(1-n):this._owner.height=this._owner._rawHeight+i*(1-n):(r=i*(1-n),this._owner.height=this._owner._rawHeight+r,this._owner.yMin=a);}},n.addRefTarget=function(t){t!=this._owner.parent&&t.on("fui_xy_changed",this,this.__targetXYChanged),t.on("fui_size_changed",this,this.__targetSizeChanged),t.on("fui_size_delay_change",this,this.__targetSizeWillChange),this._targetX=this._target.x,this._targetY=this._target.y,this._targetWidth=this._target._width,this._targetHeight=this._target._height;},n.releaseRefTarget=function(t){t.off("fui_xy_changed",this,this.__targetXYChanged),t.off("fui_size_changed",this,this.__targetSizeChanged),t.off("fui_size_delay_change",this,this.__targetSizeWillChange);},n.__targetXYChanged=function(t){if(null!=this._owner.relations.handling||null!=this._owner.group&&this._owner.group._updating)return this._targetX=this._target.x,void(this._targetY=this._target.y);this._owner.relations.handling=t;var e,n=this._owner.x,i=this._owner.y,r=this._target.x-this._targetX,a=this._target.y-this._targetY;for(var o in this._defs){e=this._defs[o],this.applyOnXYChanged(e,r,a);}
if(this._targetX=this._target.x,this._targetY=this._target.y,(n!=this._owner.x||i!=this._owner.y)&&(n=this._owner.x-n,i=this._owner.y-i,this._owner.updateGearFromRelations(1,n,i),null!=this._owner.parent&&0<this._owner.parent._transitions.length))for(var s in this._owner.parent._transitions){this._owner.parent._transitions[s].updateFromRelations(this._owner.id,n,i);}
this._owner.relations.handling=null;},n.__targetSizeChanged=function(t){if(null!=this._owner.relations.handling)return this._targetWidth=this._target._width,void(this._targetHeight=this._target._height);this._owner.relations.handling=t;var e,n=this._owner.x,i=this._owner.y,r=this._owner._rawWidth,a=this._owner._rawHeight;for(var o in this._defs){e=this._defs[o],this.applyOnSizeChanged(e);}
if(this._targetWidth=this._target._width,this._targetHeight=this._target._height,(n!=this._owner.x||i!=this._owner.y)&&(n=this._owner.x-n,i=this._owner.y-i,this._owner.updateGearFromRelations(1,n,i),null!=this._owner.parent&&0<this._owner.parent._transitions.length))for(var s in this._owner.parent._transitions){this._owner.parent._transitions[s].updateFromRelations(this._owner.id,n,i);}
r==this._owner._rawWidth&&a==this._owner._rawHeight||(r=this._owner._rawWidth-r,a=this._owner._rawHeight-a,this._owner.updateGearFromRelations(2,r,a)),this._owner.relations.handling=null;},n.__targetSizeWillChange=function(t){this._owner.relations.sizeDirty=!0;},a(0,n,"owner",function(){return this._owner;}),a(0,n,"target",function(){return this._target;},function(t){this._target!=t&&(this._target&&this.releaseRefTarget(this._target),this._target=t,this._target&&this.addRefTarget(this._target));}),a(0,n,"isEmpty",function(){return 0==this._defs.length;}),t.__init$=function(){e=function(){function t(){this.percent=!1,this.type=0,this.axis=0;}
return r(t,""),t.prototype.copyFrom=function(t){this.percent=t.percent,this.type=t.type,this.axis=t.axis;},t;}();},t;}(),Q=function(){function t(t){this._owner=null,this._items=null,this.handling=null,this.sizeDirty=!1,this._owner=t,this._items=[];}
r(t,"fairygui.Relations");var e=t.prototype;return e.add=function(t,e,n){void 0===n&&(n=!1);for(var i=this._items.length,r=0;r<i;r++){var a=this._items[r];if(a.target==t)return void a.add(e,n);}
var o=new $(this._owner);o.target=t,o.add(e,n),this._items.push(o);},e.addItems=function(t,e){var n,i=e.split(","),r=!1,a=NaN,o=new $(this._owner);for(o.target=t,a=0;a<2;a++){if(n=i[a]){r="%"==n.charAt(n.length-1)&&(n=n.substr(0,n.length-1),!0),-1==n.indexOf("-")&&(n=n+"-"+n);var s=fairygui.Relations.RELATION_NAMES.indexOf(n);if(-1==s)throw "invalid relation type";o.internalAdd(s,r);}}
this._items.push(o);},e.remove=function(t,e){void 0===e&&(e=0);for(var n=this._items.length,i=0;i<n;){var r=this._items[i];r.target==t?(r.remove(e),r.isEmpty?(r.dispose(),this._items.splice(i,1),n--):i++):i++;}},e.contains=function(t){for(var e=this._items.length,n=0;n<e;n++){if(this._items[n].target==t)return!0;}
return!1;},e.clearFor=function(t){for(var e=this._items.length,n=0;n<e;){var i=this._items[n];i.target==t?(i.dispose(),this._items.splice(n,1),e--):n++;}},e.clearAll=function(){for(var t=this._items.length,e=0;e<t;e++){this._items[e].dispose();}
this._items.length=0;},e.copyFrom=function(t){this.clearAll();for(var e=t._items,n=e.length,i=0;i<n;i++){var r=e[i],a=new $(this._owner);a.copyFrom(r),this._items.push(a);}},e.dispose=function(){this.clearAll();},e.onOwnerSizeChanged=function(t,e,n){if(0!=this._items.length)for(var i=this._items.length,r=0;r<i;r++){this._items[r].applyOnSelfResized(t,e,n);}},e.ensureRelationsSizeCorrect=function(){if(0!=this._items.length){this.sizeDirty=!1;for(var t=this._items.length,e=0;e<t;e++){this._items[e].target.ensureSizeCorrect();}}},e.setup=function(t){for(var e,n,i=t.childNodes,r=i.length,a=0;a<r;a++){var o=i[a];"relation"==o.nodeName&&(e=o.getAttribute("target"),(n=this._owner.parent?e?this._owner.parent.getChildById(e):this._owner.parent:this._owner.getChildById(e))&&this.addItems(n,o.getAttribute("sidePair")));}},a(0,e,"empty",function(){return 0==this._items.length;}),i(t,["RELATION_NAMES",function(){return this.RELATION_NAMES=["left-left","left-center","left-right","center-center","right-left","right-center","right-right","top-top","top-middle","top-bottom","middle-middle","bottom-top","bottom-middle","bottom-bottom","width-width","height-height","leftext-left","leftext-right","rightext-left","rightext-right","topext-top","topext-bottom","bottomext-top","bottomext-bottom"];}]),t;}(),tt=(function(){function t(){}
r(t,"fairygui.RelationType"),t.Left_Left=0,t.Left_Center=1,t.Left_Right=2,t.Center_Center=3,t.Right_Left=4,t.Right_Center=5,t.Right_Right=6,t.Top_Top=7,t.Top_Middle=8,t.Top_Bottom=9,t.Middle_Middle=10,t.Bottom_Top=11,t.Bottom_Middle=12,t.Bottom_Bottom=13,t.Width=14,t.Height=15,t.LeftExt_Left=16,t.LeftExt_Right=17,t.RightExt_Left=18,t.RightExt_Right=19,t.TopExt_Top=20,t.TopExt_Bottom=21,t.BottomExt_Top=22,t.BottomExt_Bottom=23,t.Size=24;}(),function(){function t(){}
return r(t,"fairygui.ScrollBarDisplayType"),t.parse=function(t){switch(t){case "default":return 0;case "visible":return 1;case "auto":return 2;case "hidden":return 3;default:return 0;}},t.Default=0,t.Visible=1,t.Auto=2,t.Hidden=3,t;}()),et=function(){function t(t,e,n,i,r,a,o,s,l){if(this._owner=null,this._container=null,this._maskContainer=null,this._alignContainer=null,this._scrollType=0,this._scrollStep=0,this._mouseWheelStep=0,this._decelerationRate=NaN,this._scrollBarMargin=null,this._bouncebackEffect=!1,this._touchEffect=!1,this._scrollBarDisplayAuto=!1,this._vScrollNone=!1,this._hScrollNone=!1,this._needRefresh=!1,this._refreshBarAxis=null,this._displayOnLeft=!1,this._snapToItem=!1,this._displayInDemand=!1,this._mouseWheelEnabled=!1,this._pageMode=!1,this._inertiaDisabled=!1,this._xPos=NaN,this._yPos=NaN,this._viewSize=null,this._contentSize=null,this._overlapSize=null,this._pageSize=null,this._containerPos=null,this._beginTouchPos=null,this._lastTouchPos=null,this._lastTouchGlobalPos=null,this._velocity=null,this._velocityScale=NaN,this._lastMoveTime=NaN,this._isHoldAreaDone=!1,this._aniFlag=0,this._scrollBarVisible=!1,this._loop=0,this._headerLockedSize=0,this._footerLockedSize=0,this._refreshEventDispatching=!1,this._tweening=0,this._tweenTime=null,this._tweenDuration=null,this._tweenStart=null,this._tweenChange=null,this._pageController=null,this._hzScrollBar=null,this._vtScrollBar=null,this._header=null,this._footer=null,this.isDragged=!1,this._owner=t,this._maskContainer=new T(),this._owner.displayObject.addChild(this._maskContainer),this._container=this._owner._container,this._container.pos(0,0),this._maskContainer.addChild(this._container),this._scrollBarMargin=n,this._scrollType=e,this._scrollStep=at.defaultScrollStep,this._mouseWheelStep=2*this._scrollStep,this._decelerationRate=at.defaultScrollDecelerationRate,this._displayOnLeft=0!=(1&r),this._snapToItem=0!=(2&r),this._displayInDemand=0!=(4&r),this._pageMode=0!=(8&r),this._touchEffect=!!(16&r)||!(32&r)&&at.defaultScrollTouchEffect,this._bouncebackEffect=!!(64&r)||!(128&r)&&at.defaultScrollBounceEffect,this._inertiaDisabled=0!=(256&r),0==(512&r)&&(this._maskContainer.scrollRect=new v()),this._scrollBarVisible=!0,this._mouseWheelEnabled=!0,this._xPos=0,this._yPos=0,this._aniFlag=0,this._footerLockedSize=0,(this._headerLockedSize=0)==i&&(i=at.defaultScrollBarDisplay),this._viewSize=new y(),this._contentSize=new y(),this._pageSize=new y(1,1),this._overlapSize=new y(),this._tweenTime=new y(),this._tweenStart=new y(),this._tweenDuration=new y(),this._tweenChange=new y(),this._velocity=new y(),this._containerPos=new y(),this._beginTouchPos=new y(),this._lastTouchPos=new y(),this._lastTouchGlobalPos=new y(),3!=i){if(2==this._scrollType||1==this._scrollType){var u=a||at.verticalScrollBar;if(u){if(this._vtScrollBar=st.createObjectFromURL(u),!this._vtScrollBar)throw "cannot create scrollbar from "+u;this._vtScrollBar.setScrollPane(this,!0),this._owner.displayObject.addChild(this._vtScrollBar.displayObject);}}
if((2==this._scrollType||0==this._scrollType)&&(u=o||at.horizontalScrollBar)){if(this._hzScrollBar=st.createObjectFromURL(u),!this._hzScrollBar)throw "cannot create scrollbar from "+u;this._hzScrollBar.setScrollPane(this,!1),this._owner.displayObject.addChild(this._hzScrollBar.displayObject);}
this._scrollBarDisplayAuto=2==i,this._scrollBarDisplayAuto&&(this._scrollBarVisible=!1,this._vtScrollBar&&(this._vtScrollBar.displayObject.visible=!1),this._hzScrollBar&&(this._hzScrollBar.displayObject.visible=!1));}else this._mouseWheelEnabled=!1;if(s&&(this._header=st.createObjectFromURL(s),null==this._header))throw new Error("FairyGUI: cannot create scrollPane header from "+s);if(l&&(this._footer=st.createObjectFromURL(l),null==this._footer))throw new Error("FairyGUI: cannot create scrollPane footer from "+l);null==this._header&&null==this._footer||(this._refreshBarAxis=2==this._scrollType||1==this._scrollType?"y":"x"),this.setSize(t.width,t.height),this._owner.on("mousedown",this,this.__mouseDown),this._owner.on("mousewheel",this,this.__mouseWheel);}
r(t,"fairygui.ScrollPane");var e=t.prototype;return e.dispose=function(){0!=this._tweening&&n.timer.clear(this,this.tweenUpdate),(this._pageController=null)!=this._hzScrollBar&&this._hzScrollBar.dispose(),null!=this._vtScrollBar&&this._vtScrollBar.dispose(),null!=this._header&&this._header.dispose(),null!=this._footer&&this._footer.dispose();},e.setPercX=function(t,e){void 0===e&&(e=!1),this._owner.ensureBoundsCorrect(),this.setPosX(this._overlapSize.x*ut.clamp01(t),e);},e.setPercY=function(t,e){void 0===e&&(e=!1),this._owner.ensureBoundsCorrect(),this.setPosY(this._overlapSize.y*ut.clamp01(t),e);},e.setPosX=function(t,e){void 0===e&&(e=!1),this._owner.ensureBoundsCorrect(),1==this._loop&&(t=this.loopCheckingNewPos(t,"x")),(t=ut.clamp(t,0,this._overlapSize.x))!=this._xPos&&(this._xPos=t,this.posChanged(e));},e.setPosY=function(t,e){void 0===e&&(e=!1),this._owner.ensureBoundsCorrect(),1==this._loop&&(t=this.loopCheckingNewPos(t,"y")),(t=ut.clamp(t,0,this._overlapSize.y))!=this._yPos&&(this._yPos=t,this.posChanged(e));},e.setCurrentPageX=function(t,e){this._pageMode&&0<this._overlapSize.x&&this.setPosX(t*this._pageSize.x,e);},e.setCurrentPageY=function(t,e){this._pageMode&&0<this._overlapSize.y&&this.setPosY(t*this._pageSize.y,e);},e.scrollTop=function(t){void 0===t&&(t=!1),this.setPercY(0,t);},e.scrollBottom=function(t){void 0===t&&(t=!1),this.setPercY(1,t);},e.scrollUp=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosY(this._yPos-this._pageSize.y*t,e):this.setPosY(this._yPos-this._scrollStep*t,e);},e.scrollDown=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosY(this._yPos+this._pageSize.y*t,e):this.setPosY(this._yPos+this._scrollStep*t,e);},e.scrollLeft=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosX(this._xPos-this._pageSize.x*t,e):this.setPosX(this._xPos-this._scrollStep*t,e);},e.scrollRight=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosX(this._xPos+this._pageSize.x*t,e):this.setPosX(this._xPos+this._scrollStep*t,e);},e.scrollToView=function(t,e,n){var i;if(void 0===e&&(e=!1),void 0===n&&(n=!1),this._owner.ensureBoundsCorrect(),this._needRefresh&&this.refresh(),t instanceof fairygui.GObject?t.parent!=this._owner?(t.parent.localToGlobalRect(t.x,t.y,t.width,t.height,fairygui.ScrollPane.sHelperRect),i=this._owner.globalToLocalRect(fairygui.ScrollPane.sHelperRect.x,fairygui.ScrollPane.sHelperRect.y,fairygui.ScrollPane.sHelperRect.width,fairygui.ScrollPane.sHelperRect.height,fairygui.ScrollPane.sHelperRect)):(i=fairygui.ScrollPane.sHelperRect).setTo(t.x,t.y,t.width,t.height):i=t,0<this._overlapSize.y){var r=this._yPos+this._viewSize.y;n||i.y<=this._yPos||i.height>=this._viewSize.y?this._pageMode?this.setPosY(Math.floor(i.y/this._pageSize.y)*this._pageSize.y,e):this.setPosY(i.y,e):i.y+i.height>r&&(this._pageMode?this.setPosY(Math.floor(i.y/this._pageSize.y)*this._pageSize.y,e):i.height<=this._viewSize.y/2?this.setPosY(i.y+2*i.height-this._viewSize.y,e):this.setPosY(i.y+i.height-this._viewSize.y,e));}
if(0<this._overlapSize.x){var a=this._xPos+this._viewSize.x;n||i.x<=this._xPos||i.width>=this._viewSize.x?this._pageMode?this.setPosX(Math.floor(i.x/this._pageSize.x)*this._pageSize.x,e):this.setPosX(i.x,e):i.x+i.width>a&&(this._pageMode?this.setPosX(Math.floor(i.x/this._pageSize.x)*this._pageSize.x,e):i.width<=this._viewSize.x/2?this.setPosX(i.x+2*i.width-this._viewSize.x,e):this.setPosX(i.x+i.width-this._viewSize.x,e));}
!e&&this._needRefresh&&this.refresh();},e.isChildInView=function(t){if(0<this._overlapSize.y){var e=t.y+this._container.y;if(e<-t.height||e>this._viewSize.y)return!1;}
return!(0<this._overlapSize.x&&((e=t.x+this._container.x)<-t.width||e>this._viewSize.x));},e.cancelDragging=function(){this._owner.displayObject.stage.off("mousemove",this,this.__mouseMove),this._owner.displayObject.stage.off("mouseup",this,this.__mouseUp),this._owner.displayObject.stage.off("click",this,this.__click),t.draggingPane==this&&(t.draggingPane=null),t._gestureFlag=0,this.isDragged=!1,this._maskContainer.mouseEnabled=!0;},e.lockHeader=function(t){this._headerLockedSize!=t&&(this._headerLockedSize=t,!this._refreshEventDispatching&&0<=this._container[this._refreshBarAxis]&&(this._tweenStart.setTo(this._container.x,this._container.y),this._tweenChange.setTo(0,0),this._tweenChange[this._refreshBarAxis]=this._headerLockedSize-this._tweenStart[this._refreshBarAxis],this._tweenDuration.setTo(.3,.3),this._tweenTime.setTo(0,0),this._tweening=2,n.timer.frameLoop(1,this,this.tweenUpdate)));},e.lockFooter=function(t){if(this._footerLockedSize!=t&&(this._footerLockedSize=t,!this._refreshEventDispatching&&this._container[this._refreshBarAxis]<=-this._overlapSize[this._refreshBarAxis])){this._tweenStart.setTo(this._container.x,this._container.y),this._tweenChange.setTo(0,0);var e=this._overlapSize[this._refreshBarAxis];0==e?e=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):e+=this._footerLockedSize,this._tweenChange[this._refreshBarAxis]=-e-this._tweenStart[this._refreshBarAxis],this._tweenDuration.setTo(.3,.3),this._tweenTime.setTo(0,0),this._tweening=2,n.timer.frameLoop(1,this,this.tweenUpdate);}},e.onOwnerSizeChanged=function(){this.setSize(this._owner.width,this._owner.height),this.posChanged(!1);},e.handleControllerChanged=function(t){this._pageController==t&&(0==this._scrollType?this.setCurrentPageX(t.selectedIndex,!0):this.setCurrentPageY(t.selectedIndex,!0));},e.updatePageController=function(){if(null!=this._pageController&&!this._pageController.changing){var t=0;if((t=0==this._scrollType?this.currentPageX:this.currentPageY)<this._pageController.pageCount){var e=this._pageController;this._pageController=null,e.selectedIndex=t,this._pageController=e;}}},e.adjustMaskContainer=function(){var t,e=NaN;e=this._displayOnLeft&&null!=this._vtScrollBar?Math.floor(this._owner.margin.left+this._vtScrollBar.width):Math.floor(this._owner.margin.left),t=Math.floor(this._owner.margin.top),this._maskContainer.pos(e,t),0!=this._owner._alignOffset.x||0!=this._owner._alignOffset.y?(null==this._alignContainer&&(this._alignContainer=new T(),this._maskContainer.addChild(this._alignContainer),this._alignContainer.addChild(this._container)),this._alignContainer.pos(this._owner._alignOffset.x,this._owner._alignOffset.y)):this._alignContainer&&this._alignContainer.pos(0,0);},e.setSize=function(t,e){this.adjustMaskContainer(),this._hzScrollBar&&(this._hzScrollBar.y=e-this._hzScrollBar.height,this._vtScrollBar&&!this._vScrollNone?(this._hzScrollBar.width=t-this._vtScrollBar.width-this._scrollBarMargin.left-this._scrollBarMargin.right,this._displayOnLeft?this._hzScrollBar.x=this._scrollBarMargin.left+this._vtScrollBar.width:this._hzScrollBar.x=this._scrollBarMargin.left):(this._hzScrollBar.width=t-this._scrollBarMargin.left-this._scrollBarMargin.right,this._hzScrollBar.x=this._scrollBarMargin.left)),this._vtScrollBar&&(this._displayOnLeft||(this._vtScrollBar.x=t-this._vtScrollBar.width),this._hzScrollBar?this._vtScrollBar.height=e-this._hzScrollBar.height-this._scrollBarMargin.top-this._scrollBarMargin.bottom:this._vtScrollBar.height=e-this._scrollBarMargin.top-this._scrollBarMargin.bottom,this._vtScrollBar.y=this._scrollBarMargin.top),this._viewSize.x=t,this._viewSize.y=e,this._hzScrollBar&&!this._hScrollNone&&(this._viewSize.y-=this._hzScrollBar.height),this._vtScrollBar&&!this._vScrollNone&&(this._viewSize.x-=this._vtScrollBar.width),this._viewSize.x-=this._owner.margin.left+this._owner.margin.right,this._viewSize.y-=this._owner.margin.top+this._owner.margin.bottom,this._viewSize.x=Math.max(1,this._viewSize.x),this._viewSize.y=Math.max(1,this._viewSize.y),this._pageSize.x=this._viewSize.x,this._pageSize.y=this._viewSize.y,this.handleSizeChanged();},e.setContentSize=function(t,e){this._contentSize.x==t&&this._contentSize.y==e||(this._contentSize.x=t,this._contentSize.y=e,this.handleSizeChanged());},e.changeContentSizeOnScrolling=function(t,e,n,i){var r=this._xPos==this._overlapSize.x,a=this._yPos==this._overlapSize.y;this._contentSize.x+=t,this._contentSize.y+=e,this.handleSizeChanged(),1==this._tweening?(0!=t&&r&&this._tweenChange.x<0&&(this._xPos=this._overlapSize.x,this._tweenChange.x=-this._xPos-this._tweenStart.x),0!=e&&a&&this._tweenChange.y<0&&(this._yPos=this._overlapSize.y,this._tweenChange.y=-this._yPos-this._tweenStart.y)):2==this._tweening?(0!=n&&(this._container.x-=n,this._tweenStart.x-=n,this._xPos=-this._container.x),0!=i&&(this._container.y-=i,this._tweenStart.y-=i,this._yPos=-this._container.y)):this.isDragged?(0!=n&&(this._container.x-=n,this._containerPos.x-=n,this._xPos=-this._container.x),0!=i&&(this._container.y-=i,this._containerPos.y-=i,this._yPos=-this._container.y)):(0!=t&&r&&(this._xPos=this._overlapSize.x,this._container.x=-this._xPos),0!=e&&a&&(this._yPos=this._overlapSize.y,this._container.y=-this._yPos)),this._pageMode&&this.updatePageController();},e.handleSizeChanged=function(t){void 0===t&&(t=!1),this._displayInDemand&&(this._vtScrollBar&&(this._contentSize.y<=this._viewSize.y?this._vScrollNone||(this._vScrollNone=!0,this._viewSize.x+=this._vtScrollBar.width):this._vScrollNone&&(this._vScrollNone=!1,this._viewSize.x-=this._vtScrollBar.width)),this._hzScrollBar&&(this._contentSize.x<=this._viewSize.x?this._hScrollNone||(this._hScrollNone=!0,this._viewSize.y+=this._hzScrollBar.height):this._hScrollNone&&(this._hScrollNone=!1,this._viewSize.y-=this._hzScrollBar.height))),this._vtScrollBar&&(this._viewSize.y<this._vtScrollBar.minSize?this._vtScrollBar.displayObject.visible=!1:(this._vtScrollBar.displayObject.visible=this._scrollBarVisible&&!this._vScrollNone,0==this._contentSize.y?this._vtScrollBar.displayPerc=0:this._vtScrollBar.displayPerc=Math.min(1,this._viewSize.y/this._contentSize.y))),this._hzScrollBar&&(this._viewSize.x<this._hzScrollBar.minSize?this._hzScrollBar.displayObject.visible=!1:(this._hzScrollBar.displayObject.visible=this._scrollBarVisible&&!this._hScrollNone,0==this._contentSize.x?this._hzScrollBar.displayPerc=0:this._hzScrollBar.displayPerc=Math.min(1,this._viewSize.x/this._contentSize.x)));var e=this._maskContainer.scrollRect;if(e&&(e.width=this._viewSize.x,e.height=this._viewSize.y,this._maskContainer.scrollRect=e),0==this._scrollType||2==this._scrollType?this._overlapSize.x=Math.ceil(Math.max(0,this._contentSize.x-this._viewSize.x)):this._overlapSize.x=0,1==this._scrollType||2==this._scrollType?this._overlapSize.y=Math.ceil(Math.max(0,this._contentSize.y-this._viewSize.y)):this._overlapSize.y=0,this._xPos=ut.clamp(this._xPos,0,this._overlapSize.x),this._yPos=ut.clamp(this._yPos,0,this._overlapSize.y),null!=this._refreshBarAxis){var n=this._overlapSize[this._refreshBarAxis];0==n?n=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):n+=this._footerLockedSize,"x"==this._refreshBarAxis?this._container.pos(ut.clamp(this._container.x,-n,this._headerLockedSize),ut.clamp(this._container.y,-this._overlapSize.y,0)):this._container.pos(ut.clamp(this._container.x,-this._overlapSize.x,0),ut.clamp(this._container.y,-n,this._headerLockedSize)),null!=this._header&&("x"==this._refreshBarAxis?this._header.height=this._viewSize.y:this._header.width=this._viewSize.x),null!=this._footer&&("y"==this._refreshBarAxis?this._footer.height=this._viewSize.y:this._footer.width=this._viewSize.x);}else this._container.pos(ut.clamp(this._container.x,-this._overlapSize.x,0),ut.clamp(this._container.y,-this._overlapSize.y,0));this.syncScrollBar(),this.checkRefreshBar(),this._pageMode&&this.updatePageController();},e.posChanged=function(t){0==this._aniFlag?this._aniFlag=t?1:-1:1!=this._aniFlag||t||(this._aniFlag=-1),this._needRefresh=!0,n.timer.callLater(this,this.refresh);},e.refresh=function(){this._needRefresh=!1,n.timer.clear(this,this.refresh),(this._pageMode||this._snapToItem)&&(t.sEndPos.setTo(-this._xPos,-this._yPos),this.alignPosition(t.sEndPos,!1),this._xPos=-t.sEndPos.x,this._yPos=-t.sEndPos.y),this.refresh2(),N.dispatch("fui_scroll",this._owner.displayObject),this._needRefresh&&(this._needRefresh=!1,n.timer.clear(this,this.refresh),this.refresh2()),this.syncScrollBar(),this._aniFlag=0;},e.refresh2=function(){if(1!=this._aniFlag||this.isDragged)0!=this._tweening&&this.killTween(),this._container.pos(Math.floor(-this._xPos),Math.floor(-this._yPos)),this.loopCheckingCurrent();else{var t=NaN,e=NaN;t=0<this._overlapSize.x?-Math.floor(this._xPos):(0!=this._container.x&&(this._container.x=0),0),e=0<this._overlapSize.y?-Math.floor(this._yPos):(0!=this._container.y&&(this._container.y=0),0),t!=this._container.x||e!=this._container.y?(this._tweening=1,this._tweenTime.setTo(0,0),this._tweenDuration.setTo(.5,.5),this._tweenStart.setTo(this._container.x,this._container.y),this._tweenChange.setTo(t-this._tweenStart.x,e-this._tweenStart.y),n.timer.frameLoop(1,this,this.tweenUpdate)):0!=this._tweening&&this.killTween();}
this._pageMode&&this.updatePageController();},e.syncScrollBar=function(t){void 0===t&&(t=!1),null!=this._vtScrollBar&&(this._vtScrollBar.scrollPerc=0==this._overlapSize.y?0:ut.clamp(-this._container.y,0,this._overlapSize.y)/this._overlapSize.y,this._scrollBarDisplayAuto&&this.showScrollBar(!t)),null!=this._hzScrollBar&&(this._hzScrollBar.scrollPerc=0==this._overlapSize.x?0:ut.clamp(-this._container.x,0,this._overlapSize.x)/this._overlapSize.x,this._scrollBarDisplayAuto&&this.showScrollBar(!t)),t&&(this._maskContainer.mouseEnabled=!0);},e.__mouseDown=function(){if(this._touchEffect){0!=this._tweening?(this.killTween(),this.isDragged=!0):this.isDragged=!1;var t=this._owner.globalToLocal(n.stage.mouseX,n.stage.mouseY,fairygui.ScrollPane.sHelperPoint);this._containerPos.setTo(this._container.x,this._container.y),this._beginTouchPos.setTo(t.x,t.y),this._lastTouchPos.setTo(t.x,t.y),this._lastTouchGlobalPos.setTo(n.stage.mouseX,n.stage.mouseY),this._isHoldAreaDone=!1,this._velocity.setTo(0,0),this._velocityScale=1,this._lastMoveTime=n.timer.currTimer/1e3,this._owner.displayObject.stage.on("mousemove",this,this.__mouseMove),this._owner.displayObject.stage.on("mouseup",this,this.__mouseUp),this._owner.displayObject.stage.on("click",this,this.__click);}},e.__mouseMove=function(){if(this._touchEffect&&(null==t.draggingPane||t.draggingPane==this)&&null==G.draggingObject){var e=at.touchScrollSensitivity,i=this._owner.globalToLocal(n.stage.mouseX,n.stage.mouseY,fairygui.ScrollPane.sHelperPoint),r=NaN,a=!1,o=!1;if(1==this._scrollType){if(!this._isHoldAreaDone){if(t._gestureFlag|=1,(r=Math.abs(this._beginTouchPos.y-i.y))<e)return;if(0!=(2&t._gestureFlag)&&r<Math.abs(this._beginTouchPos.x-i.x))return;}
a=!0;}else if(0==this._scrollType){if(!this._isHoldAreaDone){if(t._gestureFlag|=2,(r=Math.abs(this._beginTouchPos.x-i.x))<e)return;if(0!=(1&t._gestureFlag)&&r<Math.abs(this._beginTouchPos.y-i.y))return;}
o=!0;}else{if(t._gestureFlag=3,!this._isHoldAreaDone&&(r=Math.abs(this._beginTouchPos.y-i.y))<e&&(r=Math.abs(this._beginTouchPos.x-i.x))<e)return;a=o=!0;}
var s=Math.floor(this._containerPos.x+i.x-this._beginTouchPos.x),l=Math.floor(this._containerPos.y+i.y-this._beginTouchPos.y);a&&(0<l?this._bouncebackEffect?null!=this._header&&0!=this._header.maxHeight?this._container.y=Math.floor(Math.min(.5*l,this._header.maxHeight)):this._container.y=Math.floor(Math.min(.5*l,.5*this._viewSize.y)):this._container.y=0:l<-this._overlapSize.y?this._bouncebackEffect?null!=this._footer&&0<this._footer.maxHeight?this._container.y=Math.floor(Math.max(.5*(l+this._overlapSize.y),-this._footer.maxHeight)-this._overlapSize.y):this._container.y=Math.floor(Math.max(.5*(l+this._overlapSize.y),.5*-this._viewSize.y)-this._overlapSize.y):this._container.y=-this._overlapSize.y:this._container.y=l),o&&(0<s?this._bouncebackEffect?null!=this._header&&0!=this._header.maxWidth?this._container.x=Math.floor(Math.min(.5*s,this._header.maxWidth)):this._container.x=Math.floor(Math.min(.5*s,.5*this._viewSize.x)):this._container.x=0:s<0-this._overlapSize.x?this._bouncebackEffect?null!=this._footer&&0<this._footer.maxWidth?this._container.x=Math.floor(Math.max(.5*(s+this._overlapSize.x),-this._footer.maxWidth)-this._overlapSize.x):this._container.x=Math.floor(Math.max(.5*(s+this._overlapSize.x),.5*-this._viewSize.x)-this._overlapSize.x):this._container.x=-this._overlapSize.x:this._container.x=s);var u="slow"==n.stage.frameRate?30:60,h=n.timer.currTimer/1e3,c=Math.max(h-this._lastMoveTime,1/u),_=i.x-this._lastTouchPos.x,f=i.y-this._lastTouchPos.y;if(o||(_=0),a||(f=0),0!=c){var d=c*u-1;if(1<d){var p=Math.pow(.833,d);this._velocity.x=this._velocity.x*p,this._velocity.y=this._velocity.y*p;}
this._velocity.x=ut.lerp(this._velocity.x,60*_/u/c,10*c),this._velocity.y=ut.lerp(this._velocity.y,60*f/u/c,10*c);}
var m=this._lastTouchGlobalPos.x-n.stage.mouseX,g=this._lastTouchGlobalPos.y-n.stage.mouseY;0!=_?this._velocityScale=Math.abs(m/_):0!=f&&(this._velocityScale=Math.abs(g/f)),this._lastTouchPos.setTo(i.x,i.y),this._lastTouchGlobalPos.setTo(n.stage.mouseX,n.stage.mouseY),this._lastMoveTime=h,0<this._overlapSize.x&&(this._xPos=ut.clamp(-this._container.x,0,this._overlapSize.x)),0<this._overlapSize.y&&(this._yPos=ut.clamp(-this._container.y,0,this._overlapSize.y)),0!=this._loop&&(s=this._container.x,l=this._container.y,this.loopCheckingCurrent()&&(this._containerPos.x+=this._container.x-s,this._containerPos.y+=this._container.y-l)),(t.draggingPane=this)._isHoldAreaDone=!0,this.isDragged=!0,this._maskContainer.mouseEnabled=!1,this.syncScrollBar(),this.checkRefreshBar(),this._pageMode&&this.updatePageController(),N.dispatch("fui_scroll",this._owner.displayObject);}},e.__mouseUp=function(){if(this._owner.displayObject.stage.off("mousemove",this,this.__mouseMove),this._owner.displayObject.stage.off("mouseup",this,this.__mouseUp),this._owner.displayObject.stage.off("click",this,this.__click),t.draggingPane==this&&(t.draggingPane=null),t._gestureFlag=0,!this.isDragged||!this._touchEffect)return this.isDragged=!1,void(this._maskContainer.mouseEnabled=!0);this.isDragged=!1,this._maskContainer.mouseEnabled=!0,this._tweenStart.setTo(this._container.x,this._container.y),t.sEndPos.setTo(this._tweenStart.x,this._tweenStart.y);var e=!1;if(0<this._container.x?e=!(t.sEndPos.x=0):this._container.x<-this._overlapSize.x&&(t.sEndPos.x=-this._overlapSize.x,e=!0),0<this._container.y?e=!(t.sEndPos.y=0):this._container.y<-this._overlapSize.y&&(t.sEndPos.y=-this._overlapSize.y,e=!0),e){if(this._tweenChange.setTo(t.sEndPos.x-this._tweenStart.x,t.sEndPos.y-this._tweenStart.y),this._tweenChange.x<-at.touchDragSensitivity||this._tweenChange.y<-at.touchDragSensitivity?(this._refreshEventDispatching=!0,N.dispatch("fui_pull_down_release",this._owner.displayObject),this._refreshEventDispatching=!1):(this._tweenChange.x>at.touchDragSensitivity||this._tweenChange.y>at.touchDragSensitivity)&&(this._refreshEventDispatching=!0,N.dispatch("fui_pull_up_release",this._owner.displayObject),this._refreshEventDispatching=!1),0<this._headerLockedSize&&0==t.sEndPos[this._refreshBarAxis])t.sEndPos[this._refreshBarAxis]=this._headerLockedSize,this._tweenChange.x=t.sEndPos.x-this._tweenStart.x,this._tweenChange.y=t.sEndPos.y-this._tweenStart.y;else if(0<this._footerLockedSize&&t.sEndPos[this._refreshBarAxis]==-this._overlapSize[this._refreshBarAxis]){var i=this._overlapSize[this._refreshBarAxis];0==i?i=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):i+=this._footerLockedSize,t.sEndPos[this._refreshBarAxis]=-i,this._tweenChange.x=t.sEndPos.x-this._tweenStart.x,this._tweenChange.y=t.sEndPos.y-this._tweenStart.y;}
this._tweenDuration.setTo(.3,.3);}else{if(this._inertiaDisabled)this._tweenDuration.setTo(.3,.3);else{var r="slow"==n.stage.frameRate?30:60,a=(n.timer.currTimer/1e3-this._lastMoveTime)*r-1;if(1<a){var o=Math.pow(.833,a);this._velocity.x=this._velocity.x*o,this._velocity.y=this._velocity.y*o;}
this.updateTargetAndDuration(this._tweenStart,t.sEndPos);}
if(t.sOldChange.setTo(t.sEndPos.x-this._tweenStart.x,t.sEndPos.y-this._tweenStart.y),this.loopCheckingTarget(t.sEndPos),(this._pageMode||this._snapToItem)&&this.alignPosition(t.sEndPos,!0),this._tweenChange.x=t.sEndPos.x-this._tweenStart.x,this._tweenChange.y=t.sEndPos.y-this._tweenStart.y,0==this._tweenChange.x&&0==this._tweenChange.y)return void(this._scrollBarDisplayAuto&&this.showScrollBar(!1));(this._pageMode||this._snapToItem)&&(this.fixDuration("x",t.sOldChange.x),this.fixDuration("y",t.sOldChange.y));}
this._tweening=2,this._tweenTime.setTo(0,0),n.timer.frameLoop(1,this,this.tweenUpdate);},e.__click=function(){this.isDragged=!1;},e.__mouseWheel=function(t){if(this._mouseWheelEnabled){this._owner.globalToLocal(n.stage.mouseX,n.stage.mouseY,fairygui.ScrollPane.sHelperPoint);var e=t.delta;e=0<e?-1:e<0?1:0,0<this._overlapSize.x&&0==this._overlapSize.y?this._pageMode?this.setPosX(this._xPos+this._pageSize.x*e,!1):this.setPosX(this._xPos+this._mouseWheelStep*e,!1):this._pageMode?this.setPosY(this._yPos+this._pageSize.y*e,!1):this.setPosY(this._yPos+this._mouseWheelStep*e,!1);}},e.__rollOver=function(){this.showScrollBar(!0);},e.__rollOut=function(){this.showScrollBar(!1);},e.showScrollBar=function(t){t?(this.__showScrollBar(!0),n.timer.clear(this,this.__showScrollBar)):n.timer.once(500,this,this.__showScrollBar,[t]);},e.__showScrollBar=function(t){this._scrollBarVisible=t&&0<this._viewSize.x&&0<this._viewSize.y,this._vtScrollBar&&(this._vtScrollBar.displayObject.visible=this._scrollBarVisible&&!this._vScrollNone),this._hzScrollBar&&(this._hzScrollBar.displayObject.visible=this._scrollBarVisible&&!this._hScrollNone);},e.getLoopPartSize=function(t,e){return(this._contentSize[e]+("x"==e?this._owner.columnGap:this._owner.lineGap))/t;},e.loopCheckingCurrent=function(){var t=!1;return 1==this._loop&&0<this._overlapSize.x?this._xPos<.001?(this._xPos+=this.getLoopPartSize(2,"x"),t=!0):this._xPos>=this._overlapSize.x&&(this._xPos-=this.getLoopPartSize(2,"x"),t=!0):2==this._loop&&0<this._overlapSize.y&&(this._yPos<.001?(this._yPos+=this.getLoopPartSize(2,"y"),t=!0):this._yPos>=this._overlapSize.y&&(this._yPos-=this.getLoopPartSize(2,"y"),t=!0)),t&&this._container.pos(Math.floor(-this._xPos),Math.floor(-this._yPos)),t;},e.loopCheckingTarget=function(t){1==this._loop&&this.loopCheckingTarget2(t,"x"),2==this._loop&&this.loopCheckingTarget2(t,"y");},e.loopCheckingTarget2=function(t,e){var n=NaN,i=NaN;0<t[e]?(n=this.getLoopPartSize(2,e),(i=this._tweenStart[e]-n)<=0&&i>=-this._overlapSize[e]&&(t[e]-=n,this._tweenStart[e]=i)):t[e]<-this._overlapSize[e]&&(n=this.getLoopPartSize(2,e),(i=this._tweenStart[e]+n)<=0&&i>=-this._overlapSize[e]&&(t[e]+=n,this._tweenStart[e]=i));},e.loopCheckingNewPos=function(t,e){if(0==this._overlapSize[e])return t;var n="x"==e?this._xPos:this._yPos,i=!1,r=NaN;return t<.001?n<(t+=this.getLoopPartSize(2,e))&&(r=this.getLoopPartSize(6,e),r=Math.ceil((t-n)/r)*r,n=ut.clamp(n+r,0,this._overlapSize[e]),i=!0):t>=this._overlapSize[e]&&(t-=this.getLoopPartSize(2,e))<n&&(r=this.getLoopPartSize(6,e),r=Math.ceil((n-t)/r)*r,n=ut.clamp(n-r,0,this._overlapSize[e]),i=!0),i&&("x"==e?this._container.x=-Math.floor(n):this._container.y=-Math.floor(n)),t;},e.alignPosition=function(e,n){if(this._pageMode)e.x=this.alignByPage(e.x,"x",n),e.y=this.alignByPage(e.y,"y",n);else if(this._snapToItem){var i=this._owner.getSnappingPosition(-e.x,-e.y,t.sHelperPoint);e.x<0&&e.x>-this._overlapSize.x&&(e.x=-i.x),e.y<0&&e.y>-this._overlapSize.y&&(e.y=-i.y);}},e.alignByPage=function(t,e,n){var i=0;if(0<t)i=0;else if(t<-this._overlapSize[e])i=Math.ceil(this._contentSize[e]/this._pageSize[e])-1;else{i=Math.floor(-t/this._pageSize[e]);var r=n?t-this._containerPos[e]:t-this._container[e],a=Math.min(this._pageSize[e],this._contentSize[e]-(i+1)*this._pageSize[e]),o=-t-i*this._pageSize[e];Math.abs(r)>this._pageSize[e]?.5*a<o&&i++:a*(r<0?.3:.7)<o&&i++,(t=-i*this._pageSize[e])<-this._overlapSize[e]&&(t=-this._overlapSize[e]);}
if(n){var s=this._tweenStart[e],l=0;l=0<s?0:s<-this._overlapSize[e]?Math.ceil(this._contentSize[e]/this._pageSize[e])-1:Math.floor(-s/this._pageSize[e]);var u=Math.floor(-this._containerPos[e]/this._pageSize[e]);1<Math.abs(i-u)&&Math.abs(l-u)<=1&&(t=-(i=u<i?u+1:u-1)*this._pageSize[e]);}
return t;},e.updateTargetAndDuration=function(t,e){e.x=this.updateTargetAndDuration2(t.x,"x"),e.y=this.updateTargetAndDuration2(t.y,"y");},e.updateTargetAndDuration2=function(t,e){var i=this._velocity[e],r=0;if(0<t)t=0;else if(t<-this._overlapSize[e])t=-this._overlapSize[e];else{var a=Math.abs(i)*this._velocityScale;s.onMobile&&(a*=1136/Math.max(n.stage.width,n.stage.height));var o=0;this._pageMode||!s.onMobile?500<a&&(o=Math.pow((a-500)/500,2)):1e3<a&&(o=Math.pow((a-1e3)/1e3,2)),0!=o&&(1<o&&(o=1),a*=o,i*=o,this._velocity[e]=i,r=Math.log(60/a)/Math.log(this._decelerationRate)/60,t+=Math.floor(i*r*.4));}
return r<.3&&(r=.3),this._tweenDuration[e]=r,t;},e.fixDuration=function(t,e){if(!(0==this._tweenChange[t]||Math.abs(this._tweenChange[t])>=Math.abs(e))){var n=Math.abs(this._tweenChange[t]/e)*this._tweenDuration[t];n<.3&&(n=.3),this._tweenDuration[t]=n;}},e.killTween=function(){1==this._tweening&&(this._container.pos(this._tweenStart.x+this._tweenChange.x,this._tweenStart.y+this._tweenChange.y),N.dispatch("fui_scroll",this._owner.displayObject)),this._tweening=0,n.timer.clear(this,this.tweenUpdate),N.dispatch("fui_scroll_end",this._owner.displayObject);},e.checkRefreshBar=function(){if(null!=this._header||null!=this._footer){var e=this._container[this._refreshBarAxis];if(null!=this._header)if(0<e){null==this._header.displayObject.parent&&this._maskContainer.addChildAt(this._header.displayObject,0);var n=t.sHelperPoint;n.setTo(this._header.width,this._header.height),n[this._refreshBarAxis]=e,this._header.setSize(n.x,n.y);}else null!=this._header.displayObject.parent&&this._maskContainer.removeChild(this._header.displayObject);if(null!=this._footer){var i=this._overlapSize[this._refreshBarAxis];e<-i||0==i&&0<this._footerLockedSize?(null==this._footer.displayObject.parent&&this._maskContainer.addChildAt(this._footer.displayObject,0),(n=t.sHelperPoint).setTo(this._footer.x,this._footer.y),n[this._refreshBarAxis]=0<i?e+this._contentSize[this._refreshBarAxis]:Math.max(Math.min(e+this._viewSize[this._refreshBarAxis],this._viewSize[this._refreshBarAxis]-this._footerLockedSize),this._viewSize[this._refreshBarAxis]-this._contentSize[this._refreshBarAxis]),this._footer.setXY(n.x,n.y),n.setTo(this._footer.width,this._footer.height),n[this._refreshBarAxis]=0<i?-i-e:this._viewSize[this._refreshBarAxis]-this._footer[this._refreshBarAxis],this._footer.setSize(n.x,n.y)):null!=this._footer.displayObject.parent&&this._maskContainer.removeChild(this._footer.displayObject);}}},e.tweenUpdate=function(){var t=this.runTween("x"),e=this.runTween("y");this._container.pos(t,e),2==this._tweening&&(0<this._overlapSize.x&&(this._xPos=ut.clamp(-t,0,this._overlapSize.x)),0<this._overlapSize.y&&(this._yPos=ut.clamp(-e,0,this._overlapSize.y)),this._pageMode&&this.updatePageController()),0==this._tweenChange.x&&0==this._tweenChange.y?(this._tweening=0,n.timer.clear(this,this.tweenUpdate),this.loopCheckingCurrent(),this.syncScrollBar(!0),this.checkRefreshBar(),N.dispatch("fui_scroll",this._owner.displayObject),N.dispatch("fui_scroll_end",this._owner.displayObject)):(this.syncScrollBar(!1),this.checkRefreshBar(),N.dispatch("fui_scroll",this._owner.displayObject));},e.runTween=function(e){var i=NaN;if(0!=this._tweenChange[e]){if(this._tweenTime[e]+=n.timer.delta/1e3,this._tweenTime[e]>=this._tweenDuration[e])i=this._tweenStart[e]+this._tweenChange[e],this._tweenChange[e]=0;else{var r=t.easeFunc(this._tweenTime[e],this._tweenDuration[e]);i=this._tweenStart[e]+Math.floor(this._tweenChange[e]*r);}
var a=0,o=-this._overlapSize[e];if(0<this._headerLockedSize&&this._refreshBarAxis==e&&(a=this._headerLockedSize),0<this._footerLockedSize&&this._refreshBarAxis==e){var s=this._overlapSize[this._refreshBarAxis];0==s?s=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):s+=this._footerLockedSize,o=-s;}
2==this._tweening&&this._bouncebackEffect?20+a<i&&0<this._tweenChange[e]||a<i&&0==this._tweenChange[e]?(this._tweenTime[e]=0,this._tweenDuration[e]=.3,this._tweenChange[e]=-i+a,this._tweenStart[e]=i):(i<o-20&&this._tweenChange[e]<0||i<o&&0==this._tweenChange[e])&&(this._tweenTime[e]=0,this._tweenDuration[e]=.3,this._tweenChange[e]=o-i,this._tweenStart[e]=i):a<i?(i=a,this._tweenChange[e]=0):i<o&&(i=o,this._tweenChange[e]=0);}else i=this._container[e];return i;},a(0,e,"viewWidth",function(){return this._viewSize.x;},function(t){t=t+this._owner.margin.left+this._owner.margin.right,null!=this._vtScrollBar&&(t+=this._vtScrollBar.width),this._owner.width=t;}),a(0,e,"percY",function(){return 0==this._overlapSize.y?0:this._yPos/this._overlapSize.y;},function(t){this.setPercY(t,!1);}),a(0,e,"owner",function(){return this._owner;}),a(0,e,"bouncebackEffect",function(){return this._bouncebackEffect;},function(t){this._bouncebackEffect=t;}),a(0,e,"vtScrollBar",function(){return this._vtScrollBar;}),a(0,e,"hzScrollBar",function(){return this._hzScrollBar;}),a(0,e,"header",function(){return this._header;}),a(0,e,"footer",function(){return this._footer;}),a(0,e,"isBottomMost",function(){return this._yPos==this._overlapSize.y||0==this._overlapSize.y;}),a(0,e,"touchEffect",function(){return this._touchEffect;},function(t){this._touchEffect=t;}),a(0,e,"contentWidth",function(){return this._contentSize.x;}),a(0,e,"scrollStep",function(){return this._scrollStep;},function(t){this._scrollStep=t,0==this._scrollStep&&(this._scrollStep=at.defaultScrollStep),this._mouseWheelStep=2*this._scrollStep;}),a(0,e,"viewHeight",function(){return this._viewSize.y;},function(t){t=t+this._owner.margin.top+this._owner.margin.bottom,null!=this._hzScrollBar&&(t+=this._hzScrollBar.height),this._owner.height=t;}),a(0,e,"posX",function(){return this._xPos;},function(t){this.setPosX(t,!1);}),a(0,e,"snapToItem",function(){return this._snapToItem;},function(t){this._snapToItem=t;}),a(0,e,"mouseWheelEnabled",function(){return this._mouseWheelEnabled;},function(t){this._mouseWheelEnabled=t;}),a(0,e,"decelerationRate",function(){return this._decelerationRate;},function(t){this._decelerationRate=t;}),a(0,e,"percX",function(){return 0==this._overlapSize.x?0:this._xPos/this._overlapSize.x;},function(t){this.setPercX(t,!1);}),a(0,e,"posY",function(){return this._yPos;},function(t){this.setPosY(t,!1);}),a(0,e,"contentHeight",function(){return this._contentSize.y;}),a(0,e,"currentPageX",function(){if(!this._pageMode)return 0;var t=Math.floor(this._xPos/this._pageSize.x);return this._xPos-t*this._pageSize.x>.5*this._pageSize.x&&t++,t;},function(t){this.setCurrentPageX(t,!1);}),a(0,e,"currentPageY",function(){if(!this._pageMode)return 0;var t=Math.floor(this._yPos/this._pageSize.y);return this._yPos-t*this._pageSize.y>.5*this._pageSize.y&&t++,t;},function(t){this.setCurrentPageY(t,!1);}),a(0,e,"isRightMost",function(){return this._xPos==this._overlapSize.x||0==this._overlapSize.x;}),a(0,e,"pageController",function(){return this._pageController;},function(t){this._pageController=t;}),a(0,e,"scrollingPosX",function(){return ut.clamp(-this._container.x,0,this._overlapSize.x);}),a(0,e,"scrollingPosY",function(){return ut.clamp(-this._container.y,0,this._overlapSize.y);}),t.easeFunc=function(t,e){return(t=t/e-1)*t*t+1;},t.draggingPane=null,t._gestureFlag=0,t.TWEEN_TIME_GO=.5,t.TWEEN_TIME_DEFAULT=.3,t.PULL_RATIO=.5,i(t,["sHelperPoint",function(){return this.sHelperPoint=new y();},"sHelperRect",function(){return this.sHelperRect=new v();},"sEndPos",function(){return this.sEndPos=new y();},"sOldChange",function(){return this.sOldChange=new y();}]),t;}(),nt=function(){function t(){}
return r(t,"fairygui.ScrollType"),t.parse=function(t){switch(t){case "horizontal":return 0;case "vertical":return 1;case "both":return 2;default:return 1;}},t.Horizontal=0,t.Vertical=1,t.Both=2,t;}(),it=function(){function t(t){this.name=null,this.autoPlayRepeat=1,this.autoPlayDelay=0,this._owner=null,this._ownerBaseX=0,this._ownerBaseY=0,this._items=null,this._totalTimes=0,this._totalTasks=0,this._playing=!1,this._onComplete=null,this._options=0,this._reversed=!1,this._maxTime=0,this._autoPlay=!1,this.OPTION_IGNORE_DISPLAY_CONTROLLER=1,this.OPTION_AUTO_STOP_DISABLED=2,this.OPTION_AUTO_STOP_AT_END=4,this.FRAME_RATE=24,this._owner=t,this._items=[];}
var e,i;r(t,"fairygui.Transition");var o=t.prototype;return o.play=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=0),this._play(t,e,n,!1);},o.playReverse=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=0),this._play(t,e,n,!0);},o.changeRepeat=function(t){this._totalTimes=t;},o._play=function(t,e,n,i){if(void 0===e&&(e=1),void 0===n&&(n=0),void 0===i&&(i=!1),this.stop(),this._totalTimes=e,this._reversed=i,this.internalPlay(n),this._playing=0<this._totalTasks,this._playing){if(this._onComplete=t,0!=(this._options&this.OPTION_IGNORE_DISPLAY_CONTROLLER))for(var r=this._items.length,a=0;a<r;a++){var o=this._items[a];null!=o.target&&o.target!=this._owner&&(o.displayLockToken=o.target.addDisplayLock());}}else null!=t&&t.run();},o.stop=function(t,e){if(void 0===t&&(t=!0),void 0===e&&(e=!1),this._playing){this._playing=!1,this._totalTasks=0,this._totalTimes=0;var n=this._onComplete;this._onComplete=null;var i,r=this._items.length,a=NaN;if(this._reversed)for(a=r-1;0<=a;a--){null!=(i=this._items[a]).target&&this.stopItem(i,t);}else for(a=0;a<r;a++){null!=(i=this._items[a]).target&&this.stopItem(i,t);}
e&&null!=n&&n.run();}},o.stopItem=function(t,e){if(0!=t.displayLockToken&&(t.target.releaseDisplayLock(t.displayLockToken),t.displayLockToken=0),12==t.type&&t.filterCreated&&(t.target.filters=null),!t.completed)if(null!=t.tweener&&(t.tweener.clear(),t.tweener=null),10==t.type){var i=t.target.getTransition(t.value.s);null!=i&&i.stop(e,!1);}else 11==t.type?(n.timer.clear(t,t.__shake),t.target._gearLocked=!0,t.target.setXY(t.target.x-t.startValue.f1,t.target.y-t.startValue.f2),t.target._gearLocked=!1):e&&(t.tween?t.yoyo&&t.repeat%2!=0?this.applyValue(t,this._reversed?t.endValue:t.startValue):this.applyValue(t,this._reversed?t.startValue:t.endValue):9!=t.type&&this.applyValue(t,t.value));},o.dispose=function(){if(this._playing){this._playing=!1;for(var t=this._items.length,e=0;e<t;e++){var i=this._items[e];if(null!=i.target&&!i.completed)if(null!=i.tweener&&(i.tweener.clear(),i.tweener=null),10==i.type){var r=i.target.getTransition(i.value.s);null!=r&&r.dispose();}else 11==i.type&&n.timer.clear(i,i.__shake);}}},o.setValue=function(t,e){for(var n=[],i=1,r=arguments.length;i<r;i++){n.push(arguments[i]);}
var a,o=this._items.length;for(i=0;i<o;i++){var s=this._items[i];if(null!=s.label||null!=s.label2){if(s.label==t)a=s.tween?s.startValue:s.value;else{if(s.label2!=t)continue;a=s.endValue;}
switch(s.type){case 0:case 1:case 3:case 2:case 13:a.b1=!0,a.b2=!0,a.f1=parseFloat(n[0]),a.f2=parseFloat(n[1]);break;case 4:a.f1=parseFloat(n[0]);break;case 5:a.i=parseFloat(n[0]);break;case 6:a.s=n[0];break;case 7:a.i=parseInt(n[0]),1<n.length&&(a.b=n[1]);break;case 8:a.b=n[0];break;case 9:a.s=n[0],1<n.length&&(a.f1=parseFloat(n[1]));break;case 10:a.s=n[0],1<n.length&&(a.i=parseInt(n[1]));break;case 11:a.f1=parseFloat(n[0]),1<n.length&&(a.f2=parseFloat(n[1]));break;case 12:a.f1=parseFloat(n[0]),a.f2=parseFloat(n[1]),a.f3=parseFloat(n[2]),a.f4=parseFloat(n[3]);}}}},o.setHook=function(t,e){for(var n=this._items.length,i=0;i<n;i++){var r=this._items[i];if(r.label==t){r.hook=e;break;}
if(r.label2==t){r.hook2=e;break;}}},o.clearHooks=function(){for(var t=this._items.length,e=0;e<t;e++){var n=this._items[e];n.hook=null,n.hook2=null;}},o.setTarget=function(t,e){for(var n=this._items.length,i=0;i<n;i++){var r=this._items[i];r.label==t&&(r.targetId=e.id);}},o.setDuration=function(t,e){for(var n=this._items.length,i=0;i<n;i++){var r=this._items[i];r.tween&&r.label==t&&(r.duration=e);}},o.updateFromRelations=function(t,e,n){var i=this._items.length;if(0!=i)for(var r=0;r<i;r++){var a=this._items[r];0==a.type&&a.targetId==t&&(a.tween?(a.startValue.f1+=e,a.startValue.f2+=n,a.endValue.f1+=e,a.endValue.f2+=n):(a.value.f1+=e,a.value.f2+=n));}},o.OnOwnerRemovedFromStage=function(){0==(this._options&this.OPTION_AUTO_STOP_DISABLED)&&this.stop(0!=(this._options&this.OPTION_AUTO_STOP_AT_END),!1);},o.internalPlay=function(t){void 0===t&&(t=0),this._ownerBaseX=this._owner.x,this._ownerBaseY=this._owner.y,this._totalTasks=0;for(var e,n=this._items.length,i=NaN,r=0;r<n;r++){(e=this._items[r]).targetId?e.target=this._owner.getChildById(e.targetId):e.target=this._owner,null!=e.target&&(e.tween?0<(i=this._reversed?t+this._maxTime-e.time-e.duration:t+e.time)?(this._totalTasks++,e.completed=!1,e.tweener=w.to(e.value,{},1e3*i,null,d.create(this,this.__delayCall,[e])),e.tweener.update=null):this.startTween(e):0==(i=this._reversed?t+this._maxTime-e.time:t+e.time)?(this.applyValue(e,e.value),null!=e.hook&&e.hook.run()):(e.completed=!1,this._totalTasks++,e.tweener=w.to(e.value,{},1e3*i,null,d.create(this,this.__delayCall2,[e])),e.tweener.update=null));}},o.prepareValue=function(t,e,n){var i,r;switch(void 0===n&&(n=!1),r=n?(i=t.endValue,t.startValue):(i=t.startValue,t.endValue),t.type){case 0:case 1:0==t.type?t.target==this._owner?(i.b1||(i.f1=0),i.b2||(i.f2=0)):(i.b1||(i.f1=t.target.x),i.b2||(i.f2=t.target.y)):(i.b1||(i.f1=t.target.width),i.b2||(i.f2=t.target.height)),t.value.f1=i.f1,t.value.f2=i.f2,r.b1||(r.f1=t.value.f1),r.b2||(r.f2=t.value.f2),t.value.b1=i.b1||r.b1,t.value.b2=i.b2||r.b2,e.f1=r.f1,e.f2=r.f2;break;case 2:case 13:t.value.f1=i.f1,t.value.f2=i.f2,e.f1=r.f1,e.f2=r.f2;break;case 4:t.value.f1=i.f1,e.f1=r.f1;break;case 5:t.value.i=i.i,e.i=r.i;break;case 12:t.value.f1=i.f1,t.value.f2=i.f2,t.value.f3=i.f3,t.value.f4=i.f4,e.f1=r.f1,e.f2=r.f2,e.f3=r.f3,e.f4=r.f4;}
e.dummy=0;},o.startTween=function(t){var e,n={};this.prepareValue(t,n,this._reversed),this.applyValue(t,t.value),e=0!=t.repeat?(t.tweenTimes=0,d.create(this,this.__tweenRepeatComplete,[t])):d.create(this,this.__tweenComplete,[t]),this._totalTasks++,t.completed=!1,t.tweener=w.to(t.value,n,1e3*t.duration,t.easeType,e),t.tweener.update=d.create(this,this.__tweenUpdate,[t],!1),null!=t.hook&&t.hook.run();},o.__delayCall=function(t){t.tweener=null,this._totalTasks--,this.startTween(t);},o.__delayCall2=function(t){t.tweener=null,this._totalTasks--,t.completed=!0,this.applyValue(t,t.value),null!=t.hook&&t.hook.run(),this.checkAllComplete();},o.__tweenUpdate=function(t){this.applyValue(t,t.value);},o.__tweenComplete=function(t){t.tweener=null,this._totalTasks--,t.completed=!0,null!=t.hook2&&t.hook2.run(),this.checkAllComplete();},o.__tweenRepeatComplete=function(t){if(t.tweenTimes++,-1==t.repeat||t.tweenTimes<t.repeat+1){var e={},n=!1;n=t.yoyo?this._reversed?t.tweenTimes%2==0:t.tweenTimes%2==1:this._reversed,this.prepareValue(t,e,n),t.tweener=w.to(t.value,e,1e3*t.duration,t.easeType,d.create(this,this.__tweenRepeatComplete,[t])),t.tweener.update=d.create(this,this.__tweenUpdate,[t],!1);}else this.__tweenComplete(t);},o.__playTransComplete=function(t){this._totalTasks--,t.completed=!0,this.checkAllComplete();},o.checkAllComplete=function(){if(this._playing&&0==this._totalTasks)if(this._totalTimes<0)n.timer.callLater(this,this.internalPlay);else if(this._totalTimes--,0<this._totalTimes)n.timer.callLater(this,this.internalPlay);else{this._playing=!1;for(var t=this._items.length,e=0;e<t;e++){var i=this._items[e];null!=i.target&&(0!=i.displayLockToken&&(i.target.releaseDisplayLock(i.displayLockToken),i.displayLockToken=0),i.filterCreated&&(i.filterCreated=!1,i.target.filters=null));}
if(null!=this._onComplete){var r=this._onComplete;this._onComplete=null,r.run();}}},o.applyValue=function(t,e){switch(t.target._gearLocked=!0,t.type){case 0:if(t.target==this._owner){var i=0,r=0;i=e.b1?e.f1+this._ownerBaseX:t.target.x,r=e.b2?e.f2+this._ownerBaseY:t.target.y,t.target.setXY(i,r);}else e.b1||(e.f1=t.target.x),e.b2||(e.f2=t.target.y),t.target.setXY(e.f1,e.f2);break;case 1:e.b1||(e.f1=t.target.width),e.b2||(e.f2=t.target.height),t.target.setSize(e.f1,e.f2);break;case 3:t.target.setPivot(e.f1,e.f2);break;case 4:t.target.alpha=e.f1;break;case 5:t.target.rotation=e.i;break;case 2:t.target.setScale(e.f1,e.f2);break;case 13:t.target.setSkew(e.f1,e.f2);break;case 6:t.target.color=e.s;break;case 7:e.b1||(e.i=t.target.frame),t.target.frame=e.i,t.target.playing=e.b;break;case 8:t.target.visible=e.b;break;case 10:var a=t.target.getTransition(e.s);null!=a&&(0==e.i?a.stop(!1,!0):a.playing?a._totalTimes=e.i:(t.completed=!1,this._totalTasks++,this._reversed?a.playReverse(d.create(this,this.__playTransComplete,[t]),t.value.i):a.play(d.create(this,this.__playTransComplete,[t]),t.value.i)));break;case 9:var o=st.getItemByURL(e.s);o?Ut.inst.playOneShotSound(o.owner.getItemAssetURL(o)):Ut.inst.playOneShotSound(e.s);break;case 11:t.startValue.f1=0,t.startValue.f2=0,t.startValue.f3=t.value.f2,t.startValue.i=n.timer.currTimer,n.timer.frameLoop(1,t,t.__shake,[this]),this._totalTasks++,t.completed=!1;break;case 12:var s=t.target.filters;s&&s[0]instanceof laya.filters.ColorFilter||(t.filterCreated=!0);var l=new ct();l.adjustBrightness(e.f1),l.adjustContrast(e.f2),l.adjustSaturation(e.f3),l.adjustHue(e.f4),s=[new u(l)],t.target.filters=s;}
t.target._gearLocked=!1;},o.__shakeItem=function(t){var e=Math.ceil(t.value.f1*t.startValue.f3/t.value.f2),i=(2*Math.random()-1)*e,r=(2*Math.random()-1)*e;i=0<i?Math.ceil(i):Math.floor(i),r=0<r?Math.ceil(r):Math.floor(r),t.target._gearLocked=!0,t.target.setXY(t.target.x-t.startValue.f1+i,t.target.y-t.startValue.f2+r),t.target._gearLocked=!1,t.startValue.f1=i,t.startValue.f2=r;var a=n.timer.currTimer;t.startValue.f3-=(a-t.startValue.i)/1e3,t.startValue.i=a,t.startValue.f3<=0&&(t.target._gearLocked=!0,t.target.setXY(t.target.x-t.startValue.f1,t.target.y-t.startValue.f2),t.target._gearLocked=!1,t.completed=!0,this._totalTasks--,n.timer.clear(t,t.__shake),this.checkAllComplete());},o.setup=function(t){this.name=t.getAttribute("name");var n=t.getAttribute("options");n&&(this._options=parseInt(n)),(n=t.getAttribute("autoPlay"))&&(this._autoPlay="true"==n),this._autoPlay&&((n=t.getAttribute("autoPlayRepeat"))&&(this.autoPlayRepeat=parseInt(n)),(n=t.getAttribute("autoPlayDelay"))&&(this.autoPlayDelay=parseFloat(n)));for(var i=t.childNodes,r=i.length,a=0;a<r;a++){var o=i[a];if("item"==o.nodeName){var s=new e();switch(this._items.push(s),s.time=parseInt(o.getAttribute("time"))/this.FRAME_RATE,s.targetId=o.getAttribute("target"),n=o.getAttribute("type")){case "XY":s.type=0;break;case "Size":s.type=1;break;case "Scale":s.type=2;break;case "Pivot":s.type=3;break;case "Alpha":s.type=4;break;case "Rotation":s.type=5;break;case "Color":s.type=6;break;case "Animation":s.type=7;break;case "Visible":s.type=8;break;case "Sound":s.type=9;break;case "Transition":s.type=10;break;case "Shake":s.type=11;break;case "ColorFilter":s.type=12;break;case "Skew":s.type=13;break;default:s.type=14;}
if(s.tween="true"==o.getAttribute("tween"),s.label=o.getAttribute("label"),s.tween){s.duration=parseInt(o.getAttribute("duration"))/this.FRAME_RATE,s.time+s.duration>this._maxTime&&(this._maxTime=s.time+s.duration),(n=o.getAttribute("ease"))&&(s.easeType=ut.parseEaseType(n)),(n=o.getAttribute("repeat"))&&(s.repeat=parseInt(n)),s.yoyo="true"==o.getAttribute("yoyo"),s.label2=o.getAttribute("label2");var l=o.getAttribute("endValue");l?(this.decodeValue(s.type,o.getAttribute("startValue"),s.startValue),this.decodeValue(s.type,l,s.endValue)):(s.tween=!1,this.decodeValue(s.type,o.getAttribute("startValue"),s.value));}else s.time>this._maxTime&&(this._maxTime=s.time),this.decodeValue(s.type,o.getAttribute("value"),s.value);}}},o.decodeValue=function(t,e,n){var i;switch(t){case 0:case 1:case 3:case 13:"-"==(i=e.split(","))[0]?n.b1=!1:(n.f1=parseFloat(i[0]),n.b1=!0),"-"==i[1]?n.b2=!1:(n.f2=parseFloat(i[1]),n.b2=!0);break;case 4:n.f1=parseFloat(e);break;case 5:n.i=parseInt(e);break;case 2:i=e.split(","),n.f1=parseFloat(i[0]),n.f2=parseFloat(i[1]);break;case 6:n.s=e;break;case 7:"-"==(i=e.split(","))[0]?n.b1=!1:(n.i=parseInt(i[0]),n.b1=!0),n.b="p"==i[1];break;case 8:n.b="true"==e;break;case 9:if(i=e.split(","),n.s=i[0],1<i.length){var r=parseInt(i[1]);n.f1=0==r||100==r?1:r/100;}else n.f1=1;break;case 10:i=e.split(","),n.s=i[0],1<i.length?n.i=parseInt(i[1]):n.i=1;break;case 11:i=e.split(","),n.f1=parseFloat(i[0]),n.f2=parseFloat(i[1]);break;case 12:i=e.split(","),n.f1=parseFloat(i[0]),n.f2=parseFloat(i[1]),n.f3=parseFloat(i[2]),n.f4=parseFloat(i[3]);}},a(0,o,"autoPlay",function(){return this._autoPlay;},function(t){this._autoPlay!=t&&(this._autoPlay=t,this._autoPlay?this._owner.onStage&&this.play(null,this.autoPlayRepeat,this.autoPlayDelay):this._owner.onStage||this.stop(!1,!0));}),a(0,o,"playing",function(){return this._playing;}),t.__init$=function(){(function(){function t(){}
r(t,""),t.XY=0,t.Size=1,t.Scale=2,t.Pivot=3,t.Alpha=4,t.Rotation=5,t.Color=6,t.Animation=7,t.Visible=8,t.Sound=9,t.Transition=10,t.Shake=11,t.ColorFilter=12,t.Skew=13,t.Unknown=14;})(),e=function(){function t(){this.time=0,this.targetId=null,this.type=0,this.duration=0,this.value=null,this.startValue=null,this.endValue=null,this.easeType=null,this.repeat=0,this.yoyo=!1,this.tween=!1,this.label=null,this.label2=null,this.hook=null,this.hook2=null,this.tweenTimes=0,this.tweener=null,this.completed=!1,this.target=null,this.filterCreated=!1,this.displayLockToken=0,this.easeType=h.quadOut,this.value=new i(),this.startValue=new i(),this.endValue=new i();}
return r(t,""),t.prototype.__shake=function(t){t.__shakeItem(this);},t;}(),i=function(){function t(){this.f1=0,this.f2=0,this.f3=0,this.f4=NaN,this.i=0,this.b=!1,this.s=null,this.b1=!0,this.b2=!0;}
return r(t,""),t;}();},t;}(),rt=function(){function t(t){this._data=null,this._parent=null,this._children=null,this._expanded=!1,this._tree=null,this._cell=null,this._level=0,t&&(this._children=[]);}
r(t,"fairygui.tree.TreeNode");var e=t.prototype;return e.setCell=function(t){this._cell=t;},e.setLevel=function(t){this._level=t;},e.addChild=function(t){return this.addChildAt(t,this._children.length),t;},e.addChildAt=function(t,e){if(!t)throw new Error("child is null");var n=this._children.length;if(0<=e&&e<=n)return t._parent==this?this.setChildIndex(t,e):(t._parent&&t._parent.removeChild(t),e==this._children.length?this._children.push(t):this._children.splice(e,0,t),t._parent=this,t._level=this._level+1,t.setTree(this._tree),null!=this._cell&&null!=this._cell.parent&&this._expanded&&this._tree.afterInserted(t)),t;throw new Error("Invalid child index");},e.removeChild=function(t){var e=this._children.indexOf(t);return-1!=e&&this.removeChildAt(e),t;},e.removeChildAt=function(t){if(0<=t&&t<this.numChildren){var e=this._children[t];return this._children.splice(t,1),(e._parent=null)!=this._tree&&(e.setTree(null),this._tree.afterRemoved(e)),e;}
throw new Error("Invalid child index");},e.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),(e<0||e>=this.numChildren)&&(e=this.numChildren-1);for(var n=t;n<=e;++n){this.removeChildAt(t);}},e.getChildAt=function(t){if(0<=t&&t<this.numChildren)return this._children[t];throw new Error("Invalid child index");},e.getChildIndex=function(t){return this._children.indexOf(t);},e.getPrevSibling=function(){if(null==this._parent)return null;var t=this._parent._children.indexOf(this);return t<=0?null:this._parent._children[t-1];},e.getNextSibling=function(){if(null==this._parent)return null;var t=this._parent._children.indexOf(this);return t<0||t>=this._parent._children.length-1?null:this._parent._children[t+1];},e.setChildIndex=function(t,e){var n=this._children.indexOf(t);if(-1==n)throw new Error("Not a child of this container");var i=this._children.length;e<0?e=0:i<e&&(e=i),n!=e&&(this._children.splice(n,1),this._children.splice(e,0,t),null!=this._cell&&null!=this._cell.parent&&this._expanded&&this._tree.afterMoved(t));},e.swapChildren=function(t,e){var n=this._children.indexOf(t),i=this._children.indexOf(e);if(-1==n||-1==i)throw new Error("Not a child of this container");this.swapChildrenAt(n,i);},e.swapChildrenAt=function(t,e){var n=this._children[t],i=this._children[e];this.setChildIndex(n,e),this.setChildIndex(i,t);},e.setTree=function(t){if(this._tree=t,null!=this._tree&&this._tree.treeNodeWillExpand&&this._expanded&&this._tree.treeNodeWillExpand.runWith(this),null!=this._children)for(var e=this._children.length,n=0;n<e;n++){var i=this._children[n];i._level=this._level+1,i.setTree(t);}},a(0,e,"expanded",function(){return this._expanded;},function(t){null!=this._children&&this._expanded!=t&&(this._expanded=t,null!=this._tree&&(this._expanded?this._tree.afterExpanded(this):this._tree.afterCollapsed(this)));}),a(0,e,"tree",function(){return this._tree;}),a(0,e,"level",function(){return this._level;}),a(0,e,"cell",function(){return this._cell;}),a(0,e,"data",function(){return this._data;},function(t){this._data=t;}),a(0,e,"parent",function(){return this._parent;}),a(0,e,"isFolder",function(){return null!=this._children;}),a(0,e,"text",function(){return null!=this._cell?this._cell.text:null;}),a(0,e,"numChildren",function(){return this._children.length;}),t;}(),at=(function(){function t(t){this._list=null,this._root=null,this._indent=0,this.treeNodeCreateCell=null,this.treeNodeRender=null,this.treeNodeWillExpand=null,this.treeNodeClick=null,this._list=t,this._list.removeChildrenToPool(),this._list.on("fui_click_item",this,this.__clickItem),this._root=new rt(!0),this._root.setTree(this),this._root.setCell(this._list),this._root.expanded=!0,this._indent=15;}
r(t,"fairygui.tree.TreeView");var e=t.prototype;e.getSelectedNode=function(){return-1!=this._list.selectedIndex?this._list.getChildAt(this._list.selectedIndex).data:null;},e.getSelection=function(){for(var t=this._list.getSelection(),e=t.length,n=[],i=0;i<e;i++){var r=this._list.getChildAt(t[i]).data;n.push(r);}
return n;},e.addSelection=function(t,e){void 0===e&&(e=!1);for(var n=t.parent;null!=n&&n!=this._root;){n.expanded=!0,n=n.parent;}
t.cell&&this._list.addSelection(this._list.getChildIndex(t.cell),e);},e.removeSelection=function(t){t.cell&&this._list.removeSelection(this._list.getChildIndex(t.cell));},e.clearSelection=function(){this._list.clearSelection();},e.getNodeIndex=function(t){return this._list.getChildIndex(t.cell);},e.updateNode=function(t){null!=t.cell&&this.treeNodeRender&&this.treeNodeRender.runWith(t);},e.updateNodes=function(t){for(var e=t.length,n=0;n<e;n++){var i=t[n];if(null==i.cell)return;this.treeNodeRender&&this.treeNodeRender.runWith(i);}},e.expandAll=function(t){t.expanded=!0;for(var e=t.numChildren,n=0;n<e;n++){var i=t.getChildAt(n);i.isFolder&&this.expandAll(i);}},e.collapseAll=function(t){t!=this._root&&(t.expanded=!1);for(var e=t.numChildren,n=0;n<e;n++){var i=t.getChildAt(n);i.isFolder&&this.collapseAll(i);}},e.createCell=function(t){this.treeNodeCreateCell?t.setCell(this.treeNodeCreateCell.runWith(t)):t.setCell(this._list.itemPool.getObject(this._list.defaultItem));var e=(t.cell.data=t).cell.getChild("indent");null!=e&&(e.width=(t.level-1)*this._indent);var n=t.cell.getChild("expandButton");n&&(t.isFolder?(n.visible=!0,n.onClick(this,this.__clickExpandButton),n.data=t,n.selected=t.expanded):n.visible=!1),this.treeNodeRender&&this.treeNodeRender.runWith(t);},e.afterInserted=function(t){this.createCell(t);var e=this.getInsertIndexForNode(t);this._list.addChildAt(t.cell,e),this.treeNodeRender&&this.treeNodeRender.runWith(t),t.isFolder&&t.expanded&&this.checkChildren(t,e);},e.getInsertIndexForNode=function(t){var e=t.getPrevSibling();null==e&&(e=t.parent);for(var n=this._list.getChildIndex(e.cell)+1,i=t.level,r=this._list.numChildren,a=n;a<r&&!(this._list.getChildAt(a).data.level<=i);a++){n++;}
return n;},e.afterRemoved=function(t){this.removeNode(t);},e.afterExpanded=function(t){if(t!=this._root&&this.treeNodeWillExpand&&this.treeNodeWillExpand(t),null!=t.cell){if(t!=this._root){this.treeNodeRender&&this.treeNodeRender.runWith(t);var e=t.cell.getChild("expandButton");e&&(e.selected=!0);}
null!=t.cell.parent&&this.checkChildren(t,this._list.getChildIndex(t.cell));}},e.afterCollapsed=function(t){if(t!=this._root&&this.treeNodeWillExpand&&this.treeNodeWillExpand(t),null!=t.cell){if(t!=this._root){this.treeNodeRender&&this.treeNodeRender.runWith(t);var e=t.cell.getChild("expandButton");e&&(e.selected=!1);}
null!=t.cell.parent&&this.hideFolderNode(t);}},e.afterMoved=function(t){t.isFolder?this.hideFolderNode(t):this._list.removeChild(t.cell);var e=this.getInsertIndexForNode(t);this._list.addChildAt(t.cell,e),t.isFolder&&t.expanded&&this.checkChildren(t,e);},e.checkChildren=function(t,e){for(var n=t.numChildren,i=0;i<n;i++){e++;var r=t.getChildAt(i);null==r.cell&&this.createCell(r),r.cell.parent||this._list.addChildAt(r.cell,e),r.isFolder&&r.expanded&&(e=this.checkChildren(r,e));}
return e;},e.hideFolderNode=function(t){for(var e=t.numChildren,n=0;n<e;n++){var i=t.getChildAt(n);i.cell&&null!=i.cell.parent&&this._list.removeChild(i.cell),i.isFolder&&i.expanded&&this.hideFolderNode(i);}},e.removeNode=function(t){if(null!=t.cell&&(null!=t.cell.parent&&this._list.removeChild(t.cell),this._list.returnToPool(t.cell),t.cell.data=null,t.setCell(null)),t.isFolder)for(var e=t.numChildren,n=0;n<e;n++){var i=t.getChildAt(n);this.removeNode(i);}},e.__clickExpandButton=function(t){t.stopPropagation();var e=G.cast(t.currentTarget),n=e.parent.data;if(null!=this._list.scrollPane){var i=this._list.scrollPane.posY;e.selected?n.expanded=!0:n.expanded=!1,this._list.scrollPane.posY=i,this._list.scrollPane.scrollToView(n.cell);}else e.selected?n.expanded=!0:n.expanded=!1;},e.__clickItem=function(t,e){if(null!=this._list.scrollPane)var n=this._list.scrollPane.posY;var i=t.data;this.treeNodeClick&&this.treeNodeClick.runWith([i,e]),null!=this._list.scrollPane&&(this._list.scrollPane.posY=n,i.cell&&this._list.scrollPane.scrollToView(i.cell));},a(0,e,"list",function(){return this._list;}),a(0,e,"root",function(){return this._root;}),a(0,e,"indent",function(){return this._indent;},function(t){this._indent=t;});}(),function(){function t(){}
return r(t,"fairygui.UIConfig",null,"UIConfig$1"),t.defaultFont="SimSun",t.windowModalWaiting=null,t.globalModalWaiting=null,t.modalLayerColor="rgba(33,33,33,0.2)",t.buttonSound=null,t.buttonSoundVolumeScale=1,t.horizontalScrollBar=null,t.verticalScrollBar=null,t.defaultScrollStep=25,t.defaultScrollDecelerationRate=.967,t.defaultScrollBarDisplay=1,t.defaultScrollTouchEffect=!0,t.defaultScrollBounceEffect=!0,t.popupMenu=null,t.popupMenu_seperator=null,t.loaderErrorSign=null,t.tooltipsWin=null,t.defaultComboBoxVisibleItemCount=10,t.touchScrollSensitivity=20,t.touchDragSensitivity=10,t.clickDragSensitivity=2,t.bringWindowToFrontOnClick=!0,t.frameTimeForAsyncUIConstruction=2,t.textureLinearSampling=!0,t.packageFileExtension="fui",t;}()),ot=function(){function t(){}
return r(t,"fairygui.UIObjectFactory"),t.setPackageItemExtension=function(e,n){if(null==e)throw new Error("Invaild url: "+e);var i=st.getItemByURL(e);null!=i&&(i.extensionType=n),t.packageItemExtensions[e]=n;},t.setLoaderExtension=function(t){fairygui.UIObjectFactory.loaderType=t;},t.resolvePackageItemExtension=function(e){e.extensionType=t.packageItemExtensions["ui://"+e.owner.id+e.id],e.extensionType||(e.extensionType=t.packageItemExtensions["ui://"+e.owner.name+"/"+e.name]);},t.newObject=function(t){switch(t.type){case 0:return new Dt();case 2:return new Mt();case 4:var e=t.extensionType;if(e)return new e();var n=t.owner.getItemAsset(t).getAttribute("extention");if(null==n)return new gt();switch(n){case "Button":return new Ot();case "Label":return new Lt();case "ProgressBar":return new Nt();case "Slider":return new kt();case "ScrollBar":return new Bt();case "ComboBox":return new Rt();default:return new gt();}}
return null;},t.newObject2=function(t){switch(t){case "image":return new Dt();case "movieclip":return new Mt();case "component":return new gt();case "text":return new At();case "richtext":return new Vt();case "inputtext":return new Gt();case "group":return new bt();case "list":return new Ft();case "graph":return new St();case "loader":return null!=fairygui.UIObjectFactory.loaderType?new fairygui.UIObjectFactory.loaderType():new Pt();}
return null;},t.packageItemExtensions={},t.loaderType=null,t;}(),st=function(){function t(){this._id=null,this._name=null,this._basePath=null,this._items=null,this._itemsById=null,this._itemsByName=null,this._resKey=null,this._resData=null,this._customId=null,this._sprites=null,this._hitTestDatas=null,this._items=[],this._sprites={},this._hitTestDatas={};}
var e;r(t,"fairygui.UIPackage");var n=t.prototype;return n.create=function(t,e){this._resKey=t,this.loadPackage(e);},n.loadPackage=function(t){var n,i;if(!t&&!(t=E.inst.getRes(this._resKey+"."+at.packageFileExtension))){console.error("package resource not ready: "+this._resKey);}
this.decompressPackage(t);for(var r=(i=(n=this.getDesc("sprites.bytes")).split("\n")).length,a=1;a<r;a++){if(n=i[a]){var o=n.split(" "),s=new e(),l=o[0],u=parseInt(o[1]);if(0<=u)s.atlas="atlas"+u;else{var h=l.indexOf("_");s.atlas=-1==h?"atlas_"+l:"atlas_"+l.substr(0,h);}
s.rect.x=parseInt(o[2]),s.rect.y=parseInt(o[3]),s.rect.width=parseInt(o[4]),s.rect.height=parseInt(o[5]),s.rotated="1"==o[6],this._sprites[l]=s;}}
if(null!=(n=this.getDesc("hittest.bytes"))){var c=ut.base64Decode(n);for(c.endian="bigEndian";c.bytesAvailable;){var _=new lt();(this._hitTestDatas[c.readUTFString()]=_).load(c);}}
n=this.getDesc("package.xml");var f=D.parseXMLFromString(n).firstChild;this._id=f.getAttribute("id"),this._name=f.getAttribute("name");var d,p,m=ut.findChildNode(f,"resources").childNodes;this._itemsById={},this._itemsByName={};for(var g=m.length,y=0;y<g;y++){if(1==(p=m[y]).nodeType){switch((d=new Y()).owner=this,d.type=q.parse(p.nodeName),d.id=p.getAttribute("id"),d.name=p.getAttribute("name"),d.file=p.getAttribute("file"),(n=p.getAttribute("size"))&&(i=n.split(","),d.width=parseInt(i[0]),d.height=parseInt(i[1])),d.type){case 0:"9grid"==(n=p.getAttribute("scale"))?(d.scale9Grid=new laya.maths.Rectangle(),(n=p.getAttribute("scale9grid"))&&(i=n.split(","),d.scale9Grid.x=parseInt(i[0]),d.scale9Grid.y=parseInt(i[1]),d.scale9Grid.width=parseInt(i[2]),d.scale9Grid.height=parseInt(i[3]),(n=p.getAttribute("gridTile"))&&(d.tileGridIndice=parseInt(n)))):"tile"==n&&(d.scaleByTile=!0),n=p.getAttribute("smoothing"),d.smoothing="false"!=n;break;case 4:ot.resolvePackageItemExtension(d);}
this._items.push(d),null!=(this._itemsById[d.id]=d).name&&(this._itemsByName[d.name]=d);}}
for(r=this._items.length,a=0;a<r;a++){6==(d=this._items[a]).type&&(this.loadFont(d),fairygui.UIPackage._bitmapFonts[d.bitmapFont.id]=d.bitmapFont);}},n.decompressPackage=function(t){console.log("decom:",this._resKey);if(this._resKey==="subpackage/res/UI/Game"){this._resData=__resmap;return;}
if(this._resKey==="res/uilocal/Main"){this._resData=__resmain;return;}
if(this._resKey==="PfusdkRes/UI/fairygui/pfusdkui"){this._resData=__respfusdkui;return;}
this._resData={};var e=new Uint8Array(t.slice(0,2));if(80==e[0]&&75==e[1])t.position=0,this.decodeUncompressed(t);else{var n;n=new Zlib.RawInflate(t).decompress();for(var i,r=new l(n).readUTFBytes(),a=0,o=NaN;;){var s=r.indexOf("|",a);if(-1==s)break;i=r.substring(a,s),a=s+1,s=r.indexOf("|",a),o=parseInt(r.substring(a,s)),a=s+1,this._resData[i]=r.substr(a,o),a+=o;}}
console.log(this._resKey,this._resData);},n.decodeUncompressed=function(t){var e=new l(t),n=e.length-22;e.pos=n+10;var i=e.getUint16();e.pos=n+16,n=e.getInt32();for(var r=0;r<i;r++){e.pos=n+28;var a=e.getUint16(),o=e.getUint16()+e.getUint16();e.pos=n+46;var s=e.getUTFBytes(a);if("/"!=s[s.length-1]&&"\\"!=s[s.length-1]){e.pos=n+20;var u=e.getInt32();e.pos=n+42;var h=e.getInt32()+30+a;0<u&&(e.pos=h,this._resData[s]=e.readUTFBytes(u));}
n+=46+a+o;}},n.dispose=function(){for(var t=this._items.length,e=0;e<t;e++){var n=this._items[e];if(7==n.type){var i=n.texture;null!=i&&i.destroy(!0);}
null!=n.bitmapFont&&delete fairygui.UIPackage._bitmapFonts[n.bitmapFont.id];}},n.createObject=function(t,e){var n=this._itemsByName[t];return n?this.internalCreateObject(n,e):null;},n.internalCreateObject=function(t,e){var n;return null==(n=4==t.type&&null!=e?new e():ot.newObject(t))?null:(fairygui.UIPackage._constructing++,n.packageItem=t,n.constructFromResource(),fairygui.UIPackage._constructing--,n);},n.getItemById=function(t){return this._itemsById[t];},n.getItemByName=function(t){return this._itemsByName[t];},n.getItemAssetByName=function(t){var e=this._itemsByName[t];if(null==e)throw "Resource not found -"+t;return this.getItemAsset(e);},n.getItemAssetURL=function(t){return this._resKey+"@"+t.file;},n.getItemAsset=function(t){switch(t.type){case 0:if(!t.decoded){t.decoded=!0;var e=this._sprites[t.id];null!=e&&(t.texture=this.createSpriteTexture(e));}
return t.texture;case 7:if(!t.decoded){t.decoded=!0;var n=null!=t.file&&0<t.file.length?t.file:t.id+".png";t.texture=E.inst.getRes(this._resKey+"@"+n),at.textureLinearSampling||(t.texture.isLinearSampling=!1);}
return t.texture;case 3:return t.decoded||(t.decoded=!0,t.sound=E.inst.getRes(this._resKey+"@"+t.file)),t.sound;case 6:return t.decoded||(t.decoded=!0,this.loadFont(t)),t.bitmapFont;case 2:return t.decoded||(t.decoded=!0,this.loadMovieClip(t)),t.frames;case 4:if(!t.decoded){t.decoded=!0;var i=this.getDesc(t.id+".xml"),r=D.parseXMLFromString(i);t.componentData=r.firstChild,this.loadComponentChildren(t),this.translateComponent(t);}
return t.componentData;default:return E.inst.getRes(this._resKey+"@"+t.id);}},n.getDesc=function(t){return this._resData[t];},n.getPixelHitTestData=function(t){return this._hitTestDatas[t];},n.loadComponentChildren=function(t){var e=ut.findChildNode(t.componentData,"displayList");if(null!=e){var n,i=e.childNodes,r=i.length;t.displayList=o(r);for(var a=0;a<r;a++){var s=i[a],l=s.nodeName,u=s.getAttribute("src");if(u){var h,c=s.getAttribute("pkg"),_=null!=(h=c&&c!=t.owner.id?fairygui.UIPackage.getById(c):t.owner)?h.getItemById(u):null;n=null!=_?new V(_,null):new V(null,l);}else n="text"==l&&"true"==s.getAttribute("input")?new V(null,"inputtext"):new V(null,l);n.desc=s,t.displayList[a]=n;}}else t.displayList=o(0,null);},n.translateComponent=function(t){if(null!=fairygui.UIPackage._stringsSource){var e=fairygui.UIPackage._stringsSource[this.id+t.id];if(null!=e){var n,i,r,a,o,s,l,u=t.displayList.length,h=NaN,c=NaN,_=NaN,f=NaN;for(c=0;c<u;c++){if(o=(i=t.displayList[c].desc).nodeName,s=i.getAttribute("id"),i.getAttribute("tooltips")&&null!=(n=e[s+"-tips"])&&i.setAttribute("tooltips",n),(r=ut.findChildNode(i,"gearText"))&&(null!=(n=e[s+"-texts"])&&r.setAttribute("values",n),null!=(n=e[s+"-texts_def"])&&r.setAttribute("default",n)),"text"==o||"richtext"==o)null!=(n=e[s])&&i.setAttribute("text",n),null!=(n=e[s+"-Prompt"])&&i.setAttribute("Prompt",n);else if("list"==o)for(h=(l=i.childNodes).length,_=f=0;_<h;_++){"item"==(a=l[_]).nodeName&&(null!=(n=e[s+"-"+f])&&a.setAttribute("title",n),f++);}else if("component"==o){if(r=ut.findChildNode(i,"Button")){null!=(n=e[s])&&r.setAttribute("title",n),null!=(n=e[s+"-0"])&&r.setAttribute("selectedTitle",n);continue;}
if(r=ut.findChildNode(i,"Label")){null!=(n=e[s])&&r.setAttribute("title",n),null!=(n=e[s+"-Prompt"])&&r.setAttribute("Prompt",n);continue;}
if(r=ut.findChildNode(i,"ComboBox")){for(null!=(n=e[s])&&r.setAttribute("title",n),h=(l=r.childNodes).length,_=f=0;_<h;_++){"item"==(a=l[_]).nodeName&&(null!=(n=e[s+"-"+f])&&a.setAttribute("title",n),f++);}
continue;}}}}}},n.createSpriteTexture=function(t){var e=this._itemsById[t.atlas];if(null==e)return null;var n=this.getItemAsset(e);return null==n?null:this.createSubTexture(n,t.rect);},n.createSubTexture=function(t,e){return b.createFromTexture(t,e.x,e.y,e.width,e.height);},n.loadMovieClip=function(t){var e,n,i=D.parseXMLFromString(this.getDesc(t.id+".xml")).firstChild;(e=i.getAttribute("interval"))&&(t.interval=parseInt(e)),(e=i.getAttribute("swing"))&&(t.swing="true"==e),(e=i.getAttribute("repeatDelay"))&&(t.repeatDelay=parseInt(e)),parseInt(i.getAttribute("frameCount")),t.frames=[];for(var r=ut.findChildNode(i,"frames").childNodes,a=0,o=r.length,s=0;s<o;s++){var l=r[s];if("frame"==l.nodeName){var u=new L();if(n=(e=l.getAttribute("rect")).split(","),u.rect=new v(parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])),(e=l.getAttribute("addDelay"))&&(u.addDelay=parseInt(e)),0!=(t.frames[a]=u).rect.width){e=(e=l.getAttribute("sprite"))?t.id+"_"+e:t.id+"_"+a;var h=this._sprites[e];null!=h&&(u.texture=this.createSpriteTexture(h)),a++;}}}},n.loadFont=function(t){var e=new O();e.id="ui://"+this.id+t.id;var n,i,r=this.getDesc(t.id+".fnt"),a=r.split("\n"),o=a.length,s=0,l={},u=!1,h=0,c=0,_=!1,f=0,d=0,p=0;for(s=0;s<o;s++){if(0!=(r=a[s]).length){for(var m=(r=ut.trim(r)).split(" "),g=1;g<m.length;g++){var y=m[g].split("=");l[y[0]]=y[1];}
if("char"==(r=m[0])){var I=new R();I.x=isNaN(l.x)?0:parseInt(l.x),I.y=isNaN(l.y)?0:parseInt(l.y),I.offsetX=isNaN(l.xoffset)?0:parseInt(l.xoffset),I.offsetY=isNaN(l.yoffset)?0:parseInt(l.yoffset),I.width=isNaN(l.width)?0:parseInt(l.width),I.height=isNaN(l.height)?0:parseInt(l.height),I.advance=isNaN(l.xadvance)?0:parseInt(l.xadvance),null!=l.chnl&&(I.channel=parseInt(l.chnl),15==I.channel?I.channel=4:1==I.channel?I.channel=3:2==I.channel?I.channel=2:I.channel=1),u?null!=i&&(I.texture=this.createSubTexture(i,new v(I.x+f,I.y+d,I.width,I.height))):l.img&&null!=(n=this._itemsById[l.img])&&(n.load(),I.width=n.width,I.height=n.height,I.texture=n.texture),u?I.lineHeight=p:(0==I.advance&&(I.advance=0==c?I.offsetX+I.width:c),I.lineHeight=I.offsetY<0?I.height:I.offsetY+I.height,0<h&&I.lineHeight<h&&(I.lineHeight=h)),e.glyphs[String.fromCharCode(l.id)]=I;}else if("info"==r){if(u=null!=l.face,isNaN(l.size)||(h=parseInt(l.size)),_="true"==l.resizable,u){var x=this._sprites[t.id];if(null!=x){f=x.rect.x,d=x.rect.y;var T=this._itemsById[x.atlas];null!=T&&(i=this.getItemAsset(T));}}}else "common"==r&&(isNaN(l.lineHeight)||(p=parseInt(l.lineHeight)),0==h?h=p:0==p&&(p=h),isNaN(l.xadvance)||(c=parseInt(l.xadvance)));}}
0==h&&I&&(h=I.height),e.ttf=u,e.size=h,e.resizable=_,t.bitmapFont=e;},a(0,n,"id",function(){return this._id;}),a(0,n,"name",function(){return this._name;}),a(0,n,"customId",function(){return this._customId;},function(t){null!=this._customId&&delete fairygui.UIPackage._packageInstById[this._customId],this._customId=t,null!=this._customId&&(fairygui.UIPackage._packageInstById[this._customId]=this);}),t.getById=function(t){return fairygui.UIPackage._packageInstById[t];},t.getByName=function(t){return fairygui.UIPackage._packageInstByName[t];},t.addPackage=function(e,n){var i=new t();return i.create(e,n),fairygui.UIPackage._packageInstById[i.id]=i,(fairygui.UIPackage._packageInstByName[i.name]=i).customId=e,i;},t.removePackage=function(t){var e=fairygui.UIPackage._packageInstById[t];if(e||(e=fairygui.UIPackage._packageInstByName[t]),!e)throw new Error("unknown package: "+t);e.dispose(),delete fairygui.UIPackage._packageInstById[e.id],null!=e._customId&&delete fairygui.UIPackage._packageInstById[e._customId],delete fairygui.UIPackage._packageInstByName[e.name];},t.createObject=function(t,e,n){var i=fairygui.UIPackage.getByName(t);return i?i.createObject(e,n):null;},t.createObjectFromURL=function(t,e){var n=fairygui.UIPackage.getItemByURL(t);return n?n.owner.internalCreateObject(n,e):null;},t.getItemURL=function(t,e){var n=fairygui.UIPackage.getByName(t);if(!n)return null;var i=n._itemsByName[e];return i?"ui://"+n.id+i.id:null;},t.getItemByURL=function(e){var n=e.indexOf("//");if(-1==n)return null;var i=e.indexOf("/",n+2);if(-1==i){if(13<e.length){var r=e.substr(5,8),a=t.getById(r);if(null!=a){var o=e.substr(13);return a.getItemById(o);}}}else{var s=e.substr(n+2,i-n-2);if(null!=(a=t.getByName(s))){var l=e.substr(i+1);return a.getItemByName(l);}}
return null;},t.normalizeURL=function(e){if(null==e)return null;var n=e.indexOf("//");if(-1==n)return null;var i=e.indexOf("/",n+2);if(-1==i)return e;var r=e.substr(n+2,i-n-2),a=e.substr(i+1);return t.getItemURL(r,a);},t.getBitmapFontByURL=function(t){return fairygui.UIPackage._bitmapFonts[t];},t.setStringsSource=function(t){fairygui.UIPackage._stringsSource={};for(var e=D.parseXMLFromString(t),n=ut.findChildNode(e,"resources").childNodes,i=n.length,r=0;r<i;r++){var a=n[r];if("string"==a.nodeName){var o=a.getAttribute("name"),s=a.textContent,l=o.indexOf("-");if(-1==l)continue;var u=o.substr(0,l),h=o.substr(l+1),c=fairygui.UIPackage._stringsSource[u];c||(c={},fairygui.UIPackage._stringsSource[u]=c),c[h]=s;}}},t._constructing=0,t._packageInstById={},t._packageInstByName={},t._bitmapFonts={},t._stringsSource=null,t.sep0=",",t.sep1="\n",t.sep2=" ",t.sep3="=",t.__init$=function(){e=function(){function t(){this.atlas=null,this.rect=null,this.rotated=!1,this.rect=new v();}
return r(t,""),t;}();},t;}(),lt=function(){function t(){this.pixelWidth=0,this.scale=NaN,this.pixels=null;}
return r(t,"fairygui.utils.PixelHitTestData"),t.prototype.load=function(t){t.getInt32(),this.pixelWidth=t.getInt32(),this.scale=1/t.readByte();var e=t.getInt32();this.pixels=o(e);for(var n=0;n<e;n++){var i=t.readByte();i<0&&(i+=256),this.pixels[n]=i;}},t;}(),ut=function(){function t(){}
return r(t,"fairygui.utils.ToolSet"),t.getFileName=function(t){var e=t.lastIndexOf("/");return-1!=e&&(t=t.substr(e+1)),-1!=(e=t.lastIndexOf("\\"))&&(t=t.substr(e+1)),-1!=(e=t.lastIndexOf("."))?t.substring(0,e):t;},t.startsWith=function(t,e,n){return void 0===n&&(n=!1),!(!t||t.length<e.length||(t=t.substring(0,e.length),n?t.toLowerCase()!=e.toLowerCase():t!=e));},t.endsWith=function(t,e,n){return void 0===n&&(n=!1),!(!t||t.length<e.length||(t=t.substring(t.length-e.length),n?t.toLowerCase()!=e.toLowerCase():t!=e));},t.trim=function(t){return fairygui.utils.ToolSet.trimLeft(fairygui.utils.ToolSet.trimRight(t));},t.trimLeft=function(t){for(var e="",n=0;n<t.length&&(" "==(e=t.charAt(n))||"\n"==e||"\r"==e);n++){}
return t.substr(n);},t.trimRight=function(t){for(var e="",n=t.length-1;0<=n&&(" "==(e=t.charAt(n))||"\n"==e||"\r"==e);n--){}
return t.substring(0,n+1);},t.convertToHtmlColor=function(t,e){var n;void 0===e&&(e=!1),n=e?(t>>24&255).toString(16):"";var i=(t>>16&255).toString(16),r=(t>>8&255).toString(16),a=(255&t).toString(16);return 1==n.length&&(n="0"+n),1==i.length&&(i="0"+i),1==r.length&&(r="0"+r),1==a.length&&(a="0"+a),"#"+n+i+r+a;},t.convertFromHtmlColor=function(t,e){return void 0===e&&(e=!1),t.length<1?0:("#"==t.charAt(0)&&(t=t.substr(1)),8==t.length?(parseInt(t.substr(0,2),16)<<24)+parseInt(t.substr(2),16):e?4278190080+parseInt(t,16):parseInt(t,16));},t.displayObjectToGObject=function(t){for(;null!=t&&!(t instanceof laya.display.Stage);){if(t.$owner)return t.$owner;t=t.parent;}
return null;},t.findChildNode=function(t,e){var n=t.childNodes,i=n.length;if(0<i)for(var r=0;r<i;r++){var a=n[r];if(a.nodeName==e)return a;}
return null;},t.encodeHTML=function(t){return t?t.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;").replace("'","&apos;"):"";},t.parseUBB=function(t){return fairygui.utils.ToolSet.defaultUBBParser.parse(t);},t.removeUBB=function(t){return fairygui.utils.ToolSet.defaultUBBParser.parse(t,!0);},t.parseEaseType=function(e){var n=t.EaseMap[e];return n||(n=h.quartOut),n;},t.clamp=function(t,e,n){return t<e?t=e:n<t&&(t=n),t;},t.clamp01=function(t){return 1<t?t=1:t<0&&(t=0),t;},t.base64Decode=function(e){for(var n=new l(),i=0,r=e.length,a=0;a<r;a+=4){i=(63&t.BASE64_CHARS.indexOf(e.charAt(a)))<<18,i+=(63&t.BASE64_CHARS.indexOf(e.charAt(a+1)))<<12,i+=(63&t.BASE64_CHARS.indexOf(e.charAt(a+2)))<<6,i+=63&t.BASE64_CHARS.indexOf(e.charAt(a+3)),n.writeByte(i>>16&255),n.writeByte(i>>8&255),n.writeByte(255&i);}
return 0<r&&"="==e.charAt(r-1)&&(n.length-=1),1<r&&"="==e.charAt(r-2)&&(n.length-=1),n.pos=0,n;},t.lerp=function(t,e,n){return t+n*(e-t);},t.BASE64_CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i(t,["defaultUBBParser",function(){return this.defaultUBBParser=new ht();},"EaseMap",function(){return this.EaseMap={Linear:h.linearNone,"Elastic.In":h.elasticIn,"Elastic.Out":h.elasticOut,"Elastic.InOut":h.elasticInOut,"Quad.In":h.quadIn,"Quad.Out":h.quadOut,"Quad.InOut":h.quadInOut,"Cube.In":h.cubicIn,"Cube.Out":h.cubicOut,"Cube.InOut":h.cubicInOut,"Quart.In":h.quartIn,"Quart.Out":h.quartOut,"Quart.InOut":h.quartInOut,"Quint.In":h.quintIn,"Quint.Out":h.quintOut,"Quint.InOut":h.quintInOut,"Sine.In":h.sineIn,"Sine.Out":h.sineOut,"Sine.InOut":h.sineInOut,"Bounce.In":h.bounceIn,"Bounce.Out":h.bounceOut,"Bounce.InOut":h.bounceInOut,"Circ.In":h.circIn,"Circ.Out":h.circOut,"Circ.InOut":h.circInOut,"Expo.In":h.quartIn,"Expo.Out":h.quartOut,"Expo.InOut":h.quartInOut,"Back.In":h.backIn,"Back.Out":h.backOut,"Back.InOut":h.backInOut};}]),t;}(),ht=function(){function t(){this._text=null,this._readPos=0,this._handlers=null,this.smallFontSize=12,this.normalFontSize=14,this.largeFontSize=16,this.defaultImgWidth=0,this.defaultImgHeight=0,this._handlers={},this._handlers.url=this.onTag_URL,this._handlers.img=this.onTag_IMG,this._handlers.b=this.onTag_Simple,this._handlers.i=this.onTag_Simple,this._handlers.u=this.onTag_Simple,this._handlers.sup=this.onTag_Simple,this._handlers.sub=this.onTag_Simple,this._handlers.color=this.onTag_COLOR,this._handlers.font=this.onTag_FONT,this._handlers.size=this.onTag_SIZE;}
r(t,"fairygui.utils.UBBParser");var e=t.prototype;return e.onTag_URL=function(t,e,n){return e?"</a>":null!=n?'<a href="'+n+'" target="_blank">':'<a href="'+this.getTagText()+'" target="_blank">';},e.onTag_IMG=function(t,e,n){if(e)return null;var i=this.getTagText(!0);return i?this.defaultImgWidth?'<img src="'+i+'" width="'+this.defaultImgWidth+'" height="'+this.defaultImgHeight+'"/>':'<img src="'+i+'"/>':null;},e.onTag_Simple=function(t,e,n){return e?"</"+t+">":"<"+t+">";},e.onTag_COLOR=function(t,e,n){return e?"</font>":'<font color="'+n+'">';},e.onTag_FONT=function(t,e,n){return e?"</font>":'<font face="'+n+'">';},e.onTag_SIZE=function(t,e,n){return e?"</font>":("normal"==n?n=""+this.normalFontSize:"small"==n?n=""+this.smallFontSize:"large"==n?n=""+this.largeFontSize:n.length&&"+"==n.charAt(0)?n=""+(this.smallFontSize+parseInt(n.substr(1))):n.length&&"-"==n.charAt(0)&&(n=""+(this.smallFontSize-parseInt(n.substr(1)))),'<font size="'+n+'">');},e.getTagText=function(t){void 0===t&&(t=!1);for(var e=this._readPos,n=0,i="";-1!=(n=this._text.indexOf("[",e));){if(92!=this._text.charCodeAt(n-1)){i+=this._text.substring(e,n);break;}
i+=this._text.substring(e,n-1),i+="[",e=n+1;}
return-1==n?null:(t&&(this._readPos=n),i);},e.parse=function(t,e){void 0===e&&(e=!1),this._text=t;for(var n,i,r,a,o=0,s=0,l=0,u=!1,h="";-1!=(s=this._text.indexOf("[",o));){if(0<s&&92==this._text.charCodeAt(s-1))h+=this._text.substring(o,s-1),h+="[",o=s+1;else{if(h+=this._text.substring(o,s),o=s,-1==(s=this._text.indexOf("]",o)))break;u="/"==this._text.charAt(o+1),n=this._text.substring(u?o+2:o+1,s),this._readPos=s+1,r=i=null,-1!=(l=n.indexOf("="))&&(i=n.substring(l+1),n=n.substring(0,l)),n=n.toLowerCase(),null!=(a=this._handlers[n])?e||null!=(r=a(n,u,i))&&(h+=r):h+=this._text.substring(o,this._readPos),o=this._readPos;}}
return o<this._text.length&&(h+=this._text.substr(o)),this._text=null,h;},i(t,["inst",function(){return this.inst=new t();}]),t;}(),ct=function(t){function e(){e.__super.call(this),this.reset();}
r(e,"fairygui.utils.ColorMatrix",Array);var n=e.prototype;return n.reset=function(){for(var t=0;t<e.LENGTH;t++){this[t]=e.IDENTITY_MATRIX[t];}},n.invert=function(){this.multiplyMatrix([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]);},n.adjustColor=function(t,e,n,i){this.adjustHue(i),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(n);},n.adjustBrightness=function(t){t=255*this.cleanValue(t,1),this.multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0]);},n.adjustContrast=function(t){var e=(t=this.cleanValue(t,1))+1,n=128*(1-e);this.multiplyMatrix([e,0,0,0,n,0,e,0,0,n,0,0,e,0,n,0,0,0,1,0]);},n.adjustSaturation=function(t){t=this.cleanValue(t,1);var e=1-(t+=1),n=.299*e,i=.587*e,r=.114*e;this.multiplyMatrix([n+t,i,r,0,0,n,i+t,r,0,0,n,i,r+t,0,0,0,0,0,1,0]);},n.adjustHue=function(t){t=this.cleanValue(t,1),t*=Math.PI;var e=Math.cos(t),n=Math.sin(t);this.multiplyMatrix([.299+e*(1-.299)+-.299*n,.587+-.587*e+-.587*n,.114+-.114*e+.886*n,0,0,.299+-.299*e+.143*n,.587+e*(1-.587)+.14*n,.114+-.114*e+-.283*n,0,0,.299+-.299*e+n*-(1-.299),.587+-.587*e+.587*n,.114+.886*e+.114*n,0,0,0,0,0,1,0]);},n.concat=function(t){t.length==e.LENGTH&&this.multiplyMatrix(t);},n.clone=function(){var t=new e();return t.copyMatrix(this),t;},n.copyMatrix=function(t){for(var n=e.LENGTH,i=0;i<n;i++){this[i]=t[i];}},n.multiplyMatrix=function(t){for(var e=[],n=0,i=0;i<4;++i){for(var r=0;r<5;++r){e[n+r]=t[n]*this[r]+t[n+1]*this[r+5]+t[n+2]*this[r+10]+t[n+3]*this[r+15]+(4==r?t[n+4]:0);}
n+=5;}
this.copyMatrix(e);},n.cleanValue=function(t,e){return Math.min(e,Math.max(-e,t));},e.create=function(t,n,i,r){var a=new e();return a.adjustColor(t,n,i,r),a;},e.LUMA_R=.299,e.LUMA_G=.587,e.LUMA_B=.114,i(e,["IDENTITY_MATRIX",function(){return this.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];},"LENGTH",function(){return this.LENGTH=e.IDENTITY_MATRIX.length;}]),e;}(Array),_t=function(t){function e(){this._name=null,this._selectedIndex=0,this._previousIndex=0,this._pageIds=null,this._pageNames=null,this._actions=null,this._parent=null,this._autoRadioGroupDepth=!1,this.changing=!1,e.__super.call(this),this._pageIds=[],this._pageNames=[],this._selectedIndex=-1,this._previousIndex=-1;}
r(e,"fairygui.Controller",_);var n=e.prototype;return n.dispose=function(){this.offAll();},n.setSelectedIndex=function(t){if(void 0===t&&(t=0),this._selectedIndex!=t){if(t>this._pageIds.length-1)throw "index out of bounds: "+t;this.changing=!0,this._previousIndex=this._selectedIndex,this._selectedIndex=t,this._parent.applyController(this),this.changing=!1;}},n.setSelectedPage=function(t){var e=this._pageNames.indexOf(t);-1==e&&(e=0),this.setSelectedIndex(e);},n.getPageName=function(t){return void 0===t&&(t=0),this._pageNames[t];},n.addPage=function(t){void 0===t&&(t=""),this.addPageAt(t,this._pageIds.length);},n.addPageAt=function(t,e){void 0===e&&(e=0);var n=""+fairygui.Controller._nextPageId++;e==this._pageIds.length?(this._pageIds.push(n),this._pageNames.push(t)):(this._pageIds.splice(e,0,n),this._pageNames.splice(e,0,t));},n.removePage=function(t){var e=this._pageNames.indexOf(t);-1!=e&&(this._pageIds.splice(e,1),this._pageNames.splice(e,1),this._selectedIndex>=this._pageIds.length?this.selectedIndex=this._selectedIndex-1:this._parent.applyController(this));},n.removePageAt=function(t){void 0===t&&(t=0),this._pageIds.splice(t,1),this._pageNames.splice(t,1),this._selectedIndex>=this._pageIds.length?this.selectedIndex=this._selectedIndex-1:this._parent.applyController(this);},n.clearPages=function(){this._pageIds.length=0,this._pageNames.length=0,-1!=this._selectedIndex?this.selectedIndex=-1:this._parent.applyController(this);},n.hasPage=function(t){return-1!=this._pageNames.indexOf(t);},n.getPageIndexById=function(t){return this._pageIds.indexOf(t);},n.getPageIdByName=function(t){var e=this._pageNames.indexOf(t);return-1!=e?this._pageIds[e]:null;},n.getPageNameById=function(t){var e=this._pageIds.indexOf(t);return-1!=e?this._pageNames[e]:null;},n.getPageId=function(t){return void 0===t&&(t=0),this._pageIds[t];},n.runActions=function(){if(this._actions)for(var t=this._actions.length,e=0;e<t;e++){this._actions[e].run(this,this.previousPageId,this.selectedPageId);}},n.setup=function(t){this._name=t.getAttribute("name"),this._autoRadioGroupDepth="true"==t.getAttribute("autoRadioGroupDepth");var e=0,n=0,i=t.getAttribute("pages");if(i){var r=i.split(","),a=r.length;for(e=0;e<a;e+=2){this._pageIds.push(r[e]),this._pageNames.push(r[e+1]);}}
var o=t.childNodes,s=o.length;if(0<s){this._actions||(this._actions=[]);for(var l=0;l<s;l++){var u=o[l],h=C.createAction(u.getAttribute("type"));h.setup(u),this._actions.push(h);}}
if(i=t.getAttribute("transitions")){this._actions||(this._actions=[]),a=(r=i.split(",")).length;var c=0;for(e=0;e<a;e++){if(i=r[e]){var _=new pt();n=i.indexOf("="),_.transitionName=i.substr(n+1),n=(i=i.substring(0,n)).indexOf("-"),(c=parseInt(i.substring(n+1)))<this._pageIds.length&&(_.toPage=[this._pageIds[c]]),"*"!=(i=i.substring(0,n))&&(c=parseInt(i))<this._pageIds.length&&(_.fromPage=[this._pageIds[c]]),_.stopOnExit=!0,this._actions.push(_);}}}
this._parent&&0<this._pageIds.length?this._selectedIndex=0:this._selectedIndex=-1;},a(0,n,"oppositePageId",null,function(t){0<this._pageIds.indexOf(t)?this.selectedIndex=0:1<this._pageIds.length&&(this.selectedIndex=1);}),a(0,n,"name",function(){return this._name;},function(t){this._name=t;}),a(0,n,"pageCount",function(){return this._pageIds.length;}),a(0,n,"parent",function(){return this._parent;}),a(0,n,"selectedIndex",function(){return this._selectedIndex;},function(t){if(this._selectedIndex!=t){if(t>this._pageIds.length-1)throw "index out of bounds: "+t;this.changing=!0,this._previousIndex=this._selectedIndex,this._selectedIndex=t,this._parent.applyController(this),this.event("fui_state_changed"),this.changing=!1;}}),a(0,n,"selectedPage",function(){return-1==this._selectedIndex?null:this._pageNames[this._selectedIndex];},function(t){var e=this._pageNames.indexOf(t);-1==e&&(e=0),this.selectedIndex=e;}),a(0,n,"previsousIndex",function(){return this._previousIndex;}),a(0,n,"previousPage",function(){return-1==this._previousIndex?null:this._pageNames[this._previousIndex];}),a(0,n,"selectedPageId",function(){return-1==this._selectedIndex?null:this._pageIds[this._selectedIndex];},function(t){var e=this._pageIds.indexOf(t);this.selectedIndex=e;}),a(0,n,"previousPageId",function(){return-1==this._previousIndex?null:this._pageIds[this._previousIndex];}),e._nextPageId=0,e;}(),ft=function(t){function e(t,n,i){this._data=null,this.offsetX=0,this.offsetY=0,this.scaleX=NaN,this.scaleY=NaN,e.__super.call(this),void 0===n&&(n=0),void 0===i&&(i=0),this._data=t,this.offsetX=n,this.offsetY=i,this.scaleX=1,this.scaleY=1;}
return r(e,"fairygui.utils.PixelHitTest",p),e.prototype.isHit=function(t,e){if(t=Math.floor((t/this.scaleX-this.offsetX)*this._data.scale),e=Math.floor((e/this.scaleY-this.offsetY)*this._data.scale),t<0||e<0||t>=this._data.pixelWidth)return!1;var n=e*this._data.pixelWidth+t,i=Math.floor(n/8),r=n%8;return 0<=i&&i<this._data.pixels.length&&1==(this._data.pixels[i]>>r&1);},e;}(),dt=function(t){function e(){this.objectId=null,this.controllerName=null,this.targetPage=null,e.__super.call(this);}
r(e,"fairygui.action.ChangePageAction",t);var n=e.prototype;return n.enter=function(t){var e;if(this.controllerName&&(e=this.objectId?t.parent.getChildById(this.objectId):t.parent)){var n=e.getController(this.controllerName);n&&n!=t&&!n.changing&&(n.selectedPageId=this.targetPage);}},n.setup=function(e){t.prototype.setup.call(this,e),this.objectId=e.getAttribute("objectId"),this.controllerName=e.getAttribute("controller"),this.targetPage=e.getAttribute("targetPage");},e;}(C),pt=function(t){function e(){this.transitionName=null,this.repeat=1,this.delay=0,this.stopOnExit=!1,this._currentTransition=null,e.__super.call(this);}
r(e,"fairygui.action.PlayTransitionAction",t);var n=e.prototype;return n.enter=function(t){var e=t.parent.getTransition(this.transitionName);e&&(this._currentTransition&&this._currentTransition.playing?e.changeRepeat(this.repeat):e.play(null,this.repeat,this.delay),this._currentTransition=e);},n.leave=function(t){this.stopOnExit&&this._currentTransition&&(this._currentTransition.stop(),this._currentTransition=null);},n.setup=function(e){var n;t.prototype.setup.call(this,e),this.transitionName=e.getAttribute("transition"),(n=e.getAttribute("repeat"))&&(this.repeat=parseInt(n)),(n=e.getAttribute("delay"))&&(this.delay=parseFloat(n)),this.stopOnExit="true"==e.getAttribute("stopOnExit");},e;}(C),mt=function(t){function e(){this._gearColor=null,this._templateVars=null,this._text=null,e.__super.call(this),this._gearColor=new vt(this);}
r(e,"fairygui.GTextField",t);var i=e.prototype;return n.imps(i,{"fairygui.IColorGear":!0}),i.parseTemplate=function(t){for(var e,n,i=0,r=0,a=0,o="";-1!=(r=t.indexOf("{",i));){if(0<r&&92==t.charCodeAt(r-1))o+=t.substring(i,r-1),o+="{",i=r+1;else{if(o+=t.substring(i,r),i=r,-1==(r=t.indexOf("}",i)))break;r!=i+1?-1!=(a=(e=t.substring(i+1,r)).indexOf("="))?o+=null==(n=this._templateVars[e.substring(0,a)])?e.substring(a+1):n:null!=(n=this._templateVars[e])&&(o+=n):o+=t.substr(i,2),i=r+1;}}
return i<t.length&&(o+=t.substr(i)),o;},i.setVar=function(t,e){return this._templateVars||(this._templateVars={}),this._templateVars[t]=e,this;},i.flushVars=function(){this.text=this._text;},i.handleControllerChanged=function(e){t.prototype.handleControllerChanged.call(this,e),this._gearColor.controller==e&&this._gearColor.apply();},i.setup_beforeAdd=function(e){var n;t.prototype.setup_beforeAdd.call(this,e),(n=e.getAttribute("font"))&&(this.font=n),(n=e.getAttribute("fontSize"))&&(this.fontSize=parseInt(n)),(n=e.getAttribute("color"))&&(this.color=n),(n=e.getAttribute("align"))&&(this.align=n),(n=e.getAttribute("vAlign"))&&(this.valign=n),n=e.getAttribute("leading"),this.leading=n?parseInt(n):3,(n=e.getAttribute("letterSpacing"))&&(this.letterSpacing=parseInt(n)),this.ubbEnabled="true"==e.getAttribute("ubb"),this.italic="true"==e.getAttribute("italic"),this.bold="true"==e.getAttribute("bold"),this.underline="true"==e.getAttribute("underline"),this.singleLine="true"==e.getAttribute("singleLine"),(n=e.getAttribute("strokeColor"))&&(this.strokeColor=n,n=e.getAttribute("strokeSize"),this.stroke=n?parseInt(n)+1:2),"true"==e.getAttribute("vars")&&(this._templateVars={});},i.setup_afterAdd=function(e){t.prototype.setup_afterAdd.call(this,e);var n=e.getAttribute("text");null!=n&&0<n.length&&(this.text=n);},a(0,i,"color",function(){return null;},function(t){}),a(0,i,"font",function(){return null;},function(t){}),a(0,i,"templateVars",function(){return this._templateVars;},function(t){null==this._templateVars&&null==t||(this._templateVars=t,this.flushVars());}),a(0,i,"leading",function(){return 0;},function(t){}),a(0,i,"fontSize",function(){return 0;},function(t){}),a(0,i,"bold",function(){return!1;},function(t){}),a(0,i,"letterSpacing",function(){return 0;},function(t){}),a(0,i,"align",function(){return null;},function(t){}),a(0,i,"valign",function(){return null;},function(t){}),a(0,i,"italic",function(){return!1;},function(t){}),a(0,i,"underline",function(){return!1;},function(t){}),a(0,i,"singleLine",function(){return!1;},function(t){}),a(0,i,"stroke",function(){return 0;},function(t){}),a(0,i,"strokeColor",function(){return null;},function(t){}),a(0,i,"ubbEnabled",function(){return!1;},function(t){}),a(0,i,"textWidth",function(){return 0;}),a(0,i,"gearColor",function(){return this._gearColor;}),e;}(G),gt=function(t){function e(){this._sortingChildCount=0,this._opaque=!1,this._applyingController=null,this._margin=null,this._trackBounds=!1,this._boundsChanged=!1,this._childrenRenderOrder=0,this._apexIndex=0,this._buildingDisplayList=!1,this._children=null,this._controllers=null,this._transitions=null,this._container=null,this._scrollPane=null,this._alignOffset=null,e.__super.call(this),this._children=[],this._controllers=[],this._transitions=[],this._margin=new K(),this._alignOffset=new y();}
r(e,"fairygui.GComponent",t);var i=e.prototype;return i.createDisplayObject=function(){t.prototype.createDisplayObject.call(this),this._displayObject.mouseEnabled=!0,this._displayObject.mouseThrough=!0,this._container=this._displayObject;},i.dispose=function(){var e=0,n=0;for(n=this._transitions.length,e=0;e<n;++e){this._transitions[e].dispose();}
for(n=this._controllers.length,e=0;e<n;++e){this._controllers[e].dispose();}
for(null!=this.scrollPane&&this.scrollPane.dispose(),e=(n=this._children.length)-1;0<=e;--e){var i=this._children[e];i.parent=null,i.dispose();}
this._boundsChanged=!1,t.prototype.dispose.call(this);},i.addChild=function(t){return this.addChildAt(t,this._children.length),t;},i.addChildAt=function(t,e){if(void 0===e&&(e=0),!t)throw "child is null";var n=this._children.length;if(0<=e&&e<=n){if(t.parent==this)this.setChildIndex(t,e);else{t.removeFromParent();var i=(t.parent=this)._children.length;0!=t.sortingOrder?(this._sortingChildCount++,e=this.getInsertPosForSortingChild(t)):0<this._sortingChildCount&&e>i-this._sortingChildCount&&(e=i-this._sortingChildCount),e==i?this._children.push(t):this._children.splice(e,0,t),this.childStateChanged(t),this.setBoundsChangedFlag();}
return t;}
throw "Invalid child index";},i.getInsertPosForSortingChild=function(t){var e=this._children.length,n=0;for(n=0;n<e;n++){var i=this._children[n];if(i!=t&&t.sortingOrder<i.sortingOrder)break;}
return n;},i.removeChild=function(t,e){void 0===e&&(e=!1);var n=this._children.indexOf(t);return-1!=n&&this.removeChildAt(n,e),t;},i.removeChildAt=function(t,e){if(void 0===e&&(e=!1),0<=t&&t<this.numChildren){var i=this._children[t];return i.parent=null,0!=i.sortingOrder&&this._sortingChildCount--,this._children.splice(t,1),i.group=null,i.inContainer&&(this._container.removeChild(i.displayObject),2==this._childrenRenderOrder&&n.timer.callLater(this,this.buildNativeDisplayList)),e&&i.dispose(),this.setBoundsChangedFlag(),i;}
throw "Invalid child index";},i.removeChildren=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===n&&(n=!1),(e<0||e>=this.numChildren)&&(e=this.numChildren-1);for(var i=t;i<=e;++i){this.removeChildAt(t,n);}},i.getChildAt=function(t){if(void 0===t&&(t=0),0<=t&&t<this.numChildren)return this._children[t];throw "Invalid child index";},i.getChild=function(t){for(var e=this._children.length,n=0;n<e;++n){if(this._children[n].name==t)return this._children[n];}
return null;},i.getVisibleChild=function(t){for(var e=this._children.length,n=0;n<e;++n){var i=this._children[n];if(i.internalVisible&&i.internalVisible2&&i.name==t)return i;}
return null;},i.getChildInGroup=function(t,e){for(var n=this._children.length,i=0;i<n;++i){var r=this._children[i];if(r.group==e&&r.name==t)return r;}
return null;},i.getChildById=function(t){for(var e=this._children.length,n=0;n<e;++n){if(this._children[n]._id==t)return this._children[n];}
return null;},i.getChildIndex=function(t){return this._children.indexOf(t);},i.setChildIndex=function(t,e){void 0===e&&(e=0);var n=this._children.indexOf(t);if(-1==n)throw "Not a child of this container";if(0==t.sortingOrder){var i=this._children.length;0<this._sortingChildCount&&e>i-this._sortingChildCount-1&&(e=i-this._sortingChildCount-1),this._setChildIndex(t,n,e);}},i.setChildIndexBefore=function(t,e){var n=this._children.indexOf(t);if(-1==n)throw "Not a child of this container";if(0!=t.sortingOrder)return n;var i=this._children.length;return 0<this._sortingChildCount&&e>i-this._sortingChildCount-1&&(e=i-this._sortingChildCount-1),n<e?this._setChildIndex(t,n,e-1):this._setChildIndex(t,n,e);},i._setChildIndex=function(t,e,i){var r=this._children.length;if(r<i&&(i=r),e==i)return e;if(this._children.splice(e,1),this._children.splice(i,0,t),t.inContainer){var a=0,o=0;if(0==this._childrenRenderOrder){for(o=0;o<i;o++){this._children[o].inContainer&&a++;}
a==this._container.numChildren&&a--,this._container.setChildIndex(t.displayObject,a);}else if(1==this._childrenRenderOrder){for(o=r-1;i<o;o--){this._children[o].inContainer&&a++;}
a==this._container.numChildren&&a--,this._container.setChildIndex(t.displayObject,a);}else n.timer.callLater(this,this.buildNativeDisplayList);this.setBoundsChangedFlag();}
return i;},i.swapChildren=function(t,e){var n=this._children.indexOf(t),i=this._children.indexOf(e);if(-1==n||-1==i)throw "Not a child of this container";this.swapChildrenAt(n,i);},i.swapChildrenAt=function(t,e){void 0===e&&(e=0);var n=this._children[t],i=this._children[e];this.setChildIndex(n,e),this.setChildIndex(i,t);},i.isAncestorOf=function(t){if(null==t)return!1;for(var e=t.parent;e;){if(e==this)return!0;e=e.parent;}
return!1;},i.addController=function(t){this._controllers.push(t),(t._parent=this).applyController(t);},i.getControllerAt=function(t){return this._controllers[t];},i.getController=function(t){for(var e=this._controllers.length,n=0;n<e;++n){var i=this._controllers[n];if(i.name==t)return i;}
return null;},i.removeController=function(t){var e=this._controllers.indexOf(t);if(-1==e)throw new Error("controller not exists");t._parent=null,this._controllers.splice(e,1);for(var n=this._children.length,i=0;i<n;i++){this._children[i].handleControllerChanged(t);}},i.childStateChanged=function(t){if(!this._buildingDisplayList){var e=this._children.length;if(t instanceof fairygui.GGroup)for(var i=0;i<e;i++){var r=this._children[i];r.group==t&&this.childStateChanged(r);}else if(t.displayObject)if(t.internalVisible&&t.displayObject!=this._displayObject.mask){if(!t.displayObject.parent){var a=0;if(0==this._childrenRenderOrder){for(i=0;i<e&&(r=this._children[i])!=t;i++){null!=r.displayObject&&null!=r.displayObject.parent&&a++;}
this._container.addChildAt(t.displayObject,a);}else if(1==this._childrenRenderOrder){for(i=e-1;0<=i&&(r=this._children[i])!=t;i--){null!=r.displayObject&&null!=r.displayObject.parent&&a++;}
this._container.addChildAt(t.displayObject,a);}else this._container.addChild(t.displayObject),n.timer.callLater(this,this.buildNativeDisplayList);}}else t.displayObject.parent&&(this._container.removeChild(t.displayObject),2==this._childrenRenderOrder&&n.timer.callLater(this,this.buildNativeDisplayList));}},i.buildNativeDisplayList=function(){var t=this._children.length;if(0!=t){var e,n=0;switch(this._childrenRenderOrder){case 0:for(n=0;n<t;n++){null!=(e=this._children[n]).displayObject&&e.internalVisible&&this._container.addChild(e.displayObject);}
break;case 1:for(n=t-1;0<=n;n--){null!=(e=this._children[n]).displayObject&&e.internalVisible&&this._container.addChild(e.displayObject);}
break;case 2:for(n=0;n<this._apexIndex;n++){null!=(e=this._children[n]).displayObject&&e.internalVisible&&this._container.addChild(e.displayObject);}
for(n=t-1;n>=this._apexIndex;n--){null!=(e=this._children[n]).displayObject&&e.internalVisible&&this._container.addChild(e.displayObject);}}}},i.applyController=function(t){this._applyingController=t;for(var e=this._children.length,n=0;n<e;n++){this._children[n].handleControllerChanged(t);}
this._applyingController=null,t.runActions();},i.applyAllControllers=function(){for(var t=this._controllers.length,e=0;e<t;++e){this.applyController(this._controllers[e]);}},i.adjustRadioGroupDepth=function(t,e){var n,i=this._children.length,r=NaN,a=-1,o=-1;for(r=0;r<i;r++){(n=this._children[r])==t?a=r:n instanceof fairygui.GButton&&n.relatedController==e&&o<r&&(o=r);}
a<o&&(null!=this._applyingController&&this._children[o].handleControllerChanged(this._applyingController),this.swapChildrenAt(a,o));},i.getTransitionAt=function(t){return this._transitions[t];},i.getTransition=function(t){for(var e=this._transitions.length,n=0;n<e;++n){var i=this._transitions[n];if(i.name==t)return i;}
return null;},i.isChildInView=function(t){return null!=this._displayObject.scrollRect?0<=t.x+t.width&&t.x<=this.width&&0<=t.y+t.height&&t.y<=this.height:null==this._scrollPane||this._scrollPane.isChildInView(t);},i.getFirstChildInView=function(){for(var t=this._children.length,e=0;e<t;++e){var n=this._children[e];if(this.isChildInView(n))return e;}
return-1;},i.updateHitArea=function(){if(this._displayObject.hitArea instanceof fairygui.utils.PixelHitTest){var t=this._displayObject.hitArea;0!=this.sourceWidth&&(t.scaleX=this.width/this.sourceWidth),0!=this.sourceHeight&&(t.scaleY=this.height/this.sourceHeight);}else null==this._displayObject.hitArea&&(this._displayObject.hitArea=new v()),this._displayObject.hitArea.setTo(0,0,this.width,this.height);},i.updateMask=function(){var t=this._displayObject.scrollRect;null==t&&(t=new v()),t.x=this._margin.left,t.y=this._margin.top,t.width=this.width-this._margin.right,t.height=this.height-this._margin.bottom,this._displayObject.scrollRect=t;},i.setupScroll=function(t,e,n,i,r,a,o,s){this._displayObject==this._container&&(this._container=new T(),this._displayObject.addChild(this._container)),this._scrollPane=new et(this,e,t,n,i,r,a,o,s);},i.setupOverflow=function(t){1==t?(this._displayObject==this._container&&(this._container=new T(),this._displayObject.addChild(this._container)),this.updateMask(),this._container.pos(this._margin.left,this._margin.top)):0==this._margin.left&&0==this._margin.top||(this._displayObject==this._container&&(this._container=new T(),this._displayObject.addChild(this._container)),this._container.pos(this._margin.left,this._margin.top));},i.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),this._scrollPane?this._scrollPane.onOwnerSizeChanged():null!=this._displayObject.scrollRect&&this.updateMask(),null!=this._displayObject.hitArea&&this.updateHitArea();},i.handleGrayedChanged=function(){var t=this.getController("grayed");if(null==t)for(var e=this.grayed,n=this._children.length,i=0;i<n;++i){this._children[i].grayed=e;}else t.selectedIndex=this.grayed?1:0;},i.handleControllerChanged=function(e){t.prototype.handleControllerChanged.call(this,e),null!=this._scrollPane&&this._scrollPane.handleControllerChanged(e);},i.setBoundsChangedFlag=function(){(this._scrollPane||this._trackBounds)&&(this._boundsChanged||(this._boundsChanged=!0,n.timer.callLater(this,this.__render)));},i.__render=function(){if(this._boundsChanged){var t=0,e=this._children.length;for(t=0;t<e;t++){this._children[t].ensureSizeCorrect();}
this.updateBounds();}},i.ensureBoundsCorrect=function(){var t=0,e=this._children.length;for(t=0;t<e;t++){this._children[t].ensureSizeCorrect();}
this._boundsChanged&&this.updateBounds();},i.updateBounds=function(){var t=0,e=0,n=0,i=0,r=this._children.length;if(0<r){t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY;var a=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=0,l=0;for(l=0;l<r;l++){var u=this._children[l];(s=u.x)<t&&(t=s),(s=u.y)<e&&(e=s),a<(s=u.x+u.actualWidth)&&(a=s),o<(s=u.y+u.actualHeight)&&(o=s);}
n=a-t,i=o-e;}
this.setBounds(t,e,n,i);},i.setBounds=function(t,e,n,i){this._boundsChanged=!1,this._scrollPane&&this._scrollPane.setContentSize(Math.round(t+n),Math.round(e+i));},i.getSnappingPosition=function(t,e,n){n||(n=new y());var i=this._children.length;if(0==i)return n.x=0,n.y=0,n;this.ensureBoundsCorrect();var r=null,a=null,o=0;if(0!=e){for(;o<i;o++){if(e<(r=this._children[o]).y){if(0==o){e=0;break;}
e=e<(a=this._children[o-1]).y+a.actualHeight/2?a.y:r.y;break;}}
o==i&&(e=r.y);}
if(0!=t){for(0<o&&o--;o<i;o++){if(t<(r=this._children[o]).x){if(0==o){t=0;break;}
t=t<(a=this._children[o-1]).x+a.actualWidth/2?a.x:r.x;break;}}
o==i&&(t=r.x);}
return n.x=t,n.y=e,n;},i.childSortingOrderChanged=function(t,e,n){if(void 0===n&&(n=0),0==n)this._sortingChildCount--,this.setChildIndex(t,this._children.length);else{0==e&&this._sortingChildCount++;var i=this._children.indexOf(t),r=this.getInsertPosForSortingChild(t);i<r?this._setChildIndex(t,i,r-1):this._setChildIndex(t,i,r);}},i.constructFromResource=function(){this.constructFromResource2(null,0);},i.constructFromResource2=function(t,e){var n,i,r=this.packageItem.owner.getItemAsset(this.packageItem);if(this._underConstruct=!0,i=(n=r.getAttribute("size")).split(","),this.sourceWidth=parseInt(i[0]),this.sourceHeight=parseInt(i[1]),this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this.setSize(this.sourceWidth,this.sourceHeight),(n=r.getAttribute("restrictSize"))&&(i=n.split(","),this.minWidth=parseInt(i[0]),this.maxWidth=parseInt(i[1]),this.minHeight=parseInt(i[2]),this.maxHeight=parseInt(i[3])),(n=r.getAttribute("pivot"))&&(i=n.split(","),n=r.getAttribute("anchor"),this.internalSetPivot(parseFloat(i[0]),parseFloat(i[1]),"true"==n)),n=r.getAttribute("opaque"),this.opaque="false"!=n,n=r.getAttribute("hitTest")){i=n.split(",");var a=this.packageItem.owner.getPixelHitTestData(i[0]);null!=a&&(this._displayObject.hitArea=new ft(a,parseInt(i[1]),parseInt(i[2])),this._displayObject.mouseThrough=!1,this._displayObject.hitTestPrior=!0);}
var o=0;if(o=(n=r.getAttribute("overflow"))?X.parse(n):0,(n=r.getAttribute("margin"))&&this._margin.parse(n),2==o){var s=0;s=(n=r.getAttribute("scroll"))?nt.parse(n):1;var l=0;l=(n=r.getAttribute("scrollBar"))?tt.parse(n):0;var u=NaN;u=(n=r.getAttribute("scrollBarFlags"))?parseInt(n):0;var h,c,_,f,d=new K();(n=r.getAttribute("scrollBarMargin"))&&d.parse(n),(n=r.getAttribute("scrollBarRes"))&&(h=(i=n.split(","))[0],c=i[1]),(n=r.getAttribute("ptrRes"))&&(_=(i=n.split(","))[0],f=i[1]),this.setupScroll(d,s,l,u,h,c,_,f);}else this.setupOverflow(o);this._buildingDisplayList=!0;var p=r.childNodes,m=0;p&&(m=p.length);var g,y,v=0;for(v=0;v<m;v++){var I=p[v];"controller"==I.nodeName&&(g=new _t(),this._controllers.push(g),g._parent=this,g.setup(I));}
var x,T=this.packageItem.displayList,S=T.length;for(v=0;v<S;v++){var b=T[v];null!=t?y=t[e+v]:b.packageItem?((y=ot.newObject(b.packageItem)).packageItem=b.packageItem,y.constructFromResource()):y=ot.newObject2(b.type),y._underConstruct=!0,y.setup_beforeAdd(b.desc),(y.parent=this)._children.push(y);}
for(this.relations.setup(r),v=0;v<S;v++){this._children[v].relations.setup(T[v].desc);}
for(v=0;v<S;v++){(y=this._children[v]).setup_afterAdd(T[v].desc),y._underConstruct=!1;}
for((n=r.getAttribute("mask"))&&(this.mask=this.getChildById(n).displayObject),v=0;v<m;v++){"transition"==(I=p[v]).nodeName&&(x=new it(this),this._transitions.push(x),x.setup(I));}
0<this._transitions.length&&(this.displayObject.on("display",this,this.___added),this.displayObject.on("undisplay",this,this.___removed)),this.applyAllControllers(),this._buildingDisplayList=!1,this._underConstruct=!1,this.buildNativeDisplayList(),this.setBoundsChangedFlag(),this.constructFromXML(r);},i.constructFromXML=function(t){},i.setup_afterAdd=function(e){var n;if(t.prototype.setup_afterAdd.call(this,e),this.scrollPane&&(n=e.getAttribute("pageController"))&&(this.scrollPane.pageController=this.parent.getController(n)),n=e.getAttribute("controller"))for(var i=n.split(","),r=0;r<i.length;r+=2){var a=this.getController(i[r]);a&&(a.selectedPageId=i[r+1]);}},i.___added=function(){for(var t=this._transitions.length,e=0;e<t;++e){var n=this._transitions[e];n.autoPlay&&n.play(null,n.autoPlayRepeat,n.autoPlayDelay);}},i.___removed=function(){for(var t=this._transitions.length,e=0;e<t;++e){this._transitions[e].OnOwnerRemovedFromStage();}},a(0,i,"numChildren",function(){return this._children.length;}),a(0,i,"displayListContainer",function(){return this._container;}),a(0,i,"childrenRenderOrder",function(){return this._childrenRenderOrder;},function(t){this._childrenRenderOrder!=t&&(this._childrenRenderOrder=t,this.buildNativeDisplayList());}),a(0,i,"opaque",function(){return null!=this._displayObject.hitArea;},function(t){this._displayObject.mouseThrough=t?(this.updateHitArea(),!1):!(this._displayObject.hitArea=null);}),a(0,i,"controllers",function(){return this._controllers;}),a(0,i,"scrollPane",function(){return this._scrollPane;}),a(0,i,"margin",function(){return this._margin;},function(t){this._margin.copy(t),null!=this._displayObject.scrollRect&&this._container.pos(this._margin.left+this._alignOffset.x,this._margin.top+this._alignOffset.y),this.handleSizeChanged();}),a(0,i,"apexIndex",function(){return this._apexIndex;},function(t){this._apexIndex!=t&&(this._apexIndex=t,2==this._childrenRenderOrder&&this.buildNativeDisplayList());}),a(0,i,"mask",function(){return this._displayObject.mask;},function(t){this._displayObject.mask=t;}),a(0,i,"viewWidth",function(){return null!=this._scrollPane?this._scrollPane.viewWidth:this.width-this._margin.left-this._margin.right;},function(t){null!=this._scrollPane?this._scrollPane.viewWidth=t:this.width=t+this._margin.left+this._margin.right;}),a(0,i,"viewHeight",function(){return null!=this._scrollPane?this._scrollPane.viewHeight:this.height-this._margin.top-this._margin.bottom;},function(t){null!=this._scrollPane?this._scrollPane.viewHeight=t:this.height=t+this._margin.top+this._margin.bottom;}),e;}(G),yt=function(t){function e(t){this._storage=null,this._default=null,e.__super.call(this,t);}
var n;r(e,"fairygui.GearAnimation",B);var i=e.prototype;return i.init=function(){this._default=new n(this._owner.playing,this._owner.frame),this._storage={};},i.addStatus=function(t,e){if("-"!=e&&0!=e.length){var i;null==t?i=this._default:(i=new n(),this._storage[t]=i);var r=e.split(",");i.frame=parseInt(r[0]),i.playing="p"==r[1];}},i.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];t||(t=this._default),this._owner.frame=t.frame,this._owner.playing=t.playing,this._owner._gearLocked=!1;},i.updateState=function(){var t=this._owner,e=this._storage[this._controller.selectedPageId];e||(e=new n(),this._storage[this._controller.selectedPageId]=e),e.frame=t.frame,e.playing=t.playing;},e.__init$=function(){n=function(){function t(t,e){this.playing=!1,this.frame=NaN,void 0===t&&(t=!0),void 0===e&&(e=0),this.playing=t,this.frame=e;}
return r(t,""),t;}();},e;}(),vt=function(t){function e(t){this._storage=null,this._default=null,e.__super.call(this,t);}
var n;r(e,"fairygui.GearColor",B);var i=e.prototype;return i.init=function(){null!=this._owner.strokeColor?this._default=new n(this._owner.color,this._owner.strokeColor):this._default=new n(this._owner.color,null),this._storage={};},i.addStatus=function(t,e){if("-"!=e&&0!=e.length){var i,r,a=e.indexOf(",");r=-1==a?(i=e,null):(i=e.substr(0,a),e.substr(a+1)),null==t?(this._default.color=i,this._default.strokeColor=r):this._storage[t]=new n(i,r);}},i.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];t||(t=this._default),this._owner.color=t.color,null!=this._owner.strokeColor&&null!=t.strokeColor&&(this._owner.strokeColor=t.strokeColor),this._owner._gearLocked=!1;},i.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new n(null,null),this._storage[this._controller.selectedPageId]=t),t.color=this._owner.color,null!=this._owner.strokeColor&&(t.strokeColor=this._owner.strokeColor);},e.__init$=function(){n=function(){function t(t,e){this.color=null,this.strokeColor=null,this.color=t,this.strokeColor=e;}
return r(t,""),t;}();},e;}(),It=function(t){function e(t){this.pages=null,this._visible=0,e.__super.call(this,t),this._displayLockToken=1;}
r(e,"fairygui.GearDisplay",B);var n=e.prototype;return n.init=function(){this.pages=null;},n.addLock=function(){return this._visible++,this._displayLockToken;},n.releaseLock=function(t){t==this._displayLockToken&&this._visible--;},n.apply=function(){this._displayLockToken++,this._displayLockToken<=0&&(this._displayLockToken=1),null==this.pages||0==this.pages.length||-1!=this.pages.indexOf(this._controller.selectedPageId)?this._visible=1:this._visible=0;},a(0,n,"connected",function(){return null==this._controller||0<this._visible;}),e;}(),xt=function(t){function e(t){this._storage=null,this._default=null,e.__super.call(this,t);}
r(e,"fairygui.GearIcon",B);var n=e.prototype;return n.init=function(){this._default=this._owner.icon,this._storage={};},n.addStatus=function(t,e){null==t?this._default=e:this._storage[t]=e;},n.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];this._owner.icon=null!=t?String(t):this._default,this._owner._gearLocked=!1;},n.updateState=function(){this._storage[this._controller.selectedPageId]=this._owner.icon;},e;}(),Tt=function(t){function e(t){this.tweener=null,this._storage=null,this._default=null,this._tweenValue=null,this._tweenTarget=null,e.__super.call(this,t);}
var n;r(e,"fairygui.GearLook",B);var i=e.prototype;return i.init=function(){this._default=new n(this._owner.alpha,this._owner.rotation,this._owner.grayed,this._owner.touchable),this._storage={};},i.addStatus=function(t,e){if("-"!=e&&0!=e.length){var i,r=e.split(",");null==t?i=this._default:(i=new n(),this._storage[t]=i),i.alpha=parseFloat(r[0]),i.rotation=parseInt(r[1]),i.grayed="1"==r[2],r.length<4?i.touchable=this._owner.touchable:i.touchable="1"==r[3];}},i.apply=function(){var t=this._storage[this._controller.selectedPageId];if(t||(t=this._default),!this._tween||st._constructing||B.disableAllTweenEffect)this._owner._gearLocked=!0,this._owner.grayed=t.grayed,this._owner.alpha=t.alpha,this._owner.rotation=t.rotation,this._owner.touchable=t.touchable,this._owner._gearLocked=!1;else{if(this._owner._gearLocked=!0,this._owner.grayed=t.grayed,this._owner.touchable=t.touchable,this._owner._gearLocked=!1,null!=this.tweener){if(this._tweenTarget.alpha==t.alpha&&this._tweenTarget.rotation==t.rotation)return;this.tweener.complete(),this.tweener=null;}
var e=t.alpha!=this._owner.alpha,n=t.rotation!=this._owner.rotation;(e||n)&&(this._owner.checkGearController(0,this._controller)&&(this._displayLockToken=this._owner.addDisplayLock()),this._tweenTarget=t,null==this._tweenValue&&(this._tweenValue=new y()),this._tweenValue.x=this._owner.alpha,this._tweenValue.y=this._owner.rotation,this.tweener=w.to(this._tweenValue,{x:t.alpha,y:t.rotation},1e3*this._tweenTime,this._easeType,d.create(this,this.__tweenComplete),1e3*this._delay),this.tweener.update=d.create(this,this.__tweenUpdate,[e,n],!1));}},i.__tweenUpdate=function(t,e){this._owner._gearLocked=!0,t&&(this._owner.alpha=this._tweenValue.x),e&&(this._owner.rotation=this._tweenValue.y),this._owner._gearLocked=!1;},i.__tweenComplete=function(){0!=this._displayLockToken&&(this._owner.releaseDisplayLock(this._displayLockToken),this._displayLockToken=0),this.tweener=null,this._owner.displayObject.event("fui_gear_stop");},i.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new n(),this._storage[this._controller.selectedPageId]=t),t.alpha=this._owner.alpha,t.rotation=this._owner.rotation,t.grayed=this._owner.grayed,t.touchable=this._owner.touchable;},e.__init$=function(){n=function(){function t(t,e,n,i){this.alpha=NaN,this.rotation=NaN,this.grayed=!1,this.touchable=!1,void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=!1),void 0===i&&(i=!0),this.alpha=t,this.rotation=e,this.grayed=n,this.touchable=i;}
return r(t,""),t;}();},e;}(),St=function(t){function e(){this._type=NaN,this._lineSize=NaN,this._lineColor=null,this._fillColor=null,this._corner=0,e.__super.call(this),this._type=0,this._lineSize=1,this._lineColor="#000000",this._fillColor="#FFFFFF",this._corner=0;}
r(e,"fairygui.GGraph",t);var i=e.prototype;return n.imps(i,{"fairygui.IColorGear":!0}),i.drawRect=function(t,e,n){this._type=1,this._lineSize=t,this._lineColor=e,this._fillColor=n,this.drawCommon();},i.drawEllipse=function(t,e,n){this._type=2,this._lineSize=t,this._lineColor=e,this._fillColor=n,this.drawCommon();},i.drawCommon=function(){this._displayObject.mouseEnabled=this.touchable;var t=this._displayObject.graphics;t.clear();var e=this.width,n=this.height;if(0!=e&&0!=n){var i=this._fillColor,r=this._lineColor;if(I.isWebGL&&ut.startsWith(i,"rgba")){var a=i.substring(5,i.lastIndexOf(")")).split(","),o=parseFloat(a[3]);0==o?i=null:(i=D.toHexColor((parseInt(a[0])<<16)+(parseInt(a[1])<<8)+parseInt(a[2])),this.alpha=o);}
if(1==this._type){if(0<this._corner){var s=e<n?e:n;2*this._corner>s&&(s=parseInt(s/2+""));var l=[["moveTo",s,0],["arcTo",e,0,e,n,s],["arcTo",e,n,0,n,s],["arcTo",0,n,0,0,s],["arcTo",0,0,e,0,s],["closePath"]];t.drawPath(0,0,l,{fillStyle:i},0<this._lineSize?{strokeStyle:r,lineWidth:this._lineSize}:null);}else t.drawRect(0,0,e,n,i,0<this._lineSize?r:null,this._lineSize);}else t.drawCircle(e/2,n/2,e/2,i,0<this._lineSize?r:null,this._lineSize);this._displayObject.repaint();}},i.replaceMe=function(t){if(!this._parent)throw "parent not set";t.name=this.name,t.alpha=this.alpha,t.rotation=this.rotation,t.visible=this.visible,t.touchable=this.touchable,t.grayed=this.grayed,t.setXY(this.x,this.y),t.setSize(this.width,this.height);var e=this._parent.getChildIndex(this);this._parent.addChildAt(t,e),t.relations.copyFrom(this.relations),this._parent.removeChild(this,!0);},i.addBeforeMe=function(t){if(null==this._parent)throw "parent not set";var e=this._parent.getChildIndex(this);this._parent.addChildAt(t,e);},i.addAfterMe=function(t){if(null==this._parent)throw "parent not set";var e=this._parent.getChildIndex(this);e++,this._parent.addChildAt(t,e);},i.setNativeObject=function(t){this._type=0,this._displayObject.mouseEnabled=this.touchable,this._displayObject.graphics.clear(),this._displayObject.addChild(t);},i.createDisplayObject=function(){t.prototype.createDisplayObject.call(this),this._displayObject.mouseEnabled=!1;},i.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),0!=this._type&&this.drawCommon();},i.setup_beforeAdd=function(e){t.prototype.setup_beforeAdd.call(this,e);var n=e.getAttribute("type");if(n&&"empty"!=n){var i;if((i=e.getAttribute("lineSize"))&&(this._lineSize=parseInt(i)),i=e.getAttribute("lineColor")){var r=ut.convertFromHtmlColor(i,!0),a=(r>>24&255)/255;this._lineColor=1!=a?"rgba("+(r>>16&255)+","+(r>>8&255)+","+(255&r)+","+a+")":D.toHexColor(16777215&r);}
(i=e.getAttribute("fillColor"))&&(a=((r=ut.convertFromHtmlColor(i,!0))>>24&255)/255,this._fillColor=1!=a?"rgba("+(r>>16&255)+","+(r>>8&255)+","+(255&r)+","+a+")":D.toHexColor(16777215&r)),(i=e.getAttribute("corner"))&&(this._corner=parseInt(i)),this._type="rect"==n?1:2,this.drawCommon();}},a(0,i,"color",function(){return this._fillColor;},function(t){this._fillColor=t,0!=this._type&&this.drawCommon();}),e;}(G),bt=function(t){function e(){this._layout=0,this._lineGap=0,this._columnGap=0,this._percentReady=!1,this._boundsChanged=!1,this._updating=0,e.__super.call(this);}
r(e,"fairygui.GGroup",t);var i=e.prototype;return i.setBoundsChangedFlag=function(t){void 0===t&&(t=!1),0==this._updating&&null!=this.parent&&(t&&(this._percentReady=!1),this._boundsChanged||(this._boundsChanged=!0,0!=this._layout&&n.timer.callLater(this,this.ensureBoundsCorrect)));},i.ensureBoundsCorrect=function(){this._boundsChanged&&this.updateBounds();},i.updateBounds=function(){if(n.timer.clear(this,this.ensureBoundsCorrect),this._boundsChanged=!1,null!=this.parent){this.handleLayout();var t,e=this._parent.numChildren,i=0,r=Number.MAX_VALUE,a=Number.MAX_VALUE,o=Number.MIN_VALUE,s=Number.MIN_VALUE,l=0,u=!0;for(i=0;i<e;i++){(t=this._parent.getChildAt(i)).group==this&&((l=t.x)<r&&(r=l),(l=t.y)<a&&(a=l),o<(l=t.x+t.width)&&(o=l),s<(l=t.y+t.height)&&(s=l),u=!1);}
u?(this._updating=2,this.setSize(0,0)):(this._updating=1,this.setXY(r,a),this._updating=2,this.setSize(o-r,s-a)),this._updating=0;}},i.handleLayout=function(){var t;this._updating|=1;var e=0,n=0;if(1==this._layout){var i=NaN;for(n=this.parent.numChildren,e=0;e<n;e++){(t=this.parent.getChildAt(e)).group==this&&(isNaN(i)?i=Math.floor(t.x):t.x=i,0!=t.width&&(i+=Math.floor(t.width+this._columnGap)));}
this._percentReady||this.updatePercent();}else if(2==this._layout){var r=NaN;for(n=this.parent.numChildren,e=0;e<n;e++){(t=this.parent.getChildAt(e)).group==this&&(isNaN(r)?r=Math.floor(t.y):t.y=r,0!=t.height&&(r+=Math.floor(t.height+this._lineGap)));}
this._percentReady||this.updatePercent();}
this._updating&=2;},i.updatePercent=function(){this._percentReady=!0;var t,e=this.parent.numChildren,n=0,i=0;if(1==this._layout){for(n=0;n<e;n++){(t=this.parent.getChildAt(n)).group==this&&(i+=t.width);}
for(n=0;n<e;n++){(t=this.parent.getChildAt(n)).group==this&&(t._sizePercentInGroup=0<i?t.width/i:0);}}else{for(n=0;n<e;n++){(t=this.parent.getChildAt(n)).group==this&&(i+=t.height);}
for(n=0;n<e;n++){(t=this.parent.getChildAt(n)).group==this&&(t._sizePercentInGroup=0<i?t.height/i:0);}}},i.moveChildren=function(t,e){if(0==(1&this._updating)&&null!=this.parent){this._updating|=1;var n,i=this.parent.numChildren,r=0;for(r=0;r<i;r++){(n=this.parent.getChildAt(r)).group==this&&n.setXY(n.x+t,n.y+e);}
this._updating&=2;}},i.resizeChildren=function(t,e){if(0!=this._layout&&0==(2&this._updating)&&null!=this.parent){this._updating|=2,this._percentReady||this.updatePercent();var n,i=this.parent.numChildren,r=0,a=0,o=-1,s=0,l=0,u=0,h=!1;for(r=0;r<i;r++){(n=this.parent.getChildAt(r)).group==this&&(o=r,s++);}
if(1==this._layout){u=l=this.width-(s-1)*this._columnGap;var c=NaN,_=NaN;for(r=0;r<i;r++){if((n=this.parent.getChildAt(r)).group==this)if(isNaN(c)?c=Math.floor(n.x):n.x=c,_=o==r?u:Math.round(n._sizePercentInGroup*l),n.setSize(_,n._rawHeight+e,!0),u-=n.width,o==r){if(1<=u)for(a=0;a<=r;a++){(n=this.parent.getChildAt(a)).group==this&&(h?n.x+=u:(_=n.width+u,(0==n.maxWidth||_<n.maxWidth)&&(0==n.minWidth||_>n.minWidth)&&(n.setSize(_,n.height,!0),h=!0)));}}else c+=n.width+this._columnGap;}}else if(2==this._layout){u=l=this.height-(s-1)*this._lineGap;var f=NaN,d=NaN;for(r=0;r<i;r++){if((n=this.parent.getChildAt(r)).group==this)if(isNaN(f)?f=Math.floor(n.y):n.y=f,d=o==r?u:Math.round(n._sizePercentInGroup*l),n.setSize(n._rawWidth+t,d,!0),u-=n.height,o==r){if(1<=u)for(a=0;a<=r;a++){(n=this.parent.getChildAt(a)).group==this&&(h?n.y+=u:(d=n.height+u,(0==n.maxHeight||d<n.maxHeight)&&(0==n.minHeight||d>n.minHeight)&&(n.setSize(n.width,d,!0),h=!0)));}}else f+=n.height+this._lineGap;}}
this._updating&=1;}},i.handleAlphaChanged=function(){if(!this._underConstruct)for(var t=this._parent.numChildren,e=0;e<t;e++){var n=this._parent.getChildAt(e);n.group==this&&(n.alpha=this.alpha);}},i.handleVisibleChanged=function(){if(this._parent)for(var t=this._parent.numChildren,e=0;e<t;e++){var n=this._parent.getChildAt(e);n.group==this&&n.handleVisibleChanged();}},i.setup_beforeAdd=function(e){var n;t.prototype.setup_beforeAdd.call(this,e),null!=(n=e.getAttribute("layout"))&&(this._layout=H.parse(n),(n=e.getAttribute("lineGap"))&&(this._lineGap=parseInt(n)),(n=e.getAttribute("colGap"))&&(this._columnGap=parseInt(n)));},i.setup_afterAdd=function(e){t.prototype.setup_afterAdd.call(this,e),this.visible||this.handleVisibleChanged();},a(0,i,"layout",function(){return this._layout;},function(t){this._layout!=t&&(this._layout=t,this.setBoundsChangedFlag(!0));}),a(0,i,"columnGap",function(){return this._columnGap;},function(t){this._columnGap!=t&&(this._columnGap=t,this.setBoundsChangedFlag());}),a(0,i,"lineGap",function(){return this._lineGap;},function(t){this._lineGap!=t&&(this._lineGap=t,this.setBoundsChangedFlag());}),e;}(G),wt=function(t){function e(t){this.tweener=null,this._storage=null,this._default=null,this._tweenValue=null,this._tweenTarget=null,e.__super.call(this,t);}
var n;r(e,"fairygui.GearSize",B);var i=e.prototype;return i.init=function(){this._default=new n(this._owner.width,this._owner.height,this._owner.scaleX,this._owner.scaleY),this._storage={};},i.addStatus=function(t,e){if("-"!=e&&0!=e.length){var i,r=e.split(",");null==t?i=this._default:(i=new n(),this._storage[t]=i),i.width=parseInt(r[0]),i.height=parseInt(r[1]),2<r.length&&(i.scaleX=parseFloat(r[2]),i.scaleY=parseFloat(r[3]));}},i.apply=function(){var t=this._storage[this._controller.selectedPageId];if(t||(t=this._default),!this._tween||st._constructing||B.disableAllTweenEffect)this._owner._gearLocked=!0,this._owner.setSize(t.width,t.height,this._owner.checkGearController(1,this._controller)),this._owner.setScale(t.scaleX,t.scaleY),this._owner._gearLocked=!1;else{if(null!=this.tweener){if(this._tweenTarget.width==t.width&&this._tweenTarget.height==t.height&&this._tweenTarget.scaleX==t.scaleX&&this._tweenTarget.scaleY==t.scaleY)return;this.tweener.complete(),this.tweener=null;}
var e=t.width!=this._owner.width||t.height!=this._owner.height,i=t.scaleX!=this._owner.scaleX||t.scaleY!=this._owner.scaleY;(e||i)&&(this._owner.checkGearController(0,this._controller)&&(this._displayLockToken=this._owner.addDisplayLock()),this._tweenTarget=t,null==this._tweenValue&&(this._tweenValue=new n()),this._tweenValue.width=this._owner.width,this._tweenValue.height=this._owner.height,this._tweenValue.scaleX=this._owner.scaleX,this._tweenValue.scaleY=this._owner.scaleY,this.tweener=w.to(this._tweenValue,{width:t.width,height:t.height,scaleX:t.scaleX,scaleY:t.scaleY},1e3*this._tweenTime,this._easeType,d.create(this,this.__tweenComplete),1e3*this._delay),this.tweener.update=d.create(this,this.__tweenUpdate,[e,i],!1));}},i.__tweenUpdate=function(t,e){this._owner._gearLocked=!0,t&&this._owner.setSize(this._tweenValue.width,this._tweenValue.height,this._owner.checkGearController(1,this._controller)),e&&this._owner.setScale(this._tweenValue.scaleX,this._tweenValue.scaleY),this._owner._gearLocked=!1;},i.__tweenComplete=function(){0!=this._displayLockToken&&(this._owner.releaseDisplayLock(this._displayLockToken),this._displayLockToken=0),this.tweener=null,this._owner.displayObject.event("fui_gear_stop");},i.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new n(),this._storage[this._controller.selectedPageId]=t),t.width=this._owner.width,t.height=this._owner.height,t.scaleX=this._owner.scaleX,t.scaleY=this._owner.scaleY;},i.updateFromRelations=function(t,e){if(null!=this._controller&&null!=this._storage){for(var n in this._storage){var i=this._storage[n];i.width+=t,i.height+=e;}
this._default.width+=t,this._default.height+=e,this.updateState();}},e.__init$=function(){n=function(){function t(t,e,n,i){this.width=NaN,this.height=NaN,this.scaleX=NaN,this.scaleY=NaN,void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.width=t,this.height=e,this.scaleX=n,this.scaleY=i;}
return r(t,""),t;}();},e;}(),Dt=function(t){function e(){this.image=null,this._color=null,this._flip=0,e.__super.call(this),this._color="#FFFFFF";}
r(e,"fairygui.GImage",t);var i=e.prototype;return n.imps(i,{"fairygui.IColorGear":!0}),i.applyColor=function(){},i.createDisplayObject=function(){this._displayObject=this.image=new Ht(),this.image.mouseEnabled=!1,this._displayObject.$owner=this;},i.constructFromResource=function(){this.packageItem.load(),this.sourceWidth=this.packageItem.width,this.sourceHeight=this.packageItem.height,this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this.image.scale9Grid=this.packageItem.scale9Grid,this.image.scaleByTile=this.packageItem.scaleByTile,this.image.tileGridIndice=this.packageItem.tileGridIndice,this.image.tex=this.packageItem.texture,this.setSize(this.sourceWidth,this.sourceHeight);},i.handleXYChanged=function(){t.prototype.handleXYChanged.call(this),0!=this._flip&&(-1==this.scaleX&&(this.image.x+=this.width),-1==this.scaleY&&(this.image.y+=this.height));},i.handleSizeChanged=function(){null!=this.image.tex&&this.image.scaleTexture(this.width/this.sourceWidth,this.height/this.sourceHeight);},i.setup_beforeAdd=function(e){var n;t.prototype.setup_beforeAdd.call(this,e),(n=e.getAttribute("color"))&&(this.color=n),(n=e.getAttribute("flip"))&&(this.flip=U.parse(n));},a(0,i,"color",function(){return this._color;},function(t){this._color!=t&&(this._color=t,this.updateGear(4),this.applyColor());}),a(0,i,"flip",function(){return this._flip;},function(t){if(this._flip!=t){this._flip=t;var e=1,n=1;1!=this._flip&&3!=this._flip||(e=-1),2!=this._flip&&3!=this._flip||(n=-1),this.setScale(e,n),this.handleXYChanged();}}),e;}(G),Ct=function(t){function e(t){this._storage=null,this._default=null,e.__super.call(this,t);}
r(e,"fairygui.GearText",B);var n=e.prototype;return n.init=function(){this._default=this._owner.text,this._storage={};},n.addStatus=function(t,e){null==t?this._default=e:this._storage[t]=e;},n.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];this._owner.text=null!=t?String(t):this._default,this._owner._gearLocked=!1;},n.updateState=function(){this._storage[this._controller.selectedPageId]=this._owner.text;},e;}(),Et=function(t){function e(t){this.tweener=null,this._storage=null,this._default=null,this._tweenValue=null,this._tweenTarget=null,e.__super.call(this,t);}
r(e,"fairygui.GearXY",B);var n=e.prototype;return n.init=function(){this._default=new y(this._owner.x,this._owner.y),this._storage={};},n.addStatus=function(t,e){if("-"!=e&&0!=e.length){var n,i=e.split(",");null==t?n=this._default:(n=new y(),this._storage[t]=n),n.x=parseInt(i[0]),n.y=parseInt(i[1]);}},n.apply=function(){var t=this._storage[this._controller.selectedPageId];if(t||(t=this._default),!this._tween||st._constructing||B.disableAllTweenEffect)this._owner._gearLocked=!0,this._owner.setXY(t.x,t.y),this._owner._gearLocked=!1;else{if(this.tweener){if(this._tweenTarget.x==t.x&&this._tweenTarget.y==t.y)return;this.tweener.complete(),this.tweener=null;}
this._owner.x==t.x&&this._owner.y==t.y||(this._owner.checkGearController(0,this._controller)&&(this._displayLockToken=this._owner.addDisplayLock()),this._tweenTarget=t,null==this._tweenValue&&(this._tweenValue=new y()),this._tweenValue.x=this._owner.x,this._tweenValue.y=this._owner.y,this.tweener=w.to(this._tweenValue,{x:t.x,y:t.y},1e3*this._tweenTime,this._easeType,d.create(this,this.__tweenComplete),1e3*this._delay),this.tweener.update=d.create(this,this.__tweenUpdate,null,!1));}},n.__tweenUpdate=function(){this._owner._gearLocked=!0,this._owner.setXY(this._tweenValue.x,this._tweenValue.y),this._owner._gearLocked=!1;},n.__tweenComplete=function(){0!=this._displayLockToken&&(this._owner.releaseDisplayLock(this._displayLockToken),this._displayLockToken=0),this.tweener=null,this._owner.displayObject.event("fui_gear_stop");},n.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new y(),this._storage[this._controller.selectedPageId]=t),t.x=this._owner.x,t.y=this._owner.y;},n.updateFromRelations=function(t,e){if(null!=this._controller&&null!=this._storage){for(var n in this._storage){var i=this._storage[n];i.x+=t,i.y+=e;}
this._default.x+=t,this._default.y+=e,this.updateState();}},e;}(),Pt=function(t){function e(){this._url=null,this._align=null,this._valign=null,this._autoSize=!1,this._fill=0,this._shrinkOnly=!1,this._showErrorSign=!1,this._playing=!1,this._frame=0,this._color=null,this._contentItem=null,this._contentSourceWidth=0,this._contentSourceHeight=0,this._contentWidth=0,this._contentHeight=0,this._content=null,this._errorSign=null,this._content2=null,this._updatingLayout=!1,e.__super.call(this),this._playing=!0,this._url="",this._fill=0,this._align="left",this._valign="top",this._showErrorSign=!0,this._color="#FFFFFF";}
r(e,"fairygui.GLoader",t);var o=e.prototype;return n.imps(o,{"fairygui.IAnimationGear":!0,"fairygui.IColorGear":!0}),o.createDisplayObject=function(){t.prototype.createDisplayObject.call(this),this._displayObject.mouseEnabled=!0;},o.dispose=function(){if(null==this._contentItem&&this._content instanceof fairygui.display.Image){var e=this._content.tex;null!=e&&this.freeExternal(e);}
null!=this._content2&&this._content2.dispose(),t.prototype.dispose.call(this);},o.applyColor=function(){},o.loadContent=function(){this.clearContent(),this._url&&(ut.startsWith(this._url,"ui://")?this.loadFromPackage(this._url):this.loadExternal());},o.loadFromPackage=function(t){if(this._contentItem=st.getItemByURL(t),null!=this._contentItem){if(this._contentItem.load(),this._autoSize&&this.setSize(this._contentItem.width,this._contentItem.height),0==this._contentItem.type)null==this._contentItem.texture?this.setErrorState():(this._content instanceof fairygui.display.Image||(this._content=new Ht()),this._displayObject.addChild(this._content),this._content.tex=this._contentItem.texture,this._content.scale9Grid=this._contentItem.scale9Grid,this._content.scaleByTile=this._contentItem.scaleByTile,this._content.tileGridIndice=this._contentItem.tileGridIndice,this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this.updateLayout());else if(2==this._contentItem.type)this._content instanceof fairygui.display.MovieClip||(this._content=new zt()),this._displayObject.addChild(this._content),this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this._content.interval=this._contentItem.interval,this._content.swing=this._contentItem.swing,this._content.repeatDelay=this._contentItem.repeatDelay,this._content.frames=this._contentItem.frames,this._content.boundsRect=new v(0,0,this._contentSourceWidth,this._contentSourceHeight),this.updateLayout();else if(4==this._contentItem.type){var e=st.createObjectFromURL(t);e?e instanceof fairygui.GComponent?(this._content2=e.asCom,this._displayObject.addChild(this._content2.displayObject),this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this.updateLayout()):(e.dispose(),this.setErrorState()):this.setErrorState();}else this.setErrorState();}else this.setErrorState();},o.loadExternal=function(){E.inst.load(this._url,d.create(this,this.__getResCompleted),void 0,n.Loader.IMAGE);},o.freeExternal=function(t){},o.onExternalLoadSuccess=function(t){this._content instanceof fairygui.display.Image||(this._content=new Ht()),this._displayObject.addChild(this._content),this._content.tex=t,this._content.scale9Grid=null,this._content.scaleByTile=!1,this._contentSourceWidth=t.width,this._contentSourceHeight=t.height,this.updateLayout();},o.onExternalLoadFailed=function(){this.setErrorState();},o.__getResCompleted=function(t){null!=t?this.onExternalLoadSuccess(t):this.onExternalLoadFailed();},o.setErrorState=function(){this._showErrorSign&&(null==this._errorSign&&null!=at.loaderErrorSign&&(this._errorSign=fairygui.GLoader._errorSignPool.getObject(at.loaderErrorSign)),null!=this._errorSign&&(this._errorSign.setSize(this.width,this.height),this._displayObject.addChild(this._errorSign.displayObject)));},o.clearErrorState=function(){null!=this._errorSign&&(this._displayObject.removeChild(this._errorSign.displayObject),fairygui.GLoader._errorSignPool.returnObject(this._errorSign),this._errorSign=null);},o.updateLayout=function(){if(null!=this._content2||null!=this._content){if(this._contentWidth=this._contentSourceWidth,this._contentHeight=this._contentSourceHeight,this._autoSize&&(this._updatingLayout=!0,0==this._contentWidth&&(this._contentWidth=50),0==this._contentHeight&&(this._contentHeight=30),this.setSize(this._contentWidth,this._contentHeight),this._updatingLayout=!1,this._contentWidth==this._width&&this._contentHeight==this._height))null!=this._content2?(this._content2.setXY(0,0),this._content2.setScale(1,1)):(this._content.x=0,this._content.y=0,this._content.scaleX=1,this._content.scaleY=1);else{var t=1,e=1;0!=this._fill&&(t=this.width/this._contentSourceWidth,e=this.height/this._contentSourceHeight,1==t&&1==e||(2==this._fill?t=e:3==this._fill?e=t:1==this._fill?e<t?t=e:e=t:5==this._fill&&(e<t?e=t:t=e),this._shrinkOnly&&(1<t&&(t=1),1<e&&(e=1)),this._contentWidth=this._contentSourceWidth*t,this._contentHeight=this._contentSourceHeight*e)),null!=this._content2?this._content2.setScale(t,e):this._content instanceof fairygui.display.Image?this._content.scaleTexture(t,e):this._content.scale(t,e);var n=NaN,i=NaN;n="center"==this._align?Math.floor((this.width-this._contentWidth)/2):"right"==this._align?this.width-this._contentWidth:0,i="middle"==this._valign?Math.floor((this.height-this._contentHeight)/2):"bottom"==this._valign?this.height-this._contentHeight:0,null!=this._content2?this._content2.setXY(n,i):(this._content.x=n,this._content.y=i);}}else this._autoSize&&(this._updatingLayout=!0,this.setSize(50,30),this._updatingLayout=!1);},o.clearContent=function(){if(this.clearErrorState(),null!=this._content&&null!=this._content.parent&&this._displayObject.removeChild(this._content),null==this._contentItem&&this._content instanceof fairygui.display.Image){var t=this._content.tex;null!=t&&this.freeExternal(t);}
null!=this._content2&&(this._content2.dispose(),this._content2=null),this._contentItem=null;},o.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),this._updatingLayout||this.updateLayout();},o.setup_beforeAdd=function(e){var n;t.prototype.setup_beforeAdd.call(this,e),(n=e.getAttribute("url"))&&(this._url=n),(n=e.getAttribute("align"))&&(this._align=n),(n=e.getAttribute("vAlign"))&&(this._valign=n),(n=e.getAttribute("fill"))&&(this._fill=W.parse(n)),this._shrinkOnly="true"==e.getAttribute("shrinkOnly"),this._autoSize="true"==e.getAttribute("autoSize"),(n=e.getAttribute("errorSign"))&&(this._showErrorSign="true"==n),this._playing="false"!=e.getAttribute("playing"),(n=e.getAttribute("color"))&&(this.color=n),this._url&&this.loadContent();},a(0,o,"frame",function(){return this._frame;},function(t){this._frame!=t&&(this._frame=t,this._content instanceof fairygui.display.MovieClip&&(this._content.currentFrame=t),this.updateGear(5));}),a(0,o,"url",function(){return this._url;},function(t){this._url!=t&&(this._url=t,this.loadContent(),this.updateGear(7));}),a(0,o,"align",function(){return this._align;},function(t){this._align!=t&&(this._align=t,this.updateLayout());}),a(0,o,"fill",function(){return this._fill;},function(t){this._fill!=t&&(this._fill=t,this.updateLayout());}),a(0,o,"verticalAlign",function(){return this._valign;},function(t){this._valign!=t&&(this._valign=t,this.updateLayout());}),a(0,o,"icon",function(){return this._url;},function(t){this.url=t;}),a(0,o,"content",function(){return this._content;}),a(0,o,"shrinkOnly",function(){return this._shrinkOnly;},function(t){this._shrinkOnly!=t&&(this._shrinkOnly=t,this.updateLayout());}),a(0,o,"showErrorSign",function(){return this._showErrorSign;},function(t){this._showErrorSign=t;}),a(0,o,"autoSize",function(){return this._autoSize;},function(t){this._autoSize!=t&&(this._autoSize=t,this.updateLayout());}),a(0,o,"playing",function(){return this._playing;},function(t){this._playing!=t&&(this._playing=t,this._content instanceof fairygui.display.MovieClip&&(this._content.playing=t),this.updateGear(5));}),a(0,o,"color",function(){return this._color;},function(t){this._color!=t&&(this._color=t,this.updateGear(4),this.applyColor());}),a(0,o,"component",function(){return this._content2;}),i(e,["_errorSignPool",function(){return this._errorSignPool=new k();}]),e;}(G),Mt=function(t){function e(){this.movieClip=null,e.__super.call(this),this._sizeImplType=1;}
r(e,"fairygui.GMovieClip",t);var i=e.prototype;return n.imps(i,{"fairygui.IAnimationGear":!0,"fairygui.IColorGear":!0}),i.createDisplayObject=function(){this._displayObject=this.movieClip=new zt(),this.movieClip.mouseEnabled=!1,this._displayObject.$owner=this;},i.setPlaySettings=function(t,e,n,i,r){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===n&&(n=0),void 0===i&&(i=-1),this.movieClip.setPlaySettings(t,e,n,i,r);},i.constructFromResource=function(){this.sourceWidth=this.packageItem.width,this.sourceHeight=this.packageItem.height,this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this.setSize(this.sourceWidth,this.sourceHeight),this.packageItem.load(),this.movieClip.interval=this.packageItem.interval,this.movieClip.swing=this.packageItem.swing,this.movieClip.repeatDelay=this.packageItem.repeatDelay,this.movieClip.frames=this.packageItem.frames,this.movieClip.boundsRect=new v(0,0,this.sourceWidth,this.sourceHeight);},i.setup_beforeAdd=function(e){var n;t.prototype.setup_beforeAdd.call(this,e),(n=e.getAttribute("frame"))&&(this.movieClip.currentFrame=parseInt(n)),n=e.getAttribute("playing"),this.movieClip.playing="false"!=n,(n=e.getAttribute("color"))&&(this.color=n);},a(0,i,"color",function(){return "#FFFFFF";},function(t){}),a(0,i,"playing",function(){return this.movieClip.playing;},function(t){this.movieClip.playing!=t&&(this.movieClip.playing=t,this.updateGear(5));}),a(0,i,"frame",function(){return this.movieClip.currentFrame;},function(t){this.movieClip.currentFrame!=t&&(this.movieClip.currentFrame=t,this.updateGear(5));}),e;}(G),At=function(t){function e(){this.textField=null,this._font=null,this._color=null,this._ubbEnabled=!1,this._singleLine=!1,this._letterSpacing=0,this._autoSize=0,this._widthAutoSize=!1,this._heightAutoSize=!1,this._updatingSize=!1,this._textWidth=0,this._textHeight=0,this._bitmapFont=null,this._lines=null,e.__super.call(this),this._text="",this._color="#000000",this.textField.align="left",this.textField.font=at.defaultFont,this._autoSize=1,this._widthAutoSize=this._heightAutoSize=!0,this.textField._sizeDirty=!1;}
var i,o;r(e,"fairygui.GBasicTextField",t);var s=e.prototype;return s.createDisplayObject=function(){this._displayObject=this.textField=new o(this),(this._displayObject.$owner=this)._displayObject.mouseEnabled=!1;},s.setAutoSize=function(t){this._autoSize=t,this._widthAutoSize=1==t,this._heightAutoSize=1==t||2==t,this.textField.wordWrap=!this._widthAutoSize&&!this._singleLine,this._underConstruct||(this._heightAutoSize?this._widthAutoSize||(this.textField.width=this.width):this.textField.size(this.width,this.height));},s.ensureSizeCorrect=function(){!this._underConstruct&&this.textField._isChanged&&this.textField.typeset();},s.typeset=function(){null!=this._bitmapFont?this.renderWithBitmapFont():(this._widthAutoSize||this._heightAutoSize)&&this.updateSize();},s.updateSize=function(){this._textWidth=Math.ceil(this.textField.textWidth),this._textHeight=Math.ceil(this.textField.textHeight);var t=NaN,e=0;this._widthAutoSize?(t=this._textWidth,this.textField.width!=t&&(this.textField.width=t,"left"!=this.textField.align&&this.textField.baseTypeset())):t=this.width,this._heightAutoSize?(e=this._textHeight,this._widthAutoSize||this.textField.height!=this._textHeight&&(this.textField.height=this._textHeight)):(e=this.height,this._textHeight>e&&(this._textHeight=e),this.textField.height!=this._textHeight&&(this.textField.height=this._textHeight)),this._updatingSize=!0,this.setSize(t,e),this._updatingSize=!1;},s.renderWithBitmapFont=function(){var t=this._displayObject.graphics;t.clear(),this._lines?i.returnList(this._lines):this._lines=[];var e,n=this.letterSpacing,r=this.leading-1,a=this.width-4,o=0,s=0,l=0,u=0,h=0,c=0,_=0,f=0,d=0,p="",m=2,g=!this._widthAutoSize&&!this._singleLine,y=this.fontSize,v=this._bitmapFont.resizable?y/this._bitmapFont.size:1;this._textWidth=0,this._textHeight=0;var I=this._text;null!=this._templateVars&&(I=this.parseTemplate(I));for(var x=I.length,T=0;T<x;++T){var S=I.charAt(T),b=S.charCodeAt(0);if(10!=b){if(65<=b&&b<=90||97<=b&&b<=122?(0==c&&(_=o),c++):(0<c&&(f=o),c=0),32==b)u=Math.ceil(y/2),h=y;else{var w=this._bitmapFont.glyphs[S];h=w?(u=Math.ceil(w.advance*v),Math.ceil(w.lineHeight*v)):u=0;}
if(l<h&&(l=h),s<h&&(s=h),0!=o&&(o+=n),o+=u,!g||o<=a)p+=S;else{if((e=i.borrow()).height=s,e.textHeight=l,0==p.length)e.text=S;else if(0<c&&0<f){var D=(p+=S).length-c;e.text=ut.trimRight(p.substr(0,D)),e.width=f,p=p.substr(D),o-=_;}else e.text=p,e.width=o-(u+n),p=S,o=u,l=s=h;e.y=m,m+=e.height+r,e.width>this._textWidth&&(this._textWidth=e.width),f=_=c=0,this._lines.push(e);}}else p+=S,(e=i.borrow()).width=o,0==l&&(0==d&&(d=y),0==s&&(s=d),l=s),d=e.height=s,e.textHeight=l,e.text=p,e.y=m,m+=e.height+r,e.width>this._textWidth&&(this._textWidth=e.width),this._lines.push(e),p="",f=_=c=l=s=o=0;}
0<p.length&&((e=i.borrow()).width=o,0==s&&(s=d),0==l&&(l=s),e.height=s,e.textHeight=l,e.text=p,e.y=m,e.width>this._textWidth&&(this._textWidth=e.width),this._lines.push(e)),0<this._textWidth&&(this._textWidth+=4);var C=this._lines.length;this._textHeight=0==C?0:(e=this._lines[this._lines.length-1]).y+e.height+2;var E=NaN,P=0;if(E=this._widthAutoSize?0==this._textWidth?0:this._textWidth:this.width,P=this._heightAutoSize?0==this._textHeight?0:this._textHeight:this.height,this._updatingSize=!0,this.setSize(E,P),this._updatingSize=!1,this.doAlign(),0!=E&&0!=P){var M=2,A=0,O=0;a=this.width-4;for(var R=this._lines.length,L=0;L<R;L++){e=this._lines[L],M=2,A="center"==this.align?(a-e.width)/2:"right"==this.align?a-e.width:0,x=e.text.length;for(var F=0;F<x;F++){10!=(b=(S=e.text.charAt(F)).charCodeAt(0))&&(32!=b?null!=(w=this._bitmapFont.glyphs[S])?(O=(e.height+e.textHeight)/2-Math.ceil(w.lineHeight*v),t.drawTexture(w.texture,M+A+Math.ceil(w.offsetX*v),e.y+O+Math.ceil(w.offsetY*v),w.texture.width*v,w.texture.height*v),M+=n+Math.ceil(w.advance*v)):M+=n:M+=this._letterSpacing+Math.ceil(y/2));}}}},s.handleSizeChanged=function(){this._updatingSize||(this._underConstruct?this.textField.size(this.width,this.height):null!=this._bitmapFont?this._widthAutoSize?this.doAlign():this.textField.setChanged():this._widthAutoSize||(this._heightAutoSize?this.textField.width=this.width:this.textField.size(this.width,this.height)));},s.handleGrayedChanged=function(){fairygui.GObject.prototype.handleGrayedChanged.call(this),this.grayed?this.textField.color="#AAAAAA":this.textField.color=this._color;},s.doAlign=function(){if("top"==this.valign||0==this._textHeight)this._yOffset=2;else{var t=this.height-this._textHeight;t<0&&(t=0),"middle"==this.valign?this._yOffset=Math.floor(t/2):this._yOffset=Math.floor(t);}
this.handleXYChanged();},s.flushVars=function(){this.text=this._text;},s.setup_beforeAdd=function(e){var n;t.prototype.setup_beforeAdd.call(this,e),(n=e.getAttribute("autoSize"))&&this.setAutoSize(P.parse(n));},a(0,s,"bold",function(){return this.textField.bold;},function(t){this.textField.bold=t;}),a(0,s,"letterSpacing",function(){return this._letterSpacing;},function(t){this._letterSpacing=t;}),a(0,s,"align",function(){return this.textField.align;},function(t){this.textField.align=t;}),a(0,s,"text",function(){return this._text;},function(t){if(this._text=t,null==this._text&&(this._text=""),null==this._bitmapFont){this._widthAutoSize&&(this.textField.width=1e4);var e=this._text;null!=this._templateVars&&(e=this.parseTemplate(e)),this._ubbEnabled?this.textField.text=ut.removeUBB(ut.encodeHTML(e)):this.textField.text=e;}else this.textField.text="",this.textField.setChanged();this.parent&&this.parent._underConstruct&&this.textField.typeset();}),a(0,s,"color",function(){return this._color;},function(t){this._color!=t&&(this._color=t,this._gearColor.controller&&this._gearColor.updateState(),this.grayed?this.textField.color="#AAAAAA":this.textField.color=this._color);}),a(0,s,"font",function(){return this.textField.font;},function(t){this._font=t,ut.startsWith(this._font,"ui://")?(this._bitmapFont=st.getBitmapFontByURL(this._font),this.textField.setChanged()):(this._bitmapFont=null,this._font?this.textField.font=this._font:this.textField.font=at.defaultFont);}),a(0,s,"leading",function(){return this.textField.leading;},function(t){this.textField.leading=t;}),a(0,s,"fontSize",function(){return this.textField.fontSize;},function(t){this.textField.fontSize=t;}),a(0,s,"valign",function(){return this.textField.valign;},function(t){this.textField.valign=t;}),a(0,s,"italic",function(){return this.textField.italic;},function(t){this.textField.italic=t;}),a(0,s,"underline",function(){return this.textField.underline;},function(t){this.textField.underline=t;}),a(0,s,"singleLine",function(){return this._singleLine;},function(t){this._singleLine=t,this.textField.wordWrap=!this._widthAutoSize&&!this._singleLine;}),a(0,s,"stroke",function(){return this.textField.stroke;},function(t){this.textField.stroke=t;}),a(0,s,"strokeColor",function(){return this.textField.strokeColor;},function(t){this.textField.strokeColor=t,this.updateGear(4);}),a(0,s,"ubbEnabled",function(){return this._ubbEnabled;},function(t){this._ubbEnabled=t;}),a(0,s,"autoSize",function(){return this._autoSize;},function(t){this._autoSize!=t&&this.setAutoSize(t);}),a(0,s,"textWidth",function(){return this.textField._isChanged&&this.textField.typeset(),this._textWidth;}),e.GUTTER_X=2,e.GUTTER_Y=2,e.__init$=function(){i=function(){function t(){this.width=0,this.height=0,this.textHeight=0,this.text=null,this.y=0;}
return r(t,""),t.borrow=function(){if(t.pool.length){var e=t.pool.pop();return e.width=0,e.height=0,e.textHeight=0,e.text=null,e.y=0,e;}
return new t();},t.returns=function(e){t.pool.push(e);},t.returnList=function(e){for(var n=e.length,i=0;i<n;i++){var r=e[i];t.pool.push(r);}
e.length=0;},t.pool=[],t;}(),o=function(t){function e(t){this._owner=null,this._lock=!1,this._sizeDirty=!1,e.__super.call(this),this._owner=t;}
r(e,"",t);var i=e.prototype;return i.baseTypeset=function(){this._lock=!0,this.typeset(),this._lock=!1;},i.typeset=function(){this._sizeDirty=!0,t.prototype.typeset.call(this),this._lock||this._owner.typeset(),this._isChanged&&(n.timer.clear(this,this.typeset),this._isChanged=!1),this._sizeDirty=!1;},i.setChanged=function(){this.isChanged=!0;},a(0,i,"isChanged",null,function(t){t&&!this._sizeDirty&&0!=this._owner.autoSize&&this._owner.parent&&(this._sizeDirty=!0,this.event("fui_size_delay_change")),n.superSet(S,this,"isChanged",t);}),e;}(S);},e;}(mt),Ot=function(t){function e(){this._titleObject=null,this._iconObject=null,this._relatedController=null,this._mode=0,this._selected=!1,this._title=null,this._selectedTitle=null,this._icon=null,this._selectedIcon=null,this._sound=null,this._soundVolumeScale=0,this._pageOption=null,this._buttonController=null,this._changeStateOnClick=!1,this._linkedPopup=null,this._downEffect=0,this._downEffectValue=0,this._downScaled=!1,this._down=!1,this._over=!1,e.__super.call(this),this._mode=0,this._title="",this._icon="",this._sound=at.buttonSound,this._soundVolumeScale=at.buttonSoundVolumeScale,this._pageOption=new Z(),this._changeStateOnClick=!0,this._downEffectValue=.8;}
r(e,"fairygui.GButton",t);var i=e.prototype;return i.fireClick=function(t){void 0===t&&(t=!0),t&&0==this._mode&&(this.setState("over"),n.timer.once(100,this,this.setState,["down"],!1),n.timer.once(200,this,this.setState,["up"],!1)),this.__click(N.createEvent("click",this.displayObject));},i.setState=function(t){if(this._buttonController&&(this._buttonController.selectedPage=t),1==this._downEffect){var e=this.numChildren;if("down"==t||"selectedOver"==t||"selectedDisabled"==t)for(var n=255*this._downEffectValue,i=D.toHexColor((n<<16)+(n<<8)+n),r=0;r<e;r++){var a=this.getChildAt(r);(a instanceof fairygui.GImage||a instanceof fairygui.GLoader||a instanceof fairygui.GMovieClip)&&(a.color=i);}else for(r=0;r<e;r++){((a=this.getChildAt(r))instanceof fairygui.GImage||a instanceof fairygui.GLoader||a instanceof fairygui.GMovieClip)&&(a.color="#FFFFFF");}}else 2==this._downEffect&&("down"==t||"selectedOver"==t||"selectedDisabled"==t?this._downScaled||(this.setScale(this.scaleX*this._downEffectValue,this.scaleY*this._downEffectValue),this._downScaled=!0):this._downScaled&&(this.setScale(this.scaleX/this._downEffectValue,this.scaleY/this._downEffectValue),this._downScaled=!1));},i.handleControllerChanged=function(e){t.prototype.handleControllerChanged.call(this,e),this._relatedController==e&&(this.selected=this._pageOption.id==e.selectedPageId);},i.handleGrayedChanged=function(){this._buttonController&&this._buttonController.hasPage("disabled")?this.grayed?this._selected&&this._buttonController.hasPage("selectedDisabled")?this.setState("selectedDisabled"):this.setState("disabled"):this._selected?this.setState("down"):this.setState("up"):t.prototype.handleGrayedChanged.call(this);},i.constructFromXML=function(e){var n;t.prototype.constructFromXML.call(this,e),(n=(e=ut.findChildNode(e,"Button")).getAttribute("mode"))&&(this._mode=M.parse(n)),(n=e.getAttribute("sound"))&&(this._sound=n),(n=e.getAttribute("volume"))&&(this._soundVolumeScale=parseInt(n)/100),(n=e.getAttribute("downEffect"))&&(this._downEffect="dark"==n?1:"scale"==n?2:0,n=e.getAttribute("downEffectValue"),this._downEffectValue=parseFloat(n),2==this._downEffect&&this.setPivot(.5,.5)),this._buttonController=this.getController("button"),this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon"),null!=this._titleObject&&(this._title=this._titleObject.text),null!=this._iconObject&&(this._icon=this._iconObject.icon),0==this._mode&&this.setState("up"),this.on("mouseover",this,this.__rollover),this.on("mouseout",this,this.__rollout),this.on("mousedown",this,this.__mousedown),this.on("click",this,this.__click);},i.setup_afterAdd=function(e){var n;t.prototype.setup_afterAdd.call(this,e),(e=ut.findChildNode(e,"Button"))&&((n=e.getAttribute("title"))&&(this.title=n),(n=e.getAttribute("icon"))&&(this.icon=n),(n=e.getAttribute("selectedTitle"))&&(this.selectedTitle=n),(n=e.getAttribute("selectedIcon"))&&(this.selectedIcon=n),(n=e.getAttribute("titleColor"))&&(this.titleColor=n),(n=e.getAttribute("titleFontSize"))&&(this.titleFontSize=parseInt(n)),null!=(n=e.getAttribute("sound"))&&(this._sound=n),(n=e.getAttribute("volume"))&&(this._soundVolumeScale=parseInt(n)/100),n=e.getAttribute("controller"),this._relatedController=n?this._parent.getController(n):null,this._pageOption.id=e.getAttribute("page"),this.selected="true"==e.getAttribute("checked"));},i.__rollover=function(){this._buttonController&&this._buttonController.hasPage("over")&&(this._over=!0,this._down||this.grayed&&this._buttonController.hasPage("disabled")||this.setState(this._selected?"selectedOver":"over"));},i.__rollout=function(){this._buttonController&&this._buttonController.hasPage("over")&&(this._over=!1,this._down||this.grayed&&this._buttonController.hasPage("disabled")||this.setState(this._selected?"down":"up"));},i.__mousedown=function(t){this._down=!0,Ut.inst.checkPopups(t.target),n.stage.on("mouseup",this,this.__mouseup),0==this._mode&&(this.grayed&&this._buttonController&&this._buttonController.hasPage("disabled")?this.setState("selectedDisabled"):this.setState("down")),null!=this._linkedPopup&&(this._linkedPopup instanceof fairygui.Window?this._linkedPopup.toggleStatus():this.root.togglePopup(this._linkedPopup,this));},i.__mouseup=function(){this._down&&(n.stage.off("mouseup",this,this.__mouseup),this._down=!1,0==this._mode&&(this.grayed&&this._buttonController&&this._buttonController.hasPage("disabled")?this.setState("disabled"):this._over?this.setState("over"):this.setState("up")));},i.__click=function(t){if(this._sound){var e=st.getItemByURL(this._sound);e?Ut.inst.playOneShotSound(e.owner.getItemAssetURL(e)):Ut.inst.playOneShotSound(this._sound);}
1==this._mode?this._changeStateOnClick&&(this.selected=!this._selected,N.dispatch("fui_state_changed",this.displayObject,t)):2==this._mode?this._changeStateOnClick&&!this._selected&&(this.selected=!0,N.dispatch("fui_state_changed",this.displayObject,t)):this._relatedController&&(this._relatedController.selectedPageId=this._pageOption.id);},a(0,i,"relatedController",function(){return this._relatedController;},function(t){t!=this._relatedController&&(this._relatedController=t,this._pageOption.controller=t,this._pageOption.clear());}),a(0,i,"icon",function(){return this._icon;},function(t){this._icon=t,t=this._selected&&this._selectedIcon?this._selectedIcon:this._icon,null!=this._iconObject&&(this._iconObject.icon=t),this.updateGear(7);}),a(0,i,"titleFontSize",function(){return this._titleObject instanceof fairygui.GTextField?this._titleObject.fontSize:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleFontSize:this._titleObject instanceof fairygui.GButton?this._titleObject.titleFontSize:0;},function(t){this._titleObject instanceof fairygui.GTextField?this._titleObject.fontSize=t:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleFontSize=t:this._titleObject instanceof fairygui.GButton&&(this._titleObject.titleFontSize=t);}),a(0,i,"selectedIcon",function(){return this._selectedIcon;},function(t){this._selectedIcon=t,t=this._selected&&this._selectedIcon?this._selectedIcon:this._icon,null!=this._iconObject&&(this._iconObject.icon=t);}),a(0,i,"title",function(){return this._title;},function(t){this._title=t,this._titleObject&&(this._titleObject.text=this._selected&&this._selectedTitle?this._selectedTitle:this._title),this.updateGear(6);}),a(0,i,"text",function(){return this.title;},function(t){this.title=t;}),a(0,i,"selectedTitle",function(){return this._selectedTitle;},function(t){this._selectedTitle=t,this._titleObject&&(this._titleObject.text=this._selected&&this._selectedTitle?this._selectedTitle:this._title);}),a(0,i,"soundVolumeScale",function(){return this._soundVolumeScale;},function(t){this._soundVolumeScale=t;}),a(0,i,"sound",function(){return this._sound;},function(t){this._sound=t;}),a(0,i,"titleColor",function(){return this._titleObject instanceof fairygui.GTextField?this._titleObject.color:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleColor:this._titleObject instanceof fairygui.GButton?this._titleObject.titleColor:"#000000";},function(t){this._titleObject instanceof fairygui.GTextField?this._titleObject.color=t:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleColor=t:this._titleObject instanceof fairygui.GButton&&(this._titleObject.titleColor=t);}),a(0,i,"selected",function(){return this._selected;},function(t){if(0!=this._mode&&this._selected!=t){if(this._selected=t,this.grayed&&this._buttonController&&this._buttonController.hasPage("disabled")?this._selected?this.setState("selectedDisabled"):this.setState("disabled"):this._selected?this.setState(this._over?"selectedOver":"down"):this.setState(this._over?"over":"up"),this._selectedTitle&&this._titleObject&&(this._titleObject.text=this._selected?this._selectedTitle:this._title),this._selectedIcon){var e=this._selected?this._selectedIcon:this._icon;null!=this._iconObject&&(this._iconObject.icon=e);}
this._relatedController&&this._parent&&!this._parent._buildingDisplayList&&(this._selected?(this._relatedController.selectedPageId=this._pageOption.id,this._relatedController._autoRadioGroupDepth&&this._parent.adjustRadioGroupDepth(this,this._relatedController)):1==this._mode&&this._relatedController.selectedPageId==this._pageOption.id&&(this._relatedController.oppositePageId=this._pageOption.id));}}),a(0,i,"mode",function(){return this._mode;},function(t){this._mode!=t&&(0==t&&(this.selected=!1),this._mode=t);}),a(0,i,"pageOption",function(){return this._pageOption;}),a(0,i,"changeStateOnClick",function(){return this._changeStateOnClick;},function(t){this._changeStateOnClick=t;}),a(0,i,"linkedPopup",function(){return this._linkedPopup;},function(t){this._linkedPopup=t;}),e.UP="up",e.DOWN="down",e.OVER="over",e.SELECTED_OVER="selectedOver",e.DISABLED="disabled",e.SELECTED_DISABLED="selectedDisabled",e;}(gt),Rt=function(t){function e(){this.dropdown=null,this._titleObject=null,this._iconObject=null,this._list=null,this._items=null,this._icons=null,this._values=null,this._popupDownward=null,this._visibleItemCount=0,this._itemsUpdated=!1,this._selectedIndex=0,this._buttonController=null,this._selectionController=null,this._down=!1,this._over=!1,e.__super.call(this),this._visibleItemCount=at.defaultComboBoxVisibleItemCount,this._itemsUpdated=!0,this._selectedIndex=-1,this._items=[],this._values=[];}
r(e,"fairygui.GComboBox",t);var i=e.prototype;return i.setState=function(t){this._buttonController&&(this._buttonController.selectedPage=t);},i.handleControllerChanged=function(e){t.prototype.handleControllerChanged.call(this,e),this._selectionController==e&&(this.selectedIndex=e.selectedIndex);},i.updateSelectionController=function(){if(null!=this._selectionController&&!this._selectionController.changing&&this._selectedIndex<this._selectionController.pageCount){var t=this._selectionController;this._selectionController=null,t.selectedIndex=this._selectedIndex,this._selectionController=t;}},i.dispose=function(){this.dropdown&&(this.dropdown.dispose(),this.dropdown=null),this._selectionController=null,t.prototype.dispose.call(this);},i.constructFromXML=function(e){var n;if(t.prototype.constructFromXML.call(this,e),e=ut.findChildNode(e,"ComboBox"),this._buttonController=this.getController("button"),this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon"),n=e.getAttribute("dropdown")){if(this.dropdown=st.createObjectFromURL(n),!this.dropdown)return void g.print("下拉框必须为元件");if(this.dropdown.name="this._dropdownObject",this._list=this.dropdown.getChild("list").asList,null==this._list)return void g.print(this.resourceURL+": 下拉框的弹出元件里必须包含名为list的列表");this._list.on("fui_click_item",this,this.__clickItem),this._list.addRelation(this.dropdown,14),this._list.removeRelation(this.dropdown,15),this.dropdown.addRelation(this._list,15),this.dropdown.removeRelation(this._list,14),this.dropdown.displayObject.on("undisplay",this,this.__popupWinClosed);}
this.on("mouseover",this,this.__rollover),this.on("mouseout",this,this.__rollout),this.on("mousedown",this,this.__mousedown);},i.setup_afterAdd=function(e){if(t.prototype.setup_afterAdd.call(this,e),e=ut.findChildNode(e,"ComboBox")){var n;(n=e.getAttribute("titleColor"))&&(this.titleColor=n),(n=e.getAttribute("visibleItemCount"))&&(this._visibleItemCount=parseInt(n));for(var i=e.childNodes,r=i.length,a=0;a<r;a++){var o=i[a];"item"==o.nodeName&&(this._items.push(o.getAttribute("title")),this._values.push(o.getAttribute("value")),(n=o.getAttribute("icon"))&&(this._icons||(this._icons=new Array(r)),this._icons[a]=n));}
(n=e.getAttribute("title"))?(this.text=n,this._selectedIndex=this._items.indexOf(n)):0<this._items.length?(this._selectedIndex=0,this.text=this._items[0]):this._selectedIndex=-1,(n=e.getAttribute("icon"))&&(this.icon=n),(n=e.getAttribute("direction"))&&("up"==n?this._popupDownward=!1:"auto"==n&&(this._popupDownward=null)),(n=e.getAttribute("selectionController"))&&(this._selectionController=this.parent.getController(n));}},i.showDropdown=function(){if(this._itemsUpdated){this._itemsUpdated=!1,this._list.removeChildrenToPool();for(var t=this._items.length,e=0;e<t;e++){var n=this._list.addItemFromPool();n.name=e<this._values.length?this._values[e]:"",n.text=this._items[e],n.icon=null!=this._icons&&e<this._icons.length?this._icons[e]:null;}
this._list.resizeToFit(this._visibleItemCount);}
this._list.selectedIndex=-1,this.dropdown.width=this.width,this.root.togglePopup(this.dropdown,this,this._popupDownward),this.dropdown.parent&&this.setState("down");},i.__popupWinClosed=function(){this._over?this.setState("over"):this.setState("up");},i.__clickItem=function(t,e){n.timer.callLater(this,this.__clickItem2,[this._list.getChildIndex(t),e]);},i.__clickItem2=function(t,e){this.dropdown.parent instanceof fairygui.GRoot&&this.dropdown.parent.hidePopup(),this._selectedIndex=-1,this.selectedIndex=t,N.dispatch("fui_state_changed",this.displayObject,e);},i.__rollover=function(){this._over=!0,this._down||this.dropdown&&this.dropdown.parent||this.setState("over");},i.__rollout=function(){this._over=!1,this._down||this.dropdown&&this.dropdown.parent||this.setState("up");},i.__mousedown=function(t){t.target instanceof laya.display.Input||(this._down=!0,Ut.inst.checkPopups(t.target),n.stage.on("mouseup",this,this.__mouseup),this.dropdown&&this.showDropdown());},i.__mouseup=function(){this._down&&(this._down=!1,n.stage.off("mouseup",this,this.__mouseup),this.dropdown&&!this.dropdown.parent&&(this._over?this.setState("over"):this.setState("up")));},a(0,i,"text",function(){return this._titleObject?this._titleObject.text:null;},function(t){this._titleObject&&(this._titleObject.text=t),this.updateGear(6);}),a(0,i,"titleColor",function(){return this._titleObject instanceof fairygui.GTextField?this._titleObject.color:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleColor:this._titleObject instanceof fairygui.GButton?this._titleObject.titleColor:"#000000";},function(t){this._titleObject instanceof fairygui.GTextField?this._titleObject.color=t:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleColor=t:this._titleObject instanceof fairygui.GButton&&(this._titleObject.titleColor=t);}),a(0,i,"selectedIndex",function(){return this._selectedIndex;},function(t){this._selectedIndex!=t&&(this._selectedIndex=t,0<=this._selectedIndex&&this._selectedIndex<this._items.length?(this.text=this._items[this._selectedIndex],null!=this._icons&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])):(this.text="",null!=this._icons&&(this.icon=null)),this.updateSelectionController());}),a(0,i,"icon",function(){return this._iconObject?this._iconObject.icon:null;},function(t){this._iconObject&&(this._iconObject.icon=t),this.updateGear(7);}),a(0,i,"icons",function(){return this._icons;},function(t){this._icons=t,null!=this._icons&&-1!=this._selectedIndex&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex]);}),a(0,i,"selectionController",function(){return this._selectionController;},function(t){this._selectionController=t;}),a(0,i,"visibleItemCount",function(){return this._visibleItemCount;},function(t){this._visibleItemCount=t;}),a(0,i,"popupDownward",function(){return this._popupDownward;},function(t){this._popupDownward=t;}),a(0,i,"values",function(){return this._values;},function(t){t?this._values=t.concat():this._values.length=0;}),a(0,i,"items",function(){return this._items;},function(t){t?this._items=t.concat():this._items.length=0,0<this._items.length?(this._selectedIndex>=this._items.length?this._selectedIndex=this._items.length-1:-1==this._selectedIndex&&(this._selectedIndex=0),this.text=this._items[this._selectedIndex],null!=this._icons&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])):(this.text="",null!=this._icons&&(this.icon=null),this._selectedIndex=-1),this._itemsUpdated=!0;}),a(0,i,"value",function(){return this._values[this._selectedIndex];},function(t){this.selectedIndex=this._values.indexOf(t);}),e;}(gt),Lt=function(t){function e(){this._titleObject=null,this._iconObject=null,e.__super.call(this);}
r(e,"fairygui.GLabel",t);var i=e.prototype;return n.imps(i,{"fairygui.IColorGear":!0}),i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon");},i.setup_afterAdd=function(e){var n;t.prototype.setup_afterAdd.call(this,e),(e=ut.findChildNode(e,"Label"))&&((n=e.getAttribute("title"))&&(this.text=n),(n=e.getAttribute("icon"))&&(this.icon=n),(n=e.getAttribute("titleColor"))&&(this.titleColor=n),(n=e.getAttribute("titleFontSize"))&&(this.titleFontSize=parseInt(n)),this._titleObject instanceof fairygui.GTextInput&&((n=e.getAttribute("Prompt"))&&(this._titleObject.promptText=n),(n=e.getAttribute("maxLength"))&&(this._titleObject.maxLength=parseInt(n)),(n=e.getAttribute("restrict"))&&(this._titleObject.restrict=n),(n=e.getAttribute("password"))&&(this._titleObject.password="true"==n),"4"==(n=e.getAttribute("keyboardType"))?this._titleObject.keyboardType="number":"3"==n&&(this._titleObject.keyboardType="url")));},a(0,i,"color",function(){return this.titleColor;},function(t){this.titleColor=t;}),a(0,i,"icon",function(){return null!=this._iconObject?this._iconObject.icon:null;},function(t){null!=this._iconObject&&(this._iconObject.icon=t),this.updateGear(7);}),a(0,i,"editable",function(){return!!(this._titleObject&&this._titleObject instanceof fairygui.GTextInput)&&this._titleObject.asTextInput.editable;},function(t){this._titleObject&&(this._titleObject.asTextInput.editable=t);}),a(0,i,"title",function(){return this._titleObject?this._titleObject.text:null;},function(t){this._titleObject&&(this._titleObject.text=t),this.updateGear(6);}),a(0,i,"text",function(){return this.title;},function(t){this.title=t;}),a(0,i,"titleColor",function(){return this._titleObject instanceof fairygui.GTextField?this._titleObject.color:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleColor:this._titleObject instanceof fairygui.GButton?this._titleObject.titleColor:"#000000";},function(t){this._titleObject instanceof fairygui.GTextField?this._titleObject.color=t:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleColor=t:this._titleObject instanceof fairygui.GButton&&(this._titleObject.titleColor=t),this.updateGear(4);}),a(0,i,"titleFontSize",function(){return this._titleObject instanceof fairygui.GTextField?this._titleObject.fontSize:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleFontSize:this._titleObject instanceof fairygui.GButton?this._titleObject.titleFontSize:0;},function(t){this._titleObject instanceof fairygui.GTextField?this._titleObject.fontSize=t:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleFontSize=t:this._titleObject instanceof fairygui.GButton&&(this._titleObject.titleFontSize=t);}),e;}(gt),Ft=function(t){function e(){this.itemRenderer=null,this.itemProvider=null,this.scrollItemToViewOnClick=!1,this.foldInvisibleItems=!1,this._layout=0,this._lineCount=0,this._columnCount=0,this._lineGap=0,this._columnGap=0,this._defaultItem=null,this._autoResizeItem=!1,this._selectionMode=0,this._align=null,this._verticalAlign=null,this._selectionController=null,this._lastSelectedIndex=0,this._pool=null,this._virtual=!1,this._loop=!1,this._numItems=0,this._realNumItems=0,this._firstIndex=0,this._curLineItemCount=0,this._curLineItemCount2=0,this._itemSize=null,this._virtualListChanged=0,this._virtualItems=null,this._eventLocked=!1,this.itemInfoVer=0,this.enterCounter=0,e.__super.call(this),this._trackBounds=!0,this._pool=new k(),this._layout=0,this._autoResizeItem=!0,this._lastSelectedIndex=-1,this._selectionMode=0,this.opaque=!0,this.scrollItemToViewOnClick=!0,this._align="left",this._verticalAlign="top",this._container=new T(),this._displayObject.addChild(this._container);}
var i;r(e,"fairygui.GList",t);var o=e.prototype;return o.dispose=function(){this._pool.clear(),t.prototype.dispose.call(this);},o.getFromPool=function(t){t||(t=this._defaultItem);var e=this._pool.getObject(t);return null!=e&&(e.visible=!0),e;},o.returnToPool=function(t){t.displayObject.cacheAsBitmap=!1,this._pool.returnObject(t);},o.addChildAt=function(e,n){if(void 0===n&&(n=0),t.prototype.addChildAt.call(this,e,n),e instanceof fairygui.GButton){var i=e;i.selected=!1,i.changeStateOnClick=!1;}
return e.on("click",this,this.__clickItem),e;},o.addItem=function(t){return t||(t=this._defaultItem),this.addChild(st.createObjectFromURL(t));},o.addItemFromPool=function(t){return this.addChild(this.getFromPool(t));},o.removeChildAt=function(e,n){void 0===n&&(n=!1);var i=t.prototype.removeChildAt.call(this,e,n);return i.off("click",this,this.__clickItem),i;},o.removeChildToPoolAt=function(e){void 0===e&&(e=0);var n=t.prototype.removeChildAt.call(this,e);this.returnToPool(n);},o.removeChildToPool=function(t){this.removeChild(t),this.returnToPool(t);},o.removeChildrenToPool=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),(e<0||e>=this._children.length)&&(e=this._children.length-1);for(var n=t;n<=e;++n){this.removeChildToPoolAt(t);}},o.getSelection=function(){var t=[],e=0;if(this._virtual)for(e=0;e<this._realNumItems;e++){var n=this._virtualItems[e];if(n.obj instanceof fairygui.GButton&&n.obj.selected||null==n.obj&&n.selected){var i=e;if(this._loop&&(i=e%this._numItems,-1!=t.indexOf(i)))continue;t.push(i);}}else{var r=this._children.length;for(e=0;e<r;e++){var a=this._children[e].asButton;null!=a&&a.selected&&t.push(e);}}
return t;},o.addSelection=function(t,e){if(void 0===e&&(e=!1),3!=this._selectionMode){this.checkVirtualList(),0==this._selectionMode&&this.clearSelection(),e&&this.scrollToView(t),this._lastSelectedIndex=t;var n=null;if(this._virtual){var i=this._virtualItems[t];null!=i.obj&&(n=i.obj.asButton),i.selected=!0;}else n=this.getChildAt(t).asButton;null==n||n.selected||(n.selected=!0,this.updateSelectionController(t));}},o.removeSelection=function(t){if(3!=this._selectionMode){var e=null;if(this._virtual){var n=this._virtualItems[t];null!=n.obj&&(e=n.obj.asButton),n.selected=!1;}else e=this.getChildAt(t).asButton;null!=e&&(e.selected=!1);}},o.clearSelection=function(){var t=0;if(this._virtual)for(t=0;t<this._realNumItems;t++){var e=this._virtualItems[t];e.obj instanceof fairygui.GButton&&(e.obj.selected=!1),e.selected=!1;}else{var n=this._children.length;for(t=0;t<n;t++){var i=this._children[t].asButton;null!=i&&(i.selected=!1);}}},o.clearSelectionExcept=function(t){var e=0;if(this._virtual)for(e=0;e<this._realNumItems;e++){var n=this._virtualItems[e];n.obj!=t&&(n.obj instanceof fairygui.GButton&&(n.obj.selected=!1),n.selected=!1);}else{var i=this._children.length;for(e=0;e<i;e++){var r=this._children[e].asButton;null!=r&&r!=t&&(r.selected=!1);}}},o.selectAll=function(){this.checkVirtualList();var t=-1,e=0;if(this._virtual)for(e=0;e<this._realNumItems;e++){var n=this._virtualItems[e];n.obj instanceof fairygui.GButton&&!n.obj.selected&&(n.obj.selected=!0,t=e),n.selected=!0;}else{var i=this._children.length;for(e=0;e<i;e++){var r=this._children[e].asButton;null==r||r.selected||(r.selected=!0,t=e);}}
-1!=t&&this.updateSelectionController(t);},o.selectNone=function(){this.clearSelection();},o.selectReverse=function(){this.checkVirtualList();var t=-1,e=0;if(this._virtual)for(e=0;e<this._realNumItems;e++){var n=this._virtualItems[e];n.obj instanceof fairygui.GButton&&(n.obj.selected=!n.obj.selected,n.obj.selected&&(t=e)),n.selected=!n.selected;}else{var i=this._children.length;for(e=0;e<i;e++){var r=this._children[e].asButton;null!=r&&(r.selected=!r.selected,r.selected&&(t=e));}}
-1!=t&&this.updateSelectionController(t);},o.handleArrowKey=function(t){void 0===t&&(t=0);var e=this.selectedIndex;if(-1!=e)switch(t){case 1:if(0==this._layout||3==this._layout)0<=--e&&(this.clearSelection(),this.addSelection(e,!0));else if(2==this._layout||4==this._layout){for(var n=this._children[e],i=0,r=e-1;0<=r;r--){var a=this._children[r];if(a.y!=n.y){n=a;break;}
i++;}
for(;0<=r;r--){if((a=this._children[r]).y!=n.y){this.clearSelection(),this.addSelection(r+i+1,!0);break;}}}
break;case 3:if(1==this._layout||2==this._layout||4==this._layout)++e<this._children.length&&(this.clearSelection(),this.addSelection(e,!0));else if(3==this._layout){n=this._children[e],i=0;var o=this._children.length;for(r=e+1;r<o;r++){if((a=this._children[r]).x!=n.x){n=a;break;}
i++;}
for(;r<o;r++){if((a=this._children[r]).x!=n.x){this.clearSelection(),this.addSelection(r-i-1,!0);break;}}}
break;case 5:if(0==this._layout||3==this._layout)++e<this._children.length&&(this.clearSelection(),this.addSelection(e,!0));else if(2==this._layout||4==this._layout){for(n=this._children[e],i=0,o=this._children.length,r=e+1;r<o;r++){if((a=this._children[r]).y!=n.y){n=a;break;}
i++;}
for(;r<o;r++){if((a=this._children[r]).y!=n.y){this.clearSelection(),this.addSelection(r-i-1,!0);break;}}}
break;case 7:if(1==this._layout||2==this._layout||4==this._layout)0<=--e&&(this.clearSelection(),this.addSelection(e,!0));else if(3==this._layout){for(n=this._children[e],i=0,r=e-1;0<=r;r--){if((a=this._children[r]).x!=n.x){n=a;break;}
i++;}
for(;0<=r;r--){if((a=this._children[r]).x!=n.x){this.clearSelection(),this.addSelection(r+i+1,!0);break;}}}}},o.__clickItem=function(t){if(null==this._scrollPane||!this._scrollPane.isDragged){var e=G.cast(t.currentTarget);this.setSelectionOnEvent(e,t),this._scrollPane&&this.scrollItemToViewOnClick&&this._scrollPane.scrollToView(e,!0),this.displayObject.event("fui_click_item",[e,N.createEvent("fui_click_item",this.displayObject,t)]);}},o.setSelectionOnEvent=function(t,e){if(t instanceof fairygui.GButton&&3!=this._selectionMode){var n=!1,i=t,r=this.childIndexToItemIndex(this.getChildIndex(t));if(0==this._selectionMode)i.selected||(this.clearSelectionExcept(i),i.selected=!0);else if(e.shiftKey){if(!i.selected)if(-1!=this._lastSelectedIndex){var a=Math.min(this._lastSelectedIndex,r),o=Math.max(this._lastSelectedIndex,r);o=Math.min(o,this.numItems-1);var s=0;if(this._virtual)for(s=a;s<=o;s++){var l=this._virtualItems[s];l.obj instanceof fairygui.GButton&&(l.obj.selected=!0),l.selected=!0;}else for(s=a;s<=o;s++){var u=this.getChildAt(s).asButton;null!=u&&(u.selected=!0);}
n=!0;}else i.selected=!0;}else e.ctrlKey||2==this._selectionMode?i.selected=!i.selected:i.selected?this.clearSelectionExcept(i):(this.clearSelectionExcept(i),i.selected=!0);n||(this._lastSelectedIndex=r),i.selected&&this.updateSelectionController(r);}},o.resizeToFit=function(t,e){void 0===t&&(t=1e6),void 0===e&&(e=0),this.ensureBoundsCorrect();var n=this.numItems;if(n<t&&(t=n),this._virtual){var i=Math.ceil(t/this._curLineItemCount);0==this._layout||2==this._layout?this.viewHeight=i*this._itemSize.y+Math.max(0,i-1)*this._lineGap:this.viewWidth=i*this._itemSize.x+Math.max(0,i-1)*this._columnGap;}else if(0==t)0==this._layout||2==this._layout?this.viewHeight=e:this.viewWidth=e;else{for(var r=t-1,a=null;0<=r&&(a=this.getChildAt(r),this.foldInvisibleItems&&!a.visible);){r--;}
if(r<0)0==this._layout||2==this._layout?this.viewHeight=e:this.viewWidth=e;else{var o=0;0==this._layout||2==this._layout?((o=a.y+a.height)<e&&(o=e),this.viewHeight=o):((o=a.x+a.width)<e&&(o=e),this.viewWidth=o);}}},o.getMaxItemWidth=function(){for(var t=this._children.length,e=0,n=0;n<t;n++){var i=this.getChildAt(n);i.width>e&&(e=i.width);}
return e;},o.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0);},o.handleControllerChanged=function(e){t.prototype.handleControllerChanged.call(this,e),this._selectionController==e&&(this.selectedIndex=e.selectedIndex);},o.updateSelectionController=function(t){if(null!=this._selectionController&&!this._selectionController.changing&&t<this._selectionController.pageCount){var e=this._selectionController;this._selectionController=null,e.selectedIndex=t,this._selectionController=e;}},o.getSnappingPosition=function(e,n,i){if(this._virtual){i||(i=new y());var r=NaN,a=0;return 0==this._layout||2==this._layout?(r=n,fairygui.GList.pos_param=n,a=this.getIndexOnPos1(!1),n=fairygui.GList.pos_param,a<this._virtualItems.length&&r-n>this._virtualItems[a].height/2&&a<this._realNumItems&&(n+=this._virtualItems[a].height+this._lineGap)):(a=1==this._layout||3==this._layout?(r=e,fairygui.GList.pos_param=e,this.getIndexOnPos2(!1)):(r=e,fairygui.GList.pos_param=e,this.getIndexOnPos3(!1)),e=fairygui.GList.pos_param,a<this._virtualItems.length&&r-e>this._virtualItems[a].width/2&&a<this._realNumItems&&(e+=this._virtualItems[a].width+this._columnGap)),i.x=e,i.y=n,i;}
return t.prototype.getSnappingPosition.call(this,e,n,i);},o.scrollToView=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),this._virtual){if(0==this._numItems)return;if(this.checkVirtualList(),t>=this._virtualItems.length)throw new Error("Invalid child index: "+t+">"+this._virtualItems.length);var i;this._loop&&(t=Math.floor(this._firstIndex/this._numItems)*this._numItems+t);var r=this._virtualItems[t],a=0,o=0;if(0==this._layout||2==this._layout){for(o=0;o<t;o+=this._curLineItemCount){a+=this._virtualItems[o].height+this._lineGap;}
i=new v(0,a,this._itemSize.x,r.height);}else if(1==this._layout||3==this._layout){for(o=0;o<t;o+=this._curLineItemCount){a+=this._virtualItems[o].width+this._columnGap;}
i=new v(a,0,r.width,this._itemSize.y);}else{var s=t/(this._curLineItemCount*this._curLineItemCount2);i=new v(s*this.viewWidth+t%this._curLineItemCount*(r.width+this._columnGap),t/this._curLineItemCount%this._curLineItemCount2*(r.height+this._lineGap),r.width,r.height);}
n=!0,null!=this._scrollPane&&this._scrollPane.scrollToView(i,e,n);}else{var l=this.getChildAt(t);null!=this._scrollPane?this._scrollPane.scrollToView(l,e,n):null!=this.parent&&null!=this.parent.scrollPane&&this.parent.scrollPane.scrollToView(l,e,n);}},o.getFirstChildInView=function(){return this.childIndexToItemIndex(t.prototype.getFirstChildInView.call(this));},o.childIndexToItemIndex=function(t){if(!this._virtual)return t;if(4!=this._layout)return t+=this._firstIndex,this._loop&&0<this._numItems&&(t%=this._numItems),t;for(var e=this._firstIndex;e<this._realNumItems;e++){if(null!=this._virtualItems[e].obj&&--t<0)return e;}
return t;},o.itemIndexToChildIndex=function(t){if(!this._virtual)return t;if(4==this._layout)return this.getChildIndex(this._virtualItems[t].obj);if(this._loop&&0<this._numItems){var e=this._firstIndex%this._numItems;t=e<=t?this._firstIndex+(t-e):this._firstIndex+this._numItems+(e-t);}else t-=this._firstIndex;return t;},o.setVirtual=function(){this._setVirtual(!1);},o.setVirtualAndLoop=function(){this._setVirtual(!0);},o._setVirtual=function(t){if(!this._virtual){if(null==this._scrollPane)throw new Error("Virtual list must be scrollable!");if(t){if(2==this._layout||3==this._layout)throw new Error("Loop list is not supported for FlowHorizontal or FlowVertical layout!");this._scrollPane.bouncebackEffect=!1;}
if(this._virtual=!0,this._loop=t,this._virtualItems=[],this.removeChildrenToPool(),null==this._itemSize){this._itemSize=new y();var e=this.getFromPool(null);if(null==e)throw new Error("Virtual List must have a default list item resource.");this._itemSize.x=e.width,this._itemSize.y=e.height,this.returnToPool(e);}
0==this._layout||2==this._layout?(this._scrollPane.scrollStep=this._itemSize.y,this._loop&&(this._scrollPane._loop=2)):(this._scrollPane.scrollStep=this._itemSize.x,this._loop&&(this._scrollPane._loop=1)),this.on("fui_scroll",this,this.__scrolled),this.setVirtualListChangedFlag(!0);}},o.refreshVirtualList=function(){this.setVirtualListChangedFlag(!1);},o.checkVirtualList=function(){0!=this._virtualListChanged&&(this._refreshVirtualList(),n.timer.clear(this,this._refreshVirtualList));},o.setVirtualListChangedFlag=function(t){void 0===t&&(t=!1),t?this._virtualListChanged=2:0==this._virtualListChanged&&(this._virtualListChanged=1),n.timer.callLater(this,this._refreshVirtualList);},o._refreshVirtualList=function(){var t=2==this._virtualListChanged;this._virtualListChanged=0,this._eventLocked=!0,t&&(0==this._layout||1==this._layout?this._curLineItemCount=1:2==this._layout?0<this._columnCount?this._curLineItemCount=this._columnCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewWidth+this._columnGap)/(this._itemSize.x+this._columnGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)):3==this._layout?0<this._lineCount?this._curLineItemCount=this._lineCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewHeight+this._lineGap)/(this._itemSize.y+this._lineGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)):(0<this._columnCount?this._curLineItemCount=this._columnCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewWidth+this._columnGap)/(this._itemSize.x+this._columnGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)),0<this._lineCount?this._curLineItemCount2=this._lineCount:(this._curLineItemCount2=Math.floor((this._scrollPane.viewHeight+this._lineGap)/(this._itemSize.y+this._lineGap)),this._curLineItemCount2<=0&&(this._curLineItemCount2=1))));var e=0,n=0;if(0<this._realNumItems){var i=0,r=Math.ceil(this._realNumItems/this._curLineItemCount)*this._curLineItemCount,a=Math.min(this._curLineItemCount,this._realNumItems);if(0==this._layout||2==this._layout){for(i=0;i<r;i+=this._curLineItemCount){e+=this._virtualItems[i].height+this._lineGap;}
if(0<e&&(e-=this._lineGap),this._autoResizeItem)n=this._scrollPane.viewWidth;else{for(i=0;i<a;i++){n+=this._virtualItems[i].width+this._columnGap;}
0<n&&(n-=this._columnGap);}}else if(1==this._layout||3==this._layout){for(i=0;i<r;i+=this._curLineItemCount){n+=this._virtualItems[i].width+this._columnGap;}
if(0<n&&(n-=this._columnGap),this._autoResizeItem)e=this._scrollPane.viewHeight;else{for(i=0;i<a;i++){e+=this._virtualItems[i].height+this._lineGap;}
0<e&&(e-=this._lineGap);}}else n=Math.ceil(r/(this._curLineItemCount*this._curLineItemCount2))*this.viewWidth,e=this.viewHeight;}
this.handleAlign(n,e),this._scrollPane.setContentSize(n,e),this._eventLocked=!1,this.handleScroll(!0);},o.__scrolled=function(t){this.handleScroll(!1);},o.getIndexOnPos1=function(t){if(this._realNumItems<this._curLineItemCount)return e.pos_param=0;var n=0,i=NaN,r=NaN;if(0<this.numChildren&&!t){if(i=this.getChildAt(0).y,e.pos_param<i){for(n=this._firstIndex-this._curLineItemCount;0<=n;n-=this._curLineItemCount){if((i-=this._virtualItems[n].height+this._lineGap)<=e.pos_param)return e.pos_param=i,n;}
return e.pos_param=0;}
for(n=this._firstIndex;n<this._realNumItems;n+=this._curLineItemCount){if(r=i+this._virtualItems[n].height+this._lineGap,e.pos_param<r)return e.pos_param=i,n;i=r;}
return e.pos_param=i,this._realNumItems-this._curLineItemCount;}
for(n=i=0;n<this._realNumItems;n+=this._curLineItemCount){if(r=i+this._virtualItems[n].height+this._lineGap,e.pos_param<r)return e.pos_param=i,n;i=r;}
return e.pos_param=i,this._realNumItems-this._curLineItemCount;},o.getIndexOnPos2=function(t){if(this._realNumItems<this._curLineItemCount)return e.pos_param=0;var n=0,i=NaN,r=NaN;if(0<this.numChildren&&!t){if(i=this.getChildAt(0).x,e.pos_param<i){for(n=this._firstIndex-this._curLineItemCount;0<=n;n-=this._curLineItemCount){if((i-=this._virtualItems[n].width+this._columnGap)<=e.pos_param)return e.pos_param=i,n;}
return e.pos_param=0;}
for(n=this._firstIndex;n<this._realNumItems;n+=this._curLineItemCount){if(r=i+this._virtualItems[n].width+this._columnGap,e.pos_param<r)return e.pos_param=i,n;i=r;}
return e.pos_param=i,this._realNumItems-this._curLineItemCount;}
for(n=i=0;n<this._realNumItems;n+=this._curLineItemCount){if(r=i+this._virtualItems[n].width+this._columnGap,e.pos_param<r)return e.pos_param=i,n;i=r;}
return e.pos_param=i,this._realNumItems-this._curLineItemCount;},o.getIndexOnPos3=function(t){if(this._realNumItems<this._curLineItemCount)return e.pos_param=0;var n=this.viewWidth,i=Math.floor(e.pos_param/n),r=i*(this._curLineItemCount*this._curLineItemCount2),a=i*n,o=0,s=NaN;for(o=0;o<this._curLineItemCount;o++){if(s=a+this._virtualItems[r+o].width+this._columnGap,e.pos_param<s)return e.pos_param=a,r+o;a=s;}
return e.pos_param=a,r+this._curLineItemCount-1;},o.handleScroll=function(t){this._eventLocked||((this.enterCounter=0)==this._layout||2==this._layout?(this.handleScroll1(t),this.handleArchOrder1()):1==this._layout||3==this._layout?(this.handleScroll2(t),this.handleArchOrder2()):this.handleScroll3(t),this._boundsChanged=!1);},o.handleScroll1=function(t){if(this.enterCounter++,3<this.enterCounter)console.log("FairyGUI: list will never be filled as the item renderer function always returns a different size.");else{var e=this._scrollPane.scrollingPosY,n=e+this._scrollPane.viewHeight,i=n==this._scrollPane.contentHeight;fairygui.GList.pos_param=e;var r=this.getIndexOnPos1(t);if(e=fairygui.GList.pos_param,r!=this._firstIndex||t){var a,o,s=this._firstIndex,l=this._firstIndex=r,u=r<s,h=this.numChildren,c=s+h-1,_=u?c:s,f=0,d=e,p=!1,m=0,g=0,y=this.defaultItem,v=0,I=0,x=(this._scrollPane.viewWidth-this._columnGap*(this._curLineItemCount-1))/this._curLineItemCount;for(this.itemInfoVer++;l<this._realNumItems&&(i||d<n);){if((null==(a=this._virtualItems[l]).obj||t)&&(null!=this.itemProvider&&(null==(y=this.itemProvider.runWith(l%this._numItems))&&(y=this._defaultItem),y=st.normalizeURL(y)),null!=a.obj&&a.obj.resourceURL!=y&&(a.obj instanceof fairygui.GButton&&(a.selected=a.obj.selected),this.removeChildToPool(a.obj),a.obj=null)),null==a.obj){if(u){for(I=_;s<=I;I--){if(null!=(o=this._virtualItems[I]).obj&&o.updateFlag!=this.itemInfoVer&&o.obj.resourceURL==y){o.obj instanceof fairygui.GButton&&(o.selected=o.obj.selected),a.obj=o.obj,o.obj=null,I==_&&_--;break;}}}else for(I=_;I<=c;I++){if(null!=(o=this._virtualItems[I]).obj&&o.updateFlag!=this.itemInfoVer&&o.obj.resourceURL==y){o.obj instanceof fairygui.GButton&&(o.selected=o.obj.selected),a.obj=o.obj,o.obj=null,I==_&&_++;break;}}
null!=a.obj?this.setChildIndex(a.obj,u?l-r:this.numChildren):(a.obj=this._pool.getObject(y),u?this.addChildAt(a.obj,l-r):this.addChild(a.obj)),a.obj instanceof fairygui.GButton&&(a.obj.selected=a.selected),p=!0;}else p=t;p&&(this._autoResizeItem&&(0==this._layout||0<this._columnCount)&&a.obj.setSize(x,a.obj.height,!0),this.itemRenderer.runWith([l%this._numItems,a.obj]),l%this._curLineItemCount==0&&(m+=Math.ceil(a.obj.height)-a.height,l==r&&r<s&&(g=Math.ceil(a.obj.height)-a.height)),a.width=Math.ceil(a.obj.width),a.height=Math.ceil(a.obj.height)),a.updateFlag=this.itemInfoVer,a.obj.setXY(f,d),l==r&&(n+=a.height),f+=a.width+this._columnGap,l%this._curLineItemCount==this._curLineItemCount-1&&(f=0,d+=a.height+this._lineGap),l++;}
for(v=0;v<h;v++){(a=this._virtualItems[s+v]).updateFlag!=this.itemInfoVer&&null!=a.obj&&(a.obj instanceof fairygui.GButton&&(a.selected=a.obj.selected),this.removeChildToPool(a.obj),a.obj=null);}
0==m&&0==g||this._scrollPane.changeContentSizeOnScrolling(0,m,0,g),0<l&&0<this.numChildren&&this._container.y<0&&this.getChildAt(0).y>-this._container.y&&this.handleScroll1(!1);}}},o.handleScroll2=function(t){if(this.enterCounter++,3<this.enterCounter)console.log("FairyGUI: list will never be filled as the item renderer function always returns a different size.");else{var e=this._scrollPane.scrollingPosX,n=e+this._scrollPane.viewWidth,i=e==this._scrollPane.contentWidth;fairygui.GList.pos_param=e;var r=this.getIndexOnPos2(t);if(e=fairygui.GList.pos_param,r!=this._firstIndex||t){var a,o,s=this._firstIndex,l=this._firstIndex=r,u=r<s,h=this.numChildren,c=s+h-1,_=u?c:s,f=e,d=0,p=!1,m=0,g=0,y=this.defaultItem,v=0,I=0,x=(this._scrollPane.viewHeight-this._lineGap*(this._curLineItemCount-1))/this._curLineItemCount;for(this.itemInfoVer++;l<this._realNumItems&&(i||f<n);){if((null==(a=this._virtualItems[l]).obj||t)&&(null!=this.itemProvider&&(null==(y=this.itemProvider.runWith(l%this._numItems))&&(y=this._defaultItem),y=st.normalizeURL(y)),null!=a.obj&&a.obj.resourceURL!=y&&(a.obj instanceof fairygui.GButton&&(a.selected=a.obj.selected),this.removeChildToPool(a.obj),a.obj=null)),null==a.obj){if(u){for(I=_;s<=I;I--){if(null!=(o=this._virtualItems[I]).obj&&o.updateFlag!=this.itemInfoVer&&o.obj.resourceURL==y){o.obj instanceof fairygui.GButton&&(o.selected=o.obj.selected),a.obj=o.obj,o.obj=null,I==_&&_--;break;}}}else for(I=_;I<=c;I++){if(null!=(o=this._virtualItems[I]).obj&&o.updateFlag!=this.itemInfoVer&&o.obj.resourceURL==y){o.obj instanceof fairygui.GButton&&(o.selected=o.obj.selected),a.obj=o.obj,o.obj=null,I==_&&_++;break;}}
null!=a.obj?this.setChildIndex(a.obj,u?l-r:this.numChildren):(a.obj=this._pool.getObject(y),u?this.addChildAt(a.obj,l-r):this.addChild(a.obj)),a.obj instanceof fairygui.GButton&&(a.obj.selected=a.selected),p=!0;}else p=t;p&&(this._autoResizeItem&&(1==this._layout||0<this._lineCount)&&a.obj.setSize(a.obj.width,x,!0),this.itemRenderer.runWith([l%this._numItems,a.obj]),l%this._curLineItemCount==0&&(m+=Math.ceil(a.obj.width)-a.width,l==r&&r<s&&(g=Math.ceil(a.obj.width)-a.width)),a.width=Math.ceil(a.obj.width),a.height=Math.ceil(a.obj.height)),a.updateFlag=this.itemInfoVer,a.obj.setXY(f,d),l==r&&(n+=a.width),d+=a.height+this._lineGap,l%this._curLineItemCount==this._curLineItemCount-1&&(d=0,f+=a.width+this._columnGap),l++;}
for(v=0;v<h;v++){(a=this._virtualItems[s+v]).updateFlag!=this.itemInfoVer&&null!=a.obj&&(a.obj instanceof fairygui.GButton&&(a.selected=a.obj.selected),this.removeChildToPool(a.obj),a.obj=null);}
0==m&&0==g||this._scrollPane.changeContentSizeOnScrolling(m,0,g,0),0<l&&0<this.numChildren&&this._container.x<0&&this.getChildAt(0).x>-this._container.x&&this.handleScroll2(!1);}}},o.handleScroll3=function(t){var e=this._scrollPane.scrollingPosX;fairygui.GList.pos_param=e;var n=this.getIndexOnPos3(t);if(e=fairygui.GList.pos_param,n!=this._firstIndex||t){var i=this._firstIndex;this._firstIndex=n;var r,a,o=i,s=this._virtualItems.length,l=this._curLineItemCount*this._curLineItemCount2,u=n%this._curLineItemCount,h=this.viewWidth,c=Math.floor(n/l)*l,_=c+2*l,f=!1,d=0,p=0,m=this._defaultItem,g=(this._scrollPane.viewWidth-this._columnGap*(this._curLineItemCount-1))/this._curLineItemCount,y=(this._scrollPane.viewHeight-this._lineGap*(this._curLineItemCount2-1))/this._curLineItemCount2;for(this.itemInfoVer++,d=c;d<_;d++){if(!(d>=this._realNumItems)){if(p=d%this._curLineItemCount,d-c<l){if(p<u)continue;}else if(u<p)continue;(r=this._virtualItems[d]).updateFlag=this.itemInfoVer;}}
var v=null,I=0;for(d=c;d<_;d++){if(!(d>=this._realNumItems)&&(r=this._virtualItems[d]).updateFlag==this.itemInfoVer){if(null==r.obj){for(;o<s;){if(null!=(a=this._virtualItems[o]).obj&&a.updateFlag!=this.itemInfoVer){a.obj instanceof fairygui.GButton&&(a.selected=a.obj.selected),r.obj=a.obj,a.obj=null;break;}
o++;}
-1==I&&(I=this.getChildIndex(v)+1),null==r.obj?(null!=this.itemProvider&&(null==(m=this.itemProvider.runWith(d%this._numItems))&&(m=this._defaultItem),m=st.normalizeURL(m)),r.obj=this._pool.getObject(m),this.addChildAt(r.obj,I)):I=this.setChildIndexBefore(r.obj,I),I++,r.obj instanceof fairygui.GButton&&(r.obj.selected=r.selected),f=!0;}else f=t,I=-1,v=r.obj;f&&(this._autoResizeItem&&(this._curLineItemCount==this._columnCount&&this._curLineItemCount2==this._lineCount?r.obj.setSize(g,y,!0):this._curLineItemCount==this._columnCount?r.obj.setSize(g,r.obj.height,!0):this._curLineItemCount2==this._lineCount&&r.obj.setSize(r.obj.width,y,!0)),this.itemRenderer.runWith([d%this._numItems,r.obj]),r.width=Math.ceil(r.obj.width),r.height=Math.ceil(r.obj.height));}}
var x=c/l*h,T=x,S=0,b=0;for(d=c;d<_;d++){d>=this._realNumItems||((r=this._virtualItems[d]).updateFlag==this.itemInfoVer&&r.obj.setXY(T,S),r.height>b&&(b=r.height),d%this._curLineItemCount==this._curLineItemCount-1?(T=x,S+=b+this._lineGap,b=0,d==c+l-1&&(T=x+=h,S=0)):T+=r.width+this._columnGap);}
for(d=o;d<s;d++){(r=this._virtualItems[d]).updateFlag!=this.itemInfoVer&&null!=r.obj&&(r.obj instanceof fairygui.GButton&&(r.selected=r.obj.selected),this.removeChildToPool(r.obj),r.obj=null);}}},o.handleArchOrder1=function(){if(2==this.childrenRenderOrder){for(var t=this._scrollPane.posY+this.viewHeight/2,e=Number.POSITIVE_INFINITY,n=0,i=0,r=this.numChildren,a=0;a<r;a++){var o=this.getChildAt(a);this.foldInvisibleItems&&!o.visible||(n=Math.abs(t-o.y-o.height/2))<e&&(e=n,i=a);}
this.apexIndex=i;}},o.handleArchOrder2=function(){if(2==this.childrenRenderOrder){for(var t=this._scrollPane.posX+this.viewWidth/2,e=Number.POSITIVE_INFINITY,n=0,i=0,r=this.numChildren,a=0;a<r;a++){var o=this.getChildAt(a);this.foldInvisibleItems&&!o.visible||(n=Math.abs(t-o.x-o.width/2))<e&&(e=n,i=a);}
this.apexIndex=i;}},o.handleAlign=function(t,e){var n=0,i=0;e<this.viewHeight&&("middle"==this._verticalAlign?i=Math.floor((this.viewHeight-e)/2):"bottom"==this._verticalAlign&&(i=this.viewHeight-e)),t<this.viewWidth&&("center"==this._align?n=Math.floor((this.viewWidth-t)/2):"right"==this._align&&(n=this.viewWidth-t)),n==this._alignOffset.x&&i==this._alignOffset.y||(this._alignOffset.setTo(n,i),null!=this._scrollPane?this._scrollPane.adjustMaskContainer():this._container.pos(this._margin.left+this._alignOffset.x,this._margin.top+this._alignOffset.y));},o.updateBounds=function(){if(!this._virtual){var t,e=0,n=0,i=0,r=0,a=0,o=0,s=0,l=0,u=0,h=0,c=this._children.length,_=this.viewWidth,f=this.viewHeight,d=0,p=0,m=NaN;if(0==this._layout){for(e=0;e<c;e++){t=this.getChildAt(e),this.foldInvisibleItems&&!t.visible||(0!=i&&(i+=this._lineGap),t.y=i,this._autoResizeItem&&t.setSize(_,t.height,!0),i+=Math.ceil(t.height),t.width>r&&(r=t.width));}
o=Math.ceil(r),s=i;}else if(1==this._layout){for(e=0;e<c;e++){t=this.getChildAt(e),this.foldInvisibleItems&&!t.visible||(0!=n&&(n+=this._columnGap),t.x=n,this._autoResizeItem&&t.setSize(t.width,f,!0),n+=Math.ceil(t.width),t.height>a&&(a=t.height));}
o=n,s=Math.ceil(a);}else if(2==this._layout){if(this._autoResizeItem&&0<this._columnCount){for(e=0;e<c;e++){if(t=this.getChildAt(e),(!this.foldInvisibleItems||t.visible)&&(d+=t.sourceWidth,++l==this._columnCount||e==c-1)){for(m=(_-d-(l-1)*this._columnGap)/d,n=0,l=p;l<=e;l++){t=this.getChildAt(l),this.foldInvisibleItems&&!t.visible||(t.setXY(n,i),l<e?(t.setSize(t.sourceWidth+Math.round(t.sourceWidth*m),t.height,!0),n+=Math.ceil(t.width)+this._columnGap):t.setSize(_-n,t.height,!0),t.height>a&&(a=t.height));}
i+=Math.ceil(a)+this._lineGap,p=e+1,d=l=a=0;}}
s=i+Math.ceil(a),o=_;}else{for(e=0;e<c;e++){t=this.getChildAt(e),this.foldInvisibleItems&&!t.visible||(0!=n&&(n+=this._columnGap),(0!=this._columnCount&&l>=this._columnCount||0==this._columnCount&&n+t.width>_&&0!=a)&&(n=0,i+=Math.ceil(a)+this._lineGap,l=a=0),t.setXY(n,i),r<(n+=Math.ceil(t.width))&&(r=n),t.height>a&&(a=t.height),l++);}
s=i+Math.ceil(a),o=Math.ceil(r);}}else if(3==this._layout){if(this._autoResizeItem&&0<this._lineCount){for(e=0;e<c;e++){if(t=this.getChildAt(e),(!this.foldInvisibleItems||t.visible)&&(d+=t.sourceHeight,++l==this._lineCount||e==c-1)){for(m=(f-d-(l-1)*this._lineGap)/d,i=0,l=p;l<=e;l++){t=this.getChildAt(l),this.foldInvisibleItems&&!t.visible||(t.setXY(n,i),l<e?(t.setSize(t.width,t.sourceHeight+Math.round(t.sourceHeight*m),!0),i+=Math.ceil(t.height)+this._lineGap):t.setSize(t.width,f-i,!0),t.width>r&&(r=t.width));}
n+=Math.ceil(r)+this._columnGap,p=e+1,d=l=r=0;}}
o=n+Math.ceil(r),s=f;}else{for(e=0;e<c;e++){t=this.getChildAt(e),this.foldInvisibleItems&&!t.visible||(0!=i&&(i+=this._lineGap),(0!=this._lineCount&&l>=this._lineCount||0==this._lineCount&&i+t.height>f&&0!=r)&&(i=0,n+=Math.ceil(r)+this._columnGap,l=r=0),t.setXY(n,i),a<(i+=Math.ceil(t.height))&&(a=i),t.width>r&&(r=t.width),l++);}
o=n+Math.ceil(r),s=Math.ceil(a);}}else{var g=0;if(this._autoResizeItem&&0<this._lineCount&&(g=Math.floor((f-(this._lineCount-1)*this._lineGap)/this._lineCount)),this._autoResizeItem&&0<this._columnCount){for(e=0;e<c;e++){if(t=this.getChildAt(e),(!this.foldInvisibleItems||t.visible)&&(d+=t.sourceWidth,++l==this._columnCount||e==c-1)){for(m=(_-d-(l-1)*this._columnGap)/d,n=0,l=p;l<=e;l++){t=this.getChildAt(l),this.foldInvisibleItems&&!t.visible||(t.setXY(u*_+n,i),l<e?(t.setSize(t.sourceWidth+Math.round(t.sourceWidth*m),0<this._lineCount?g:t.height,!0),n+=Math.ceil(t.width)+this._columnGap):t.setSize(_-n,0<this._lineCount?g:t.height,!0),t.height>a&&(a=t.height));}
i+=Math.ceil(a)+this._lineGap,p=e+1,h++,((d=l=a=0)!=this._lineCount&&h>=this._lineCount||0==this._lineCount&&i+t.height>f)&&(u++,h=i=0);}}}else for(e=0;e<c;e++){t=this.getChildAt(e),this.foldInvisibleItems&&!t.visible||(0!=n&&(n+=this._columnGap),this._autoResizeItem&&0<this._lineCount&&t.setSize(t.width,g,!0),(0!=this._columnCount&&l>=this._columnCount||0==this._columnCount&&n+t.width>_&&0!=a)&&(n=0,i+=Math.ceil(a)+this._lineGap,h++,((l=a=0)!=this._lineCount&&h>=this._lineCount||0==this._lineCount&&i+t.height>f&&0!=r)&&(u++,h=i=0)),t.setXY(u*_+n,i),r<(n+=Math.ceil(t.width))&&(r=n),t.height>a&&(a=t.height),l++);}
s=0<u?f:i+Math.ceil(a),o=(u+1)*_;}
this.handleAlign(o,s),this.setBounds(0,0,o,s);}},o.setup_beforeAdd=function(t){var e,n;fairygui.GObject.prototype.setup_beforeAdd.call(this,t),(e=t.getAttribute("layout"))&&(this._layout=z.parse(e));var i=0;if(i=(e=t.getAttribute("overflow"))?X.parse(e):0,(e=t.getAttribute("margin"))&&this._margin.parse(e),(e=t.getAttribute("align"))&&(this._align=e),(e=t.getAttribute("vAlign"))&&(this._verticalAlign=e),2==i){var r=0;r=(e=t.getAttribute("scroll"))?nt.parse(e):1;var a=0;a=(e=t.getAttribute("scrollBar"))?tt.parse(e):0;var o=NaN;o=(e=t.getAttribute("scrollBarFlags"))?parseInt(e):0;var s,l,u,h,c=new K();(e=t.getAttribute("scrollBarMargin"))&&c.parse(e),(e=t.getAttribute("scrollBarRes"))&&(s=(n=e.split(","))[0],l=n[1]),(e=t.getAttribute("ptrRes"))&&(u=(n=e.split(","))[0],h=n[1]),this.setupScroll(c,r,a,o,s,l,u,h);}else this.setupOverflow(i);(e=t.getAttribute("lineGap"))&&(this._lineGap=parseInt(e)),(e=t.getAttribute("colGap"))&&(this._columnGap=parseInt(e)),(e=t.getAttribute("lineItemCount"))&&(2==this._layout||4==this._layout?this._columnCount=parseInt(e):3==this._layout&&(this._lineCount=parseInt(e))),(e=t.getAttribute("lineItemCount2"))&&(this._lineCount=parseInt(e)),(e=t.getAttribute("selectionMode"))&&(this._selectionMode=j.parse(e)),(e=t.getAttribute("defaultItem"))&&(this._defaultItem=e),e=t.getAttribute("autoItemSize"),1==this._layout||0==this._layout?this._autoResizeItem="false"!=e:this._autoResizeItem="true"==e,(e=t.getAttribute("renderOrder"))&&(this._childrenRenderOrder=A.parse(e),2==this._childrenRenderOrder&&(e=t.getAttribute("apex"))&&(this._apexIndex=parseInt(e)));for(var _=t.childNodes,f=_.length,d=0;d<f;d++){var p=_[d];if("item"==p.nodeName){var m=p.getAttribute("url");if(m||(m=this._defaultItem),m){var g=this.getFromPool(m);if(null!=g&&(this.addChild(g),(e=p.getAttribute("title"))&&(g.text=e),(e=p.getAttribute("icon"))&&(g.icon=e),(e=p.getAttribute("name"))&&(g.name=e),(e=p.getAttribute("selectedIcon"))&&g instanceof fairygui.GButton&&(g.selectedIcon=e),(e=p.getAttribute("selectedTitle"))&&g instanceof fairygui.GButton&&(g.selectedTitle=e),g instanceof fairygui.GComponent&&(e=p.getAttribute("controllers")))){n=e.split(",");for(var y=0;y<n.length;y+=2){var v=g.getController(n[y]);null!=v&&(v.selectedPageId=n[y+1]);}}}}}},o.setup_afterAdd=function(e){var n;t.prototype.setup_afterAdd.call(this,e),(n=e.getAttribute("selectionController"))&&(this._selectionController=this.parent.getController(n));},a(0,o,"layout",function(){return this._layout;},function(t){this._layout!=t&&(this._layout=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0));}),a(0,o,"align",function(){return this._align;},function(t){this._align!=t&&(this._align=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0));}),a(0,o,"lineCount",function(){return this._lineCount;},function(t){this._lineCount!=t&&(this._lineCount=t,3!=this._layout&&4!=this._layout||(this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0)));}),a(0,o,"columnCount",function(){return this._columnCount;},function(t){this._columnCount!=t&&(this._columnCount=t,2!=this._layout&&4!=this._layout||(this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0)));}),a(0,o,"lineGap",function(){return this._lineGap;},function(t){this._lineGap!=t&&(this._lineGap=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0));}),a(0,o,"columnGap",function(){return this._columnGap;},function(t){this._columnGap!=t&&(this._columnGap=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0));}),a(0,o,"verticalAlign",function(){return this._verticalAlign;},function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0));}),a(0,o,"virtualItemSize",function(){return this._itemSize;},function(t){this._virtual&&(null==this._itemSize&&(this._itemSize=new y()),this._itemSize.setTo(t.x,t.y),this.setVirtualListChangedFlag(!0));}),a(0,o,"defaultItem",function(){return this._defaultItem;},function(t){this._defaultItem=t;}),a(0,o,"autoResizeItem",function(){return this._autoResizeItem;},function(t){this._autoResizeItem!=t&&(this._autoResizeItem=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0));}),a(0,o,"selectionMode",function(){return this._selectionMode;},function(t){this._selectionMode=t;}),a(0,o,"selectionController",function(){return this._selectionController;},function(t){this._selectionController=t;}),a(0,o,"itemPool",function(){return this._pool;}),a(0,o,"selectedIndex",function(){var t=0;if(this._virtual)for(t=0;t<this._realNumItems;t++){var e=this._virtualItems[t];if(e.obj instanceof fairygui.GButton&&e.obj.selected||null==e.obj&&e.selected)return this._loop?t%this._numItems:t;}else{var n=this._children.length;for(t=0;t<n;t++){var i=this._children[t].asButton;if(null!=i&&i.selected)return t;}}
return-1;},function(t){0<=t&&t<this.numItems?(0!=this._selectionMode&&this.clearSelection(),this.addSelection(t)):this.clearSelection();}),a(0,o,"numItems",function(){return this._virtual?this._numItems:this._children.length;},function(t){var e=0;if(this._virtual){if(null==this.itemRenderer)throw new Error("Set itemRenderer first!");this._numItems=t,this._loop?this._realNumItems=6*this._numItems:this._realNumItems=this._numItems;var r=this._virtualItems.length;if(this._realNumItems>r)for(e=r;e<this._realNumItems;e++){var a=new i();a.width=this._itemSize.x,a.height=this._itemSize.y,this._virtualItems.push(a);}else for(e=this._realNumItems;e<r;e++){this._virtualItems[e].selected=!1;}
0!=this._virtualListChanged&&n.timer.clear(this,this._refreshVirtualList),this._refreshVirtualList();}else{var o=this._children.length;if(o<t)for(e=o;e<t;e++){null==this.itemProvider?this.addItemFromPool():this.addItemFromPool(this.itemProvider.runWith(e));}else this.removeChildrenToPool(t,o);if(null!=this.itemRenderer)for(e=0;e<t;e++){this.itemRenderer.runWith([e,this.getChildAt(e)]);}}}),e.pos_param=NaN,e.__init$=function(){i=function(){function t(){this.width=0,this.height=0,this.obj=null,this.updateFlag=0,this.selected=!1;}
return r(t,""),t;}();},e;}(gt),Vt=function(t){function e(){this.div=null,this._ubbEnabled=!1,this._color=null,e.__super.call(this),this._text="";}
r(e,"fairygui.GRichTextField",mt);var n=e.prototype;return n.createDisplayObject=function(){this._displayObject=this.div=new f(),this._displayObject.mouseEnabled=!0,this._displayObject.$owner=this;},n.handleSizeChanged=function(){this.div.size(this.width,this.height);},a(0,n,"bold",function(){return this.div.style.bold;},function(t){this.div.style.bold=t;}),a(0,n,"align",function(){return this.div.style.align;},function(t){this.div.style.align=t;}),a(0,n,"text",function(){return this._text;},function(t){this._text=t;var e=this._text;null!=this._templateVars&&(e=this.parseTemplate(e)),this._ubbEnabled?this.div.innerHTML=ut.parseUBB(e):this.div.innerHTML=e;}),a(0,n,"color",function(){return this._color;},function(t){this._color!=t&&(this._color=t,this.div.color=t,this._gearColor.controller&&this._gearColor.updateState());}),a(0,n,"font",function(){return this.div.style.fontFamily;},function(t){this.div.style.fontFamily=t;}),a(0,n,"leading",function(){return this.div.style.leading;},function(t){this.div.style.leading=t;}),a(0,n,"fontSize",function(){return this.div.style.fontSize;},function(t){this.div.style.fontSize=t;}),a(0,n,"valign",function(){return this.div.style.valign;},function(t){this.div.style.valign=t;}),a(0,n,"italic",function(){return this.div.style.italic;},function(t){this.div.style.italic=t;}),a(0,n,"stroke",function(){return this.div.style.stroke;},function(t){this.div.style.stroke=t;}),a(0,n,"strokeColor",function(){return this.div.style.strokeColor;},function(t){this.div.style.strokeColor=t,this.updateGear(4);}),a(0,n,"ubbEnabled",function(){return this._ubbEnabled;},function(t){this._ubbEnabled=t;}),e;}(),Nt=function(t){function e(){this._max=0,this._value=0,this._titleType=0,this._reverse=!1,this._titleObject=null,this._aniObject=null,this._barObjectH=null,this._barObjectV=null,this._barMaxWidth=0,this._barMaxHeight=0,this._barMaxWidthDelta=0,this._barMaxHeightDelta=0,this._barStartX=0,this._barStartY=0,this._tweener=null,this._tweenValue=0,e.__super.call(this),this._titleType=0,this._value=50,this._max=100;}
r(e,"fairygui.GProgressBar",t);var n=e.prototype;return n.tweenValue=function(t,e){return this._value!=t?(this._tweener&&this._tweener.clear(),this._tweenValue=this._value,this._value=t,this._tweener=w.to(this,{_tweenValue:t},1e3*e,fairygui.GProgressBar.easeLinear,d.create(this,this.onTweenComplete,null,!0)),this._tweener.update=d.create(this,this.onUpdateTween,null,!1),this._tweener):null;},n.onUpdateTween=function(){this.update(this._tweenValue);},n.onTweenComplete=function(){this._tweener=null;},n.update=function(t){var e=0!=this._max?Math.min(t/this._max,1):0;if(this._titleObject)switch(this._titleType){case 0:this._titleObject.text=Math.round(100*e)+"%";break;case 1:this._titleObject.text=Math.round(t)+"/"+Math.round(this._max);break;case 2:this._titleObject.text=""+Math.round(t);break;case 3:this._titleObject.text=""+Math.round(this._max);}
var n=this.width-this._barMaxWidthDelta,i=this.height-this._barMaxHeightDelta;this._reverse?(this._barObjectH&&(this._barObjectH.width=Math.round(n*e),this._barObjectH.x=this._barStartX+(n-this._barObjectH.width)),this._barObjectV&&(this._barObjectV.height=Math.round(i*e),this._barObjectV.y=this._barStartY+(i-this._barObjectV.height))):(this._barObjectH&&(this._barObjectH.width=Math.round(n*e)),this._barObjectV&&(this._barObjectV.height=Math.round(i*e))),this._aniObject instanceof fairygui.GMovieClip&&(this._aniObject.frame=Math.round(100*e));},n.constructFromXML=function(e){var n;t.prototype.constructFromXML.call(this,e),(n=(e=ut.findChildNode(e,"ProgressBar")).getAttribute("titleType"))&&(this._titleType=J.parse(n)),this._reverse="true"==e.getAttribute("reverse"),this._titleObject=this.getChild("title"),this._barObjectH=this.getChild("bar"),this._barObjectV=this.getChild("bar_v"),this._aniObject=this.getChild("ani"),this._barObjectH&&(this._barMaxWidth=this._barObjectH.width,this._barMaxWidthDelta=this.width-this._barMaxWidth,this._barStartX=this._barObjectH.x),this._barObjectV&&(this._barMaxHeight=this._barObjectV.height,this._barMaxHeightDelta=this.height-this._barMaxHeight,this._barStartY=this._barObjectV.y);},n.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),this._barObjectH&&(this._barMaxWidth=this.width-this._barMaxWidthDelta),this._barObjectV&&(this._barMaxHeight=this.height-this._barMaxHeightDelta),this._underConstruct||this.update(this._value);},n.setup_afterAdd=function(e){t.prototype.setup_afterAdd.call(this,e),(e=ut.findChildNode(e,"ProgressBar"))&&(this._value=parseInt(e.getAttribute("value")),this._max=parseInt(e.getAttribute("max"))),this.update(this._value);},n.dispose=function(){this._tweener&&this._tweener.clear(),t.prototype.dispose.call(this);},a(0,n,"max",function(){return this._max;},function(t){this._max!=t&&(this._max=t,this.update(this._value));}),a(0,n,"titleType",function(){return this._titleType;},function(t){this._titleType!=t&&(this._titleType=t,this.update(this._value));}),a(0,n,"value",function(){return this._value;},function(t){null!=this._tweener&&(this._tweener.clear(),this._tweener=null),this._value!=t&&(this._value=t,this.update(this._value));}),i(e,["easeLinear",function(){return this.easeLinear=h.linearNone;}]),e;}(gt),Ut=function(t){function e(){this._modalLayer=null,this._popupStack=null,this._justClosedPopups=null,this._modalWaitPane=null,this._focusedObject=null,this._tooltipWin=null,this._defaultTooltipWin=null,this._checkPopups=!1,e.__super.call(this),null==fairygui.GRoot._inst&&(fairygui.GRoot._inst=this),this.opaque=!1,this._popupStack=[],this._justClosedPopups=[],this.displayObject.once("display",this,this.__addedToStage);}
r(e,"fairygui.GRoot",gt);var i=e.prototype;return i.showWindow=function(t){this.addChild(t),t.requestFocus(),t.x>this.width?t.x=this.width-t.width:t.x+t.width<0&&(t.x=0),t.y>this.height?t.y=this.height-t.height:t.y+t.height<0&&(t.y=0),this.adjustModalLayer();},i.hideWindow=function(t){t.hide();},i.hideWindowImmediately=function(t){t.parent==this&&this.removeChild(t),this.adjustModalLayer();},i.bringToFront=function(t){var e=this.numChildren,n=NaN;for(n=null==this._modalLayer.parent||t.modal?e-1:this.getChildIndex(this._modalLayer)-1;0<=n;n--){var i=this.getChildAt(n);if(i==t)return;if(i instanceof fairygui.Window)break;}
0<=n&&this.setChildIndex(t,n);},i.showModalWait=function(t){null!=at.globalModalWaiting&&(null==this._modalWaitPane&&(this._modalWaitPane=st.createObjectFromURL(at.globalModalWaiting)),this._modalWaitPane.setSize(this.width,this.height),this._modalWaitPane.addRelation(this,24),this.addChild(this._modalWaitPane),this._modalWaitPane.text=t);},i.closeModalWait=function(){null!=this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.removeChild(this._modalWaitPane);},i.closeAllExceptModals=function(){for(var t=this._children.slice(),e=t.length,n=0;n<e;n++){var i=t[n];i instanceof fairygui.Window&&!i.modal&&i.hide();}},i.closeAllWindows=function(){for(var t=this._children.slice(),e=t.length,n=0;n<e;n++){var i=t[n];i instanceof fairygui.Window&&i.hide();}},i.getTopWindow=function(){for(var t=this.numChildren-1;0<=t;t--){var e=this.getChildAt(t);if(e instanceof fairygui.Window)return e;}
return null;},i.showPopup=function(t,e,i){if(0<this._popupStack.length){var r=this._popupStack.indexOf(t);if(-1!=r)for(var a=this._popupStack.length-1;r<=a;a--){this.removeChild(this._popupStack.pop());}}
if(this._popupStack.push(t),null!=e)for(var o=e;null!=o;){if(o.parent==this){t.sortingOrder<o.sortingOrder&&(t.sortingOrder=o.sortingOrder);break;}
o=o.parent;}
var s;this.addChild(t),this.adjustModalLayer();var l=0,u=0;e?(s=e.localToGlobal(),l=e.width,u=e.height):s=this.globalToLocal(n.stage.mouseX,n.stage.mouseY);var h=NaN,c=NaN;(h=s.x)+t.width>this.width&&(h=h+l-t.width),c=s.y+u,(null==i&&c+t.height>this.height||0==i)&&(c=s.y-t.height-1)<0&&(c=0,h+=l/2),t.x=h,t.y=c;},i.togglePopup=function(t,e,n){-1==this._justClosedPopups.indexOf(t)&&this.showPopup(t,e,n);},i.hidePopup=function(t){if(null!=t){var e=this._popupStack.indexOf(t);if(-1!=e)for(var n=this._popupStack.length-1;e<=n;n--){this.closePopup(this._popupStack.pop());}}else{for(n=this._popupStack.length-1;0<=n;n--){this.closePopup(this._popupStack[n]);}
this._popupStack.length=0;}},i.closePopup=function(t){null!=t.parent&&(t instanceof fairygui.Window?t.hide():this.removeChild(t));},i.showTooltips=function(t){if(null==this._defaultTooltipWin){var e=at.tooltipsWin;if(!e)return void g.print("UIConfig.tooltipsWin not defined");this._defaultTooltipWin=st.createObjectFromURL(e);}
this._defaultTooltipWin.text=t,this.showTooltipsWin(this._defaultTooltipWin);},i.showTooltipsWin=function(t,e){this.hideTooltips(),this._tooltipWin=t;var i=0,r=0;r=null==e?(i=n.stage.mouseX+10,n.stage.mouseY+20):(i=e.x,e.y);var a=this.globalToLocal(i,r);i=a.x,r=a.y,i+this._tooltipWin.width>this.width&&(i=i-this._tooltipWin.width-1)<0&&(i=10),r+this._tooltipWin.height>this.height&&(r=r-this._tooltipWin.height-1,0<i-this._tooltipWin.width-1&&(i=i-this._tooltipWin.width-1),r<0&&(r=10)),this._tooltipWin.x=i,this._tooltipWin.y=r,this.addChild(this._tooltipWin);},i.hideTooltips=function(){null!=this._tooltipWin&&(this._tooltipWin.parent&&this.removeChild(this._tooltipWin),this._tooltipWin=null);},i.getObjectUnderPoint=function(t,e){return null;},i.setFocus=function(t){this._focusedObject!=t&&(this._focusedObject=t,this.displayObject.event("fui_focus_changed"));},i.playOneShotSound=function(t,e){void 0===e&&(e=1),ut.startsWith(t,"ui://")||x.playSound(t);},i.adjustModalLayer=function(){var t=this.numChildren;null!=this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.setChildIndex(this._modalWaitPane,t-1);for(var e=t-1;0<=e;e--){var n=this.getChildAt(e);if(n instanceof fairygui.Window&&n.modal)return void(null==this._modalLayer.parent?this.addChildAt(this._modalLayer,e):this.setChildIndexBefore(this._modalLayer,e));}
null!=this._modalLayer.parent&&this.removeChild(this._modalLayer);},i.__addedToStage=function(){n.stage.on("mousedown",this,this.__stageMouseDown),n.stage.on("mouseup",this,this.__stageMouseUp),this._modalLayer=new St(),this._modalLayer.setSize(this.width,this.height),this._modalLayer.drawRect(0,null,at.modalLayerColor),this._modalLayer.addRelation(this,24),this.displayObject.stage.on("resize",this,this.__winResize),this.__winResize();},i.checkPopups=function(t){if(!this._checkPopups&&(this._checkPopups=!0,(this._justClosedPopups.length=0)<this._popupStack.length)){for(var e=t;e!=this.displayObject.stage&&null!=e;){if(e.$owner){var n=this._popupStack.indexOf(e.$owner);if(-1!=n){for(var i=this._popupStack.length-1;n<i;i--){var r=this._popupStack.pop();this.closePopup(r),this._justClosedPopups.push(r);}
return;}}
e=e.parent;}
for(i=this._popupStack.length-1;0<=i;i--){r=this._popupStack[i],this.closePopup(r),this._justClosedPopups.push(r);}
this._popupStack.length=0;}},i.__stageMouseDown=function(t){for(var e=t.target;e!=this.displayObject.stage&&null!=e;){if(e.$owner){var n=e.$owner;if(n.touchable&&n.focusable){this.setFocus(n);break;}}
e=e.parent;}
null!=this._tooltipWin&&this.hideTooltips(),this.checkPopups(t.target);},i.__stageMouseUp=function(){this._checkPopups=!1;},i.__winResize=function(){this.setSize(n.stage.width,n.stage.height);},a(0,i,"focus",function(){return this._focusedObject&&!this._focusedObject.onStage&&(this._focusedObject=null),this._focusedObject;},function(t){if(t&&(!t.focusable||!t.onStage))throw "invalid focus target";this.setFocus(t);}),a(0,i,"hasAnyPopup",function(){return 0!=this._popupStack.length;}),a(0,i,"modalLayer",function(){return this._modalLayer;}),a(0,i,"hasModalWindow",function(){return null!=this._modalLayer.parent;}),a(0,i,"modalWaiting",function(){return this._modalWaitPane&&this._modalWaitPane.inContainer;}),a(0,i,"volumeScale",function(){return x.soundVolume;},function(t){x.soundVolume=t;}),a(1,e,"inst",function(){return null==fairygui.GRoot._inst&&new e(),fairygui.GRoot._inst;},fairygui.GComponent._$SET_inst),e._inst=null,e;}(),Gt=function(t){function e(){this.input=null,e.__super.call(this);}
r(e,"fairygui.GTextInput",t);var n=e.prototype;return n.createDisplayObject=function(){this._displayObject=this.input=new m(),this._displayObject.mouseEnabled=!0,this._displayObject.$owner=this;},n.handleSizeChanged=function(){this.input.size(this.width,this.height);},n.setup_beforeAdd=function(e){t.prototype.setup_beforeAdd.call(this,e);var n=e.getAttribute("Prompt");n&&(this.promptText=n),(n=e.getAttribute("maxLength"))&&(this.input.maxChars=parseInt(n)),(n=e.getAttribute("restrict"))&&(this.input.restrict=n),"true"==e.getAttribute("password")?this.password=!0:"4"==(n=e.getAttribute("keyboardType"))?this.keyboardType="number":"3"==n&&(this.keyboardType="url");},a(0,n,"bold",function(){return this.input.bold;},function(t){this.input.bold=t;}),a(0,n,"align",function(){return this.input.align;},function(t){this.input.align=t;}),a(0,n,"text",function(){return this.input.text;},function(t){this.input.text=t;}),a(0,n,"password",function(){return "password"==this.input.type;},function(t){this.input.type=t?"password":"text";}),a(0,n,"color",function(){return this.input.color;},function(t){this.input.color=t;}),a(0,n,"font",function(){return this.input.font;},function(t){this.input.font=t;}),a(0,n,"leading",function(){return this.input.leading;},function(t){this.input.leading=t;}),a(0,n,"maxLength",function(){return this.input.maxChars;},function(t){this.input.maxChars=t;}),a(0,n,"fontSize",function(){return this.input.fontSize;},function(t){this.input.fontSize=t;}),a(0,n,"valign",function(){return this.input.valign;},function(t){this.input.valign=t;}),a(0,n,"italic",function(){return this.input.italic;},function(t){this.input.italic=t;}),a(0,n,"singleLine",function(){return!this.input.multiline;},function(t){this.input.multiline=!t;}),a(0,n,"stroke",function(){return this.input.stroke;},function(t){this.input.stroke=t;}),a(0,n,"strokeColor",function(){return this.input.strokeColor;},function(t){this.input.strokeColor=t,this.updateGear(4);}),a(0,n,"keyboardType",function(){return this.input.type;},function(t){this.input.type=t;}),a(0,n,"editable",function(){return this.input.editable;},function(t){this.input.editable=t;}),a(0,n,"promptText",function(){return this.input.Prompt;},function(t){this.input.Prompt=t;}),a(0,n,"restrict",function(){return this.input.restrict;},function(t){this.input.restrict=t;}),a(0,n,"textWidth",function(){return this.input.textWidth;}),e;}(mt),Bt=function(t){function e(){this._grip=null,this._arrowButton1=null,this._arrowButton2=null,this._bar=null,this._target=null,this._vertical=!1,this._scrollPerc=0,this._fixedGripSize=!1,this._dragOffset=null,e.__super.call(this),this._dragOffset=new laya.maths.Point(),this._scrollPerc=0;}
r(e,"fairygui.GScrollBar",t);var o=e.prototype;return o.setScrollPane=function(t,e){this._target=t,this._vertical=e;},o.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),(e=ut.findChildNode(e,"ScrollBar"))&&(this._fixedGripSize="true"==e.getAttribute("fixedGripSize")),this._grip=this.getChild("grip"),this._grip?(this._bar=this.getChild("bar"),this._bar?(this._arrowButton1=this.getChild("arrow1"),this._arrowButton2=this.getChild("arrow2"),this._grip.on("mousedown",this,this.__gripMouseDown),this._arrowButton1&&this._arrowButton1.on("mousedown",this,this.__arrowButton1Click),this._arrowButton2&&this._arrowButton2.on("mousedown",this,this.__arrowButton2Click),this.on("mousedown",this,this.__barMouseDown)):g.print("需要定义bar")):g.print("需要定义grip");},o.__gripMouseDown=function(t){this._bar&&(t.stopPropagation(),n.stage.on("mousemove",this,this.__gripMouseMove),n.stage.on("mouseup",this,this.__gripMouseUp),this.globalToLocal(n.stage.mouseX,n.stage.mouseY,this._dragOffset),this._dragOffset.x-=this._grip.x,this._dragOffset.y-=this._grip.y);},o.__gripMouseMove=function(){var t=this.globalToLocal(n.stage.mouseX,n.stage.mouseY,fairygui.GScrollBar.sScrollbarHelperPoint);if(this._vertical){var e=t.y-this._dragOffset.y;this._target.setPercY((e-this._bar.y)/(this._bar.height-this._grip.height),!1);}else{var i=t.x-this._dragOffset.x;this._target.setPercX((i-this._bar.x)/(this._bar.width-this._grip.width),!1);}},o.__gripMouseUp=function(t){this._bar&&(n.stage.off("mousemove",this,this.__gripMouseMove),n.stage.off("mouseup",this,this.__gripMouseUp));},o.__arrowButton1Click=function(t){t.stopPropagation(),this._vertical?this._target.scrollUp():this._target.scrollLeft();},o.__arrowButton2Click=function(t){t.stopPropagation(),this._vertical?this._target.scrollDown():this._target.scrollRight();},o.__barMouseDown=function(t){var e=this._grip.globalToLocal(n.stage.mouseX,n.stage.mouseY,fairygui.GScrollBar.sScrollbarHelperPoint);this._vertical?e.y<0?this._target.scrollUp(4):this._target.scrollDown(4):e.x<0?this._target.scrollLeft(4):this._target.scrollRight(4);},a(0,o,"displayPerc",null,function(t){this._vertical?(this._fixedGripSize||(this._grip.height=t*this._bar.height),this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc):(this._fixedGripSize||(this._grip.width=t*this._bar.width),this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc);}),a(0,o,"scrollPerc",null,function(t){this._scrollPerc=t,this._vertical?this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc:this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc;}),a(0,o,"minSize",function(){return this._vertical?(null!=this._arrowButton1?this._arrowButton1.height:0)+(null!=this._arrowButton2?this._arrowButton2.height:0):(null!=this._arrowButton1?this._arrowButton1.width:0)+(null!=this._arrowButton2?this._arrowButton2.width:0);}),i(e,["sScrollbarHelperPoint",function(){return this.sScrollbarHelperPoint=new y();}]),e;}(gt),kt=function(t){function e(){this._max=0,this._value=0,this._titleType=0,this._reverse=!1,this._titleObject=null,this._barObjectH=null,this._barObjectV=null,this._barMaxWidth=0,this._barMaxHeight=0,this._barMaxWidthDelta=0,this._barMaxHeightDelta=0,this._gripObject=null,this._clickPos=null,this._clickPercent=0,this._barStartX=0,this._barStartY=0,this.changeOnClick=!0,this.canDrag=!0,e.__super.call(this),this._titleType=0,this._value=50,this._max=100,this._clickPos=new laya.maths.Point();}
r(e,"fairygui.GSlider",t);var o=e.prototype;return o.update=function(){var t=Math.min(this._value/this._max,1);this.updateWidthPercent(t);},o.updateWidthPercent=function(t){if(this._titleObject)switch(this._titleType){case 0:this._titleObject.text=Math.round(100*t)+"%";break;case 1:this._titleObject.text=this._value+"/"+this._max;break;case 2:this._titleObject.text=""+this._value;break;case 3:this._titleObject.text=""+this._max;}
var e=this.width-this._barMaxWidthDelta,n=this.height-this._barMaxHeightDelta;this._reverse?(this._barObjectH&&(this._barObjectH.width=Math.round(e*t),this._barObjectH.x=this._barStartX+(e-this._barObjectH.width)),this._barObjectV&&(this._barObjectV.height=Math.round(n*t),this._barObjectV.y=this._barStartY+(n-this._barObjectV.height))):(this._barObjectH&&(this._barObjectH.width=Math.round(e*t)),this._barObjectV&&(this._barObjectV.height=Math.round(n*t)));},o.constructFromXML=function(e){var n;t.prototype.constructFromXML.call(this,e),(n=(e=ut.findChildNode(e,"Slider")).getAttribute("titleType"))&&(this._titleType=J.parse(n)),this._reverse="true"==e.getAttribute("reverse"),this._titleObject=this.getChild("title"),this._barObjectH=this.getChild("bar"),this._barObjectV=this.getChild("bar_v"),this._gripObject=this.getChild("grip"),this._barObjectH&&(this._barMaxWidth=this._barObjectH.width,this._barMaxWidthDelta=this.width-this._barMaxWidth,this._barStartX=this._barObjectH.x),this._barObjectV&&(this._barMaxHeight=this._barObjectV.height,this._barMaxHeightDelta=this.height-this._barMaxHeight,this._barStartY=this._barObjectV.y),this._gripObject&&this._gripObject.on("mousedown",this,this.__gripMouseDown),this.displayObject.on("mousedown",this,this.__barMouseDown);},o.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),this._barObjectH&&(this._barMaxWidth=this.width-this._barMaxWidthDelta),this._barObjectV&&(this._barMaxHeight=this.height-this._barMaxHeightDelta),this._underConstruct||this.update();},o.setup_afterAdd=function(e){t.prototype.setup_afterAdd.call(this,e),(e=ut.findChildNode(e,"Slider"))&&(this._value=parseInt(e.getAttribute("value")),this._max=parseInt(e.getAttribute("max"))),this.update();},o.__gripMouseDown=function(t){this.canDrag=!0,t.stopPropagation(),this._clickPos=this.globalToLocal(n.stage.mouseX,n.stage.mouseY),this._clickPercent=this._value/this._max,n.stage.on("mousemove",this,this.__gripMouseMove),n.stage.on("mouseup",this,this.__gripMouseUp);},o.__gripMouseMove=function(t){if(this.canDrag){var e=this.globalToLocal(n.stage.mouseX,n.stage.mouseY,fairygui.GSlider.sSilderHelperPoint),i=e.x-this._clickPos.x,r=e.y-this._clickPos.y;this._reverse&&(i=-i,r=-r);var a=NaN;1<(a=this._barObjectH?this._clickPercent+i/this._barMaxWidth:this._clickPercent+r/this._barMaxHeight)?a=1:a<0&&(a=0);var o=Math.round(this._max*a);o!=this._value&&(this._value=o,N.dispatch("fui_state_changed",this.displayObject,t)),this.updateWidthPercent(a);}},o.__gripMouseUp=function(t){n.stage.off("mousemove",this,this.__gripMouseMove),n.stage.off("mouseup",this,this.__gripMouseUp);},o.__barMouseDown=function(t){if(this.changeOnClick){var e=this._gripObject.globalToLocal(t.stageX,t.stageY,fairygui.GSlider.sSilderHelperPoint),n=this._value/this._max,i=NaN;this._barObjectH&&(i=(e.x-this._gripObject.width/2)/this._barMaxWidth),this._barObjectV&&(i=(e.y-this._gripObject.height/2)/this._barMaxHeight),this._reverse?n-=i:n+=i,1<n?n=1:n<0&&(n=0);var r=Math.round(this._max*n);r!=this._value&&(this._value=r,N.dispatch("fui_state_changed",this.displayObject,t)),this.updateWidthPercent(n);}},a(0,o,"max",function(){return this._max;},function(t){this._max!=t&&(this._max=t,this.update());}),a(0,o,"titleType",function(){return this._titleType;},function(t){this._titleType=t;}),a(0,o,"value",function(){return this._value;},function(t){this._value!=t&&(this._value=t,this.update());}),i(e,["sSilderHelperPoint",function(){return this.sSilderHelperPoint=new y();}]),e;}(gt),Ht=(function(t){function e(){this._contentPane=null,this._modalWaitPane=null,this._closeButton=null,this._dragArea=null,this._contentArea=null,this._frame=null,this._modal=!1,this._uiSources=null,this._inited=!1,this._loading=!1,this._requestingCmd=0,this.bringToFontOnClick=!1,e.__super.call(this),this.focusable=!0,this._uiSources=[],this.bringToFontOnClick=at.bringWindowToFrontOnClick,this.displayObject.on("display",this,this.__onShown),this.displayObject.on("undisplay",this,this.__onHidden),this.displayObject.on("mousedown",this,this.__mouseDown);}
r(e,"fairygui.Window",t,"Window$2");var n=e.prototype;n.addUISource=function(t){this._uiSources.push(t);},n.show=function(){Ut.inst.showWindow(this);},n.showOn=function(t){t.showWindow(this);},n.hide=function(){this.isShowing&&this.doHideAnimation();},n.hideImmediately=function(){var t=this.parent instanceof fairygui.GRoot?this.parent:null;t||(t=Ut.inst),t.hideWindowImmediately(this);},n.centerOn=function(t,e){void 0===e&&(e=!1),this.setXY(Math.round((t.width-this.width)/2),Math.round((t.height-this.height)/2)),e&&(this.addRelation(t,3),this.addRelation(t,10));},n.toggleStatus=function(){this.isTop?this.hide():this.show();},n.bringToFront=function(){this.root.bringToFront(this);},n.showModalWait=function(t){void 0===t&&(t=0),0!=t&&(this._requestingCmd=t),at.windowModalWaiting&&(this._modalWaitPane||(this._modalWaitPane=st.createObjectFromURL(at.windowModalWaiting)),this.layoutModalWaitPane(),this.addChild(this._modalWaitPane));},n.layoutModalWaitPane=function(){if(null!=this._contentArea){var t=this._frame.localToGlobal();t=this.globalToLocal(t.x,t.y,t),this._modalWaitPane.setXY(t.x+this._contentArea.x,t.y+this._contentArea.y),this._modalWaitPane.setSize(this._contentArea.width,this._contentArea.height);}else this._modalWaitPane.setSize(this.width,this.height);},n.closeModalWait=function(t){return void 0===t&&(t=0),(0==t||this._requestingCmd==t)&&(this._requestingCmd=0,this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.removeChild(this._modalWaitPane),!0);},n.init=function(){if(!this._inited&&!this._loading)if(0<this._uiSources.length){this._loading=!1;for(var t=this._uiSources.length,e=0;e<t;e++){var n=this._uiSources[e];n.loaded||(n.load(this.__uiLoadComplete,this),this._loading=!0);}
this._loading||this._init();}else this._init();},n.onInit=function(){},n.onShown=function(){},n.onHide=function(){},n.doShowAnimation=function(){this.onShown();},n.doHideAnimation=function(){this.hideImmediately();},n.__uiLoadComplete=function(){for(var t=this._uiSources.length,e=0;e<t;e++){if(!this._uiSources[e].loaded)return;}
this._loading=!1,this._init();},n._init=function(){this._inited=!0,this.onInit(),this.isShowing&&this.doShowAnimation();},n.dispose=function(){null!=this.parent&&this.hideImmediately(),t.prototype.dispose.call(this);},n.closeEventHandler=function(){this.hide();},n.__onShown=function(){this._inited?this.doShowAnimation():this.init();},n.__onHidden=function(){this.closeModalWait(),this.onHide();},n.__mouseDown=function(){this.isShowing&&this.bringToFontOnClick&&this.bringToFront();},n.__dragStart=function(t){G.cast(t.currentTarget).stopDrag(),this.startDrag();},a(0,n,"contentPane",function(){return this._contentPane;},function(t){this._contentPane!=t&&(null!=this._contentPane&&this.removeChild(this._contentPane),this._contentPane=t,null!=this._contentPane&&(this.addChild(this._contentPane),this.setSize(this._contentPane.width,this._contentPane.height),this._contentPane.addRelation(this,24),this._frame=this._contentPane.getChild("frame"),null!=this._frame&&(this.closeButton=this._frame.getChild("closeButton"),this.dragArea=this._frame.getChild("dragArea"),this.contentArea=this._frame.getChild("contentArea"))));}),a(0,n,"isShowing",function(){return null!=this.parent;}),a(0,n,"isTop",function(){return null!=this.parent&&this.parent.getChildIndex(this)==this.parent.numChildren-1;}),a(0,n,"modal",function(){return this._modal;},function(t){this._modal=t;}),a(0,n,"dragArea",function(){return this._dragArea;},function(t){this._dragArea!=t&&(null!=this._dragArea&&(this._dragArea.draggable=!1,this._dragArea.off("fui_drag_start",this,this.__dragStart)),this._dragArea=t,null!=this._dragArea&&(this._dragArea instanceof fairygui.GGraph&&this._dragArea.asGraph.drawRect(0,null,null),this._dragArea.draggable=!0,this._dragArea.on("fui_drag_start",this,this.__dragStart)));}),a(0,n,"frame",function(){return this._frame;}),a(0,n,"closeButton",function(){return this._closeButton;},function(t){null!=this._closeButton&&this._closeButton.offClick(this,this.closeEventHandler),this._closeButton=t,null!=this._closeButton&&this._closeButton.onClick(this,this.closeEventHandler);}),a(0,n,"contentArea",function(){return this._contentArea;},function(t){this._contentArea=t;}),a(0,n,"modalWaiting",function(){return this._modalWaitPane&&null!=this._modalWaitPane.parent;});}(gt),function(t){function e(){this._tex=null,this._scaleByTile=!1,this._scale9Grid=null,this._tileGridIndice=0,this._textureScaleX=0,this._textureScaleY=0,this._needRebuild=!1,e.__super.call(this),this.mouseEnabled=!1,this._textureScaleX=1,this._textureScaleY=1;}
r(e,"fairygui.display.Image",T,"Image$1");var i=e.prototype;return i.scaleTexture=function(t,e){this._textureScaleX==t&&this._textureScaleY==e||(this._textureScaleX=t,this._textureScaleY=e,this._tex&&this.size(this._tex.width*t,this._tex.height*e),this.markChanged());},i.markChanged=function(){this._needRebuild||(this._needRebuild=!0,n.timer.callLater(this,this.rebuild));},i.rebuild=function(){this._needRebuild=!1;var t=this.graphics;if(t.clear(),null!=this._tex){var e=this.width,n=this.height,i=this._tex.width,r=this._tex.height;if(0!=e&&0!=n){if(this._scaleByTile)t.fillTexture(this._tex,0,0,e,n);else if(null!=this._scale9Grid){var a=this._scale9Grid.x,o=Math.max(i-this._scale9Grid.right,0),s=this._scale9Grid.y,l=Math.max(r-this._scale9Grid.bottom,0),u=NaN;l=n>=r-this._scale9Grid.height?(s=this._scale9Grid.y,r-this._scale9Grid.bottom):(u=n*(u=this._scale9Grid.y/(r-this._scale9Grid.bottom))/(1+u),s=Math.round(u),n-u),o=e>=i-this._scale9Grid.width?(a=this._scale9Grid.x,i-this._scale9Grid.right):(u=e*(u=this._scale9Grid.x/(i-this._scale9Grid.right))/(1+u),a=Math.round(u),e-u);var h=Math.max(e-a-o,0),c=Math.max(n-s-l,0);a&&s&&t.drawTexture(fairygui.display.Image.getTexture(this._tex,0,0,a,s),0,0,a,s),o&&s&&t.drawTexture(fairygui.display.Image.getTexture(this._tex,i-o,0,o,s),e-o,0,o,s),a&&l&&t.drawTexture(fairygui.display.Image.getTexture(this._tex,0,r-l,a,l),0,n-l,a,l),o&&l&&t.drawTexture(fairygui.display.Image.getTexture(this._tex,i-o,r-l,o,l),e-o,n-l,o,l),h&&s&&this.drawTexture(0,fairygui.display.Image.getTexture(this._tex,a,0,i-a-o,s),a,0,h,s),h&&l&&this.drawTexture(1,fairygui.display.Image.getTexture(this._tex,a,r-l,i-a-o,l),a,n-l,h,l),c&&a&&this.drawTexture(2,fairygui.display.Image.getTexture(this._tex,0,s,a,r-s-l),0,s,a,c),c&&o&&this.drawTexture(3,fairygui.display.Image.getTexture(this._tex,i-o,s,o,r-s-l),e-o,s,o,c),h&&c&&this.drawTexture(4,fairygui.display.Image.getTexture(this._tex,a,s,i-a-o,r-s-l),a,s,h,c);}else t.drawTexture(this._tex,0,0,e,n);this.repaint();}else this.repaint();}else this.repaint();},i.drawTexture=function(t,e,n,i,r,a){void 0===r&&(r=0),void 0===a&&(a=0),-1==t||0==(this._tileGridIndice&1<<t)?this.graphics.drawTexture(e,n,i,r,a):this.graphics.fillTexture(e,n,i,r,a);},a(0,i,"tex",function(){return this._tex;},function(t){this._tex!=t&&(this._tex=t,this._tex?this.size(this._tex.width*this._textureScaleX,this._tex.height*this._textureScaleY):this.size(0,0),this.markChanged());}),a(0,i,"scale9Grid",function(){return this._scale9Grid;},function(t){this._scale9Grid=t,this.markChanged();}),a(0,i,"scaleByTile",function(){return this._scaleByTile;},function(t){this._scaleByTile!=t&&(this._scaleByTile=t,this.markChanged());}),a(0,i,"tileGridIndice",function(){return this._tileGridIndice;},function(t){this._tileGridIndice!=t&&(this._tileGridIndice=t,this.markChanged());}),e.getTexture=function(t,e,n,i,r){t.$GID||(t.$GID=D.getGID());var a=t.$GID+"."+e+"."+n+"."+i+"."+r,o=fairygui.display.Image._textureCache[a];return o||(o=fairygui.display.Image._textureCache[a]=b.create(t,e,n,i,r)),o;},e.clearCache=function(){fairygui.display.Image._textureCache={};},e._textureCache={},e;}()),zt=function(t){function e(){this.interval=0,this.swing=!1,this.repeatDelay=0,this.playState=null,this._$3__texture=null,this._needRebuild=!1,this._playing=!1,this._frameCount=0,this._frames=null,this._currentFrame=0,this._boundsRect=null,this._start=0,this._end=0,this._times=0,this._endAt=0,this._status=0,this._endHandler=null,e.__super.call(this),this.playState=new F(),this._playing=!0,this.mouseEnabled=!1,this.setPlaySettings(),this.on("display",this,this.__addToStage),this.on("undisplay",this,this.__removeFromStage);}
r(e,"fairygui.display.MovieClip",T,"MovieClip$1");var i=e.prototype;return i.setPlaySettings=function(t,e,n,i,r){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===n&&(n=0),void 0===i&&(i=-1),this._start=t,this._end=e,(-1==this._end||this._end>this._frameCount-1)&&(this._end=this._frameCount-1),this._times=n,this._endAt=i,-1==this._endAt&&(this._endAt=this._end),this._status=0,this._endHandler=r,this.currentFrame=t;},i.update=function(){this._playing&&0!=this._frameCount&&3!=this._status&&(this.playState.update(this),this._currentFrame!=this.playState.currentFrame&&(1==this._status?(this._currentFrame=this._start,this.playState.currentFrame=this._currentFrame,this._status=0):2==this._status?(this._currentFrame=this._endAt,this.playState.currentFrame=this._currentFrame,this._status=3,null!=this._endHandler&&this._endHandler.run()):(this._currentFrame=this.playState.currentFrame,this._currentFrame==this._end&&(0<this._times?(this._times--,0==this._times?this._status=2:this._status=1):0!=this._start&&(this._status=1))),this.setFrame(this._frames[this._currentFrame])));},i.setFrame=function(t){this.graphics.clear(),null!=t&&this.graphics.drawTexture(t.texture,t.rect.x,t.rect.y);},i.__addToStage=function(){this._playing&&n.timer.frameLoop(1,this,this.update);},i.__removeFromStage=function(){this._playing&&n.timer.clear(this,this.update);},a(0,i,"frames",function(){return this._frames;},function(t){this._frames=t,null!=this._frames?this._frameCount=this._frames.length:this._frameCount=0,(-1==this._end||this._end>this._frameCount-1)&&(this._end=this._frameCount-1),(-1==this._endAt||this._endAt>this._frameCount-1)&&(this._endAt=this._frameCount-1),(this._currentFrame<0||this._currentFrame>this._frameCount-1)&&(this._currentFrame=this._frameCount-1),0<this._frameCount?this.setFrame(this._frames[this._currentFrame]):this.setFrame(null),this.playState.rewind();}),a(0,i,"playing",function(){return this._playing;},function(t){(this._playing=t)&&null!=this.stage?n.timer.frameLoop(1,this,this.update):n.timer.clear(this,this.update);}),a(0,i,"frameCount",function(){return this._frameCount;}),a(0,i,"boundsRect",function(){return this._boundsRect;},function(t){this._boundsRect=t;}),a(0,i,"currentFrame",function(){return this._currentFrame;},function(t){this._currentFrame!=t&&(this._currentFrame=t,this.playState.currentFrame=t,this.setFrame(this._currentFrame<this._frameCount?this._frames[this._currentFrame]:null));}),e;}();n.__init([Ft,vt,yt,it,st,$,At,Tt,wt]);}(window,document,Laya),"function"==typeof window.define&&window.define.amd&&window.define("laya.core",["require","exports"],function(t,e){"use strict";for(var n in Object.defineProperty(e,"__esModule",{value:!0}),Laya){var i=Laya[n];i&&i.__isclass&&(e[n]=i);}});var PFU;!function(t){var e=function(){function t(){}
return t.GetInstance=function(){return this.instance||(this.instance=new t()),this.instance;},t.prototype.IsWeGame=function(){return true;},t.prototype.PreviewImage=function(t){this.IsWeGame()&&wx.previewImage({urls:[t]});},t.prototype.ShowShareMenu=function(){this.IsWeGame()&&wx.showShareMenu();},t.prototype.HideShareMenu=function(){this.IsWeGame()&&wx.HideShareMenu();},t.prototype.OnShareAppMessage=function(t,e,n){this.IsWeGame()&&wx.onShareAppMessage(function(){return{title:e,imageUrl:n};});},t.prototype.ShareAppMessage=function(t,e){this.IsWeGame()&&wx.shareAppMessage({title:e,success:function e(n){t(PfuSdk.SUCCESS);},fail:function e(n){t(PfuSdk.FAIL);}});},t.prototype.ShareAppMessageImage=function(t,e,n,i){this.IsWeGame()&&wx.shareAppMessage({title:e,imageUrl:n,query:i,success:function e(n){t(PfuSdk.SUCCESS),console.log("PfuSdk.SUCCESS");},fail:function e(n){t(PfuSdk.FAIL),console.log("PfuSdk.FAIL 1");}});},t.prototype.ShareGroupAppMessageImage=function(t,e,n,i,r){this.IsWeGame()&&wx.shareAppMessage({title:n,imageUrl:i,query:r});},t.prototype.GetLaunchOptionsSync=function(){if(this.IsWeGame()&&null==t._launchOptons){var e=wx.getLaunchOptionsSync();t._launchOptons=e,console.log("scene:"+e.scene),console.log("query:"+e.query),console.log("isSticky:"+e.isSticky),console.log("shareTicket:"+e.shareTicket),console.log("referrerInfo"+e.referrerInfo);}
return t._launchOptons;},t.prototype.GetAdAid=function(){var t=this.GetLaunchOptionsSync();if(t.query&&t.query.weixinadinfo){var e=t.query.weixinadinfo.split(".")[0];return console.log("来源广告的广告id是:"+e),e;}
return null;},t.prototype.OnAppHide=function(t){this.IsWeGame()&&wx.onHide(t);},t.prototype.OnAppShow=function(t){this.IsWeGame()&&wx.onShow(t);},t.prototype.SetTicketShareTicket=function(t,e){this.IsWeGame()?wx.updateShareMenu({withShareTicket:t,complete:function t(n){e();}}):e();},t.prototype.NavigateToMiniProgram=function(t,e,n,i){this.IsWeGame()&&wx.navigateToMiniProgram({appId:n,path:i,envVersion:"release",success:function n(r){e.call(t,i),console.log("success"+r);},fail:function n(r){e.call(t,i),console.log("fail"+r);}});},t.prototype.IsNavigateToMiniVersion=function(){return!(!this.IsWeGame()||"function"!=typeof wx.navigateToMiniProgram);},t.prototype.LoadSubpackage=function(t,e,n){if(this.IsWeGame()){if("function"==typeof wx.loadSubpackage)__webpack_require__(23),setTimeout(function(){e(PfuSdk.SUCCESS);},0);else e(PfuSdk.SUCCESS);}else e(PfuSdk.SUCCESS);},t.prototype.GetSystemInfoSync=function(){return this.IsWeGame()?wx.getSystemInfoSync():null;},t.prototype.GetBenchmarkLevel=function(){return this.IsWeGame()?this.GetSystemInfoSync().benchmarkLevel:-99;},t.prototype.ShowSingleModal=function(t,e,n){wx.showModal({title:t,content:e,showCancel:!1,success:function t(){n();}});},t.prototype.SetUpdateApp=function(){if(this.IsWeGame()){var t=wx.getUpdateManager();t.onCheckForUpdate(function(t){console.log(t.hasUpdate);}),t.onUpdateReady(function(){wx.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用？",success:function e(n){n.confirm&&t.applyUpdate();}});}),t.onUpdateFailed(function(){});}},t;}();e.IN_GAME_FROM_1001=1001,e.IN_GAME_FROM_1020=1020,e.IN_GAME_FROM_1024=1024,e.IN_GAME_FROM_1035=1035,e.IN_GAME_FROM_1037=1037,e._launchOptons=null,t.WeChatUtils=e;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){function e(){this._textureSprite=null,this._texture=null;}
return e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.SetUserOnlyCloudStorage=function(n,i){var r=this;if(t.WeChatUtils.GetInstance().IsWeGame()){var a=[{key:n,value:i}];wx.setUserCloudStorage({KVDataList:a,success:function t(n){e.wxPostMessage({messageId:e.MESSAGE_ID_UPDATE_MAXSCORE},r,function(){}),console.log(n);},fail:function t(e){console.log(e);}});}},e.prototype.CallInitCanvas=function(e){if(t.WeChatUtils.GetInstance().IsWeGame()){wx.getOpenDataContext();var n=new Laya.Texture(Laya.Browser.window.sharedCanvas);n.bitmap.alwaysChange=!0;var i=new Laya.Sprite();Laya.stage.addChild(i),i.graphics.drawTexture(n,0,0,Laya.stage.desginWidth,Laya.stage.desginHeight),console.log("初始化获得离屏数据"),this._textureSprite=i,this._texture=n,this._textureSprite.visible=!1;}},e.prototype.InitSharedCanvas=function(){t.WeChatUtils.GetInstance().IsWeGame()&&e.wxPostMessage({messageId:e.MESSAGE_ID_INIT},this,this.CallInitCanvas);},e.prototype.ShowSharedCanvas=function(){if(t.WeChatUtils.GetInstance().IsWeGame()){if(null==this._textureSprite)return;this._textureSprite.visible=!0;}},e.prototype.HideShardCanvas=function(){if(t.WeChatUtils.GetInstance().IsWeGame()){if(null==this._textureSprite)return;this._textureSprite.visible=!1;}},e.prototype.ShowFriendRank=function(n){t.WeChatUtils.GetInstance().IsWeGame()&&e.wxPostMessage({messageId:e.MESSAGE_ID_DRAW_RANK,rankDrawData:n},this,function(){});},e.prototype.ShowFriedNeighbor=function(n){t.WeChatUtils.GetInstance().IsWeGame()&&e.wxPostMessage({messageId:e.MESSAGE_ID_NEIGHBOR,rankDrawData:n},this,function(){});},e.prototype.ShowUpperRank=function(n){t.WeChatUtils.GetInstance().IsWeGame()&&e.wxPostMessage({messageId:e.MESSAGE_ID_DRAWUPPER,rankDrawData:n},this,function(){});},e.wxPostMessage=function(e,n,i){if(t.WeChatUtils.GetInstance().IsWeGame()){var r=Laya.Browser.window.wx;if(void 0!=r){console.log("wxPostMessage :"+e);r.getOpenDataContext().postMessage(e),Laya.timer.once(400,this,function(){null==n||void 0==n?i(e):i.call(n,e);});}else console.log("wx=null");}},e.InitOpenDataOnMessage=function(t){wx.onMessage(function(n){console.log("zi yu:"+n),n.messageId==e.MESSAGE_ID_INIT?(console.log("初始化!成功"),t(n.messageId)):n.messageId==e.MESSAGE_ID_UPDATE_MAXSCORE?(console.log("更新最高分"),t(n.messageId)):n.messageId==e.MESSAGE_ID_DRAW_RANK?(console.log("完整好友排行"),t(n.messageId)):n.messageId==e.MESSAGE_ID_NEIGHBOR&&(console.log("绘制临近的排行"),t(n.messageId)),"filedata"==n.isLoad?laya.wx.mini.MiniFileMgr.ziyuFileData[n.url]=n.data:"filenative"==n.isLoad?n.isAdd?laya.wx.mini.MiniFileMgr.filesListObj[n.url]=n.data:delete laya.wx.mini.MiniFileMgr.filesListObj[n.url]:n.type;});},e;}();e.MESSAGE_ID_INIT=1001,e.MESSAGE_ID_UPDATE_MAXSCORE=1002,e.MESSAGE_ID_DRAW_RANK=1003,e.MESSAGE_ID_NEIGHBOR=1004,e.MESSAGE_ID_DRAWUPPER=1005,t.WeChatOpenUtils=e;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){function e(){this._isReady=!1;}
return e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.Create=function(n){var i=this;if("0"==n){var r=t.LocalSaveUtils.GetItem(e.SAVE_INCENTIVE_KEY);if(null==r||""==r)return;n=n;}else t.LocalSaveUtils.SaveItem(e.SAVE_INCENTIVE_KEY,n);"0"!=n&&(this._adId=n,t.WeChatUtils.GetInstance().IsWeGame()&&"function"==typeof wx.createBannerAd&&(this._rewardedVideoAd=wx.createRewardedVideoAd({adUnitId:n}),this._rewardedVideoAd.onLoad(function(){i._isReady=!0;}),this._rewardedVideoAd.onError(function(t){console.log("Create AD:"+t),i._playCallback&&i._playCallback.call(i._playService,PfuSdk.VIDEO_SHOW_FAIL);}),this._rewardedVideoAd.onClose(function(t){t&&t.isEnded||void 0===t?i._playCallback.call(i._playService,PfuSdk.SUCCESS):i._playCallback.call(i._playService,PfuSdk.FAIL);})));},e.prototype.IsReady=function(){return!!this._isReady&&null!=this._rewardedVideoAd&&!!t.WeChatUtils.GetInstance().IsWeGame();},e.prototype.IsRewardedReady=function(){return null!=this._rewardedVideoAd&&!!t.WeChatUtils.GetInstance().IsWeGame();},e.prototype.Show=function(t,e,n){var i=this;this._playService=t,this._playCallback=e,n&&null!=n&&""!=n?this.PlayNewVideo(n):this.IsRewardedReady()?this._rewardedVideoAd.show().catch(function(t){i._rewardedVideoAd.load().then(function(){return i._rewardedVideoAd.show().catch(function(t){i._playCallback.call(i._playService,PfuSdk.VIDEO_SHOW_FAIL);});}).catch(function(t){i._playCallback.call(i._playService,PfuSdk.VIDEO_SHOW_FAIL);});}):this._playCallback.call(this._playService,PfuSdk.FAIL);},e.prototype.PlayNewVideo=function(e){var n=this;if(t.WeChatUtils.GetInstance().IsWeGame()&&"function"==typeof wx.createBannerAd){var i=wx.createRewardedVideoAd({adUnitId:e});i.onLoad(function(){}),i.onError(function(t){console.log("video Ad = NULL"),n._playCallback.call(n._playService,PfuSdk.FAIL);}),i.onClose(function(t){t&&t.isEnded||void 0===t?n._playCallback.call(n._playService,PfuSdk.SUCCESS):n._playCallback.call(n._playService,PfuSdk.FAIL);}),this._rewardedVideoAd.show().catch(function(t){n._rewardedVideoAd.load().then(function(){return n._rewardedVideoAd.show().catch(function(t){n._playCallback.call(n._playService,PfuSdk.VIDEO_SHOW_FAIL);});}).catch(function(t){n._playCallback.call(n._playService,PfuSdk.VIDEO_SHOW_FAIL);});});}},e;}();e.SAVE_INCENTIVE_KEY="s_incentive_id",t.WeChatIncentiveAd=e;}(PFU||(PFU={}));var PFU;!function(t){var e;!function(t){t[t.DOWN_CENTER=0]="DOWN_CENTER",t[t.TOP_CENTER=1]="TOP_CENTER";}(e=t.BannerDirction||(t.BannerDirction={}));var n=function(){function n(){this._isReady=!1;}
return n.GetInstance=function(){return this.instance||(this.instance=new n()),this.instance;},n.prototype.Create=function(i,r,a){var o=this;if("0"==i){var s=t.LocalSaveUtils.GetItem(n.SAVE_BEANNER_KEY);if(null==s||""==s)return;i=i;}else t.LocalSaveUtils.SaveItem(n.SAVE_BEANNER_KEY,i);if("0"!=i){this._adId=i,this._bannerDir=r;var l=0,u=0;laya.utils.Browser.clientWidth,laya.utils.Browser.clientHeight;t.WeChatUtils.GetInstance().IsWeGame()&&"function"==typeof wx.createBannerAd&&(this._bannerAd=wx.createBannerAd({adUnitId:i,style:{left:l,top:u,width:300}}),this._bannerAd.onResize(function(t){if(o._bannerAd.style.width=t.width,o._bannerAd.style.heigth=t.heigth,r==e.DOWN_CENTER){l=(laya.utils.Browser.clientWidth-t.width)/2;var n=0;Laya.Browser.onAndroid&&(o.isQuanMian()||o.isLiuHai())&&(n=34),u=laya.utils.Browser.clientHeight-t.height-n;}
o._bannerAd.style.left=l,o._bannerAd.style.top=u;}),this._bannerAd.onError(function(t){console.log(t);}),this._bannerAd.onLoad(function(){o._isReady=!0,null!=a&&a();}));}},n.prototype.IsReadyBanner=function(){return!!t.WeChatUtils.GetInstance().IsWeGame()&&null!=this._bannerAd;},n.prototype.isQuanMian=function(){var t=laya.utils.Browser.clientWidth,e=laya.utils.Browser.clientHeight/t;return 1.789<e&&e<19/9;},n.prototype.isLiuHai=function(){var t=laya.utils.Browser.clientWidth;return laya.utils.Browser.clientHeight/t>=19/9;},n.prototype.IsAllSceneOrLiuHaiScene=function(){return!!this.isQuanMian()||!!this.isLiuHai();},n.prototype.Show=function(){this.IsReadyBanner()?this._bannerAd.show():this.Refresh(function(){});},n.prototype.Hide=function(){this.IsReadyBanner()&&this._bannerAd.hide();},n.prototype.Destroy=function(){null!=this._bannerAd&&this._bannerAd.destroy(),this._isReady=!1;},n.prototype.Refresh=function(t){this.Destroy(),this.Create(this._adId,this._bannerDir,t);},n;}();n.SAVE_BEANNER_KEY="s_banner_id",t.WeChatBannerAd=n;}(PFU||(PFU={}));var PFU;!function(t){var e={none:0,overflow:1,buffererror:2,paramerror:3,nosupport:4},n=function(){return function(t){this._cause=t;};}(),i=function(){function t(t,e){void 0===e&&(e=!1),this._iCurLength=0,this._iEndLength=t,this._bLittleEndian=e,this._arrBuffer=new ArrayBuffer(t),this._dataView=new DataView(this._arrBuffer);}
return t.prototype.avail=function(){return 0<this._iEndLength-this._iCurLength;},t.prototype.resize=function(t){if(this._iEndLength<t){this._iEndLength=t,this._arrBuffer=new ArrayBuffer(t);var e=new DataView(this._arrBuffer);this._dataView=e;}
return this;},t.prototype.clear=function(){this._iCurLength=0;},t.prototype.writeFloat32=function(t){if(!this.avail())throw new n(e.overflow);this._dataView.setFloat32(this._iCurLength,t,this._bLittleEndian),this._iCurLength+=4;},t.prototype.writeFloat64=function(t){if(!this.avail())throw new n(e.overflow);this._dataView.setFloat64(this._iCurLength,t,this._bLittleEndian),this._iCurLength+=8;},t.prototype.writeInt32=function(t){if(!this.avail())throw new n(e.overflow);this._dataView.setInt32(this._iCurLength,t,this._bLittleEndian),this._iCurLength+=4;},t.prototype.writeArray=function(t){var i=this;if(t){var r=this.writeInt8;if(t instanceof Int8Array)r=this.writeInt8;else if(t instanceof Uint8Array)r=this.writeUint8;else if(t instanceof Int16Array)r=this.writeInt16;else if(t instanceof Uint16Array)r=this.writeUint16;else if(t instanceof Int32Array)r=this.writeInt32;else if(t instanceof Uint32Array)r=this.writeUInt32;else if(t instanceof Float32Array)r=this.writeFloat32;else{if(!(t instanceof Float64Array))throw new n(e.nosupport);r=this.writeFloat64;}
t.forEach(function(t,e){r.apply(i,[t]);});}},t.prototype.writeChar=function(t){this.writeByte(t);},t.prototype.writeString=function(t){for(var e=0;e<t.length;e++){this.writeByte(t.charCodeAt(e));}},t.prototype.writeByte=function(t){this.writeInt8(t);},t.prototype.writeInt8=function(t){if(!this.avail())throw new n(e.overflow);this._dataView.setInt8(this._iCurLength,t),this._iCurLength++;},t.prototype.writeShort=function(t){this.writeInt16(t);},t.prototype.writeInt16=function(t){if(!this.avail())throw new n(e.overflow);this._dataView.setInt16(this._iCurLength,t),this._iCurLength+=2;},t.prototype.writeUInt32=function(t){if(!this.avail())throw new n(e.overflow);this._dataView.setUint32(this._iCurLength,t,this._bLittleEndian),this._iCurLength+=4;},t.prototype.writeUChar=function(t){this.writeByte(t);},t.prototype.writeUString=function(t){for(var e=0;e<t.length;e++){this.writeUByte(t.charCodeAt(e));}},t.prototype.writeUByte=function(t){this.writeUint8(t);},t.prototype.writeUint8=function(t){if(!this.avail())throw new n(e.overflow);this._dataView.setUint8(this._iCurLength,t),this._iCurLength++;},t.prototype.writeUShort=function(t){this.writeUint16(t);},t.prototype.writeUint16=function(t){if(!this.avail())throw new n(e.overflow);this._dataView.setUint16(this._iCurLength,t),this._iCurLength+=2;},t.prototype.buffer=function(){return this._arrBuffer;},t.prototype.bufferToBlob=function(){return new Blob([this._arrBuffer]);},t;}();t.Bostream=i;!function(){function t(t,i){if(void 0===i&&(i=!1),!(t&&t instanceof ArrayBuffer))throw new n(e.buffererror);this._iCurLength=0,this._iEndLength=t.byteLength,this._bLittleEndian=i,this._dataView=new DataView(t);}
t.prototype.avail=function(){return 0<this._iEndLength-this._iCurLength;},t.prototype.getAvailLength=function(){return this._iEndLength-this._iCurLength;},t.prototype.readFloat32=function(){if(this.avail()){var t=this._dataView.getFloat32(this._iCurLength,this._bLittleEndian);return this._iCurLength+=4,t;}
throw new n(e.overflow);},t.prototype.readFloat64=function(){if(this.avail()){var t=this._dataView.getFloat64(this._iCurLength,this._bLittleEndian);return this._iCurLength+=8,t;}
throw new n(e.overflow);},t.prototype.readInt32=function(){if(this.avail()){var t=this._dataView.getInt32(this._iCurLength,this._bLittleEndian);return this._iCurLength+=4,t;}
throw new n(e.overflow);},t.prototype.readUint32=function(){if(this.avail()){var t=this._dataView.getUint32(this._iCurLength,this._bLittleEndian);return this._iCurLength+=4,t;}
throw new n(e.overflow);},t.prototype.readInt8=function(){if(this.avail()){var t=this._dataView.getInt8(this._iCurLength);return this._iCurLength++,t;}
throw new n(e.overflow);},t.prototype.readUInt8=function(){if(this.avail()){var t=this._dataView.getUint8(this._iCurLength);return this._iCurLength++,t;}
throw new n(e.overflow);},t.prototype.readByte=function(){return this.readInt8();},t.prototype.readUByte=function(){return this.readUInt8();},t.prototype.readInt16=function(){if(this.avail()){var t=this._dataView.getInt16(this._iCurLength,this._bLittleEndian);return this._iCurLength+=2,t;}
throw new n(e.overflow);},t.prototype.readUint16=function(){if(this.avail()){var t=this._dataView.getUint16(this._iCurLength,this._bLittleEndian);return this._iCurLength+=2,t;}
throw new n(e.overflow);},t.prototype.readShort=function(){return this.readInt16();},t.prototype.readUShort=function(){return this.readUint16();},t.prototype.readArray=function(t,i){if(i=i||this.getAvailLength(),!t)throw new n(e.paramerror);var r;if(t==Int8Array)r=this.readInt8;else if(t==Uint8Array)r=this.readUInt8;else if(t==Int16Array)r=this.readInt16;else if(t==Uint16Array)r=this.readUint16;else if(t==Int32Array)r=this.readInt32;else if(t==Uint32Array)r=this.readUint32;else if(t==Float32Array)r=this.readFloat32;else{if(t!=Float64Array)throw new n(e.nosupport);r=this.readFloat64;}
for(var a=new t(i),o=0;o<i;o++){a[o]=r.apply(this);}
return a;};}();}(PFU||(PFU={}));var PFU;!function(t){var e=function(){function t(){}
return t.GetJsonObject=function(t){var e=Laya.LocalStorage.getJSON(t);return null!=e&&""!=e?JSON.parse(e):null;},t.SaveJsonObject=function(t,e){Laya.LocalStorage.setJSON(t,JSON.stringify(e));},t.RemoveKey=function(t){Laya.LocalStorage.removeItem(t);},t.GetItem=function(t){return Laya.LocalStorage.getItem(t);},t.SaveItem=function(t,e){Laya.LocalStorage.setItem(t,e);},t;}();t.LocalSaveUtils=e;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){function t(){this._object={},this._keys=new Array();}
return t.prototype.add=function(t,e){},t.prototype.get=function(t){},Object.defineProperty(t.prototype,"Keys",{get:function t(){return this._keys;},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function t(){return this._keys.length;},enumerable:!0,configurable:!0}),t.prototype.clear=function(){delete this._object,this._object={},this._keys.length=0;},t;}();t.IDictionary=e;}(PFU||(PFU={}));var __extends=void 0&&(void 0).__extends||function(t,e){function n(){this.constructor=t;}
for(var i in e){e.hasOwnProperty(i)&&(t[i]=e[i]);}
t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n());},PFU;!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.prototype.add=function(t,e){var n=""+t;this.has(t)||this._keys.push(t),this._object[n]=e;},e.prototype.get=function(t){if(this.has(t)){var e=""+t;return this._object[e];}
return null;},e.prototype.has=function(t){return ""+t in this._object;},e.prototype.remove=function(t){var e=""+t;this.has(t)&&delete this._object[e];var n=this._keys.indexOf(e);-1!=n&&this._keys.splice(n,1);},e.prototype.getKeyByIndex=function(t){return this._keys[t];},e.prototype.getValueByIndex=function(t){var e=this.getKeyByIndex(t);return this.get(e);},e.prototype.containsKey=function(t){return this.has(t);},e.prototype.containsValue=function(t){for(var e in this._object){if(this._object[e]==t)return!0;}
return!1;},e;}(t.IDictionary);t.Dictionary=e;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){function t(){}
return t.FormatTimeByMMSS=function(t){var e=Math.floor(t/60),n=Math.floor(t%60),i="";return i+=e<10?"0"+e:e,i+=":",i+=n<10?"0"+n:n;},t.ReplaceArray=function(t,e){for(var n=""+e,i=0;i<t.length;i++){n=n.replace("{"+i+"}",t[i]);}
return n;},t.Replace=function(e,n){return t.ReplaceArray([e],n);},t;}();t.BXStringUtils=e;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){function t(){}
return t.Get=function(){return null==this.random&&(this.random=new t()),this.random;},t.prototype.nextInt=function(t,e){return Math.floor(Math.random()*(e-t)+t);},t.prototype.nextFloat=function(t,e){return Math.random()*(e-t)+t;},t;}();e.random=null,t.BXRandom=e;var n=function(){function t(){}
return t.RandomPropIndex=function(t){for(var n=0,i=0;i<t.length;i++){n+=t[i];}
var r=e.Get().nextInt(0,n);n=0;for(i=0;i<t.length;i++){if(n+=t[i],r<n)return i;}
return-1;},t;}();t.BXRandomUtils=n;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){function e(){this._privateKey="",this.wx_userInfo=null,this._respose1003User=null,this._shareInGameHandle=null,this._shareInGameCallback=null,this._gameId="",this._isLoginPlatform=!1,this.SAVE_KEY="platform_user",this.tempAdId=null,this._reconnectCount=0;}
return e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.Init=function(){this._privateKey=t.PfuConfig.Config.privateKey,this.Load(),t.WeChatUtils.GetInstance().IsWeGame()&&""!=this._privateKey&&e.GetInstance().LoginWegame(t.PfuConfig.Config.weChatId,t.PfuConfig.Config.pfuAppId);},e.prototype.SetInGameUserHandle=function(t,e){this._shareInGameHandle=t,this._shareInGameCallback=e;},e.prototype.Load=function(){var e=t.LocalSaveUtils.GetJsonObject(this.SAVE_KEY);if(this._platformUserData=new i(),null!=e){for(var n in e._notifShareInGames.m_KeyValuePairs){a=(r=e._notifShareInGames.m_KeyValuePairs[n]).value;this._platformUserData._notifShareInGames.add(r.key,a);}
for(var n in e._userCache.m_KeyValuePairs){var r=e._userCache.m_KeyValuePairs[n],a=r.value;this._platformUserData._userCache.add(r.key,a);}}},e.prototype.Save=function(){t.LocalSaveUtils.SaveJsonObject(this.SAVE_KEY,this._platformUserData);},e.prototype.parseMsg2000=function(t){for(var e=0;e<t.items.length;e++){var n=t.items[e];this.parseShareInGame(n);}
this.Send2000To2003Msg(t);},e.prototype.parseShareInGame=function(t){for(var n=this,i=t.text.split("___"),r=0;r<i.length;r++){console.log("d:"+i[r]);}
var a=parseInt(i[2]),o=this._platformUserData._notifShareInGames.get(a);null==o&&(o=new Array(),this._platformUserData._notifShareInGames.add(a,o),console.log("新增一个pos:"+a));for(r=0;r<o.length;r++){if(o[r].senderUid==t.senderUid)return;}
o.push(t);var s=this._platformUserData._notifShareInGames.get(a);e.IS_DEBUG_LOG&&console.log("通知UI更新用户头像"+o.length+"|"+s.length),this.GetUidUserDatas(t.senderUid,function(t){n._shareInGameCallback&&n._shareInGameCallback.call(n._shareInGameHandle,t);});},e.prototype.GetShareUserList=function(t){var e=new Array();if(console.log("开始查找用户资料!"),this._platformUserData._notifShareInGames.containsKey(t)){var n=this._platformUserData._notifShareInGames.get(t);console.log("拥有"+n.length+"个用户");for(var i=0;i<n.length;i++){console.log("userCache中有"+this._platformUserData._userCache.count+"个用户");var r=this._platformUserData._userCache.get(n[i].senderUid);r&&(console.log("确认用户头像读取完毕!"),e.push(r));}}
return e;},e.prototype.ClearShareUserList=function(t){this._platformUserData._notifShareInGames.remove(t),this.Save();},e.prototype.GetShareQuery=function(t,e){if(null==this._respose1003User)return ""+(e||"");var n=!this._respose1003User.name,i="shareUid="+this._respose1003User.uid+"&rinviteGameid="+this._gameId+"&rinvitePos="+t+"&isNew="+n;if(console.log("query1:"+i),i){var r=i+(e?"&"+e:"");return r+="&fromUid="+this._respose1003User.uid;}
var a=e?"&"+e:"";return a+="&fromUid="+this._respose1003User.uid;},e.prototype.PackageMsgUrl=function(t,n,i){var r=i?this.GetLoginUrlHead(t):this.GetUserUrlHead(t);return r+=this.GetContentAndSignAndToken(e.MD5_KEY,n),i||(r+="&p="+e.TOKEN),r;},e.prototype.GetLoginUrlHead=function(t){var n=e.LOGIN_SERVICE_URL+t+"?";return n+="sVersion="+e.S_VERSION+"&pType="+e.P_TYPE+"&";},e.prototype.GetUserUrlHead=function(t){var n=e.INFO_SERVICE_URL+t+"?";return n+="sVersion="+e.S_VERSION+"&pType="+e.P_TYPE+"&";},e.prototype.GetContentAndSignAndToken=function(t,n){var i=JSON.stringify(n);e.IS_DEBUG_LOG&&console.log("content:"+i);var r=Base64.encode(i);return "content="+r+"&sign="+md5(r+t).toLowerCase();},e.prototype.UnicodeToUtf8=function(t){var e,n,i="";for(n=0;n<t.length;n+=2){e=t[n]<<8|t[n+1],i+=String.fromCharCode(e);}
return i;},e.prototype.LoginWegame=function(t,n){this._gameId=n,wx.login({timeout:3e3,success:function n(i){console.log("::::"+i.code),e.GetInstance().LoginPlatform1003(i.code,t);}});},e.prototype.SetOnShowWxAdId=function(t){var e=t.query,n=(e.gdt_vid,e.weixinadinfo);if(n){var i=n.split(".");this.tempAdId=""+i[0];}},e.prototype.LoginPlatform1003=function(n,i){var r=this,a=new t.Platform_1003_Request();a.Channel=e.IS_DEBUG?"jfyd":"weixin",a.ext3=e.IS_DEBUG?"id":n;var o="",s="",l=t.WeChatUtils.GetInstance().GetLaunchOptionsSync();if(l){l.referrerInfo&&(o=l.referrerInfo.appId);var u=l.scene;1007!=u&&1008!=u&&1044!=u&&1096!=u||(o="share"),1005!=u&&1006!=u&&1027!=u&&1042!=u&&1053!=u||(o="search");var h=l.query,c=(h.gdt_vid,h.weixinadinfo);if(c){o="weixinad_"+c.split(".")[0];}
var _=h.shareImage;_&&""!=_&&(o="share_"+_);var f=h.fromUid;f&&""!=f&&(s=f);}
a.srcid=o,a.selfid=i,a.inviteUid=s;var d=this.PackageMsgUrl(1003,a,!0);this.HttpGet(d,this,function(n){var i=n;3==i.state?(r._respose1003User=i,e.TOKEN=md5(i.loginToken+r._privateKey).toLowerCase(),r._isLoginPlatform=!0,console.log("pfu 平台登录成功"),t.PfuConfig.Config.pfuShareProtocol==t.PfuSwitch.ON?(r.ListenMsg2000(),r.IsAuthorizeUser(function(t){t==PfuSdk.SUCCESS?(r.GetUserInfo(),console.log("已经授权")):(r.UserAuthorize(),console.log("创建授权"));})):r.ShareInGameUpdate()):console.log("pfu 平台登录失败:"+i.state);},function(){console.log("pfu 平台登录失败!");});},e.prototype.IsAuthorizeUser=function(e){t.WeChatUtils.GetInstance().IsWeGame()?wx.getSetting({success:function t(n){e(n.authSetting["scope.userInfo"]?PfuSdk.SUCCESS:PfuSdk.FAIL);},fail:function t(){e(PfuSdk.FAIL);}}):e(PfuSdk.SUCCESS);},e.prototype.UserAuthorize=function(){var e=this,n=Laya.Browser.window.wx.createUserInfoButton({type:"image",text:"",image:"",style:{left:0,top:0,width:laya.utils.Browser.width,height:laya.utils.Browser.height,backgroundColor:"#000000",color:"#ffffff"}});n.onTap(function(i){i.userInfo?(console.log("用户授权:"+i),e.wx_userInfo=i.userInfo,e.ReadyUpdateNewUser(),n.destroy()):t.WeChatUtils.GetInstance().ShowSingleModal("微信授权","同意获取个人信息才可以进行更多内容游戏，我们不会泄露用户个人信息，请放心使用。",function(){});});},e.prototype.GetUserInfo=function(){if(!t.WeChatUtils.GetInstance().IsWeGame())return this.wx_userInfo=[],this.wx_userInfo.nickName="测试",this.wx_userInfo.avatarUrl="https://wx.qlogo.cn/mmopen/vi_32/pbK4DH6IOuTf0AicCnJHIbKvDTgibmoibdJmiaucIHIuUz6WdjCicqT2dLtRibo2PyS2Lx4Yd7W5JMvcicLtlR4YTUceQ/132",void this.ReadyUpdateNewUser();wx.getUserInfo({success:function t(n){e.GetInstance().wx_userInfo=n.userInfo,e.GetInstance().ReadyUpdateNewUser();},fail:function t(e){}});},e.prototype.ReadyUpdateNewUser=function(){var t=this.wx_userInfo.nickName,e=this.wx_userInfo.avatarUrl;this.NewUserUpdate1801(t,e);},e.prototype.NewUserUpdate1801=function(e,n){var i=this,r=new t.Platform_1801_Request();r.name=e,r.picUrl=n,console.log("send1801 name:"+e);var a=this.PackageMsgUrl(1801,r,!1);this.HttpGet(a,this,function(t){var e=t;3==e.state?(console.log("更新用户信息成功!"),i.ShareInGameUpdate()):console.log("更新用户信息失败!"+e.state);},function(){console.log("更新用户信息失败!");});},e.prototype.ShareInGameUpdate=function(){var e;if(t.WeChatUtils.GetInstance().IsWeGame()&&(e=t.WeChatUtils.GetInstance().GetLaunchOptionsSync().query),e&&e.shareUid&&e.rinviteGameid&&e.rinvitePos){var n=parseInt(e.shareUid),i=parseInt(e.rinviteGameid),r=parseInt(e.rinvitePos),a=!this._respose1003User.name;n&&i&&r&&this.ShareInGameMsg1332(n,i,r,a);}},e.prototype.ShareInGameMsg1332=function(e,n,i,r){var a=new t.Platform_1332_Request();a.shareUid=e,a.rinviteGameid=n,a.rinvitePos=i,a.isNew=r;var o=this.PackageMsgUrl(1332,a);this.HttpGet(o,this,function(t){var e=t;console.log("发送分享进入数据成功!"+e.state);},function(){console.log("发送分享进入数据失败!");});},e.prototype.ListenMsg2000=function(){if(null!=this.socket)try{this.socket.cleanSocket(),this.socket.close();}catch(t){console.log(""+t);}
this.socket=new Laya.Socket(),this.socket.connectByUrl(e.SOCKET_SERVICE_URL+"msg?pType="+e.P_TYPE+"&p="+e.TOKEN),this.output=this.socket.output,this.socket.on(Laya.Event.OPEN,this,this.onSocketOpen),this.socket.on(Laya.Event.CLOSE,this,this.onSocketClose),this.socket.on(Laya.Event.MESSAGE,this,this.onMessageReveived),this.socket.on(Laya.Event.ERROR,this,this.onConnectError);},e.prototype.onSocketOpen=function(){var t=this;console.log("Connected"),this.SendHeartbeat2002Msg(),Laya.timer.loop(3e4,this,function(){t.SendHeartbeat2002Msg();}),this._reconnectCount=0;},e.prototype.SendHeartbeat2002Msg=function(){var e=new t.Platform_2002_Request();this.SendSocketMsg(e,2002);},e.prototype.Send2000To2003Msg=function(e){console.log("准备发送2003");for(var n=[],i=0;i<e.items.length;i++){var r=e.items[i].action;15!=r&&16!=r||n.push(e.items[i].time);}
if(console.log("找到"+n.length+"条需要发送的time"),n.length>0){var a=new t.Platform_2003_Request();a.timeList=n,this.SendSocketMsg(a,2003),console.log("开始发送2003");}},e.prototype.SendSocketMsg=function(e,n){var i=null,r=JSON.stringify(e),a=(i=this.stringToUint8Array(r)).length,o=8+a,s=new t.Bostream(o);s.writeInt32(a),s.writeShort(1),s.writeShort(n),s.writeArray(i),this.socket.send(s.buffer());},e.prototype.stringToUint8Array=function(t){for(var e=[],n=0,i=t.length;n<i;++n){e.push(t.charCodeAt(n));}
return new Uint8Array(e);},e.prototype.onSocketClose=function(){var t=this;console.log("Socket closed"),Laya.timer.once(1e4*this._reconnectCount,this,function(){t.ListenMsg2000();}),this._reconnectCount++,this._reconnectCount>3&&(this._reconnectCount=3);},e.prototype.onMessageReveived=function(t){var e=new DataView(t),n=0;e.getInt32(n);n+=4;e.getInt8(n);n+=1;var i=e.getInt16(n);n+=2;e.getInt16(n);n+=2,console.log("解码:"+i);var r=e.buffer.slice(n,e.byteLength);switch(i){case 2002:break;case 2e3:var a=this.ab2str(r);console.log("socket Reveived 2000:"+a),this.parseMsg2000(JSON.parse(a));break;default:var o=this.ab2str(r);console.log("socket Reveived "+i+":"+o);}
this.socket.input.clear();},e.prototype.ab2str=function(t){return String.fromCharCode.apply(null,new Uint8Array(t));},e.prototype.onConnectError=function(t){console.log("error");},e.prototype.GetUidUserDatas=function(e,n){var i=this;if(this._platformUserData._userCache.containsKey(e)){var r=this._platformUserData._userCache.get(e);n(r);}else{var a=new t.Platform_1333_Request();a.uids=""+e;var o=this.PackageMsgUrl(1333,a);this.HttpGet(o,this,function(t){var e=t;if(3==e.state){for(var r=0;r<e.infos.length;r++){i._platformUserData._userCache.add(e.infos[r].uid,e.infos[r]),n(e.infos[r]);}
console.log("获取用户数据成功!");}else console.log("获取用户数据失败!"+e.state);},function(){console.log("获取用户数据失败!");});}},e.prototype.HttpGet=function(t,n,i,r){if(t.includes("login.jfydgame.com")){setTimeout(()=>{var t=JSON.parse(Base64.decode("eyJzdGF0ZSI6MTB9"));console.log("http parse:"+JSON.stringify(t)),i.call(n,t);},100);return;}
e.IS_DEBUG_LOG&&console.log("url:"+t);var a=new Laya.HttpRequest();a.http.timeout=1e4,a.once(Laya.Event.COMPLETE,this,function(t){var e=JSON.parse(Base64.decode(t));console.log("http parse:"+JSON.stringify(e)),i.call(n,e);}),a.once(Laya.Event.ERROR,this,function(t){r.call(n,t);}),a.send(t,"","get","text");},e.prototype.StatisticsMsg2201=function(e,n){if(this._isLoginPlatform){var i=new t.Platform_2201_Request();i.type=e,i.picId=n;var r=this.PackageMsgUrl(2201,i);this.HttpGet(r,this,function(t){var e=t;console.log("上报点击量统计成功!"+e.state);},function(){console.log("上报点击量统计失败!");});}},e.prototype.StatisticsMsg2202=function(){if(this._isLoginPlatform){var e=new t.Platform_2202_Request();e.type=n.videocomplete;var i=this.PackageMsgUrl(2202,e);this.HttpGet(i,this,function(t){var e=t;console.log("上报视频播放完成成功!"+e.state);},function(){console.log("上报视频播放完成失败!");});}},e;}();e.NOTIFYY_MSG_ID="SOCKET_",e.NOTIFY_SHARE_IN_GAME="n_s_in_game",e.LOGIN_SERVICE_URL="https://login.jfydgame.com/user/",e.INFO_SERVICE_URL="https://info.jfydgame.com/user/",e.SOCKET_SERVICE_URL="wss://msg.jfydgame.com/xxl/",e.S_VERSION="1024",e.P_TYPE="2",e.MD5_KEY="60cff75d0d1e4d548d9f4bca35916b21",e.IS_DEBUG=!1,e.IS_DEBUG_LOG=!0,e.TOKEN="",t.PfuPlatformManager=e;var n,i=function(){return function(){this._notifShareInGames=new t.Dictionary(),this._userCache=new t.Dictionary();};}();!function(t){t[t.moreGame=5]="moreGame",t[t.crossGame=6]="crossGame",t[t.shareGame=8]="shareGame",t[t.videocomplete=7]="videocomplete";}(n=t.PlatformStatisticsType||(t.PlatformStatisticsType={}));}(PFU||(PFU={}));var PFU;!function(t){var e=function(){return function(){};}();t.Platform_2003_Request=e;var n=function(){return function(){};}();t.Platform_2003_Response=n;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){return function(){};}();t.Platform_2002_Request=e;var n=function(){return function(){};}();t.Platform_2002_Response=n;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){return function(){};}();t.Platform_2000_Response=e;var n=function(){return function(){};}();t.Platform_2000_resp_Data=n;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){return function(){this.sex=-1,this.level=-1,this.energy=1,this.coin=-1,this.ingot=-1,this.mapId=-1,this.pic=-1;};}();t.Platform_1801_Request=e;var n=function(){return function(){};}();t.Platform_1801_Response=n;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){return function(){};}();t.Platform_1333_Request=e;var n=function(){return function(){};}();t.Platform_1333_Response=n;var i=function(){return function(){};}();t.Platform_1333_ResData=i;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){return function(){};}();t.Platform_2201_Request=e;var n=function(){return function(){};}();t.Platform_2201_Response=n;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){return function(){};}();t.Platform_2202_Request=e;var n=function(){return function(){};}();t.Platform_2202_Response=n;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){return function(){this.rinviteGameid=1;};}();t.Platform_1332_Request=e;var n=function(){return function(){};}();t.Platform_1332_Response=n;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){return function(){this.sid=1;};}();t.Platform_1003_Request=e;var n=function(){return function(){};}();t.Platform_1003_Response=n;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){function e(){}
return e.prototype.Init=function(){this.pfuSdkTestMode=t.PfuSwitch.ON,this.pfuSdkMoreGame=t.PfuSwitch.ON,this.pfuSdkShowOpenAds=t.PfuSwitch.OFF,this.pfuSdkBoxRelive=t.PfuSwitch.OFF,this.pfuSdkShareTime=4e3,this.pfuSdkVideoShare=t.PfuSwitch.OFF,this.pfuSdkShare1="分享失败，请分享到群!",this.pfuSdkShare2="分享失败，请分享到不同的群！",this.pfuSdkRefresh=1e3,this.pfuSdkShareCount=0;},e;}();t.PfuOLParamData=e;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){function e(){this._isCreateWindow=!1,this._isLastCtrAction=!1,this._isLastShow=!0,this._indexLeft=0,this._indexRight=0,this.isSetLayerAction=!1,this.layerNum=0,this._indexLeft=0,this._indexRight=0,Laya.timer.loop(1e4,this,this.UpdateMoreGame),Laya.timer.loop(200,this,this.CheckAction);}
return e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.SetChangeHandle=function(t,e){this._changeMoreGameHandle=t,this._changeMoreGameFun=e;},e.prototype.UpdateMoreGame=function(){this._indexLeft++,this._indexLeft>=t.PfuManager.GetInstance().GetMoreGameCount(!0)&&(this._indexLeft=0),this._indexRight++,this._indexRight>=t.PfuManager.GetInstance().GetMoreGameCount(!1)&&(this._indexRight=0),null!=this._changeMoreGameHandle&&this._changeMoreGameFun.call(this._changeMoreGameHandle);},e.prototype.ShowMoreGame=function(e,n,i){t.PfuManager.GetInstance().ShowMoreGameImage(e,e?this._indexLeft:this._indexRight,n,i);},e.prototype.GetMoreGameIconUrl=function(e){return e?t.PfuManager.GetInstance().GetMoreGameLeftIconUrl(this._indexLeft):t.PfuManager.GetInstance().GetMoreGameRightIconUrl(this._indexRight);},e.prototype.SetCtrlMoreGameUI=function(t,e){this.moreGameHandle=t,this.moreGameFun=e,this._isCreateWindow=!0;},e.prototype.ShowMoreGameUI=function(){this.moreGameHandle&&this.moreGameFun.call(this.moreGameHandle,!0,this._showMoreGameType);},e.prototype.HideMoreGameUI=function(){this.moreGameHandle&&this.moreGameFun.call(this.moreGameHandle,!1,this._showMoreGameType);},e.prototype.CallShowMoreGameUI=function(t){this._isLastCtrAction=!0,this._isLastShow=!0,this._showMoreGameType=t;},e.prototype.CallHideMoreGameUI=function(){this._isLastCtrAction=!0,this._isLastShow=!1;},e.prototype.CheckAction=function(){PfuSdk.GetBoxListComplete&&PfuSdk.GetParamComplete&&this._isCreateWindow&&this._isLastCtrAction&&(this._isLastShow?this.ShowMoreGameUI():this.HideMoreGameUI(),this._isLastCtrAction=!1);},e.prototype.SetMoreGameUILayer=function(t){this.isSetLayerAction=!0,this.layerNum=t;},e.prototype.EndSetMoreGameUI=function(){this.isSetLayerAction=!1;},e;}();t.PfuMoreGameUpdate=e;}(PFU||(PFU={}));var PFU;!function(t){var e;!function(t){t[t.ON=tempFlag]="ON",t[t.OFF=!tempFlag]="OFF";}(e=t.PfuSwitch||(t.PfuSwitch={}));var n=function(){return function(){};}();t.PfuOLParamBean=n;var i=function(){function i(){this._ingameadvert=null,this._officialaccount=null,this._moregame=null,this._wechatparam=null,this._wechatAd=null,this._wechatshare=null,this._getParamComplete=!1,this._getBoxlistComplete=!1,this.moreGameLeft=new Array(),this.moreGameRight=new Array(),this.shareIndex=0,this._nextSplashAdIndex=0,this._nextGeneralAdIndex=0,this._shareFinishCount=null,this._videoForceShareDataTime=null,this._tempJumpGBRHandle=null,this._tempJumpGBRCallback=null,this._wechatparam=new n(),this._wechatparam.value=new t.PfuOLParamData(),this._wechatparam.value.Init(),this.GetShareNum();}
return i.GetInstance=function(){return this.instance||(this.instance=new i()),this.instance;},i.prototype.GetShareNum=function(){var e=t.LocalSaveUtils.GetItem("shareNumber");this.shareIndex=0,void 0!=e&&null!=e&&""!=e&&(this.shareIndex=parseInt(e));},i.prototype.SaveShareNum=function(){t.LocalSaveUtils.SaveItem("shareNumber",this.shareIndex+"");},Object.defineProperty(i.prototype,"OLParam",{get:function t(){return this._wechatparam.value;},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"MoreGame",{get:function t(){return this._moregame.adverts;},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"GetParamComplete",{get:function t(){return this._getParamComplete;},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"GetBoxListComplete",{get:function t(){return this._getBoxlistComplete;},enumerable:!0,configurable:!0}),i.prototype.Init=function(){var n=this;this.Connect(t.PfuConfig.Config.pfuAppId,t.PfuConfig.Config.version,t.PfuConfig.Config.weChatId,function(r){if(r==PfuSdk.SUCCESS){var a=n.OLParam;a.pfuSdkTestMode==e.ON&&(a.pfuSdkMoreGame=e.OFF,a.pfuSdkVideoShare=e.OFF),a.pfuSdkTestMode==e.OFF&&a.pfuSdkShowOpenAds==e.ON&&Laya.timer.once(1e3,n,function(){n.ShowSplashAd(!1);}),n._getParamComplete=!0;}
t.PfuBannerUpdate.GetInstance().CreateBanner(),t.WeChatUtils.GetInstance().ShowShareMenu(),i.GetInstance().OnShareAppMessage(function(t){}),console.log("在线参数获取成功");}),t.PfuGlobal.CreateIncentiveAd(t.PfuConfig.Config.videoId);t.PfuBoxList.GetInstance().Connect(t.PfuConfig.Config.weChatId,function(t){n._getBoxlistComplete=!0,console.log("盒子列表参数获取成功");}),this.InitVideoForceShare(),this.InitShareCountData(),t.PfuConfig.Config.checkAppUpdate==e.ON&&t.WeChatUtils.GetInstance().SetUpdateApp();},i.prototype.ShowSplashAd=function(e){t.PfuGlobal.IsMiniAppInGame()||!e&&t.PfuGlobal.IsMiniAppInGame()||t.PfuGlobal.ShowRandomSplashAd();},i.prototype.Connect=function(t,e,n,r,a){var s=this,l=new o();l.appId=t,l.version=e,l.wechatgameid=n,l.functions=void 0==a?"0":a;var u=new Laya.HttpRequest();u.http.timeout=1e4,u.once(Laya.Event.COMPLETE,this,function(t){var e=JSON.parse(Base64.decode(t));s.preaseData({}),r(PfuSdk.SUCCESS);}),u.once(Laya.Event.ERROR,this,function(t){r(PfuSdk.FAIL);}),u.on(Laya.Event.PROGRESS,this,function(){});var h=i.OL_URL+"?"+l.getContent(i.OL_KEY);setTimeout(()=>{s.preaseData({code:101,toppath:"https://com/",value:{1:{code:101,adverts:[{link:"wechatexpand/defaultappId/ingameadvert/c381964a36ada1a5c476e4b15f77f5ce.jpg",wechatgameid:"wxe74ab1ea1317685f"}]},2:{code:101,adverts:[{link:"wechatexpand/defaultappId/officialaccount/9b58a2a1c65c56868e2eee4873c832fa.png",wechatgameid:"wxe675b6aad9612c74"}]},3:{code:101,adverts:[{link:"wechatmoregame/defaultappId/e5f7118e863dd51773f6615fd30bc164.jpg",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/905b882dc5e72dd7912fd483d7c1753c.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx989199f7dc0e3a50",rank:"1"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/2dc1800b6cfef2cf64908927d26dc4b8.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"1"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/669a95bb2c1b4f640abbe8cfe5bc22ac.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"1"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/6fab71f779e6bf709f4d2798c6099ea5.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"1"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/aa626f6c23fd97738c4d2127e77a8bea.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"1"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/24928d6f6512fe50c23db66b00cb34e1.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"1"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/a2986c5f1cb1d57ddf2ee05a19992935.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"1"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/c0310c12deca62525ca35ff321c785b9.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"1"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/7f8e15573af9246c5920d82dd861105a.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"1"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/2bd7a1cda793b54e4ccae2a9db785f9e.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"1"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/ed9cd3dda62a775619c592be9d1a35b0.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"1"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/f339a9d0402ba3b5e46d4b3c2d4555bc.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"1"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/bf0bd612fb565a0ab0e0b09de98be5f5.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"2"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/fdbb2664cac4103476b8d5a334a0a23e.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx2d47467291703ec7",rank:"2"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/18b7fb24ac4aae724617998c5786d859.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"2"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/dbc5202db624eeb03c0b744ed80b320e.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx8b25b991dcc6edf6",rank:"2"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/b569b29a31fff67b92e849a97248e011.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"2"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/48aab2572a1f206d932e6902f92fd904.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"2"},{link:"wechatmoregame/defaultappId/da90b3ac8583446bf3e8ade4d5f4c4ad.jpg",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/111fd7e78648590c19b6d4292a2d2621.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx989199f7dc0e3a50",rank:"3"},{link:"wechatmoregame/defaultappId/9d9d56958d5f854e4177a6233a3edf23.jpg",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/73f69ef94ac34571d714b00a0ed30cb.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx989199f7dc0e3a50",rank:"3"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/1866a97ddce2854c2d54b5052286bee6.png",bannerLink:"wechatmoregame/defaultappId/3f33484523f4b6270aecae9389ec264b.jpg",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx716b36314be3fe89",rank:"4"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/b7dbd8d2818554f05e91f58d84f708c5.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"4"},{link:"wechatmoregame/defaultappId/cf290b652e175671e2b72d727326157a.jpg",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/16f4bd8f4b2954aa7f0fabc974053318.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx509f02441739feb0",rank:"5"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/c725ed18bf248599ecad151cae0c55f1.png",bannerLink:"wechatmoregame/defaultappId/3f33484523f4b6270aecae9389ec264b.jpg",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx989199f7dc0e3a50",rank:"6"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/e11d79ce1f235c27dee54f89fee8bba3.png",bannerLink:"wechatmoregame/defaultappId/bf455c84709cfdbe270d76d3467d7896.png",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx3b33f72ee2ec7bc1",rank:"8"},{link:"wechatmoregame/defaultappId/c14fca0bb4a9873b90375f5bbd2e1d59.jpg",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/654a00010f9ecc20c9b8112e8055f4f4.png",bannerLink:"wechatmoregame/defaultappId/eb1a279882bb61293ccabb827a6642.jpg",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx716b36314be3fe89",rank:"9"},{link:"wechatmoregame/defaultappId/57cd1249aae2d04cc3a09376771f6cf7.jpg",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/e35b820b3ef744fcdb34769e79623845.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx716b36314be3fe89",rank:"10"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/c725ed18bf248599ecad151cae0c55f1.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"10"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/1866a97ddce2854c2d54b5052286bee6.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"10"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/79d72ae8c08405aaf95a7fbb7d9bc31c.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx2d47467291703ec7",rank:"11"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/77d7401bf7e866204ca07eed52d5a76c.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx8b25b991dcc6edf6",rank:"12"},{link:"wechatmoregame/defaultappId/28cf57e481d4bcc16c818cb09aba7151.jpg",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/4101b7fcc63f24795dd55825fdee6004.png",bannerLink:"wechatmoregame/defaultappId/3f33484523f4b6270aecae9389ec264b.jpg",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx716b36314be3fe89",rank:"13"},{link:"wechatmoregame/defaultappId/d8c2443188d53818cb7f95aa3febcd76.jpg",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/3d43e99447dfbbca7065125c46f3eb7a.png",bannerLink:"wechatmoregame/defaultappId/e4603a127bd491db92a4af46c57b2a96.png",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx716b36314be3fe89",rank:"14"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/fdbb2664cac4103476b8d5a334a0a23e.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx2d47467291703ec7",rank:"14"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/aef91fb499bce37e5c244a01b2ae8e66.png",bannerLink:"wechatmoregame/defaultappId/70e99081f0d95676af42d19fa32286b6.jpg",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx99e08aff982f8dde",rank:"15"},{link:"wechatmoregame/defaultappId/e5f7118e863dd51773f6615fd30bc164.jpg",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/905b882dc5e72dd7912fd483d7c1753c.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx716b36314be3fe89",rank:"15"},{link:"wechatmoregame/defaultappId/57cd1249aae2d04cc3a09376771f6cf7.jpg",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/e35b820b3ef744fcdb34769e79623845.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"1",wxid:"wx989199f7dc0e3a50",rank:"15"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/fe1acc21394d873a13516e7436e1e7d5.png",bannerLink:"wechatmoregame/defaultappId/e73d4b2dc5c042fa38130505af647bc.jpg",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx989199f7dc0e3a50",rank:"16"},{link:"wechatmoregame/defaultappId/1f1a11edca7fa7087e8e76f2d1f8c042.jpg",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/aa7ae8c596a5b183d6208498c705d183.png",bannerLink:"wechatmoregame/defaultappId/bcef4a28efa85fbaef542dc6eb9ad2a4.jpg",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx716b36314be3fe89",rank:"17"},{link:"wechatmoregame/defaultappId/43933b9679d95a582d6dc42ead5b8a1c.jpg",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/3c46cbf89dc2d2fac0c278bc9c965c9d.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx989199f7dc0e3a50",rank:"19"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/c4d8f8e682af288934932dc461111fc.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx716b36314be3fe89",rank:"20"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/48aab2572a1f206d932e6902f92fd904.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx8b25b991dcc6edf6",rank:"21"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/18b7fb24ac4aae724617998c5786d859.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx989199f7dc0e3a50",rank:"22"},{link:"",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/2dc1800b6cfef2cf64908927d26dc4b8.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx2d47467291703ec7",rank:"22"},{link:"wechatmoregame/defaultappId/e5522f5e4af70be87cbf9c56c7302e0a.jpg",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/dc312b76226ee53706c7f23235550107.png",bannerLink:"wechatmoregame/defaultappId/3f33484523f4b6270aecae9389ec264b.jpg",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx2d47467291703ec7",rank:"29"},{link:"wechatmoregame/defaultappId/bd4c8625913c1cd653be2acd0dc069f8.jpg",wechatgameid:"",iconlink:"wechatmoregame/defaultappId/ccefcfa3766c60663ff24c9744be9d92.png",bannerLink:"",path:"",boxId:"wx3e33fef689f472b1",position:"0",wxid:"wx716b36314be3fe89",rank:"50"}]},4:{code:101,value:{ad_banner:"1",ad_video:"1",banner_swicth:"1",buttonSwitch:"1",custom_corss_show:"0",fenxiangshiwan:"0",fenxiang_number:"0",freePropCd:"0",gift:"1",helpMeWindow:"1",ingame_hongbaoduration:"40000",ingame_hongbaoshare:"5",ingame_hongbaospace:"10",ingame_huabanshare:"7",ingame_propintervalnum:"0",ingame_proptype:"2",kaiping:"0",revive_video_number:"3",share:"0",Shield:"1",show5588:"0",tryplayertime:"5",pfuSdkTestMode:"0",pfuSdkMoreGame:"1",pfuSdkShowOpenAds:"0",pfuSdkVideoShare:"1",pfuSdkBoxRelive:"wx3e33fef689f472b1",pfuSdkShareTime:"1000",pfuSdkShare1:"分享失败,请分享到群",pfuSdkShare2:"分享失败,请分享到不同群",pfuSdkShareCount:"5",pfuSdkRefresh:"300",pfuSdkBannerCount:"3",pfuSdkBannerMin:"30",pfuSdkPlayTime:"60",pfuSdkBannerRelive:"0",pfuSdkRed:"1",pfuSdkDailyTime:"3",pfuSdkMoreShare:"1",pfuSdkSorV:"1",pfuSdkShare3:"恭喜你哦！是否分享更多群？",pfuSdkBoxReliveNum:"365",pfuSdkBoxReliveIOS:"0",pfuSdkRealShare:"1",pfuSdkBannerMargin:"1",pfuSdkShareSucNum:"0",pfuSdkCustomer:"0"}},5:{code:101,value:{banner:"adunit-b5f50044c181f396",video:"adunit-9f894524bbd4b56e"}},6:{code:101,value:[{key:"2",shareLink:"wechatshare/1306148/ff4915f4fdbb1e16a0244abdd531d1b4.jpg",desc:"现在小学试卷都这么变态了么？！",content:"2"},{key:"3",shareLink:"wechatshare/1306148/e98c5b30abc41186c262cb7822784ccf.png",desc:"广场上一堆人玩漂移板，广场舞都没地跳了，盘ta！",content:"3"},{key:"4",shareLink:"wechatshare/1306148/cd5c65bdcc4de5094f579d47e3493456.png",desc:"你看到是谁给他们拍的照了吗？",content:"4"},{key:"5",shareLink:"wechatshare/1306148/41aa27d8bca8e7bbc5f36dd2e1e4482.jpg",desc:"某地惊现世界最大的滑板，刹车居然要靠这样的骚操作...",content:"5"},{key:"6",shareLink:"wechatshare/1306148/74e87c7800a20076d4bc569417f7d7f5.jpg",desc:"20岁的小姑娘玩滑板，平时活泼可爱的，上场却让人惊艳！",content:"6"},{key:"7",shareLink:"wechatshare/1306148/b418388b523b6e315e590efab2b4ca08.png",desc:"求求你别说了！蓝瘦啊",content:"7"}]}}}),r(PfuSdk.SUCCESS);},100);},i.prototype.preaseData=function(t){this._resp=t,t.code==r.succeed?this.preaseMode():console.log("erro:"+t.code);},i.prototype.preaseMode=function(){var e=this._resp;for(var n in e.value){var i=e.value[n];if(i.code==r.succeed)switch(n){case ""+a.ingameadvert:this._ingameadvert=i;break;case ""+a.officialaccount:this._officialaccount=i;break;case ""+a.moregame:if(this._moregame=i,this._moregame&&this._moregame.adverts)for(var o=0;o<this._moregame.adverts.length;o++){var s=this._moregame.adverts[o];if(Laya.Browser.onAndroid){if(!(void 0!=s.boxId&&""!=s.boxId||void 0!=s.link&&""!=s.link))continue;}else if(!(void 0!=s.wxid&&""!=s.wxid||void 0!=s.link&&""!=s.link))continue;1!=t.PfuConfig.Config.ui_moreGameType?2!=t.PfuConfig.Config.ui_moreGameType?"0"!=s.position?this.moreGameRight.push(s):this.moreGameLeft.push(s):this.moreGameRight.push(s):this.moreGameLeft.push(s);}
break;case ""+a.wechatparam:this._wechatparam=i;break;case ""+a.wechatAd:this._wechatAd=i;break;case ""+a.wechatshare:this._wechatshare=i;break;default:console.log("not Define Key:"+n);}else console.log("prease Mode ErrorCode: k="+n+"|code="+i.code);}},i.prototype.GetTopUrl=function(){return null!=this._resp?this._resp.toppath:"";},i.prototype.GetShareData=function(t){if(!this.IsExistShareData())return null;for(var e=0;e<this._wechatshare.value.length;e++){if(this._wechatshare.value[e].key==t)return this._wechatshare.value[e];}
return null;},i.prototype.IsExistShareData=function(){return null!=this._wechatshare&&null!=this._wechatshare.value&&this._wechatshare.value.length>0;},i.prototype.PfuShareNext=function(e,n,r,a,o){if(this.IsExistShareData()){var s=this._wechatshare.value[this.shareIndex];if(null!=s){var l=t.BXStringUtils.Replace(n,s.desc),u=this._resp.toppath+s.shareLink;this.IsWegameTestMode()&&(l=i.TestMode_ShareDesc,u="");var h=t.PfuPlatformManager.GetInstance().GetShareQuery(a||-999,o);console.log("query:"+h),t.PfuPlatformManager.GetInstance().StatisticsMsg2201(t.PlatformStatisticsType.shareGame,s.shareLink),t.WeChatUtils.GetInstance().ShareGroupAppMessageImage(e,r,l,u,h),this.shareIndex++,this.shareIndex>=this._wechatshare.value.length&&(this.shareIndex=0),this.SaveShareNum();}else r(PfuSdk.FAIL,"分享下标错误");}else r(PfuSdk.FAIL,"分享数据未准备好");},i.prototype.OnShareAppMessage=function(e){var n=this;if(this.IsExistShareData()){this.shareIndex++,this.shareIndex>=this._wechatshare.value.length&&(this.shareIndex=0);var r=this._wechatshare.value[this.shareIndex],a=r.desc,o=this._resp.toppath+r.shareLink;this.IsWegameTestMode()&&(a=i.TestMode_ShareDesc,o=""),t.WeChatUtils.GetInstance().OnShareAppMessage(function(t){n.OnShareAppMessage(e),n.SaveShareNum();},a,o);}},i.prototype.ShowRandomSplashAd=function(){if(this.IsExistSplashAdData()){var e=Math.floor(t.BXRandom.Get().nextInt(0,this._ingameadvert.adverts.length)),n=this._ingameadvert.adverts[e].link;t.WeChatUtils.GetInstance().PreviewImage(this._resp.toppath+n);}},i.prototype.ShowNextSplashAd=function(){if(this.IsExistSplashAdData()){var e=this._ingameadvert.adverts[this._nextSplashAdIndex].link;t.WeChatUtils.GetInstance().PreviewImage(this._resp.toppath+e),this._nextSplashAdIndex++,this._nextSplashAdIndex>=this._ingameadvert.adverts.length&&(this._nextSplashAdIndex=0);}},i.prototype.IsExistSplashAdData=function(){return null!=this._ingameadvert&&null!=this._ingameadvert.adverts&&this._ingameadvert.adverts.length>0;},i.prototype.ShowCrossGameImage=function(e,n,i){if(t.PfuPlatformManager.GetInstance().StatisticsMsg2201(t.PlatformStatisticsType.crossGame,e.link),t.PfuBoxList.GetInstance().IsMoreGameDataBeAppIdList(e.wechatGameid))t.WeChatUtils.GetInstance().NavigateToMiniProgram(this,function(){},e.wechatGameid,"");else{var r=e.qrcodelink;t.WeChatUtils.GetInstance().PreviewImage(r),i.call(n,r);}},i.prototype.ShowMoreGameImage=function(e,n,i,r){if(this.IsExistGeneralMoreGameData()){var a=e?this.moreGameLeft.length:this.moreGameRight.length;if(0!=a){(n>=a||n<0)&&(n=0);var o=e?this.moreGameLeft[n]:this.moreGameRight[n];t.PfuPlatformManager.GetInstance().StatisticsMsg2201(t.PlatformStatisticsType.moreGame,o.iconlink);var s=!1;if(t.WeChatUtils.GetInstance().IsNavigateToMiniVersion()?Laya.Browser.onAndroid?t.PfuBoxList.GetInstance().IsMoreGameDataBeAppIdList(o.wxid)?t.WeChatUtils.GetInstance().NavigateToMiniProgram(this,function(){},o.boxId,""):s=!0:t.PfuBoxList.GetInstance().IsMoreGameDataBeAppIdList(o.wxid)?t.WeChatUtils.GetInstance().NavigateToMiniProgram(this,function(){},o.wxid,""):s=!0:s=!0,s){var l=o.link;t.WeChatUtils.GetInstance().PreviewImage(this._resp.toppath+l),r.call(i,l);}}}},i.prototype.IsMoreGameLeftData=function(){return this.moreGameLeft.length>0;},i.prototype.IsMoreGameRightData=function(){return this.moreGameRight.length>0;},i.prototype.GetMoreGameLeftIconUrl=function(t){return this.IsMoreGameLeftData()?((t>=this.moreGameLeft.length||t<0)&&(t=0),this._resp.toppath+this.moreGameLeft[t].iconlink):"";},i.prototype.GetMoreGameRightIconUrl=function(t){return this.IsMoreGameRightData()?((t>=this.moreGameRight.length||t<0)&&(t=0),this._resp.toppath+this.moreGameRight[t].iconlink):"";},i.prototype.GetTotalMoreGameCount=function(){return this.IsExistGeneralMoreGameData()?this._moregame.adverts.length:0;},i.prototype.IsExistGeneralMoreGameData=function(){return null!=this._moregame&&null!=this._moregame.adverts&&this._moregame.adverts.length>0;},i.prototype.GetMoreGameCount=function(t){return t?this.moreGameLeft.length:this.moreGameRight.length;},i.prototype.CustomShowMoreGameImage=function(e,n,i){if(t.WeChatUtils.GetInstance().IsNavigateToMiniVersion())t.WeChatUtils.GetInstance().NavigateToMiniProgram(n,i,e.wechatgameid,e.path);else{var r=e.link;t.WeChatUtils.GetInstance().PreviewImage(this._resp.toppath+r),i.call(n);}},i.prototype.ShowRandomGeneralAd=function(){if(this.IsExistGeneralAdData()){var e=Math.floor(t.BXRandom.Get().nextInt(0,this._officialaccount.adverts.length)),n=this._officialaccount.adverts[e].link;t.WeChatUtils.GetInstance().PreviewImage(this._resp.toppath+n);}},i.prototype.ShowNextGeneralAd=function(){if(this.IsExistSplashAdData()){var e=this._officialaccount.adverts[this._nextGeneralAdIndex].link;t.WeChatUtils.GetInstance().PreviewImage(this._resp.toppath+e),this._nextGeneralAdIndex++,this._nextGeneralAdIndex>=this._officialaccount.adverts.length&&(this._nextGeneralAdIndex=0);}},i.prototype.IsExistGeneralAdData=function(){return null!=this._officialaccount&&null!=this._officialaccount.adverts&&this._officialaccount.adverts.length>0;},i.prototype.IsMiniAppIn=function(){var e=t.WeChatUtils.GetInstance().GetLaunchOptionsSync();if(null!=e&&e.referrerInfo){var n=e.referrerInfo.appId;return "wx5608cdb7dc533937"==n||"wxe675b6aad9612c74"==n;}
return null!=e&&(e.scene==t.WeChatUtils.IN_GAME_FROM_1020||e.scene==t.WeChatUtils.IN_GAME_FROM_1024||e.scene==t.WeChatUtils.IN_GAME_FROM_1035||e.scene==t.WeChatUtils.IN_GAME_FROM_1037);},i.prototype.GetWegameAd=function(){return null==this._wechatAd||null==this._wechatAd.value?new s():this._wechatAd.value;},i.prototype.IsWegameTestMode=function(){return null==this._wechatparam||null==this._wechatparam.value||this._wechatparam.value.pfuSdkTestMode==e.ON;},i.prototype.IsPfuSdkVideoShare=function(){return null!=this._wechatparam&&null!=this._wechatparam.value&&this._wechatparam.value.pfuSdkVideoShare==e.ON;},i.prototype.SaveShareFinishCount=function(){var t=new Date(),e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(e.getTime()+864e5);this._shareFinishCount.time=n.getTime(),Laya.LocalStorage.setJSON("shareFinishCount",JSON.stringify(this._shareFinishCount));},i.prototype.GetShareFinishCountData=function(){var e=Laya.LocalStorage.getJSON("shareFinishCount");return null!=e&&""!=e?this._shareFinishCount=JSON.parse(e):(this._shareFinishCount=new t.DataTimeCount(),this._shareFinishCount.count=0,this._shareFinishCount.time=0),this._shareFinishCount;},i.prototype.IsShareFinishCountNewDay=function(){var t=this.GetShareFinishCountData();if(0==t.time)return!0;var e=new Date(),n=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();return t.time<=n;},i.prototype.InitShareCountData=function(){this.GetShareFinishCountData(),this.IsShareFinishCountNewDay()&&(this._shareFinishCount.count=0,this.SaveShareFinishCount());},i.prototype.GetShareCount=function(){return this.IsShareFinishCountNewDay()&&(this._shareFinishCount.count=0,this.SaveShareFinishCount()),this._shareFinishCount.count;},i.prototype.AddShareCount=function(){this._shareFinishCount.count++,this.SaveShareFinishCount();},i.prototype.GetShareTimeMax=function(){return Math.min(this.GetShareCount(),3);},i.prototype.SaveVideoFoceShare=function(){var t=new Date(),e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(e.getTime()+864e5);this._videoForceShareDataTime.time=n.getTime(),Laya.LocalStorage.setJSON("forceShareFinishCount",JSON.stringify(this._videoForceShareDataTime));},i.prototype.GetVideoForceShare=function(){var e=Laya.LocalStorage.getJSON("forceShareFinishCount");return null!=e&&""!=e?this._videoForceShareDataTime=JSON.parse(e):(this._videoForceShareDataTime=new t.DataTimeCount(),this._videoForceShareDataTime.count=0,this._videoForceShareDataTime.time=0),this._videoForceShareDataTime;},i.prototype.IsNewShareCountDay=function(){var t=this.GetVideoForceShare();if(0==t.time)return!0;var e=new Date(),n=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();return t.time<=n;},i.prototype.InitVideoForceShare=function(){this.GetVideoForceShare(),this.IsNewShareCountDay()&&(this._videoForceShareDataTime.count=0,this.SaveVideoFoceShare());},i.prototype.IsVideoForceShare=function(){return this.OLParam.pfuSdkTestMode!=e.ON&&!(null==this._videoForceShareDataTime||this._videoForceShareDataTime.count>=this.OLParam.pfuSdkShareCount);},i.prototype.AddVideoForceShareFinish=function(){this._videoForceShareDataTime.count++,this._videoForceShareDataTime.count>=this.OLParam.pfuSdkShareCount&&(this._videoForceShareDataTime.count=this.OLParam.pfuSdkShareCount),this.SaveVideoFoceShare();},i.prototype.SetJumpGameBoxReliveHandle=function(t,e){this._tempJumpGBRHandle=t,this._tempJumpGBRCallback=e;},i.prototype.RespondJumpGameBoxRelive=function(t){null!=this._tempJumpGBRHandle&&(1037!=t.scene&&1038!=t.scene||t.referrerInfo&&t.referrerInfo.extraData&&(t.referrerInfo.extraData.relive&&this._tempJumpGBRCallback.call(this._tempJumpGBRHandle,PfuSdk.SUCCESS),this.SetJumpGameBoxReliveHandle(null,null)));},i.prototype.JumpGameboxForRelive=function(e,n){var i=this;if(t.WeChatUtils.GetInstance().IsWeGame()){var r="pages/index/index?pfukey="+t.PfuConfig.Config.weChatId+"&pfuRelive=true",a="wx3e33fef689f472b1";this.OLParam.pfuSdkBoxRelive&&""!=this.OLParam.pfuSdkBoxRelive&&(a=this.OLParam.pfuSdkBoxRelive),t.WeChatUtils.GetInstance().NavigateToMiniProgram(this,function(t){t==PfuSdk.SUCCESS?i.IsWegameTestMode()||i.SetJumpGameBoxReliveHandle(e,n):n.call(e,PfuSdk.FAIL);},a,r);}else n.call(e,PfuSdk.SUCCESS);},i;}();i.TestMode_ShareDesc="This game is really fun, come and experience it together!",i.OL_URL="https://wxad.jfydgame.com/jfyd_advert_wechat/",i.OL_KEY="60cff75d0d1e4d548d9f4bca35916b21",t.PfuManager=i;var r;!function(t){t[t.succeed=101]="succeed",t[t.signError=201]="signError",t[t.paramError=202]="paramError";}(r=t.PfuRespState||(t.PfuRespState={}));var a;!function(t){t[t.ingameadvert=1]="ingameadvert",t[t.officialaccount=2]="officialaccount",t[t.moregame=3]="moregame",t[t.wechatparam=4]="wechatparam",t[t.wechatAd=5]="wechatAd",t[t.wechatshare=6]="wechatshare";}(a||(a={}));var o=function(){function t(){}
return t.prototype.getContent=function(t){var e=JSON.stringify(this),n=Base64.encode(e);return "content="+n+"&sign="+md5(n+t);},t;}(),s=(function(){}(),function(){}(),function(){}(),function(){}(),function(){}(),function(){}(),function(){return function(){this.banner="0",this.video="0";};}()),l=(function(){}(),function(){return function(){};}());t.PfuMoreGameData=l;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){function e(){}
return e.ShowNextSplashAd=function(){t.PfuManager.GetInstance().ShowNextSplashAd();},e.ShowRandomSplashAd=function(){t.PfuManager.GetInstance().ShowRandomSplashAd();},e.ShowRandomGeneralAd=function(){t.PfuManager.GetInstance().ShowRandomGeneralAd();},e.ShowNextGeneralAd=function(){t.PfuManager.GetInstance().ShowNextGeneralAd();},e.IsMiniAppInGame=function(){return t.PfuManager.GetInstance().IsMiniAppIn();},e.CreateBanner=function(e,n,i){return t.WeChatBannerAd.GetInstance().Create(e,n,i);},e.ShowBanner=function(){t.WeChatBannerAd.GetInstance().Show();},e.HideBanner=function(){t.WeChatBannerAd.GetInstance().Hide();},e.RefreshBanner=function(e){t.WeChatBannerAd.GetInstance().Refresh(e);},e.IsReadyBanner=function(){return t.WeChatBannerAd.GetInstance().IsReadyBanner();},e.CreateIncentiveAd=function(e){t.WeChatIncentiveAd.GetInstance().Create(e);},e.IsIncentivAdReady=function(){return t.WeChatIncentiveAd.GetInstance().IsReady();},e.ShowIncentive=function(e,n,i){t.WeChatIncentiveAd.GetInstance().Show(e,n,i);},e.GetOLParam=function(){return t.PfuManager.GetInstance().OLParam;},e.SetFocusHandler=function(t,e){this.focusCallback=e,this.focusHandler=t;},e.Focus=function(){null!=this.focusHandler&&this.focusCallback.call(this.focusHandler,Date.now());},e.PfuShareGroupNext=function(t,e,n,i,r){this._shareHandle(t,e,n,!1,i,r);},e.PfuShareVideo=function(t,e,n,i,r){this._shareHandle(t,e,n,!0,i,r);},e._shareHandle=function(e,n,i,r,a,o){var s=this,l=Date.now();t.PfuManager.GetInstance().PfuShareNext(!1,"",n,a,o),i&&!t.PfuManager.GetInstance().IsWegameTestMode()&&this.SetFocusHandler(this,function(i){var r=parseInt(s.GetOLParam().pfuSdkShareTime);if(i-l>=r)console.log("Sharing success"),n.call(e,PfuSdk.SUCCESS,"");else{var a=t.PfuManager.GetInstance().OLParam.pfuSdkShare1;n.call(e,PfuSdk.FAIL,a);}
console.log("time:"+(i-l)+" | t:"+r),s.SetFocusHandler(null,null);});},e.GetPfuBannerData=function(){for(var e=[],n=0;n<t.PfuManager.GetInstance().MoreGame.length;n++){var i=t.PfuManager.GetInstance().MoreGame[n];null!=i.bannerLink&&e.push(i);}
return e;},e.GetTotalMoreGameCount=function(){return t.PfuManager.GetInstance().GetTotalMoreGameCount();},e.GetMoreGameIconUrl=function(e){return t.PfuManager.GetInstance().GetMoreGameLeftIconUrl(e);},e.ShowMoreGameImage=function(e,n,i){t.PfuManager.GetInstance().ShowMoreGameImage(!0,e,n,i);},e.CustomShowMoreGameImage=function(e,n,i){t.PfuManager.GetInstance().CustomShowMoreGameImage(e,n,i);},e.GetTopUrl=function(){return t.PfuManager.GetInstance().GetTopUrl();},e;}();e.focusCallback=null,e.focusHandler=null,t.PfuGlobal=e;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){function t(){}
return t.InitConfig=function(e,n){var i=[{url:"PfusdkRes/pfusdkconfig.json",type:Laya.Loader.JSON}];Laya.loader.load(i,Laya.Handler.create(this,function(){var r=Laya.loader.getRes(i[0].url);t.Config=r,n.call(e);}));},t.GetCdnPath=function(){return t.Config.cdnPath+t.Config.version+"/";},t;}();t.PfuConfig=e;var n=function(){return function(){};}();t.PfuConfigBean=n;var i=function(){return function(){this.time=0,this.count=0;};}();t.DataTimeCount=i;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){function t(){this.from=-1;}
return t.prototype.getContent=function(t){var e=JSON.stringify(this),n=Base64.encode(e);return "content="+n+"&sign="+md5(n+t);},t;}(),n=function(){return function(){this.adverts=new Array();};}(),i=function(){return function(){};}();t.PfuBoxListData=i;var r=function(){function i(){this._resp=new n();}
return i.GetInstance=function(){return this.instance||(this.instance=new i()),this.instance;},i.prototype.Connect=function(n,r){var a=this,o=new e();o.wxid=n,this._wechatId=n;var s=new Laya.HttpRequest();s.http.timeout=1e4,s.once(Laya.Event.COMPLETE,this,function(t){var e;try{e=JSON.parse(Base64.decode(t));}catch(t){e={code:undefined};}
a.preaseData(e),r(PfuSdk.SUCCESS);}),s.once(Laya.Event.ERROR,this,function(t){r(PfuSdk.FAIL);}),s.on(Laya.Event.PROGRESS,this,function(){});var l=i.OL_BOX_LIST+"?"+o.getContent(t.PfuManager.OL_KEY);s.send(l,"","get","text");},i.prototype.preaseData=function(e){e.code==t.PfuRespState.succeed?this._resp.adverts=e.adverts:console.log("erro:"+e.code);},i.prototype.GetAdverts=function(){for(var t=new Array(),e=0;e<this._resp.adverts.length;e++){var n=this._resp.adverts[e];this.IsMoreGameDataBeAppIdList(n.wechatGameid)&&t.push(n);}
return t;},i.prototype.GetMoreGameListData=function(){for(var e=new Array(),n=0;n<this._resp.adverts.length;n++){var i=this._resp.adverts[n];i.wechatGameid!=this._wechatId&&(0==t.PfuConfig.Config.ui_crossGameListType?this.IsMoreGameDataBeAppIdList(i.wechatGameid)&&e.push(i):e.push(i));}
return e;},i.prototype.IsMoreGameDataBeAppIdList=function(e){if(void 0==e||""==e)return!1;for(var n=0;n<t.PfuConfig.Config.navigateToMiniAppId.length;n++){if(t.PfuConfig.Config.navigateToMiniAppId[n]==e)return!0;}
return!1;},i;}();r.OL_BOX_LIST="",t.PfuBoxList=r;}(PFU||(PFU={}));var PFU;!function(t){var e=function(){function e(){this._timeCount=0,this._refreshBannerHandle=null,this._refreshBannerCallback=null,this._onPfuSetBannerVisible=null,this._showIndex=0,this._moreGameData=new Array(),this._isCreateBanner=!1,this._isLastCtrAction=!1,this._isLastShow=!0,Laya.timer.loop(1e3,this,this.Update),Laya.timer.loop(200,this,this.UpdateBannerAction);}
return e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.SetRefreshHandle=function(e,n,i){this._refreshBannerHandle=e,this._refreshBannerCallback=n,this._onPfuSetBannerVisible=i,this._moreGameData=t.PfuGlobal.GetPfuBannerData(),this.RefreshPfuBanner();},e.prototype.CreateBanner=function(){var e=this;this._isCreateBanner=!1,t.PfuGlobal.CreateBanner(t.PfuConfig.Config.bannerId,t.BannerDirction.DOWN_CENTER,function(){e._isCreateBanner=!0;});},e.prototype.UpdateBannerAction=function(){PfuSdk.GetParamComplete&&this._isCreateBanner&&this._isLastCtrAction&&(this._isLastShow?this.onShowBanner():this.onHideBanner(),this._isLastCtrAction=!1);},e.prototype.Update=function(){PfuSdk.GetParamComplete&&(this._timeCount+=1,this._timeCount>t.PfuGlobal.GetOLParam().pfuSdkRefresh&&(this.RefreshBanner(),this._timeCount=0));},e.prototype.IsBeBannerImg=function(){return!!(this._moreGameData&&this._moreGameData.length>0);},e.prototype.RefreshPfuBanner=function(){if(null!=this._refreshBannerHandle){if(!this.IsBeBannerImg())return;this._showIndex++,this._showIndex>=this._moreGameData.length&&(this._showIndex=0),this._refreshBannerCallback.call(this._refreshBannerHandle);}},e.prototype.RefreshBanner=function(){var e=this;this._isCreateBanner=!1,t.PfuGlobal.IsReadyBanner()&&t.PfuGlobal.RefreshBanner(function(){e._isCreateBanner=!0,e._isLastCtrAction=!0;});},e.prototype.GetPfuBannerImgUrl=function(){return this.IsBeBannerImg()?t.PfuGlobal.GetTopUrl()+this._moreGameData[this._showIndex].bannerLink:"";},e.prototype.ClickPfuBanner=function(){this.IsBeBannerImg()&&(PfuSdk.CallOnHide(),t.PfuGlobal.CustomShowMoreGameImage(this._moreGameData[this._showIndex],this,function(){PfuSdk.CallOnShow({});}));},e.prototype.CallShow=function(){this._isLastCtrAction=!0,this._isLastShow=!0;},e.prototype.CallHide=function(){this._isLastCtrAction=!0,this._isLastShow=!1;},e.prototype.onHideBanner=function(){t.PfuGlobal.HideBanner();},e.prototype.onShowBanner=function(){t.PfuGlobal.ShowBanner();},e;}();t.PfuBannerUpdate=e;}(PFU||(PFU={}));var PfuSdk=function(){function t(){}
return Object.defineProperty(t,"GetParamComplete",{get:function t(){return PFU.PfuManager.GetInstance().GetParamComplete;},enumerable:!0,configurable:!0}),Object.defineProperty(t,"GetBoxListComplete",{get:function t(){return PFU.PfuManager.GetInstance().GetBoxListComplete;},enumerable:!0,configurable:!0}),t.Init=function(){console.log("pfu sdk ver:"+this.sdk_ver),PFU.PfuConfig.InitConfig(this,function(){PFU.PfuManager.GetInstance().Init(),PFU.PfuPlatformManager.GetInstance().Init();});},t.GetCdnPath=function(){return PFU.PfuConfig.GetCdnPath();},t.GetConfig=function(){return PFU.PfuConfig.Config;},t.InitConfig=function(t,e){console.log("pfu sdk ver:"+this.sdk_ver),PFU.PfuConfig.InitConfig(this,function(){PFU.PfuManager.GetInstance().Init(),PFU.PfuPlatformManager.GetInstance().Init(),e.call(t);});},t.CallOnShow=function(t){PFU.PfuPlatformManager.GetInstance().SetOnShowWxAdId(t),PFU.PfuGlobal.Focus(),this._showCallBack&&this._showCallBack();},t.CallOnHide=function(){this._hideCallBack&&this._hideCallBack();},t.OnShow=function(t){var e=this;this._showCallBack=t,PFU.WeChatUtils.GetInstance().OnAppShow(function(t){PFU.PfuManager.GetInstance().RespondJumpGameBoxRelive(t),e.CallOnShow(t);});},t.OnHide=function(t){var e=this;this._hideCallBack=t,PFU.WeChatUtils.GetInstance().OnAppHide(function(){e.CallOnHide();});},t.IsVideoForceShare=function(){return PFU.PfuManager.GetInstance().IsVideoForceShare();},t.Share=function(t,e,n){PFU.PfuGlobal.PfuShareGroupNext(t,function(){},!1,e,n);},t.ShareAward=function(t,e,n,i){PFU.PfuGlobal.PfuShareGroupNext(t,e,!0,n,i);},t.Video=function(e,n,i,r){var a=this;this._sdkVideoShareFinish&&PFU.PfuManager.GetInstance().IsPfuSdkVideoShare()&&(void 0==r||void 0==r||r)?PFU.PfuGlobal.PfuShareVideo(this,function(r,o){r==t.SUCCESS?(a._sdkVideoShareFinish=!1,a.PlayVideo(e,n,!0,i)):n.call(e,r,o);},!0):this.PlayVideo(e,n,!1,i);},t.PlayVideo=function(e,n,i,r){var a=this;PFU.PfuGlobal.ShowIncentive(this,function(r){var o="";if(r==t.SUCCESS)console.log("video success"),PFU.PfuPlatformManager.GetInstance().StatisticsMsg2202(),a._sdkVideoShareFinish=!0,n.call(e,r,o);else if(r==t.VIDEO_SHOW_FAIL){if(console.log("video error"),PFU.PfuManager.GetInstance().IsWegameTestMode())o="There are currently no videos to Play.",n.call(e,r,o);else{if(i)return void n.call(e,t.SUCCESS,"");console.log("video error share"),a.ShareAward(a,function(i,r){console.log("video error share callback:"+i+" |"+r),i==t.SUCCESS&&(a._sdkVideoShareFinish=!0),n.call(e,i,r);});}}else console.log("video fail"),o="观看完整视频才会获得奖励",n.call(e,r,o);},r);},t.GetOLParam=function(t){var e=PFU.PfuGlobal.GetOLParam();return e[t]?e[t]:null;},t.GetOLParamInt=function(t){var e=PFU.PfuGlobal.GetOLParam();return e[t]?parseInt(e[t]):0;},t.SetOLParamInt=function(t,e){var n=PFU.PfuGlobal.GetOLParam();n[t]&&(n[t]=e);},t.SetPlatformShreUserHandle=function(t,e){PFU.PfuPlatformManager.GetInstance().SetInGameUserHandle(t,e);},t.ClearPlatformShareUserCache=function(t){PFU.PfuPlatformManager.GetInstance().ClearShareUserList(t);},t.ShowBanner=function(){PFU.PfuBannerUpdate.GetInstance().CallShow();},t.HideBanner=function(){PFU.PfuBannerUpdate.GetInstance().CallHide();},t.ShowMoreGameList=function(t){PFU.PfuMoreGameUpdate.GetInstance().CallShowMoreGameUI(t);},t.HideMoreGameList=function(){PFU.PfuMoreGameUpdate.GetInstance().CallHideMoreGameUI();},t.ShowRandomGeneralAd=function(){PFU.PfuManager.GetInstance().ShowRandomGeneralAd();},t.IsTestModel=function(){return PFU.PfuManager.GetInstance().IsWegameTestMode();},t.IsPfuSdkVideoShare=function(){return PFU.PfuManager.GetInstance().IsPfuSdkVideoShare();},t.JumpGameboxForRelive=function(t,e){PFU.PfuManager.GetInstance().JumpGameboxForRelive(t,e);},t.SetMoreGameUILayer=function(t){PFU.PfuMoreGameUpdate.GetInstance().SetMoreGameUILayer(t);},t;}();PfuSdk.SUCCESS=0,PfuSdk.FAIL=1,PfuSdk.VIDEO_SHOW_FAIL=2,PfuSdk.sdk_ver="0.0.5.9",PfuSdk.SHOW_TYPE_ALL=0,PfuSdk.SHOW_TYPE_MOREGAME=1,PfuSdk.SHOW_TYPE_BOXLIST=2,PfuSdk._sdkVideoShareFinish=!0;var PFU;!function(t){!function(e){var n=function(){function n(){}
return n.CreateUI=function(){fairygui.UIConfig.packageFileExtension="bin",pfusdkui.pfusdkuiBinder.bindAll(),Laya.stage.addChild(fairygui.GRoot.inst.displayObject),this.LoadUIData(),e.SceneMatchingUtils.WIDTH=laya.utils.Browser.width,e.SceneMatchingUtils.HEIGTH=laya.utils.Browser.height;},n.LoadUIData=function(){var t=this,e="@";"2"==Laya.version.charAt(0)&&(e="_"),Laya.loader.load([{url:"PfusdkRes/UI/fairygui/pfusdkui.bin",type:Laya.Loader.BUFFER},{url:"PfusdkRes/UI/fairygui/pfusdkui"+e+"atlas0.png",type:Laya.Loader.IMAGE}],Laya.Handler.create(this,function(){fairygui.UIPackage.addPackage("PfusdkRes/UI/fairygui/pfusdkui"),t.CreateUIWindow();}));},n.CreateUIWindow=function(){var e=new t.UI.MoreGameWindow();e.InitWindow(pfusdkui.UI_MoreGameUI.createInstance()),e.Hide();new t.UI.PfuBannerWindow().InitWindow(pfusdkui.UI_PfuBannerUI.createInstance());new t.UI.FirstSceneBoxWindow().InitWindow(pfusdkui.UI_BoxListUI.createInstance()),t.PfuMoreGameUpdate.GetInstance().SetCtrlMoreGameUI(this,function(t,n){t?e.Show(n):e.Hide();});},n;}();e.PfuSdkFairyUI=n;}(t.UI||(t.UI={}));}(PFU||(PFU={}));var PFU;!function(t){!function(e){var n=function(){function e(){}
return e.GetLogicOffsetH=function(){var t=e.WIDTH/e.DESIGN_WIDTH;return(e.HEIGTH-e.DESIGN_HEIGHT*t)/2/t;},e.GetLogicSceneBottom=function(){var t=e.GetLogicOffsetH();return e.DESIGN_HEIGHT/2+e.DESIGN_HEIGHT/2+t;},e.GetLogicSceneTop=function(){var t=e.GetLogicOffsetH();return e.DESIGN_HEIGHT/2-e.DESIGN_HEIGHT/2-t;},e.SetAlignTop=function(n){if(t.WeChatUtils.GetInstance().IsWeGame()){var i=laya.utils.Browser.onIOS&&2436==e.HEIGTH?60:0;n.y=e.GetLogicSceneTop()+i+n.y;}},e.SetAlignBottom=function(n){if(t.WeChatUtils.GetInstance().IsWeGame()){var i=e.DESIGN_HEIGHT-n.y;laya.utils.Browser.onIOS&&2436==e.HEIGTH?i+=64:Laya.Browser.onAndroid&&t.WeChatBannerAd.GetInstance().IsAllSceneOrLiuHaiScene()&&(i+=64),n.y=e.GetLogicSceneBottom()-i;}},e;}();n.DESIGN_WIDTH=750,n.DESIGN_HEIGHT=1334,e.SceneMatchingUtils=n;}(t.UI||(t.UI={}));}(PFU||(PFU={}));var pfusdkui;!function(t){var e=function(){function e(){}
return e.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(t.UI_PfuBannerUI.URL,t.UI_PfuBannerUI),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_BoxListUI.URL,t.UI_BoxListUI),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_List_Child.URL,t.UI_List_Child),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_BtnEnter.URL,t.UI_BtnEnter),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_BtnClose.URL,t.UI_BtnClose),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_BannerImg.URL,t.UI_BannerImg),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_MoreGameUI.URL,t.UI_MoreGameUI),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_BtnMoregame.URL,t.UI_BtnMoregame),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_List_GameChild.URL,t.UI_List_GameChild);},e;}();t.pfusdkuiBinder=e;}(pfusdkui||(pfusdkui={}));var __extends=void 0&&(void 0).__extends||function(t,e){function n(){this.constructor=t;}
for(var i in e){e.hasOwnProperty(i)&&(t[i]=e[i]);}
t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n());},pfusdkui;!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("pfusdkui","BannerImg");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_icon=this.getChildAt(0);},e;}(fairygui.GComponent);e.URL="ui://xcy52l6510sdc9",t.UI_BannerImg=e;}(pfusdkui||(pfusdkui={}));var __extends=void 0&&(void 0).__extends||function(t,e){function n(){this.constructor=t;}
for(var i in e){e.hasOwnProperty(i)&&(t[i]=e[i]);}
t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n());},pfusdkui;!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("pfusdkui","BoxListUI");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_n10=this.getChildAt(0),this.m_n2=this.getChildAt(1),this.m_n1=this.getChildAt(2),this.m_n3=this.getChildAt(3),this.m_List_game=this.getChildAt(4),this.m_Btn_close=this.getChildAt(5),this.m_Img_banner=this.getChildAt(6);},e;}(fairygui.GComponent);e.URL="ui://xcy52l6510sdc1",t.UI_BoxListUI=e;}(pfusdkui||(pfusdkui={}));var __extends=void 0&&(void 0).__extends||function(t,e){function n(){this.constructor=t;}
for(var i in e){e.hasOwnProperty(i)&&(t[i]=e[i]);}
t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n());},pfusdkui;!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("pfusdkui","BtnClose");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_button=this.getControllerAt(0),this.m_anniu_1=this.getChildAt(0),this.m_toSmall=this.getTransitionAt(0),this.m_toNormal=this.getTransitionAt(1),this.m_tishi=this.getTransitionAt(2);},e;}(fairygui.GButton);e.URL="ui://xcy52l6510sdc7",t.UI_BtnClose=e;}(pfusdkui||(pfusdkui={}));var __extends=void 0&&(void 0).__extends||function(t,e){function n(){this.constructor=t;}
for(var i in e){e.hasOwnProperty(i)&&(t[i]=e[i]);}
t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n());},pfusdkui;!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("pfusdkui","BtnEnter");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_button=this.getControllerAt(0),this.m_anniu_1=this.getChildAt(0),this.m_title=this.getChildAt(1),this.m_toSmall=this.getTransitionAt(0),this.m_toNormal=this.getTransitionAt(1),this.m_tishi=this.getTransitionAt(2);},e;}(fairygui.GButton);e.URL="ui://xcy52l6510sdc5",t.UI_BtnEnter=e;}(pfusdkui||(pfusdkui={}));var __extends=void 0&&(void 0).__extends||function(t,e){function n(){this.constructor=t;}
for(var i in e){e.hasOwnProperty(i)&&(t[i]=e[i]);}
t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n());},pfusdkui;!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("pfusdkui","BtnMoregame");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_button=this.getControllerAt(0),this.m_icon=this.getChildAt(0),this.m_toSmall=this.getTransitionAt(0),this.m_toNormal=this.getTransitionAt(1);},e;}(fairygui.GButton);e.URL="ui://xcy52l6510sdcg",t.UI_BtnMoregame=e;}(pfusdkui||(pfusdkui={}));var __extends=void 0&&(void 0).__extends||function(t,e){function n(){this.constructor=t;}
for(var i in e){e.hasOwnProperty(i)&&(t[i]=e[i]);}
t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n());},pfusdkui;!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("pfusdkui","List_Child");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_n0=this.getChildAt(0),this.m_n7=this.getChildAt(1),this.m_Text_name=this.getChildAt(2),this.m_Text_message=this.getChildAt(3),this.m_icon=this.getChildAt(4),this.m_1=this.getChildAt(5),this.m_Text_name2=this.getChildAt(6),this.m_btn_start=this.getChildAt(7);},e;}(fairygui.GComponent);e.URL="ui://xcy52l6510sdc4",t.UI_List_Child=e;}(pfusdkui||(pfusdkui={}));var __extends=void 0&&(void 0).__extends||function(t,e){function n(){this.constructor=t;}
for(var i in e){e.hasOwnProperty(i)&&(t[i]=e[i]);}
t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n());},pfusdkui;!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("pfusdkui","List_GameChild");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_icon=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2);},e;}(fairygui.GComponent);e.URL="ui://xcy52l656o1rci",t.UI_List_GameChild=e;}(pfusdkui||(pfusdkui={}));var __extends=void 0&&(void 0).__extends||function(t,e){function n(){this.constructor=t;}
for(var i in e){e.hasOwnProperty(i)&&(t[i]=e[i]);}
t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n());},pfusdkui;!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("pfusdkui","MoreGameUI");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_list_moregamebg=this.getChildAt(0),this.m_list_moregame=this.getChildAt(1),this.m_list_moregameStr=this.getChildAt(2),this.m_boxList=this.getChildAt(3),this.m_Btn_MoreGameLeft=this.getChildAt(4),this.m_Btn_MoreGameRight=this.getChildAt(5);},e;}(fairygui.GComponent);e.URL="ui://xcy52l6510sdcb",t.UI_MoreGameUI=e;}(pfusdkui||(pfusdkui={}));var __extends=void 0&&(void 0).__extends||function(t,e){function n(){this.constructor=t;}
for(var i in e){e.hasOwnProperty(i)&&(t[i]=e[i]);}
t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n());},pfusdkui;!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("pfusdkui","PfuBannerUI");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_loader=this.getChildAt(0);},e;}(fairygui.GComponent);e.URL="ui://xcy52l6510sdc0",t.UI_PfuBannerUI=e;}(pfusdkui||(pfusdkui={}));var PFU;!function(t){!function(t){var e=function(){function t(){}
return t.prototype.InitWindow=function(t){this._obj=t,t.center(!0),fairygui.GRoot.inst.addChild(t),t.sortingOrder=1e4,this.Show(),this.OnStart();},t.prototype.OnStart=function(){},t.prototype.OnUpdate=function(){},t.prototype.Show=function(t){this._obj.visible=!0,Laya.timer.frameLoop(1,this,this.OnUpdate);},t.prototype.Hide=function(){this._obj.visible=!1,Laya.timer.clearAll(this);},t;}();t.WindowBase=e;}(t.UI||(t.UI={}));}(PFU||(PFU={}));var __extends=void 0&&(void 0).__extends||function(t,e){function n(){this.constructor=t;}
for(var i in e){e.hasOwnProperty(i)&&(t[i]=e[i]);}
t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n());},PFU;!function(t){!function(e){var n=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._bannerGame=new Array(),t;}
return __extends(n,e),n.prototype.InitWindow=function(t){this._fui=t,e.prototype.InitWindow.call(this,t);},n.prototype.OnStart=function(){this._fui.visible=!1,this.CheckShow(),Laya.timer.loop(200,this,this.CheckShow),PfuSdk.HideBanner();},n.prototype.OnUpdate=function(){},n.prototype.CheckShow=function(){PfuSdk.GetParamComplete&&PfuSdk.GetBoxListComplete&&(t.PfuManager.GetInstance().IsWegameTestMode()||2!=t.PfuGlobal.GetOLParam().pfuSdkShowOpenAds?this.Hide():this.CreateList(),Laya.timer.clear(this,this.CheckShow));},n.prototype.CreateList=function(){this._fui.m_Btn_close.onClick(this,this.OnClickClose);for(var e=t.PfuBoxList.GetInstance().GetAdverts(),n=0;n<e.length;n++){var i=e[n];i.bannerlink&&""!=i.bannerlink&&this._bannerGame.push(i);}
for(n=0;n<this._bannerGame.length;n++){(r=this._fui.m_Img_banner.addItemFromPool(pfusdkui.UI_BannerImg.URL)).m_icon.icon=this._bannerGame[n].bannerlink,r.onClick(this,this.OnClickItem,[this._bannerGame[n]]);}
for(n=0;n<e.length;n++){var r=this._fui.m_List_game.addItemFromPool(pfusdkui.UI_List_Child.URL),a=e[n];r.m_icon.icon=a.link,r.m_Text_name.text=a.gameName,r.m_Text_message.text=a.desc;var o=(0==n?30:0)+2*(e.length-n),s=(0==n?30:10)+8*(e.length-n);r.m_Text_name2.text=t.BXRandom.Get().nextInt(o,s)+"万",r.m_btn_start.onClick(this,this.OnClickItem,[a]);}
this._fui.visible=!0;},n.prototype.OnClickClose=function(){this.Hide();},n.prototype.OnClickItem=function(e,n){e.wechatGameid!=t.PfuConfig.Config.weChatId?t.PfuManager.GetInstance().ShowCrossGameImage(e,this,function(){}):this.OnClickClose();},n;}(e.WindowBase);e.FirstSceneBoxWindow=n;}(t.UI||(t.UI={}));}(PFU||(PFU={}));var __extends=void 0&&(void 0).__extends||function(t,e){function n(){this.constructor=t;}
for(var i in e){e.hasOwnProperty(i)&&(t[i]=e[i]);}
t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n());},PFU;!function(t){!function(e){var n=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t._isCreateSideMoreGameBtn=!1,t._isCreateMoreGameListBar=!1,t.isMoveLeft=!0,t;}
return __extends(i,n),i.prototype.InitWindow=function(t){this._fui=t,n.prototype.InitWindow.call(this,t);},i.prototype.OnStart=function(){e.SceneMatchingUtils.SetAlignBottom(this._fui.m_boxList);},i.prototype.OnUpdate=function(){t.PfuConfig.Config&&!this._isCreateSideMoreGameBtn&&PfuSdk.GetParamComplete&&t.PfuConfig.Config&&(this.CreateSideMoreGameBtn(),this._isCreateSideMoreGameBtn=!0),t.PfuConfig.Config&&!this._isCreateMoreGameListBar&&PfuSdk.GetBoxListComplete&&(-1!=t.PfuConfig.Config.ui_crossGameListType&&this.CreateMoreGameList(),this._isCreateMoreGameListBar=!0),this._isCreateMoreGameListBar&&this.UpdateMoreGameListMove();},i.prototype.CreateSideMoreGameBtn=function(){var e=this;this._fui.m_Btn_MoreGameLeft.onClick(this,this.ClickMoreGame,[!0]),this._fui.m_Btn_MoreGameRight.onClick(this,this.ClickMoreGame,[!1]),this.RefreshMoreGameIcon(),t.PfuMoreGameUpdate.GetInstance().SetChangeHandle(this,function(){e.RefreshMoreGameIcon();}),this.Refresh();},i.prototype.HideMoreGameLeftRight=function(){this._fui.m_Btn_MoreGameRight.visible=!1,this._fui.m_Btn_MoreGameLeft.visible=!1;},i.prototype.RefreshMoreGameVisible=function(){t.PfuConfig.Config&&(1==t.PfuConfig.Config.ui_moreGameType?this._fui.m_Btn_MoreGameRight.visible=!1:2==t.PfuConfig.Config.ui_moreGameType&&(this._fui.m_Btn_MoreGameLeft.visible=!1),-1==t.PfuConfig.Config.ui_crossGameListType&&(this._fui.m_boxList.visible=!1),t.PfuGlobal.GetOLParam().pfuSdkMoreGame!=t.PfuSwitch.OFF&&-1!=t.PfuConfig.Config.ui_moreGameType||(this._fui.m_boxList.visible=!1,this._fui.m_Btn_MoreGameLeft.visible=!1,this._fui.m_Btn_MoreGameRight.visible=!1));},i.prototype.Refresh=function(){var t=this._isShowType;this._fui.m_boxList.visible=!0,this._fui.m_Btn_MoreGameRight.visible=!0,this._fui.m_Btn_MoreGameLeft.visible=!0,t&&t!=PfuSdk.SHOW_TYPE_ALL&&(t==PfuSdk.SHOW_TYPE_MOREGAME?this._fui.m_boxList.visible=!1:t==PfuSdk.SHOW_TYPE_BOXLIST&&this.HideMoreGameLeftRight()),this.RefreshMoreGameVisible();},i.prototype.RefreshMoreGameIcon=function(){return;-1!=t.PfuConfig.Config.ui_moreGameType&&(2!=t.PfuConfig.Config.ui_moreGameType&&(this._fui.m_Btn_MoreGameLeft.m_icon.asLoader.url=t.PfuMoreGameUpdate.GetInstance().GetMoreGameIconUrl(!0)),1!=t.PfuConfig.Config.ui_moreGameType&&(this._fui.m_Btn_MoreGameRight.m_icon.asLoader.url=t.PfuMoreGameUpdate.GetInstance().GetMoreGameIconUrl(!1)));},i.prototype.Show=function(t){n.prototype.Show.call(this,t),this._isShowType=t,this.Refresh();},i.prototype.ClickMoreGame=function(e){t.PfuMoreGameUpdate.GetInstance().ShowMoreGame(e,this,function(t){});},i.prototype.CreateMoreGameList=function(){var e=t.PfuBoxList.GetInstance().GetMoreGameListData(),n=e.length;n>0&&(this._fui.m_list_moregamebg.visible=!0,this._fui.m_list_moregameStr.visible=!0);for(var i=0;i<n;i++){var r=e[i],a=this._fui.m_list_moregame.addItemFromPool(pfusdkui.UI_List_GameChild.URL);a.m_icon.icon=r.link,a.onClick(this,this.OnClickMoreGameListItem,[r]);}},i.prototype.OnClickMoreGameListItem=function(e,n){t.PfuManager.GetInstance().ShowCrossGameImage(e,this,function(){});},i.prototype.UpdateMoreGameListMove=function(){var t=this._fui.m_list_moregame.scrollPane.posX;(t+=.32*(this.isMoveLeft?1:-1))>=this._fui.m_list_moregame.scrollPane.contentWidth-this._fui.m_list_moregame.width?(t=this._fui.m_list_moregame.scrollPane.contentWidth,this.isMoveLeft=!1):t<0&&(t=0,this.isMoveLeft=!0);var e=t;this._fui.m_list_moregame.scrollPane.setPosX(e,!1);},i;}(e.WindowBase);e.MoreGameWindow=n;}(t.UI||(t.UI={}));}(PFU||(PFU={}));var __extends=void 0&&(void 0).__extends||function(t,e){function n(){this.constructor=t;}
for(var i in e){e.hasOwnProperty(i)&&(t[i]=e[i]);}
t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n());},PFU;!function(t){!function(e){var n=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t._isCreatePfuBanner=!1,t;}
return __extends(i,n),i.prototype.InitWindow=function(t){this._fui=t,n.prototype.InitWindow.call(this,t);},i.prototype.OnStart=function(){this._fui.m_loader.onClick(this,this.ClickPfuBanner),this._fui.m_loader.visible=!1,e.SceneMatchingUtils.SetAlignBottom(this._fui.m_loader);},i.prototype.OnUpdate=function(){!this._isCreatePfuBanner&&PfuSdk.GetParamComplete&&(this.CreatePfuBanner(),this._isCreatePfuBanner=!0);},i.prototype.Show=function(){n.prototype.Show.call(this);},i.prototype.Hide=function(){n.prototype.Hide.call(this);},i.prototype.CreatePfuBanner=function(){this._fui.m_loader.visible=!1;},i.prototype.RefreshHandle=function(){this._fui.m_loader.visible,this._fui.m_loader.icon=t.PfuBannerUpdate.GetInstance().GetPfuBannerImgUrl();},i.prototype.ClickPfuBanner=function(){t.PfuBannerUpdate.GetInstance().ClickPfuBanner();},i;}(e.WindowBase);e.PfuBannerWindow=n;}(t.UI||(t.UI={}));}(PFU||(PFU={}));var Debug=function(){function t(){}
return t.Log=function(e){t.isDebug&&console.log(e);},t.LogError=function(t){console.log(t);},t.isDebug=!0,t;}(),PF;!function(t){var e=function(){function t(){}
return t.FormatTimeByMMSS=function(t){var e=Math.floor(t/60),n=Math.floor(t%60),i="";return i+=e<10?"0"+e:e,i+=":",i+=n<10?"0"+n:n;},t.ReplaceArray=function(t,e){for(var n=""+e,i=0;i<t.length;i++){n=n.replace("{"+i+"}",t[i]);}
return n;},t.Replace=function(e,n){return t.ReplaceArray([e],n);},t;}();t.BXStringUtils=e;}(PF||(PF={}));var PF;!function(t){var e=function(){function t(){}
return t.Get=function(){return null==this.random&&(this.random=new t()),this.random;},t.prototype.nextInt=function(t,e){return Math.floor(Math.random()*(e-t)+t);},t.prototype.nextFloat=function(t,e){return Math.random()*(e-t)+t;},t.random=null,t;}();t.BXRandom=e;var n=function(){function t(){}
return t.RandomPropIndex=function(t){for(var n=0,i=0;i<t.length;i++){n+=t[i];}
var r=e.Get().nextInt(0,n);for(i=n=0;i<t.length;i++){if(r<(n+=t[i]))return i;}
return-1;},t;}();t.BXRandomUtils=n;}(PF||(PF={}));var BXMonoUtil=function(){function t(){}
return t.GetOrAddComponent=function(t,e){var n=e.getComponentByType(t);return null==n&&(n=e.addComponent(t)),n;},t;}(),PF;!function(t){var e=function(){function t(){}
return t.Lerp=function(t,e,n){var i=t.x+(e.x-t.x)*n,r=t.y+(e.y-t.y)*n,a=t.z+(e.z-t.z)*n;return new Laya.Vector3(i,r,a);},t.LerpNumber=function(t,e,n){return t+(e-t)*n;},t.moveTowards=function(e,n,i){return Math.abs(n-e)<=i?n:e+t.sign(n-e)*i;},t.sign=function(t){return t<0?-1:1;},t;}();t.Mathf=e;}(PF||(PF={}));var SceneMatchingUtils=function(){function t(){}
return t.GetLogicOffsetH=function(){var e=t.WIDTH/t.DESIGN_WIDTH;return(t.HEIGTH-t.DESIGN_HEIGHT*e)/2/e;},t.GetLogicSceneBottom=function(){var e=t.GetLogicOffsetH();return t.DESIGN_HEIGHT/2+t.DESIGN_HEIGHT/2+e;},t.GetLogicSceneTop=function(){var e=t.GetLogicOffsetH();return t.DESIGN_HEIGHT/2-t.DESIGN_HEIGHT/2-e;},t.SetAlignTop=function(e){if(WeChatUtils.GetInstance().IsWeGame()){var n=2436==t.HEIGTH?60:0;e.y=t.GetLogicSceneTop()+n+e.y;}},t.SetAlignBottom=function(e){if(WeChatUtils.GetInstance().IsWeGame()){var n=t.DESIGN_HEIGHT-e.y;e.y=t.GetLogicSceneBottom()-n;}},t.SetLayaSpriteAlignTop=function(e){var n=2436==t.HEIGTH?60:0;e.y=t.GetLogicSceneTop()+n+e.y;},t.SetLayaSpriteAlignBottom=function(e){var n=t.DESIGN_HEIGHT-e.y;e.y=t.GetLogicSceneBottom()-n;},t.DESIGN_WIDTH=750,t.DESIGN_HEIGHT=1334,t;}(),LayaAirUtils=function(){function t(){}
return t.isLocalNativeFile=function(t){for(var e=0,n=Laya.MiniAdpter.nativefiles.length;e<n;e++){if(-1!=t.indexOf(Laya.MiniAdpter.nativefiles[e]))return!0;}
return!1;},t.GetManifestFilePath=function(t){var e=Laya.ResourceVersion.manifest;if(null!=e)for(var n in e){if(t==n)return e[n];}
return null;},t;}(),Unity;!function(t){var e=function(){function t(){}
return t.Instantiate=function(t,e,n,i,r){var a=Laya.Sprite3D.instantiate(t,e,n,i,r);return this.CopyInstantiateData(t,a),a;},t.CopyInstantiateData=function(t,e){try{e.layer=Laya.Layer.getLayerByNumber(t.layer.number);for(var n=0;n<e.numChildren;n++){var i=e.getChildAt(n),r=t.getChildAt(n);null!=i&&null!=r&&this.CopyInstantiateData(r,i);}}catch(e){console.log(e);}},t;}();t.GameObject=e;}(Unity||(Unity={}));var LocalSaveUtils=function(){function t(){}
return t.GetJsonObject=function(t){var e=Laya.LocalStorage.getJSON(t);return Debug.Log("get SAVE key:"+t+"|v:"+e),null!=e&&""!=e?JSON.parse(e):null;},t.SaveJsonObject=function(t,e){Laya.LocalStorage.setJSON(t,JSON.stringify(e));},t.RemoveKey=function(t){Laya.LocalStorage.removeItem(t);},t.GetItem=function(t){return Laya.LocalStorage.getItem(t);},t.SaveItem=function(t,e){Laya.LocalStorage.setItem(t,e);},t;}(),PF;!function(t){var e=function(){function e(){}
return Object.defineProperty(e.prototype,"WindowPO",{get:function t(){return this._windowPo;},set:function t(e){this._windowPo=e;},enumerable:!0,configurable:!0}),e.prototype.SetWindow=function(t){this._fUIWindow=t;},e.prototype.GetFuiWindow=function(){return this._fUIWindow;},e.prototype.SetChildIndex=function(t){-1<t&&fairygui.GRoot.inst.setChildIndex(this._fUIWindow,t);},e.prototype.SetSortingOrder=function(t){this._fUIWindow.sortingOrder=t;},e.prototype.IsShow=function(){return this._fUIWindow.visible;},e.prototype.Show=function(){this._fUIWindow.visible=!0;},e.prototype.Hide=function(){this._fUIWindow.visible=!1;},e.prototype.Dispose=function(){t.NotificationCenter.GetInstance().RemoveObserver(this),this._fUIWindow.dispose();},e.prototype.Awake=function(){},e.prototype.OnStart=function(){this.OnAnimationIn(),this.ReStart();},e.prototype.ReStart=function(){},e.prototype.OnAnimationIn=function(){var t=this._fUIWindow.getTransition("IN");null!=t&&t.play(laya.utils.Handler.create(this,function(){}));},e;}();t.FUIWindowBase=e;}(PF||(PF={}));var PF;!function(t){var e=function(){function e(){}
return Object.defineProperty(e.prototype,"interfaceid",{get:function t(){return this._interfaceId;},enumerable:!0,configurable:!0}),e.prototype.Create=function(t){this._interfaceId=t,this._iterPo=DTUIWindowInfoMGR.getInstance().DTUIInterfaceDIC.get(t),null!=this._iterPo?this.Show():Debug.LogError("not def Interface PO Data:"+t);},e.prototype.Show=function(){for(var e=0;e<this._iterPo.DTPK_windowIds.length;e++){var n=this._iterPo.DTPK_windowIds[e];0!=n&&t.FUIManager.GetInstance().ShowWindow(n,-1);}},e.prototype.Hide=function(){for(var e=0;e<this._iterPo.DTPK_windowIds.length;e++){var n=this._iterPo.DTPK_windowIds[e];0!=n&&t.FUIManager.GetInstance().HideWindow(n);}},e.prototype.Dispose=function(){for(var e=0;e<this._iterPo.DTPK_windowIds.length;e++){var n=this._iterPo.DTPK_windowIds[e];0!=n&&t.FUIManager.GetInstance().DisposeWindows(n);}},e.prototype.Awake=function(){},e.prototype.OnStart=function(){},e;}();t.FUIInterfaceBase=e;}(PF||(PF={}));var PF;!function(t){t.Telegram=function(){};var e=function(){function t(){}
return t.prototype.HandleMessage=function(t,e){return!1;},t;}();t.State=e;var n=function(){function t(t){this.m_Owner=t,this.m_CurrentState=null,this.m_PreviousState=null,this.m_GlobalState=null;}
return t.prototype.update=function(){null!=this.m_GlobalState&&this.m_GlobalState.execute(this.m_Owner),null!=this.m_CurrentState&&this.m_CurrentState.execute(this.m_Owner);},t.prototype.changeState=function(t){this.m_PreviousState=this.m_CurrentState,this.m_CurrentState.exit(this.m_Owner),this.m_CurrentState=t,this.m_CurrentState.enter(this.m_Owner);},t.prototype.revertToPreviousState=function(){this.changeState(this.m_PreviousState);},t.prototype.isInState=function(t){return this.m_CurrentState==t;},Object.defineProperty(t.prototype,"current_state",{get:function t(){return this.m_CurrentState;},set:function t(e){this.m_CurrentState=e;},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"previous_state",{get:function t(){return this.m_PreviousState;},set:function t(e){this.m_PreviousState=e;},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"global_state",{get:function t(){return this.m_GlobalState;},set:function t(e){this.m_GlobalState=e;},enumerable:!0,configurable:!0}),t.prototype.HandleMessage=function(t){null!=this.m_GlobalState&&this.m_GlobalState.HandleMessage(this.m_Owner,t),null!=this.m_CurrentState&&this.m_CurrentState.HandleMessage(this.m_Owner,t);},t;}();t.StateMachine=n;}(PF||(PF={}));var StatisticsMgr=function(){function t(){}
return t.Init=function(t,e){MTA.Init(t,e),this.LogStartQuery();},t.Event=function(t,e){MTA.Event(t,e);},t.LogStartQuery=function(){var e=WeChatUtils.GetInstance().GetLaunchOptionsSync();if(e){var n={scene:e.scene,query:""};e.query&&(n={scene:""+e.scene,query:JSON.stringify(e.query)}),t.Event("start_scene",n);}},t;}(),MTA=function(){function t(){}
return t.Init=function(e,n){WeChatUtils.GetInstance().IsWeGame()&&((t.mta=__webpack_require__(24)).App.init({appID:e,eventID:n}),t.mta.Page.stat());},t.Event=function(e,n){WeChatUtils.GetInstance().IsWeGame()&&(Debug.Log("event ID:"+e+" | v:"+n),t.mta.Event.stat(e,n));},t;}(),PfuSdk2=function(){function t(){}
return t.Connect=function(t,e,n,i,r){PfuManager.GetInstance().Connect(t,e,n,i,r);},t.ShowNextSplashAd=function(){PfuManager.GetInstance().ShowNextSplashAd();},t.ShowRandomSplashAd=function(){PfuManager.GetInstance().ShowRandomSplashAd();},t.ShowRandomGeneralAd=function(){PfuManager.GetInstance().ShowRandomGeneralAd();},t.ShowNextGeneralAd=function(){PfuManager.GetInstance().ShowNextGeneralAd();},t.IsMiniAppInGame=function(){return PfuManager.GetInstance().IsMiniAppIn();},t.CreateBanner=function(t,e,n){return WeChatBannerAd.GetInstance().Create(t,e,n);},t.ShowBanner=function(){WeChatBannerAd.GetInstance().Show();},t.HideBanner=function(){WeChatBannerAd.GetInstance().Hide();},t.RefreshBanner=function(t){WeChatBannerAd.GetInstance().Refresh(t);},t.IsReadyBanner=function(){return WeChatBannerAd.GetInstance().IsReadyBanner();},t.CreateIncentiveAd=function(t){WeChatIncentiveAd.GetInstance().Create(t);},t.IsIncentivAdReady=function(){return WeChatIncentiveAd.GetInstance().IsReady();},t.ShowIncentive=function(t,e){WeChatIncentiveAd.GetInstance().Show(t,e);},t.GetOLParam=function(){return PfuManager.GetInstance().OLParam;},t.PfuShareGroupNext=function(t,e,n){return PfuManager.GetInstance().PfuShareNext(t,"",e,n);},t.PfuShare=function(t,e){return PfuManager.GetInstance().PfuShare(t,e);},t.PfuShareReplace=function(t,e,n){return PfuManager.GetInstance().PfuShareReplace(t,e,n);},t.GetPfuBannerData=function(){for(var t=[],e=0;e<PfuManager.GetInstance().MoreGame.length;e++){var n=PfuManager.GetInstance().MoreGame[e];null!=n.bannerLink&&t.push(n);}
return t;},t.GetTotalMoreGameCount=function(){return PfuManager.GetInstance().GetTotalMoreGameCount();},t.GetMoreGameIconUrl=function(t){return PfuManager.GetInstance().GetMoreGameLeftIconUrl(t);},t.ShowMoreGameImage=function(t,e,n){PfuManager.GetInstance().ShowMoreGameImage(!0,t,e,n);},t.CustomShowMoreGameImage=function(t,e,n){PfuManager.GetInstance().CustomShowMoreGameImage(t,e,n);},t.GetTopUrl=function(){return PfuManager.GetInstance().GetTopUrl();},t.SUCCESS=0,t.FAIL=1,t.VIDEO_SHOW_FAIL=2,t.SHARE_GROUP_FAIL=3,t;}(),PfuOLParamData=function(){function t(){}
return t.prototype.Init=function(){this.ad_banner=PfuSwitch.ON,this.ad_video=PfuSwitch.ON,this.gift=PfuSwitch.OFF,this.kaiping=PfuSwitch.OFF,this.share=PfuSwitch.OFF,this.tryplayertime=1,this.freePropCd=4,this.banner_refresh_time=180,this.banner_custom_refresh=PfuSwitch.OFF,this.helpMeWindow=PfuSwitch.OFF,this.fenxiang_number=1,this.revive_video_number=3,this.fenxiangshiwan=0,this.show5588=0,this.fxqun=0,this.qzfx=0,this.box_list_swich=PfuSwitch.ON,this.sharing_check_box=PfuSwitch.OFF,this.novdioenoshare=0,this.testMode=PfuSwitch.ON,this.shareDuration=2e3;},t;}(),PF;!function(t){var e=function(){function t(){this.m_KeyValuePairs=[];}
return t.prototype.add=function(t,e){},t.prototype.get=function(t){},t;}();t.IDictionary=e;var n=function(){function t(t,e){this.key=t,this.value=e;}
return t.prototype.setKey=function(t){this.key=t;},t.prototype.getKey=function(){return this.key;},t.prototype.setValue=function(t){this.value=t;},t.prototype.getValue=function(){return this.value;},t;}();t.KeyValuePair=n;}(PF||(PF={}));var PF,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.m_Count=0,t;}
return __extends(n,e),Object.defineProperty(n.prototype,"KeyValuePairs",{get:function t(){return this.m_KeyValuePairs;},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"count",{get:function t(){return this.m_Count;},enumerable:!0,configurable:!0}),n.prototype.add=function(e,n){for(var i=this.m_KeyValuePairs.length,r=0;r<i;r++){if(this.m_KeyValuePairs[r].getKey()==e)return void this.m_KeyValuePairs[r].setValue(n);}
var a=new t.KeyValuePair(e,n);this.m_KeyValuePairs.push(a),this.m_Count++;},n.prototype.get=function(t){for(var e=this.m_KeyValuePairs.length,n=0;n<e;n++){if(this.m_KeyValuePairs[n].getKey()==t)return this.m_KeyValuePairs[n].getValue();}
return null;},n.prototype.getKeyByIndex=function(t){return this.m_KeyValuePairs[t].getKey();},n.prototype.remove=function(t){for(var e=this.m_KeyValuePairs.length,n=-1,i=0;i<e;i++){if(this.m_KeyValuePairs[i].getKey()==t){n=i;break;}}
-1!=n&&(this.m_KeyValuePairs.splice(n,1),this.m_Count--);},n.prototype.clear=function(){for(var t=this.m_KeyValuePairs.length,e=0;e<t;e++){this.m_KeyValuePairs[e]=null;}
this.m_KeyValuePairs=[],this.m_Count=0;},n.prototype.containsKey=function(t){for(var e=this.m_KeyValuePairs.length,n=0;n<e;n++){if(this.m_KeyValuePairs[n].getKey()==t)return!0;}
return!1;},n.prototype.containsValue=function(t){for(var e=this.m_KeyValuePairs.length,n=0;n<e;n++){if(this.m_KeyValuePairs[n].getValue()==t)return!0;}
return!1;},n.prototype.toValueArray=function(){for(var t=new Array(),e=0;e<this.count;e++){var n=this.getKeyByIndex(e);t.push(this.get(n));}
return t;},n;}(t.IDictionary);t.Dictionary=e;}(PF||(PF={}));var PF;!function(t){var e=function(){function t(){var e=this.constructor;if(e){if(-1!=t.classKeys.indexOf(e))throw new Error(this+" 只允许实例化一次！");t.classKeys.push(e),t.classValues.push(this);}}
return t.prototype.destroy=function(e){void 0===e&&(e=null),this.onDestroy(),t.removeInstance(this.constructor);},t.prototype.onDestroy=function(){},t.removeInstance=function(t){var e=this.classKeys.indexOf(t);if(-1==e)return null;this.classKeys.splice(e,1),this.classValues.splice(e,1);},t.getFunValue=function(t){for(var e=this.classKeys,n=e.length,i=0;i<n;i++){if(t==e[i])return this.classValues[i];}
return null;},t.getInstanceOrCreate=function(e){var n=this.getFunValue(e);return n||((n=new e())instanceof t||(this.classKeys.push(e),this.classValues.push(n)),n);},t.classKeys=[],t.classValues=[],t;}();t.Singleton=e;}(PF||(PF={}));var PfuSwitch,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){t[t.ON=tempFlag]="ON",t[t.OFF=!tempFlag]="OFF";}(PfuSwitch||(PfuSwitch={}));var PfuRespState,PfuFunctionId,PfuOLParamBean=function t(){},PfuManager=function(t){function e(){var e=t.call(this)||this;return e._ingameadvert=null,e._officialaccount=null,e._moregame=null,e._wechatparam=null,e._wechatAd=null,e._wechatshare=null,e.moreGameLeft=new Array(),e.moreGameRight=new Array(),e.shareIndex=0,e._nextSplashAdIndex=0,e._nextGeneralAdIndex=0,e._wechatparam=new PfuOLParamBean(),e._wechatparam.value=new PfuOLParamData(),e._wechatparam.value.Init(),e.GetShareNum(),e;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.GetShareNum=function(){var t=LocalSaveUtils.GetItem("shareNumber");this.shareIndex=0,null!=t&&null!=t&&""!=t&&(this.shareIndex=parseInt(t)),Debug.Log("sCount:"+this.shareIndex);},e.prototype.SaveShareNum=function(){LocalSaveUtils.SaveItem("shareNumber",this.shareIndex+"");},Object.defineProperty(e.prototype,"OLParam",{get:function t(){return this._wechatparam.value;},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MoreGame",{get:function t(){return this._moregame.adverts;},enumerable:!0,configurable:!0}),e.prototype.Connect=function(t,n,i,r,a){var o=this,s=new PfuReq();s.appId=t,s.version=n,s.wechatgameid=i,s.functions=null==a?"0":a;var l=new Laya.HttpRequest();l.http.timeout=1e4,l.once(Laya.Event.COMPLETE,this,function(t){var e=JSON.parse(Base64.decode(t));o.preaseData(e),r(PfuSdk.SUCCESS);}),l.once(Laya.Event.ERROR,this,function(t){r(PfuSdk.FAIL);}),l.on(Laya.Event.PROGRESS,this,function(){});var u=e.OL_URL+"?"+s.getContent(e.OL_KEY);setTimeout(()=>{o.preaseData({}),r(PfuSdk.SUCCESS);},100);},e.prototype.preaseData=function(t){(this._resp=t).code==PfuRespState.succeed?this.preaseMode():console.log("erro:"+t.code);},e.prototype.preaseMode=function(){var t=this._resp;for(var e in t.value){var n=t.value[e];if(n.code==PfuRespState.succeed)switch(e){case ""+PfuFunctionId.ingameadvert:this._ingameadvert=n;break;case ""+PfuFunctionId.officialaccount:this._officialaccount=n;break;case ""+PfuFunctionId.moregame:if(this._moregame=n,this._moregame&&this._moregame.adverts)for(var i=0;i<this._moregame.adverts.length;i++){var r=this._moregame.adverts[i];"0"!=r.position?this.moreGameRight.push(r):this.moreGameLeft.push(r);}
break;case ""+PfuFunctionId.wechatparam:this._wechatparam=n;break;case ""+PfuFunctionId.wechatAd:this._wechatAd=n;break;case ""+PfuFunctionId.wechatshare:this._wechatshare=n;break;default:console.log("not Define Key:"+e);}else console.log("prease Mode ErrorCode: k="+e+"|code="+n.code);}},e.prototype.GetTopUrl=function(){return null!=this._resp?this._resp.toppath:"";},e.prototype.GetShareData=function(t){if(!this.IsExistShareData())return null;for(var e=0;e<this._wechatshare.value.length;e++){if(this._wechatshare.value[e].key==t)return this._wechatshare.value[e];}
return null;},e.prototype.IsExistShareData=function(){return null!=this._wechatshare&&null!=this._wechatshare.value&&0<this._wechatshare.value.length;},e.prototype.PfuShare=function(t,e){this.PfuShareReplace(t,"",e);},e.prototype.PfuShareNext=function(t,n,i,r){if(this.IsExistShareData()){var a=this._wechatshare.value[this.shareIndex];if(null!=a){var o=PF.BXStringUtils.Replace(n,a.desc),s=this._resp.toppath+a.shareLink;this.IsWegameTestMode()&&(o=e.TestMode_ShareDesc,s="");var l=PfuPlatformManager.GetInstance().GetShareQuery(r);WeChatUtils.GetInstance().ShareGroupAppMessageImage(t,i,o,s,l),this.shareIndex++,this.shareIndex>=this._wechatshare.value.length&&(this.shareIndex=0),this.SaveShareNum();}else i(PfuSdk.FAIL);}else i(PfuSdk.FAIL);},e.prototype.OnShareAppMessage=function(t){var n=this;if(this.IsExistShareData()){this.shareIndex++,this.shareIndex>=this._wechatshare.value.length&&(this.shareIndex=0);var i=this._wechatshare.value[this.shareIndex],r=i.desc,a=this._resp.toppath+i.shareLink;this.IsWegameTestMode()&&(r=e.TestMode_ShareDesc,a=""),WeChatUtils.GetInstance().OnShareAppMessage(function(e){n.OnShareAppMessage(t),n.SaveShareNum();},r,a);}},e.prototype.PfuShareReplace=function(t,n,i){if(this.IsExistShareData()){var r=this.GetShareData(t);if(null!=r){var a=PF.BXStringUtils.Replace(n,r.desc),o=this._resp.toppath+r.shareLink;this.IsWegameTestMode()&&(a=e.TestMode_ShareDesc,o=""),WeChatUtils.GetInstance().ShareAppMessageImage(i,a,o);}else i(PfuSdk.FAIL);}else i(PfuSdk.FAIL);},e.prototype.ShowRandomSplashAd=function(){if(this.IsExistSplashAdData()){var t=Math.floor(PF.BXRandom.Get().nextInt(0,this._ingameadvert.adverts.length)),e=this._ingameadvert.adverts[t].link;WeChatUtils.GetInstance().PreviewImage(this._resp.toppath+e);}},e.prototype.ShowNextSplashAd=function(){if(this.IsExistSplashAdData()){var t=this._ingameadvert.adverts[this._nextSplashAdIndex].link;WeChatUtils.GetInstance().PreviewImage(this._resp.toppath+t),this._nextSplashAdIndex++,this._nextSplashAdIndex>=this._ingameadvert.adverts.length&&(this._nextSplashAdIndex=0);}},e.prototype.IsExistSplashAdData=function(){return null!=this._ingameadvert&&null!=this._ingameadvert.adverts&&0<this._ingameadvert.adverts.length;},e.prototype.ShowMoreGameImage=function(t,e,n,i){if(this.IsExistGeneralMoreGameData()){var r=t?this.moreGameLeft.length:this.moreGameRight.length;if(0!=r){(r<=e||e<0)&&(e=0);var a=t?this.moreGameLeft[e]:this.moreGameRight[e];if(WeChatUtils.GetInstance().IsNavigateToMiniVersion())WeChatUtils.GetInstance().NavigateToMiniProgram(this,function(){},a.wechatgameid,"");else{var o=a.link;WeChatUtils.GetInstance().PreviewImage(this._resp.toppath+o),i.call(n,o);}}}},e.prototype.IsMoreGameLeftData=function(){return 0<this.moreGameLeft.length;},e.prototype.IsMoreGameRightData=function(){return 0<this.moreGameRight.length;},e.prototype.GetMoreGameLeftIconUrl=function(t){return this.IsMoreGameLeftData()?((t>=this.moreGameLeft.length||t<0)&&(t=0),this._resp.toppath+this.moreGameLeft[t].iconlink):"";},e.prototype.GetMoreGameRightIconUrl=function(t){return this.IsMoreGameRightData()?((t>=this.moreGameRight.length||t<0)&&(t=0),this._resp.toppath+this.moreGameRight[t].iconlink):"";},e.prototype.GetTotalMoreGameCount=function(){return this.IsExistGeneralMoreGameData()?this._moregame.adverts.length:0;},e.prototype.IsExistGeneralMoreGameData=function(){return null!=this._moregame&&null!=this._moregame.adverts&&0<this._moregame.adverts.length;},e.prototype.GetMoreGameCount=function(t){return t?this.moreGameLeft.length:this.moreGameRight.length;},e.prototype.CustomShowMoreGameImage=function(t,e,n){if(WeChatUtils.GetInstance().IsNavigateToMiniVersion())WeChatUtils.GetInstance().NavigateToMiniProgram(e,n,t.wechatgameid,t.path);else{var i=t.link;WeChatUtils.GetInstance().PreviewImage(this._resp.toppath+i),n.call(e);}},e.prototype.ShowRandomGeneralAd=function(){if(this.IsExistGeneralAdData()){var t=Math.floor(PF.BXRandom.Get().nextInt(0,this._officialaccount.adverts.length)),e=this._officialaccount.adverts[t].link;WeChatUtils.GetInstance().PreviewImage(this._resp.toppath+e);}},e.prototype.ShowNextGeneralAd=function(){if(this.IsExistSplashAdData()){var t=this._officialaccount.adverts[this._nextGeneralAdIndex].link;WeChatUtils.GetInstance().PreviewImage(this._resp.toppath+t),this._nextGeneralAdIndex++,this._nextGeneralAdIndex>=this._officialaccount.adverts.length&&(this._nextGeneralAdIndex=0);}},e.prototype.IsExistGeneralAdData=function(){return null!=this._officialaccount&&null!=this._officialaccount.adverts&&0<this._officialaccount.adverts.length;},e.prototype.IsMiniAppIn=function(){var t=WeChatUtils.GetInstance().GetLaunchOptionsSync();if(null!=t&&t.referrerInfo){var e=t.referrerInfo.appId;return "wx5608cdb7dc533937"==e||"wxe675b6aad9612c74"==e;}
return null!=t&&(t.scene==WeChatUtils.IN_GAME_FROM_1020||t.scene==WeChatUtils.IN_GAME_FROM_1024||t.scene==WeChatUtils.IN_GAME_FROM_1035||t.scene==WeChatUtils.IN_GAME_FROM_1037);},e.prototype.GetWegameAd=function(){return null==this._wechatAd||null==this._wechatAd.value?new PfuWechatAdData():this._wechatAd.value;},e.prototype.IsWegameTestMode=function(){return null==this._wechatparam||null==this._wechatparam.value||this._wechatparam.value.testMode==PfuSwitch.ON;},e.TestMode_ShareDesc="This game is really fun, come and experience it together!",e.OL_URL="https://wxad.jfydgame.com/jfyd_advert_wechat/",e.OL_KEY="60cff75d0d1e4d548d9f4bca35916b21",e;}(PF.Singleton);!function(t){t[t.succeed=101]="succeed",t[t.signError=201]="signError",t[t.paramError=202]="paramError";}(PfuRespState||(PfuRespState={})),function(t){t[t.ingameadvert=1]="ingameadvert",t[t.officialaccount=2]="officialaccount",t[t.moregame=3]="moregame",t[t.wechatparam=4]="wechatparam",t[t.wechatAd=5]="wechatAd",t[t.wechatshare=6]="wechatshare";}(PfuFunctionId||(PfuFunctionId={}));var PfuReq=function(){function t(){}
return t.prototype.getContent=function(t){var e=JSON.stringify(this),n=Base64.encode(e);return "content="+n+"&sign="+md5(n+t);},t;}(),PfuResp=function t(){},PfuShareBean=function t(){},PfuShareData=function t(){},PfuSplashBean=function t(){},PfuSplashData=function t(){},PfuWechatAdBean=function t(){},PfuWechatAdData=function t(){this.banner="0",this.video="0";},PfuMoreGameBean=function t(){},PfuMoreGameData=function t(){},BannerDirction,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){t[t.DOWN_CENTER=0]="DOWN_CENTER",t[t.TOP_CENTER=1]="TOP_CENTER";}(BannerDirction||(BannerDirction={}));var WeChatBannerAd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isReady=!1,e;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.Create=function(t,n,i){var r=this;if("0"==t){var a=LocalSaveUtils.GetItem(e.SAVE_BEANNER_KEY);if(null==a||""==a)return;t=t;}else LocalSaveUtils.SaveItem(e.SAVE_BEANNER_KEY,t);if("0"!=t){this._adId=t,this._bannerDir=n;var o=0,s=0;laya.utils.Browser.clientWidth,laya.utils.Browser.clientHeight,WeChatUtils.GetInstance().IsWeGame()&&(this._bannerAd=wx.createBannerAd({adUnitId:t,style:{left:o,top:s,width:300}}),this._bannerAd.onResize(function(t){r._bannerAd.style.width=t.width,r._bannerAd.style.heigth=t.heigth,n==BannerDirction.DOWN_CENTER&&(o=(laya.utils.Browser.clientWidth-t.width)/2,s=laya.utils.Browser.clientHeight-t.height),r._bannerAd.style.left=o,r._bannerAd.style.top=s;}),this._bannerAd.onError(function(t){console.log(t);}),this._bannerAd.onLoad(function(){r._isReady=!0,null!=i&&i();}));}},e.prototype.IsReadyBanner=function(){return!!WeChatUtils.GetInstance().IsWeGame()&&null!=this._bannerAd;},e.prototype.Show=function(){this.IsReadyBanner()?this._bannerAd.show():this.Refresh(function(){});},e.prototype.Hide=function(){this.IsReadyBanner()&&this._bannerAd.hide();},e.prototype.Destroy=function(){null!=this._bannerAd&&this._bannerAd.destroy(),this._isReady=!1;},e.prototype.Refresh=function(t){this.Destroy(),this.Create(this._adId,this._bannerDir,t);},e.SAVE_BEANNER_KEY="s_banner_id",e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),WeChatIncentiveAd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isReady=!1,e;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.Create=function(t){var n=this;if("0"==t){var i=LocalSaveUtils.GetItem(e.SAVE_INCENTIVE_KEY);if(null==i||""==i)return;t=t;}else LocalSaveUtils.SaveItem(e.SAVE_INCENTIVE_KEY,t);"0"!=t&&(this._adId=t,WeChatUtils.GetInstance().IsWeGame()&&(this._rewardedVideoAd=wx.createRewardedVideoAd({adUnitId:t}),this._rewardedVideoAd.onLoad(function(){n._isReady=!0;}),this._rewardedVideoAd.onError(function(t){console.log("Create AD:"+t);}),this._rewardedVideoAd.onClose(function(t){t&&t.isEnded||void 0===t?n._playCallback.call(n._playService,PfuSdk.SUCCESS):n._playCallback.call(n._playService,PfuSdk.FAIL);})));},e.prototype.IsReady=function(){return!!this._isReady&&null!=this._rewardedVideoAd&&!!WeChatUtils.GetInstance().IsWeGame();},e.prototype.IsRewardedReady=function(){return null!=this._rewardedVideoAd&&!!WeChatUtils.GetInstance().IsWeGame();},e.prototype.Show=function(t,e){var n=this;this._playService=t,this._playCallback=e,this.IsRewardedReady()?this._rewardedVideoAd.show().catch(function(t){n._rewardedVideoAd.load().then(function(){return n._rewardedVideoAd.show().catch(function(t){n._playCallback.call(n._playService,PfuSdk.VIDEO_SHOW_FAIL);});}).catch(function(t){n._playCallback.call(n._playService,PfuSdk.VIDEO_SHOW_FAIL);});}):this._playCallback.call(this._playService,PfuSdk.FAIL);},e.SAVE_INCENTIVE_KEY="s_incentive_id",e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),WeChatOpenUtils=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._textureSprite=null,e._texture=null,e;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.SetUserOnlyCloudStorage=function(t,n){var i=this;if(WeChatUtils.GetInstance().IsWeGame()){var r=[{key:t,value:n}];wx.setUserCloudStorage({KVDataList:r,success:function t(n){e.wxPostMessage({messageId:e.MESSAGE_ID_UPDATE_MAXSCORE},i,function(){}),console.log(n);},fail:function t(e){console.log(e);}});}},e.prototype.CallInitCanvas=function(t){if(WeChatUtils.GetInstance().IsWeGame()){wx.getOpenDataContext();var e=new Laya.Texture(Laya.Browser.window.sharedCanvas);e.bitmap.alwaysChange=!0;var n=new Laya.Sprite();Laya.stage.addChild(n),n.graphics.drawTexture(e,0,0,Laya.stage.desginWidth,Laya.stage.desginHeight),console.log("初始化获得离屏数据"),this._textureSprite=n,this._texture=e,this._textureSprite.visible=!1;}},e.prototype.InitSharedCanvas=function(){WeChatUtils.GetInstance().IsWeGame()&&e.wxPostMessage({messageId:e.MESSAGE_ID_INIT},this,this.CallInitCanvas);},e.prototype.ShowSharedCanvas=function(){if(WeChatUtils.GetInstance().IsWeGame()){if(null==this._textureSprite)return;this._textureSprite.visible=!0;}},e.prototype.HideShardCanvas=function(){if(WeChatUtils.GetInstance().IsWeGame()){if(null==this._textureSprite)return;this._textureSprite.visible=!1;}},e.prototype.ShowFriendRank=function(t){WeChatUtils.GetInstance().IsWeGame()&&e.wxPostMessage({messageId:e.MESSAGE_ID_DRAW_RANK,rankDrawData:t},this,function(){});},e.prototype.ShowFriedNeighbor=function(t){WeChatUtils.GetInstance().IsWeGame()&&e.wxPostMessage({messageId:e.MESSAGE_ID_NEIGHBOR,rankDrawData:t},this,function(){});},e.prototype.ShowUpperRank=function(t){WeChatUtils.GetInstance().IsWeGame()&&e.wxPostMessage({messageId:e.MESSAGE_ID_DRAWUPPER,rankDrawData:t},this,function(){});},e.wxPostMessage=function(t,e,n){if(WeChatUtils.GetInstance().IsWeGame()){var i=Laya.Browser.window.wx;null!=i?(console.log("wxPostMessage :"+t),i.getOpenDataContext().postMessage(t),Laya.timer.once(400,this,function(){null==e||null==e?n(t):n.call(e,t);})):console.log("wx=null");}},e.InitOpenDataOnMessage=function(t){wx.onMessage(function(n){if(console.log("zi yu:"+n),n.messageId==e.MESSAGE_ID_INIT?(console.log("初始化!成功"),t(n.messageId)):n.messageId==e.MESSAGE_ID_UPDATE_MAXSCORE?(console.log("更新最高分"),t(n.messageId)):n.messageId==e.MESSAGE_ID_DRAW_RANK?(console.log("完整好友排行"),t(n.messageId)):n.messageId==e.MESSAGE_ID_NEIGHBOR&&(console.log("绘制临近的排行"),t(n.messageId)),"filedata"==n.isLoad)laya.wx.mini.MiniFileMgr.ziyuFileData[n.url]=n.data;else if("filenative"==n.isLoad)n.isAdd?laya.wx.mini.MiniFileMgr.filesListObj[n.url]=n.data:delete laya.wx.mini.MiniFileMgr.filesListObj[n.url];else if("resizeShared"==n.type){__JS__("sharedCanvas").width=n.data.width,__JS__("sharedCanvas").height=n.data.height;var i=n.data.matrix,r=new Laya.Matrix();r.a=i.a,r.b=i.b,r.c=i.c,r.d=i.d,Laya.stage._canvasTransform=r;}});},e.MESSAGE_ID_INIT=1001,e.MESSAGE_ID_UPDATE_MAXSCORE=1002,e.MESSAGE_ID_DRAW_RANK=1003,e.MESSAGE_ID_NEIGHBOR=1004,e.MESSAGE_ID_DRAWUPPER=1005,e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),WeChatUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.IsWeGame=function(){return Laya.Browser.onMiniGame;},e.prototype.PreviewImage=function(t){this.IsWeGame()&&wx.previewImage({urls:[t]});},e.prototype.ShowShareMenu=function(){this.IsWeGame()&&wx.showShareMenu();},e.prototype.HideShareMenu=function(){this.IsWeGame()&&wx.HideShareMenu();},e.prototype.OnShareAppMessage=function(t,e,n){this.IsWeGame()&&wx.onShareAppMessage(function(){return{title:e,imageUrl:n,success:function e(n){t(PfuSdk.SUCCESS),console.log("onShareAppMessage.SUCCESS");},fail:function e(n){t(PfuSdk.FAIL),console.log("onShareAppMessage.FAIL");}};});},e.prototype.ShareAppMessage=function(t,e){this.IsWeGame()?wx.shareAppMessage({title:e,success:function e(n){t(PfuSdk.SUCCESS);},fail:function e(n){t(PfuSdk.FAIL);}}):t(PfuSdk.FAIL);},e.prototype.ShareAppMessageImage=function(t,e,n,i){this.IsWeGame()?wx.shareAppMessage({title:e,imageUrl:n,query:i,success:function e(n){t(PfuSdk.SUCCESS),console.log("PfuSdk.SUCCESS");},fail:function e(n){t(PfuSdk.FAIL),console.log("PfuSdk.FAIL 1");}}):(t(PfuSdk.FAIL),console.log("PfuSdk.FAIL 2"));},e.prototype.ShareGroupAppMessageImage=function(t,e,n,i,r){this.IsWeGame()?(wx.shareAppMessage({title:n,imageUrl:i,query:r,success:function n(i){t?i.shareTickets&&i.shareTickets[0]?(wx.getShareInfo({shareTicket:i.shareTickets[0],success:function t(e){console.log("shareTicket success"+e);},fail:function t(e){console.log("fail success"+e);},complete:function t(e){console.log("complete"+e);}}),e(PfuSdk.SUCCESS),console.log("Share PfuSdk.SUCCESS")):(e(PfuSdk.SHARE_GROUP_FAIL),console.log("Share Not Group")):(e(PfuSdk.SUCCESS),console.log("Share SUCCESS"));},fail:function t(n){e(PfuSdk.FAIL),console.log("Share PfuSdk.FAIL");}}),e(PfuSdk.FAIL)):(e(PfuSdk.FAIL),console.log("PfuSdk.FAIL 2"));},e.prototype.GetLaunchOptionsSync=function(){if(this.IsWeGame()&&null==e._launchOptons){var t=wx.getLaunchOptionsSync();e._launchOptons=t,console.log("scene:"+t.scene),console.log("query:"+t.query),console.log("isSticky:"+t.isSticky),console.log("shareTicket:"+t.shareTicket);}
return e._launchOptons;},e.prototype.GetAdAid=function(){var t=this.GetLaunchOptionsSync();if(t.query&&t.query.weixinadinfo){var e=t.query.weixinadinfo.split(".")[0];return console.log("来源广告的广告id是:"+e),e;}
return null;},e.prototype.OnAppHide=function(t){this.IsWeGame()&&wx.onHide(t);},e.prototype.OnAppShow=function(t){this.IsWeGame()&&wx.onShow(t);},e.prototype.SetTicketShareTicket=function(t,e){this.IsWeGame()?wx.updateShareMenu({withShareTicket:t,complete:function t(n){e();}}):e();},e.prototype.NavigateToMiniProgram=function(t,e,n,i){this.IsWeGame()&&wx.navigateToMiniProgram({appId:n,path:i,envVersion:"release",success:function n(r){e.call(t,i),console.log("success"+r);},fail:function n(r){e.call(t,i),console.log("fail"+r);}});},e.prototype.IsNavigateToMiniVersion=function(){return!(!this.IsWeGame()||"function"!=typeof wx.navigateToMiniProgram);},e.prototype.LoadSubpackage=function(t,e,n){this.IsWeGame()&&"function"==typeof wx.loadSubpackage?wx.loadSubpackage({name:t,success:function t(n){e(PfuSdk.SUCCESS);},fail:function t(n){e(PfuSdk.FAIL);}}):e(PfuSdk.SUCCESS);},e.prototype.GetSystemInfoSync=function(){return this.IsWeGame()?wx.getSystemInfoSync():null;},e.prototype.GetBenchmarkLevel=function(){return this.IsWeGame()?this.GetSystemInfoSync().benchmarkLevel:-99;},e.prototype.ShowSingleModal=function(t,e,n){wx.showModal({title:t,content:e,showCancel:!1,success:function t(){n();}});},e.IN_GAME_FROM_1001=1001,e.IN_GAME_FROM_1020=1020,e.IN_GAME_FROM_1024=1024,e.IN_GAME_FROM_1035=1035,e.IN_GAME_FROM_1037=1037,e._launchOptons=null,e;}(PF.Singleton),LaunchOption=function t(){},PF,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){var e=function(e){function n(){var n=e.call(this)||this;return n.interfaceDic=new t.Dictionary(),n.allWindowsDic=new t.Dictionary(),n;}
return __extends(n,e),n.GetInstance=function(){return this.instance||(this.instance=new n()),this.instance;},n.prototype.OpenInterface=function(t){this.IsHaveInterface(t)?this.InitInterface(t):this.CreateInterface(t);},n.prototype.CreateInterface=function(e){var n=new t.FUIInterfaceBase();n.Create(e),n.Awake(),this.interfaceDic.add(e,n),this.InitInterface(e);},n.prototype.IsHaveInterface=function(t){return this.interfaceDic.containsKey(t);},n.prototype.InitInterface=function(t){var e=this.interfaceDic.get(t);e.Show(),e.OnStart();},n.prototype.HideInterface=function(t){this.IsHaveInterface(t)?this.GetInterface(t).Hide():Debug.LogError("未找到需要隐藏的Interface"+t);},n.prototype.DisposeInterface=function(t){this.IsHaveInterface(t)?(this.GetInterface(t).Dispose(),this.RemoveInterface(t)):Debug.LogError("未找Interface"+t);},n.prototype.GetInterface=function(t){for(var e=0;e<this.interfaceDic.count;e++){var n=this.interfaceDic.getKeyByIndex(e),i=this.interfaceDic.get(n);if(i.interfaceid==t)return i;}
return null;},n.prototype.RemoveInterface=function(t){this.interfaceDic.remove(t);},n.prototype.ShowWindow=function(t,e){if(this.IsBeShowWindow(t))return this.initWindow(this.GetWindow(t),e),null;var i=n.CreateWindow(t,e);return this.AddWindow(t,i),i;},n.prototype.HideWindow=function(t){this.IsBeShowWindow(t)?this.GetWindow(t).Hide():Debug.LogError("未找到隐藏的Window:"+t);},n.prototype.DisposeWindows=function(t){this.IsBeShowWindow(t)?(this.GetWindow(t).Dispose(),this.allWindowsDic.remove(t)):Debug.LogError("销毁时未找Window"+t);},n.CreateWindow=function(t,e){var n=DTUIWindowInfoMGR.getInstance().DTUIWindowDIC.get(t),i=Laya.ClassUtils.getClass(n.DTPK_name),r=Laya.ClassUtils.getClass(n.DTPK_name+"VO"),a=n.DTPK_sortingOrder,o=r.CreateWindow(i);if(n.DTPK_name==="MainUI"&&gameover33>0){}
if(console.warn("showWindow : FUIWindow_"+n.DTPK_name),null!=o)return o.id=t,o.SetChildIndex(e),o.WindowPO=n,o.SetSortingOrder(a),o.Awake(),o.OnStart(),o;console.warn("create window Error new FUIWindow_"+n.DTPK_name+" null!");},n.prototype.AddWindow=function(t,e){this.allWindowsDic.add(t,e);},n.prototype.IsBeShowWindow=function(t){return this.allWindowsDic.containsKey(t);},n.prototype.initWindow=function(t,e){t.SetChildIndex(e),t.IsShow()||(t.Show(),t.OnStart());},n.prototype.GetWindow=function(t){return this.allWindowsDic.get(t);},n;}(t.Singleton);t.FUIManager=e;}(PF||(PF={}));var PF,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){var e=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._popupStack=new Array(),t._startOrder=0,t;}
return __extends(n,e),n.GetInstance=function(){return this.instance||(this.instance=new n()),this.instance;},n.prototype.ShowPopup=function(t){return this.CreateWindow(t);},n.prototype.CreateWindow=function(e){var n=t.FUIManager.CreateWindow(e,-1);return this.AddPopup(n),n;},n.prototype.AddPopup=function(t){this._popupStack.push(t),this.SyncSortingOrder();},n.prototype.SyncSortingOrder=function(){for(var t=0;t<this._popupStack.length;t++){var e=this._popupStack[0];this._popupStack[t].SetSortingOrder(e.WindowPO.DTPK_sortingOrder+this._startOrder+t);}},n.prototype.ClosePopupTop=function(t){var e=this,n=this._popupStack.pop();this.OutPopAction(n,function(){n.Dispose(),e.SyncSortingOrder();},t);},n.prototype.ClosePopup=function(t,e){for(var n=this,i=function i(a){var o=r._popupStack[a];if(o==t)return r.OutPopAction(o,function(){n.DisposePopupWindow(a,o);},e),"break";},r=this,a=this._popupStack.length-1;0<=a&&"break"!==i(a);a--){}},n.prototype.DisposePopupWindow=function(t,e){this._popupStack.splice(t,1),e.Dispose(),this.SyncSortingOrder();},n.prototype.OutPopAction=function(t,e,n){if(n)e();else{var i=t.GetFuiWindow().getTransition("OUT");null!=i?i.play(laya.utils.Handler.create(this,function(){e();})):null!=(i=t.GetFuiWindow().getTransition("IN"))?i.playReverse(laya.utils.Handler.create(this,function(){e();})):e();}},n;}(t.Singleton);t.FUIPopupManager=e;}(PF||(PF={}));var __extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),CustomMaterial=function(t){function e(){var e=t.call(this)||this;return e.setShaderName("CustomShader"),e;}
return __extends(e,t),Object.defineProperty(e.prototype,"diffuseTexture",{get:function t(){return this._getTexture(e.DIFFUSETEXTURE);},set:function t(n){this._setTexture(e.DIFFUSETEXTURE,n);},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginalColor",{set:function t(n){this._setColor(e.MARGINALCOLOR,n);},enumerable:!0,configurable:!0}),e.DIFFUSETEXTURE=1,e.MARGINALCOLOR=2,e;}(Laya.BaseMaterial),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DrawBoxColliderScript=function(t){function e(){var e=t.call(this)||this;return e._corners=new Array(),e._color=new Laya.Vector4(1,0,0,1),e._corners[0]=new Laya.Vector3(),e._corners[1]=new Laya.Vector3(),e._corners[2]=new Laya.Vector3(),e._corners[3]=new Laya.Vector3(),e._corners[4]=new Laya.Vector3(),e._corners[5]=new Laya.Vector3(),e._corners[6]=new Laya.Vector3(),e._corners[7]=new Laya.Vector3(),e.phasorSpriter3D=new Laya.PhasorSpriter3D(),e;}
return __extends(e,t),e.prototype.SetCamera=function(t){this._camera=t;},e.prototype.drawBox=function(){this.drawSprite3DCollider(this._owner);},e.prototype.drawBoxCollider=function(t){null!=t&&(t.boundBox.getCorners(this._corners),this.phasorSpriter3D.begin(Laya.WebGLContext.LINES,this._camera),this.phasorSpriter3D.line(this._corners[0],this._color,this._corners[1],this._color),this.phasorSpriter3D.line(this._corners[1],this._color,this._corners[2],this._color),this.phasorSpriter3D.line(this._corners[2],this._color,this._corners[3],this._color),this.phasorSpriter3D.line(this._corners[3],this._color,this._corners[0],this._color),this.phasorSpriter3D.line(this._corners[4],this._color,this._corners[5],this._color),this.phasorSpriter3D.line(this._corners[5],this._color,this._corners[6],this._color),this.phasorSpriter3D.line(this._corners[6],this._color,this._corners[7],this._color),this.phasorSpriter3D.line(this._corners[7],this._color,this._corners[4],this._color),this.phasorSpriter3D.line(this._corners[0],this._color,this._corners[4],this._color),this.phasorSpriter3D.line(this._corners[1],this._color,this._corners[5],this._color),this.phasorSpriter3D.line(this._corners[2],this._color,this._corners[6],this._color),this.phasorSpriter3D.line(this._corners[3],this._color,this._corners[7],this._color),this.phasorSpriter3D.end());},e.prototype.drawSprite3DCollider=function(t){var e=t.getComponentByType(Laya.BoxCollider);this.drawBoxCollider(e);},e.prototype._postRenderUpdate=function(t){this.drawSprite3DCollider(this._owner);},e;}(Laya.Script),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),ComponentRootManger=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.init=function(t){this._scene=t;},e.prototype.getManagerNode=function(){return this._managerNode;},e.prototype.addComponent=function(t){return null==this._managerNode&&(this._managerNode=this._scene.addChild(new Laya.Sprite3D())),this._managerNode.addComponent(t);},e.prototype.GetScene=function(){return this._scene;},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PoolManager=function(t){function e(){var e=t.call(this)||this;return e._pools=new Laya.Dictionary(),e;}
return __extends(e,t),e.getInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.newPool=function(t,e,n){var i=new BXPool();return i.create(t,e,n),this._pools.set(t,i),i;},e.prototype.getPool=function(t){return this._pools.get(t);},e;}(PF.Singleton),BXPool=function(){function t(){}
return t.prototype.create=function(t,e,n){this._source=e,this._source.active=!1,this._poolName=t,this._parentNode=n;},t.prototype.SetParent=function(t,e){this._parentNode.removeChild(t),t.transform.parent=e.transform,e.addChild(t);},t.prototype.AddSpriteDebugBox=function(t){var e=t;null!=e&&null!=e.getComponentByType(Laya.BoxCollider)&&e.addComponent(DrawBoxColliderScript).SetCamera(CameraMgr.getInstance().getCameraRef());for(var n=0;n<t._childs.length;n++){this.AddSpriteDebugBox(t.getChildAt(n));}},t.prototype.Spawn=function(){var t=this,e=Laya.Pool.getItemByCreateFun(this._poolName,function(){return Unity.GameObject.Instantiate(t._source,t._parentNode);});return e.active=!0,e;},t.prototype.Despawn=function(t){t.transform.parent!=this._parentNode.transform&&(t.transform.parent=this._parentNode.transform,t.removeSelf(),this._parentNode.addChild(t)),0==t.active&&Debug.Log("obj activity =false"),t.active=!1,Laya.Pool.recover(this._poolName,t);},t;}(),Unity,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.prototype._load=function(t){this.gameObject=t,this.transform=t.transform,this.Awake();},e.prototype._start=function(t){this.Start();},e.prototype._update=function(t){this.Update(t);},e.prototype._lateUpdate=function(t){this.LateUpdate(t);},e.prototype.Awake=function(){},e.prototype.Start=function(){},e.prototype.Update=function(t){},e.prototype.LateUpdate=function(t){},e;}(Laya.Script);t.MonoBehaviour=e;}(Unity||(Unity={}));var __extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),Sprite3DRotation=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.x=0,e.y=0,e.z=0,e;}
return __extends(e,t),e.prototype.Update=function(t){0==this.x&&0==this.y&&0==this.z||0==this.delay||this.transform.rotate(new Laya.Vector3(this.x*this.delay,this.y*this.delay,this.z*this.delay));},e;}(Unity.MonoBehaviour),PF,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){var e=function e(){this.handlers=new t.Dictionary();};t.NotifiactionHandleBean=e;var n=function(n){function i(){var e=null!==n&&n.apply(this,arguments)||this;return e._notifications=new t.Dictionary(),e._notificationName=new t.Dictionary(),e;}
return __extends(i,n),i.GetInstance=function(){return this.instance||(this.instance=new i()),this.instance;},i.prototype.AddObserver=function(n,i,r){var a=this._notifications.get(n);null==a?((a=new e()).handlers.add(r,i),this._notifications.add(n,a)):(a.handlers.get(r)&&a.handlers.remove(r),a.handlers.add(r,i));var o=this._notificationName.get(r);null==o&&(o=new t.Dictionary(),this._notificationName.add(r,o));var s=o.get(n);null==s&&(s=a,o.add(n,s));},i.prototype.RemoveObserver=function(t){var e=this._notifications.get(t);if(null!=e){this._notifications.remove(t);for(var n=e.handlers.count,i=0;i<n;i++){var r=e.handlers.getKeyByIndex(i),a=this._notificationName.get(r);null!=a&&(a.remove(t),0==a.count&&this._notificationName.remove(r));}}},i.prototype.PostNotification=function(t,e){var n=this._notificationName.get(t);if(null!=n)for(var i=0;i<n.count;i++){var r=n.getKeyByIndex(i);n.get(r).handlers.get(t).call(r,e);}},i;}(t.Singleton);t.NotificationCenter=n;}(PF||(PF={}));var LoaderFUIRes=function(){function t(){}
return t.LoadGame=function(t){Laya.loader.load([{url:"subpackage/res/UI/Game.bin",type:Laya.Loader.BUFFER},{url:"subpackage/res/UI/Game@atlas0.png",type:Laya.Loader.IMAGE},{url:"subpackage/res/UI/Game@atlas0_1.png",type:Laya.Loader.IMAGE},{url:"subpackage/res/UI/Game@atlas0_2.png",type:Laya.Loader.IMAGE},{url:"subpackage/res/UI/Game@atlas0_3.png",type:Laya.Loader.IMAGE},{url:"subpackage/res/UI/Game@atlas0_4.png",type:Laya.Loader.IMAGE},{url:"subpackage/res/UI/Game@atlas0_5.png",type:Laya.Loader.IMAGE},{url:"subpackage/res/UI/Game@atlas0_6.png",type:Laya.Loader.IMAGE},{url:"subpackage/res/UI/Game@atlas0_7.png",type:Laya.Loader.IMAGE},{url:"subpackage/res/UI/Game@atlas0_8.png",type:Laya.Loader.IMAGE},{url:"subpackage/res/UI/Game@atlas0_9.png",type:Laya.Loader.IMAGE},{url:"subpackage/res/UI/Game@atlas0_10.png",type:Laya.Loader.IMAGE},{url:"subpackage/res/UI/Game@atlas0_11.png",type:Laya.Loader.IMAGE}],Laya.Handler.create(this,function(){window["FBInstant"].startGameAsync().then(function(){clearInterval(window.fakeloadingInterval);initSSSGameConfig(()=>{console.log("game config init done");});});fairygui.UIPackage.addPackage("subpackage/res/UI/Game"),t();}));},t.LoadMain=function(t){fairygui.UIObjectFactory.setLoaderExtension(MyGLoader),Laya.loader.load([{url:"res/uilocal/Main.bin",type:Laya.Loader.BUFFER},{url:"res/uilocal/Main@atlas0.png",type:Laya.Loader.IMAGE}],Laya.Handler.create(this,function(){fairygui.UIPackage.addPackage("res/uilocal/Main"),t();}));},t;}(),DTCurrencyPK,DTPropPK,DTSwipeDirectionPK,DTGameStatePK,DTTDiffTypePK,DTTypeColliderPK,DTPlayerDieAniTypePK,DTEffectIdPK,DTBIObjectTypeV2PK,DTBIEventTypePK,DTSoundIdPK,DTSettingTypePK,DTTeachIdPK,DTGameInfoStringIdPK,DTTaskStatePK,DTTaskTypePK,DTBoxPK,DTGameTeachTypePK;!function(t){t[t.DTPK_Gold=1]="DTPK_Gold",t[t.DTPK_Diamond=2]="DTPK_Diamond",t[t.DTPK_Firecracker=3]="DTPK_Firecracker",t[t.DTPK_PropDouble=4]="DTPK_PropDouble",t[t.DTPK_PropHelmet=5]="DTPK_PropHelmet",t[t.DTPK_PropMagnet=6]="DTPK_PropMagnet",t[t.DTPK_PropPlane=7]="DTPK_PropPlane",t[t.DTPK_TreasureBox=8]="DTPK_TreasureBox",t[t.DTPK_Egg_color=9]="DTPK_Egg_color",t[t.DTPK_Egg_golden=10]="DTPK_Egg_golden",t[t.DTPK_Egg_blue=11]="DTPK_Egg_blue",t[t.DTPK_Egg_green=12]="DTPK_Egg_green";}(DTCurrencyPK||(DTCurrencyPK={})),function(t){t[t.DTPK_PropHelmet=1]="DTPK_PropHelmet",t[t.DTPK_PropPlane=3]="DTPK_PropPlane",t[t.DTPK_PropMagnet=2]="DTPK_PropMagnet",t[t.DTPK_PropDouble=4]="DTPK_PropDouble";}(DTPropPK||(DTPropPK={})),function(t){t[t.DTPK_Non=1]="DTPK_Non",t[t.DTPK_Left=2]="DTPK_Left",t[t.DTPK_Right=3]="DTPK_Right",t[t.DTPK_Up=4]="DTPK_Up",t[t.DTPK_Down=5]="DTPK_Down";}(DTSwipeDirectionPK||(DTSwipeDirectionPK={})),function(t){t[t.DTPK_Cover=1]="DTPK_Cover",t[t.DTPK_Stage=2]="DTPK_Stage",t[t.DTPK_Run=3]="DTPK_Run",t[t.DTPK_Pause=4]="DTPK_Pause",t[t.DTPK_GameOver=5]="DTPK_GameOver",t[t.DTPK_HomeToRun=6]="DTPK_HomeToRun";}(DTGameStatePK||(DTGameStatePK={})),function(t){t[t.DTPK_home=0]="DTPK_home",t[t.DTPK_level1=1]="DTPK_level1",t[t.DTPK_level2=2]="DTPK_level2",t[t.DTPK_level3=3]="DTPK_level3",t[t.DTPK_level4=4]="DTPK_level4",t[t.DTPK_level5=5]="DTPK_level5",t[t.DTPK_level6=6]="DTPK_level6",t[t.DTPK_level7=7]="DTPK_level7",t[t.DTPK_level8=8]="DTPK_level8",t[t.DTPK_level9=9]="DTPK_level9",t[t.DTPK_level10=10]="DTPK_level10",t[t.DTPK_level11=11]="DTPK_level11";}(DTTDiffTypePK||(DTTDiffTypePK={})),function(t){t[t.DTPK_top=1]="DTPK_top",t[t.DTPK_bottom=2]="DTPK_bottom",t[t.DTPK_right=3]="DTPK_right",t[t.DTPK_left=4]="DTPK_left",t[t.DTPK_front=5]="DTPK_front",t[t.DTPK_back=6]="DTPK_back",t[t.DTPK_bottom_Corner=7]="DTPK_bottom_Corner",t[t.DTPK_right_CornerB=8]="DTPK_right_CornerB",t[t.DTPK_right_CornerD=9]="DTPK_right_CornerD",t[t.DTPK_left_CornerA=10]="DTPK_left_CornerA",t[t.DTPK_left_CornerC=11]="DTPK_left_CornerC";}(DTTypeColliderPK||(DTTypeColliderPK={})),function(t){t[t.DTPK_normalFront=1]="DTPK_normalFront",t[t.DTPK_jumpFront=2]="DTPK_jumpFront",t[t.DTPK_dynamicFront=3]="DTPK_dynamicFront",t[t.DTPK_fallDownButtom=4]="DTPK_fallDownButtom";}(DTPlayerDieAniTypePK||(DTPlayerDieAniTypePK={})),function(t){t[t.DTPK_baoxiang=1]="DTPK_baoxiang",t[t.DTPK_daoju=2]="DTPK_daoju",t[t.DTPK_guangmen=3]="DTPK_guangmen",t[t.DTPK_hero_cjb=4]="DTPK_hero_cjb",t[t.DTPK_hero_fj2=5]="DTPK_hero_fj2",t[t.DTPK_hero_sj=6]="DTPK_hero_sj",t[t.DTPK_hero_xy=7]="DTPK_hero_xy",t[t.DTPK_hero_yc=8]="DTPK_hero_yc",t[t.DTPK_jinkuai1=9]="DTPK_jinkuai1",t[t.DTPK_jinkuai2=10]="DTPK_jinkuai2",t[t.DTPK_hero_fj3=11]="DTPK_hero_fj3",t[t.DTPK_hero_fj1=12]="DTPK_hero_fj1",t[t.DTPK_hero_Parachute=13]="DTPK_hero_Parachute",t[t.DTPK_Hero_Binding_Helmet=14]="DTPK_Hero_Binding_Helmet",t[t.DTPK_Hero_Binding_Magnet=15]="DTPK_Hero_Binding_Magnet",t[t.DTPK_UI_defen1_1=16]="DTPK_UI_defen1_1",t[t.DTPK_UI_defen1_2=17]="DTPK_UI_defen1_2",t[t.DTPK_door=18]="DTPK_door",t[t.DTPK_rukou=19]="DTPK_rukou",t[t.DTPK_UI_defen2=20]="DTPK_UI_defen2",t[t.DTPK_UI_chidaoju=21]="DTPK_UI_chidaoju",t[t.DTPK_UI_gaofen=22]="DTPK_UI_gaofen",t[t.DTPK_ui_spark=29]="DTPK_ui_spark",t[t.DTPK_hero_levelup=30]="DTPK_hero_levelup",t[t.DTPK_piqiu=31]="DTPK_piqiu",t[t.DTPK_splash=32]="DTPK_splash",t[t.DTPK_prop_armor2=33]="DTPK_prop_armor2",t[t.DTPK_prop_armor1=34]="DTPK_prop_armor1",t[t.DTPK_ui_build=35]="DTPK_ui_build",t[t.DTPK_scene_open=36]="DTPK_scene_open",t[t.DTPK_UI_pa=37]="DTPK_UI_pa",t[t.DTPK_UI_lookmap=38]="DTPK_UI_lookmap",t[t.DTPK_UI_surprise=39]="DTPK_UI_surprise",t[t.DTPK_Hero_Blue_plane=40]="DTPK_Hero_Blue_plane",t[t.DTPK_UI_eag1=41]="DTPK_UI_eag1",t[t.DTPK_UI_eag2=42]="DTPK_UI_eag2",t[t.DTPK_light_bus1=43]="DTPK_light_bus1",t[t.DTPK_light_car1=44]="DTPK_light_car1",t[t.DTPK_light_car2=45]="DTPK_light_car2",t[t.DTPK_light_car3=46]="DTPK_light_car3",t[t.DTPK_light_car4=47]="DTPK_light_car4",t[t.DTPK_light_truck1=48]="DTPK_light_truck1",t[t.DTPK_hero_Football=49]="DTPK_hero_Football",t[t.DTPK_ui_space=50]="DTPK_ui_space",t[t.DTPK_huaban=51]="DTPK_huaban",t[t.DTPK_hero_shanggan=52]="DTPK_hero_shanggan",t[t.DTPK_hero_shangpo=53]="DTPK_hero_shangpo",t[t.DTPK_huaban0=54]="DTPK_huaban0",t[t.DTPK_huabangendouyun=55]="DTPK_huabangendouyun",t[t.DTPK_huabandaodan=56]="DTPK_huabandaodan",t[t.DTPK_huabanfeitan=57]="DTPK_huabanfeitan",t[t.DTPK_huabanmotuo=58]="DTPK_huabanmotuo",t[t.DTPK_huabanfeiji=59]="DTPK_huabanfeiji";}(DTEffectIdPK||(DTEffectIdPK={})),function(t){t[t.DTPK_Roadblock=1]="DTPK_Roadblock",t[t.DTPK_Currency=2]="DTPK_Currency",t[t.DTPK_Gear=3]="DTPK_Gear",t[t.DTPK_Event=4]="DTPK_Event",t[t.DTPK_CurrencyGroup=5]="DTPK_CurrencyGroup",t[t.DTPK_Ground=6]="DTPK_Ground",t[t.DTPK_Model=7]="DTPK_Model",t[t.DTPK_Teach=8]="DTPK_Teach",t[t.DTPK_AiPath=9]="DTPK_AiPath",t[t.DTPK_Tunnel=10]="DTPK_Tunnel";}(DTBIObjectTypeV2PK||(DTBIObjectTypeV2PK={})),function(t){t[t.DTPK_difficulty=1]="DTPK_difficulty",t[t.DTPK_Prop_Double=2]="DTPK_Prop_Double",t[t.DTPK_Prop_Helmet=3]="DTPK_Prop_Helmet",t[t.DTPK_Prop_Magnet=4]="DTPK_Prop_Magnet",t[t.DTPK_Prop_Plane=5]="DTPK_Prop_Plane",t[t.DTPK_Prop_Double_Score=6]="DTPK_Prop_Double_Score",t[t.DTPK_Prop_Add_Firecracker=7]="DTPK_Prop_Add_Firecracker",t[t.DTPK_Prop_Add_TreasureBox=8]="DTPK_Prop_Add_TreasureBox",t[t.DTPK_Event_ChangeMap=9]="DTPK_Event_ChangeMap",t[t.DTPK_Event_Burrow=10]="DTPK_Event_Burrow",t[t.DTPK_Event_BangbangTang=11]="DTPK_Event_BangbangTang",t[t.DTPK_Event_PiQiu=12]="DTPK_Event_PiQiu",t[t.DTPK_Event_WuLingSuo=13]="DTPK_Event_WuLingSuo",t[t.DTPK_Event_NengLiangBaoShi=14]="DTPK_Event_NengLiangBaoShi",t[t.DTPK_Event_XiaoShouQiang=15]="DTPK_Event_XiaoShouQiang",t[t.DTPK_Event_InTunnel=16]="DTPK_Event_InTunnel",t[t.DTPK_Event_OutTunnel=17]="DTPK_Event_OutTunnel",t[t.DTPK_Event_InHitEnemy=18]="DTPK_Event_InHitEnemy",t[t.DTPK_Event_OutHitEnemy=19]="DTPK_Event_OutHitEnemy",t[t.DTPK_Event_ChangeCurve=20]="DTPK_Event_ChangeCurve",t[t.DTPK_Event_Egg_color=21]="DTPK_Event_Egg_color",t[t.DTPK_Event_Egg_golden=22]="DTPK_Event_Egg_golden",t[t.DTPK_Event_Egg_blue=23]="DTPK_Event_Egg_blue",t[t.DTPK_Event_Egg_green=24]="DTPK_Event_Egg_green",t[t.DTPK_Event_KeepBall=25]="DTPK_Event_KeepBall",t[t.DTPK_Event_SeeBall=26]="DTPK_Event_SeeBall",t[t.DTPK_Event_ShootBall=27]="DTPK_Event_ShootBall",t[t.DTPK_Event_Chest=28]="DTPK_Event_Chest",t[t.DTPK_Event_HuaBan=29]="DTPK_Event_HuaBan",t[t.DTPK_Event_Fjump=30]="DTPK_Event_Fjump",t[t.DTPK_Event_Rjump=31]="DTPK_Event_Rjump",t[t.DTPK_Event_Ljump=32]="DTPK_Event_Ljump";}(DTBIEventTypePK||(DTBIEventTypePK={})),function(t){t[t.DTPK_home_bgm=3001]="DTPK_home_bgm",t[t.DTPK_run_bgm=3002]="DTPK_run_bgm",t[t.DTPK_move_rl=3003]="DTPK_move_rl",t[t.DTPK_move_jump1=3004]="DTPK_move_jump1",t[t.DTPK_move_jump2=3005]="DTPK_move_jump2",t[t.DTPK_move_down2=3006]="DTPK_move_down2",t[t.DTPK_move_down1=3007]="DTPK_move_down1",t[t.DTPK_none1=3008]="DTPK_none1",t[t.DTPK_get_gold=3009]="DTPK_get_gold",t[t.DTPK_none2=3010]="DTPK_none2",t[t.DTPK_good_grades2=3011]="DTPK_good_grades2",t[t.DTPK_none3=3012]="DTPK_none3",t[t.DTPK_none4=3013]="DTPK_none4",t[t.DTPK_none5=3014]="DTPK_none5",t[t.DTPK_none6=3015]="DTPK_none6",t[t.DTPK_none7=3016]="DTPK_none7",t[t.DTPK_none8=3017]="DTPK_none8",t[t.DTPK_none9=3018]="DTPK_none9",t[t.DTPK_none10=3019]="DTPK_none10",t[t.DTPK_none11=3020]="DTPK_none11",t[t.DTPK_none12=3021]="DTPK_none12",t[t.DTPK_ui_butten1=3022]="DTPK_ui_butten1",t[t.DTPK_ui_butten2=3023]="DTPK_ui_butten2",t[t.DTPK_gold_doble=3024]="DTPK_gold_doble",t[t.DTPK_score_doubles=3025]="DTPK_score_doubles",t[t.DTPK_car_hoot1=3026]="DTPK_car_hoot1",t[t.DTPK_car_hoot2=3027]="DTPK_car_hoot2",t[t.DTPK_fifi_jump1=3028]="DTPK_fifi_jump1",t[t.DTPK_fifi_down1=3029]="DTPK_fifi_down1",t[t.DTPK_dullman_jump1=3030]="DTPK_dullman_jump1",t[t.DTPK_plane_sound=3031]="DTPK_plane_sound",t[t.DTPK_drowning_sound=3032]="DTPK_drowning_sound",t[t.DTPK_car_passing1=3033]="DTPK_car_passing1",t[t.DTPK_car_passing2=3034]="DTPK_car_passing2",t[t.DTPK_side_crash=3035]="DTPK_side_crash",t[t.DTPK_switch_homepage=3036]="DTPK_switch_homepage",t[t.DTPK_slipping_sound=3037]="DTPK_slipping_sound",t[t.DTPK_pigman_prepared=3038]="DTPK_pigman_prepared",t[t.DTPK_fifi_prepared=3039]="DTPK_fifi_prepared",t[t.DTPK_dullman_prepared=3040]="DTPK_dullman_prepared",t[t.DTPK_pigman_selected=3041]="DTPK_pigman_selected",t[t.DTPK_fifi_selected=3042]="DTPK_fifi_selected",t[t.DTPK_dullman_selected=3043]="DTPK_dullman_selected",t[t.DTPK_pigman_slide=3044]="DTPK_pigman_slide",t[t.DTPK_fifi_slide=3045]="DTPK_fifi_slide",t[t.DTPK_dullman_slide=3046]="DTPK_dullman_slide",t[t.DTPK_guide_1=3047]="DTPK_guide_1",t[t.DTPK_guide_2=3048]="DTPK_guide_2",t[t.DTPK_guide_3=3049]="DTPK_guide_3",t[t.DTPK_guide_4=3050]="DTPK_guide_4",t[t.DTPK_guide_5=3051]="DTPK_guide_5",t[t.DTPK_guide_6=3052]="DTPK_guide_6",t[t.DTPK_guide_7=3053]="DTPK_guide_7";}(DTSoundIdPK||(DTSoundIdPK={})),function(t){t[t.DTPK_music=1]="DTPK_music",t[t.DTPK_sound=2]="DTPK_sound",t[t.DTPK_quality=3]="DTPK_quality";}(DTSettingTypePK||(DTSettingTypePK={})),function(t){t[t.DTPK_InRunning=1]="DTPK_InRunning",t[t.DTPK_InHomeUpgrade=2]="DTPK_InHomeUpgrade",t[t.DTPK_UpgradeSc=3]="DTPK_UpgradeSc",t[t.DTPK_UpgradeSc_Finish=4]="DTPK_UpgradeSc_Finish",t[t.DTPK_InTreasureBox=5]="DTPK_InTreasureBox",t[t.DTPK_TreasureBoxOpenFinish=6]="DTPK_TreasureBoxOpenFinish",t[t.DTPK_TreasureBuyOpen=7]="DTPK_TreasureBuyOpen",t[t.DTPK_TreasureClickFreeFinish=8]="DTPK_TreasureClickFreeFinish",t[t.DTPK_Finish=100]="DTPK_Finish";}(DTTeachIdPK||(DTTeachIdPK={})),function(t){t[t.DTPK_help=1]="DTPK_help",t[t.DTPK_kfs=2]="DTPK_kfs";}(DTGameInfoStringIdPK||(DTGameInfoStringIdPK={})),function(t){t[t.DTPK_unfinished=1]="DTPK_unfinished",t[t.DTPK_finished=2]="DTPK_finished";}(DTTaskStatePK||(DTTaskStatePK={})),function(t){t[t.DTPK_gather=1]="DTPK_gather",t[t.DTPK_useProp=2]="DTPK_useProp",t[t.DTPK_traveled=3]="DTPK_traveled",t[t.DTPK_through=4]="DTPK_through",t[t.DTPK_getGold=5]="DTPK_getGold",t[t.DTPK_lockAction=6]="DTPK_lockAction",t[t.DTPK_getTreasure=7]="DTPK_getTreasure",t[t.DTPK_battle=8]="DTPK_battle",t[t.DTPK_flyGetGold=9]="DTPK_flyGetGold";}(DTTaskTypePK||(DTTaskTypePK={})),function(t){t[t.DTPK_boxclose=1]="DTPK_boxclose",t[t.DTPK_boxopen=2]="DTPK_boxopen";}(DTBoxPK||(DTBoxPK={})),function(t){t[t.DTPK_Up=1]="DTPK_Up",t[t.DTPK_Down=2]="DTPK_Down",t[t.DTPK_Left=3]="DTPK_Left",t[t.DTPK_Right=4]="DTPK_Right",t[t.DTPK_Finish=5]="DTPK_Finish";}(DTGameTeachTypePK||(DTGameTeachTypePK={}));var DTFUIInterfaceIdPK,DTFUIWindowIdPK;!function(t){t[t.DTPK_InterfaceId_Invaild=0]="DTPK_InterfaceId_Invaild",t[t.DTPK_Loading=1]="DTPK_Loading",t[t.DTPK_ScoreUI=2]="DTPK_ScoreUI",t[t.DTPK_ReviveUI=3]="DTPK_ReviveUI",t[t.DTPK_GameUI=4]="DTPK_GameUI",t[t.DTPK_PauseUI=5]="DTPK_PauseUI",t[t.DTPK_MainUI=7]="DTPK_MainUI",t[t.DTPK_RankUI=9]="DTPK_RankUI",t[t.DTPK_PfuBanner=10]="DTPK_PfuBanner",t[t.DTPK_LogoUI=11]="DTPK_LogoUI",t[t.DTPK_Scene=12]="DTPK_Scene",t[t.DTPK_GiftUI=13]="DTPK_GiftUI",t[t.DTPK_GiftTiShiUI=14]="DTPK_GiftTiShiUI",t[t.DTPK_kaiping=15]="DTPK_kaiping",t[t.DTPK_Huaban=16]="DTPK_Huaban",t[t.DTPK_LunpanUi=17]="DTPK_LunpanUi",t[t.DTPK_HuodeUI=18]="DTPK_HuodeUI",t[t.DTPK_PopupUI=1001]="DTPK_PopupUI";}(DTFUIInterfaceIdPK||(DTFUIInterfaceIdPK={})),function(t){t[t.DTPK_WindowId_Invaild=0]="DTPK_WindowId_Invaild",t[t.DTPK_Loading=1]="DTPK_Loading",t[t.DTPK_ScoreUI=2]="DTPK_ScoreUI",t[t.DTPK_ReviveUI=3]="DTPK_ReviveUI",t[t.DTPK_GameUI=4]="DTPK_GameUI",t[t.DTPK_PauseUI=5]="DTPK_PauseUI",t[t.DTPK_MainUI=7]="DTPK_MainUI",t[t.DTPK_RankUI=9]="DTPK_RankUI",t[t.DTPK_PfuBanner=10]="DTPK_PfuBanner",t[t.DTPK_Logo=11]="DTPK_Logo",t[t.DTPK_Scene=12]="DTPK_Scene",t[t.DTPK_GiftUI=13]="DTPK_GiftUI",t[t.DTPK_GiftTiShiUI=14]="DTPK_GiftTiShiUI",t[t.DTPK_kaiping=15]="DTPK_kaiping",t[t.DTPK_Huaban=16]="DTPK_Huaban",t[t.DTPK_LunpanUi=17]="DTPK_LunpanUi",t[t.DTPK_HuodeUI=18]="DTPK_HuodeUI",t[t.DTPK_DayUI=1002]="DTPK_DayUI",t[t.DTPK_DialogUI=1003]="DTPK_DialogUI",t[t.DTPK_QiandaoUI=1004]="DTPK_QiandaoUI",t[t.DTPK_SevenDayUI=1005]="DTPK_SevenDayUI",t[t.DTPK_RewardDialogUI=1006]="DTPK_RewardDialogUI",t[t.DTPK_NextSevenDayUI=1007]="DTPK_NextSevenDayUI",t[t.DTPK_TreasureUI=1008]="DTPK_TreasureUI",t[t.DTPK_Tips=1009]="DTPK_Tips";}(DTFUIWindowIdPK||(DTFUIWindowIdPK={}));var WindowReflectRegister=function(){function t(){}
return t.Register=function(){Laya.ClassUtils.regClass("Loading",FUIWindow_Loading),Laya.ClassUtils.regClass("LoadingVO",FUIWindow_LoadingVO),Laya.ClassUtils.regClass("ScoreUI",FUIWindow_ScoreUI),Laya.ClassUtils.regClass("ScoreUIVO",FUIWindow_ScoreUIVO),Laya.ClassUtils.regClass("ReviveUI",FUIWindow_ReviveUI),Laya.ClassUtils.regClass("ReviveUIVO",FUIWindow_ReviveUIVO),Laya.ClassUtils.regClass("GameUI",FUIWindow_GameUI),Laya.ClassUtils.regClass("GameUIVO",FUIWindow_GameUIVO),Laya.ClassUtils.regClass("PauseUI",FUIWindow_PauseUI),Laya.ClassUtils.regClass("PauseUIVO",FUIWindow_PauseUIVO),Laya.ClassUtils.regClass("MainUI",FUIWindow_MainUI),Laya.ClassUtils.regClass("MainUIVO",FUIWindow_MainUIVO),Laya.ClassUtils.regClass("RankUI",FUIWindow_RankUI),Laya.ClassUtils.regClass("RankUIVO",FUIWindow_RankUIVO),Laya.ClassUtils.regClass("PfuBanner",FUIWindow_PfuBanner),Laya.ClassUtils.regClass("PfuBannerVO",FUIWindow_PfuBannerVO),Laya.ClassUtils.regClass("Logo",FUIWindow_Logo),Laya.ClassUtils.regClass("LogoVO",FUIWindow_LogoVO),Laya.ClassUtils.regClass("Scene",FUIWindow_Scene),Laya.ClassUtils.regClass("SceneVO",FUIWindow_SceneVO),Laya.ClassUtils.regClass("GiftUI",FUIWindow_GiftUI),Laya.ClassUtils.regClass("GiftUIVO",FUIWindow_GiftUIVO),Laya.ClassUtils.regClass("GiftTiShiUI",FUIWindow_GiftTiShiUI),Laya.ClassUtils.regClass("GiftTiShiUIVO",FUIWindow_GiftTiShiUIVO),Laya.ClassUtils.regClass("kaiping",FUIWindow_kaiping),Laya.ClassUtils.regClass("kaipingVO",FUIWindow_kaipingVO),Laya.ClassUtils.regClass("Huaban",FUIWindow_Huaban),Laya.ClassUtils.regClass("HuabanVO",FUIWindow_HuabanVO),Laya.ClassUtils.regClass("LunpanUi",FUIWindow_LunpanUi),Laya.ClassUtils.regClass("LunpanUiVO",FUIWindow_LunpanUiVO),Laya.ClassUtils.regClass("HuodeUI",FUIWindow_HuodeUI),Laya.ClassUtils.regClass("HuodeUIVO",FUIWindow_HuodeUIVO),Laya.ClassUtils.regClass("DayUI",FUIWindow_DayUI),Laya.ClassUtils.regClass("DayUIVO",FUIWindow_DayUIVO),Laya.ClassUtils.regClass("DialogUI",FUIWindow_DialogUI),Laya.ClassUtils.regClass("DialogUIVO",FUIWindow_DialogUIVO),Laya.ClassUtils.regClass("QiandaoUI",FUIWindow_QiandaoUI),Laya.ClassUtils.regClass("QiandaoUIVO",FUIWindow_QiandaoUIVO),Laya.ClassUtils.regClass("SevenDayUI",FUIWindow_SevenDayUI),Laya.ClassUtils.regClass("SevenDayUIVO",FUIWindow_SevenDayUIVO),Laya.ClassUtils.regClass("RewardDialogUI",FUIWindow_RewardDialogUI),Laya.ClassUtils.regClass("RewardDialogUIVO",FUIWindow_RewardDialogUIVO),Laya.ClassUtils.regClass("NextSevenDayUI",FUIWindow_NextSevenDayUI),Laya.ClassUtils.regClass("NextSevenDayUIVO",FUIWindow_NextSevenDayUIVO),Laya.ClassUtils.regClass("TreasureUI",FUIWindow_TreasureUI),Laya.ClassUtils.regClass("TreasureUIVO",FUIWindow_TreasureUIVO),Laya.ClassUtils.regClass("Tips",FUIWindow_Tips),Laya.ClassUtils.regClass("TipsVO",FUIWindow_TipsVO);},t;}(),fui;!function(t){!function(t){var e=function(){function e(){}
return e.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(t.UI_Loading.URL,fuiVO.Main.UI_LoadingVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnhs.URL,fuiVO.Main.UI_btnhsVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_jindutiao.URL,fuiVO.Main.UI_jindutiaoVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_List_game.URL,fuiVO.Main.UI_List_gameVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_Btn_HS_DAN_2.URL,fuiVO.Main.UI_Btn_HS_DAN_2VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_BannerImg.URL,fuiVO.Main.UI_BannerImgVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_PfuBanner.URL,fuiVO.Main.UI_PfuBannerVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_Logo.URL,fuiVO.Main.UI_LogoVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_kaiping.URL,fuiVO.Main.UI_kaipingVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_Btn_HS_close.URL,fuiVO.Main.UI_Btn_HS_closeVO);},e;}();t.MainBinder=e;}(t.Main||(t.Main={}));}(fui||(fui={}));var fui;!function(t){!function(t){var e=function(){function e(){}
return e.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(t.UI_iconTx.URL,fuiVO.Game.UI_iconTxVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_huabangift.URL,fuiVO.Game.UI_huabangiftVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_tishi.URL,fuiVO.Game.UI_tishiVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnYellow.URL,fuiVO.Game.UI_btnYellowVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnYellowBig.URL,fuiVO.Game.UI_btnYellowBigVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnDianJiTiaoGuo.URL,fuiVO.Game.UI_btnDianJiTiaoGuoVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnzhuye.URL,fuiVO.Game.UI_btnzhuyeVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnHuaBan.URL,fuiVO.Game.UI_btnHuaBanVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_libao.URL,fuiVO.Game.UI_libaoVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_qiandao.URL,fuiVO.Game.UI_qiandaoVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnBig5588.URL,fuiVO.Game.UI_btnBig5588VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_gameItem.URL,fuiVO.Game.UI_gameItemVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_xzchangjing.URL,fuiVO.Game.UI_xzchangjingVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_rankItem1.URL,fuiVO.Game.UI_rankItem1VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_Com_fast.URL,fuiVO.Game.UI_Com_fastVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_huaban2.URL,fuiVO.Game.UI_huaban2VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_daojulingqu.URL,fuiVO.Game.UI_daojulingquVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnMoregame.URL,fuiVO.Game.UI_btnMoregameVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnfenxiang.URL,fuiVO.Game.UI_btnfenxiangVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_lunpan.URL,fuiVO.Game.UI_lunpanVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_rankItem2.URL,fuiVO.Game.UI_rankItem2VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_GiftTiShiUI.URL,fuiVO.Game.UI_GiftTiShiUIVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnYellowSmall1.URL,fuiVO.Game.UI_btnYellowSmall1VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_zhiyin.URL,fuiVO.Game.UI_zhiyinVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_scorelp.URL,fuiVO.Game.UI_scorelpVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_daoju.URL,fuiVO.Game.UI_daojuVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnGift.URL,fuiVO.Game.UI_btnGiftVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_zhiyin_1.URL,fuiVO.Game.UI_zhiyin_1VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnBlue2.URL,fuiVO.Game.UI_btnBlue2VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_LunpanUi.URL,fuiVO.Game.UI_LunpanUiVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_Comfenxiang.URL,fuiVO.Game.UI_ComfenxiangVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnXiaoan.URL,fuiVO.Game.UI_btnXiaoanVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_score3.URL,fuiVO.Game.UI_score3VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_fuhuo.URL,fuiVO.Game.UI_fuhuoVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_huabanPanel.URL,fuiVO.Game.UI_huabanPanelVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnlvkan.URL,fuiVO.Game.UI_btnlvkanVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_Com_tianfu.URL,fuiVO.Game.UI_Com_tianfuVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_score1.URL,fuiVO.Game.UI_score1VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_HuodeUI.URL,fuiVO.Game.UI_HuodeUIVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_item1.URL,fuiVO.Game.UI_item1VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btntuhuangxiao.URL,fuiVO.Game.UI_btntuhuangxiaoVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnGo2.URL,fuiVO.Game.UI_btnGo2VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_jinbilibao.URL,fuiVO.Game.UI_jinbilibaoVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnGreen1.URL,fuiVO.Game.UI_btnGreen1VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_jindutiao.URL,fuiVO.Game.UI_jindutiaoVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_kanguangao_1.URL,fuiVO.Game.UI_kanguangao_1VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnGuanBi.URL,fuiVO.Game.UI_btnGuanBiVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_score.URL,fuiVO.Game.UI_scoreVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_iconBig2.URL,fuiVO.Game.UI_iconBig2VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnGo3.URL,fuiVO.Game.UI_btnGo3VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_JinbilibaoUI.URL,fuiVO.Game.UI_JinbilibaoUIVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_qianDaoBiaoQian.URL,fuiVO.Game.UI_qianDaoBiaoQianVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnRight.URL,fuiVO.Game.UI_btnRightVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_GameUI.URL,fuiVO.Game.UI_GameUIVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_list_moregameChild.URL,fuiVO.Game.UI_list_moregameChildVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_GiftUI.URL,fuiVO.Game.UI_GiftUIVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_paihang.URL,fuiVO.Game.UI_paihangVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnMianfeijinbi.URL,fuiVO.Game.UI_btnMianfeijinbiVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnGreen.URL,fuiVO.Game.UI_btnGreenVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_ItemUi.URL,fuiVO.Game.UI_ItemUiVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_roll.URL,fuiVO.Game.UI_rollVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnBlue3.URL,fuiVO.Game.UI_btnBlue3VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_MainUI.URL,fuiVO.Game.UI_MainUIVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btntuhuang.URL,fuiVO.Game.UI_btntuhuangVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_playerIconItem.URL,fuiVO.Game.UI_playerIconItemVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_rankItem3.URL,fuiVO.Game.UI_rankItem3VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnZaiLai.URL,fuiVO.Game.UI_btnZaiLaiVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnlan.URL,fuiVO.Game.UI_btnlanVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnLeft.URL,fuiVO.Game.UI_btnLeftVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_PauseUI.URL,fuiVO.Game.UI_PauseUIVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_QiandaoUI.URL,fuiVO.Game.UI_QiandaoUIVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnDianJi.URL,fuiVO.Game.UI_btnDianJiVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnzi1.URL,fuiVO.Game.UI_btnzi1VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_lv.URL,fuiVO.Game.UI_lvVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_huabantip.URL,fuiVO.Game.UI_huabantipVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_RankUI.URL,fuiVO.Game.UI_RankUIVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_levelItem.URL,fuiVO.Game.UI_levelItemVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnGo1.URL,fuiVO.Game.UI_btnGo1VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_zujian_lp.URL,fuiVO.Game.UI_zujian_lpVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_Huaban.URL,fuiVO.Game.UI_HuabanVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_sceneItem.URL,fuiVO.Game.UI_sceneItemVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_DialogUI.URL,fuiVO.Game.UI_DialogUIVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_pauseCom.URL,fuiVO.Game.UI_pauseComVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_ReviveUI.URL,fuiVO.Game.UI_ReviveUIVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_huabanItem.URL,fuiVO.Game.UI_huabanItemVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_Scene.URL,fuiVO.Game.UI_SceneVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_ScoreUI.URL,fuiVO.Game.UI_ScoreUIVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btntuhuang1.URL,fuiVO.Game.UI_btntuhuang1VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_tianfufadong.URL,fuiVO.Game.UI_tianfufadongVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_zanting.URL,fuiVO.Game.UI_zantingVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_SevenDayUI.URL,fuiVO.Game.UI_SevenDayUIVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnBlue.URL,fuiVO.Game.UI_btnBlueVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_zhishi.URL,fuiVO.Game.UI_zhishiVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btntuhuangSp.URL,fuiVO.Game.UI_btntuhuangSpVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnGreenSmall.URL,fuiVO.Game.UI_btnGreenSmallVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_TimeoutUI.URL,fuiVO.Game.UI_TimeoutUIVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnYellowSmall.URL,fuiVO.Game.UI_btnYellowSmallVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_Com_next.URL,fuiVO.Game.UI_Com_nextVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_score4.URL,fuiVO.Game.UI_score4VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_propItme.URL,fuiVO.Game.UI_propItmeVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_game_defen.URL,fuiVO.Game.UI_game_defenVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_rankItem5.URL,fuiVO.Game.UI_rankItem5VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btn5588.URL,fuiVO.Game.UI_btn5588VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_rankItem4.URL,fuiVO.Game.UI_rankItem4VO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnxhb.URL,fuiVO.Game.UI_btnxhbVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_btnzp.URL,fuiVO.Game.UI_btnzpVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_iconSmall.URL,fuiVO.Game.UI_iconSmallVO),fairygui.UIObjectFactory.setPackageItemExtension(t.UI_Tips.URL,fuiVO.Game.UI_TipsVO);},e;}();t.GameBinder=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fui;!function(t){var e=function(){function e(){}
return e.bindAll=function(){t.Game.GameBinder.bindAll(),t.Main.MainBinder.bindAll();},e;}();t.FairyGUIBinders=e;}(fui||(fui={}));var PfuConfig=function(){function t(){}
return t.InitConfig=function(e,n){var i=[{url:"res/special/pfuconfig.json",type:Laya.Loader.JSON}];Laya.loader.load(i,Laya.Handler.create(this,function(){var r=Laya.loader.getRes(i[0].url);t.Config=r,n.call(e);}));},t.GetCdnPath=function(){return t.Config.cdnPath+t.Config.version+"/";},t.MaJia=0,t.ZhengBan=1,t.QingLiangYixia=2,t.ShuJiaBan=3,t.BiyeJi=4,t.XiangSu=5,t.XiaoZhuPeiQi=6,t;}(),PfuConfigBean=function t(){},PlayerAnimationName=function(){function t(){}
return t.ACTION_NORMAL_HERO_RUN="hero_run",t.ACTION_NORMAL_HERO_MOVE_LEF="hero_run_left",t.ACTION_NORMAL_HERO_MOVE_RIGHT="hero_run_right",t.ACTION_NORMAL_HERO_JUMP="hero_jump",t.ACTION_NORMAL_JUMP_LEFT="hero_jump_left",t.ACTION_NORMAL_JUMP_RIGHT="hero_jump_right",t.ACTION_NORMAL_HERO_JUMP_HELLO="hero_jump_hello",t.ACTION_NORMAL_HERO_JUMP_ROLL1="hero_jump_roll1",t.ACTION_NORMAL_HERO_JUMP_ROLL2="hero_jump_roll2",t.ACTION_NORMAL_HERO_JUMP_SETDOWN="hero_jump_setdown",t.ACTION_NORMAL_HERO_DOWN="hero_down",t.ACTION_NORMAL_HERO_SHOVEL="hero_shovel",t.ACTION_NORMAL_HERO_TRIP="hero_trip",t.ACTION_NORMAL_HERO_STAGGER_L="hero_stagger_l",t.ACTION_NORMAL_HERO_STAGGER_R="hero_stagger_r",t.ACTION_NORMAL_HERO_LOSE1_01="hero_lost1_01",t.ACTION_NORMAL_HERO_LOSE1_02="hero_lost1_02",t.ACTION_NORMAL_HERO_LOSE2="hero_lost2",t.ACTION_NORMAL_HERO_LOSE3="hero_lost3",t.ACTION_NORMAL_HERO_FLAY_TAKEOFF="hero_takeoff",t.ACTION_NORMAL_HERO_FLAYF="hero_flay",t.ACTION_NORMAL_HERO_FLAYF_LAND="hero_flay_land",t.ACTION_NORMAL_HERO_DRIVE_TAKEOFF="hero_drive",t.ACTION_NORMAL_HERO_FLAY_LEFT="hero_flay_left",t.ACTION_NORMAL_HERO_FLAY_RIGHT="hero_flay_right",t.ACTION_NORMAL_HERO_FLAY_FALL="hero_flay_fall",t.ACTION_NORMAL_HERO_PARACHUTE="hero_parachute",t.ACTION_NORMAL_HERO_PARACHUTE_LEFT="hero_flay_land_l",t.ACTION_NORMAL_HERO_PARACHUTE_RIGHT="hero_flay_land_r",t.ACTION_NORMAL_HERO_FREE="hero_free",t.HERO_NORMAL_ACTION_HERO_BUILD3="hero_build3",t.ACTION_NORMAL_HERO_MOVEL="hero_mover",t.ACTION_NORMAL_HERO_MOVER="hero_movel",t.HB_DOWM="hero_skate_down",t.HB_RUN="hero_skate_run",t.HB_JUMP="hero_skate_jump",t.HB_JUMP01="hero_skate_jump01",t.HB_JUMP02="hero_skate_jump02",t.HB_JUMP03="hero_skate_jump03",t.HB_LEFT="hero_skate_left",t.HB_RIGHT="hero_skate_right",t.HB_SETDOWN="hero_skate_setdown",t.HB_SHOVEL="hero_skate_shovel",t.HB_SKIDDING="hero_skate_skidding",t.HB_JUMP05="hero_skate_jump05",t.HB_JUMP04="hero_skate_jump04",t.HB_GET="hero_skate_up_skb",t;}(),StatisticsEventSite,Global=function(){function t(){}
return t.InitComShare=function(t,e){e.visible=!1;},t.GetComShareVisible=function(t){return!1;},t.jumpToGameBox=function(){},t.getConstantsInfo=function(){return null==this.m_constants&&(this.m_constants=DTConstantInfoMGR.getInstance().DTConstantsInfoDIC.get(1)),this.m_constants;},t.showGameDialog=function(t,e,n,i){var r=PF.FUIPopupManager.GetInstance().ShowPopup(DTFUIWindowIdPK.DTPK_DialogUI);r.content=t,r.title=i,r.enterFun=e,r.closeFun=n,r.Init();},t.IsShowShareReviveGameButton=function(){return PfuSdk.GetOLParamInt("share")==PfuSwitch.ON;},t.SetFocusHandler=function(t,e){GameMgr.getInstance().focusHandler=e,GameMgr.getInstance().focusHandlerCaller=t;},t.ShareWith2Second=function(t,e){PfuSdk.ShareAward(this,function(n,i){e.call(t,n,i);});},t.shareGame=function(t,e,n){void 0===n&&(n=1),PfuSdk.Share(this);},t.showIncentiveAD=function(t,e,n){var i=this;PlatformAPI.createVideoAd("",()=>{e.call(t,PfuSdk.SUCCESS);},()=>{PlatformAPI.showToast("Play Ad Failed!")
e&&e.call(t,PfuSdk.VIDEO_SHOW_FAIL);n&&n.call(t);});return;this.StatisticsTotalEvent(1),PfuSdk.Video(this,function(r,a){r==PfuSdk.SUCCESS?(i.StatisticsTotalEvent(3),e.call(t,PfuSdk.SUCCESS)):r==PfuSdk.VIDEO_SHOW_FAIL?(i.showGameDialog(a,function(){PF.FUIPopupManager.GetInstance().ClosePopupTop(),n&&n();},n,"Prompt "),i.StatisticsTotalEvent(2),e.call(t,PfuSdk.VIDEO_SHOW_FAIL)):(i.showGameDialog(a,function(){PF.FUIPopupManager.GetInstance().ClosePopupTop(),n&&n();},n,"Prompt "),i.StatisticsTotalEvent(2),e.call(t,PfuSdk.FAIL));});},t.setPlayerTryState=function(t,e){var n=Date.now();n+=1e3*e,UserDataMgr.getInstance().getPlayer(t).tryTime=n,UserDataMgr.getInstance().SoleSavePlayerInfo();},t.setHuabanTryState=function(t,e){var n=Date.now();n+=1e3*e,UserDataMgr.getInstance().getHuaban(t).tryTime=n,UserDataMgr.getInstance().SoleSaveHuabanInfo();},t.getPlayerDemoTimeSecondInfo=function(t){var e=UserDataMgr.getInstance().getPlayer(t);if(!e.isLocked)return-1;var n=Date.now(),i=e.tryTime-n;return 0<=i?Math.floor(.001*i):0;},t.getHuabanDemoTimeSecondInfo=function(t){var e=UserDataMgr.getInstance().getHuaban(t);if(!e.isLocked)return-1;var n=Date.now(),i=e.tryTime-n;return 0<=i?Math.floor(.001*i):0;},t.setAdTimeInfo=function(t){var e=Date.now();e+=1e3*t,UserDataMgr.getInstance().getUserInfo().adVideoTime=e,UserDataMgr.getInstance().SoleSaveUserInfo();},t.isInAdInCD=function(){var t=UserDataMgr.getInstance().getUserInfo(),e=Date.now();return 0<t.adVideoTime-e;},t.ShowBannerAD=function(){PfuSdk.ShowBanner();},t.hideBannerAD=function(){PfuSdk.HideBanner();},t.refreshBannerAD=function(t){},t.setResourceType=function(){if(WeChatUtils.GetInstance().IsWeGame()){var t=WeChatUtils.GetInstance().GetSystemInfoSync();if("devtools"!=t.brand)return Debug.Log("phone Level"+t.benchmarkLevel),null==t.benchmarkLevel?(Debug.Log("phone Name:"+t.model),-1<t.model.indexOf("iPhone 6")||-1<t.model.indexOf("iPhone 5")?(Game.Constant.isLowRes=!0,StatisticsMgr.Event("benchmarkLevel",{level:4})):(Game.Constant.isLowRes=!1,StatisticsMgr.Event("benchmarkLevel",{level:5}))):(StatisticsMgr.Event("benchmarkLevel",{level:t.benchmarkLevel}),t.benchmarkLevel<5?Game.Constant.isLowRes=!0:Game.Constant.isLowRes=!1),StatisticsMgr.Event("phoneType",{model:t.model}),!1;}},t.StatisticsStartLevelInfo=function(t,e){StatisticsMgr.Event("start_level_"+t,{levelid:t,heroid:e});},t.StatisticsFinishLevelInfo=function(t,e,n){StatisticsMgr.Event("finish_level_"+t,{levelid:t=1,goldcount:e,difficulty:n});},t.StatisticsReviveInfo=function(t){t!=Game.SFREETYPE.fail&&StatisticsMgr.Event("Revive",{freeType:t});},t.StatisticstrialHeroInfo=function(t,e){e!=Game.SFREETYPE.fail&&StatisticsMgr.Event("trialHero",{freeType:e,heroid:t});},t.StatisticstrialHuabanInfo=function(t,e){e!=Game.SFREETYPE.fail&&StatisticsMgr.Event("trialSkateboard",{freeType:e,skateboardid:t});},t.StatisticstrialGetHuaban=function(t,e){e!=Game.SFREETYPE.fail&&StatisticsMgr.Event("getSkateboard",{freeType:e,skateboardid:t});},t.StatisticstrialBuyHuaban=function(t,e){e!=Game.SFREETYPE.fail&&StatisticsMgr.Event("purchaseSkateboard",{freeType:e,skateboardid:t});},t.StatisticstrialClickHuaban=function(){StatisticsMgr.Event("clickSkateboard",{});},t.StatisticstrialClickLingquHuaban=function(){StatisticsMgr.Event("clickGetSkateboard",{});},t.StatisticsUpgradeHeroInfo=function(t,e){e!=Game.SFREETYPE.fail&&StatisticsMgr.Event("upgradeHero",{freeType:e,heroid:t});},t.StatisticsDoubleGoldInfo=function(t,e){e!=Game.SFREETYPE.fail&&StatisticsMgr.Event("doublegold",{freeType:e,goldCount:t});},t.StatisticsGiftAwardInfo=function(t){t!=Game.SFREETYPE.fail&&StatisticsMgr.Event("giftAward",{freeType:t});},t.StatisticsSelectLevelInfo=function(t){t!=Game.SFREETYPE.fail&&StatisticsMgr.Event("selectLevel",{freeType:t});},t.StatisticsPassivityShareInfo=function(){StatisticsMgr.Event("passivityShare",{});},t.StatisticsMoreGameInfo=function(t){StatisticsMgr.Event("moreGame",{name:t});},t.StatisticsBuyCc=function(){StatisticsMgr.Event("purchaseSprint",{});},t.StatisticsHuabanShareNum=function(t){StatisticsMgr.Event("skateboardShareNum",{});},t.StatisticsMovieType=function(t){StatisticsMgr.Event("movieNum",{});},t.StatisticsShareType=function(t){StatisticsMgr.Event("shareNum",{a:!0});},t.StatisticsStartLevelHeroId=function(t){switch(t){case 2001:StatisticsMgr.Event("heroid1",{});break;case 2002:StatisticsMgr.Event("heroid2",{});break;case 2003:StatisticsMgr.Event("heroid3",{});break;case 2004:StatisticsMgr.Event("heroid4",{});break;case 2005:StatisticsMgr.Event("heroid5",{});}},t.StatisticsEndLevel=function(t,e,n){setTimeout(()=>{var gameScore1=Math.floor(n);console.log("to do: game over 1",gameScore1);var boardinfo={};boardinfo.score=gameScore1;boardinfo.board="skateboardy_surfer_hsbrdd";return;LaggedAPI.Scores.save(boardinfo,function(response){if(response.success){console.log("high score saved");}else{console.log(response.errormsg);}});gameover33=2;},0)
StatisticsMgr.Event("gameover",{levelgoldcount:t,leveldifficulty:e,levelscore:n});},t.StatisticsRevive=function(t){switch(t){case 0:StatisticsMgr.Event("revivenum",{});break;case 1:StatisticsMgr.Event("reviveclickmovie",{});break;case 2:StatisticsMgr.Event("revivedemovie",{});break;case 3:StatisticsMgr.Event("revivesumovie",{});break;case 4:StatisticsMgr.Event("reviveshare",{});break;case 5:StatisticsMgr.Event("revivemovshare",{});}},t.StatisticsTryHero=function(t){switch(t){case 2002:StatisticsMgr.Event("trialheroid2",{});break;case 2003:StatisticsMgr.Event("trialheroid3",{});break;case 2004:StatisticsMgr.Event("trialheroid4",{});break;case 2005:StatisticsMgr.Event("trialheroid5",{});}},t.StatisticsTryHero2=function(t){switch(t){case 0:StatisticsMgr.Event("trialheroclickmovie",{});break;case 1:StatisticsMgr.Event("trialherodemovie",{});break;case 2:StatisticsMgr.Event("trialherosumovie",{});break;case 3:StatisticsMgr.Event("trialheroshare",{});break;case 4:StatisticsMgr.Event("trialheromovshare",{});}},t.StatisticsUseHuaban=function(t){switch(t){case 1:StatisticsMgr.Event("skateboardid1",{});break;case 2:StatisticsMgr.Event("skateboardid2",{});break;case 3:StatisticsMgr.Event("skateboardid3",{});break;case 4:StatisticsMgr.Event("skateboardid4",{});break;case 5:StatisticsMgr.Event("skateboardid5",{});break;case 6:StatisticsMgr.Event("skateboardid6",{});break;case 7:StatisticsMgr.Event("skateboardid7",{});}},t.StatisticsTryHuaban=function(t){switch(t){case 2:StatisticsMgr.Event("trialskateboardid2",{});break;case 3:StatisticsMgr.Event("trialskateboardid3",{});break;case 4:StatisticsMgr.Event("trialskateboardid4",{});break;case 5:StatisticsMgr.Event("trialskateboardid5",{});break;case 6:StatisticsMgr.Event("trialskateboardid6",{});break;case 7:StatisticsMgr.Event("trialskateboardid7",{});}},t.StatisticsTryHuaban2=function(t){switch(t){case 0:StatisticsMgr.Event("trialskclickmovie",{});break;case 1:StatisticsMgr.Event("trialskdemovie",{});break;case 2:StatisticsMgr.Event("trialsksumovie",{});break;case 3:StatisticsMgr.Event("trialskshare",{});break;case 4:StatisticsMgr.Event("trialskmovshare",{});}},t.StatisticsInGameGetHuaban=function(t){switch(t){case 0:StatisticsMgr.Event("getskclickmovie",{});break;case 1:StatisticsMgr.Event("getskdemovie",{});break;case 2:StatisticsMgr.Event("getsksumovie",{});break;case 3:StatisticsMgr.Event("getskshare",{});break;case 4:StatisticsMgr.Event("getskmovshare",{});}},t.StatisticsBuyHuaban=function(t){switch(t){case 2:StatisticsMgr.Event("purskateboardid2",{});break;case 3:StatisticsMgr.Event("purskateboardid3",{});break;case 4:StatisticsMgr.Event("purskateboardid4",{});break;case 5:StatisticsMgr.Event("purskateboardid5",{});break;case 6:StatisticsMgr.Event("purskateboardid6",{});break;case 7:StatisticsMgr.Event("purskateboardid7",{});}},t.StatisticsDoubleCoin=function(t){switch(t){case 0:StatisticsMgr.Event("doublegoldclickmovie",{});break;case 1:StatisticsMgr.Event("doublegolddemovie",{});break;case 2:StatisticsMgr.Event("doublegoldsumovie",{});break;case 3:StatisticsMgr.Event("doublegoldshare",{});break;case 4:StatisticsMgr.Event("doublegoldmovshare",{});}},t.StatisticsBuyChongci=function(t){switch(t){case 0:StatisticsMgr.Event("clickpursprint",{});break;case 1:StatisticsMgr.Event("pursprint",{});break;case 2:StatisticsMgr.Event("sprintclickmovie",{});break;case 3:StatisticsMgr.Event("sprintdemovie",{});break;case 4:StatisticsMgr.Event("sprintsumovie",{});}},t.StatisticsUIButtonClick=function(t){switch(t){case 0:StatisticsMgr.Event("clickskboard",{});break;case 1:StatisticsMgr.Event("clickgetskboard",{});break;case 2:StatisticsMgr.Event("clicksettleshare",{});break;case 3:StatisticsMgr.Event("clickreshare",{});break;case 4:StatisticsMgr.Event("clickinvite",{});break;case 5:StatisticsMgr.Event("invitesu",{});break;case 6:StatisticsMgr.Event("clicktopshare",{});break;case 7:StatisticsMgr.Event("invitesutotal",{});}},t.StatisticsTotalEvent=function(t){switch(t){case 0:StatisticsMgr.Event("clicktopshare",{});break;case 1:StatisticsMgr.Event("movieclicknum",{});break;case 2:StatisticsMgr.Event("moviedenum",{});break;case 3:StatisticsMgr.Event("moviesunum",{});break;case 4:StatisticsMgr.Event("sharetotalnum",{});}},t.gameBoxId="wxe675b6aad9612c74",t.gameBoxWXId="wxe675b6aad9612c74",t.loadResourceHomeId=1,t.m_constants=null,t;}();!function(t){t[t.tryGame=1]="tryGame",t[t.tryHuaban=2]="tryHuaban",t[t.fuhuo=3]="fuhuo",t[t.double=4]="double",t[t.video_cc=5]="video_cc",t[t.inGame_huaban=6]="inGame_huaban",t[t.fuhuoShare=7]="fuhuoShare",t[t.rightUp=8]="rightUp",t[t.resultShare=9]="resultShare",t[t.getHuabanC=10]="getHuabanC",t[t.huabanFenxiangTotal=11]="huabanFenxiangTotal";}(StatisticsEventSite||(StatisticsEventSite={}));var BIAIActionType,BISourceType,BITypeV2;!function(t){t[t.None=0]="None",t[t.Free=1]="Free",t[t.Run=2]="Run",t[t.Jump=3]="Jump",t[t.Down=4]="Down";}(BIAIActionType||(BIAIActionType={})),function(t){t[t.Objects=1]="Objects",t[t.PropRandom=2]="PropRandom",t[t.MapRandom=3]="MapRandom",t[t.AIRoot=4]="AIRoot",t[t.AIPoint=5]="AIPoint";}(BISourceType||(BISourceType={})),function(t){t[t.Static=0]="Static",t[t.Dynamic=1]="Dynamic";}(BITypeV2||(BITypeV2={}));var TerrainElementData=function t(){this.objectId=0,this.souceType=BISourceType.Objects,this.aiActionType=BIAIActionType.None,this.moveSpeed=.1,this.child=new Array();},TerrainData=function t(){},TerrainLevelData=function(){function t(){}
return t.prototype.InitData=function(t){this.terrains=new PF.Dictionary();var e=t.terrains;for(var n in e){var i=e[n];this.terrains.add(parseInt(n),i);}
this.id=t.id;},t;}(),Game;!function(t){!function(t){t[t.videoShare=0]="videoShare",t[t.video=1]="video",t[t.share=2]="share",t[t.fail=3]="fail";}(t.SFREETYPE||(t.SFREETYPE={}));var e=function(){function t(){}
return t.DAY_REWARD=500,t.UI_LOCAL_SPECIAL="res/special",t.HOME_DEF_Z_OFFSET=-43,t.HOME_HERO_Z_OFFSET=-11,t.HOME_CREATE_TERRAIN_OFFSET=-10,t.SEVEN_DAY_KEY=7,t.TOW_DAY_KEY=2,t.timeScale=1,t.timeDelta=.01666,t.TERRAIN_OBJECT_ID_CHANGE_MAP=15,t.PFU_SHARE_REVIVE_KEY="fuhuo",t.PFU_SHARE_FENXIANG="fenxiang",t.IS_GET_OL_PARAM=!1,t.IS_GET_OL_BOX_LIST=!1,t.SUPER_START_TERRAIN_INDEX=27,t.SUPER_STATE_TERRAIN_DIFFICULTY=3,t.FLY_CURRENCY_GROUP=250,t.IsFirstShowGift=!0,t.IsFirstLoadGame=!0,t.isLowRes=!1,t.inSelectSceneType=0,t;}();t.Constant=e;var n=function(){function t(){}
return t.SHOW_PFU_BANNER="show_pfu_banner",t.REFRESH_PFU_BANNER="refresh_pfu_banner",t.UI_LOADING_PROGRESS="ui_l_progress",t.UI_SHOW_START="ui_l_showstart",t.UI_GAME_FLASH_WHITE="u_g_f_white",t.UI_PLAYER_LOSEHEALTH="ui_player_hpr",t.UI_GAME_GOLD_ADD="u_g_g_a",t.UI_QIANDAO_COMPLETED="qiandao_completed",t.UI_MOREGAME_UPDATE="update_moregame_icon",t.UI_GAME_SET_SCORE="u_g_set_score",t.UI_SUPER_START_FLASH_WHITE="u_s_s_f_w",t.UI_SUPER_STATE_END_FLASH_WHITE="u_s_s_e_f_w",t.UI_UPDATE_PROP="mainui_update_prop",t.UI_RANKPANEL_OPEN="open_rank_panel",t.UI_SCOREPANEL_SHAREDATA="rank_to_scorepanel",t.UI_GAME_TEACH="u_game_teach",t.UI_DOUBLE_COIN="ui_double_coin",t.UI_DOUBLE_COIN_OVER="ui_double_coin_over",t.UI_MAIN_UPDATE_CURRENT_HERO_INFO="ui_update_current_hero_info",t.UI_GAME_START="ui_g_start",t;}();t.NotifName=n;}(Game||(Game={}));var BIOSEXCEPTION_CODE={none:0,overflow:1,buffererror:2,paramerror:3,nosupport:4},BiosException=function t(e){this._cause=e;},Bostream=function(){function t(t,e){void 0===e&&(e=!1),this._iCurLength=0,this._iEndLength=t,this._bLittleEndian=e,this._arrBuffer=new ArrayBuffer(t),this._dataView=new DataView(this._arrBuffer);}
return t.prototype.avail=function(){return 0<this._iEndLength-this._iCurLength;},t.prototype.resize=function(t){if(this._iEndLength<t){this._iEndLength=t,this._arrBuffer=new ArrayBuffer(t);var e=new DataView(this._arrBuffer);this._dataView=e;}
return this;},t.prototype.clear=function(){this._iCurLength=0;},t.prototype.writeFloat32=function(t){if(!this.avail())throw new BiosException(BIOSEXCEPTION_CODE.overflow);this._dataView.setFloat32(this._iCurLength,t,this._bLittleEndian),this._iCurLength+=4;},t.prototype.writeFloat64=function(t){if(!this.avail())throw new BiosException(BIOSEXCEPTION_CODE.overflow);this._dataView.setFloat64(this._iCurLength,t,this._bLittleEndian),this._iCurLength+=8;},t.prototype.writeInt32=function(t){if(!this.avail())throw new BiosException(BIOSEXCEPTION_CODE.overflow);this._dataView.setInt32(this._iCurLength,t,this._bLittleEndian),this._iCurLength+=4;},t.prototype.writeArray=function(t){var e=this;if(t){var n=this.writeInt8;if(t instanceof Int8Array)n=this.writeInt8;else if(t instanceof Uint8Array)n=this.writeUint8;else if(t instanceof Int16Array)n=this.writeInt16;else if(t instanceof Uint16Array)n=this.writeUint16;else if(t instanceof Int32Array)n=this.writeInt32;else if(t instanceof Uint32Array)n=this.writeUInt32;else if(t instanceof Float32Array)n=this.writeFloat32;else{if(!(t instanceof Float64Array))throw new BiosException(BIOSEXCEPTION_CODE.nosupport);n=this.writeFloat64;}
t.forEach(function(t,i){n.apply(e,[t]);});}},t.prototype.writeChar=function(t){this.writeByte(t);},t.prototype.writeString=function(t){for(var e=0;e<t.length;e++){this.writeByte(t.charCodeAt(e));}},t.prototype.writeByte=function(t){this.writeInt8(t);},t.prototype.writeInt8=function(t){if(!this.avail())throw new BiosException(BIOSEXCEPTION_CODE.overflow);this._dataView.setInt8(this._iCurLength,t),this._iCurLength++;},t.prototype.writeShort=function(t){this.writeInt16(t);},t.prototype.writeInt16=function(t){if(!this.avail())throw new BiosException(BIOSEXCEPTION_CODE.overflow);this._dataView.setInt16(this._iCurLength,t),this._iCurLength+=2;},t.prototype.writeUInt32=function(t){if(!this.avail())throw new BiosException(BIOSEXCEPTION_CODE.overflow);this._dataView.setUint32(this._iCurLength,t,this._bLittleEndian),this._iCurLength+=4;},t.prototype.writeUChar=function(t){this.writeByte(t);},t.prototype.writeUString=function(t){for(var e=0;e<t.length;e++){this.writeUByte(t.charCodeAt(e));}},t.prototype.writeUByte=function(t){this.writeUint8(t);},t.prototype.writeUint8=function(t){if(!this.avail())throw new BiosException(BIOSEXCEPTION_CODE.overflow);this._dataView.setUint8(this._iCurLength,t),this._iCurLength++;},t.prototype.writeUShort=function(t){this.writeUint16(t);},t.prototype.writeUint16=function(t){if(!this.avail())throw new BiosException(BIOSEXCEPTION_CODE.overflow);this._dataView.setUint16(this._iCurLength,t),this._iCurLength+=2;},t.prototype.buffer=function(){return this._arrBuffer;},t.prototype.bufferToBlob=function(){return new Blob([this._arrBuffer]);},t;}(),Biostream=function(){function t(t,e){if(void 0===e&&(e=!1),!(t&&t instanceof ArrayBuffer))throw new BiosException(BIOSEXCEPTION_CODE.buffererror);this._iCurLength=0,this._iEndLength=t.byteLength,this._bLittleEndian=e,this._dataView=new DataView(t);}
return t.prototype.avail=function(){return 0<this._iEndLength-this._iCurLength;},t.prototype.getAvailLength=function(){return this._iEndLength-this._iCurLength;},t.prototype.readFloat32=function(){if(this.avail()){var t=this._dataView.getFloat32(this._iCurLength,this._bLittleEndian);return this._iCurLength+=4,t;}
throw new BiosException(BIOSEXCEPTION_CODE.overflow);},t.prototype.readFloat64=function(){if(this.avail()){var t=this._dataView.getFloat64(this._iCurLength,this._bLittleEndian);return this._iCurLength+=8,t;}
throw new BiosException(BIOSEXCEPTION_CODE.overflow);},t.prototype.readInt32=function(){if(this.avail()){var t=this._dataView.getInt32(this._iCurLength,this._bLittleEndian);return this._iCurLength+=4,t;}
throw new BiosException(BIOSEXCEPTION_CODE.overflow);},t.prototype.readUint32=function(){if(this.avail()){var t=this._dataView.getUint32(this._iCurLength,this._bLittleEndian);return this._iCurLength+=4,t;}
throw new BiosException(BIOSEXCEPTION_CODE.overflow);},t.prototype.readInt8=function(){if(this.avail()){var t=this._dataView.getInt8(this._iCurLength);return this._iCurLength++,t;}
throw new BiosException(BIOSEXCEPTION_CODE.overflow);},t.prototype.readUInt8=function(){if(this.avail()){var t=this._dataView.getUint8(this._iCurLength);return this._iCurLength++,t;}
throw new BiosException(BIOSEXCEPTION_CODE.overflow);},t.prototype.readByte=function(){return this.readInt8();},t.prototype.readUByte=function(){return this.readUInt8();},t.prototype.readInt16=function(){if(this.avail()){var t=this._dataView.getInt16(this._iCurLength,this._bLittleEndian);return this._iCurLength+=2,t;}
throw new BiosException(BIOSEXCEPTION_CODE.overflow);},t.prototype.readUint16=function(){if(this.avail()){var t=this._dataView.getUint16(this._iCurLength,this._bLittleEndian);return this._iCurLength+=2,t;}
throw new BiosException(BIOSEXCEPTION_CODE.overflow);},t.prototype.readShort=function(){return this.readInt16();},t.prototype.readUShort=function(){return this.readUint16();},t.prototype.readArray=function(t,e){if(e=e||this.getAvailLength(),!t)throw new BiosException(BIOSEXCEPTION_CODE.paramerror);var n;if(t==Int8Array)n=this.readInt8;else if(t==Uint8Array)n=this.readUInt8;else if(t==Int16Array)n=this.readInt16;else if(t==Uint16Array)n=this.readUint16;else if(t==Int32Array)n=this.readInt32;else if(t==Uint32Array)n=this.readUint32;else if(t==Float32Array)n=this.readFloat32;else{if(t!=Float64Array)throw new BiosException(BIOSEXCEPTION_CODE.nosupport);n=this.readFloat64;}
for(var i=new t(e),r=0;r<e;r++){i[r]=n.apply(this);}
return i;},t;}(),Platform_2003_Request=function t(){},Platform_2003_Response=function t(){},Platform_2002_Request=function t(){},Platform_2002_Response=function t(){},Platform_2000_Response=function t(){},Platform_2000_resp_Data=function t(){},Platform_1801_Request=function t(){this.sex=-1,this.level=-1,this.energy=1,this.coin=-1,this.ingot=-1,this.mapId=-1,this.pic=-1;},Platform_1801_Response=function t(){},Platform_1333_Request=function t(){},Platform_1333_Response=function t(){},Platform_1333_ResData=function t(){},Platform_1332_Request=function t(){this.rinviteGameid=1;},Platform_1332_Response=function t(){},Platform_1003_Request=function t(){this.sid=1;},Platform_1003_Response=function t(){},__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PfuBoxListReq=function(){function t(){this.from=-1;}
return t.prototype.getContent=function(t){var e=JSON.stringify(this),n=Base64.encode(e);return "content="+n+"&sign="+md5(n+t);},t;}(),PfuBoxListResp=function t(){this.adverts=new Array();},PfuBoxListData=function t(){},PfuBoxList=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._resp=new PfuBoxListResp(),e;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.Connect=function(t,n){var i=this,r=new PfuBoxListReq();r.wxid=t,this._wechatId=t;var a=new Laya.HttpRequest();a.http.timeout=1e4,a.once(Laya.Event.COMPLETE,this,function(t){var e=JSON.parse(Base64.decode(t));i.preaseData(e),n(PfuSdk.SUCCESS);}),a.once(Laya.Event.ERROR,this,function(t){n(PfuSdk.FAIL);}),a.on(Laya.Event.PROGRESS,this,function(){});var o=e.OL_BOX_LIST+"?"+r.getContent(PfuManager.OL_KEY);a.send(o,"","get","text");},e.prototype.preaseData=function(t){t.code==PfuRespState.succeed?this._resp.adverts=t.adverts:console.log("erro:"+t.code);},e.prototype.GetAdverts=function(){return this._resp.adverts;},e.prototype.GetMoreGameListData=function(){for(var t=new Array(),e=0;e<this._resp.adverts.length;e++){var n=this._resp.adverts[e];n.wechatGameid!=this._wechatId&&this.IsMoreGameDataBeAppIdList(n.wechatGameid)&&t.push(n);}
return t;},e.prototype.IsMoreGameDataBeAppIdList=function(t){for(var n=0;n<e.AppIdList.length;n++){if(e.AppIdList[n]==t)return!0;}
return!1;},e.AppIdList=["wxe675b6aad9612c74","wx2d47467291703ec7","wx7505f4985abb17ce","wx716b36314be3fe89","wx8b25b991dcc6edf6","wx99e08aff982f8dde","wx3b33f72ee2ec7bc1","wx989199f7dc0e3a50","wxbbbef0244fa4d4e4","wx87fe1890ea1384a5","wxa0eee1fe564aa730"],e.OL_BOX_LIST="",e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PfuPlatformManager=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._privateKey="",e.wx_userInfo=null,e._queryParam=new PF.Dictionary(),e._respose1003User=null,e._gameId="",e.SAVE_KEY="platform_user",e.tempAdId=null,e._reconnectCount=0,e;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.Init=function(t){this._privateKey=t,PF.NotificationCenter.GetInstance().AddObserver(this,this.parseMsg2000,e.NOTIFYY_MSG_ID+"2000"),this.Load();},e.prototype.Load=function(){var t=LocalSaveUtils.GetJsonObject(this.SAVE_KEY);if(this._platformUserData=new PlatformShareUserData(),null!=t){for(var e in t._notifShareInGames.m_KeyValuePairs){var n=(i=t._notifShareInGames.m_KeyValuePairs[e]).value;this._platformUserData._notifShareInGames.add(i.key,n);}
for(var e in t._userCache.m_KeyValuePairs){var i;n=(i=t._userCache.m_KeyValuePairs[e]).value,this._platformUserData._userCache.add(i.key,n);}}},e.prototype.Save=function(){LocalSaveUtils.SaveJsonObject(this.SAVE_KEY,this._platformUserData);},e.prototype.parseMsg2000=function(t){for(var e=0;e<t.items.length;e++){var n=t.items[e];this.parseShareInGame(n);}
this.Send2000To2003Msg(t);},e.prototype.parseShareInGame=function(t){for(var n=t.text.split("___"),i=0;i<n.length;i++){Debug.Log("d:"+n[i]);}
var r=parseInt(n[2]),a=this._platformUserData._notifShareInGames.get(r);for(null==a&&(a=new Array(),this._platformUserData._notifShareInGames.add(r,a),Debug.Log("新增一个pos:"+r)),i=0;i<a.length;i++){if(a[i].senderUid==t.senderUid)return;}
a.push(t);var o=this._platformUserData._notifShareInGames.get(r);e.IS_DEBUG_LOG&&console.log("通知UI更新用户头像"+a.length+"|"+o.length),this.GetUidUserDatas(t.senderUid,function(t){PF.NotificationCenter.GetInstance().PostNotification(e.NOTIFY_SHARE_IN_GAME,t);});},e.prototype.TestPost1333ResData=function(t){var n=this._platformUserData._notifShareInGames.get(t);null==n&&(n=new Array(),this._platformUserData._notifShareInGames.add(t,n));var i=new Platform_2000_resp_Data();i.senderUid=1e4,n.push(i);var r=new Platform_1333_ResData();r.uid=i.senderUid,r.pickUrl="https://wx.qlogo.cn/mmopen/vi_32/pbK4DH6IOuTf0AicCnJHIbKvDTgibmoibdJmiaucIHIuUz6WdjCicqT2dLtRibo2PyS2Lx4Yd7W5JMvcicLtlR4YTUceQ/132",this._platformUserData._userCache.add(i.senderUid,r),PF.NotificationCenter.GetInstance().PostNotification(e.NOTIFY_SHARE_IN_GAME,r),this.Save();},e.prototype.GetShareUserList=function(t){var e=new Array();if(Debug.Log("开始查找用户资料!"),this._platformUserData._notifShareInGames.containsKey(t)){var n=this._platformUserData._notifShareInGames.get(t);Debug.Log("拥有"+n.length+"个用户");for(var i=0;i<n.length;i++){Debug.Log("userCache中有"+this._platformUserData._userCache.count+"个用户");var r=this._platformUserData._userCache.get(n[i].senderUid);r&&(Debug.Log("确认用户头像读取完毕!"),e.push(r));}}
return e;},e.prototype.ClearShareUserList=function(t){this._platformUserData._notifShareInGames.remove(t),this.Save();},e.prototype.GetShareQuery=function(t){if(null==this._respose1003User)return "";var e=!this._respose1003User.name;return "shareUid="+this._respose1003User.uid+"&rinviteGameid="+this._gameId+"&rinvitePos="+t+"&isNew="+e;},e.prototype.PackageMsgUrl=function(t,n,i){var r=i?this.GetLoginUrlHead(t):this.GetUserUrlHead(t);return r+=this.GetContentAndSignAndToken(e.MD5_KEY,n),i||(r+="&p="+e.TOKEN),r;},e.prototype.GetLoginUrlHead=function(t){var n=e.LOGIN_SERVICE_URL+t+"?";return n+="sVersion="+e.S_VERSION+"&pType="+e.P_TYPE+"&";},e.prototype.GetUserUrlHead=function(t){var n=e.INFO_SERVICE_URL+t+"?";return n+="sVersion="+e.S_VERSION+"&pType="+e.P_TYPE+"&";},e.prototype.GetContentAndSignAndToken=function(t,n){var i=JSON.stringify(n);e.IS_DEBUG_LOG&&console.log("content:"+i);var r=Base64.encode(i);return "content="+r+"&sign="+md5(r+t).toLowerCase();},e.prototype.UnicodeToUtf8=function(t){var e,n,i="";for(n=0;n<t.length;n+=2){e=t[n]<<8|t[n+1],i+=String.fromCharCode(e);}
return i;},e.prototype.LoginWegame=function(t,n){this._gameId=n,wx.login({timeout:3e3,success:function n(i){console.log("::::"+i.code),e.GetInstance().LoginPlatform1003(i.code,t);}});},e.prototype.SetOnShowWxAdId=function(t){var e=t.query,n=(e.gdt_vid,e.weixinadinfo);if(this.tempAdId=null,n){var i=n.split(".");this.tempAdId=""+i[0];}},e.prototype.LoginPlatform1003=function(t,n){var i=this,r=new Platform_1003_Request();r.Channel=e.IS_DEBUG?"jfyd":"weixin",r.ext3=e.IS_DEBUG?"id":t;var a="",o=WeChatUtils.GetInstance().GetLaunchOptionsSync();if(o){var s=WeChatUtils.GetInstance().GetAdAid();if(null!=this.tempAdId)a="weixinad"+this.tempAdId;else if(null!=s||1045==o.scene||1046==o.scene||1067==o.scene||1084==o.scene)a="weixinad"+s;else if(1007==o.scene||1008==o.scene||1044==o.scene||1096==o.scene)a="share";else if(1005==o.scene||1006==o.scene||1027==o.scene||1053==o.scene)a="search";else{var l=o.referrerInfo;l&&l.appId&&(a=l.appId);}}
r.srcid=a,r.selfid=n;var u=this.PackageMsgUrl(1003,r,!0);this.HttpGet(u,this,function(t){var n=t;3==n.state?(i._respose1003User=n,e.TOKEN=md5(n.loginToken+i._privateKey).toLowerCase(),console.log("uid"+i._respose1003User.uid),i.ListenMsg2000(),i.IsAuthorizeUser(function(t){t==PfuSdk.SUCCESS?(i.GetUserInfo(),console.log("已经授权")):(i.UserAuthorize(),console.log("创建授权"));}),console.log("平台登录成功")):console.log("平台登录失败:"+n.state);},function(){console.log("平台登录失败!");});},e.prototype.IsAuthorizeUser=function(t){WeChatUtils.GetInstance().IsWeGame()?wx.getSetting({success:function e(n){t(n.authSetting["scope.userInfo"]?PfuSdk.SUCCESS:PfuSdk.FAIL);},fail:function e(){t(PfuSdk.FAIL);}}):t(PfuSdk.SUCCESS);},e.prototype.UserAuthorize=function(){var t=this,e=Laya.Browser.window.wx.createUserInfoButton({type:"image",text:"",image:"",style:{left:0,top:0,width:laya.utils.Browser.width,height:laya.utils.Browser.height,backgroundColor:"#000000",color:"#ffffff"}});e.onTap(function(n){n.userInfo?(console.log("用户授权:"+n),t.wx_userInfo=n.userInfo,t.ReadyUpdateNewUser(),e.destroy()):WeChatUtils.GetInstance().ShowSingleModal("微信授权","同意获取个人信息才可以进行更多内容游戏，我们不会泄露用户个人信息，请放心使用。",function(){});});},e.prototype.GetUserInfo=function(){if(!WeChatUtils.GetInstance().IsWeGame())return this.wx_userInfo=[],this.wx_userInfo.nickName="测试",this.wx_userInfo.avatarUrl="https://wx.qlogo.cn/mmopen/vi_32/pbK4DH6IOuTf0AicCnJHIbKvDTgibmoibdJmiaucIHIuUz6WdjCicqT2dLtRibo2PyS2Lx4Yd7W5JMvcicLtlR4YTUceQ/132",void this.ReadyUpdateNewUser();wx.getUserInfo({success:function t(n){e.GetInstance().wx_userInfo=n.userInfo,e.GetInstance().ReadyUpdateNewUser();},fail:function t(e){}});},e.prototype.ReadyUpdateNewUser=function(){var t=this.wx_userInfo.nickName,e=this.wx_userInfo.avatarUrl;this.NewUserUpdate1801(t,e);},e.prototype.NewUserUpdate1801=function(t,e){var n=this,i=new Platform_1801_Request();i.name=t,i.picUrl=e,console.log("send1801 name:"+t);var r=this.PackageMsgUrl(1801,i,!1);this.HttpGet(r,this,function(t){var e=t;3==e.state?(console.log("更新用户信息成功!"),n.ShareInGameUpdate()):console.log("更新用户信息失败!"+e.state);},function(){console.log("更新用户信息失败!");});},e.prototype.ShareInGameUpdate=function(){var t;if(WeChatUtils.GetInstance().IsWeGame()&&(t=WeChatUtils.GetInstance().GetLaunchOptionsSync().query),t&&t.shareUid&&t.rinviteGameid&&t.rinvitePos){var e=parseInt(t.shareUid),n=parseInt(t.rinviteGameid),i=parseInt(t.rinvitePos),r=!this._respose1003User.name;e&&n&&i&&this.ShareInGameMsg1332(e,n,i,r);}},e.prototype.ShareInGameMsg1332=function(t,e,n,i){var r=new Platform_1332_Request();r.shareUid=t,r.rinviteGameid=e,r.rinvitePos=n,r.isNew=i;var a=this.PackageMsgUrl(1332,r);this.HttpGet(a,this,function(t){var e=t;console.log("发送分享进入数据成功!"+e.state);},function(){console.log("发送分享进入数据失败!");});},e.prototype.ListenMsg2000=function(){if(null==this.socket)try{this.socket.cleanSocket(),this.socket.close();}catch(t){Debug.Log(""+t);}
this.socket=new Laya.Socket(),this.socket.connectByUrl(e.SOCKET_SERVICE_URL+"msg?pType="+e.P_TYPE+"&p="+e.TOKEN),this.output=this.socket.output,this.socket.on(Laya.Event.OPEN,this,this.onSocketOpen),this.socket.on(Laya.Event.CLOSE,this,this.onSocketClose),this.socket.on(Laya.Event.MESSAGE,this,this.onMessageReveived),this.socket.on(Laya.Event.ERROR,this,this.onConnectError);},e.prototype.onSocketOpen=function(){var t=this;console.log("Connected"),this.SendHeartbeat2002Msg(),Laya.timer.loop(3e4,this,function(){t.SendHeartbeat2002Msg();}),this._reconnectCount=0;},e.prototype.SendHeartbeat2002Msg=function(){var t=new Platform_2002_Request();this.SendSocketMsg(t,2002);},e.prototype.Send2000To2003Msg=function(t){Debug.Log("准备发送2003");for(var e=[],n=0;n<t.items.length;n++){var i=t.items[n].action;15!=i&&16!=i||e.push(t.items[n].time);}
if(Debug.Log("找到"+e.length+"条需要发送的time"),0<e.length){var r=new Platform_2003_Request();r.timeList=e,this.SendSocketMsg(r,2003),Debug.Log("开始发送2003");}},e.prototype.SendSocketMsg=function(t,e){var n,i=JSON.stringify(t),r=(n=this.stringToUint8Array(i)).length,a=new Bostream(8+r);a.writeInt32(r),a.writeShort(1),a.writeShort(e),a.writeArray(n),this.socket.send(a.buffer());},e.prototype.stringToUint8Array=function(t){for(var e=[],n=0,i=t.length;n<i;++n){e.push(t.charCodeAt(n));}
return new Uint8Array(e);},e.prototype.onSocketClose=function(){var t=this;console.log("Socket closed"),Laya.timer.once(1e4*this._reconnectCount,this,function(){t.ListenMsg2000();}),this._reconnectCount++,3<this._reconnectCount&&(this._reconnectCount=3);},e.prototype.onMessageReveived=function(t){var n=new DataView(t),i=0;n.getInt32(i),i+=4,n.getInt8(i),i+=1;var r=n.getInt16(i);i+=2,n.getInt16(i),i+=2,Debug.Log("解码:"+r);var a=n.buffer.slice(i,n.byteLength);switch(r){case 2002:break;default:var o=this.ab2str(a);Debug.Log("socket Reveived:"+o),PF.NotificationCenter.GetInstance().PostNotification(e.NOTIFYY_MSG_ID+r,JSON.parse(o));}
this.socket.input.clear();},e.prototype.ab2str=function(t){return String.fromCharCode.apply(null,new Uint8Array(t));},e.prototype.onConnectError=function(t){console.log("error");},e.prototype.GetUidUserDatas=function(t,e){var n=this;if(this._platformUserData._userCache.containsKey(t)){var i=this._platformUserData._userCache.get(t);e(i);}else{var r=new Platform_1333_Request();r.uids=""+t;var a=this.PackageMsgUrl(1333,r);this.HttpGet(a,this,function(t){var i=t;if(3==i.state){for(var r=0;r<i.infos.length;r++){n._platformUserData._userCache.add(i.infos[r].uid,i.infos[r]),e(i.infos[r]);}
console.log("获取用户数据成功!");}else console.log("获取用户数据失败!"+i.state);},function(){console.log("获取用户数据失败!");});}},e.prototype.HttpGet=function(t,n,i,r){e.IS_DEBUG_LOG&&console.log("url:"+t);var a=new Laya.HttpRequest();a.http.timeout=1e4,a.once(Laya.Event.COMPLETE,this,function(t){var e=JSON.parse(Base64.decode(t));console.log("http parse:"+JSON.stringify(e)),i.call(n,e);}),a.once(Laya.Event.ERROR,this,function(t){r.call(n,t);}),a.send(t,"","get","text");},e.NOTIFYY_MSG_ID="SOCKET_",e.NOTIFY_SHARE_IN_GAME="n_s_in_game",e.LOGIN_SERVICE_URL="https://login.jfydgame.com/user/",e.INFO_SERVICE_URL="https://info.jfydgame.com/user/",e.SOCKET_SERVICE_URL="wss://msg.jfydgame.com/xxl/",e.S_VERSION="1024",e.P_TYPE="2",e.MD5_KEY="60cff75d0d1e4d548d9f4bca35916b21",e.IS_DEBUG=!1,e.IS_DEBUG_LOG=!0,e.TOKEN="",e;}(PF.Singleton),PlatformShareUserData=function t(){this._notifShareInGames=new PF.Dictionary(),this._userCache=new PF.Dictionary();},__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FirstLoad=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isLoadMainUIFinish=!1,e;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.MainScene=function(){return this._scene;},e.prototype.PoolRoot=function(){return this._poolRoot;},e.prototype.startLoader=function(){var t=this;fairygui.UIConfig.packageFileExtension="bin",Laya.stage.addChild(fairygui.GRoot.inst.displayObject);var e=[{url:"res/uilocal/Data/DTUIWindowInfoMGR.json",type:Laya.Loader.JSON,cls:DTUIWindowInfoMGR}];Laya.loader.load(e,Laya.Handler.create(this,function(){for(var n=0;n<e.length;n++){var i=Laya.loader.getRes(e[n].url);e[n].cls.getInstance().InitData(i);}
fui.FairyGUIBinders.bindAll(),WindowReflectRegister.Register(),LoaderFUIRes.LoadMain(function(){PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_PfuBanner),PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_Loading),PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_LogoUI),t._isLoadMainUIFinish=!0,t.StartLoadMainUI();});})),Laya.timer.loop(100,this,this.CheckShowBoxList);},e.prototype.CheckShowBoxList=function(){},e.prototype.StartLoadMainUI=function(){var t=this;PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_LOADING_PROGRESS,10),WeChatUtils.GetInstance().LoadSubpackage("subpackage",function(e){e==PfuSdk.SUCCESS&&LoaderFUIRes.LoadGame(function(){t.ChangeLoadState(GameloadState.loadProperty);});});},e.prototype.ChangeLoadState=function(t){switch(t){case GameloadState.loadProperty:this.LoaderJson(),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_LOADING_PROGRESS,40);break;case GameloadState.loadMainScene:UserDataMgr.getInstance().initialize(),this.CreateScene(),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_LOADING_PROGRESS,60);break;case GameloadState.loadManager:this.LoaderManager(),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_LOADING_PROGRESS,80);break;case GameloadState.loadOther:this.AddComponent(),GameMgr.getInstance().initData(),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_LOADING_PROGRESS,100),Laya.timer.loop(10,this,this.CheckLogoFinish);break;case GameloadState.loadOpenMain:PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_Loading),PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_MainUI),LoadScene.GetInstance().StartLoadGame();}},e.prototype.CheckLogoFinish=function(){FUIWindow_Logo.logoFinish&&(this.ChangeLoadState(GameloadState.loadOpenMain),Laya.timer.clear(this,this.CheckLogoFinish));},e.prototype.LoaderJson=function(){var t=this,e="h5/Prototype/DT",n=[{url:e+"ResBundleInfosMGR.json",type:Laya.Loader.JSON,cls:DTResBundleInfosMGR},{url:e+"AwardInfoMGR.json",type:Laya.Loader.JSON,cls:DTAwardInfoMGR},{url:e+"ConstantInfoMGR.json",type:Laya.Loader.JSON,cls:DTConstantInfoMGR},{url:e+"ConsumeInfoMGR.json",type:Laya.Loader.JSON,cls:DTConsumeInfoMGR},{url:e+"CurrencyInfoMGR.json",type:Laya.Loader.JSON,cls:DTCurrencyInfoMGR},{url:e+"EffectInfoMGR.json",type:Laya.Loader.JSON,cls:DTEffectInfoMGR},{url:e+"HomeInfosMGR.json",type:Laya.Loader.JSON,cls:DTHomeInfosMGR},{url:e+"LevelGroupInfosMGR.json",type:Laya.Loader.JSON,cls:DTLevelGroupInfosMGR},{url:e+"PlayerMGR.json",type:Laya.Loader.JSON,cls:DTPlayerMGR},{url:e+"ResPrefabInfoMGR.json",type:Laya.Loader.JSON,cls:DTResPrefabInfoMGR},{url:e+"SoundInfoMGR.json",type:Laya.Loader.JSON,cls:DTSoundInfoMGR},{url:e+"TerrainGroupInfoMGR.json",type:Laya.Loader.JSON,cls:DTTerrainGroupInfoMGR},{url:e+"TerrainObjectInfoMGR.json",type:Laya.Loader.JSON,cls:DTTerrainObjectInfoMGR},{url:e+"PropInfoMGR.json",type:Laya.Loader.JSON,cls:DTPropInfoMGR},{url:e+"SevenDayAwardInfoMGR.json",type:Laya.Loader.JSON,cls:DTSevenDayAwardInfoMGR},{url:e+"TalentMGR.json",type:Laya.Loader.JSON,cls:DTTalentMGR},{url:e+"PropAddInfoMGR.json",type:Laya.Loader.JSON,cls:DTPropAddInfoMGR},{url:e+"LunpanInfoMGR.json",type:Laya.Loader.JSON,cls:DTLunpanInfoMGR}];Laya.loader.load(n,Laya.Handler.create(this,function(){for(var e=0;e<n.length;e++){var i=Laya.loader.getRes(n[e].url);n[e].cls.getInstance().InitData(i);}
t.ChangeLoadState(GameloadState.loadMainScene);}));},e.prototype.CreateScene=function(){var t=this;new ResBundleInfos("h5/Bundles/MainScene.ls").LoadBundles(function(e){var n=Laya.loader.getRes(e);t._scene=Laya.stage.addChildAt(n,0),ComponentRootManger.getInstance().init(t._scene),t._poolRoot=new Laya.Sprite3D("poolRoot"),t._scene.addChild(t._poolRoot),t._scene.enableFog=!0,t._scene.fogColor=new Laya.Vector3(96/255,156/255,219/255),t._scene.fogStart=62.5,t._scene.fogRange=160,t.ChangeLoadState(GameloadState.loadManager);});},e.prototype.LoaderManager=function(){var t=e.GetInstance().MainScene();BannerUpdateMgr.getInstance().Initialize(),SceneSkyMgr.getInstance().initSkyRoot(t),ResPrefabeMgr.getInstance().loadSettingInfo(),LevelDataMgr.getInstance().generate(),this.ChangeLoadState(GameloadState.loadOther);},e.prototype.AddComponent=function(){var t=e.GetInstance().MainScene();TerrainMgr.GetInstance().generate();var n=t.addChild(new Laya.Camera(0,1,500)),i=n.addComponent(CameraControl);CameraMgr.getInstance().setCameraRef(n),CameraMgr.getInstance().setCameraControl(i);},e;}(PF.Singleton),GameloadState,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){t[t.loadProperty=1]="loadProperty",t[t.loadMainScene=2]="loadMainScene",t[t.loadManager=3]="loadManager",t[t.loadOther=4]="loadOther",t[t.loadOpenMain=5]="loadOpenMain",t[t.loadModelFinish=6]="loadModelFinish";}(GameloadState||(GameloadState={}));var LoadScene=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.StartLoadGame=function(){this.ChangeLoadState(GameloadState.loadOther),Laya.timer.loop(1,this,this.loaderUpdate);},e.prototype.ChangeLoadState=function(t){switch(this._loadState=t){case GameloadState.loadOther:this.LoaderManager();break;case GameloadState.loadModelFinish:}},e.prototype.loaderUpdate=function(){this._loadState==GameloadState.loadOther&&TerrainDataMgr.getInstance().isLoaderFinish()&&TerrainObjectPoolMgr.getInstance().isLoadCompleted()&&EffectMgr.getInstance().isLoadFinish()?(Debug.Log("res loader Modle Finish"),this.ChangeLoadState(GameloadState.loadModelFinish)):this._loadState==GameloadState.loadModelFinish&&(Laya.timer.clear(this,this.loaderUpdate),Debug.Log("Laya.timer.clear(this,this.loaderUpdate)"));},e.prototype.LoaderManager=function(){var t=FirstLoad.GetInstance().PoolRoot();EffectMgr.getInstance().loadEffect(t,function(){PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_LOADING_PROGRESS,20),TerrainDataMgr.getInstance().loadData(function(){PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_LOADING_PROGRESS,30),TerrainObjectPoolMgr.getInstance().loadGlobal(function(){PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_LOADING_PROGRESS,40),TerrainObjectPoolMgr.getInstance().loaderLevel(function(){});});});});},e.prototype.CreateGamePlayer=function(t,e){var n=DTPlayerMGR.getInstance().DTPlayerInfoDIC.get(t);if(PlayerMgr.getInstance().isPlayerChange(n)){PlayerMgr.getInstance().release();var i=FirstLoad.GetInstance().MainScene();PlayerMgr.getInstance().generatePlayer(n,i,CameraMgr.getInstance().getCameraControl(),e);}else e();},e.prototype.IsLoaderModelFinish=function(){return this._loadState==GameloadState.loadModelFinish;},e.prototype.HomeToGame=function(){var t=this;PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_MainUI),PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_Loading),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_LOADING_PROGRESS,10),Laya.timer.once(500,this,function(){!TerrainObjectPoolMgr.getInstance().isLoadCompleted()&&TerrainObjectPoolMgr.getInstance().isLoadGlobalCompleted()?TerrainObjectPoolMgr.getInstance().loaderLevel(function(){Laya.timer.loop(1,t,t.DelayLoadModel);}):Laya.timer.loop(1,t,t.DelayLoadModel);}),Global.StatisticsStartLevelInfo(1,Global.selectPlayerId);},e.prototype.DelayLoadModel=function(){if(this.IsLoaderModelFinish()){PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_LOADING_PROGRESS,50),Laya.timer.clear(this,this.DelayLoadModel),GameMgr.getInstance().generateGame(),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_LOADING_PROGRESS,90);var t=UserDataMgr.getInstance().getUserInfo().playerId;this.CreateGamePlayer(t,function(){PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_LOADING_PROGRESS,100),PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_Loading),PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_GameUI),GameMgr.getInstance().beginGame();});}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),AwardMgr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.awardById=function(t,e){var n=DTAwardInfoMGR.getInstance().DTAwardInfoDIC.get(t);(null==e||isNaN(e))&&(e=1),this.award(n,e);},e.prototype.award=function(t,e){if(1==t.DTPK_type)(null==e||isNaN(e))&&(e=1),UserDataMgr.getInstance().addCurrencyToDic(t.DTPK_value1,t.DTPK_value2*e,!0);else if(2==t.DTPK_type&&null!=DTPlayerMGR.getInstance().DTPlayerInfoDIC.get(t.DTPK_value1)){var n=UserDataMgr.getInstance().getPlayer(t.DTPK_value1);n.isLocked&&(n.isLocked=!1);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),BannerUpdateMgr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_showTimeCounter=0,e.m_isStartChanged=!1,e.isHideBaner=!1,e;}
return __extends(e,t),e.getInstance=function(){return null==this._inst&&(this._inst=ComponentRootManger.getInstance().addComponent(e)),this._inst;},e.prototype.Initialize=function(){this.m_showTimeCounter=0;},e.prototype.showBannerAD=function(){this.m_isStartChanged||(this.m_showTimeCounter=0,this.isHideBaner=!1,Global.ShowBannerAD());},e.prototype.hideBannerAD=function(){this.isHideBaner=!0,Global.hideBannerAD();},e.prototype.refreshBannerAD=function(){var t=this;this.m_isStartChanged||(this.m_isStartChanged=!0,Global.refreshBannerAD(function(){t.m_isStartChanged=!1,PF.FUIManager.GetInstance().GetInterface(DTFUIInterfaceIdPK.DTPK_MainUI)||t.showBannerAD();}));},e.prototype.Update=function(t){this.m_isStartChanged||(this.m_showTimeCounter+=Game.Constant.timeDelta,!this.isHideBaner&&this.m_showTimeCounter>PfuSdk.GetOLParamInt("banner_refresh_time")&&(this.refreshBannerAD(),this.m_showTimeCounter=0));},e;}(Unity.MonoBehaviour),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),CameraControl=function(t){function e(){var e=t.call(this)||this;return e.m_moveLRWidthScale=.775,e.m_timer=0,e.m_current=0,e;}
return __extends(e,t),e.prototype._load=function(t){this.m_originPoint=new Laya.Vector3(0,7.7,-13),this.m_camera=t,this.m_camera.transform.position=this.m_originPoint,this.m_camera.transform.rotate(new Laya.Vector3(-15,180,0),!0,!1),this.m_camera.clearColor=null,this.m_camera.fieldOfView=44.1,this._initData();},e.prototype._resetCurve=function(){var t=DTHomeInfosMGR.getInstance().DTHomeInfoDIC.get(Global.loadResourceHomeId);this.m_curvedTimes=t.DTPK_curveTime,this.m_curvedEnlarge=t.DTPK_curveRatio,this.m_curvedV=t.DTPK_curveIndex,this.m_timer=0,this.m_current=0,this.m_currentHorizontal=0;},e.prototype.resetCurve=function(){this._resetCurve();},e.prototype.releaseCamera=function(){this.m_camera.transform.position=this.m_originPoint,this._initData(),this._resetCurve();},e.prototype._initData=function(){this.m_targetPos=new Laya.Vector3(0,0,0),this.m_offset=new Laya.Vector3(0,0,0),this.setTargetY(0);},e.prototype.setTarget=function(t){this.m_target=t;},e.prototype._update=function(t){this.m_position=this.m_camera.transform.position,GameMgr.isInRun()&&this._updateCurveWrold();},e.prototype._lateUpdate=function(t){if(GameMgr.isInRun()||GameMgr.isGameOver()){var e=null!=this.m_target?this.m_target.getThisPos():Laya.Vector3.ZERO;this.m_targetPos.x=e.x*this.m_moveLRWidthScale,this.m_targetPos.z=e.z,this.m_targetPos.y=e.y,Laya.Vector3.add(this.m_originPoint,this.m_targetPos,this.m_offset);var n=PF.Mathf.LerpNumber(this.m_position.x,this.m_offset.x,.1),i=PF.Mathf.LerpNumber(this.m_position.y,this.m_offset.y,.1),r=PF.Mathf.LerpNumber(this.m_position.z,this.m_offset.z,.5);this.m_camera.transform.position=new Laya.Vector3(n,i,r);}},e.prototype.setTargetY=function(t){this.m_targetPos.y=t;},e.prototype._updateCurveWrold=function(){this.m_curvedTimes.length<5?curvedworld.Manager.SetCurved(this.m_camera,0,this.m_curvedV):(this.m_timer+=Game.Constant.timeDelta*Game.Constant.timeScale,this.m_timer>this.m_curvedTimes[this.m_current]&&(this.m_current++,this.m_current>=this.m_curvedTimes.length&&(this.m_current=0,this.m_timer=0)),this.m_currentHorizontal=this._getXOffset(),curvedworld.Manager.SetCurved(this.m_camera,this.m_currentHorizontal*this.m_curvedEnlarge,this.m_curvedV));},e.prototype._getXOffset=function(){switch(this.m_current){case 0:return 0;case 1:return Math.sqrt((this.m_timer-this.m_curvedTimes[0])/(this.m_curvedTimes[1]-this.m_curvedTimes[0]));case 2:return 1;case 3:return-2/(Math.pow(this.m_curvedTimes[3],2)-Math.pow(this.m_curvedTimes[2],2))*Math.pow(this.m_timer,2)+(Math.pow(this.m_curvedTimes[3],2)+Math.pow(this.m_curvedTimes[2],2))/(Math.pow(this.m_curvedTimes[3],2)-Math.pow(this.m_curvedTimes[2],2));case 4:return-1;case 5:return 1/(Math.pow(this.m_curvedTimes[5],2)-Math.pow(this.m_curvedTimes[4],2))*Math.pow(this.m_timer,2)-Math.pow(this.m_curvedTimes[5],2)/(Math.pow(this.m_curvedTimes[5],2)-Math.pow(this.m_curvedTimes[4],2));default:return 0;}},e;}(Laya.Script),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),CameraMgr=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.getInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.setCameraRef=function(t){this.m_camera=t;},e.prototype.getCameraRef=function(){return this.m_camera;},e.prototype.setCameraControl=function(t){this.m_cameraControl=t;},e.prototype.getCameraControl=function(){return this.m_cameraControl;},e.prototype.releaseCamera=function(){this.m_cameraControl.releaseCamera();},e.prototype.resetCurve=function(){this.m_cameraControl.resetCurve();},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),ConsumeMgr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.getConsumeInfo=function(t){return DTConsumeInfoMGR.getInstance().DTConsumeInfoDIC.get(t);},e.prototype.consumeById=function(t,e,n){var i=this.getConsumeInfo(t);return this.consumeByInfo(i,e,n);},e.prototype.consumeByInfo=function(t,e,n){var i=t.DTPK_value1;return this.consumeByType(i,t.DTPK_value2,e,n);},e.prototype.consumeByType=function(t,e,n,i){return!(UserDataMgr.getInstance().getCurrencyInfo(t)<e||(null!=n&&n&&UserDataMgr.getInstance().subCurrencyInfo(t,e,i),0));},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),BaseEffect=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.followOffset=Laya.Vector3.ZERO,e.pos=new Laya.Vector3(),e;}
return __extends(e,t),e.prototype.Awake=function(){var t=this.gameObject.getChildByName("Offset").getChildAt(0);this.m_ps=t.particleSystem;},e.prototype.reset=function(){this.m_timeDelayTime=0;},e.prototype.Update=function(t){null!=this.effectInfo&&(null!=this.followTarget&&(this.followOffset!=Laya.Vector3.ZERO?(Laya.Vector3.add(this.followTarget.transform.position,this.followOffset,this.pos),this.transform.position=this.pos):this.transform.position=this.followTarget.transform.position),0!=this.effectInfo.DTPK_lifeTime&&(this.m_timeDelayTime+=Game.Constant.timeDelta,this.m_timeDelayTime>this.effectInfo.DTPK_lifeTime&&this.destoryMe()));},e.prototype.destoryMe=function(){this.followTarget=null,EffectMgr.getInstance().despawnEffect(this);},e.prototype._play=function(){this.m_ps.play();},e.prototype._stop=function(){this.m_ps.stop();},e;}(Unity.MonoBehaviour),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),EffectMgr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_eBundleId=13,e.m_poolAddName="epool_",e.m_loadFinish=!1,e;}
return __extends(e,t),e.getInstance=function(){return null==this._inst&&(this._inst=ComponentRootManger.getInstance().addComponent(e)),this._inst;},e.prototype.loadEffect=function(t,e){var n=this,i=new Array();i.push(this.m_eBundleId),ResPrefabeMgr.getInstance().loadBundlesInfo(i,function(){for(var i=DTEffectInfoMGR.getInstance().DTEffectInfoDIC.count,r=function e(i){var r=DTEffectInfoMGR.getInstance().DTEffectInfoDIC.getKeyByIndex(i);if(4==r||7==r||15==r||34==r||50==r||40==r||51==r||52==r||53==r||54==r||55==r||56==r||57==r||58==r||59==r){var e=DTEffectInfoMGR.getInstance().DTEffectInfoDIC.get(r);ResPrefabeMgr.getInstance().loadPrefabeInfo(e.DTPK_resId,function(i){i.active=!1,PoolManager.getInstance().newPool(n.m_poolAddName+e.DTPK_id,i,t);});}},a=0;a<i;a++){r(a);}
n.m_loadFinish=!0,e();});},e.prototype.isLoadFinish=function(){return this.m_loadFinish;},e.prototype.spawnEffect=function(t,e){var n=this.m_poolAddName+t,i=PoolManager.getInstance().getPool(n).Spawn();null!=e&&(i.transform.position=e);var r=BXMonoUtil.GetOrAddComponent(BaseEffect,i);return null==r.effectInfo&&(r.effectInfo=DTEffectInfoMGR.getInstance().DTEffectInfoDIC.get(t)),r.reset(),r;},e.prototype.despawnEffect=function(t){var e=this.m_poolAddName+t.effectInfo.DTPK_id;PoolManager.getInstance().getPool(e).Despawn(t.owner);},e;}(Laya.Script),BufferType,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){t[t.none=0]="none",t[t.stun=1]="stun",t[t.doubleCoin=2]="doubleCoin",t[t.shield=3]="shield",t[t.magnet=4]="magnet",t[t.flight=5]="flight",t[t.doubleScore=6]="doubleScore",t[t.huaban=7]="huaban";}(BufferType||(BufferType={}));var BufferInfo=function t(){},BufferMgr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_bufferList=new Array(),e;}
return __extends(e,t),e.getInstance=function(){return null==this._inst&&(this._inst=ComponentRootManger.getInstance().addComponent(e)),this._inst;},e.prototype.buffer=function(t,e){var n=this.getBufferByType(t);n.buffType==BufferType.none&&(n.buffType=t,n.baseEffect=this.getBufferEffectInfo(t,n),n.timeCountter=0,n.duration=null==e?0:e,this.m_bufferList.push(n),GameMgr.getInstance().sendAddBuffer(n)),null==e&&(n.duration+=this.getBufferDuration(t)),n.activeCount++;},e.prototype.unbuffer=function(t){for(var e=0;e<this.m_bufferList.length;e++){var n=this.m_bufferList[e];if(n.buffType==t)return this._releaseBufferResource(n),void this.m_bufferList.splice(e,1);}
Debug.Log("未找到要删除的Buffer:"+t);},e.prototype.releaseBuffer=function(){for(var t=0;t<this.m_bufferList.length;t++){var e=this.m_bufferList[t];this._releaseBufferResource(e);}
this.m_bufferList.length=0;},e.prototype._releaseBufferResource=function(t){GameMgr.getInstance().sendDelectBuffer(t),null!=t.baseEffect&&t.baseEffect.destoryMe(),null!=t.applyEffect&&t.applyEffect.destoryMe();},e.prototype.getBufferByType=function(t){for(var e=0;e<this.m_bufferList.length;e++){var n=this.m_bufferList[e];if(n.buffType==t)return n;}
var i=new BufferInfo();return i.buffType=BufferType.none,i;},e.prototype.getBufferDuration=function(t){if(t==BufferType.stun)return Global.getConstantsInfo().DTPK_dizzinessTime;if(t==BufferType.doubleScore)return Global.getConstantsInfo().DTPK_doubleScoreTime;var e=UserDataMgr.getInstance().getUserInfo().playerId,n=UserDataMgr.getInstance().getPlayer(e),i=DTPlayerMGR.getInstance().DTPropValueInfoDIC;switch(t){case BufferType.doubleCoin:return i.get(1).DTPK_duration[n.doubleGoldLv-1];case BufferType.shield:return i.get(2).DTPK_duration[n.shieldLv-1];case BufferType.magnet:return i.get(3).DTPK_duration[n.magnetLv-1];case BufferType.flight:return i.get(4).DTPK_duration[n.planeLv-1];case BufferType.flight:return-1;default:return 0;}},e.prototype.getBufferEffectInfo=function(t,e){var n=null;return t==BufferType.stun?((n=EffectMgr.getInstance().spawnEffect(DTEffectIdPK.DTPK_hero_xy)).followTarget=PlayerMgr.getInstance().getCurrentPlayerControll().gameObject,n.followOffset=Laya.Vector3.ZERO):t==BufferType.shield?((n=EffectMgr.getInstance().spawnEffect(DTEffectIdPK.DTPK_prop_armor1)).followTarget=PlayerMgr.getInstance().getCurrentPlayerControll().gameObject,n.followOffset=new Laya.Vector3(0,.1,0)):t==BufferType.magnet&&((n=EffectMgr.getInstance().spawnEffect(DTEffectIdPK.DTPK_Hero_Binding_Magnet)).transform.parent=PlayerMgr.getInstance().getCurrentPlayerControll().getBonePointObj().transform,n.transform.localRotationEuler=new Laya.Vector3(90,90,0),n.transform.localPosition=new Laya.Vector3(0,0,0)),n;},e.prototype.Update=function(t){if(GameMgr.isInRun())for(var e=0;e<this.m_bufferList.length;e++){var n=this.m_bufferList[e];if(n.timeCountter+=Game.Constant.timeDelta,n.buffType!=BufferType.huaban&&n.timeCountter>=n.duration)return this._releaseBufferResource(n),this.m_bufferList.splice(e,1),void e--;}},e;}(Unity.MonoBehaviour),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),GameRewardCount=function(t){function e(){var e=t.call(this)||this;return e.m_gameAddCoins=[],e.m_gameAddCoins=[],e;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.initGameData=function(){for(var t=this.m_gameAddCoins.length=0;t<DTCurrencyPK.DTPK_Egg_green;t++){this.m_gameAddCoins.push(0);}},e.prototype.addCurrencyBytype=function(t,e){var n=t-1;this.m_gameAddCoins[n]+=null==e?1:e,t==DTCurrencyPK.DTPK_Gold&&PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_GAME_GOLD_ADD,this.m_gameAddCoins[n]);},e.prototype.getGameCurrencyByType=function(t){var e=t-1;return this.m_gameAddCoins[e];},e.prototype.setGameCurrencyToUser=function(){for(var t=0;t<this.m_gameAddCoins.length;t++){var e=this.m_gameAddCoins[t];if(0<e){var n=t+1;UserDataMgr.getInstance().addCurrencyToDic(n,e);}}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),GameMgr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_runDistance=0,e.m_gameShareCount=0,e.m_gameVideoCount=0,e.m_gameState=DTGameStatePK.DTPK_Stage,e.m_lastState=DTGameStatePK.DTPK_Stage,e._lastTime=0,e.schedule=0,e.m_isRelesePushEvent=!1,e.m_relesePushTime=0,e;}
return __extends(e,t),e.getInstance=function(){return null==this._inst&&(this._inst=ComponentRootManger.getInstance().addComponent(e)),this._inst;},Object.defineProperty(e.prototype,"layerTerrain",{get:function t(){return this.m_layerTerrain;},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerBarrier",{get:function t(){return this.m_layerBarrier;},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerPlayer",{get:function t(){return this.m_layerPlayer;},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerElement",{get:function t(){return this.m_layerElement;},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerEvent",{get:function t(){return this.m_layerEvent;},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerCurrency",{get:function t(){return this.m_layerCurrency;},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerTerrainNumber",{get:function t(){return this.m_layerTerrain.number;},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerBarrierNumber",{get:function t(){return this.m_layerBarrier.number;},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerPlayerNumber",{get:function t(){return this.m_layerPlayer.number;},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerElementNumber",{get:function t(){return this.m_layerElement.number;},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerEventNumber",{get:function t(){return this.m_layerEvent.number;},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerCurrencyNumber",{get:function t(){return this.m_layerCurrency.number;},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusHandler",{set:function t(e){this._focusHandler=e;},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusHandlerCaller",{set:function t(e){this._focusHandlerCaller=e;},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"runDistance",{get:function t(){return this.m_runDistance;},set:function t(e){this.m_runDistance=e,PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_GAME_SET_SCORE);},enumerable:!0,configurable:!0}),e.prototype.initData=function(){this.m_layerTerrain=Laya.Layer.getLayerByNumber(8),this.m_layerPlayer=Laya.Layer.getLayerByNumber(9),this.m_layerBarrier=Laya.Layer.getLayerByNumber(10),this.m_layerElement=Laya.Layer.getLayerByNumber(11),this.m_layerEvent=Laya.Layer.getLayerByNumber(12),this.m_layerCurrency=Laya.Layer.getLayerByNumber(14);},e.prototype.setGameState=function(t){this.m_gameState=t;},e.isInStage=function(){return this.getInstance().m_gameState==DTGameStatePK.DTPK_Stage;},e.isInRun=function(){return this.getInstance().m_gameState==DTGameStatePK.DTPK_Run;},e.isGameOver=function(){return this.getInstance().m_gameState==DTGameStatePK.DTPK_GameOver;},e.prototype.gameOver=function(t){this.setGameState(DTGameStatePK.DTPK_GameOver),PlayerMgr.getInstance().getCurrentPlayerControll().gameOver(t),AudioMgr.getInstance().stopGameMusic();},e.prototype.Awake=function(){this.m_startPoint=new Laya.Point(),this.m_curPoint=new Laya.Vector2(),Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this._onTouchDown),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this._onTouchMove),Laya.stage.on(Laya.Event.MOUSE_UP,this,this._onTouchUp),Laya.stage.on(Laya.Event.MOUSE_OUT,this,this._onTouchUp),Laya.stage.on(Laya.Event.KEY_DOWN,this,this.onKeyDown),Laya.stage.on(Laya.Event.KEY_UP,this,this.onKeyUp),WeChatUtils.GetInstance().OnAppHide(function(){e.getInstance().onAppHide();}),PF.NotificationCenter.GetInstance().AddObserver(this,this.onShareInGameHandler,PfuPlatformManager.NOTIFY_SHARE_IN_GAME);},e.prototype.onShareInGameHandler=function(){for(var t=PfuPlatformManager.GetInstance().GetShareUserList(1),e=0;e<t.length;e++){var n=t[e];UserDataMgr.getInstance().addHuabanYaoQing(n.uid,n.name,n.sex,n.level,n.pickUrl);}
UserDataMgr.getInstance().SoleSaveHuabanQianDaoInfo(),PF.NotificationCenter.GetInstance().PostNotification("GiftUIShareFriend"),PF.NotificationCenter.GetInstance().PostNotification("MainUIShareFriend");},e.prototype.onAppHide=function(){this.pauseGame();},e.prototype.onAppShow=function(){this.unpauseGame(),this.m_gameState==DTGameStatePK.DTPK_Run?AudioMgr.getInstance().playGameMusic(DTSoundIdPK.DTPK_run_bgm):this.m_gameState==DTGameStatePK.DTPK_Stage&&(e.ingamePause||AudioMgr.getInstance().playGameMusic(DTSoundIdPK.DTPK_home_bgm));},e.prototype.onKeyDown=function(t){switch(t.keyCode){case Laya.Keyboard.LEFT:case Laya.Keyboard.A:this.sendSwipeInput(DTSwipeDirectionPK.DTPK_Left);break;case Laya.Keyboard.RIGHT:case Laya.Keyboard.D:this.sendSwipeInput(DTSwipeDirectionPK.DTPK_Right);break;case Laya.Keyboard.DOWN:case Laya.Keyboard.S:this.sendSwipeInput(DTSwipeDirectionPK.DTPK_Down);break;case Laya.Keyboard.W:case Laya.Keyboard.UP:this.sendSwipeInput(DTSwipeDirectionPK.DTPK_Up);break;case Laya.Keyboard.J:BufferMgr.getInstance().buffer(BufferType.shield);break;case Laya.Keyboard.K:PlayerMgr.getInstance().getCurrentPlayerControll().isHuaBan()&&BufferMgr.getInstance().unbuffer(BufferType.huaban),BufferMgr.getInstance().buffer(BufferType.flight);break;case Laya.Keyboard.M:BufferMgr.getInstance().buffer(BufferType.huaban);break;case Laya.Keyboard.H:this.UseSuperProp();}},e.prototype.onKeyUp=function(t){switch(t.keyCode){case Laya.Keyboard.A:case Laya.Keyboard.D:case Laya.Keyboard.W:case Laya.Keyboard.S:break;case Laya.Keyboard.P:this.pauseGame();}},Object.defineProperty(e,"deltaTime",{get:function t(){return .001*this.getInstance()._deltaTime;},enumerable:!0,configurable:!0}),e.prototype.Update=function(){this._timeAtCurrentFrame=Date.now(),this._deltaTime=this._timeAtCurrentFrame-this._timeAtLastFrame,this._timeAtLastFrame=this._timeAtCurrentFrame,this._updateReleseInputEvent();},e.prototype.isHaBan=function(){return null==PlayerMgr.getInstance().getCurrentPlayerControll()||PlayerMgr.getInstance().getCurrentPlayerControll().isHuaBan();},e.prototype.generateGame=function(){TerrainMgr.GetInstance().firstSpawn=!0;var t=Global.loadResourceHomeId;this.m_isTouch=!1,TerrainGameMgr.getInstance().generateNewGame(t),TerrainMgr.GetInstance().syncGeneratePool();},e.prototype.beginGame=function(){GameRewardCount.getInstance().initGameData(),GameRewardCount.getInstance().addCurrencyBytype(DTCurrencyPK.DTPK_Gold,0),CameraMgr.getInstance().resetCurve(),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_GAME_START),e.isStun=!1,e.isInHelmet=!1,e.isInMagnet=!1,e.isInDoubleGold=!1,this.m_runDistance=0,null==PfuSdk.GetOLParamInt("fenxiang_number")&&PfuSdk.SetOLParamInt("fenxiang_number",0),null==PfuSdk.GetOLParamInt("revive_video_number")&&PfuSdk.SetOLParamInt("revive_video_number",0),this.m_gameShareCount=0,this.m_gameVideoCount=0,this.setGameState(DTGameStatePK.DTPK_Run),this.useItem(),PlayerMgr.getInstance().startGame(),AudioMgr.getInstance().stopAllGmeSound(),AudioMgr.getInstance().playGameMusic(DTSoundIdPK.DTPK_run_bgm),Global.StatisticsStartLevelHeroId(Global.selectPlayerId),Global.StatisticsUseHuaban(UserDataMgr.getInstance().getUserInfo().huaBanId);},e.prototype.releaseGame=function(){this.setGameState(DTGameStatePK.DTPK_Stage),SceneSkyMgr.getInstance().releaseSky(),TerrainMgr.GetInstance().promptlyReleaseTerrains(),PlayerMgr.getInstance().releaseGame(),BufferMgr.getInstance().releaseBuffer(),CameraMgr.getInstance().releaseCamera();},e.prototype.revivePlayer=function(){BufferMgr.getInstance().releaseBuffer(),PlayerMgr.getInstance().getCurrentPlayerControll().playerReviveGame(!1),this.setGameState(DTGameStatePK.DTPK_Run),this.unpauseGame();},e.prototype.pauseGame=function(){Game.Constant.timeScale=0;},e.prototype.unpauseGame=function(){e.ingamePause||(Game.Constant.timeScale=1);},e.prototype.gamingToPause=function(){Game.Constant.timeScale=0;},e.prototype.teachpauseToGaming=function(){Game.Constant.timeScale=1;},e.prototype.chestpauseToGaming=function(){var t=this;e.ingamePause||(this.schedule=0,PlayerMgr.getInstance().getCurrentPlayerControll().m_isChestPause=!1,Laya.Tween.to(this,{schedule:1},3e3).update=Laya.Handler.create(this,function(){Game.Constant.timeScale=t.schedule,PlayerMgr.getInstance().getCurrentPlayerControll().animationResume(t.schedule);},null,!1),this.setGameState(DTGameStatePK.DTPK_Run));},e.prototype.UseSuperProp=function(){var t=this;PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_SUPER_START_FLASH_WHITE),e.isSuperStart=!0;var n=EffectMgr.getInstance().spawnEffect(DTEffectIdPK.DTPK_ui_space,new Laya.Vector3(0,5.6,0));n.reset(),TerrainMgr.GetInstance().promptlyReleaseTerrains(),this._schedule=this.runDistance;var i=this.runDistance+Game.Constant.SUPER_START_TERRAIN_INDEX*Global.getConstantsInfo().DTPK_terrainLength;Laya.Tween.to(this,{_schedule:i},2e3).update=Laya.Handler.create(this,function(){t.runDistance=t._schedule;},null,!1),PlayerMgr.getInstance().releaseGame(),SceneSkyMgr.getInstance().openSuperEvn(),Laya.timer.once(2e3,this,function(){n.destoryMe(),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_SUPER_STATE_END_FLASH_WHITE),TerrainGameMgr.getInstance().generateSuperGame(),TerrainMgr.GetInstance().syncGeneratePool(),TerrainMgr.GetInstance().delectTerrainObjectsFromAmongPlayer(-Global.getConstantsInfo().DTPK_terrainLength,Global.getConstantsInfo().DTPK_helmetRODistance),SceneSkyMgr.getInstance().closeSuperEvn(),e.isSuperStart=!1,BufferMgr.getInstance().buffer(BufferType.shield,10),PlayerMgr.getInstance().startGame();});},e.prototype.useItem=function(){var t=this;this.SuperItem(function(){UserDataMgr.getInstance().isUsedPropInfo(DTPropPK.DTPK_PropMagnet)&&BufferMgr.getInstance().buffer(BufferType.magnet,1e8),UserDataMgr.getInstance().isUsedPropInfo(DTPropPK.DTPK_PropHelmet)&&Laya.timer.once(1e3,t,function(){BufferMgr.getInstance().buffer(BufferType.shield,1e8);}),UserDataMgr.getInstance().UnusePropInfo();});},e.prototype.SuperItem=function(t){var n=this;if(UserDataMgr.getInstance().isUsedPropInfo(DTPropPK.DTPK_PropPlane)){this.runDistance=0,PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_SUPER_START_FLASH_WHITE),e.isSuperStart=!0,SceneSkyMgr.getInstance().openSuperEvn();var i=EffectMgr.getInstance().spawnEffect(DTEffectIdPK.DTPK_ui_space,new Laya.Vector3(0,5.6,0));i.reset(),TerrainMgr.GetInstance().promptlyReleaseTerrains(),this._schedule=0;var r=Game.Constant.SUPER_START_TERRAIN_INDEX*Global.getConstantsInfo().DTPK_terrainLength;Laya.Tween.to(this,{_schedule:r},2e3).update=Laya.Handler.create(this,function(){n.runDistance=n._schedule;},null,!1),Laya.timer.once(2e3,this,function(){i.destoryMe(),TerrainGameMgr.getInstance().generateSuperGame(),TerrainMgr.GetInstance().syncGeneratePool(),TerrainMgr.GetInstance().delectTerrainObjectsFromAmongPlayer(-Global.getConstantsInfo().DTPK_terrainLength,Global.getConstantsInfo().DTPK_helmetRODistance),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_SUPER_STATE_END_FLASH_WHITE),SceneSkyMgr.getInstance().closeSuperEvn(),e.isSuperStart=!1,t();});}else t();},e.IsSuperProp=function(){return e.isSuperStart;},e.prototype.sendAddBuffer=function(t){t.buffType==BufferType.stun?e.isStun=!0:t.buffType==BufferType.shield?e.isInHelmet=!0:t.buffType==BufferType.magnet?e.isInMagnet=!0:t.buffType==BufferType.doubleCoin?(e.isInDoubleGold=!0,PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_DOUBLE_COIN)):t.buffType==BufferType.flight?PlayerMgr.getInstance().getCurrentPlayerControll().changeState(PlayerEntityNormalFlyTakeoff.GetInstance()):t.buffType==BufferType.huaban&&PlayerMgr.getInstance().getCurrentPlayerControll().onHitHuaBan();},e.prototype.sendDelectBuffer=function(t){t.buffType==BufferType.stun?e.isStun=!1:t.buffType==BufferType.shield?e.isInHelmet=!1:t.buffType==BufferType.magnet?e.isInMagnet=!1:t.buffType==BufferType.doubleCoin?(e.isInDoubleGold=!1,PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_DOUBLE_COIN_OVER)):t.buffType==BufferType.flight?PlayerMgr.getInstance().getCurrentPlayerControll().changeState(PlayerEntityNormalFlyFlayFall.GetInstance()):t.buffType==BufferType.huaban&&PlayerMgr.getInstance().getCurrentPlayerControll().setHuaBanVisiable(!1);},e.prototype.setGameSwipeHnadler=function(t,e){this.m_gamePushSwipe=e,this.m_gamePushObj=t;},e.prototype._updateReleseInputEvent=function(){this.m_isRelesePushEvent&&(this.m_relesePushTime+=Game.Constant.timeDelta,this.m_relesePushTime>=e.RELESE_PUSH_TIME&&this._endReleseInputEvent());},e.prototype._startReleseInputEvent=function(){this.m_relesePushTime=0,this.m_isRelesePushEvent=!0;},e.prototype._endReleseInputEvent=function(){this.m_isRelesePushEvent=!1,this.m_isPushEvent=!1,this.m_startPoint.setTo(this.m_curPoint.x,this.m_curPoint.y);},e.prototype._onTouchDown=function(t){this.m_moveCount=0,this.m_isTouch=!0,this.m_startPoint.setTo(Laya.stage.mouseX,Laya.stage.mouseY);},e.prototype._onTouchMove=function(t){if(this.m_isTouch&&(this.m_curPoint.x=Laya.stage.mouseX,this.m_curPoint.y=Laya.stage.mouseY,!this.m_isPushEvent)){var e=this.m_startPoint.distance(this.m_curPoint.x,this.m_curPoint.y),n=18;if(0<this.m_moveCount&&(n=20),n<=e){var i=new Laya.Vector2(this.m_curPoint.x-this.m_startPoint.x,this.m_curPoint.y-this.m_startPoint.y),r=this._getInputDirection(i,1);this.sendSwipeInput(r),this.m_isPushEvent=!0,this._startReleseInputEvent(),this.m_moveCount++;}
this.m_startPoint.setTo(this.m_curPoint.x,this.m_curPoint.y);}},e.prototype._onTouchUp=function(t){this.m_isTouch=!1,this._endReleseInputEvent();},e.prototype._getInputDirection=function(t,n){var i=this._normalTOAngle(e.m_Rad2Deg*Math.atan2(t.y,t.x));360<=i&&(i-=360);for(var r=0;r<e.m_angleToDirMap.length;++r){var a=e.m_moveAnagle[r][0],o=e.m_moveAnagle[r][1];if(a<=i&&i<=o)return e.m_angleToDirMap[r];}
return DTSwipeDirectionPK.DTPK_Non;},e.prototype._normalTOAngle=function(t){return(t%=360)<0&&(t+=360),t;},e.prototype.sendSwipeInput=function(t){e.isInRun()&&(e.IsSuperProp()||null!=this.m_gamePushSwipe&&this.m_gamePushSwipe(this.m_gamePushObj,t));},e.ingamePause=!1,e.isSuperStart=!1,e.isInDoubleGold=!1,e.m_Rad2Deg=57.2958,e.m_moveAnagle=[[0,50],[50,130],[130,229],[230,320],[320,360]],e.m_angleToDirMap=[DTSwipeDirectionPK.DTPK_Right,DTSwipeDirectionPK.DTPK_Down,DTSwipeDirectionPK.DTPK_Left,DTSwipeDirectionPK.DTPK_Up,DTSwipeDirectionPK.DTPK_Right],e.RELESE_PUSH_TIME=.4,e;}(Unity.MonoBehaviour),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),HBTerrain=function(){function t(t,e){this.id=t,this.space=e,this.spaceCounter=0;}
return t.prototype.disable=function(){this.spaceCounter=this.spaceCounter;},t.prototype.counter=function(){this.spaceCounter--;},t;}(),LevelDataMgr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_levelDatas=new PF.Dictionary(),e.m_huabanLevelDatas=new PF.Dictionary(),e.m_hbLevelDatas=new PF.Dictionary(),e;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.generate=function(){for(var t=DTHomeInfosMGR.getInstance().DTHomeInfoDIC,e=DTLevelGroupInfosMGR.getInstance().DTLevelGroupInfoDIC,n=0;n<t.count;n++){var i=t.getKeyByIndex(n),r=t.get(i),a=new LDLevelInfo();a.levelId=r.DTPK_id,a.levelGroupDatas=new Array(),a.poolTerrainIdDic=new PF.Dictionary(),this._generateLevelGroup(a,e),this.m_levelDatas.add(a.levelId,a);}
for(n=0;n<e.count;n++){i=e.getKeyByIndex(n),r=e.get(i),this.a(r.DTPK_levelId,r.DTPK_huaBanGroupIds);}
for(n=0;n<e.count;n++){i=e.getKeyByIndex(n),r=e.get(i),this.b(r.DTPK_levelId,r.DTPK_huaBanGroupIds);}
this.m_huabanLevelDatas,this.m_hbLevelDatas,this.m_teachGroupList=new Array();var o=Global.getConstantsInfo().DTPK_teachTerrainList;for(n=0;n<o.length;n++){var s=new Array(),l=o[n],u=new LDTerrainGroupInfo(),h=DTTerrainGroupInfoMGR.getInstance().DTTerrainGroupInfoDIC.get(l);u.groupInfo=h,s.push(u),this.m_teachGroupList.push(s);}},e.prototype.b=function(t,e){if(this.m_hbLevelDatas.containsKey(t)){for(var n=this.m_hbLevelDatas.get(t),i=0;i<e.length;i++){if(0!=e[i]){var r=DTTerrainGroupInfoMGR.getInstance().DTTerrainGroupInfoDIC.get(e[i]);if(n.containsKey(r.DTPK_difficultyType)){var a=n.get(r.DTPK_difficultyType);this.hasB(a,e[i])||a.push(new HBTerrain(e[i],r.DTPK_lockNum));}else n.add(r.DTPK_difficultyType,[new HBTerrain(e[i],r.DTPK_lockNum)]);}}}else this.m_hbLevelDatas.add(t,new PF.Dictionary()),this.b(t,e);},e.prototype._randomHuaBan=function(t,e){for(var n=this.m_hbLevelDatas.get(t).get(e),i=0;i<this.m_hbLevelDatas.count;i++){for(var r=this.m_hbLevelDatas.getKeyByIndex(i),a=this.m_hbLevelDatas.get(r),o=0;o<a.count;o++){for(var s=a.getKeyByIndex(o),l=a.get(s),u=0;u<l.length;u++){l[u].counter();}}}
var h=[];for(i=0;i<n.length;i++){n[i].spaceCounter<=0&&(h.push(n[i]),n[i].disable());}
var c=Math.floor(Math.random()*h.length);return DTTerrainGroupInfoMGR.getInstance().DTTerrainGroupInfoDIC.get(h[c].id);},e.prototype.a=function(t,e){if(this.m_huabanLevelDatas.containsKey(t)){for(var n=this.m_huabanLevelDatas.get(t),i=0;i<e.length;i++){if(0!=e[i]){var r=DTTerrainGroupInfoMGR.getInstance().DTTerrainGroupInfoDIC.get(e[i]);if(n.containsKey(r.DTPK_difficultyType)){var a=n.get(r.DTPK_difficultyType);this.hasA(a,e[i])||a.push(e[i]);}else n.add(r.DTPK_difficultyType,[e[i]]);}}}else this.m_huabanLevelDatas.add(t,new PF.Dictionary()),this.a(t,e);},e.prototype.hasB=function(t,e){for(var n=0;n<t.length;n++){if(t[n].id==e)return!0;}
return!1;},e.prototype.hasA=function(t,e){for(var n=0;n<t.length;n++){if(t[n]==e)return!0;}
return!1;},e.prototype.randomHuaBan=function(t,e){var n=this.m_huabanLevelDatas.get(t).get(e),i=Math.floor(Math.random()*n.length);return DTTerrainGroupInfoMGR.getInstance().DTTerrainGroupInfoDIC.get(n[i]);},e.prototype._generateLevelGroup=function(t,e){for(var n=0;n<e.count;n++){var i=e.getKeyByIndex(n),r=e.get(i);if(t.levelId==r.DTPK_levelId){for(var a=t.levelGroupDatas,o=!0,s=0;s<a.length;s++){var l;if((l=a[s]).levelGroupId==r.DTPK_groupId){this._newLevelGroup(t,l,r),o=!1;break;}}
o&&((l=new LDLevelGroupInfo()).levelGroupId=r.DTPK_groupId,this._newLevelGroup(t,l,r),a.push(l));}}},e.prototype._newLevelGroup=function(t,e,n){if(null==e.terrainGroupInfos){e.terrainGroupInfos=new Array();for(var i=0;i<n.DTPK_terrainGroupIds.length;i++){var r=new Array();e.terrainGroupInfos.push(r);}}
if(e.terrainGroupInfos.length==n.DTPK_terrainGroupIds.length){for(i=0;i<e.terrainGroupInfos.length;i++){r=e.terrainGroupInfos[i];var a=n.DTPK_terrainGroupIds[i];if(0!=a){var o=new LDTerrainGroupInfo(),s=DTTerrainGroupInfoMGR.getInstance().DTTerrainGroupInfoDIC.get(a);o.groupInfo=s,r.push(o),t.addTerrainIdToPool(s);}}
for(null==e.finalGroupIdDic&&(e.finalGroupIdDic=new PF.Dictionary()),i=0;i<n.DTPK_finalGroupIds.length;i++){var l=n.DTPK_finalGroupIds[i];0!=l&&this._addFinalDifficultyGroup(t,e.finalGroupIdDic,l);}}else console.log("LevelGroupInfo表 terrainGroupIds 组内数组长度不匹配! id :"+n.DTPK_id);},e.prototype._addFinalDifficultyGroup=function(t,e,n){var i=DTTerrainGroupInfoMGR.getInstance().DTTerrainGroupInfoDIC.get(n),r=null;e.containsKey(i.DTPK_difficultyType)?r=e.get(i.DTPK_difficultyType):(r=new Array(),e.add(i.DTPK_difficultyType,r));for(var a=0;a<r.length;a++){if(r[a].groupInfo.DTPK_id==n)return;}
var o=new LDTerrainGroupInfo();o.groupInfo=i,r.push(o),t.addTerrainIdToPool(i);},e.prototype.getLevelDataById=function(t){return this.m_levelDatas.get(t);},e.prototype.getFinalGroupsById=function(t,e,n){var i=this._getLevelGroupDataById(t,e);return null==i?null:i.finalGroupIdDic.get(n);},e.prototype.getTerrainGroupsById=function(t,e,n){return this._getLevelGroupDataById(t,e).terrainGroupInfos[n];},e.prototype.getTerrainGroupsCountById=function(t,e){return this._getLevelGroupDataById(t,e).terrainGroupInfos.length;},e.prototype._getLevelGroupDataById=function(t,e){var n=this.m_levelDatas.get(t);if(null==n)return null;for(var i=0;i<n.levelGroupDatas.length;i++){var r=n.levelGroupDatas[i];if(r.levelGroupId==e)return r;}
return null;},e.prototype.getTeachFinalGroupsArray=function(t){return this.m_teachGroupList[t];},e.prototype.getTeachFinalGroupLength=function(){return this.m_teachGroupList.length;},e.prototype.releaseLevelGroupData=function(){for(var t=this.m_levelDatas.count,e=0;e<t;e++){for(var n=this.m_levelDatas.getKeyByIndex(e),i=this.m_levelDatas.get(n),r=0;r<i.levelGroupDatas.length;r++){for(var a=i.levelGroupDatas[r],o=0;o<a.finalGroupIdDic.count;o++){for(var s=a.finalGroupIdDic.getKeyByIndex(o),l=a.finalGroupIdDic.get(s),u=0;u<l.length;u++){l[u].resetLockCounter();}}
for(var h=0;h<a.terrainGroupInfos.length;h++){for(l=a.terrainGroupInfos[h],u=0;u<l.length;u++){l[u].resetLockCounter();}}}}},e;}(PF.Singleton),LDTerrainGroupInfo=function(){function t(){this.weight=50;}
return t.prototype.resetLockCounter=function(){this.isCreate=!1,this.lockCounter=this.groupInfo.DTPK_lockNum,this.weight=50;},t.prototype.update=function(){this.isCreate&&(this.lockCounter--,this.lockCounter<0&&this.resetLockCounter());},t.prototype.generate=function(){this.isCreate||(this.isCreate=!0,this.weight=0,this.lockCounter=this.groupInfo.DTPK_lockNum);},t;}(),LDLevelGroupInfo=function t(){},LDLevelInfo=function(){function t(){}
return t.prototype.addTerrainIdToPool=function(t){for(var e=0;e<t.DTPK_terrainIds.length;e++){var n=t.DTPK_terrainIds[e];this.poolTerrainIdDic.containsKey(n)||this.poolTerrainIdDic.add(n,n);}},t;}(),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),SceneSkyMgr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LIMIT_ROLE_DISTANCE=250.5,e;}
return __extends(e,t),e.getInstance=function(){return null==this._inst&&(this._inst=ComponentRootManger.getInstance().addComponent(e)),this._inst;},e.prototype.initSkyRoot=function(t){var e=t.getChildByName("GameMain");e?(this.m_skyBackgound=e.getChildByName("Sky_Yun"),this.m_superStart=e.getChildByName("superStartBg"),this.m_superStart.active=!1):console.log("game main is null");},e.prototype.StartGame=function(){},e.prototype.releaseSky=function(){this._updateMovement(this.m_skyBackgound,0,this.LIMIT_ROLE_DISTANCE);},e.prototype.Awake=function(){},e.prototype.Update=function(t){if(GameMgr.isInRun()&&null!=PlayerMgr.getInstance().getCurrentPlayerControll()){var e=PlayerMgr.getInstance().getCurrentPlayerControll().getThisPos().z;this._updateMovement(this.m_skyBackgound,e,this.LIMIT_ROLE_DISTANCE);}},e.prototype._updateMovement=function(t,e,n){var i=t.transform.position;i.z=e+n,t.transform.position=i;},e.prototype.openSuperEvn=function(){PlayerMgr.getInstance().getCurrentPlayerControll().getThisPos(),this.m_superStart.active=!0;},e.prototype.closeSuperEvn=function(){this.m_superStart.active=!1;},e;}(Unity.MonoBehaviour),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),TerrainDataMgr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_loadFinish=!1,e;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.loadData=function(t){var e,n=this,i=Game.Constant.isLowRes?"_low":"",r="subpackage/Data/Level/";e=[{url:r+"level_1"+i+".bin",type:Laya.Loader.BUFFER},{url:r+"level_2"+i+".bin",type:Laya.Loader.BUFFER},{url:r+"level_3"+i+".bin",type:Laya.Loader.BUFFER},{url:r+"level_91"+i+".bin",type:Laya.Loader.BUFFER}],this.m_terrainDatas=new PF.Dictionary(),Laya.loader.load(e,Laya.Handler.create(this,function(){for(var i=0;i<e.length;i++){var r=Laya.loader.getRes(e[i].url),a=new Uint8Array(r),o=terrain.TerrainLevelData.decode(a);n.m_terrainDatas.add(o.id,o),Laya.loader.clearRes(e[i].url);}
n.m_loadFinish=!0,t();}));},e.prototype._inputTerrainObjectDebug=function(){for(var t=0;t<this.m_terrainDatas.count;t++){for(var e=this.m_terrainDatas.getKeyByIndex(t),n=this.m_terrainDatas.get(e),i=0;i<n.terrains.length;i++){n.terrains[i].key;for(var r=n.terrains[i].value,a=0;a<r.elements.length;a++){var o=r.elements[a];this.printErrorDate(0,n.id,r.id,o);}}}},e.prototype.printErrorDate=function(t,e,n,i){(499<i.objectId&&i.objectId<1e3||100503==i.objectId||1==i.objectId)&&Debug.Log("levelId:"+e+"|terainId:"+n+"|layer:"+t+"|objectId:"+i.objectId);for(var r=0;r<i.child.length;r++){var a=i.child[r];t++,this.printErrorDate(t,e,n,a);}},e.prototype.isLoaderFinish=function(){return this.m_loadFinish;},e.prototype.GetTerrainLevelData=function(t){var e=this.m_terrainDatas.get(t);return null==e&&console.log("获取关卡地形数据错误 未找到ID为:"+t+"的关卡数据"),e;},e.prototype.GetTerrainDataByLevelData=function(t,e){for(var n=0;n<t.terrains.length;n++){var i=t.terrains[n];if(i.key==e)return i.value;}
return null;},e.prototype.GetTerrainData=function(t){for(var e=0;e<this.m_terrainDatas.count;e++){var n=this.m_terrainDatas.getKeyByIndex(e),i=this.m_terrainDatas.get(n),r=this.GetTerrainDataByLevelData(i,t);if(null!=r)return r;}
return null;},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DifficultyMgr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_randomTunnel=new Array(),e.terrainInTunnelGroupId=0,e;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.init=function(t){this.m_changeNum=0,this.m_otfChangeNum=0,this.m_tunnelChangeNum=0;for(var e=this.m_randomTunnel.length=0;e<t.DTPK_entryTunnelGroupId.length;e++){for(var n=t.DTPK_entryTunnelGroupId[e].split("#"),i=new Array(),r=0;r<n.length;r++){var a=n[r];i.push(parseInt(a));}
this.m_randomTunnel.push(i);}},e.prototype.setSuperDifficulty=function(t,e){for(var n=0;n<t.DTPK_changeDifficultys.length;n++){t.DTPK_changeDifficultys[n]<e&&(this.m_changeNum=n);}},e.prototype.setTerrainLevelDifficulty=function(t,e){var n=e.tIndex+1;this.m_changeNum>t.DTPK_changeDifficultys.length-1||t.DTPK_changeDifficultys[this.m_changeNum]==n&&(TerrainMgr.GetInstance().increaseDifficult(),Debug.Log("提速！！！"+this.m_changeNum+"|当前难度"+TerrainMgr.GetInstance().m_currentDifficulty),this.m_changeNum++);},e.prototype.setTerrainOTFInfo=function(t,e){var n=e.tIndex+1;return!(this.m_otfChangeNum>t.DTPK_spawnOTF.length-1||t.DTPK_spawnOTF[this.m_otfChangeNum]!=n||(this.m_otfChangeNum++,0));},e.prototype.setTerrainTunnelInfo=function(t,e){if(this.m_tunnelChangeNum>t.DTPK_spawnTunnel.length-1)return!1;if(0==t.DTPK_entryTunnelOdds.length||1==t.DTPK_entryTunnelOdds.length&&0==t.DTPK_entryTunnelOdds[0])return!1;if(t.DTPK_spawnTunnel[this.m_tunnelChangeNum]==e){var n=this.m_tunnelChangeNum;this.m_tunnelChangeNum++;var i=t.DTPK_entryTunnelOdds[n];if(0==i)return!1;if(PF.BXRandom.Get().nextInt(0,100)<=i){var r=this.m_randomTunnel[n],a=r[PF.BXRandom.Get().nextInt(0,r.length)];return this.terrainInTunnelGroupId=a,!0;}}
return!1;},e.prototype.isChangeCommunalFacilityGroup=function(t,e,n){return!(e>t.DTPK_changeCommunalFacilityCount.length-1)&&n==t.DTPK_changeCommunalFacilityCount[e];},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),TerrainMgr=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.m_lastDifficult=-1,n.poolIndex=e.CREATE_POOL_SIZE-1,n.TERRAIN_OBJECT_ID_CHANGE_MAP=15,n.m_readyGroupInfos=new Array(),n.m_terrainGroupProgress=new TerrainGroupProgressData(),n.m_moveSpeed=28,n.m_showTerrains=new Array(),n.m_delectGroupTerrain=new Array(),n.m_diffOTF=new Array(),n.m_tcounter=0,n.m_chestChanceIndex=0,n.m_tCounter_tunnel=0,n.m_changeCommunalCount=0,n.firstSpawn=!0,n.m_insertTerrainGroups=new Array(),n.m_isGroupChangedCommunal=!1,n;}
return __extends(e,t),e.GetInstance=function(){return null==this.instance&&(this.instance=ComponentRootManger.getInstance().addComponent(e)),this.instance;},e.prototype.generate=function(){this.m_createObjScriptPool=[],this.m_createObjScriptArray=[],this.m_removeObjScriptArray=[],this.m_hideObjScriptArray=[],this.m_removeOjbInScene=[];for(var t=0;t<e.CREATE_POOL_SIZE;t++){this.m_createObjScriptPool.push(new CreateObjectPool(t));}
this.m_rootParent=new Laya.Sprite3D(),ComponentRootManger.getInstance().GetScene().addChild(this.m_rootParent);},e.prototype.Update=function(t){if(0<this.m_createObjScriptArray.length){var e=this.m_createObjScriptArray.shift();e.generate(),this.m_createObjScriptPool.push(e);}
if(0<this.m_removeObjScriptArray.length){var n=this.m_removeObjScriptArray.shift();TerrainObjectPoolMgr.getInstance().delectObject(n);}
if(0<this.m_hideObjScriptArray.length&&this.m_hideObjScriptArray.shift().CallHideModel(),0<this.m_removeOjbInScene.length){var i=this.m_removeOjbInScene.shift();this.m_rootParent.removeChild(i);}},e.prototype.clearGeneratePool=function(){this.m_createObjScriptArray.length=0;},e.prototype.syncClearPool=function(){for(this.m_hideObjScriptArray.length=0;0<this.m_removeObjScriptArray.length;){var t=this.m_removeObjScriptArray.shift();TerrainObjectPoolMgr.getInstance().delectObject(t);}},e.prototype.syncGeneratePool=function(){for(;0<this.m_createObjScriptArray.length;){var t=this.m_createObjScriptArray.shift();t.generate(),this.m_createObjScriptPool.push(t);}},e.prototype.addCreateObj=function(t,e,n,i,r,a,o){var s=this.m_createObjScriptPool.pop();null==s&&(this.poolIndex++,s=new CreateObjectPool(this.poolIndex)),s.init(t,e,n,i,r,a,o),this.m_createObjScriptArray.push(s);},e.prototype.delectObj=function(t){this.m_removeObjScriptArray.push(t);},e.prototype.generateTerrainObject=function(t,e,n,i,r){this.addCreateObj(!1,t,e,n,i,r);},e.prototype.generateTerrainV3=function(t,e,n,i){var r=new Laya.Sprite3D();r.transform.position=i;var a=r.addComponent(TerrainRootObject);this.m_rootParent.addChild(r);var o=new ShowTerrainData();o.levelId=t.DTPK_id,o.terrain=a,o.terrain.terrainId=n;var s=TerrainDataMgr.getInstance().GetTerrainLevelData(e),l=TerrainDataMgr.getInstance().GetTerrainDataByLevelData(s,n);null==l&&console.log("创建地形数据错误，未找到关卡:"+e+"|地形ID为:"+n+"的数据");for(var u=0;u<l.elements.length;u++){var h=l.elements[u];this.generateTerrainObject(!0,h,a,r,r);}
return o;},e.prototype.addDelectObjFormScene=function(t){this.m_removeOjbInScene.push(t);},e.prototype.Awake=function(){e.newTerrainDistance=e.DEF_FIRST_TERRAIN_COUNT*Global.getConstantsInfo().DTPK_terrainLength,e.releaseTerrainDistance=-(3*Global.getConstantsInfo().DTPK_terrainLength+32);},e.prototype.generateTerrainData=function(t){e.m_terrainGroupId=0,this.m_originalHomeInfo=DTHomeInfosMGR.getInstance().DTHomeInfoDIC.get(t),this.m_inHomeInfo=this.m_originalHomeInfo,this.m_commonHomeInfo=DTHomeInfosMGR.getInstance().DTHomeInfoDIC.get(this.m_inHomeInfo.DTPK_communalFacilityId),DifficultyMgr.getInstance().init(this.m_originalHomeInfo),this._initTerrainData();var n=this.getCurrentHomeInfo();this.setCurrentDifficult(n.DTPK_defDifficulty,!0),this._randomTerrainGroupIndex(),this._randomTerrainId(this.m_terrainGroupIndex,this.m_currentDifficulty,this.m_terrainGroupProgress,this.m_readyGroupInfos);},e.prototype.resetTerrainSuper=function(){this.m_changeCommunalCount+=Game.Constant.SUPER_START_TERRAIN_INDEX,this.m_tcounter+=Game.Constant.SUPER_START_TERRAIN_INDEX,1==this.m_inHomeInfo.DTPK_id&&(this.m_isChangeToCommunal=!0);var t=this.m_currentDifficulty+Game.Constant.SUPER_STATE_TERRAIN_DIFFICULTY;t>=this.m_inHomeInfo.DTPK_gameDifficultys.length&&(t=this.m_inHomeInfo.DTPK_gameDifficultys.length-1),this.setCurrentDifficult(t,!1),DifficultyMgr.getInstance().setSuperDifficulty(this.getCurrentHomeInfo(),this.m_tcounter),this._randomTerrainGroupIndex(),this._randomTerrainId(this.m_terrainGroupIndex,this.m_currentDifficulty,this.m_terrainGroupProgress,this.m_readyGroupInfos);},e.prototype.getCurrentHomeInfo=function(){return this.m_isGroupChangedCommunal?this.m_commonHomeInfo:this.m_inHomeInfo;},e.prototype._initTerrainData=function(){this.m_enemyColliderEvent=null,this.m_isGroupChangedCommunal=this.m_isChangeToCommunal=e.IsNotRoll=!1,this.m_readyGroupInfos.length=0,this.m_insertTerrainGroups.length=0,this._initTerrainGroupProgress(),this.m_changeCommunalCount=this.m_tcounter=this.m_tCounter_tunnel=this.m_chestChanceIndex=0,e.GameSpeedTimeNow=e.CurRunDistance=0;},e.prototype._initTerrainGroupProgress=function(){this.m_terrainGroupProgress.finishGroupCount=0,this.m_terrainGroupProgress.isFinalGroup=!1,this.m_terrainGroupProgress.tGroupIndex=0,this.m_terrainGroupProgress.tgInf=null;},e.prototype._originalHomeInfo=function(){return this.m_originalHomeInfo;},e.prototype.getHomeInfoData=function(){return this.m_inHomeInfo;},e.prototype.increaseDifficult=function(){this.setCurrentDifficult(this.m_currentDifficulty+1,!1);},e.prototype.setCurrentDifficult=function(t,e){var n=t-1;n<0||n>=this.m_inHomeInfo.DTPK_gameDifficultys.length||(this.m_currentDifficulty=t,this.m_targetMoveSpeed=this.m_inHomeInfo.DTPK_gameDifficultys[n],e&&(this.m_moveSpeed=this.m_targetMoveSpeed));},e.prototype._randomTerrainGroupIndex=function(){var t=this.getCurrentHomeInfo(),e=LevelDataMgr.getInstance().getLevelDataById(t.DTPK_id),n=PF.BXRandom.Get().nextInt(0,e.levelGroupDatas.length);this.m_terrainGroupIndex=e.levelGroupDatas[n].levelGroupId;},e.prototype._randomTerrainId=function(t,e,n,i){for(var r=this.getCurrentHomeInfo().DTPK_id;i.length<1;){var a=n.isFinalGroup,o=null;n.isFinalGroup?(o=LevelDataMgr.getInstance().getFinalGroupsById(r,t,e),n.finishGroupCount++):TeachMgr.isInTeach()&&TeachMgr.getInstance().isInTeachGame()?(o=LevelDataMgr.getInstance().getTeachFinalGroupsArray(n.finishGroupCount),n.finishGroupCount++,n.finishGroupCount>=LevelDataMgr.getInstance().getTeachFinalGroupLength()&&(n.isFinalGroup=!0)):(o=LevelDataMgr.getInstance().getTerrainGroupsById(r,t,n.finishGroupCount),n.finishGroupCount++,n.finishGroupCount>=LevelDataMgr.getInstance().getTerrainGroupsCountById(r,t)&&(n.isFinalGroup=!0));var s=this._getRandomTerrainGroupInfo(o,a).groupInfo;i.push(s);}},e.prototype._getRandomTerrainGroupInfo=function(t,e){for(var n=0,i=0;i<t.length;i++){n+=(o=t[i]).weight,o.update();}
var r=PF.BXRandom.Get().nextInt(0,n),a=t[n=0];for(i=0;i<t.length;i++){var o;if(r<(n+=(o=t[i]).weight)){a=o;break;}}
return e&&a.generate(),a;},e.prototype.customGenerateCurrencyGroup=function(t,e){var n=new terrain.TerrainElementData();n.objectId=t,n.type=terrain.BITypeV2.Static;var i=ComponentRootManger.getInstance().getManagerNode(),r=TerrainObjectPoolMgr.getInstance().generateObject(!1,n,t,e,new Laya.Vector3(1,1,1),new Laya.Vector3(0,0,0),i,null);return r.setRootObj(i),r.setCustom(!0),r;},e.prototype.addReleaseTerrainToList=function(t){if(t.terrain.callOutSceneAndRemoveObj(),0!=this.m_delectGroupTerrain.length){if(this.m_delectGroupTerrain[this.m_delectGroupTerrain.length-1].groupId!=t.groupId)for(;0<this.m_delectGroupTerrain.length;){this.m_delectGroupTerrain.pop().terrain.removeAllObject();}
this.m_delectGroupTerrain.push(t);}else this.m_delectGroupTerrain.push(t);},Object.defineProperty(e.prototype,"tCounter",{get:function t(){return this.m_tcounter;},enumerable:!0,configurable:!0}),e.terrainIdToDataId=function(t){for(var e=Math.floor(t/1e8),n=0;n<this.m_terrainDataToId.length;n++){if(e==this.m_terrainDataToId[n][0])return this.m_terrainDataToId[n][1];}
return 1;},e.prototype.generateNewTerrain=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var i=this._getTerrainId(),r=e.m_terrainGroupId,a=t?Game.Constant.HOME_CREATE_TERRAIN_OFFSET:0;a+=n;var o=this.m_showTerrains.length;0<o&&(a=this.m_lastShowTerrain.terrain.transform.position.z+Global.getConstantsInfo().DTPK_terrainLength),console.log("add NewTerrain z:"+a+"|terrainCount="+o+" terrainId="+i);var s=e.terrainIdToDataId(i),l=this.getCurrentHomeInfo(),u=this.generateTerrainV3(l,s,i,new Laya.Vector3(0,0,a));u.tIndex=this.m_tcounter,u.groupId=r,u.terrain.groupId=r,u.homeInf=l,u.isCommunal=this.m_isGroupChangedCommunal,this.m_lastShowTerrain=u,this.m_showTerrains.push(u),this._updateInsertGroups(u);},e.prototype._getTerrainId=function(){var t=this.m_readyGroupInfos[0];if(this.m_terrainGroupProgress.tGroupIndex>=t.DTPK_terrainIds.length){if(this.m_readyGroupInfos.shift(),this.m_isChangeToCommunal&&(this.m_specialLevel&&(this.m_inHomeInfo=this.m_tempHomeInfo,this.m_specialLevel=!1),this.m_isGroupChangedCommunal=!0,this._randomTerrainGroupIndex()),GameMgr.getInstance().isHaBan()||this.firstSpawn){var n=this.getCurrentHomeInfo().DTPK_id,i=LevelDataMgr.getInstance()._randomHuaBan(n,this.m_currentDifficulty);this.m_readyGroupInfos.push(i),this.firstSpawn=!1;}else 0<this.m_insertTerrainGroups.length?(i=this.m_insertTerrainGroups.shift(),this.m_readyGroupInfos.push(i)):this._randomTerrainId(this.m_terrainGroupIndex,this.m_currentDifficulty,this.m_terrainGroupProgress,this.m_readyGroupInfos);this.m_terrainGroupProgress.tGroupIndex=0,t=this.m_readyGroupInfos[0],e.m_terrainGroupId++;}
var r=t.DTPK_terrainIds[this.m_terrainGroupProgress.tGroupIndex];return this.m_terrainGroupProgress.tGroupIndex++,r;},e.prototype._updateInsertGroups=function(t){var e=this._originalHomeInfo();DifficultyMgr.getInstance().setTerrainLevelDifficulty(e,t),this._insertOTF(t),this._insertToTunnel(t),this._insertCommunalFacilityGroup(t),this.m_tcounter++;},e.prototype._insertOTF=function(t){var e=this._originalHomeInfo();if(DifficultyMgr.getInstance().setTerrainOTFInfo(e,t)){var n=this.getCurrentHomeInfo(),i=n.DTPK_npcGroupIds[PF.BXRandom.Get().nextInt(0,n.DTPK_npcGroupIds.length)];if(0==i)return;var r=DTTerrainGroupInfoMGR.getInstance().DTTerrainGroupInfoDIC.get(i);this.m_insertTerrainGroups.push(r);}},e.prototype._insertToTunnel=function(t){var e=this._originalHomeInfo(),n=DifficultyMgr.getInstance().setTerrainTunnelInfo(e,this.m_tCounter_tunnel);if(this.m_tCounter_tunnel++,n&&!this.m_specialLevel){var i=DTTerrainGroupInfoMGR.getInstance().DTTerrainGroupInfoDIC.get(DifficultyMgr.getInstance().terrainInTunnelGroupId);this.m_insertTerrainGroups.push(i);}},e.prototype._insertCommunalFacilityGroup=function(t){this.m_changeCommunalCount++;var e=this.getHomeInfoData();if(1==e.DTPK_id&&DifficultyMgr.getInstance().isChangeCommunalFacilityGroup(e,this.m_currentDifficulty-1,this.m_changeCommunalCount)){var n=e.DTPK_changeCommunalFacilityGroupIds;if(0==n.length||0==n[0]);else{var i=n[PF.BXRandom.Get().nextInt(0,n.length)],r=DTTerrainGroupInfoMGR.getInstance().DTTerrainGroupInfoDIC.get(i);this.m_insertTerrainGroups.push(r);}
this.m_isChangeToCommunal=!0;}},e.prototype.promptlyReleaseTerrains=function(){this.clearGeneratePool();for(var t=0;t<this.m_showTerrains.length;t++){this.m_showTerrains[t].terrain.removeAllObject();}
for(t=0;t<this.m_delectGroupTerrain.length;t++){this.m_delectGroupTerrain[t].terrain.removeAllObject();}
this.m_delectGroupTerrain.length=0,this.m_showTerrains.length=0,this.syncClearPool();},e.prototype.delectTerrainObjectsFromAmongPlayer=function(t,e){for(var n=0;n<this.m_showTerrains.length;n++){this.m_showTerrains[n].terrain.allDieFromAmongDelegate(t,e);}
this.syncClearPool(),this.m_readyGroupInfos.length=0,this.m_isChangeToCommunal&&(this.m_isGroupChangedCommunal=!0),this._randomTerrainGroupIndex(),this._randomTerrainId(this.m_terrainGroupIndex,this.m_currentDifficulty,this.m_terrainGroupProgress,this.m_readyGroupInfos);},e.prototype.polishingTerrainBurrow=function(t){for(var e=0;e<this.m_showTerrains.length;e++){var n=this.m_showTerrains[e],i=n.terrain.transform.position.z,r=PlayerMgr.getInstance().getCurrentPlayerControll().getThisPos().z;if(!(i>r+Global.getConstantsInfo().DTPK_terrainLength||i<r-Global.getConstantsInfo().DTPK_terrainLength)&&2==n.levelId){n.terrain.callDieOnBurrow();var a=n.homeInf.DTPK_groundObjectId,o=new terrain.TerrainElementData();o.objectId=a,o.type=terrain.BITypeV2.Static;var s=TerrainObjectPoolMgr.getInstance().generateObject(!0,o,a,new Laya.Vector3(0,0,0),new Laya.Vector3(1,1,1),new Laya.Vector3(0,0,0),n.terrain.gameObject);s.setRootScript(n.terrain),s.setRootObj(n.terrain.gameObject),n.terrain.registerObject(s);}}},e.CREATE_POOL_SIZE=100,e.DEF_FIRST_TERRAIN_COUNT=2,e.m_terrainDataToId=[[10,1],[20,2],[30,3],[40,4],[50,5],[60,6],[70,7],[91,91],[12,102],[13,103],[14,104],[15,105],[16,106],[17,107],[18,108],[19,109]],e.IsCreateSpecial=!1,e;}(Unity.MonoBehaviour),ShowTerrainData=function t(){},TerrainGroupProgressData=function t(){},CreateObjectPool=function(){function t(t){this._index=t;}
return t.prototype.getTerrainData=function(){return this._td;},t.prototype.init=function(t,e,n,i,r,a,o){this._isUseLocal=e,this._td=n,this._terrainRoot=i,this._parent=r,this._terrainNode=a,this._localPosition=new Laya.Vector3(-n.localPosition.x,n.localPosition.y,n.localPosition.z),this._localScale=new Laya.Vector3(n.localScale.x,n.localScale.y,n.localScale.z),this._localAngle=new Laya.Vector3(n.localEulerAngles.x,n.localEulerAngles.y,n.localEulerAngles.z),this._target=o,this._custom=t;},t.prototype.Debug=function(){console.log("index:"+this._index);},t.prototype.generate=function(){var t=this._td.objectId;if(this._td.souceType==BISourceType.PropRandom){if(-1==(t=this.getPropId(t,this._td)))return;}else this._td.souceType==BISourceType.MapRandom&&(t=Game.Constant.TERRAIN_OBJECT_ID_CHANGE_MAP);if(!this._custom){var e=DTTerrainObjectInfoMGR.getInstance().DTTerrainObjectDIC.get(t),n=PlayerMgr.getInstance().getCurrentPlayerControll();if(null!=n&&n.isInFly()&&e.DTPK_objectType!=DTBIObjectTypeV2PK.DTPK_Ground&&e.DTPK_objectType!=DTBIObjectTypeV2PK.DTPK_Model&&e.DTPK_objectType!=DTBIObjectTypeV2PK.DTPK_Event)return null;}
var i=TerrainObjectPoolMgr.getInstance().generateObject(this._isUseLocal,this._td,t,this._localPosition,this._localScale,this._localAngle,this._parent,this._target);if(null!=i&&(i.setRootScript(this._terrainRoot),i.setRootObj(this._terrainNode),null!=this._terrainRoot&&this._terrainRoot.registerObject(i),null!=this._td&&null!=this._td.child))for(var r=0;r<this._td.child.length;r++){var a=this._td.child[r];TerrainMgr.GetInstance().addCreateObj(this._custom,this._isUseLocal,a,this._terrainRoot,i.owner,this._terrainNode,this._target);}},t.prototype.getPropId=function(t,e){var n=DTConstantInfoMGR.getInstance().DTPropRandomDIC.get(t),i=PF.BXRandomUtils.RandomPropIndex(n.DTPK_odds);if(-1==i)return-1;var r=n.DTPK_randomIds[i];return!GameMgr.getInstance().isHaBan()||9!=r&&31!=r?r:-1;},t;}(),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),TerrainMapInfo=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.prototype._update=function(t){},e;}(Laya.Script),Terrain,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.prototype.getPo=function(){return this.m_po;},e.prototype.setPo=function(t){this.m_po=t;},e.prototype.setTd=function(t){this.m_td=t;},e.prototype.getPos=function(){return this.transform.position;},e.prototype.Awake=function(){},e.prototype.Start=function(){},e.prototype.Update=function(t){},e.prototype.CallStart=function(){this.CallShow();},e.prototype.CallShow=function(){},e.prototype.CallHide=function(){},e;}(Unity.MonoBehaviour);t.BaseTerrain=e;}(Terrain||(Terrain={}));var Terrain,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isActivity=!1,e;}
return __extends(e,t),e.prototype.setCustom=function(t){this.m_custom=t;},e.prototype.setRootScript=function(t){this.m_rootScript=t;},e.prototype.setRootObj=function(t){this.m_rootObj=t;},e.prototype.setTarget=function(t){this.m_target=t;},e.prototype.setOriginPos=function(t){this.m_originPos=t;},e.prototype.removeSelf=function(){TerrainMgr.GetInstance().delectObj(this);},e.prototype.Awake=function(){t.prototype.Awake.call(this),this.initOffsetCol();},e.prototype.Update=function(e){t.prototype.Update.call(this,e),this.updateMovement(),this.updateOutSceneAndHideThis();},e.prototype.updateMovement=function(){if(GameMgr.isInRun()&&(this.updateVisiable(),this._isActivity&&null!=this.m_td&&this.m_td.type==BITypeV2.Dynamic&&0!=this.m_td.moveSpeed)){var t=TerrainMgr.GameSpeedTimeNow;this.transform.translate(new Laya.Vector3(0,0,-this.m_td.moveSpeed*t));}},e.prototype.updateVisiable=function(){this._isActivity||0==this.m_td.activityDistance||null==this.m_td||this.m_td.type!=BITypeV2.Dynamic||this.transform.position.z-this.m_td.activityDistance<PlayerMgr.getInstance().getCurrentPlayerControll().getThisPos().z&&(this._isActivity=!0);},e.prototype.initOffsetCol=function(){this.m_offsetT=this.gameObject.getChildByName("Offset"),this.m_collidersT=this.gameObject.getChildByName("Colliders");},e.prototype.hideOffsetObj=function(t){null!=this.m_offsetT&&(this.m_offsetT.active=t);},e.prototype.hideColObj=function(t){null!=this.m_collidersT&&(this.m_collidersT.active=t);},e.prototype.isOffsetVisiable=function(){return null!=this.m_offsetT&&this.m_offsetT.active;},e.prototype.CallStart=function(){this._isActivity=!1,this._isOutScene=!1,this.scaleOne(),t.prototype.CallStart.call(this),this.testBatch();},e.prototype.testBatch=function(){},e.prototype.CallShow=function(){this.CallHide(!0);},e.prototype.CallHide=function(t){1!=t&&(t=!1),this.hideOffsetObj(t),this.hideColObj(t);},e.prototype.CallHideModel=function(t){this.hideOffsetObj(t);},e.prototype.scaleZero=function(){this.transform.scale=new Laya.Vector3(0,0,0);},e.prototype.scaleOne=function(){this.transform.scale=new Laya.Vector3(1,1,1);},e.prototype.CallOutSceneTerrainRemoveObj=function(){var t=this.m_po.DTPK_objectType;return this.m_po.DTPK_typeParam,t!=DTBIObjectTypeV2PK.DTPK_Currency&&(t!=DTBIObjectTypeV2PK.DTPK_Roadblock||this.m_td.type!=BITypeV2.Dynamic)&&this.m_rootScript.removeTerrbject(this);},e.prototype.CallDieFromAmongDelegate=function(t,e){var n=this.m_po.DTPK_objectType,i=this.m_po.DTPK_typeParam;if(n!=DTBIObjectTypeV2PK.DTPK_Ground&&n!=DTBIObjectTypeV2PK.DTPK_Model&&n!=DTBIObjectTypeV2PK.DTPK_Tunnel&&n!=DTBIObjectTypeV2PK.DTPK_AiPath&&(n!=DTBIObjectTypeV2PK.DTPK_Event||i==DTBIEventTypePK.DTPK_Event_InTunnel||i==DTBIEventTypePK.DTPK_Event_OutTunnel||i==DTBIEventTypePK.DTPK_Event_Fjump||i==DTBIEventTypePK.DTPK_Event_Ljump||i==DTBIEventTypePK.DTPK_Event_Rjump)){var r=PlayerMgr.getInstance().getCurrentPlayerControll().getThisPos().z;this.transform.position.z>r+t&&this.transform.position.z<r+e&&this.m_rootScript.removeTerrbject(this);}},e.prototype.isBurrow=function(){var t=this.m_po.DTPK_objectType,e=this.m_po.DTPK_typeParam;return t==DTBIObjectTypeV2PK.DTPK_Event&&e==DTBIEventTypePK.DTPK_Event_Burrow;},e.prototype.CallThisDieDelegate=function(){this.CallHide();},e.prototype.updateOutSceneAndHideThis=function(){GameMgr.isInRun()&&!this._isOutScene&&this.transform.position.z<PlayerMgr.getInstance().getCurrentPlayerControll().getThisPos().z-(this.m_po.DTPK_length+10)&&(this.hideOffsetObj(!1),this._isOutScene=!0);},e.prototype.CallDieBurrow=function(){this.m_rootScript.removeTerrbject(this);},e.BatchNode=new PF.Dictionary(),e;}(t.BaseTerrain);t.TerrainObject=e;}(Terrain||(Terrain={}));var Terrain,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_speed=.5,e.m_isMagnet=!1,e.m_isColGold=!1,e.targetOffset=new Laya.Vector3(),e.tartPos=new Laya.Vector3(),e._isRemove=!1,e;}
return __extends(e,t),e.prototype.Awake=function(){t.prototype.Awake.call(this);},e.prototype.initOffsetCol=function(){this.m_col=this.gameObject.getComponentByType(Laya.BoxCollider);},e.prototype.hideOffsetObj=function(t){for(var e=0;e<this.gameObject.numChildren;e++){this.gameObject.getChildAt(e).active=t;}},e.prototype.hideColObj=function(t){this.m_col.enable=t;},e.prototype.CallStart=function(){t.prototype.CallStart.call(this),this._isRemove=!1,null!=this.m_target&&Laya.Vector3.subtract(this.m_originPos,this.m_target.position,this.targetOffset),this.m_isMagnet=!1,this.m_isColGold=!1;},e.prototype.isColGold=function(){return this.m_isColGold;},e.prototype.colGold=function(){this.m_isColGold=!0;},e.prototype.updateTargetPosition=function(){null!=this.m_target&&(Laya.Vector3.add(this.m_target.position,new Laya.Vector3(this.targetOffset.x,this.targetOffset.y,this.targetOffset.z-4),this.tartPos),this.transform.position=this.tartPos);},e.prototype.Update=function(t){if(GameMgr.isInRun()){if(this._setAngle(),!GameMgr.isInMagnet)return this.updateTargetPosition(),void this.isRemove();var e=new Laya.Vector3(0,0,0);PlayerMgr.getInstance().getCurrentPlayerControll().isInFly()?Laya.Vector3.add(PlayerMgr.getInstance().getCurrentPlayerControll().getThisPos(),new Laya.Vector3(0,2.5,0),e):e=PlayerMgr.getInstance().getCurrentPlayerControll().getThisPos();var n=Laya.Vector3.distanceSquared(e,this.transform.position);if(Laya.Vector3.ZERO,n<Global.getConstantsInfo().DTPK_magnetDistance*Global.getConstantsInfo().DTPK_magnetDistance&&1<n){var i=Laya.Vector3.ZERO;Laya.Vector3.subtract(e,this.transform.position,i),Laya.Vector3.normalize(i,i),Laya.Vector3.scale(i,1.5,i),this.transform.lookAt(e,Laya.Vector3.Up),this.transform.translate(i);}else this.updateTargetPosition(),this.isRemove();}},e.prototype.isRemove=function(){null==this.m_rootScript&&!this._isRemove&&this.transform.position.z<PlayerMgr.getInstance().getCurrentPlayerControll().getThisPos().z-this.m_po.DTPK_length-9&&(this.removeSelf(),this._isRemove=!0);},e.prototype._setAngle=function(){this.transform.localRotationEuler=new Laya.Vector3(0,this.transform.localRotationEuler.y+e.m_AngleSpeed,0);},e.m_AngleSpeed=1,e;}(t.TerrainObject);t.CurrencyObject=e;}(Terrain||(Terrain={}));var Terrain,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.OBJECT_ID_GOLD=4,e;}
return __extends(e,t),e.prototype.Awake=function(){t.prototype.Awake.call(this),this.goldList=[];for(var e=this.gameObject.getChildByName("Offset"),n=0;n<e.numChildren;n++){for(var i=e.getChildAt(n),r=0;r<i.numChildren;r++){var a=i.getChildAt(r);this.goldList.push(a);}}
e.active=!1;},e.prototype.hideOffsetObj=function(t){},e.prototype.CallStart=function(){t.prototype.CallStart.call(this),this._cretaeIndex=0;},e.prototype.Update=function(e){if(t.prototype.Update.call(this,e),this._cretaeIndex<this.goldList.length){var n=this.goldList[this._cretaeIndex].transform.position;this.isGenerate(n)&&(this.generateGold(n),this._cretaeIndex++);}},e.prototype.isGenerate=function(t){return null!=PlayerMgr.getInstance().getCurrentPlayerControll()&&!(PlayerMgr.getInstance().getCurrentPlayerControll().isInFly()&&!PlayerMgr.getInstance().getCurrentPlayerControll().IsFlaCreateGold())&&t.z<PlayerMgr.getInstance().getCurrentPlayerControll().getThisPos().z+Global.getConstantsInfo().DTPK_terrainLength+32;},e.prototype.generateGold=function(t){var e=new TerrainElementData();e.type=BITypeV2.Static,e.objectId=this.OBJECT_ID_GOLD,e.localPosition=new Laya.Vector3(-t.x,t.y,t.z),e.localEulerAngles=new Laya.Vector3(0,75*this._cretaeIndex,0),e.localScale=Laya.Vector3.ONE,TerrainMgr.GetInstance().addCreateObj(this.m_custom,!1,e,this.m_rootScript,this.m_rootObj,this.m_rootObj,this.transform);},e;}(t.TerrainObject);t.CurrencyGroupObject=e;}(Terrain||(Terrain={}));var Terrain,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.prototype.updateMovement=function(){if(GameMgr.isInRun()&&(this.updateVisiable(),this._isActivity&&null!=this.m_td&&this.m_td.type==BITypeV2.Dynamic)){var t=TerrainMgr.GameSpeedTimeNow;this.transform.translate(new Laya.Vector3(0,-2*this.m_td.moveSpeed*t,0)),this.transform.position.y<0&&(this.transform.position=new Laya.Vector3(this.transform.position.x,0,this.transform.position.z));}},e;}(t.TerrainObject);t.TerrainObjectDown=e;}(Terrain||(Terrain={}));var Terrain,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.prototype.updateMovement=function(){if(GameMgr.isInRun()){if(this.updateVisiable(),this._isActivity&&null!=this.m_td)if(this.m_td.type==BITypeV2.Dynamic){if(0!=this.m_td.moveSpeed){var t=TerrainMgr.GameSpeedTimeNow;this.transform.translate(new Laya.Vector3(0,0,-this.m_td.moveSpeed*t));}}else this.m_td.type!=BITypeV2.Static&&null!=this.m_td.type||(t=TerrainMgr.GameSpeedTimeNow,this.transform.translate(new Laya.Vector3(0,-2*this.m_td.moveSpeed*t,0)),this.transform.position.y<0&&(this.transform.position=new Laya.Vector3(this.transform.position.x,0,this.transform.position.z)));this.m_td.type==BITypeV2.Dynamic&&this.m_offsetT.transform.rotate(new Laya.Vector3(.1,0,0),!0);}},e.prototype.updateVisiable=function(){this._isActivity||0==this.m_td.activityDistance||null==this.m_td||this.transform.position.z-this.m_td.activityDistance<PlayerMgr.getInstance().getCurrentPlayerControll().getThisPos().z&&(this._isActivity=!0);},e;}(t.TerrainObject);t.TerrainObjectRotate=e;}(Terrain||(Terrain={}));var __extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),TerrainRootObject=function(t){function e(){var e=t.call(this)||this;return e.groupId=0,e.m_objects=new Array(),e;}
return __extends(e,t),e.prototype.callOutSceneAndRemoveObj=function(){for(var t=0;t<this.m_objects.length;t++){this.m_objects[t].CallOutSceneTerrainRemoveObj()&&t--;}},e.prototype.callHideObject=function(){for(var t=0;t<this.m_objects.length;t++){this.m_objects[t].CallHideModel();}},e.prototype.removeAllObject=function(){for(;0<this.m_objects.length;){this.m_objects.pop().removeSelf();}
TerrainMgr.GetInstance().addDelectObjFormScene(this.gameObject);},e.prototype.removeTerrbject=function(t){for(var e=0;e<this.m_objects.length;e++){if(this.m_objects[e].uuid==t.uuid)return t.removeSelf(),this.m_objects.splice(e,1),!0;}
return Debug.Log("未找到对应的object:"+t.gameObject.name),!1;},e.prototype.registerObject=function(t){this.m_objects.push(t);},e.prototype.allDieFromAmongDelegate=function(t,e){for(var n=[],i=0;i<this.m_objects.length;i++){n.push(this.m_objects[i]);}
for(i=0;i<n.length;i++){n[i].CallDieFromAmongDelegate(t,e);}
n.length=0;},e.prototype.callDieOnBurrow=function(){for(var t=[],e=0;e<this.m_objects.length;e++){this.m_objects[e].isBurrow()&&t.push(this.m_objects[e]);}
for(e=0;e<t.length;e++){this.removeTerrbject(t[e]);}
t.length=0;},e;}(Terrain.BaseTerrain),Terrain,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.prototype.Update=function(t){},e;}(t.TerrainObject);t.TerrainStatic=e;}(Terrain||(Terrain={}));var __extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),TerrainObjectCache=function t(){},TerrainObjectPoolMgr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_poolName="tpool_",e.m_isLoadFinish=[],e;}
return __extends(e,t),e.getInstance=function(){return null==this._inst&&(this._inst=ComponentRootManger.getInstance().addComponent(e)),this._inst;},e.prototype.isHomeLoaded=function(){return!!this.m_isLoadFinish[Global.loadResourceHomeId];},e.prototype.loadGlobal=function(t){var e=this;this.load(99,function(n){e.m_isLoadFinish[n]=!0,t();});},e.prototype.loaderLevel=function(t){var e=this,n=Global.loadResourceHomeId;this.load(n,function(n){e.m_isLoadFinish[n]=!0,t();});},e.prototype.load=function(t,e){for(var n=this,i=FirstLoad.GetInstance().PoolRoot(),r=new Array(),a=new PF.Dictionary(),o=0;o<DTTerrainObjectInfoMGR.getInstance().DTTerrainObjectDIC.count;o++){var s=DTTerrainObjectInfoMGR.getInstance().DTTerrainObjectDIC.getKeyByIndex(o),l=DTTerrainObjectInfoMGR.getInstance().DTTerrainObjectDIC.get(s);if(l.DTPK_levelId==t){var u=DTResPrefabInfoMGR.getInstance().DTResPrefabeInfoDIC.get(l.DTPK_resId),h=new TerrainObjectCache();h.type=Laya.Loader.JSON,h.url=u.DTPK_path+u.DTPK_prefabName+".lh",h.po=l,r.push(h),a.containsKey(u.DTPK_bundleId)||a.add(u.DTPK_bundleId,u.DTPK_bundleId);}}
Debug.Log("TerrainObjectPoolManager :"+a.count),ResPrefabeMgr.getInstance().loadBundlesInfo(a.toValueArray(),function(){Debug.Log("load Bundles level: "+t+" | "+r.length);for(var a=function t(e){var a=r[e];ResPrefabeMgr.getInstance().loadPrefabeInfo(a.po.DTPK_resId,function(t){t.active=!1,PoolManager.getInstance().newPool(n.m_poolName+a.po.DTPK_id,t,i);});},o=0;o<r.length;o++){a(o);}
e(t);});},e.prototype.isLoadGlobalCompleted=function(){return this.m_isLoadFinish[99];},e.prototype.isLoadCompleted=function(){return this.isHomeLoaded();},e.prototype.generateObject=function(t,n,i,r,a,o,s,l){var u=this.m_poolName+i,h=PoolManager.getInstance().getPool(u).Spawn();PoolManager.getInstance().getPool(u).SetParent(h,s),t?(h.transform.localPosition=r,h.transform.localScale=a,h.transform.localRotationEuler=o):(h.transform.position=r,h.transform.scale=a,h.transform.rotationEuler=o);var c,_=DTTerrainObjectInfoMGR.getInstance().DTTerrainObjectDIC.get(i);switch(_.DTPK_objectType,_.DTPK_spriptType){case 2:c=BXMonoUtil.GetOrAddComponent(Terrain.TerrainStatic,h);break;case 3:c=BXMonoUtil.GetOrAddComponent(Terrain.CurrencyGroupObject,h);break;case 4:c=BXMonoUtil.GetOrAddComponent(Terrain.CurrencyObject,h);break;case 5:c=BXMonoUtil.GetOrAddComponent(Terrain.TerrainObjectRotate,h);break;case 6:c=BXMonoUtil.GetOrAddComponent(Terrain.TerrainObjectDown,h);break;default:c=BXMonoUtil.GetOrAddComponent(Terrain.TerrainObject,h);}
return c.uuid=e.UUID_COUNT++,this.addRotateScript(_.DTPK_id,h),c.setOriginPos(r),c.setTarget(l),c.setPo(_),c.setTd(n),c.CallStart(),c;},e.prototype.delectObject=function(t){var e=this.m_poolName+t.getPo().DTPK_id;PoolManager.getInstance().getPool(e).Despawn(t.owner);},e.prototype.addRotateScript=function(t,e){switch(t){case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 30:case 31:var n=e.getChildByName("Offset").getChildByName("daoju"),i=BXMonoUtil.GetOrAddComponent(Sprite3DRotation,n);i.z=1,i.delay=Game.Constant.timeDelta;}},e.UUID_COUNT=1,e;}(Laya.Script),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),TerrainGameMgr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_flySpeed=0,e;}
return __extends(e,t),e.getInstance=function(){return null==this._inst&&(this._inst=ComponentRootManger.getInstance().addComponent(e)),this._inst;},e.prototype.setTarget=function(t){this.m_target=t;},e.prototype.generateNewGame=function(t){this.m_flySpeed=0,TerrainMgr.GetInstance().generateTerrainData(t),this.m_speedUpMul=e.SPEEDUPNORMALMUL,this.generateFirstTerrain();},e.prototype.generateSuperGame=function(){TerrainMgr.GetInstance().resetTerrainSuper(),this.generateFirstTerrain();},e.prototype.generateFirstTerrain=function(){for(var t=0;t<TerrainMgr.DEF_FIRST_TERRAIN_COUNT;t++){TerrainMgr.GetInstance().generateNewTerrain(!0);}},e.prototype.beginFlySpeed=function(){this.m_flySpeed=e.FLY_SPEED,this.m_speedUpMul=e.SPEEDUPFLYMUL;},e.prototype.endFlySpeed=function(){this.m_flySpeed=0,this.m_speedUpMul=e.SPEEDUPNORMALMUL;},e.prototype.Update=function(t){this._rollTerrain();},e.prototype._rollTerrain=function(){if(GameMgr.isInRun()&&!TerrainMgr.IsNotRoll)if(TerrainMgr.GetInstance().m_showTerrains.length<2)GameMgr.IsSuperProp()||Debug.LogError("地形逻辑错误!!!");else{var t=TerrainMgr.GetInstance().m_showTerrains[0],e=TerrainMgr.GetInstance().m_showTerrains[TerrainMgr.GetInstance().m_showTerrains.length-1],n=null!=this.m_target?this.m_target.getThisPos().z:0,i=Global.getConstantsInfo().DTPK_terrainLength,r=n+1*-i-48;t.terrain.getPos().z<=r&&(TerrainMgr.GetInstance().addReleaseTerrainToList(t),TerrainMgr.GetInstance().m_showTerrains.shift());var a=n+1*i;e.terrain.getPos().z<a&&TerrainMgr.GetInstance().generateNewTerrain();}},e.prototype.getChildrenNumber=function(t){for(var e=1,n=0;n<t.numChildren;n++){e+=this.getChildrenNumber(t.getChildAt(n));}
return e;},e.SPEEDUPNORMALMUL=2.5,e.SPEEDUPFLYMUL=1,e.FLY_SPEED=20,e;}(Unity.MonoBehaviour),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),MoreGameUpdateMgr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_showTimeCount=0,e.indexLeft=0,e.indexRight=0,e;}
return __extends(e,t),e.getInstance=function(){return null==this._inst&&(this._inst=ComponentRootManger.getInstance().addComponent(e)),this._inst;},e.prototype.initialize=function(){this.m_showTimeCount=0,this.indexLeft=0,this.indexRight=0;},e.prototype.showMoreGameInfo=function(t,e,n){PfuManager.GetInstance().ShowMoreGameImage(t,t?this.indexLeft:this.indexRight,e,n);},e.prototype.getMoreGameIconUrlInfo=function(t){return t?PfuManager.GetInstance().GetMoreGameLeftIconUrl(this.indexLeft):PfuManager.GetInstance().GetMoreGameRightIconUrl(this.indexRight);},e.prototype.Update=function(t){this.m_showTimeCount+=Game.Constant.timeDelta,10<this.m_showTimeCount&&(this.indexLeft++,this.indexLeft>=PfuManager.GetInstance().GetMoreGameCount(!0)&&(this.indexLeft=0),this.indexRight++,this.indexRight>=PfuManager.GetInstance().GetMoreGameCount(!1)&&(this.indexRight=0),this.m_showTimeCount=0,PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_MOREGAME_UPDATE));},e;}(Unity.MonoBehaviour),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityHBAutoJump=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jumpType=0,e;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=.1,t.startSpecialJump(),t.spawnAutoJumpEffect();},e.prototype.execute=function(t){t.jumpUpdate(),t.isInJumpEnd()&&t.changeState(PlayerEntityHBRun.GetInstance());},e.prototype.exit=function(t){t.endJump();},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_LEFT));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_RIGHT));break;case DTSwipeDirectionPK.DTPK_Up:t.cacheJumpSwipe();break;case DTSwipeDirectionPK.DTPK_Down:}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityHBJump=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jumpType=0,e;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){switch(t.downTime=.1,this.jumpType){case 0:t.SetAnimation(PlayerAnimationName.HB_JUMP);break;case 1:t.SetAnimation(PlayerAnimationName.HB_JUMP04);break;case 2:t.SetAnimation(PlayerAnimationName.HB_JUMP05);}
this.jumpType++,2<this.jumpType&&(this.jumpType=0),t.startJump(),t.PlayerWing("jump"),this.jumpToJump=TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.DoubleJump)||TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.DoubleJump)||TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.ThreeJump)||TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.ThreeJump)||TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.FourJump)||TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.FourJump);},e.prototype.execute=function(t){t.jumpUpdate(),TeachMgr.isDoubleTeach&&t._isJumpDrop&&this.jumpToJump&&t._setTeachToPause(DTGameTeachTypePK.DTPK_Up),t.isInJumpEnd()&&t.changeState(PlayerEntityHBRun.GetInstance()),t.updateDownHuaxiang();},e.prototype.exit=function(t){t.endJump();},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_LEFT));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_RIGHT));break;case DTSwipeDirectionPK.DTPK_Up:TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.DoubleJump)||TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.DoubleJump)||TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.ThreeJump)||TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.ThreeJump)||TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.FourJump)||TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.FourJump)?t.changeState(PlayerEntityHBJumpContinue.GetInstance()):t.cacheJumpSwipe();break;case DTSwipeDirectionPK.DTPK_Down:t.changeState(PlayerEntityHBSetDown.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityHBJumpContinue=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jumpType=0,e;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){switch(t.downTime=.1,this.jumpType){case 0:t.SetAnimation(PlayerAnimationName.HB_JUMP04);break;case 1:t.SetAnimation(PlayerAnimationName.HB_JUMP);break;case 2:t.SetAnimation(PlayerAnimationName.HB_JUMP05);}
this.jumpType++,2<this.jumpType&&(this.jumpType=0),t.startJump(),t.PlayerWing("jump");},e.prototype.execute=function(t){t.jumpUpdate(),t.isInJumpEnd()&&t.changeState(PlayerEntityHBRun.GetInstance()),t.updateDownHuaxiang();},e.prototype.exit=function(t){t.endJump();},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_LEFT));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_RIGHT));break;case DTSwipeDirectionPK.DTPK_Up:(TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.ThreeJump)||TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.ThreeJump)||TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.FourJump)||TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.FourJump))&&t.changeState(PlayerEntityHBJumpContinue1.GetInstance());break;case DTSwipeDirectionPK.DTPK_Down:t.changeState(PlayerEntityHBSetDown.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityHBJumpContinue1=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jumpType=0,e;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){switch(t.downTime=.1,this.jumpType){case 0:t.SetAnimation(PlayerAnimationName.HB_JUMP04);break;case 2:t.SetAnimation(PlayerAnimationName.HB_JUMP);break;case 1:t.SetAnimation(PlayerAnimationName.HB_JUMP05);}
this.jumpType++,2<this.jumpType&&(this.jumpType=0),t.startJump(),t.PlayerWing("jump");},e.prototype.execute=function(t){t.jumpUpdate(),t.isInJumpEnd()&&t.changeState(PlayerEntityHBRun.GetInstance()),t.updateDownHuaxiang();},e.prototype.exit=function(t){t.endJump();},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_LEFT));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_RIGHT));break;case DTSwipeDirectionPK.DTPK_Up:(TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.FourJump)||TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.FourJump))&&t.changeState(PlayerEntityHBJumpContinue2.GetInstance());break;case DTSwipeDirectionPK.DTPK_Down:t.changeState(PlayerEntityHBSetDown.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityHBJumpContinue2=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jumpType=0,e;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){switch(t.downTime=.1,this.jumpType){case 0:t.SetAnimation(PlayerAnimationName.HB_JUMP04);break;case 1:t.SetAnimation(PlayerAnimationName.HB_JUMP);break;case 2:t.SetAnimation(PlayerAnimationName.HB_JUMP05);}
this.jumpType++,2<this.jumpType&&(this.jumpType=0),t.startJump(),t.PlayerWing("jump");},e.prototype.execute=function(t){t.jumpUpdate(),t.isInJumpEnd()&&t.changeState(PlayerEntityHBRun.GetInstance()),t.updateDownHuaxiang();},e.prototype.exit=function(t){t.endJump();},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_LEFT));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_RIGHT));break;case DTSwipeDirectionPK.DTPK_Up:break;case DTSwipeDirectionPK.DTPK_Down:t.changeState(PlayerEntityHBSetDown.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityHBMoveLeft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=.1,t.SetAnimation(PlayerAnimationName.HB_LEFT);},e.prototype.execute=function(t){t.isEndMoveLimit(.2)&&t.changeState(PlayerEntityHBRun.GetInstance());},e.prototype.exit=function(t){},e.prototype.HandleMessage=function(t,n){switch(n.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.changeState(e.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.changeState(PlayerEntityHBMoveRight.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Up:t.changeState(PlayerEntityHBJumpContinue.GetInstance());break;case DTSwipeDirectionPK.DTPK_Down:t.isInShovel()&&t.changeState(PlayerEntityHBShovel.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityHBMoveLeftJump=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=.1,t.SetAnimation(PlayerAnimationName.HB_JUMP);},e.prototype.execute=function(t){t.isEndMoveLimit(.2)&&t.changeState(PlayerEntityHBRun.GetInstance());},e.prototype.exit=function(t){},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.changeState(PlayerEntityHBMoveLeft.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.changeState(PlayerEntityHBMoveRight.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Up:t.cacheJumpSwipe();break;case DTSwipeDirectionPK.DTPK_Down:t.isInShovel()&&t.changeState(PlayerEntityNormalShovel.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityHBMoveRight=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=.1,t.SetAnimation(PlayerAnimationName.HB_RIGHT);},e.prototype.execute=function(t){t.isEndMoveLimit(.2)&&t.changeState(PlayerEntityHBRun.GetInstance());},e.prototype.exit=function(t){},e.prototype.HandleMessage=function(t,n){switch(n.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.changeState(PlayerEntityHBMoveLeft.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.changeState(e.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Up:t.changeState(PlayerEntityHBJumpContinue.GetInstance());break;case DTSwipeDirectionPK.DTPK_Down:t.isInShovel()&&t.changeState(PlayerEntityHBShovel.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityHBMoveRightJump=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=.1,t.SetAnimation(PlayerAnimationName.HB_JUMP);},e.prototype.execute=function(t){t.isEndMoveLimit(.2)&&t.changeState(PlayerEntityHBRun.GetInstance());},e.prototype.exit=function(t){},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.changeState(PlayerEntityHBMoveLeft.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.changeState(PlayerEntityHBMoveRight.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Up:t.cacheJumpSwipe();break;case DTSwipeDirectionPK.DTPK_Down:t.isInShovel()&&t.changeState(PlayerEntityHBShovel.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityHBRun=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){if(t.downTime=.1,t.moveForward(),t.isCacheJumpSwipe())return t.changeState(PlayerEntityHBJump.GetInstance()),void t.endJumpSwipe();},e.prototype.execute=function(t){},e.prototype.exit=function(t){},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.changeState(PlayerEntityHBMoveLeft.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.changeState(PlayerEntityHBMoveRight.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Up:t.changeState(PlayerEntityHBJump.GetInstance());break;case DTSwipeDirectionPK.DTPK_Down:t.isInShovel()&&t.changeState(PlayerEntityHBShovel.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityHBSetDown=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=.1,t.SetAnimation(PlayerAnimationName.HB_SETDOWN),t.startSetDown();},e.prototype.execute=function(t){t.isSetDownCompleted()&&t.changeState(PlayerEntityHBSetDownShovel.GetInstance());},e.prototype.exit=function(t){t.endSetDown();},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Up:t.changeState(PlayerEntityHBJump.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityHBSetDownShovel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=.1,t.startShovel(),t.startSetDownShovel();},e.prototype.execute=function(t){t.isSetDownShovelTimeCompleted()&&(t.SetAnimation(PlayerAnimationName.HB_RUN),t.changeState(PlayerEntityHBRun.GetInstance()));},e.prototype.exit=function(t){t.overShovel();},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.changeState(PlayerEntityHBMoveLeft.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.changeState(PlayerEntityHBMoveRight.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Up:t.changeState(PlayerEntityHBJump.GetInstance());break;case DTSwipeDirectionPK.DTPK_Down:}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityHBShovel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=.1,t.SetAnimation(PlayerAnimationName.HB_SHOVEL),t.startShovel();},e.prototype.execute=function(t){t.updateShovel(),t.isShovelCompleted()&&(t.SetAnimation(PlayerAnimationName.HB_RUN),t.changeState(PlayerEntityHBRun.GetInstance()));},e.prototype.exit=function(t){t.overShovel();},e.prototype.HandleMessage=function(t,n){switch(n.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.changeState(PlayerEntityHBMoveLeft.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.changeState(PlayerEntityHBMoveRight.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Up:t.changeState(PlayerEntityHBJump.GetInstance());break;case DTSwipeDirectionPK.DTPK_Down:t.isInShovel()&&t.changeState(e.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityHBStagger=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=.1,t.startDrop(),t.endJump(),this.IsChangeLane&&t.gotoPreviousLane();},e.prototype.execute=function(t){t.isDropCompleted()&&t.changeState(PlayerEntityHBRun.GetInstance());},e.prototype.exit=function(t){t.endDrop(),PlayerEntityNormalStagger.isStageer=!1;},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&t.moveToLeft();break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&t.moveTORight();break;case DTSwipeDirectionPK.DTPK_Up:t.cacheJumpSwipe();break;case DTSwipeDirectionPK.DTPK_Down:t.changeState(PlayerEntityHBSetDown.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityHuaxiang=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=1e-4,Laya.timer.once(1e3*TalentMgr.getInstance().getGlidingDuration(),this,function(){t.downTime=TalentMgr.getInstance().getGliding();}),null!=t.m_wingAnimator&&t.PlayerWing("open"),null!=t.huabanAnimator&&(t.huabanAnimator.play("open"),Laya.timer.once(500,this,function(){null!=t.huabanAnimator&&t.huabanAnimator.play("fly");}));},e.prototype.execute=function(t){t.m_isOnGround&&t.changeState(PlayerEntityHBRun.GetInstance());},e.prototype.exit=function(t){t.downTime=.1,null!=t.m_wingAnimator&&t.m_wingAnimator.play("idle"),null!=t.huabanAnimator&&(Laya.timer.clearAll(this),t.huabanAnimator.play("close"),Laya.timer.once(500,this,function(){null!=t.huabanAnimator&&t.huabanAnimator.play("idle");}));},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&t.moveToLeft();break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&t.moveTORight();break;case DTSwipeDirectionPK.DTPK_Up:break;case DTSwipeDirectionPK.DTPK_Down:t.changeState(PlayerEntityHBSetDown.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityNormalFlyFlay=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=.1,t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_FLAYF);},e.prototype.execute=function(t){},e.prototype.exit=function(t){},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&t.moveToLeft();break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&t.moveTORight();}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityNormalFlyFlayFall=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=.1,t.startFlyFall();},e.prototype.execute=function(t){t.flyFallUpdate();},e.prototype.exit=function(t){},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&t.moveToLeft();break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&t.moveTORight();}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityNormalFlyTakeoff=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.startFlyTakeoff(),t.downTime=.1;},e.prototype.execute=function(t){},e.prototype.exit=function(t){t.endFlyTakeoff();},e.prototype.HandleMessage=function(t,e){return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityNormalJump=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jumpType=0,e;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){switch(t.downTime=.1,this.jumpType){case 0:t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_JUMP);break;case 1:t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_JUMP_ROLL1);break;case 2:t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_JUMP_ROLL2);}
this.jumpType++,2<this.jumpType&&(this.jumpType=0),t.startJump(),t.PlayerWing("jump");},e.prototype.execute=function(t){t.jumpUpdate(),t.isInJumpEnd()&&t.changeState(PlayerEntityRun.GetInstance());},e.prototype.exit=function(t){t.endJump();},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_LEFT));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_RIGHT));break;case DTSwipeDirectionPK.DTPK_Up:TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.DoubleJump)||TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.ThreeJump)||TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.FourJump)?t.changeState(PlayerEntityNormalJumpContinue.GetInstance()):t.cacheJumpSwipe();break;case DTSwipeDirectionPK.DTPK_Down:t.changeState(PlayerEntitySetDown.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityNormalJumpContinue=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jumpType=0,e;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){switch(t.downTime=.1,this.jumpType){case 0:t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_JUMP_ROLL2);break;case 1:t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_JUMP_ROLL1);break;case 2:t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_JUMP);}
this.jumpType++,2<this.jumpType&&(this.jumpType=0),t.startJump(),t.PlayerWing("jump");},e.prototype.execute=function(t){t.jumpUpdate(),t.isInJumpEnd()&&t.changeState(PlayerEntityRun.GetInstance());},e.prototype.exit=function(t){t.endJump();},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_LEFT));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_RIGHT));break;case DTSwipeDirectionPK.DTPK_Up:(TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.ThreeJump)||TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.FourJump))&&t.changeState(PlayerEntityNormalJumpContinue1.GetInstance());break;case DTSwipeDirectionPK.DTPK_Down:t.changeState(PlayerEntitySetDown.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityNormalJumpContinue1=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jumpType=0,e;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){switch(t.downTime=.1,this.jumpType){case 0:t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_JUMP_ROLL2);break;case 1:t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_JUMP_ROLL1);break;case 2:t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_JUMP);}
this.jumpType++,2<this.jumpType&&(this.jumpType=0),t.startJump(),t.PlayerWing("jump");},e.prototype.execute=function(t){t.jumpUpdate(),t.isInJumpEnd()&&t.changeState(PlayerEntityRun.GetInstance());},e.prototype.exit=function(t){t.endJump();},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_LEFT));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_RIGHT));break;case DTSwipeDirectionPK.DTPK_Up:TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.FourJump)&&t.changeState(PlayerEntityNormalJumpContinue2.GetInstance());break;case DTSwipeDirectionPK.DTPK_Down:t.changeState(PlayerEntitySetDown.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityNormalJumpContinue2=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jumpType=0,e;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){switch(t.downTime=.1,this.jumpType){case 0:t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_JUMP_ROLL2);break;case 1:t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_JUMP_ROLL1);break;case 2:t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_JUMP);}
this.jumpType++,2<this.jumpType&&(this.jumpType=0),t.startJump(),t.PlayerWing("jump");},e.prototype.execute=function(t){t.jumpUpdate(),t.isInJumpEnd()&&t.changeState(PlayerEntityRun.GetInstance());},e.prototype.exit=function(t){t.endJump();},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_LEFT));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_JUMP_RIGHT));break;case DTSwipeDirectionPK.DTPK_Up:break;case DTSwipeDirectionPK.DTPK_Down:t.changeState(PlayerEntitySetDown.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityNormalMoveLeft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=.1,t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_MOVE_LEF);},e.prototype.execute=function(t){t.isEndMoveLimit(.2)&&t.changeState(PlayerEntityRun.GetInstance());},e.prototype.exit=function(t){},e.prototype.HandleMessage=function(t,n){switch(n.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.changeState(e.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.changeState(PlayerEntityMoveRight.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Up:t.changeState(PlayerEntityNormalJumpContinue.GetInstance());break;case DTSwipeDirectionPK.DTPK_Down:t.isInShovel()&&t.changeState(PlayerEntityNormalShovel.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityMoveRight=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=.1,t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_MOVE_RIGHT);},e.prototype.execute=function(t){t.isEndMoveLimit(.2)&&t.changeState(PlayerEntityRun.GetInstance());},e.prototype.exit=function(t){},e.prototype.HandleMessage=function(t,n){switch(n.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.changeState(PlayerEntityNormalMoveLeft.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.changeState(e.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Up:t.changeState(PlayerEntityNormalJumpContinue.GetInstance());break;case DTSwipeDirectionPK.DTPK_Down:t.isInShovel()&&t.changeState(PlayerEntityNormalShovel.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityRun=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){if(t.downTime=.1,t.moveForward(),t.isCacheJumpSwipe())return t.changeState(PlayerEntityNormalJump.GetInstance()),void t.endJumpSwipe();},e.prototype.execute=function(t){},e.prototype.exit=function(t){},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.changeState(PlayerEntityNormalMoveLeft.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.changeState(PlayerEntityMoveRight.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Up:t.changeState(PlayerEntityNormalJump.GetInstance());break;case DTSwipeDirectionPK.DTPK_Down:t.isInShovel()&&t.changeState(PlayerEntityNormalShovel.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntitySetDown=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=.1,t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_JUMP_SETDOWN),t.startSetDown();},e.prototype.execute=function(t){t.isSetDownCompleted()&&t.changeState(PlayerEntitySetDownShovel.GetInstance());},e.prototype.exit=function(t){t.endSetDown();},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Up:t.changeState(PlayerEntityNormalJump.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntitySetDownShovel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=.1,t.startShovel(),t.startSetDownShovel();},e.prototype.execute=function(t){t.isSetDownShovelTimeCompleted()&&(t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_RUN),t.changeState(PlayerEntityRun.GetInstance()));},e.prototype.exit=function(t){t.overShovel();},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.changeState(PlayerEntityNormalMoveLeft.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.changeState(PlayerEntityMoveRight.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Up:t.changeState(PlayerEntityNormalJump.GetInstance());break;case DTSwipeDirectionPK.DTPK_Down:}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityNormalShovel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=.1,t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_SHOVEL),t.startShovel();},e.prototype.execute=function(t){t.updateShovel(),t.isShovelCompleted()&&(t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_RUN),t.changeState(PlayerEntityRun.GetInstance()));},e.prototype.exit=function(t){t.overShovel();},e.prototype.HandleMessage=function(t,n){switch(n.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&(t.moveToLeft(),t.changeState(PlayerEntityNormalMoveLeft.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&(t.moveTORight(),t.changeState(PlayerEntityMoveRight.GetInstance()));break;case DTSwipeDirectionPK.DTPK_Up:t.changeState(PlayerEntityNormalJump.GetInstance());break;case DTSwipeDirectionPK.DTPK_Down:t.isInShovel()&&t.changeState(e.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityNormalStagger=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.downTime=.1,t.startDrop(),t.endJump(),this.IsChangeLane&&t.gotoPreviousLane(),this.TypeCol==DTTypeColliderPK.DTPK_left||this.TypeCol==DTTypeColliderPK.DTPK_left_CornerA||this.TypeCol==DTTypeColliderPK.DTPK_left_CornerC?t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_STAGGER_L):this.TypeCol==DTTypeColliderPK.DTPK_right||this.TypeCol==DTTypeColliderPK.DTPK_right_CornerB||this.TypeCol==DTTypeColliderPK.DTPK_right_CornerD?t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_STAGGER_R):t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_TRIP);},e.prototype.execute=function(t){t.isDropCompleted()&&t.changeState(PlayerEntityRun.GetInstance());},e.prototype.exit=function(t){t.endDrop(),e.isStageer=!1;},e.prototype.HandleMessage=function(t,e){switch(e.mMsg){case DTSwipeDirectionPK.DTPK_Left:t.isInMoveLeft()&&t.moveToLeft();break;case DTSwipeDirectionPK.DTPK_Right:t.isInMoveRight()&&t.moveTORight();break;case DTSwipeDirectionPK.DTPK_Up:t.cacheJumpSwipe();break;case DTSwipeDirectionPK.DTPK_Down:t.changeState(PlayerEntitySetDown.GetInstance());}
return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityNormalLose1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_LOSE1_01),t.startLose1();},e.prototype.execute=function(t){},e.prototype.exit=function(t){},e.prototype.HandleMessage=function(t,e){return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityNormalLose2=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){},e.prototype.execute=function(t){},e.prototype.exit=function(t){},e.prototype.HandleMessage=function(t,e){return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityNormalLose3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){},e.prototype.execute=function(t){},e.prototype.exit=function(t){},e.prototype.HandleMessage=function(t,e){return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerEntityNormalLose4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.GetInstance=function(){return this.instance||(this.instance=new e()),this.instance;},e.prototype.enter=function(t){t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_DOWN),t.startLose4();},e.prototype.execute=function(t){},e.prototype.exit=function(t){},e.prototype.HandleMessage=function(t,e){return!1;},e;}(PF.State),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerCollider=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.prototype.onTriggerEnter=function(t){if(GameMgr.isInRun()&&null!=t.owner){var e=null,n=t.owner;if(n.layer.number==GameMgr.getInstance().layerCurrencyNumber)e=n.getComponentByType(Terrain.CurrencyObject);else if(null==(e=this.player.getTerrainObjectScritpt(n))&&null!=n.parent&&null!=n.parent.parent){var i=n.parent.parent;e=this.player.getTerrainObjectScritpt(i);}
null!=e&&this.player.rigidColliderTerrain(e);}},e;}(Unity.MonoBehaviour),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerController=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ChestDifficult=2,e.m_lastLaneNum=0,e.m_moveDirection=DTSwipeDirectionPK.DTPK_Non,e.MoveLeftRight=4,e.m_playerHeight=1,e.m_extendYOffset=0,e.m_jumpYOffset=0,e.m_isPlayerJump=!1,e.m_isChestPause=!1,e.m_shovelTime=.8,e.m_shovelTimeCounter=0,e.m_isInShovel=!1,e.m_extendGravity=0,e.m_setDownSpeed=-3,e.m_setDownShovelDuration=.28,e.m_setDownShovelCounter=0,e.m_isFlyStable=!1,e.m_isFlaGenerateGold=!1,e.m_cacheJumpSaveTimeMax=.5,e.m_colDizzinessdelay=0,e.difficult=2,e.isAutoSilpLDown=!1,e.isAutoSilpRDown=!1,e.huaban=null,e.m_teachProgress=DTSoundIdPK.DTPK_guide_1,e.isStartDoubleJumpTeach=!1,e.m_teachType=0,e.speedMotor=1,e.downTime=.1,e;}
return __extends(e,t),e.prototype.getBonePointObj=function(){return this.m_bonePointObj;},e.prototype._initBountPoint=function(t){var e=null;e=t.getChildAt(0).getChildByName("Bip001 Spine1"),t.getChildAt(0),null!=(this.m_playerheadObj=e)&&(this.m_bonePointObj=e.getChildByName("BonePoint"),null!=this.m_bonePointObj&&(this.m_bonePointObj.active=!1)),this.bone006=t.getChildAt(0).getChildByName("Bone006"),null!=this.bone006?this.huaban1=this.bone006.getChildByName("huaban"):this.huaban1=t.getChildAt(0).getChildByName("huaban"),this.huaban1.active=!1;var n=t.getChildAt(0).getChildByName("Bip001 Spine1").getChildByName("hero_jijia_chibang");this.m_wingAnimator=null!=n||null!=n?n.getComponentByType(Laya.Animator):null;},e.prototype.Awake=function(){var t=this.gameObject.getChildByName("Offset");this.m_roleAnimation=t.getChildAt(0).getComponentByType(Laya.Animator),this._initBountPoint(t),null!=this.m_roleAnimation&&(this.m_roleAnimation.on(Laya.Event.COMPLETE,this,this._onAniCompleteed),this.m_roleAnimation.on(Laya.Event.STOPPED,this,this.onAniStopped),this.M_currentAnimationName=this.m_roleAnimation.clip.name),null!=this.m_wingAnimator&&(this.m_wingAnimator.on(Laya.Event.STOPPED,this,this.onWingStop),this.m_wingAnimationName=this.m_wingAnimator.clip.name),this.m_position=new Laya.Vector3(0,0,0),this.transform.position=this.m_position,this.m_FSM=new PF.StateMachine(this);var e=this.gameObject.layer;Laya.Physics.setLayerCollision(e,GameMgr.getInstance().layerElement,!0),Laya.Physics.setLayerCollision(e,GameMgr.getInstance().layerEvent,!0),Laya.Physics.setLayerCollision(e,GameMgr.getInstance().layerCurrency,!0);},e.prototype.Start=function(){GameMgr.getInstance().setGameSwipeHnadler(this,this.swipeHandler),this.m_currentLen=0,this.m_colDizzinessdelay=0,this.initRayCast();},e.prototype.startGame=function(){this.difficult=this.ChestDifficult,this.SetAnimation(PlayerAnimationName.HB_RUN),this.m_FSM.current_state=PlayerEntityHBRun.GetInstance(),BufferMgr.getInstance().buffer(BufferType.huaban),this.m_FSM.changeState(PlayerEntityHBRun.GetInstance()),this.SetAnimation(PlayerAnimationName.HB_RUN),TalentMgr.getInstance().reset(),(TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.AutoShield)||TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.AutoShield))&&BufferMgr.getInstance().buffer(BufferType.shield,1e4),(TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.AutoMagnet)||TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.AutoMagnet))&&BufferMgr.getInstance().buffer(BufferType.magnet,1e4);},e.prototype.relasePlayer=function(){this.difficult=this.ChestDifficult,this.m_isInFly=!1,this.m_position=new Laya.Vector3(0,0,0),this.m_currentLen=0,this.m_isChestPause=!1;},e.prototype.isInShovel=function(){return!0;},e.prototype.startShovel=function(){this.m_isInShovel=!0,this.m_shovelTimeCounter=0,this.downTeach();},e.prototype.updateShovel=function(){this.m_shovelTimeCounter+=Game.Constant.timeDelta;},e.prototype.isShovelCompleted=function(){return this.m_shovelTimeCounter>=this.m_shovelTime;},e.prototype.overShovel=function(){this.m_isInShovel=!1;},e.prototype.startSetDown=function(){this.m_isInSetDown=!0,this.m_isDropCompleted=!1,this.m_extendGravity=this.m_setDownSpeed,this.downTeach();},e.prototype.endSetDown=function(){this.m_extendGravity=0,this.m_isInSetDown=!1;},e.prototype.isSetDownCompleted=function(){return this.m_isDropCompleted;},e.prototype.startSetDownShovel=function(){this.m_setDownShovelCounter=0;},e.prototype.isSetDownShovelTimeCompleted=function(){return this.m_setDownShovelCounter+=Game.Constant.timeDelta,this.m_setDownShovelCounter>=this.m_setDownShovelDuration;},e.prototype.gotoPreviousLane=function(){this.m_currentLen=this.m_lastLaneNum;},e.prototype.startDrop=function(){this.m_isDropCompleted=!1;},e.prototype.isDropCompleted=function(){return this.m_isDropCompleted;},e.prototype.endDrop=function(){this.m_extendGravity=0;},e.prototype.isInMoveLeft=function(){return!(this.isAutoSilpLDown||1<=this.m_currentLen);},e.prototype.moveToLeft=function(){this.m_lastLaneNum=this.m_currentLen,this.m_currentLen++,this.m_moveDirection=DTSwipeDirectionPK.DTPK_Left,this._jumpMoveLR(),this.leftTeach();},e.prototype.isInMoveRight=function(){return!(this.isAutoSilpRDown||this.m_currentLen<=-1);},e.prototype.moveTORight=function(){this.m_lastLaneNum=this.m_currentLen,this.m_currentLen--,this.m_moveDirection=DTSwipeDirectionPK.DTPK_Right,this._jumpMoveLR(),this.righTeacht();},e.prototype.moveForward=function(){this.m_moveDirection=DTSwipeDirectionPK.DTPK_Non;},e.prototype._jumpMoveLR=function(){},e.prototype.startSpecialJump=function(){this.m_isPlayerJump=!0,this.m_jumpWidth=9.5,this.m_jumpHeigh=.45,this.m_jumpPower=11,this.m_jumpTime=4,this._isJumpDrop=!1;},e.prototype.startJump=function(){this.m_isPlayerJump=!0,this.m_jumpWidth=8.3,this.m_jumpHeigh=.28,this.m_jumpPower=12.5,this.m_jumpTime=5,this._isJumpDrop=!1,this.upTeach();},e.prototype.isInJumpEnd=function(){return this._isJumpDrop&&this.m_isOnGround;},e.prototype.endJump=function(){this.m_isPlayerJump=!1,this.m_jumpYOffset=0,this._isJumpDrop=!1;},e.prototype.isInJump=function(){return this.m_isPlayerJump;},e.prototype.jumpUpdate=function(){this.m_jumpTime+=.14;var t=this.jumpLine(this.m_jumpTime,this.m_jumpWidth,this.m_jumpHeigh);this.m_jumpPower=PF.Mathf.LerpNumber(this.m_jumpPower,0,Game.Constant.timeDelta),t<0&&(this._isJumpDrop=!0),this.m_jumpYOffset=t*this.m_jumpPower;},e.prototype.jumpLine=function(t,e,n){return-(t-e)*t*(n/Math.pow(e/2,2));},e.prototype.getGravityValue=function(){return this.isInJump()?0:GameMgr.IsSuperProp()?0:this.m_isOnGround?0:this.m_isInFly?0:-3+this.m_extendGravity;},e.prototype.startFlyTakeoff=function(){this.m_planeEffect=EffectMgr.getInstance().spawnEffect(DTEffectIdPK.DTPK_Hero_Blue_plane),this.m_planeEffect.followTarget=this.gameObject,this.m_planeEffect.followOffset=new Laya.Vector3(0,1,1.5),this.m_extendYOffset=5,this.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_FLAYF),this.m_isInFly=!0,this.m_isFlaGenerateGold=!0,Laya.timer.frameLoop(1,this,this.flyTakeoffUpdate),PF.NotificationCenter.GetInstance().PostNotification("UI_FLY_START");},e.prototype.flyTakeoffUpdate=function(){30<this.transform.position.y&&!this.m_isFlyStable&&(this.m_planeEffect.followOffset=new Laya.Vector3(0,.6,1.5),this.transform.position=new Laya.Vector3(this.transform.position.x,30,this.transform.position.z),this.m_isFlyStable=!0,this.m_extendYOffset=0,this.speedMotor=1.5,this.changeState(PlayerEntityNormalFlyFlay.GetInstance())),CameraMgr.getInstance().getCameraControl().setTargetY(this.transform.position.y);},e.prototype.isInFly=function(){return this.m_isInFly;},e.prototype.endFlyTakeoff=function(){Laya.timer.clear(this,this.flyTakeoffUpdate),this.m_isFlyStable=!1;var t=new Laya.Vector3(0,this.transform.position.y,this.transform.position.z+80);this.m_currencyGroupObj=TerrainMgr.GetInstance().customGenerateCurrencyGroup(250,t);},e.prototype.IsFlaCreateGold=function(){return this.m_isFlaGenerateGold;},e.prototype.startFlyFall=function(){var t=this;this.m_isFlaGenerateGold=!1,Laya.timer.once(1500,this,function(){t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_FLAY_FALL),null!=t.m_currencyGroupObj&&(t.m_currencyGroupObj.removeSelf(),t.m_currencyGroupObj=null),Laya.timer.once(1800,t,function(){t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_DOWN),t.m_planeEffect.followTarget=null,t.m_planeEffect.destoryMe(),t.m_isInFly=!1;});});},e.prototype.flyFallUpdate=function(){CameraMgr.getInstance().getCameraControl().setTargetY(this.transform.position.y),this.m_isOnGround&&(this.changeState(PlayerEntityRun.GetInstance()),this.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_RUN),this.speedMotor=1,PF.NotificationCenter.GetInstance().PostNotification("UI_FLY_OFF"));},e.prototype.cacheJumpSwipe=function(){this.m_isCacheJumpSwipe=!0,this.m__cacheJumpTime=0;},e.prototype.endJumpSwipe=function(){this.m_isCacheJumpSwipe=!1;},e.prototype.updateCacheJumpSwipe=function(){this.m_isCacheJumpSwipe&&(this.m__cacheJumpTime+=Game.Constant.timeDelta,this.m__cacheJumpTime>=this.m_cacheJumpSaveTimeMax&&this.endJumpSwipe());},e.prototype.isCacheJumpSwipe=function(){return this.m_isCacheJumpSwipe;},e.prototype.isEndMove=function(){var t=this.m_position.x;return t=Math.round(t),-1==this.m_currentLen&&t==-this.MoveLeftRight||0==this.m_currentLen&&t==this.m_currentLen||1==this.m_currentLen&&t==this.MoveLeftRight;},e.prototype.isEndMoveLimit=function(t){var e=this.m_position.x;return-1==this.m_currentLen&&e>-(this.MoveLeftRight+t)&&e<-(this.MoveLeftRight-t)||0==this.m_currentLen&&0-t<e&&e<0+t||1==this.m_currentLen&&e>this.MoveLeftRight-t&&e<this.MoveLeftRight+t;},e.prototype.getObjectLen=function(t){return-6<=t&&t<=-2?-1:-2<=t&&t<=2?0:2<=t&&t<=6?1:0;},e.prototype.Update=function(t){this.m_isInTeachPause||this.m_isChestPause||(this.m_FSM.update(),GameMgr.isInRun()&&(this.UpdateMovement(),this.checkPlayerCol(!0)||this.checkPlayerCol(!1)),this.UpdateColDizzinessDelay(),this.updateCacheJumpSwipe());},e.prototype.initRayCast=function(){this.m_bottomRay=new Laya.Ray(new Laya.Vector3(),new Laya.Vector3()),this.m_bottomHitInfo=new Laya.RaycastHit(),this.m_forwardRay=new Laya.Ray(new Laya.Vector3(),new Laya.Vector3()),this.m_forwardHitInfo=new Laya.RaycastHit(),this.m_leftRay=new Laya.Ray(new Laya.Vector3(),new Laya.Vector3()),this.m_leftHitInfo=new Laya.RaycastHit(),this.m_rightRay=new Laya.Ray(new Laya.Vector3(),new Laya.Vector3()),this.m_rightHitInfo=new Laya.RaycastHit();},e.prototype.checkPlayerCol=function(t){var e=!1,n=!1,i=.5;if(t?i=1.5:this.m_moveDirection!=DTSwipeDirectionPK.DTPK_Right&&this.m_moveDirection!=DTSwipeDirectionPK.DTPK_Left||(i=1.5),this.m_moveDirection!=DTSwipeDirectionPK.DTPK_Right&&(e=!0),this.m_moveDirection!=DTSwipeDirectionPK.DTPK_Left&&(n=!0),this.m_FSM.current_state==PlayerEntityNormalShovel.GetInstance()||this.m_FSM.current_state==PlayerEntitySetDownShovel.GetInstance()||this.m_FSM.isInState(PlayerEntityHBShovel.GetInstance())||this.m_FSM.isInState(PlayerEntityHBSetDownShovel.GetInstance())){if(t)return!1;n=e=!1;}
return this.m_forwardRay.origin=new Laya.Vector3(this.m_position.x,this.m_position.y+i,this.m_position.z),this.m_forwardRay.direction=new Laya.Vector3(0,0,1),Laya.Physics.rayCast(this.m_forwardRay,this.m_forwardHitInfo,100,GameMgr.getInstance().layerBarrierNumber),null!=this.m_forwardHitInfo.sprite3D&&this.m_forwardHitInfo.distance<=1?this.colliderBarrier(t,DTTypeColliderPK.DTPK_front,this.m_forwardHitInfo.sprite3D):e&&(this.m_leftRay.origin=new Laya.Vector3(this.m_position.x,this.m_position.y+i,this.m_position.z),this.m_leftRay.direction=new Laya.Vector3(1,0,0),Laya.Physics.rayCast(this.m_leftRay,this.m_leftHitInfo,100,GameMgr.getInstance().layerBarrierNumber),null!=this.m_leftHitInfo.sprite3D&&this.m_leftHitInfo.distance<=1)?this.colliderBarrier(t,DTTypeColliderPK.DTPK_left,this.m_leftHitInfo.sprite3D):!!(n&&(this.m_rightRay.origin=new Laya.Vector3(this.m_position.x,this.m_position.y+i,this.m_position.z),this.m_rightRay.direction=new Laya.Vector3(-1,0,0),Laya.Physics.rayCast(this.m_rightRay,this.m_rightHitInfo,100,GameMgr.getInstance().layerBarrierNumber),null!=this.m_rightHitInfo.sprite3D&&this.m_rightHitInfo.distance<=1))&&this.colliderBarrier(t,DTTypeColliderPK.DTPK_right,this.m_rightHitInfo.sprite3D);},e.prototype._checkDownRayCast=function(){if(this.m_bottomRay.origin=new Laya.Vector3(this.m_position.x,this.m_position.y,this.m_position.z),this.m_bottomRay.direction=new Laya.Vector3(0,-1,0),Laya.Physics.rayCast(this.m_bottomRay,this.m_bottomHitInfo,100,GameMgr.getInstance().layerBarrierNumber),null==this.m_bottomHitInfo.sprite3D?Laya.Physics.rayCast(this.m_bottomRay,this.m_bottomHitInfo,100,GameMgr.getInstance().layerTerrainNumber):.5<this.m_bottomHitInfo.distance&&Laya.Physics.rayCast(this.m_bottomRay,this.m_bottomHitInfo,100,GameMgr.getInstance().layerTerrainNumber),this.m_isOnGround=!1,null!=this.m_bottomHitInfo.sprite3D&&this.m_bottomHitInfo.distance<=.5){var t=this.m_bottomHitInfo.position.y+.5*this.m_playerHeight;this.m_position=new Laya.Vector3(this.m_position.x,t,this.m_position.z),this.m_isOnGround=!0,this.m_isDropCompleted=!0,Math.abs(this.transform.localPosition.x)<.5&&(this.isAutoSilpLDown=!1,this.isAutoSilpRDown=!1),this.autoJumpLen=this.m_currentLen;var e=this.getTerrainObjectScritpt(this.m_bottomHitInfo.sprite3D);null!=e&&(100533==e.getPo().DTPK_id||100534==e.getPo().DTPK_id?this.isHuaBan()&&null!=this.m_roleAnimation.currentPlayClip&&this.m_roleAnimation.currentPlayClip.name!=PlayerAnimationName.HB_SKIDDING&&this.m_roleAnimation.play(PlayerAnimationName.HB_SKIDDING):null!=this.m_roleAnimation.currentPlayClip&&this.isHuaBan()&&this.m_FSM.isInState(PlayerEntityHBRun.GetInstance())&&(this.m_roleAnimation.currentPlayClip.name!=PlayerAnimationName.HB_SKIDDING||this.m_isPlayerJump||this.m_roleAnimation.play(PlayerAnimationName.HB_RUN)));}
null!=this.m_roleAnimation.currentPlayClip&&this.m_roleAnimation.currentPlayClip.name==PlayerAnimationName.HB_SKIDDING?null==this.skiddingEffect&&(this.skiddingEffect=EffectMgr.getInstance().spawnEffect(DTEffectIdPK.DTPK_hero_shanggan),this.skiddingEffect.followTarget=this.bone006,this.skiddingEffect.followOffset=new Laya.Vector3(0,0,-.5)):null!=this.skiddingEffect&&(EffectMgr.getInstance().despawnEffect(this.skiddingEffect),this.skiddingEffect=null);},e.prototype.spawnAutoJumpEffect=function(){},e.prototype.despawnAutoJumpEffect=function(){null!=this.autoJumpEffect&&(EffectMgr.getInstance().despawnEffect(this.autoJumpEffect),this.autoJumpEffect=null);},e.prototype.colliderBarrier=function(t,e,n){if(!GameMgr.isInRun())return!1;var i=n,r=this.getTerrainObjectScritpt(i);return null!=r||(i=n.parent.parent,r=this.getTerrainObjectScritpt(i)),this.colliderTerrainBarrier(t,e,r);},e.prototype.getTerrainObjectScritpt=function(t){var e=t.getComponentByType(Terrain.TerrainObject);return null==e&&null==(e=t.getComponentByType(Terrain.TerrainObjectRotate))&&null==(e=t.getComponentByType(Terrain.TerrainObjectDown))&&(e=t.getComponentByType(Terrain.TerrainStatic)),e;},e.prototype.colliderTerrainBarrier=function(t,e,n){if(e==DTTypeColliderPK.DTPK_front){if(this.isHuabanTalentHealth(n)||this.shieldBuffer(n)||this.HuaBanBuffer(n)||this.isPlayerTalentHealth(n))return GameMgr.isStun&&BufferMgr.getInstance().unbuffer(BufferType.stun),!0;GameMgr.getInstance().gameOver(DTPlayerDieAniTypePK.DTPK_normalFront);}else{if(!(e!=DTTypeColliderPK.DTPK_left&&e!=DTTypeColliderPK.DTPK_right||100518!=n.getPo().DTPK_id&&100523!=n.getPo().DTPK_id))return;if(GameMgr.isStun){if(this.m_colDizzinessdelay<=0){if(this.isHuabanTalentHealth(n)||this.shieldBuffer(n)||this.HuaBanBuffer(n)||this.isPlayerTalentHealth(n))return BufferMgr.getInstance().unbuffer(BufferType.stun),!0;GameMgr.getInstance().gameOver(DTPlayerDieAniTypePK.DTPK_normalFront);}}else BufferMgr.getInstance().buffer(BufferType.stun),this.m_colDizzinessdelay=.3,this.isHuaBan()?(PlayerEntityHBStagger.GetInstance().TypeCol=e,PlayerEntityHBStagger.GetInstance().IsChangeLane=!0,this.changeState(PlayerEntityHBStagger.GetInstance())):(PlayerEntityNormalStagger.GetInstance().TypeCol=e,PlayerEntityNormalStagger.GetInstance().IsChangeLane=!0,this.changeState(PlayerEntityNormalStagger.GetInstance()));}
return!0;},e.prototype.UpdateColDizzinessDelay=function(){this.m_colDizzinessdelay-=Game.Constant.timeDelta,this.m_colDizzinessdelay<0&&(this.m_colDizzinessdelay=0);},e.prototype.isHuabanTalentHealth=function(t){var e=TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.HealthMul);if(0<=e){var n=!1;t.getPo().DTPK_objectType==DTBIObjectTypeV2PK.DTPK_Tunnel&&(n=!0);var i=new Laya.Vector3(this.m_currentLen*this.MoveLeftRight,.2,this.transform.position.z);return this.transform.position=i,TerrainMgr.GetInstance().delectTerrainObjectsFromAmongPlayer(-Global.getConstantsInfo().DTPK_terrainLength,1e3),TerrainMgr.GetInstance().polishingTerrainBurrow(n),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_GAME_FLASH_WHITE),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_PLAYER_LOSEHEALTH,1+e),!0;}
return!1;},e.prototype.isPlayerTalentHealth=function(t){var e=TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.HealthMul);if(0<=e){var n=!1;t.getPo().DTPK_objectType==DTBIObjectTypeV2PK.DTPK_Tunnel&&(n=!0);var i=new Laya.Vector3(this.m_currentLen*this.MoveLeftRight,.2,this.transform.position.z);return this.transform.position=i,TerrainMgr.GetInstance().delectTerrainObjectsFromAmongPlayer(-Global.getConstantsInfo().DTPK_terrainLength,1e3),TerrainMgr.GetInstance().polishingTerrainBurrow(n),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_GAME_FLASH_WHITE),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_PLAYER_LOSEHEALTH,1+e),!0;}
return!1;},e.prototype.isInHuaBanJump=function(){return this.m_FSM.isInState(PlayerEntityHBAutoJump.GetInstance());},e.prototype.isHuaBan=function(){return this.m_FSM.isInState(PlayerEntityHBJump.GetInstance())||this.m_FSM.isInState(PlayerEntityHBMoveLeft.GetInstance())||this.m_FSM.isInState(PlayerEntityHBMoveRight.GetInstance())||this.m_FSM.isInState(PlayerEntityHBRun.GetInstance())||this.m_FSM.isInState(PlayerEntityHBSetDown.GetInstance())||this.m_FSM.isInState(PlayerEntityHBSetDownShovel.GetInstance())||this.m_FSM.isInState(PlayerEntityHBShovel.GetInstance())||this.m_FSM.isInState(PlayerEntityHBJumpContinue.GetInstance())||this.m_FSM.isInState(PlayerEntityHBAutoJump.GetInstance())||this.m_FSM.isInState(PlayerEntityHuaxiang.GetInstance());},e.prototype.HuaBanBuffer=function(t){var e=this.isHuaBan();if(e){var n=!1;t.getPo().DTPK_objectType==DTBIObjectTypeV2PK.DTPK_Tunnel&&(n=!0);var i=new Laya.Vector3(this.m_currentLen*this.MoveLeftRight,.2,this.transform.position.z);this.transform.position=i,TerrainMgr.GetInstance().delectTerrainObjectsFromAmongPlayer(-Global.getConstantsInfo().DTPK_terrainLength,1e3),TerrainMgr.GetInstance().polishingTerrainBurrow(n),this.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_RUN),this.changeState(PlayerEntityRun.GetInstance()),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_GAME_FLASH_WHITE),BufferMgr.getInstance().unbuffer(BufferType.huaban),PF.NotificationCenter.GetInstance().PostNotification("GET_HUABAN_AD");}
return e;},e.prototype.shieldBuffer=function(t){var e=GameMgr.isInHelmet;if(e){var n=!1;t.getPo().DTPK_objectType==DTBIObjectTypeV2PK.DTPK_Tunnel&&(n=!0);var i=new Laya.Vector3(this.m_currentLen*this.MoveLeftRight,.2,this.transform.position.z);this.transform.position=i,TerrainMgr.GetInstance().delectTerrainObjectsFromAmongPlayer(-Global.getConstantsInfo().DTPK_terrainLength,Global.getConstantsInfo().DTPK_helmetRODistance),TerrainMgr.GetInstance().polishingTerrainBurrow(n),this.isHuaBan()||(this.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_RUN),this.changeState(PlayerEntityRun.GetInstance())),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_GAME_FLASH_WHITE),BufferMgr.getInstance().unbuffer(BufferType.shield);}
return e;},e.prototype.playerReviveGame=function(t){this.refOnGameRevive(t),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_GAME_FLASH_WHITE);},e.prototype.playerDeathRevive=function(t){var e=this;BufferMgr.getInstance().buffer(BufferType.flight),Laya.timer.once(3e3,this,function(){BufferMgr.getInstance().unbuffer(BufferType.flight),Laya.timer.once(4800,e,function(){GameMgr.getInstance().setGameState(DTGameStatePK.DTPK_GameOver),e.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_FREE),AudioMgr.getInstance().stopGameMusic(),PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_ScoreUI);});});},e.prototype.rigidColliderTerrain=function(t){var e=t.getPo().DTPK_objectType;if(e==DTBIObjectTypeV2PK.DTPK_Currency){var n=t;if(!n.isColGold()){t.scaleZero(),EffectMgr.getInstance().spawnEffect(DTEffectIdPK.DTPK_hero_cjb,new Laya.Vector3(this.m_playerheadObj.transform.position.x,this.m_playerheadObj.transform.position.y+2,this.m_playerheadObj.transform.position.z+3)).followTarget=this.m_playerheadObj;var i=GameMgr.isInDoubleGold?2:1;Game.Constant.isLowRes&&(i*=2);var r=TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.CoinMul)+TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.CoinMul);r<1&&(r=1),i*=r,GameRewardCount.getInstance().addCurrencyBytype(DTCurrencyPK.DTPK_Gold,i),n.colGold();}}else e==DTBIObjectTypeV2PK.DTPK_Event?t.isOffsetVisiable()&&(t.CallHideModel(),this.ColliderEvent(t)):e==DTBIObjectTypeV2PK.DTPK_Teach&&(t.CallHideModel(),Debug.Log("触碰教学"),this.ColliderTeach(t));},e.prototype.onTriggerEnter=function(t){if(GameMgr.isInRun()&&null!=t.owner){var e=null,n=t.owner;if(n.layer.number==GameMgr.getInstance().layerCurrencyNumber)e=n.getComponentByType(Terrain.CurrencyObject);else if(null==(e=this.getTerrainObjectScritpt(n))&&null!=n.parent&&null!=n.parent.parent){var i=n.parent.parent;e=this.getTerrainObjectScritpt(i);}
null!=e&&this.rigidColliderTerrain(e);}},e.prototype.propAdd=function(t){GameMgr.getInstance().pauseGame(),GameMgr.getInstance().setGameState(DTGameStatePK.DTPK_Pause),this.m_roleAnimation.playbackRate=0,this.m_isChestPause=!0,PF.FUIPopupManager.GetInstance().ShowPopup(DTFUIWindowIdPK.DTPK_HuodeUI).Init(t),this.difficult=TerrainMgr.GetInstance().m_currentDifficulty,console.log("difficult = "+this.difficult);},e.prototype.ColliderEvent=function(t){var e=t.getPo().DTPK_typeParam;if(e==DTBIEventTypePK.DTPK_Prop_Helmet)TerrainMgr.GetInstance().m_currentDifficulty>this.difficult?this.propAdd(e):BufferMgr.getInstance().buffer(BufferType.shield);else if(e==DTBIEventTypePK.DTPK_Prop_Magnet)TerrainMgr.GetInstance().m_currentDifficulty>this.difficult?this.propAdd(e):BufferMgr.getInstance().buffer(BufferType.magnet);else if(e==DTBIEventTypePK.DTPK_Prop_Plane)this.isHuaBan()&&BufferMgr.getInstance().unbuffer(BufferType.huaban),TerrainMgr.GetInstance().m_currentDifficulty>this.difficult?this.propAdd(e):BufferMgr.getInstance().buffer(BufferType.flight);else if(e==DTBIEventTypePK.DTPK_Prop_Double)TerrainMgr.GetInstance().m_currentDifficulty>this.difficult?this.propAdd(e):BufferMgr.getInstance().buffer(BufferType.doubleCoin);else if(e==DTBIEventTypePK.DTPK_Event_Burrow)this.shieldBuffer(t)||(this.burrowPos=t.transform.position,GameMgr.getInstance().gameOver(DTPlayerDieAniTypePK.DTPK_fallDownButtom));else if(e==DTBIEventTypePK.DTPK_Event_Chest)this.inGamePsuse(),PF.FUIPopupManager.GetInstance().ShowPopup(DTFUIWindowIdPK.DTPK_TreasureUI);else if(e==DTBIEventTypePK.DTPK_Event_HuaBan)this.getHuaban();else if(e==DTBIEventTypePK.DTPK_Event_Fjump)this.m_FSM.isInState(PlayerEntityHBAutoJump.GetInstance())||this.SetAnimation(PlayerAnimationName.HB_JUMP01),this.m_FSM.changeState(PlayerEntityHBAutoJump.GetInstance());else if(e==DTBIEventTypePK.DTPK_Event_Rjump||e==DTBIEventTypePK.DTPK_Event_Ljump){if(this.isAutoSilpLDown||this.isAutoSilpRDown)return;var n=this.m_FSM.isInState(PlayerEntityHBAutoJump.GetInstance());this.m_isPlayerJump&&!n||!this.m_isOnGround&&!this.m_isPlayerJump&&!n?this.m_currentLen=this.m_lastLaneNum:!n&&this.m_isOnGround?(e==DTBIEventTypePK.DTPK_Event_Rjump?this.SetAnimation(PlayerAnimationName.HB_JUMP02):this.SetAnimation(PlayerAnimationName.HB_JUMP03),this.autoJumpLen=this.m_lastLaneNum,this.m_FSM.changeState(PlayerEntityHBAutoJump.GetInstance())):n&&this._isJumpDrop&&(this.isAutoSilpLDown=!0,this.isAutoSilpRDown=!0,this.m_currentLen=0);}},e.prototype.inGamePsuse=function(){this.m_roleAnimation.playbackRate=0,this.m_isChestPause=!0,GameMgr.getInstance().gamingToPause();},e.prototype.getHuaban=function(){BufferMgr.getInstance().buffer(BufferType.huaban),TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.AutoShield)&&BufferMgr.getInstance().buffer(BufferType.shield,1e4),TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.AutoMagnet)&&BufferMgr.getInstance().buffer(BufferType.magnet,1e4),PF.FUIManager.GetInstance().GetWindow(DTFUIWindowIdPK.DTPK_GameUI).tanhuaban();},e.prototype.isInDoubleJump=function(){return this.m_FSM.isInState(PlayerEntityHBJumpContinue.GetInstance())||this.m_FSM.isInState(PlayerEntityNormalJumpContinue.GetInstance())||this.m_FSM.isInState(PlayerEntityHBJumpContinue2.GetInstance())||this.m_FSM.isInState(PlayerEntityNormalJumpContinue2.GetInstance());},e.prototype.setHuaBanVisiable=function(t){if(t){if(null==this.huaban){var e=UserDataMgr.getInstance().getUserInfo().huaBanId;null!=e&&null!=e||(e=1);var n=DTPlayerMGR.getInstance().DTHuaBanInfoDIC.get(e).DTPK_effectId;this.huaban=EffectMgr.getInstance().spawnEffect(n),this.huaban.transform.parent=this.huaban1.transform,this.huaban.transform.localScale=new Laya.Vector3(10,10,10),this.huaban.transform.localPosition=new Laya.Vector3(2.8,0,0),this.huabanAnimator=this.huaban.gameObject.getChildAt(0).getChildAt(0).getComponentByType(Laya.Animator);}}else this.huabanAnimator&&this.huabanAnimator.stop(),null!=this.huaban&&(this.huaban.destoryMe(),this.huaban=null,this.downTime=.1,this.huabanAnimator=null);},e.prototype.onHitHuaBan=function(){this.setHuaBanVisiable(!0),this.SetAnimation(PlayerAnimationName.HB_GET),this.m_FSM.isInState(PlayerEntityRun.GetInstance())?this.m_FSM.changeState(PlayerEntityHBRun.GetInstance()):this.m_FSM.isInState(PlayerEntityNormalJump.GetInstance())?this.m_FSM.changeState(PlayerEntityHBJump.GetInstance()):this.m_FSM.isInState(PlayerEntityNormalMoveLeft.GetInstance())?this.m_FSM.changeState(PlayerEntityHBMoveLeft.GetInstance()):this.m_FSM.isInState(PlayerEntityMoveRight.GetInstance())?this.m_FSM.changeState(PlayerEntityHBMoveRight.GetInstance()):this.m_FSM.isInState(PlayerEntitySetDown.GetInstance())?this.m_FSM.changeState(PlayerEntityHBSetDown.GetInstance()):this.m_FSM.isInState(PlayerEntitySetDownShovel.GetInstance())?this.m_FSM.changeState(PlayerEntityHBSetDownShovel.GetInstance()):this.m_FSM.isInState(PlayerEntityNormalShovel.GetInstance())?this.m_FSM.changeState(PlayerEntityHBShovel.GetInstance()):this.m_FSM.isInState(PlayerEntityNormalJumpContinue.GetInstance())&&this.m_FSM.changeState(PlayerEntityHBJumpContinue.GetInstance());},e.prototype.animationResume=function(t){this.m_roleAnimation.playbackRate=t;},e.prototype.ColliderTeach=function(t){if(TeachMgr.getInstance().isInTeachGame()){var e=t.getPo().DTPK_typeParam;e==DTGameTeachTypePK.DTPK_Finish?(TeachMgr.getInstance().runningIfTeachFinish(),AudioMgr.getInstance().playGameSound(DTSoundIdPK.DTPK_guide_7)):(this._setTeachToPause(e),AudioMgr.getInstance().stopAllGmeSound(),AudioMgr.getInstance().playGameSound(this.m_teachProgress),this.m_teachProgress++);}},e.prototype.isDoubleJumpTeac=function(){return TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.DoubleJump)||TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.DoubleJump)||TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.ThreeJump)||TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.ThreeJump)||TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.FourJump)||TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.FourJump);},e.prototype.DoubleJumpTeachPause=function(t){return this.isDoubleJumpTeac()&&this._isJumpDrop&&TeachMgr.isDoubleTeach&&t==DTSwipeDirectionPK.DTPK_Up?(TeachMgr.saveDoubleJump(),this._setTeachToResume(),!1):!!this.isStartDoubleJumpTeach;},e.prototype.isTeachAndNotDirction=function(t){return!(!TeachMgr.isInTeach()||!TeachMgr.getInstance().isInTeachGame()||this.m_teachType==DTGameTeachTypePK.DTPK_Up&&t==DTSwipeDirectionPK.DTPK_Up||this.m_teachType==DTGameTeachTypePK.DTPK_Down&&t==DTSwipeDirectionPK.DTPK_Down||this.m_teachType==DTGameTeachTypePK.DTPK_Left&&t==DTSwipeDirectionPK.DTPK_Left||this.m_teachType==DTGameTeachTypePK.DTPK_Right&&t==DTSwipeDirectionPK.DTPK_Right);},e.prototype._setTeachToPause=function(t){this.m_teachType=t,this.m_isInTeachPause=!0,this.m_roleAnimation.paused=!0,GameMgr.getInstance().gamingToPause(),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_GAME_TEACH,t);},e.prototype._setTeachToResume=function(){this.m_isInTeachPause=!1,this.m_roleAnimation.paused=!1,GameMgr.getInstance().teachpauseToGaming(),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_GAME_TEACH,DTGameTeachTypePK.DTPK_Finish),this.m_teachType=0;},e.prototype.leftTeach=function(){this.m_isInTeachPause&&this.m_teachType==DTGameTeachTypePK.DTPK_Left&&this._setTeachToResume();},e.prototype.righTeacht=function(){this.m_isInTeachPause&&this.m_teachType==DTGameTeachTypePK.DTPK_Right&&this._setTeachToResume();},e.prototype.upTeach=function(){this.m_isInTeachPause&&this.m_teachType==DTGameTeachTypePK.DTPK_Up&&this._setTeachToResume();},e.prototype.downTeach=function(){this.m_isInTeachPause&&this.m_teachType==DTGameTeachTypePK.DTPK_Down&&this._setTeachToResume();},e.prototype.refOnGameRevive=function(t){var e=new Laya.Vector3(this.m_currentLen*this.MoveLeftRight,.2,this.transform.position.z);this.transform.position=e,TerrainMgr.GetInstance().delectTerrainObjectsFromAmongPlayer(-Global.getConstantsInfo().DTPK_terrainLength,1e3),TerrainMgr.GetInstance().polishingTerrainBurrow(t),this.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_RUN),this.changeState(PlayerEntityRun.GetInstance()),this.setHuaBanVisiable(!1);},e.prototype.getMoveForwardValue=function(){var t=TerrainMgr.GetInstance().m_moveSpeed;return t=PF.Mathf.LerpNumber(t,TerrainMgr.GetInstance().m_targetMoveSpeed,.02),GameMgr.IsSuperProp()&&(t=0),(TerrainMgr.GetInstance().m_moveSpeed=t)*Game.Constant.timeScale*this.speedMotor;},e.prototype.getThisPos=function(){return this.m_position;},e.prototype.getDownTime=function(){var t=.1;if(!this.m_isOnGround){var e=TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.Gliding),n=TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.Gliding);(0<e||0<n)&&this.isHuaBan()&&this.m_extendYOffset+this.m_jumpYOffset+this.getGravityValue()<0&&(t=0!=e?e:n);}
return t;},e.prototype.updateDownHuaxiang=function(){if(!this.m_isOnGround&&this.isInJump()){var t=TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.Gliding),e=TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.Gliding);(0<t||0<e)&&this.isHuaBan()&&this.m_extendYOffset+this.m_jumpYOffset+this.getGravityValue()<0&&this.m_FSM.changeState(PlayerEntityHuaxiang.GetInstance());}},e.prototype.UpdateMovement=function(){this.m_position=this.transform.position;var t=this.getMoveForwardValue();TerrainMgr.GameSpeedTimeNow=t*Game.Constant.timeDelta;var e=new Laya.Vector3(this.m_currentLen*this.MoveLeftRight,this.m_position.y+this.m_extendYOffset+this.m_jumpYOffset+this.getGravityValue(),this.m_position.z+t),n=.08;!this.isAutoSilpLDown&&!this.isAutoSilpRDown||this.m_isOnGround||(n=.065),this.m_position.x=PF.Mathf.LerpNumber(this.m_position.x,e.x,n),this.m_position.y=PF.Mathf.LerpNumber(this.m_position.y,e.y,this.downTime),this.m_position.z=PF.Mathf.LerpNumber(this.m_position.z,e.z,Game.Constant.timeDelta),this._checkDownRayCast(),this.transform.position=this.m_position;var i=TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.ScoreMul)+TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.ScoreMul);GameMgr.getInstance().runDistance+=TerrainMgr.GameSpeedTimeNow*i,this.m_isOnGround&&CameraMgr.getInstance().getCameraControl().setTargetY(this.m_position.y);},e.prototype.SetAnimation=function(t){null!=this.m_roleAnimation&&this.m_roleAnimation.play(t),this.M_currentAnimationName=t;},e.prototype.PlayerWing=function(t){null!=this.m_wingAnimator&&this.m_wingAnimator.play(t),this.m_wingAnimationName=t;},e.prototype._onAniCompleteed=function(){},e.prototype.onWingStop=function(){switch(this.m_wingAnimationName){case "open":this.PlayerWing("fly");break;case "jump":this.PlayerWing("idle");}},e.prototype.onAniStopped=function(){switch(this.M_currentAnimationName){case PlayerAnimationName.ACTION_NORMAL_HERO_MOVE_LEF:case PlayerAnimationName.ACTION_NORMAL_HERO_MOVE_RIGHT:case PlayerAnimationName.ACTION_NORMAL_HERO_JUMP:case PlayerAnimationName.ACTION_NORMAL_HERO_JUMP_HELLO:case PlayerAnimationName.ACTION_NORMAL_HERO_JUMP_ROLL1:case PlayerAnimationName.ACTION_NORMAL_HERO_JUMP_ROLL2:this.isHuaBan()?this.SetAnimation(PlayerAnimationName.HB_RUN):this.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_RUN);break;case PlayerAnimationName.ACTION_NORMAL_JUMP_RIGHT:case PlayerAnimationName.ACTION_NORMAL_JUMP_LEFT:case PlayerAnimationName.ACTION_NORMAL_HERO_SHOVEL:this.isHuaBan()?this.SetAnimation(PlayerAnimationName.HB_RUN):this.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_RUN);break;case PlayerAnimationName.ACTION_NORMAL_HERO_JUMP_SETDOWN:break;case PlayerAnimationName.ACTION_NORMAL_HERO_STAGGER_L:case PlayerAnimationName.ACTION_NORMAL_HERO_STAGGER_R:case PlayerAnimationName.ACTION_NORMAL_HERO_TRIP:this.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_RUN);break;case PlayerAnimationName.HB_GET:case PlayerAnimationName.HB_JUMP02:case PlayerAnimationName.HB_JUMP03:case PlayerAnimationName.HB_JUMP01:case PlayerAnimationName.HB_JUMP:case PlayerAnimationName.HB_JUMP04:case PlayerAnimationName.HB_JUMP05:case PlayerAnimationName.HB_LEFT:case PlayerAnimationName.HB_RIGHT:this.SetAnimation(PlayerAnimationName.HB_RUN);}},e.prototype.gameOver=function(t){this.setHuaBanVisiable(!1),t==DTPlayerDieAniTypePK.DTPK_fallDownButtom?this.changeState(PlayerEntityNormalLose4.GetInstance()):this.changeState(PlayerEntityNormalLose1.GetInstance());},e.prototype.startLose1=function(){var t=this;Laya.timer.once(1e3,this,function(){t.SetAnimation(PlayerAnimationName.ACTION_NORMAL_HERO_LOSE1_02),t.loseToResultUI();});},e.prototype.startLose4=function(){var t=this,e=this.getObjectLen(this.burrowPos.x);if(e==this.m_currentLen)Laya.timer.once(1e3,this,function(){t._playerDownLose4();});else{this._burrowMoveX=this.transform.position.x;var n=e*this.MoveLeftRight;Laya.Tween.to(this,{_burrowMoveX:n},300).update=Laya.Handler.create(this,function(){var e=new Laya.Vector3(t._burrowMoveX,t.transform.position.y,t.transform.position.z);t.m_position=e,t.transform.position=e,CameraMgr.getInstance().getCameraControl().setTargetY(t.m_position.y);},null,!1),Laya.timer.once(1e3,this,function(){t._playerDownLose4();});}},e.prototype._playerDownLose4=function(){var t=this;this._burrowMoveX=this.transform.position.y,Laya.Tween.to(this,{_burrowMoveX:-4},100).update=Laya.Handler.create(this,function(){var e=new Laya.Vector3(t.transform.position.x,t._burrowMoveX,t.transform.position.z);t.m_position=e,t.transform.position=e,0<t.transform.position.y&&CameraMgr.getInstance().getCameraControl().setTargetY(t.m_position.y);},null,!1),Laya.timer.once(1e3,this,function(){t.loseToResultUI();});},e.prototype.loseToResultUI=function(){PfuSdk.GetOLParamInt("helpMeWindow")==PfuSwitch.OFF?PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_ScoreUI):PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_ReviveUI);},e.prototype.changeState=function(t){this.m_FSM.changeState(t);},e.prototype.swipeHandler=function(t,e){if(!t.isTeachAndNotDirction(e)&&!t.DoubleJumpTeachPause(e)&&!t.m_isChestPause){var n=new PF.Telegram();n.mMsg=e,t.m_FSM.HandleMessage(n);}},e;}(Unity.MonoBehaviour),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),PlayerMgr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return null==this._inst&&(this._inst=ComponentRootManger.getInstance().addComponent(e)),this._inst;},e.prototype.generatePlayer=function(t,e,n,i){var r=this;this.m_playerInf=t,Debug.Log("切换角色:"+t.DTPK_name),ResPrefabeMgr.getInstance().loadPrefabeInfo(t.DTPK_resId,function(a){Debug.Log("角色载入完毕:"+t.DTPK_name),e.addChild(a);var o=a.addComponent(PlayerController);n.setTarget(o),TerrainGameMgr.getInstance().setTarget(o),r.m_curPlayer=o,r.m_curPlayer.transform.position=new Laya.Vector3(0,0,0),i();});},e.prototype.release=function(){null!=this.m_curPlayer&&(this.m_curPlayer.gameObject.removeSelf(),this.m_curPlayer.gameObject.destroy(!0)),this.m_curPlayer=null;},e.prototype.isPlayerChange=function(t){return null==this.m_playerInf||this.m_playerInf.DTPK_id!=t.DTPK_id;},e.prototype.getCurrentPlayerControll=function(){return this.m_curPlayer;},e.prototype.releaseGame=function(){this.m_curPlayer.transform.position=new Laya.Vector3(0,1,0),this.m_curPlayer.relasePlayer();},e.prototype.startGame=function(){this.m_curPlayer.startGame();},e.prototype.getDownTime=function(){return this.m_curPlayer.getDownTime();},e;}(Unity.MonoBehaviour),TalentType,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),TalentMgr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerDoubelJump=!1,e.huabanDoubelJump=!1,e.playerGliding=0,e.huabanGliding=0,e.playerCoinMul=0,e.huabanCoinMul=0,e.playerScoreMul=0,e.huabanScoreMul=0,e.playerHealthCounter=0,e.huabanHealthCounter=0,e.playerAutoShield=!1,e.huabanAutoShield=!1,e.playerAutoMagnet=!1,e.huabanAutoMagnet=!1,e.playerAutoRevive=0,e.huabanAutoRevive=0,e.playerThreeJump=!1,e.huabanThreeJump=!1,e.playerFourJump=!1,e.huabanFourJump=!1,e;}
return __extends(e,t),e.getInstance=function(){return null==this._inst&&(this._inst=ComponentRootManger.getInstance().addComponent(e)),this._inst;},e.prototype.reset=function(){var t=UserDataMgr.getInstance().getUserInfo().playerId,e=DTPlayerMGR.getInstance().DTPlayerInfoDIC.get(t),n=UserDataMgr.getInstance().getUserInfo().huaBanId;null!=n&&null!=n||(n=1);var i=DTPlayerMGR.getInstance().DTHuaBanInfoDIC.get(n);this.playerTalentInfo=DTTalentMGR.getInstance().DTTalentInfoDIC.get(e.DTPK_talentId),this.playerDoubelJump=null!=this.playerTalentInfo&&1==this.playerTalentInfo.DTPK_type,this.playerGliding=0,null!=this.playerTalentInfo&&2==this.playerTalentInfo.DTPK_type&&(this.playerGliding+=this.playerTalentInfo.DTPK_value[1]),this.playerHealthCounter=0,null!=this.playerTalentInfo&&3==this.playerTalentInfo.DTPK_type&&(this.playerHealthCounter+=this.playerTalentInfo.DTPK_value[0]),this.playerCoinMul=0,null!=this.playerTalentInfo&&4==this.playerTalentInfo.DTPK_type&&(this.playerCoinMul+=this.playerTalentInfo.DTPK_value[0]),this.playerScoreMul=0,null!=this.playerTalentInfo&&5==this.playerTalentInfo.DTPK_type&&(this.playerScoreMul+=this.playerTalentInfo.DTPK_value[0]),this.playerAutoShield=null!=this.playerTalentInfo&&6==this.playerTalentInfo.DTPK_type,this.playerAutoMagnet=null!=this.playerTalentInfo&&7==this.playerTalentInfo.DTPK_type,this.playerAutoRevive=0,null!=this.playerTalentInfo&&8==this.playerTalentInfo.DTPK_type&&(this.playerAutoRevive+=this.playerTalentInfo.DTPK_value[0]),this.playerThreeJump=null!=this.playerTalentInfo&&9==this.playerTalentInfo.DTPK_type,this.playerFourJump=null!=this.playerTalentInfo&&10==this.playerTalentInfo.DTPK_type,this.huaBanTalentInfo=DTTalentMGR.getInstance().DTTalentInfoDIC.get(i.DTPK_talentId),this.huabanDoubelJump=null!=this.huaBanTalentInfo&&1==this.huaBanTalentInfo.DTPK_type,this.huabanGliding=0,null!=this.huaBanTalentInfo&&2==this.huaBanTalentInfo.DTPK_type&&(this.huabanGliding+=this.huaBanTalentInfo.DTPK_value[1]),this.huabanAutoShield=null!=this.huaBanTalentInfo&&6==this.huaBanTalentInfo.DTPK_type,this.huabanAutoMagnet=null!=this.huaBanTalentInfo&&7==this.huaBanTalentInfo.DTPK_type,this.huabanAutoRevive=0,null!=this.huaBanTalentInfo&&8==this.huaBanTalentInfo.DTPK_type&&(this.huabanAutoRevive+=this.huaBanTalentInfo.DTPK_value[0]),this.huabanThreeJump=null!=this.huaBanTalentInfo&&9==this.huaBanTalentInfo.DTPK_type,this.huabanFourJump=null!=this.huaBanTalentInfo&&10==this.huaBanTalentInfo.DTPK_type,this.huabanHealthCounter=0,null!=this.huaBanTalentInfo&&3==this.huaBanTalentInfo.DTPK_type&&(this.huabanHealthCounter+=this.huaBanTalentInfo.DTPK_value[0]),this.huabanCoinMul=0,null!=this.huaBanTalentInfo&&4==this.huaBanTalentInfo.DTPK_type&&(this.huabanCoinMul+=this.huaBanTalentInfo.DTPK_value[0]),this.huabanScoreMul=0,null!=this.huaBanTalentInfo&&5==this.huaBanTalentInfo.DTPK_type&&(this.huabanScoreMul+=this.huaBanTalentInfo.DTPK_value[0]);},e.prototype.getPlayerTalentValueByType=function(t){switch(t){case TalentType.DoubleJump:return this.playerDoubelJump;case TalentType.Gliding:return this.playerGliding;case TalentType.HealthMul:return this.playerHealthCounter--,this.playerHealthCounter;case TalentType.CoinMul:return this.playerCoinMul;case TalentType.ScoreMul:return this.playerScoreMul<1?1:this.playerScoreMul;case TalentType.AutoShield:return this.playerAutoShield;case TalentType.AutoMagnet:return this.playerAutoMagnet;case TalentType.AutoRevive:return this.playerAutoRevive;case TalentType.ThreeJump:return this.playerThreeJump;case TalentType.FourJump:return this.playerFourJump;}},e.prototype.getGlidingDuration=function(){return 0<this.playerGliding?this.playerTalentInfo.DTPK_value[0]:0<this.huabanGliding?this.huaBanTalentInfo.DTPK_value[0]:0;},e.prototype.getGliding=function(){return 0<this.playerGliding?this.playerGliding:0<this.huabanGliding?this.huabanGliding:.1;},e.prototype.getHuabanTalentValueByType=function(t){switch(t){case TalentType.DoubleJump:return this.huabanDoubelJump;case TalentType.Gliding:return this.huabanGliding;case TalentType.HealthMul:return this.huabanHealthCounter--,this.huabanHealthCounter;case TalentType.CoinMul:return this.huabanCoinMul;case TalentType.ScoreMul:return this.huabanScoreMul;case TalentType.AutoShield:return this.huabanAutoShield;case TalentType.AutoMagnet:return this.huabanAutoMagnet;case TalentType.AutoRevive:return this.huabanAutoRevive;case TalentType.ThreeJump:return this.huabanThreeJump;case TalentType.FourJump:return this.huabanFourJump;}},e;}(Unity.MonoBehaviour);!function(t){t[t.DoubleJump=1]="DoubleJump",t[t.Gliding=2]="Gliding",t[t.HealthMul=3]="HealthMul",t[t.CoinMul=4]="CoinMul",t[t.ScoreMul=5]="ScoreMul",t[t.AutoShield=6]="AutoShield",t[t.AutoMagnet=7]="AutoMagnet",t[t.AutoRevive=8]="AutoRevive",t[t.ThreeJump=9]="ThreeJump",t[t.FourJump=10]="FourJump";}(TalentType||(TalentType={}));var __extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),ResPrefabeMgr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_bundleDic=new PF.Dictionary(),e;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.loadSettingInfo=function(){for(var t=0;t<DTResBundleInfosMGR.getInstance().DTResBundleInfoDIC.count;t++){var e=DTResBundleInfosMGR.getInstance().DTResBundleInfoDIC.getKeyByIndex(t),n=DTResBundleInfosMGR.getInstance().DTResBundleInfoDIC.get(e),i=n.DTPK_path+n.DTPK_bundleName+".ls",r=new ResBundleInfos(i);this.m_bundleDic.add(e,r);}},e.prototype.loadBundlesInfo=function(t,e){for(var n=this,i=[],r=0;r<t.length;r++){var a=this.getBundleInfoById(t[r]);i.push(a.bundleUrl),console.log(a.bundleUrl);}
Laya.loader.create(i,Laya.Handler.create(this,function(){for(var r=0;r<i.length;r++){t[r];var a=n.getBundleInfoById(t[r]);a.isLoad=!0,a.isRelase=!1;}
e();}));},e.prototype.relaseBundlesInfo=function(t){for(var e=0;e<t.length;e++){this.getBundleInfoById(t[e]).RelaseBundles();}},e.prototype.loadOneBundlesPrefabeInfo=function(t,e){var n=DTResPrefabInfoMGR.getInstance().DTResPrefabeInfoDIC.get(t),i=this.getBundleInfo(n);i.isRelase?Debug.LogError("load Prefable error bundle Relase!! bundleId ="+n.DTPK_bundleId+"|load prefabId="+t):i.LoadBundles(function(t){var r=Laya.loader.getRes(t).getChildByName(n.DTPK_prefabName);null!=r&&r.removeSelf();var a=Unity.GameObject.Instantiate(r);e(a),i.RelaseBundles();});},e.prototype.loadPrefabeInfo=function(t,e){var n=this,i=DTResPrefabInfoMGR.getInstance().DTResPrefabeInfoDIC.get(t),r=this.getBundleInfo(i);r.isRelase?Debug.LogError("load Prefable error bundle Relase!! bundleId ="+i.DTPK_bundleId+"|load prefabId="+t):r.LoadBundles(function(t){var r=Laya.loader.getRes(t).getChildByName(i.DTPK_prefabName),a=Unity.GameObject.Instantiate(r);n.setCustomMaterialInfo(a),e(a);});},e.prototype.setCustomMaterialInfo=function(t){t instanceof Laya.MeshSprite3D?curvedworld.BlinnPhongMaterial.CopyLayaMaterial(t):t instanceof Laya.ShuriKenParticle3D&&curvedworld.ShurikenParticleMaterial.CopyLayaMaterial(t);for(var e=0;e<t.numChildren;e++){this.setCustomMaterialInfo(t.getChildAt(e));}},e.prototype.copyCurvedWorldToMaterial=function(t,e){e.cloneTo(t);},e.prototype.getBundleInfo=function(t){return this.getBundleInfoById(t.DTPK_bundleId);},e.prototype.getBundleInfoById=function(t){return this.m_bundleDic.get(t);},e;}(PF.Singleton),ResBundleInfos=function(){function t(t){this.bundleUrl=t,this.isLoad=!1,this.isRelase=!1;}
return t.prototype.LoadBundles=function(t){var e=this;this.isLoad?t(this.bundleUrl):Laya.loader.create(this.bundleUrl,Laya.Handler.create(this,function(){e.isLoad=!0,t(e.bundleUrl);}));},t.prototype.RelaseBundles=function(){Laya.loader.getRes(this.bundleUrl).destroy(),this.isRelase=!0;},t;}(),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),AudioMgr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_soundContextDic=new PF.Dictionary(),e.m_musicContextDic=new PF.Dictionary(),e;}
return __extends(e,t),e.getInstance=function(){return null==this._inst&&(this._inst=ComponentRootManger.getInstance().addComponent(e)),this._inst;},e.prototype.playButtonSound=function(){this.playGameSound(DTSoundIdPK.DTPK_ui_butten1);},e.prototype.playGameMusic=function(t){if(!Laya.SoundManager.muted)if(false&&WeChatUtils.GetInstance().IsWeGame()){if(this.m_musicContextDic.containsKey(t)){var e=this.m_musicContextDic.get(t);return void(e.paused&&e.play());}
this.stopGameMusic();var n=this.generateContext(t,!0);n.play(),this.m_musicContextDic.add(t,n);}else{var i=DTSoundInfoMGR.getInstance().DTSoundInfoDIC.get(t);if(null==i)return;Laya.SoundManager.playMusic(i.DTPK_url,0),Laya.SoundManager.setMusicVolume(i.DTPK_volume);}},e.prototype.playGameSound=function(t){if(!Laya.SoundManager.muted)if(false&&WeChatUtils.GetInstance().IsWeGame()){if(this.m_soundContextDic.containsKey(t)){var e=this.m_soundContextDic.get(t);null!=(n=this.getUnusedGameContext(e))?(n.stop(),n.play()):((n=this.generateContext(t,!1)).play(),e.push(n));}else{var n;(n=this.generateContext(t,!1)).play(),(e=[]).push(n),this.m_soundContextDic.add(t,e);}}else{var i=DTSoundInfoMGR.getInstance().DTSoundInfoDIC.get(t);if(null==i)return;Laya.SoundManager.playSound(i.DTPK_url),Laya.SoundManager.setSoundVolume(i.DTPK_volume);}},e.prototype.generateContext=function(t,e){var n=DTSoundInfoMGR.getInstance().DTSoundInfoDIC.get(t),i=wx.createInnerAudioContext();return i.src=n.DTPK_url,i.loop=e,i.volume=n.DTPK_volume,i;},e.prototype.stopGameMusic=function(){if(false&&WeChatUtils.GetInstance().IsWeGame()){for(var t=this.m_musicContextDic.count,e=0;e<t;e++){var n=this.m_musicContextDic.getKeyByIndex(e);this.m_musicContextDic.get(n).destroy();}
this.m_musicContextDic.clear();}else Laya.SoundManager.stopMusic();},e.prototype.stopAllGmeSound=function(){if(false&&WeChatUtils.GetInstance().IsWeGame())for(var t=this.m_soundContextDic.count,e=0;e<t;e++){var n=this.m_soundContextDic.getKeyByIndex(e);this.stopGameSound(n);}else Laya.SoundManager.stopAllSound();},e.prototype.stopGameSound=function(t){if(false&&WeChatUtils.GetInstance().IsWeGame())for(var e=this.m_soundContextDic.get(t),n=0;n<e.length;n++){e[n].stop();}else{var i=DTSoundInfoMGR.getInstance().DTSoundInfoDIC.get(t);if(null==i)return;Laya.SoundManager.stopSound(i.DTPK_url);}},e.prototype.setGameMuted=function(t){Laya.SoundManager.muted=t,false&&WeChatUtils.GetInstance().IsWeGame()&&this.stopGameMusic();},e.prototype.getUnusedGameContext=function(t){for(var e=null,n=0;n<t.length;n++){t[n].paused&&(e=t[n]);}
return e;},e;}(Unity.MonoBehaviour),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),TeachMgr=function(t){function e(){var n=t.call(this)||this,i=LocalSaveUtils.GetItem(e.TEACH_ID);return n.m_teachId=null==i||""==i?DTTeachIdPK.DTPK_InRunning:parseInt(i),n;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e(),e.isNeedDoubleTeach()),this._inst;},e.isNeedDoubleTeach=function(){return 1!=parseInt(LocalSaveUtils.GetItem(e.DOUBLE_JUMPTEACH))?this.isDoubleTeach=!0:this.isDoubleTeach=!1;},e.saveDoubleJump=function(){this.isDoubleTeach=!1,LocalSaveUtils.SaveItem(e.DOUBLE_JUMPTEACH,"1");},e.prototype.saveProgress=function(){LocalSaveUtils.SaveItem(e.TEACH_ID,this.m_teachId+"");},e.isInTeach=function(){return e.getInstance().m_teachId!=DTTeachIdPK.DTPK_Finish;},e.prototype.isInTeachGame=function(){return this.m_teachId==DTTeachIdPK.DTPK_InRunning;},e.prototype.runningIfTeachFinish=function(){this.m_teachId=DTTeachIdPK.DTPK_Finish,this.saveProgress();},e.prototype.reStartToHomeUI=function(t){var e=t.GetFuiWindow();switch(e.m_texTeachKeep.visible=!1,e.m_contentTeach.visible=!1,this.m_teachId){case DTTeachIdPK.DTPK_InRunning:e.m_texTeachKeep.visible=!0,e.m_contentTeach.visible=!0,e.m_texTeachKeep.sortingOrder=99,e.m_btnStart.sortingOrder=100,e.m_contentTeach.sortingOrder=101;}},e.TEACH_ID="teach_save",e.DOUBLE_JUMPTEACH="doublejumpteach",e.isDoubleTeach=!0,e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),UserDataMgr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._s102USER_KEY="u_suserKey",e.m_CURRENCY_KEY="s_currency",e.m_PLAYER_KEY="s_player",e.m_USER_KEY="s_user",e.m_HOME_KEY="s_home",e.m_PROP_KEY="s_prop",e.m_HuabanQianDaokey="s_huabanqiandao",e.m_Huabankey="s_huaban",e.m_isNewUser=!1,e;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},Object.defineProperty(e.prototype,"isInNewUser",{get:function t(){return this.m_isNewUser;},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){LocalSaveUtils.GetItem(e.m_SAVE_VER_KEY),LocalSaveUtils.SaveItem(e.m_SAVE_VER_KEY,e.m_VERSION),this.m_sCurrencyDic=new PF.Dictionary(),this.m_sPlyaerDic=new PF.Dictionary(),this.m_sHuabanDic=new PF.Dictionary(),this.m_sUserDic=new PF.Dictionary(),this.m_sPropDic=new PF.Dictionary(),this.m_sHomeDic=new PF.Dictionary(),this.m_sHuabanYaoQingDic=new PF.Dictionary(),this.loadData()||(this.generateCurrency(),this.generatePlayer(),this.generateUser(),this.generateProp(),this.generateHome(),this.saveData(),this.m_isNewUser=!0),this.resetPlayerVersionInfo();},e.prototype.generateCurrency=function(){this.addCurrencyToDic(DTCurrencyPK.DTPK_Gold,0);},e.prototype.generatePlayer=function(){this.addPlayer(2001,!1);},e.prototype.generateHuaban=function(){this.addPlayer(1,!1);},e.prototype.generateUser=function(){this.addUserToDic(2001);},e.prototype.generateProp=function(){for(var t=1;t<5;t++){this.addPropToDic(t);}},e.prototype.generateHome=function(){this.addHomeToDic(1,!1);},e.prototype.getHuabanYaoQing=function(){return this.m_sHuabanYaoQingDic;},e.prototype.addHuabanYaoQing=function(t,e,n,i,r){if(!this.m_sHuabanYaoQingDic.containsKey(t)){var a=new SHuabanYaoQing();a.uid=t,a.name=e,a.sex=n,a.level=i,a.pickUrl=r,this.m_sHuabanYaoQingDic.add(t,a);}},e.prototype.getAllUsedPropInfo=function(){for(var t=[],e=0;e<this.m_sPropDic.count;e++){var n=this.m_sPropDic.getKeyByIndex(e),i=this.m_sPropDic.get(n);i.using&&t.push(i.id);}
return t;},e.prototype.isUsedPropInfo=function(t){for(var e=this.getAllUsedPropInfo(),n=0;n<e.length;n++){if(t==e[n])return!0;}
return!1;},e.prototype.addPropToDic=function(t){if(!this.m_sPropDic.containsKey(t)){var e=new SProp();e.id=t,e.count=0,e.using=!1,this.m_sPropDic.add(t,e);}
this.m_sPropDic.get(t).count++;},e.prototype.getPropInfo=function(t){if(!this.m_sPropDic.containsKey(t)){var e=new SProp();e.id=t,e.count=0,e.using=!1,this.m_sPropDic.add(t,e);}
return this.m_sPropDic.get(t);},e.prototype.userPropInfo=function(t,e){if(!this.m_sPropDic.containsKey(t)){var n=new SProp();n.id=t,n.count=0,n.using=!1,this.m_sPropDic.add(t,n);}
var i=this.m_sPropDic.get(t);return e?1<=i.count&&(i.count--,i.using=!0):i.using=!0,i.using;},e.prototype.UnusePropInfo=function(){for(var t=1;t<5;t++){this.getPropInfo(t).using=!1;}
this.SoleSavePropInfo();},e.prototype.addUserToDic=function(t){if(!this.m_sUserDic.containsKey(1)){var e=new SUser();e.playerId=t,this.m_sUserDic.add(1,e);}
this.m_sUserDic.get(1).playerId=t;},e.prototype.getUserInfo=function(){if(!this.m_sUserDic.containsKey(1)){var t=new SUser();t.playerId=2001,this.m_sUserDic.add(1,t);}
return this.m_sUserDic.get(1);},e.prototype.addPlayer=function(t,e){if(!this.m_sPlyaerDic.containsKey(t)){var n=new SPlayer();n.id=t,n.isLocked=e;var i=DTPlayerMGR.getInstance().DTPlayerInfoDIC.get(t);n.shieldLv=i.DTPK_defHelmetLevel,n.planeLv=i.DTPK_defPlaneLevel,n.magnetLv=i.DTPK_defMagnetLevel,n.doubleGoldLv=i.DTPK_defDoubleLevel,this.m_sPlyaerDic.add(t,n);}
this.m_sPlyaerDic.get(t).isLocked=e;},e.prototype.addHuaban=function(t,e){if(!this.m_sHuabanDic.containsKey(t)){var n=new SHuaban();n.id=t,n.isLocked=e,this.m_sHuabanDic.add(t,n);}
this.m_sHuabanDic.get(t).isLocked=e;},e.prototype.getPlayer=function(t){if(!this.m_sPlyaerDic.containsKey(t)){var e=new SPlayer();e.id=t,e.isLocked=2001!=t,this.m_sPlyaerDic.add(t,e);}
return this.m_sPlyaerDic.get(t);},e.prototype.getHuaban=function(t){if(!this.m_sHuabanDic.containsKey(t)){var e=new SHuaban();e.id=t,e.isLocked=1!=t,this.m_sHuabanDic.add(t,e);}
return this.m_sHuabanDic.get(t);},e.prototype.addHomeToDic=function(t,e){if(!this.m_sHomeDic.containsKey(t)){var n=new SHome();n.id=t,n.isLocked=e,this.m_sHomeDic.add(t,n);}
this.m_sHomeDic.get(t).isLocked=e;},e.prototype.getHomeInfo=function(t){if(!this.m_sHomeDic.containsKey(t)){var e=new SHome();e.id=t,e.isLocked=1!=t,this.m_sHomeDic.add(t,e);}
return this.m_sHomeDic.get(t);},e.prototype.isContainsHome=function(t){return this.m_sHomeDic.containsKey(t);},e.prototype.resetPlayerVersionInfo=function(){if(null!=this.m_sPlyaerDic)for(var t=0;t<this.m_sPlyaerDic.count;t++){var e=this.m_sPlyaerDic.getKeyByIndex(t),n=this.m_sPlyaerDic.get(e);n.shieldLv||(n.shieldLv=1),n.planeLv||(n.planeLv=1),n.magnetLv||(n.magnetLv=1),n.doubleGoldLv||(n.doubleGoldLv=1);}},e.prototype.addCurrencyToDic=function(t,n,i){null==i&&(i=!1);var r=this.m_sCurrencyDic.get(t);null==r&&((r=new SCurrency()).id=t,r.number=0,this.m_sCurrencyDic.add(t,r)),r.number+=n,i&&PF.NotificationCenter.GetInstance().PostNotification(e.m_UI_REFRESH_CURRENCY,n);},e.prototype.subCurrencyInfo=function(t,e,n){this.addCurrencyToDic(t,-e,n);},e.prototype.setCurrencyInfo=function(t,n,i){null==i&&(i=!1);var r=this.m_sCurrencyDic.get(t);null==r&&((r=new SCurrency()).id=t,r.number=0,this.m_sCurrencyDic.add(t,r)),r.number=n,i&&PF.NotificationCenter.GetInstance().PostNotification(e.m_UI_REFRESH_CURRENCY,n);},e.prototype.getCurrencyInfo=function(t){var e=this.m_sCurrencyDic.get(t);return null==e?0:e.number;},e.prototype.SoleSaveCurrencyInfo=function(){LocalSaveUtils.SaveJsonObject(this.m_CURRENCY_KEY,this.m_sCurrencyDic);},e.prototype.SoleSavePlayerInfo=function(){LocalSaveUtils.SaveJsonObject(this.m_PLAYER_KEY,this.m_sPlyaerDic);},e.prototype.SoleSaveUserInfo=function(){LocalSaveUtils.SaveJsonObject(this.m_USER_KEY,this.m_sUserDic);},e.prototype.SoleSavePropInfo=function(){LocalSaveUtils.SaveJsonObject(this.m_PROP_KEY,this.m_sPropDic);},e.prototype.SoleSaveHomeInfo=function(){LocalSaveUtils.SaveJsonObject(this.m_HOME_KEY,this.m_sHomeDic);},e.prototype.SoleSaveHuabanQianDaoInfo=function(){LocalSaveUtils.SaveJsonObject(this.m_HuabanQianDaokey,this.m_sHuabanYaoQingDic);},e.prototype.SoleSaveHuabanInfo=function(){LocalSaveUtils.SaveJsonObject(this.m_Huabankey,this.m_sHuabanDic);},e.prototype.loadData=function(){var t=LocalSaveUtils.GetJsonObject(this.m_CURRENCY_KEY);if(null!=t)for(var e in this.m_sCurrencyDic=new PF.Dictionary(),t.m_KeyValuePairs){var n=t.m_KeyValuePairs[e],i=n.value;this.m_sCurrencyDic.add(n.key,i);}
if(null!=(t=LocalSaveUtils.GetJsonObject(this.m_PLAYER_KEY)))for(var r in this.m_sPlyaerDic=new PF.Dictionary(),t.m_KeyValuePairs){var a=t.m_KeyValuePairs[r];i=a.value,this.m_sPlyaerDic.add(a.key,i);}
if(null!=(t=LocalSaveUtils.GetJsonObject(this.m_USER_KEY)))for(var o in this.m_sUserDic=new PF.Dictionary(),t.m_KeyValuePairs){var s=t.m_KeyValuePairs[o];i=s.value,this.m_sUserDic.add(s.key,i);}
if(null!=(t=LocalSaveUtils.GetJsonObject(this.m_PROP_KEY)))for(var l in this.m_sPropDic=new PF.Dictionary(),t.m_KeyValuePairs){i=(u=t.m_KeyValuePairs[l]).value,this.m_sPropDic.add(u.key,i);}
if(null!=(t=LocalSaveUtils.GetJsonObject(this.m_HOME_KEY)))for(var l in this.m_sHomeDic=new PF.Dictionary(),t.m_KeyValuePairs){i=(u=t.m_KeyValuePairs[l]).value,this.m_sHomeDic.add(u.key,i);}
if(null!=(t=LocalSaveUtils.GetJsonObject(this.m_HuabanQianDaokey)))for(var l in this.m_sHuabanYaoQingDic=new PF.Dictionary(),t.m_KeyValuePairs){i=(u=t.m_KeyValuePairs[l]).value,this.m_sHuabanYaoQingDic.add(u.key,i);}
if(null!=(t=LocalSaveUtils.GetJsonObject(this.m_Huabankey)))for(var l in this.m_sHuabanDic=new PF.Dictionary(),t.m_KeyValuePairs){var u;i=(u=t.m_KeyValuePairs[l]).value,this.m_sHuabanDic.add(u.key,i);}
return null!=t;},e.prototype.saveData=function(){this.SoleSaveCurrencyInfo(),this.SoleSavePlayerInfo(),this.SoleSaveUserInfo(),this.SoleSavePropInfo(),this.SoleSaveHomeInfo(),this.SoleSaveHuabanInfo(),this.SoleSaveHuabanQianDaoInfo();},e.m_UI_REFRESH_CURRENCY="ui_r_currency",e.m_SAVE_VER_KEY="s_v_k",e.m_VERSION="1",e;}(PF.Singleton),S102UserData=function t(){},SCurrency=function t(){},SPlayer=function t(){this.id=0,this.isLocked=!0,this.tryTime=0,this.shieldLv=1,this.planeLv=1,this.magnetLv=1,this.doubleGoldLv=1;},SHuaban=function t(){this.id=0,this.isLocked=!0,this.tryTime=0;},SHome=function t(){},SUser=function t(){},SProp=function t(){},SHuabanYaoQing=function t(){},__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTPlayerGiftInfoPK=function t(){},DTGrowGiftPK=function t(){},DTActivitiesInfosMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTPlayerGiftInfoDIC=new PF.Dictionary();var e=t.DTPlayerGiftInfoDIC;for(var n in e){var i=e[n];this.DTPlayerGiftInfoDIC.add(parseInt(n),i);}
this.DTGrowGiftDIC=new PF.Dictionary(),e=t.DTGrowGiftDIC;for(var n in e){i=e[n],this.DTGrowGiftDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTADInfoPK=function t(){},DTADInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTADInfoDIC=new PF.Dictionary();var e=t.DTADInfoDIC;for(var n in e){var i=e[n];this.DTADInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTAwardInfoPK=function t(){},DTAwardInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTAwardInfoDIC=new PF.Dictionary();var e=t.DTAwardInfoDIC;for(var n in e){var i=e[n];this.DTAwardInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTConditionInfoPK=function t(){},DTConditionInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTConditionInfoDIC=new PF.Dictionary();var e=t.DTConditionInfoDIC;for(var n in e){var i=e[n];this.DTConditionInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTConstantsInfoPK=function t(){},DTPropRandomPK=function t(){},DTGameInfoStringPK=function t(){},DTMapRandomPK=function t(){},DTConstantInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTConstantsInfoDIC=new PF.Dictionary();var e=t.DTConstantsInfoDIC;for(var n in e){var i=e[n];this.DTConstantsInfoDIC.add(parseInt(n),i);}
this.DTPropRandomDIC=new PF.Dictionary(),e=t.DTPropRandomDIC;for(var n in e){i=e[n],this.DTPropRandomDIC.add(parseInt(n),i);}
this.DTGameInfoStringDIC=new PF.Dictionary(),e=t.DTGameInfoStringDIC;for(var n in e){i=e[n],this.DTGameInfoStringDIC.add(parseInt(n),i);}
this.DTMapRandomDIC=new PF.Dictionary(),e=t.DTMapRandomDIC;for(var n in e){i=e[n],this.DTMapRandomDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTConsumeInfoPK=function t(){},DTConsumeInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTConsumeInfoDIC=new PF.Dictionary();var e=t.DTConsumeInfoDIC;for(var n in e){var i=e[n];this.DTConsumeInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTCurrencyInfoPK=function t(){},DTCurrencyInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTCurrencyInfoDIC=new PF.Dictionary();var e=t.DTCurrencyInfoDIC;for(var n in e){var i=e[n];this.DTCurrencyInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTEffectInfoPK=function t(){},DTEffectInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTEffectInfoDIC=new PF.Dictionary();var e=t.DTEffectInfoDIC;for(var n in e){var i=e[n];this.DTEffectInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTEggAwardInfoPK=function t(){},DTEggAwardInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTEggAwardInfoDIC=new PF.Dictionary();var e=t.DTEggAwardInfoDIC;for(var n in e){var i=e[n];this.DTEggAwardInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTHomeInfoPK=function t(){},DTHomeUpgradeInfoPK=function t(){},DTHomeInfosMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTHomeInfoDIC=new PF.Dictionary();var e=t.DTHomeInfoDIC;for(var n in e){var i=e[n];this.DTHomeInfoDIC.add(parseInt(n),i);}
this.DTHomeUpgradeInfoDIC=new PF.Dictionary(),e=t.DTHomeUpgradeInfoDIC;for(var n in e){i=e[n],this.DTHomeUpgradeInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTLevelGroupInfoPK=function t(){},DTTunnelRandomPK=function t(){},DTLevelGroupInfosMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTLevelGroupInfoDIC=new PF.Dictionary();var e=t.DTLevelGroupInfoDIC;for(var n in e){var i=e[n];this.DTLevelGroupInfoDIC.add(parseInt(n),i);}
this.DTTunnelRandomDIC=new PF.Dictionary(),e=t.DTTunnelRandomDIC;for(var n in e){i=e[n],this.DTTunnelRandomDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTLevelGuangMenInfoPK=function t(){},DTLevelGuangMenInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTLevelGuangMenInfoDIC=new PF.Dictionary();var e=t.DTLevelGuangMenInfoDIC;for(var n in e){var i=e[n];this.DTLevelGuangMenInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTLunpanInfoPK=function t(){},DTLunpanInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTLunpanInfoDIC=new PF.Dictionary();var e=t.DTLunpanInfoDIC;for(var n in e){var i=e[n];this.DTLunpanInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTPayInfoPK=function t(){},DTPayInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTPayInfoDIC=new PF.Dictionary();var e=t.DTPayInfoDIC;for(var n in e){var i=e[n];this.DTPayInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTPlayerInfoPK=function t(){},DTPropValueInfoPK=function t(){},DTHuaBanInfoPK=function t(){},DTPlayerMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTPlayerInfoDIC=new PF.Dictionary();var e=t.DTPlayerInfoDIC;for(var n in e){var i=e[n];this.DTPlayerInfoDIC.add(parseInt(n),i);}
this.DTPropValueInfoDIC=new PF.Dictionary(),e=t.DTPropValueInfoDIC;for(var n in e){i=e[n],this.DTPropValueInfoDIC.add(parseInt(n),i);}
this.DTHuaBanInfoDIC=new PF.Dictionary(),e=t.DTHuaBanInfoDIC;for(var n in e){i=e[n],this.DTHuaBanInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTPlayerPlaneInfoPK=function t(){},DTPlayerPlaneMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTPlayerPlaneInfoDIC=new PF.Dictionary();var e=t.DTPlayerPlaneInfoDIC;for(var n in e){var i=e[n];this.DTPlayerPlaneInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTPropAddInfoPK=function t(){},DTPropAddInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTPropAddInfoDIC=new PF.Dictionary();var e=t.DTPropAddInfoDIC;for(var n in e){var i=e[n];this.DTPropAddInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTPropInfoPK=function t(){},DTPropInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTPropInfoDIC=new PF.Dictionary();var e=t.DTPropInfoDIC;for(var n in e){var i=e[n];this.DTPropInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTRandomAwardInfPK=function t(){},DTRandomAwardInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTRandomAwardInfDIC=new PF.Dictionary();var e=t.DTRandomAwardInfDIC;for(var n in e){var i=e[n];this.DTRandomAwardInfDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTResBundleInfoPK=function t(){},DTResBundleInfosMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTResBundleInfoDIC=new PF.Dictionary();var e=t.DTResBundleInfoDIC;for(var n in e){var i=e[n];this.DTResBundleInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTResPrefabeInfoPK=function t(){},DTResPrefabInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTResPrefabeInfoDIC=new PF.Dictionary();var e=t.DTResPrefabeInfoDIC;for(var n in e){var i=e[n];this.DTResPrefabeInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTSceneInfoPK=function t(){},DTSceneInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTSceneInfoDIC=new PF.Dictionary();var e=t.DTSceneInfoDIC;for(var n in e){var i=e[n];this.DTSceneInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTSevenDayAwardInfoPK=function t(){},DTSevenDayAwardInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTSevenDayAwardInfoDIC=new PF.Dictionary();var e=t.DTSevenDayAwardInfoDIC;for(var n in e){var i=e[n];this.DTSevenDayAwardInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTSoundInfoPK=function t(){},DTSoundInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTSoundInfoDIC=new PF.Dictionary();var e=t.DTSoundInfoDIC;for(var n in e){var i=e[n];this.DTSoundInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTTalentInfoPK=function t(){},DTTalentMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTTalentInfoDIC=new PF.Dictionary();var e=t.DTTalentInfoDIC;for(var n in e){var i=e[n];this.DTTalentInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTTaskAwardInfoPK=function t(){},DTTaskRandomInfoPK=function t(){},DTTaskInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTTaskAwardInfoDIC=new PF.Dictionary();var e=t.DTTaskAwardInfoDIC;for(var n in e){var i=e[n];this.DTTaskAwardInfoDIC.add(parseInt(n),i);}
this.DTTaskRandomInfoDIC=new PF.Dictionary(),e=t.DTTaskRandomInfoDIC;for(var n in e){i=e[n],this.DTTaskRandomInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTTerrainGroupInfoPK=function t(){},DTTerrainGroupInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTTerrainGroupInfoDIC=new PF.Dictionary();var e=t.DTTerrainGroupInfoDIC;for(var n in e){var i=e[n];this.DTTerrainGroupInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTTerrainInfoPK=function t(){},DTTerrainInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTTerrainInfoDIC=new PF.Dictionary();var e=t.DTTerrainInfoDIC;for(var n in e){var i=e[n];this.DTTerrainInfoDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTTerrainObjectPK=function t(){},DTTerrainObjectInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTTerrainObjectDIC=new PF.Dictionary();var e=t.DTTerrainObjectDIC;for(var n in e){var i=e[n];this.DTTerrainObjectDIC.add(parseInt(n),i);}},e;}(PF.Singleton),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),DTUIInterfacePK=function t(){},DTUIWindowPK=function t(){},DTUIBtnEventPK=function t(){},DTUIWindowInfoMGR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.getInstance=function(){return this._inst||(this._inst=new e()),this._inst;},e.prototype.InitData=function(t){this.DTUIInterfaceDIC=new PF.Dictionary();var e=t.DTUIInterfaceDIC;for(var n in e){var i=e[n];this.DTUIInterfaceDIC.add(parseInt(n),i);}
this.DTUIWindowDIC=new PF.Dictionary(),e=t.DTUIWindowDIC;for(var n in e){i=e[n],this.DTUIWindowDIC.add(parseInt(n),i);}
this.DTUIBtnEventDIC=new PF.Dictionary(),e=t.DTUIBtnEventDIC;for(var n in e){i=e[n],this.DTUIBtnEventDIC.add(parseInt(n),i);}},e;}(PF.Singleton),fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btn5588");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqav54ii9b",e;}(fairygui.GButton);t.UI_btn5588=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btn5588");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btn5588);t.UI_btn5588VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnBig5588");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqamg17i9c",e;}(fairygui.GButton);t.UI_btnBig5588=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnBig5588");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnBig5588);t.UI_btnBig5588VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnBlue");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni53",e;}(fairygui.GButton);t.UI_btnBlue=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnBlue2");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqat2jnic5",e;}(fairygui.GButton);t.UI_btnBlue2=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnBlue2");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnBlue2);t.UI_btnBlue2VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnBlue3");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqakfetieq",e;}(fairygui.GButton);t.UI_btnBlue3=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnBlue3");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnBlue3);t.UI_btnBlue3VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnBlue");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnBlue);t.UI_btnBlueVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnDianJi");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni5k",e;}(fairygui.GButton);t.UI_btnDianJi=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnDianJiTiaoGuo");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf95yi6p",e;}(fairygui.GComponent);t.UI_btnDianJiTiaoGuo=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnDianJiTiaoGuo");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnDianJiTiaoGuo);t.UI_btnDianJiTiaoGuoVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnDianJi");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnDianJi);t.UI_btnDianJiVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnfenxiang");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqao8w6ide",e;}(fairygui.GButton);t.UI_btnfenxiang=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnfenxiang");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnfenxiang);t.UI_btnfenxiangVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnGift");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.t_shake=this.getTransition("shake"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqarj3mi9t",e;}(fairygui.GButton);t.UI_btnGift=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnGift");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnGift);t.UI_btnGiftVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnGo1");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni3o",e;}(fairygui.GButton);t.UI_btnGo1=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnGo1");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnGo1);t.UI_btnGo1VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnGo2");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqamq3wi80",e;}(fairygui.GButton);t.UI_btnGo2=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnGo2");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnGo2);t.UI_btnGo2VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnGo3");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.m_lbTimer=this.getChild("lbTimer"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqamq3wi82",e;}(fairygui.GButton);t.UI_btnGo3=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnGo3");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnGo3);t.UI_btnGo3VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnGreen");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqalqd4i2n",e;}(fairygui.GButton);t.UI_btnGreen=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnGreen1");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqabkkmi78",e;}(fairygui.GButton);t.UI_btnGreen1=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnGreen1");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnGreen1);t.UI_btnGreen1VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnGreenSmall");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_texCoin=this.getChild("texCoin"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni3r",e;}(fairygui.GButton);t.UI_btnGreenSmall=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnGreenSmall");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnGreenSmall);t.UI_btnGreenSmallVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnGreen");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnGreen);t.UI_btnGreenVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnGuanBi");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni47",e;}(fairygui.GButton);t.UI_btnGuanBi=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnGuanBi");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnGuanBi);t.UI_btnGuanBiVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnHuaBan");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqamcxgiby",e;}(fairygui.GButton);t.UI_btnHuaBan=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnHuaBan");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnHuaBan);t.UI_btnHuaBanVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnlan");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqayqmdidu",e;}(fairygui.GButton);t.UI_btnlan=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnlan");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnlan);t.UI_btnlanVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnLeft");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni3n",e;}(fairygui.GButton);t.UI_btnLeft=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnLeft");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnLeft);t.UI_btnLeftVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnlvkan");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqasmweiej",e;}(fairygui.GButton);t.UI_btnlvkan=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnlvkan");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnlvkan);t.UI_btnlvkanVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnMianfeijinbi");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqamgy6iep",e;}(fairygui.GButton);t.UI_btnMianfeijinbi=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnMianfeijinbi");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnMianfeijinbi);t.UI_btnMianfeijinbiVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnMoregame");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_texIcon=this.getChild("texIcon"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaoct6i6y",e;}(fairygui.GButton);t.UI_btnMoregame=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnMoregame");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnMoregame);t.UI_btnMoregameVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnRight");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni3m",e;}(fairygui.GButton);t.UI_btnRight=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnRight");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnRight);t.UI_btnRightVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btntuhuang");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.m_icon=this.getChild("icon"),this.m_value=this.getChild("value"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqafamjicc",e;}(fairygui.GButton);t.UI_btntuhuang=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btntuhuang1");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqafs6gid9",e;}(fairygui.GButton);t.UI_btntuhuang1=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btntuhuang1");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btntuhuang1);t.UI_btntuhuang1VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btntuhuangSp");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.m_icon=this.getChild("icon"),this.m_value=this.getChild("value"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqafs6gida",e;}(fairygui.GButton);t.UI_btntuhuangSp=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btntuhuangSp");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btntuhuangSp);t.UI_btntuhuangSpVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btntuhuang");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btntuhuang);t.UI_btntuhuangVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btntuhuangxiao");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_icon=this.getChild("icon"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqasmweiek",e;}(fairygui.GButton);t.UI_btntuhuangxiao=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btntuhuangxiao");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btntuhuangxiao);t.UI_btntuhuangxiaoVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnxhb");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqafamjicm",e;}(fairygui.GButton);t.UI_btnxhb=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnxhb");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnxhb);t.UI_btnxhbVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnXiaoan");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_icon=this.getChild("icon"),this.m_texTips=this.getChild("texTips"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.t_shake=this.getTransition("shake"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni3k",e;}(fairygui.GButton);t.UI_btnXiaoan=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnXiaoan");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnXiaoan);t.UI_btnXiaoanVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnYellow");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqalqd4i2r",e;}(fairygui.GButton);t.UI_btnYellow=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnYellowBig");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni55",e;}(fairygui.GButton);t.UI_btnYellowBig=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnYellowBig");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnYellowBig);t.UI_btnYellowBigVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnYellowSmall");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_texTip=this.getChild("texTip"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.t_shake=this.getTransition("shake"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni3t",e;}(fairygui.GButton);t.UI_btnYellowSmall=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnYellowSmall1");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqapy12i71",e;}(fairygui.GButton);t.UI_btnYellowSmall1=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnYellowSmall1");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnYellowSmall1);t.UI_btnYellowSmall1VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnYellowSmall");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnYellowSmall);t.UI_btnYellowSmallVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnYellow");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnYellow);t.UI_btnYellowVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnZaiLai");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqafzp9i8d",e;}(fairygui.GButton);t.UI_btnZaiLai=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnZaiLai");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnZaiLai);t.UI_btnZaiLaiVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnzhuye");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqao8w6idd",e;}(fairygui.GButton);t.UI_btnzhuye=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnzhuye");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnzhuye);t.UI_btnzhuyeVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnzi1");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.m_title=this.getChild("title"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqafamjice",e;}(fairygui.GButton);t.UI_btnzi1=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnzi1");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnzi1);t.UI_btnzi1VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnzp");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_bg=this.getChild("bg"),this.t_press=this.getTransition("press"),this.t_release=this.getTransition("release"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqafamjicl",e;}(fairygui.GButton);t.UI_btnzp=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","btnzp");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_btnzp);t.UI_btnzpVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","Comfenxiang");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Img_xz=this.getChild("Img_xz"),this.m_Text_shuliang=this.getChild("Text_shuliang"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqao8w6idk",e;}(fairygui.GComponent);t.UI_Comfenxiang=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","Comfenxiang");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_Comfenxiang);t.UI_ComfenxiangVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","Com_fast");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Text_title=this.getChild("Text_title"),this.m_Btn_video=this.getChild("Btn_video"),this.m_Btn_jiage=this.getChild("Btn_jiage"),this.t_ani_one=this.getTransition("ani_one"),this.t_ani_double=this.getTransition("ani_double"),this.onCreate();this.visible=tempFlag;},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqasmweiee",e;}(fairygui.GComponent);t.UI_Com_fast=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","Com_fast");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_Com_fast);t.UI_Com_fastVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","Com_next");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_x=this.getChild("x"),this.m_Text_score=this.getChild("Text_score"),this.m_Img_head=this.getChild("Img_head"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaydc3ie5",e;}(fairygui.GComponent);t.UI_Com_next=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","Com_next");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_Com_next);t.UI_Com_nextVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","Com_tianfu");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_title=this.getChild("title"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqafamjicx",e;}(fairygui.GComponent);t.UI_Com_tianfu=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","Com_tianfu");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_Com_tianfu);t.UI_Com_tianfuVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","daoju");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Btn_guanbi=this.getChild("Btn_guanbi"),this.m_List_qd=this.getChild("List_qd"),this.m_Btn_5588game=this.getChild("Btn_5588game"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni58",e;}(fairygui.GComponent);t.UI_daoju=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","daojulingqu");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Com_icon=this.getChild("Com_icon"),this.m_Btn_gankan=this.getChild("Btn_gankan"),this.m_Text_miaoshu=this.getChild("Text_miaoshu"),this.m_Btn_Share=this.getChild("Btn_Share"),this.m_Btb_5588game=this.getChild("Btb_5588game"),this.m_Btn_ImGain=this.getChild("Btn_ImGain"),this.m_Text_1=this.getChild("Text_1"),this.m_Text_shuliang=this.getChild("Text_shuliang"),this.m_isFenxiang=this.getChild("isFenxiang"),this.m_btnClose=this.getChild("btnClose"),this.t_showTime=this.getTransition("showTime"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqao8w6idg",e;}(fairygui.GComponent);t.UI_daojulingqu=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","daojulingqu");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_daojulingqu);t.UI_daojulingquVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","daoju");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_daoju);t.UI_daojuVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","DialogUI");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Gray=this.getChild("Gray"),this.m_Com_guanggao=this.getChild("Com_guanggao"),this.t_IN=this.getTransition("IN"),this.t_OUT=this.getTransition("OUT"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaekmvi7i",e;}(fairygui.GComponent);t.UI_DialogUI=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","DialogUI");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_DialogUI);t.UI_DialogUIVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","fuhuo");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Text_title=this.getChild("Text_title"),this.m_Btn_guanbi=this.getChild("Btn_guanbi"),this.m_Btn_lan=this.getChild("Btn_lan"),this.m_Btn_huang=this.getChild("Btn_huang"),this.m_jindutiao=this.getChild("jindutiao"),this.m_Text_baifenbi=this.getChild("Text_baifenbi"),this.m_loadingBar=this.getChild("loadingBar"),this.m_Btn_5588game=this.getChild("Btn_5588game"),this.m_isFenxiang=this.getChild("isFenxiang"),this.m_Com_next=this.getChild("Com_next"),this.t_showTime=this.getTransition("showTime"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni4w",e;}(fairygui.GComponent);t.UI_fuhuo=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","fuhuo");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_fuhuo);t.UI_fuhuoVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","gameItem");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg2=this.getChild("bg2"),this.m_texLight=this.getChild("texLight"),this.m_btn_kanshipin=this.getChild("btn_kanshipin"),this.m_icon=this.getChild("icon"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqahudwiec",e;}(fairygui.GComponent);t.UI_gameItem=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","gameItem");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_gameItem);t.UI_gameItemVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","GameUI");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_bg2=this.getChild("bg2"),this.m_bg3=this.getChild("bg3"),this.m_contentTitle=this.getChild("contentTitle"),this.m_contentCoin=this.getChild("contentCoin"),this.m_contentTeach=this.getChild("contentTeach"),this.m_contentScore=this.getChild("contentScore"),this.m_lstProps=this.getChild("lstProps"),this.m_contentRank=this.getChild("contentRank"),this.m_contentBeyound=this.getChild("contentBeyound"),this.m_btn5588=this.getChild("btn5588"),this.m_tianfufadong=this.getChild("tianfufadong"),this.m_Com_watch=this.getChild("Com_watch"),this.m_Com_fast=this.getChild("Com_fast"),this.m_isFenxiang=this.getChild("isFenxiang"),this.t_Ani_Gameflashwhite=this.getTransition("Ani_Gameflashwhite"),this.t_Ani_SuperStartflash=this.getTransition("Ani_SuperStartflash"),this.t_teach_up=this.getTransition("teach_up"),this.t_teach_left=this.getTransition("teach_left"),this.t_teach_right=this.getTransition("teach_right"),this.t_teach_down=this.getTransition("teach_down"),this.t_game_showProp=this.getTransition("game_showProp"),this.t_Ani_SuperStartEndflash=this.getTransition("Ani_SuperStartEndflash"),this.t_Ani_SpeedLine=this.getTransition("Ani_SpeedLine"),this.t_Ani_SpeedLineHide=this.getTransition("Ani_SpeedLineHide"),this.t_tianfufadong=this.getTransition("tianfufadong"),this.t_watch_in=this.getTransition("watch_in"),this.onCreate();this.m_Com_watch.visible=tempFlag;},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqacvkzibf",e;}(fairygui.GComponent);t.UI_GameUI=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","GameUI");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_GameUI);t.UI_GameUIVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","game_defen");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_I=this.getChild("I"),this.m_Text_score=this.getChild("Text_score"),this.m_List_lingqu=this.getChild("List_lingqu"),this.m_Btn_dianji=this.getChild("Btn_dianji"),this.m_Btn_zailai=this.getChild("Btn_zailai"),this.m_CoinPlane=this.getChild("CoinPlane"),this.m_Btn_5588game=this.getChild("Btn_5588game"),this.m_Btn_DoubleCoin=this.getChild("Btn_DoubleCoin"),this.m_Btn_fanhui=this.getChild("Btn_fanhui"),this.m_Btn_fenxiang=this.getChild("Btn_fenxiang"),this.m_Btn_ShareDouble=this.getChild("Btn_ShareDouble"),this.onCreate();this.m_List_lingqu.visible=false;this.m_Btn_dianji.visible=false;this.m_Btn_DoubleCoin.visible=tempFlag;},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaekmvi7j",e;}(fairygui.GComponent);t.UI_game_defen=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","game_defen");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_game_defen);t.UI_game_defenVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","GiftTiShiUI");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_texGuangyun=this.getChild("texGuangyun"),this.m_texHuabanIcon=this.getChild("texHuabanIcon"),this.m_btnSure=this.getChild("btnSure"),this.t_IN=this.getTransition("IN"),this.t_OUT=this.getTransition("OUT"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqai447ic2",e;}(fairygui.GComponent);t.UI_GiftTiShiUI=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","GiftTiShiUI");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_GiftTiShiUI);t.UI_GiftTiShiUIVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","GiftUI");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_contentHuaBan=this.getChild("contentHuaBan"),this.t_IN=this.getTransition("IN"),this.t_OUT=this.getTransition("OUT"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqacvkzibg",e;}(fairygui.GComponent);t.UI_GiftUI=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","GiftUI");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_GiftUI);t.UI_GiftUIVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","Huaban");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_contentFuHuo=this.getChild("contentFuHuo"),this.m_isFenxiang=this.getChild("isFenxiang"),this.t_IN=this.getTransition("IN"),this.t_OUT=this.getTransition("OUT"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqafamjicf",e;}(fairygui.GComponent);t.UI_Huaban=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","huaban2");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_btnHuaBan=this.getChild("btnHuaBan"),this.m_texBg=this.getChild("texBg"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaat3iic0",e;}(fairygui.GComponent);t.UI_huaban2=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","huaban2");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_huaban2);t.UI_huaban2VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","huabangift");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_texLight=this.getChild("texLight"),this.m_btnHuaBan=this.getChild("btnHuaBan"),this.t_zhuan=this.getTransition("zhuan"),this.t_shan=this.getTransition("shan"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqamcxgibx",e;}(fairygui.GComponent);t.UI_huabangift=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","huabangift");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_huabangift);t.UI_huabangiftVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","huabanItem");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_holder=this.getChild("holder"),this.m_holderIcon=this.getChild("holderIcon"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqafs6gid8",e;}(fairygui.GComponent);t.UI_huabanItem=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","huabanItem");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_huabanItem);t.UI_huabanItemVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","huabanPanel");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Text_title=this.getChild("Text_title"),this.m_Text_name=this.getChild("Text_name"),this.m_Text_1=this.getChild("Text_1"),this.m_Text_talent=this.getChild("Text_talent"),this.m_btnGetHuaban=this.getChild("btnGetHuaban"),this.m_btnGetHuaban2=this.getChild("btnGetHuaban2"),this.m_btnShare=this.getChild("btnShare"),this.m_btnClose=this.getChild("btnClose"),this.m_huabanList=this.getChild("huabanList"),this.m_btnUse=this.getChild("btnUse"),this.m_btnUsed=this.getChild("btnUsed"),this.m_selectTip=this.getChild("selectTip"),this.m_selectTipL=this.getChild("selectTipL"),this.m_selectTipR=this.getChild("selectTipR"),this.m_lbTimer=this.getChild("lbTimer"),this.m_btnTry=this.getChild("btnTry"),this.m_btnShareTry=this.getChild("btnShareTry"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqafamjic6",e;}(fairygui.GComponent);t.UI_huabanPanel=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","huabanPanel");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_huabanPanel);t.UI_huabanPanelVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","huabantip");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_unselect=this.getChild("unselect"),this.m_select=this.getChild("select"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaqro6idv",e;}(fairygui.GComponent);t.UI_huabantip=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","huabantip");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_huabantip);t.UI_huabantipVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","Huaban");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_Huaban);t.UI_HuabanVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","HuodeUI");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_contentHuaBan=this.getChild("contentHuaBan"),this.t_IN=this.getTransition("IN"),this.t_OUT=this.getTransition("OUT"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqao8w6idm",e;}(fairygui.GComponent);t.UI_HuodeUI=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","HuodeUI");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_HuodeUI);t.UI_HuodeUIVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","iconBig2");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_texIcon=this.getChild("texIcon"),this.m_texTip=this.getChild("texTip"),this.m_btnCoini=this.getChild("btnCoini"),this.m_lbNum=this.getChild("lbNum"),this.m_btnUse=this.getChild("btnUse"),this.m_btnTry=this.getChild("btnTry"),this.m_btnTrying=this.getChild("btnTrying"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni5b",e;}(fairygui.GComponent);t.UI_iconBig2=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","iconBig2");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_iconBig2);t.UI_iconBig2VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","iconSmall");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_texIcon=this.getChild("texIcon"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni3u",e;}(fairygui.GComponent);t.UI_iconSmall=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","iconSmall");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_iconSmall);t.UI_iconSmallVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","iconTx");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_texHead=this.getChild("texHead"),this.m_texHave=this.getChild("texHave"),this.m_texUnhave=this.getChild("texUnhave"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni4t",e;}(fairygui.GComponent);t.UI_iconTx=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","iconTx");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_iconTx);t.UI_iconTxVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","item1");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_content=this.getChild("content"),this.m_lbTitle=this.getChild("lbTitle"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni59",e;}(fairygui.GComponent);t.UI_item1=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","item1");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_item1);t.UI_item1VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","ItemUi");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_contentDaoJu=this.getChild("contentDaoJu"),this.t_IN=this.getTransition("IN"),this.t_OUT=this.getTransition("OUT"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqacvkzibj",e;}(fairygui.GComponent);t.UI_ItemUi=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","ItemUi");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_ItemUi);t.UI_ItemUiVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","jinbilibao");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Com_icon=this.getChild("Com_icon"),this.m_Com_qian=this.getChild("Com_qian"),this.m_Btn_gankan=this.getChild("Btn_gankan"),this.m_Text_shuliang=this.getChild("Text_shuliang"),this.m_Btn_tiaoguo=this.getChild("Btn_tiaoguo"),this.m_Btb_5588game=this.getChild("Btb_5588game"),this.m_Btn_ImGain=this.getChild("Btn_ImGain"),this.m_Text_shuliang2=this.getChild("Text_shuliang2"),this.m_1=this.getChild("1"),this.m_Text_cishu=this.getChild("Text_cishu"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqamgy6iel",e;}(fairygui.GComponent);t.UI_jinbilibao=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","JinbilibaoUI");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_contentScore=this.getChild("contentScore"),this.t_IN=this.getTransition("IN"),this.t_OUT=this.getTransition("OUT"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqamgy6ien",e;}(fairygui.GComponent);t.UI_JinbilibaoUI=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","JinbilibaoUI");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_JinbilibaoUI);t.UI_JinbilibaoUIVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","jinbilibao");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_jinbilibao);t.UI_jinbilibaoVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","jindutiao");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bar=this.getChild("bar"),this.m_jindutiao1=this.getChild("jindutiao1"),this.m_jindutiao12=this.getChild("jindutiao12"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni4y",e;}(fairygui.GProgressBar);t.UI_jindutiao=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","jindutiao");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_jindutiao);t.UI_jindutiaoVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","kanguangao_1");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Text_title=this.getChild("Text_title"),this.m_Btn_guanbi=this.getChild("Btn_guanbi"),this.m_Text_content=this.getChild("Text_content"),this.m_btn_enter=this.getChild("btn_enter"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqavre9i77",e;}(fairygui.GComponent);t.UI_kanguangao_1=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","kanguangao_1");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_kanguangao_1);t.UI_kanguangao_1VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","levelItem");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_bg2=this.getChild("bg2"),this.m_texIcon=this.getChild("texIcon"),this.m_lstLevelGray=this.getChild("lstLevelGray"),this.m_lstLevel=this.getChild("lstLevel"),this.m_btnUpgrade2=this.getChild("btnUpgrade2"),this.m_btnUpgrade1=this.getChild("btnUpgrade1"),this.m_texCompltetd=this.getChild("texCompltetd"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqabkkmi7h",e;}(fairygui.GComponent);t.UI_levelItem=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","levelItem");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_levelItem);t.UI_levelItemVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","libao");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Btn_guanbi=this.getChild("Btn_guanbi"),this.m_Btn_5588game=this.getChild("Btn_5588game"),this.m_Text_quota=this.getChild("Text_quota"),this.m_Text_name=this.getChild("Text_name"),this.m_Text_number=this.getChild("Text_number"),this.m_lstFriend=this.getChild("lstFriend"),this.m_Btn_friend=this.getChild("Btn_friend"),this.m_texHuaBanIcon=this.getChild("texHuaBanIcon"),this.m_texTalent=this.getChild("texTalent"),this.m_lbTalent=this.getChild("lbTalent"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqamk6aian",e;}(fairygui.GComponent);t.UI_libao=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","libao");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_libao);t.UI_libaoVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","list_moregameChild");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_icon=this.getChild("icon"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqarn02idp",e;}(fairygui.GComponent);t.UI_list_moregameChild=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","list_moregameChild");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_list_moregameChild);t.UI_list_moregameChildVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","lunpan");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Text_title=this.getChild("Text_title"),this.m_Com_qian_1=this.getChild("Com_qian_1"),this.m_Com_qian_2=this.getChild("Com_qian_2"),this.m_Com_lunpan=this.getChild("Com_lunpan"),this.m_ranbg=this.getChild("ranbg"),this.m_go=this.getChild("go"),this.m_Btn_guanbi=this.getChild("Btn_guanbi"),this.m_btn_haoyou=this.getChild("btn_haoyou"),this.m_btn_free=this.getChild("btn_free"),this.m_btn_kan=this.getChild("btn_kan"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqafamjics",e;}(fairygui.GComponent);t.UI_lunpan=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","LunpanUi");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_contentHuaBan=this.getChild("contentHuaBan"),this.t_IN=this.getTransition("IN"),this.t_OUT=this.getTransition("OUT"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqafamjicv",e;}(fairygui.GComponent);t.UI_LunpanUi=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","LunpanUi");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_LunpanUi);t.UI_LunpanUiVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","lunpan");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_lunpan);t.UI_lunpanVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","lv");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_nengliang1=this.getChild("nengliang1"),this.m_nengliang2=this.getChild("nengliang2"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqabkkmi7g",e;}(fairygui.GComponent);t.UI_lv=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","lv");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_lv);t.UI_lvVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","MainUI");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_texTeachKeep=this.getChild("texTeachKeep"),this.m_texBackground=this.getChild("texBackground"),this.m_bg2=this.getChild("bg2"),this.m_btnMoreGame=this.getChild("btnMoreGame"),this.m_btnSign=this.getChild("btnSign"),this.m_contentCoin=this.getChild("contentCoin"),this.m_btnStart=this.getChild("btnStart"),this.m_btnStart1=this.getChild("btnStart1"),this.m_btnStart2=this.getChild("btnStart2"),this.m_btnStart4=this.getChild("btnStart4"),this.m_btnBuild=this.getChild("btnBuild"),this.m_btnGashapon=this.getChild("btnGashapon"),this.m_btnBuyPlayer=this.getChild("btnBuyPlayer"),this.m_btnHuaban=this.getChild("btnHuaban"),this.m_btnTryPlayer=this.getChild("btnTryPlayer"),this.m_btnUpgradePlayer=this.getChild("btnUpgradePlayer"),this.m_btnPrepareToTryPlayer=this.getChild("btnPrepareToTryPlayer"),this.m_lstPlayer=this.getChild("lstPlayer"),this.m_graphPlayerIcon=this.getChild("graphPlayerIcon"),this.m_lstProp=this.getChild("lstProp"),this.m_btnToLeft=this.getChild("btnToLeft"),this.m_btnToRight=this.getChild("btnToRight"),this.m_arrows=this.getChild("arrows"),this.m_contentTeach=this.getChild("contentTeach"),this.m_lstScene=this.getChild("lstScene"),this.m_lbSceneTitle=this.getChild("lbSceneTitle"),this.m_btnUnlock=this.getChild("btnUnlock"),this.m_contnetScene=this.getChild("contnetScene"),this.m_btnGifts=this.getChild("btnGifts"),this.m_btnRank=this.getChild("btnRank");this.m_btnMute=this.getChild("btnMute"),this.m_btnSound=this.getChild("btnSound"),this.m_btnPublicNumber=this.getChild("btnPublicNumber"),this.m_bg3=this.getChild("bg3"),this.m_bg4=this.getChild("bg4"),this.m_bg5=this.getChild("bg5"),this.m_bg6=this.getChild("bg6"),this.m_bg7=this.getChild("bg7"),this.m_bg8=this.getChild("bg8"),this.m_lbBg=this.getChild("lbBg"),this.m_lstUpgrade=this.getChild("lstUpgrade"),this.m_btnCloseUpgrade=this.getChild("btnCloseUpgrade"),this.m_contentLevelup=this.getChild("contentLevelup"),this.m_contentHuaBan=this.getChild("contentHuaBan"),this.m_btn_zp=this.getChild("btn_zp"),this.m_btn_ren=this.getChild("btn_ren"),this.m_Com_tianfu=this.getChild("Com_tianfu"),this.m_btnMoreGame2=this.getChild("btnMoreGame2"),this.m_isFenxiang=this.getChild("isFenxiang"),this.m_list_moregamebg=this.getChild("list_moregamebg"),this.m_list_moregame=this.getChild("list_moregame"),this.m_list_moregameStr=this.getChild("list_moregameStr"),this.m_moreGamePanel=this.getChild("moreGamePanel"),this.m_Btnmianfeijinbi=this.getChild("Btnmianfeijinbi"),this.t_shake=this.getTransition("shake"),this.t_start_shake=this.getTransition("start_shake"),this.t_jianyin=this.getTransition("jianyin"),this.onCreate();this.m_btnRank.visible=false;this.m_contentHuaBan.visible=false;window.mainUI=this;},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqacvkzibk",e;}(fairygui.GComponent);t.UI_MainUI=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","MainUI");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_MainUI);t.UI_MainUIVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","paihang");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Text_title=this.getChild("Text_title"),this.m_btnClose=this.getChild("btnClose"),this.m_lstRank=this.getChild("lstRank"),this.m_contentMyRank=this.getChild("contentMyRank"),this.m_btnXuanYao=this.getChild("btnXuanYao"),this.m_btn5588=this.getChild("btn5588"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni4b",e;}(fairygui.GComponent);t.UI_paihang=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","paihang");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_paihang);t.UI_paihangVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","pauseCom");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Text_mes=this.getChild("Text_mes"),this.m_Btn_5588game=this.getChild("Btn_5588game"),this.m_btn_share=this.getChild("btn_share"),this.m_btn_resume=this.getChild("btn_resume"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaiip0i5r",e;}(fairygui.GComponent);t.UI_pauseCom=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","pauseCom");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_pauseCom);t.UI_pauseComVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","PauseUI");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_contentFuHuo=this.getChild("contentFuHuo"),this.t_IN=this.getTransition("IN"),this.t_OUT=this.getTransition("OUT"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqacvkzibm",e;}(fairygui.GComponent);t.UI_PauseUI=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","PauseUI");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_PauseUI);t.UI_PauseUIVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","playerIconItem");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_texIcon=this.getChild("texIcon"),this.m_holder=this.getChild("holder"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqan76bi85",e;}(fairygui.GComponent);t.UI_playerIconItem=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","playerIconItem");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_playerIconItem);t.UI_playerIconItemVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","propItme");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_texTip=this.getChild("texTip"),this.m_lbTitle=this.getChild("lbTitle"),this.m_texIcon=this.getChild("texIcon"),this.m_btnBuy=this.getChild("btnBuy"),this.m_btnUse=this.getChild("btnUse"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqad795i8i",e;}(fairygui.GComponent);t.UI_propItme=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","propItme");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_propItme);t.UI_propItmeVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","qiandao");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Btn_guanbi=this.getChild("Btn_guanbi"),this.m_List_qd=this.getChild("List_qd"),this.m_Btn_lingqu=this.getChild("Btn_lingqu"),this.m_btn_lingqu2=this.getChild("btn_lingqu2"),this.m_Btn_5588game=this.getChild("Btn_5588game"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni3v",e;}(fairygui.GComponent);t.UI_qiandao=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","qianDaoBiaoQian");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_texIcon=this.getChild("texIcon"),this.m_bg2=this.getChild("bg2"),this.m_texCompleted=this.getChild("texCompleted"),this.m_lbWc=this.getChild("lbWc"),this.m_lbTitle=this.getChild("lbTitle"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni48",e;}(fairygui.GComponent);t.UI_qianDaoBiaoQian=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","qianDaoBiaoQian");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_qianDaoBiaoQian);t.UI_qianDaoBiaoQianVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","QiandaoUI");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_contentQianDao=this.getChild("contentQianDao"),this.t_IN=this.getTransition("IN"),this.t_OUT=this.getTransition("OUT"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqacvkzibn",e;}(fairygui.GComponent);t.UI_QiandaoUI=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","QiandaoUI");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_QiandaoUI);t.UI_QiandaoUIVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","qiandao");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_qiandao);t.UI_qiandaoVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","rankItem1");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_bg2=this.getChild("bg2"),this.m_texRBG=this.getChild("texRBG"),this.m_texHead=this.getChild("texHead"),this.m_lbcore=this.getChild("lbcore"),this.m_lbRank=this.getChild("lbRank"),this.m_lbName=this.getChild("lbName"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqad795i8k",e;}(fairygui.GComponent);t.UI_rankItem1=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","rankItem1");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_rankItem1);t.UI_rankItem1VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","rankItem2");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_bg2=this.getChild("bg2"),this.m_texHead=this.getChild("texHead"),this.m_lbScore=this.getChild("lbScore"),this.m_lbName=this.getChild("lbName"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqad795i8p",e;}(fairygui.GComponent);t.UI_rankItem2=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","rankItem2");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_rankItem2);t.UI_rankItem2VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","rankItem3");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_bg2=this.getChild("bg2"),this.m_texHead=this.getChild("texHead"),this.m_lbName=this.getChild("lbName"),this.m_lbScore=this.getChild("lbScore"),this.m_lbRank=this.getChild("lbRank"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni5i",e;}(fairygui.GComponent);t.UI_rankItem3=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","rankItem3");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_rankItem3);t.UI_rankItem3VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","rankItem4");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_bg2=this.getChild("bg2"),this.m_bg3=this.getChild("bg3"),this.m_texHead=this.getChild("texHead"),this.m_lbRank=this.getChild("lbRank"),this.m_lbName=this.getChild("lbName"),this.m_lbScore=this.getChild("lbScore"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaqqzbi7m",e;}(fairygui.GComponent);t.UI_rankItem4=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","rankItem4");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_rankItem4);t.UI_rankItem4VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","rankItem5");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_bg2=this.getChild("bg2"),this.m_bg3=this.getChild("bg3"),this.m_texHead=this.getChild("texHead"),this.m_lbRank=this.getChild("lbRank"),this.m_lbName=this.getChild("lbName"),this.m_lbScore=this.getChild("lbScore"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni4m",e;}(fairygui.GComponent);t.UI_rankItem5=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","rankItem5");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_rankItem5);t.UI_rankItem5VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","RankUI");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_contentRank=this.getChild("contentRank"),this.t_IN=this.getTransition("IN"),this.t_OUT=this.getTransition("OUT"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqacvkzibo",e;}(fairygui.GComponent);t.UI_RankUI=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","RankUI");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_RankUI);t.UI_RankUIVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","ReviveUI");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_contentFuHuo=this.getChild("contentFuHuo"),this.t_IN=this.getTransition("IN"),this.t_OUT=this.getTransition("OUT"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqacvkzibp",e;}(fairygui.GComponent);t.UI_ReviveUI=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","ReviveUI");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_ReviveUI);t.UI_ReviveUIVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","roll");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_one=this.getChild("one"),this.m_two=this.getChild("two"),this.m_three=this.getChild("three"),this.m_four=this.getChild("four"),this.m_five=this.getChild("five"),this.m_six=this.getChild("six"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqak6rcid2",e;}(fairygui.GComponent);t.UI_roll=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","roll");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_roll);t.UI_rollVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","Scene");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_contentScene=this.getChild("contentScene"),this.t_IN=this.getTransition("IN"),this.t_OUT=this.getTransition("OUT"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqacvkzibq",e;}(fairygui.GComponent);t.UI_Scene=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","sceneItem");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_bg2=this.getChild("bg2"),this.m_texIcon=this.getChild("texIcon"),this.m_texMb=this.getChild("texMb"),this.m_texLock=this.getChild("texLock"),this.m_texCoin=this.getChild("texCoin"),this.m_texBuilding=this.getChild("texBuilding"),this.m_lbCoin=this.getChild("lbCoin"),this.m_contentLock=this.getChild("contentLock"),this.m_lbName=this.getChild("lbName"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqawv3di90",e;}(fairygui.GComponent);t.UI_sceneItem=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","sceneItem");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_sceneItem);t.UI_sceneItemVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","Scene");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_Scene);t.UI_SceneVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","score");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_texCoin=this.getChild("texCoin"),this.m_lbCoin=this.getChild("lbCoin"),this.t_text=this.getTransition("text"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqagtjti8t",e;}(fairygui.GComponent);t.UI_score=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","score1");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_texCoin=this.getChild("texCoin"),this.m_lbCoin=this.getChild("lbCoin"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaf90ni3l",e;}(fairygui.GComponent);t.UI_score1=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","score1");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_score1);t.UI_score1VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","score3");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_texIcon=this.getChild("texIcon"),this.m_lbValue=this.getChild("lbValue"),this.t_icon=this.getTransition("icon"),this.t_dikuang=this.getTransition("dikuang"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqabh1pi75",e;}(fairygui.GComponent);t.UI_score3=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","score3");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_score3);t.UI_score3VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","score4");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_lbScore=this.getChild("lbScore"),this.m_lbMul=this.getChild("lbMul"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqafzp9i8f",e;}(fairygui.GComponent);t.UI_score4=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","score4");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_score4);t.UI_score4VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","scorelp");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_icon=this.getChild("icon"),this.m_lbValue=this.getChild("lbValue"),this.t_icon=this.getTransition("icon"),this.t_dikuang=this.getTransition("dikuang"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqafamjict",e;}(fairygui.GLabel);t.UI_scorelp=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","scorelp");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_scorelp);t.UI_scorelpVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","ScoreUI");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_contentScore=this.getChild("contentScore"),this.m_contentGoToSR=this.getChild("contentGoToSR"),this.m_isFenxiang=this.getChild("isFenxiang"),this.t_IN=this.getTransition("IN"),this.t_OUT=this.getTransition("OUT"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqacvkzibr",e;}(fairygui.GComponent);t.UI_ScoreUI=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","ScoreUI");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_ScoreUI);t.UI_ScoreUIVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","score");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_score);t.UI_scoreVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","SevenDayUI");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_contentDailyGift=this.getChild("contentDailyGift"),this.t_IN=this.getTransition("IN"),this.t_OUT=this.getTransition("OUT"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqacvkzibs",e;}(fairygui.GComponent);t.UI_SevenDayUI=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","SevenDayUI");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_SevenDayUI);t.UI_SevenDayUIVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","tianfufadong");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_desc=this.getChild("desc"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqaqkcfidz",e;}(fairygui.GComponent);t.UI_tianfufadong=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","tianfufadong");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_tianfufadong);t.UI_tianfufadongVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","TimeoutUI");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.m_contentPause=this.getChild("contentPause"),this.t_IN=this.getTransition("IN"),this.t_OUT=this.getTransition("OUT"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqacvkzibt",e;}(fairygui.GComponent);t.UI_TimeoutUI=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","TimeoutUI");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_TimeoutUI);t.UI_TimeoutUIVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","Tips");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Gray=this.getChild("Gray"),this.m_Com_qiandao=this.getChild("Com_qiandao"),this.t_IN=this.getTransition("IN"),this.t_OUT=this.getTransition("OUT"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqahudwie7",e;}(fairygui.GComponent);t.UI_Tips=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","Tips");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_Tips);t.UI_TipsVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","tishi");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Text_title=this.getChild("Text_title"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqahudwie8",e;}(fairygui.GComponent);t.UI_tishi=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","tishi");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_tishi);t.UI_tishiVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","xzchangjing");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_List_scenes=this.getChild("List_scenes"),this.m_Btn_left=this.getChild("Btn_left"),this.m_Btn_right=this.getChild("Btn_right"),this.m_Btn_5588game=this.getChild("Btn_5588game"),this.m_Btn_close=this.getChild("Btn_close"),this.m_Btn_lock=this.getChild("Btn_lock"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqamg17i9e",e;}(fairygui.GComponent);t.UI_xzchangjing=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","xzchangjing");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_xzchangjing);t.UI_xzchangjingVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","zanting");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Text_title=this.getChild("Text_title"),this.m_Text_mes=this.getChild("Text_mes"),this.m_Btn_lan=this.getChild("Btn_lan"),this.m_Btn_huang=this.getChild("Btn_huang"),this.m_Btn_5588game=this.getChild("Btn_5588game"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqabyssi5o",e;}(fairygui.GComponent);t.UI_zanting=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","zanting");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_zanting);t.UI_zantingVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","zhishi");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bg=this.getChild("bg"),this.t_chuo=this.getTransition("chuo"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqav54ii96",e;}(fairygui.GComponent);t.UI_zhishi=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","zhishi");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_zhishi);t.UI_zhishiVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","zhiyin");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.t_Move=this.getTransition("Move"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqai1fpi7w",e;}(fairygui.GComponent);t.UI_zhiyin=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","zhiyin");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_zhiyin);t.UI_zhiyinVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","zhiyin_1");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_hand=this.getChild("hand"),this.t_chuo=this.getTransition("chuo"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqai1fpi7z",e;}(fairygui.GComponent);t.UI_zhiyin_1=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","zhiyin_1");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_zhiyin_1);t.UI_zhiyin_1VO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","zujian_lp");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Img_lp_bg=this.getChild("Img_lp_bg"),this.m_icon=this.getChild("icon"),this.m_title=this.getChild("title"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5fhlcwqak6rcid7",e;}(fairygui.GComponent);t.UI_zujian_lp=e;}(t.Game||(t.Game={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Game","zujian_lp");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Game.UI_zujian_lp);t.UI_zujian_lpVO=e;}(t.Game||(t.Game={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","BannerImg");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_icon=this.getChild("icon"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5buhelmpc5shi2d",e;}(fairygui.GComponent);t.UI_BannerImg=e;}(t.Main||(t.Main={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","BannerImg");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Main.UI_BannerImg);t.UI_BannerImgVO=e;}(t.Main||(t.Main={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","btnhs");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_anniu_1=this.getChild("anniu_1"),this.m_title=this.getChild("title"),this.t_toSmall=this.getTransition("toSmall"),this.t_toNormal=this.getTransition("toNormal"),this.t_tishi=this.getTransition("tishi"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5buhelmpomxpi1y",e;}(fairygui.GButton);t.UI_btnhs=e;}(t.Main||(t.Main={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","btnhs");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Main.UI_btnhs);t.UI_btnhsVO=e;}(t.Main||(t.Main={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","Btn_HS_close");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_anniu_1=this.getChild("anniu_1"),this.t_toSmall=this.getTransition("toSmall"),this.t_toNormal=this.getTransition("toNormal"),this.t_tishi=this.getTransition("tishi"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5buhelmpomxpi20",e;}(fairygui.GButton);t.UI_Btn_HS_close=e;}(t.Main||(t.Main={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","Btn_HS_close");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Main.UI_Btn_HS_close);t.UI_Btn_HS_closeVO=e;}(t.Main||(t.Main={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","Btn_HS_DAN_2");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.c_button=this.getController("button"),this.m_anniu_1=this.getChild("anniu_1"),this.m_title=this.getChild("title"),this.t_toSmall=this.getTransition("toSmall"),this.t_toNormal=this.getTransition("toNormal"),this.t_tishi=this.getTransition("tishi"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5buhelmp10ozi1l",e;}(fairygui.GButton);t.UI_Btn_HS_DAN_2=e;}(t.Main||(t.Main={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","Btn_HS_DAN_2");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Main.UI_Btn_HS_DAN_2);t.UI_Btn_HS_DAN_2VO=e;}(t.Main||(t.Main={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","jindutiao");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_bar=this.getChild("bar"),this.m_jindutiao1=this.getChild("jindutiao1"),this.m_jindutiao12=this.getChild("jindutiao12"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5buhelmp10ozi1i",e;}(fairygui.GProgressBar);t.UI_jindutiao=e;}(t.Main||(t.Main={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","jindutiao");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Main.UI_jindutiao);t.UI_jindutiaoVO=e;}(t.Main||(t.Main={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","kaiping");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_List_game=this.getChild("List_game"),this.m_Img_banner=this.getChild("Img_banner"),this.m_Btn_close=this.getChild("Btn_close"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5buhelmpc9mhi25",e;}(fairygui.GComponent);t.UI_kaiping=e;}(t.Main||(t.Main={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","kaiping");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Main.UI_kaiping);t.UI_kaipingVO=e;}(t.Main||(t.Main={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","List_game");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_Text_name=this.getChild("Text_name"),this.m_Text_message=this.getChild("Text_message"),this.m_icon=this.getChild("icon"),this.m_1=this.getChild("1"),this.m_Text_name2=this.getChild("Text_name2"),this.m_btn_start=this.getChild("btn_start"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5buhelmpomxpi1x",e;}(fairygui.GComponent);t.UI_List_game=e;}(t.Main||(t.Main={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","List_game");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Main.UI_List_game);t.UI_List_gameVO=e;}(t.Main||(t.Main={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","Loading");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_loaderBg=this.getChild("loaderBg"),this.m_iosLogo=this.getChild("iosLogo"),this.m_jindutiao=this.getChild("jindutiao"),this.m_Text_baifenbi=this.getChild("Text_baifenbi"),this.m_loadingBar=this.getChild("loadingBar"),this.m_startGame=this.getChild("startGame"),this.t_XIN=this.getTransition("XIN"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5buhelmp10ozi1e",e;}(fairygui.GComponent);t.UI_Loading=e;}(t.Main||(t.Main={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","Loading");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Main.UI_Loading);t.UI_LoadingVO=e;}(t.Main||(t.Main={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","Logo");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5buhelmpefo0i1p",e;}(fairygui.GComponent);t.UI_Logo=e;}(t.Main||(t.Main={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","Logo");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Main.UI_Logo);t.UI_LogoVO=e;}(t.Main||(t.Main={}));}(fuiVO||(fuiVO={}));var fui,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return t.call(this)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","PfuBanner");},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.m_loader=this.getChild("loader"),this.onCreate();},e.prototype.dispose=function(){this.onDispose(),t.prototype.dispose.call(this);},e.prototype.onDispose=function(){},e.prototype.onCreate=function(){},e.URL="ui://5buhelmpgaaui1o",e;}(fairygui.GComponent);t.UI_PfuBanner=e;}(t.Main||(t.Main={}));}(fui||(fui={}));var fuiVO,__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}();!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.createInstance=function(){return fairygui.UIPackage.createObject("Main","PfuBanner");},e.prototype.onDispose=function(){t.prototype.onDispose.call(this);},e.prototype.onCreate=function(){t.prototype.onCreate.call(this);},e;}(fui.Main.UI_PfuBanner);t.UI_PfuBannerVO=e;}(t.Main||(t.Main={}));}(fuiVO||(fuiVO={}));var __extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_DayUIVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_DayUIVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_DialogUIVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_DialogUIVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_GameUIVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_GameUIVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_GiftTiShiUIVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_GiftTiShiUIVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_GiftUIVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_GiftUIVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_HuabanVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_HuabanVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_HuodeUIVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_HuodeUIVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_kaipingVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Main.UI_kaipingVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_LoadingVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Main.UI_LoadingVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_LogoVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Main.UI_LogoVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_LunpanUiVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_LunpanUiVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_MainUIVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_MainUIVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_NextSevenDayUIVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_NextSevenDayUIVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_PauseUIVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_PauseUIVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_PfuBannerVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Main.UI_PfuBannerVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_QiandaoUIVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_QiandaoUIVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_RankUIVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_RankUIVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_ReviveUIVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_ReviveUIVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_RewardDialogUIVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_RewardDialogUIVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_SceneVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_SceneVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_ScoreUIVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_ScoreUIVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_SevenDayUIVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_SevenDayUIVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_TipsVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_TipsVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_TreasureUIVO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.CreateWindow=function(t){var e=fuiVO.Game.UI_TreasureUIVO.createInstance();e.center(!0),fairygui.GRoot.inst.addChild(e);var n=new t();return n.SetWindow(e),n;},e.prototype.SetWindow=function(e){t.prototype.SetWindow.call(this,e),this._fui=e,this.OnInitWindow();},e.prototype.OnInitWindow=function(){},e;}(PF.FUIWindowBase),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),MyGLoader=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.prototype.onExternalLoadSuccess=function(e){var n=this.url;if(!LayaAirUtils.isLocalNativeFile(n)){var i=LayaAirUtils.GetManifestFilePath(n);if(null!=i&&PfuConfig.GetCdnPath()+i!=e.url)return;}
t.prototype.onExternalLoadSuccess.call(this,e);},e;}(fairygui.GLoader),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_DayUI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickGuard=!1,e;}
return __extends(e,t),e.prototype.OnInitWindow=function(){this._fui.m_Com_meirilibao.m_Btn_gankan.onClick(this,this.__ClickVideoAward),this._fui.m_Com_meirilibao.m_Btn_tiaoguo.onClick(this,this.__ClickSkip),this._fui.m_Com_meirilibao.m_Btn_Share.onClick(this,this.__ClickShare),this._fui.m_Com_meirilibao.m_Btb_5588game.onClick(this,Global.jumpToGameBox),this._fui.m_Com_meirilibao.m_Com_qian.visible=!1;},e.prototype.ReStart=function(){this._fui.m_Com_meirilibao.m_Btn_gankan.visible=1==PfuSdk.GetOLParam("gift"),this._fui.m_Com_meirilibao.m_Btn_Share.visible=!this._fui.m_Com_meirilibao.m_Btn_gankan.visible,this._fui.m_Com_meirilibao.m_Text_shuliang.text="x"+DTConstantInfoMGR.getInstance().DTConstantsInfoDIC.get(1).DTPK_day_reward;},e.GetData=function(){var t=Laya.LocalStorage.getJSON(e.KEY_TODAY);return null!=t&&""!=t?e._saveToday=JSON.parse(t):(e._saveToday=new SaveToDay()).time=0,e._saveToday;},e.IsShowQiandao=function(){var t=e.GetData();if(0!=PfuSdk.GetOLParamInt("gift")){if(1==PfuSdk.GetOLParamInt("gift")&&PfuSdk.GetOLParamInt("ad_video")==PfuSwitch.OFF)return!1;if(0==t.time)return!0;var n=new Date(),i=new Date(n.getFullYear(),n.getMonth(),n.getDate());return t.time<i.getTime();}},e.IsGain=function(){var t=e.GetData(),n=new Date(),i=new Date(n.getFullYear(),n.getMonth(),n.getDate());return t.time>i.getTime();},e.SaveData=function(){UserDataMgr.getInstance().addCurrencyToDic(DTCurrencyPK.DTPK_Gold,DTConstantInfoMGR.getInstance().DTConstantsInfoDIC.get(1).DTPK_day_reward,!0),UserDataMgr.getInstance().SoleSaveCurrencyInfo();var t=new Date(),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=new Date(n.getTime()+864e5);e._saveToday.time=i.getTime(),Laya.LocalStorage.setJSON(e.KEY_TODAY,JSON.stringify(e._saveToday));},e.prototype.__ClickVideoAward=function(t){var e=this;PfuSdk.HideBanner(),Global.showIncentiveAD(this,function(t,n){t==PfuSdk.SUCCESS&&e.VideoAward(),e.VideoAwardRefresh(),Global.StatisticsGiftAwardInfo(n);}),AudioMgr.getInstance().playButtonSound();},e.prototype.VideoAward=function(){e.SaveData(),PF.FUIPopupManager.GetInstance().ClosePopup(this),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_QIANDAO_COMPLETED);},e.prototype.VideoAwardRefresh=function(){PfuSdk.ShowBanner(),this.clickGuard=!1;},e.prototype.__ClickShare=function(t){this.clickGuard||(Global.shareGame(!0,function(){}),AudioMgr.getInstance().playButtonSound());},e.prototype.__ClickSkip=function(t){this.clickGuard||(this.clickGuard=!0,PF.FUIPopupManager.GetInstance().ClosePopup(this),AudioMgr.getInstance().playButtonSound());},e.KEY_TODAY="s_today",e;}(FUIWindow_DayUIVO),SaveToDay=function t(){this.time=0;},__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_DialogUI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.prototype.OnInitWindow=function(){this._fui.m_Com_guanggao.m_btn_enter.onClick(this,this.__clickEnter),this._fui.m_Com_guanggao.m_Btn_guanbi.onClick(this,this.__clickClose);},e.prototype.Init=function(){this._fui.m_Com_guanggao.m_Text_content.text=this.content,this._fui.m_Com_guanggao.m_Text_title.text=this.title;},e.prototype.ReStart=function(){},e.prototype.__clickEnter=function(t){null!=this.enterFun&&this.enterFun(),AudioMgr.getInstance().playButtonSound();},e.prototype.__clickClose=function(t){PF.FUIPopupManager.GetInstance().ClosePopup(this),null!=this.closeFun&&this.closeFun(),AudioMgr.getInstance().playButtonSound();},e;}(FUIWindow_DialogUIVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_GameUI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isTestUseProp=!1,e;}
return __extends(e,t),e.prototype.OnInitWindow=function(){var t=this;PF.NotificationCenter.GetInstance().AddObserver(this,this.Flash,Game.NotifName.UI_GAME_FLASH_WHITE),PF.NotificationCenter.GetInstance().AddObserver(this,this.SuperStartFlash,Game.NotifName.UI_SUPER_START_FLASH_WHITE),PF.NotificationCenter.GetInstance().AddObserver(this,this.SuperStartEndFlash,Game.NotifName.UI_SUPER_STATE_END_FLASH_WHITE),PF.NotificationCenter.GetInstance().AddObserver(this,this.AddGOld,Game.NotifName.UI_GAME_GOLD_ADD),PF.NotificationCenter.GetInstance().AddObserver(this,this.SetScore,Game.NotifName.UI_GAME_SET_SCORE),SceneMatchingUtils.SetAlignTop(this._fui.m_contentCoin),SceneMatchingUtils.SetAlignTop(this._fui.m_contentScore),PF.NotificationCenter.GetInstance().AddObserver(this,this.TeachTip,Game.NotifName.UI_GAME_TEACH),PF.NotificationCenter.GetInstance().AddObserver(this,this.PlayDoubleCoinAnimation,Game.NotifName.UI_DOUBLE_COIN),PF.NotificationCenter.GetInstance().AddObserver(this,this.StopDoubleCoinAnimation,Game.NotifName.UI_DOUBLE_COIN_OVER),PF.NotificationCenter.GetInstance().AddObserver(this,this.RestartGame,Game.NotifName.UI_GAME_START),PF.NotificationCenter.GetInstance().AddObserver(this,function(){t._fui.t_watch_in.playReverse();},"UI_FLY_START"),PF.NotificationCenter.GetInstance().AddObserver(this,function(){t._fui.t_watch_in.play();},"UI_FLY_OFF"),PF.NotificationCenter.GetInstance().AddObserver(this,function(){if(!canHuaban)return;t._fui.t_watch_in.play(),t.updateShareButton2();},"GET_HUABAN_AD"),this._fui.m_Com_watch.onClick(this,this.onWatchClick),Global.InitComShare(this,this._fui.m_isFenxiang);},e.prototype.onWatchClick=function(){if(!canHuaban)return PlatformAPI.showToast("Next Time!");var t=this;GameMgr.ingamePause=!0,PlayerMgr.getInstance().getCurrentPlayerControll().inGamePsuse(),AudioMgr.getInstance().stopGameMusic(),true||WeChatUtils.GetInstance().IsWeGame()?(Global.GetComShareVisible(this._fui.m_isFenxiang)&&Global.shareGame(!0,function(t){}),Global.StatisticsInGameGetHuaban(0),Global.showIncentiveAD(this,function(e,n){canHuaban=false;e==PfuSdk.SUCCESS?(PlayerMgr.getInstance().getCurrentPlayerControll().getHuaban(),Global.StatisticsMovieType(StatisticsEventSite.tryGame),t._fui.t_watch_in.playReverse(),t.tanhuaban(),GameMgr.ingamePause=!1,GameMgr.getInstance().chestpauseToGaming(),Global.StatisticsInGameGetHuaban(2)):e==PfuSdk.VIDEO_SHOW_FAIL?Global.StatisticsInGameGetHuaban(4):Global.StatisticsInGameGetHuaban(1),Global.StatisticsMovieType(StatisticsEventSite.inGame_huaban),Global.StatisticstrialGetHuaban(UserDataMgr.getInstance().getUserInfo().huaBanId,n),AudioMgr.getInstance().playGameMusic(DTSoundIdPK.DTPK_run_bgm);},function(){GameMgr.ingamePause=!1,GameMgr.getInstance().chestpauseToGaming();})):(this._fui.t_watch_in.playReverse(),this.tanhuaban(),PlayerMgr.getInstance().getCurrentPlayerControll().getHuaban(),GameMgr.ingamePause=!1,GameMgr.getInstance().chestpauseToGaming(),AudioMgr.getInstance().playGameMusic(DTSoundIdPK.DTPK_run_bgm));},e.prototype.PlayDoubleCoinAnimation=function(){this._fui.m_contentCoin.t_dikuang.play(null,-1),this._fui.m_contentCoin.t_icon.play(null,-1),this._fui.m_contentCoin.m_texIcon.asLoader.url="subpackage/res/UI/LoaderImage/prop_sb.png";},e.prototype.StopDoubleCoinAnimation=function(){this._fui.m_contentCoin.t_dikuang.stop(),this._fui.m_contentCoin.t_icon.stop(),this._fui.m_contentCoin.m_texIcon.asLoader.url="subpackage/res/UI/LoaderImage/prop_db.png";},e.prototype.ReStart=function(){var t=this;this._fui.m_contentScore.m_lbMul.text="x1",this._fui.m_contentRank.visible=!1,this._fui.m_contentBeyound.visible=!1,this.AddGOld(null),Laya.timer.once(500,this,function(){var e=UserDataMgr.getInstance().getUserInfo().playerId,n=DTPlayerMGR.getInstance().DTPlayerInfoDIC.get(e);if(0!=n.DTPK_talentId){var i=DTTalentMGR.getInstance().DTTalentInfoDIC.get(n.DTPK_talentId);t._fui.m_tianfufadong.m_desc.text=i.DTPK_desc2,t._fui.t_tianfufadong.play(),Laya.timer.once(2250,t,function(){t.tanhuaban();});}else t.tanhuaban();}),this._fui.m_contentCoin.m_texIcon.asLoader.url="subpackage/res/UI/LoaderImage/prop_db.png",this.updateShareButton();},e.prototype.tanhuaban=function(){var t=UserDataMgr.getInstance().getUserInfo().huaBanId,e=DTPlayerMGR.getInstance().DTHuaBanInfoDIC.get(t);if(0!=e.DTPK_talentId){var n=DTTalentMGR.getInstance().DTTalentInfoDIC.get(e.DTPK_talentId);this._fui.m_tianfufadong.m_desc.text=n.DTPK_desc2,this._fui.t_tianfufadong.play();}},e.prototype.RestartGame=function(t){TeachMgr.isInTeach()||(this._fui.t_game_showProp.play(),this.InitListGame());},e.prototype.InitListGame=function(){var t=DTPropInfoMGR.getInstance().DTPropInfoDIC.get(DTPropPK.DTPK_PropPlane);UserDataMgr.getInstance().getPropInfo(t.DTPK_id),ConsumeMgr.getInstance().consumeById(t.DTPK_consume,!1)?this._fui.m_Com_fast.t_ani_double.play():this._fui.m_Com_fast.t_ani_one.play(),this.SetPropIcon(t,!0,this._fui.m_Com_fast);},e.prototype.BtnAd=function(t,e){var n=this;GameMgr.ingamePause=!0,GameMgr.getInstance().gamingToPause(),AudioMgr.getInstance().stopGameMusic(),Global.StatisticsBuyChongci(2),true||WeChatUtils.GetInstance().IsWeGame()?Global.showIncentiveAD(!0,function(e){e==PfuSdk.SUCCESS?(GameMgr.ingamePause=!1,AudioMgr.getInstance().playGameMusic(DTSoundIdPK.DTPK_run_bgm),GameMgr.getInstance().unpauseGame(),n.UseProp(t),Global.StatisticsBuyChongci(4)):Global.StatisticsBuyChongci(3),Global.StatisticsMovieType(StatisticsEventSite.video_cc);},function(){GameMgr.ingamePause=!1,GameMgr.getInstance().unpauseGame();}):(GameMgr.ingamePause=!1,AudioMgr.getInstance().playGameMusic(DTSoundIdPK.DTPK_run_bgm),GameMgr.getInstance().unpauseGame(),this.UseProp(t));},e.prototype.BtnJageOnClick=function(t,e){Global.StatisticsBuyChongci(0),ConsumeMgr.getInstance().consumeById(t.DTPK_consume,!0)&&(UserDataMgr.getInstance().SoleSaveCurrencyInfo(),this.UseProp(t),Global.StatisticsBuyChongci(1),Global.StatisticsBuyCc());},e.prototype.SetPropIcon=function(t,e,n){var i=DTConsumeInfoMGR.getInstance().DTConsumeInfoDIC.get(t.DTPK_consume);n.m_Btn_jiage.m_title.text=i.DTPK_value2.toString(),n.m_Btn_jiage.onClick(this,this.BtnJageOnClick,[t,n]),n.m_Btn_video.onClick(this,this.BtnAd,[t,n]);},e.prototype.UseProp=function(t){switch(t.DTPK_id){case DTPropPK.DTPK_PropPlane:GameMgr.getInstance().UseSuperProp();break;case DTPropPK.DTPK_PropHelmet:BufferMgr.getInstance().buffer(BufferType.shield,1e8);}
this._fui.m_Com_fast.visible=!1;},e.prototype.Flash=function(t){this._fui.t_Ani_Gameflashwhite.play();},e.prototype.SuperStartFlash=function(t){this._fui.t_Ani_SuperStartflash.play();},e.prototype.SuperStartEndFlash=function(t){this._fui.t_Ani_SuperStartEndflash.play();},e.prototype.AddGOld=function(t){this._fui.m_contentCoin.m_lbValue.text=""+t;},e.prototype.SetScore=function(t){this._fui.m_contentScore.m_lbScore.text=""+Math.floor(GameMgr.getInstance().runDistance);},e.prototype.TeachTip=function(t){var e=t;switch(this._fui.m_contentTeach.visible=!0,this._fui.m_contentTeach.t_Move.play(laya.utils.Handler.create(this,function(){}),-1,0),e){case DTGameTeachTypePK.DTPK_Up:this._fui.t_teach_up.play();break;case DTGameTeachTypePK.DTPK_Down:this._fui.t_teach_down.play();break;case DTGameTeachTypePK.DTPK_Left:this._fui.t_teach_left.play();break;case DTGameTeachTypePK.DTPK_Right:this._fui.t_teach_right.play();break;default:this._fui.m_contentTeach.visible=!1;}},e.prototype.updateShareButton=function(){},e.prototype.updateShareButton2=function(){},e;}(FUIWindow_GameUIVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_GiftTiShiUI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.prototype.OnInitWindow=function(){this._fui.m_btnSure.onClick(this,function(){PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_GiftTiShiUI);});},e.prototype.ReStart=function(){},e.prototype.RefreshShareUser=function(){},e.prototype.onShareClick=function(){},e;}(FUIWindow_GiftTiShiUIVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_GiftUI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.prototype.OnInitWindow=function(){var t=DTPlayerMGR.getInstance().DTHuaBanInfoDIC.get(e.huabanID);this._fui.m_contentHuaBan.m_texHuaBanIcon.asLoader.url=t.DTPK_icon2,PF.NotificationCenter.GetInstance().AddObserver(this,this.RefreshShareUser,"GiftUIShareFriend");for(var n=function t(e){i._fui.m_contentHuaBan.m_lstFriend.getChildAt(e).onClick(i,function(){var t=UserDataMgr.getInstance().getHuabanYaoQing();e>=t.count&&(Global.StatisticsUIButtonClick(4),Global.shareGame(!1,function(t){PfuSdk.SUCCESS;}));});},i=this,r=0;r<this._fui.m_contentHuaBan.m_lstFriend.numChildren;r++){n(r);}
this._fui.m_contentHuaBan.m_Btn_friend.onClick(this,this.onShareClick),this._fui.m_contentHuaBan.m_Btn_guanbi.onClick(this,function(){PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_GiftUI),PfuSdk.ShowMoreGameList(),PfuSdk.HideBanner();});},e.prototype.ReStart=function(){this.RefreshShareUser(),PfuSdk.HideMoreGameList(),PfuSdk.ShowBanner();},e.prototype.RefreshShareUser=function(){for(var t=0;t<this._fui.m_contentHuaBan.m_lstFriend.numChildren;t++){e.maxYaoQing-1<t&&(this._fui.m_contentHuaBan.m_lstFriend.getChildAt(t).visible=!1),this._fui.m_contentHuaBan.m_lstFriend.getChildAt(t).m_texHave.visible=!1,this._fui.m_contentHuaBan.m_lstFriend.getChildAt(t).m_texUnhave.visible=!0;}
var n=UserDataMgr.getInstance().getHuabanYaoQing();for(this._fui.m_contentHuaBan.m_Text_number.text=n.count+"/"+e.maxYaoQing,t=0;t<n.count;t++){if(t<6){var i=n.getKeyByIndex(t),r=n.get(i),a=this._fui.m_contentHuaBan.m_lstFriend.getChildAt(t);a.m_texHead.asLoader.url=r.pickUrl,a.m_texHave.visible=!0,a.m_texUnhave.visible=!1;}}
n.count>=e.maxYaoQing&&UserDataMgr.getInstance().getHuaban(e.huabanID).isLocked&&(UserDataMgr.getInstance().addHuaban(e.huabanID,!1),UserDataMgr.getInstance().SoleSaveHuabanInfo(),PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_GiftTiShiUI),PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_GiftUI),Global.StatisticsUIButtonClick(5));},e.prototype.onShareClick=function(){Global.shareGame(!1,function(t){PfuSdk.SUCCESS;}),Global.StatisticsUIButtonClick(4);},e.huabanID=2,e.maxYaoQing=1,e;}(FUIWindow_GiftUIVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_Huaban=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.huabanIds=[],e.skeletonDic=new PF.Dictionary(),e;}
return __extends(e,t),e.prototype.OnInitWindow=function(){this._fui.m_contentFuHuo.m_btnClose.onClick(this,function(){PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_Huaban),PfuSdk.ShowMoreGameList(),PfuSdk.HideBanner();}),this._fui.m_contentFuHuo.m_btnShare.onClick(this,this.onShareClick),this._fui.m_contentFuHuo.m_btnTry.onClick(this,this.onTryClick),this._fui.m_contentFuHuo.m_btnGetHuaban.onClick(this,this.onGetHuabanClick),this._fui.m_contentFuHuo.m_btnGetHuaban2.onClick(this,function(){}),this._fui.m_contentFuHuo.m_btnUse.onClick(this,this.onUseHuabanClick),this._fui.m_contentFuHuo.m_btnUsed.onClick(this,function(){}),this._fui.m_contentFuHuo.m_btnShareTry.onClick(this,this.onShareTryClick),this.InitHuabanIds();this._fui.m_contentFuHuo.m_btnTry.visible=tempFlag;},e.prototype.ReStart=function(){this.Init(),Laya.timer.frameLoop(1,this,this.UpdateTryTimeRoutine),Global.InitComShare(this,this._fui.m_isFenxiang),this._fui.m_isFenxiang.visible=!1,this.OnMoveEnd(),PfuSdk.HideMoreGameList(),PfuSdk.ShowBanner();},e.prototype.Init=function(){this._fui.m_contentFuHuo.m_huabanList.setVirtualAndLoop(),this._fui.m_contentFuHuo.m_huabanList.itemRenderer=laya.utils.Handler.create(this,this.RenderListItem,null,!1),this._fui.m_contentFuHuo.m_huabanList.numItems=this.huabanIds.length,this._fui.m_contentFuHuo.m_huabanList.on(fairygui.Events.SCROLL,this,this.doSpecialEffect),this._fui.m_contentFuHuo.m_huabanList.on(fairygui.Events.SCROLL_END,this,this.OnMoveEnd),this.doSpecialEffect();},e.prototype.InitHuabanIds=function(){for(var t=DTPlayerMGR.getInstance().DTHuaBanInfoDIC,e=[],n=0;n<t.count;n++){var i=t.getKeyByIndex(n),r=t.get(i);e.push(r);}
for(e.sort(function(t,e){return t.DTPK_listSort>e.DTPK_listSort?1:-1;}),n=0;n<e.length;n++){this.huabanIds.push(e[n].DTPK_id);}},e.prototype.Dispose=function(){t.prototype.Dispose.call(this),Laya.timer.clearAll(this);},e.prototype.OnMoveEnd=function(){this.currentIndex=(this._fui.m_contentFuHuo.m_huabanList.getFirstChildInView()+1)%this._fui.m_contentFuHuo.m_huabanList.numItems,this.SMoveGrade=!1,this.setupButtonVisiable1(),this.setupHuabanInfo(),this.setupLRTipVisiable(),this.updateShareButton();},e.prototype.doSpecialEffect=function(){for(var t=this._fui.m_contentFuHuo.m_huabanList.scrollPane.posX+this._fui.m_contentFuHuo.m_huabanList.viewWidth/2,e=this._fui.m_contentFuHuo.m_huabanList.numChildren,n=0;n<e;n++){var i=this._fui.m_contentFuHuo.m_huabanList.getChildAt(n),r=Math.abs(t-i.x-i.width/2);if(r>i.width)i.setScale(.65,.65);else{var a=.65+.25*(1-r/i.width);i.setScale(a,a);}}
this._fui.m_contentFuHuo.m_selectTip.visible=!1,this._fui.m_contentFuHuo.m_selectTipL.visible=!1,this._fui.m_contentFuHuo.m_selectTipR.visible=!1;},e.prototype.setupLRTipVisiable=function(){var t=this.currentIndex-1,e=this.currentIndex+1;0==this.currentIndex&&(t=this.huabanIds.length-1),this.currentIndex==this.huabanIds.length-1&&(e=0);var n=UserDataMgr.getInstance().getUserInfo().huaBanId,i=UserDataMgr.getInstance().getHuaban(this.huabanIds[t]),r=UserDataMgr.getInstance().getHuaban(this.huabanIds[e]);n==this.huabanIds[t]?(this._fui.m_contentFuHuo.m_selectTipL.visible=!0,this._fui.m_contentFuHuo.m_selectTipL.m_select.visible=!0,this._fui.m_contentFuHuo.m_selectTipL.m_unselect.visible=!1):(this._fui.m_contentFuHuo.m_selectTipL.visible=!i.isLocked,this._fui.m_contentFuHuo.m_selectTipL.m_select.visible=!1,this._fui.m_contentFuHuo.m_selectTipL.m_unselect.visible=!0),n==this.huabanIds[e]?(this._fui.m_contentFuHuo.m_selectTipR.visible=!0,this._fui.m_contentFuHuo.m_selectTipR.m_select.visible=!0,this._fui.m_contentFuHuo.m_selectTipR.m_unselect.visible=!1):(this._fui.m_contentFuHuo.m_selectTipR.visible=!r.isLocked,this._fui.m_contentFuHuo.m_selectTipR.m_select.visible=!1,this._fui.m_contentFuHuo.m_selectTipR.m_unselect.visible=!0);},e.prototype.RenderListItem=function(t,e){var n=e.asCom,i=DTPlayerMGR.getInstance().DTHuaBanInfoDIC.get(this.huabanIds[t]);n.m_holderIcon.asLoader.url=i.DTPK_icon;},e.prototype.UpdateTryTimeRoutine=function(){var t=this.huabanIds[this.currentIndex];if(this._fui.m_contentFuHuo.m_lbTimer.text="the remaining time"+PF.BXStringUtils.FormatTimeByMMSS(Global.getHuabanDemoTimeSecondInfo(t)),0==Global.getHuabanDemoTimeSecondInfo(t)){var e=UserDataMgr.getInstance().getUserInfo().huaBanId,n=Global.getHuabanDemoTimeSecondInfo(e);UserDataMgr.getInstance().getHuaban(e).isLocked&&0==n&&(UserDataMgr.getInstance().getUserInfo().huaBanId=1,UserDataMgr.getInstance().SoleSaveUserInfo()),this.setupButtonVisiable1();}},e.prototype.setupButtonVisiable1=function(){var t=Global.getHuabanDemoTimeSecondInfo(this.huabanIds[this.currentIndex]),e=UserDataMgr.getInstance().getHuaban(this.huabanIds[this.currentIndex]),n=UserDataMgr.getInstance().getUserInfo().huaBanId;if(e.isLocked){if(0!=t)this._fui.m_contentFuHuo.m_btnUsed.visible=!0,this._fui.m_contentFuHuo.m_btnUse.visible=!1,this._fui.m_contentFuHuo.m_btnGetHuaban.visible=!1,this._fui.m_contentFuHuo.m_btnGetHuaban2.visible=!1,this._fui.m_contentFuHuo.m_btnTry.visible=tempFlag&&!1,this._fui.m_contentFuHuo.m_lbTimer.visible=!0,this._fui.m_contentFuHuo.m_btnShare.visible=!1,n!=e.id?(this._fui.m_contentFuHuo.m_btnUsed.visible=!1,this._fui.m_contentFuHuo.m_btnUse.visible=!0,this._fui.m_contentFuHuo.m_selectTip.visible=!1):(this._fui.m_contentFuHuo.m_selectTip.visible=!0,this._fui.m_contentFuHuo.m_selectTip.m_select.visible=!0,this._fui.m_contentFuHuo.m_selectTip.m_unselect.visible=!1);else{this._fui.m_contentFuHuo.m_btnTry.visible=tempFlag&&!0,this._fui.m_contentFuHuo.m_lbTimer.visible=!1,this._fui.m_contentFuHuo.m_btnUsed.visible=!1,this._fui.m_contentFuHuo.m_btnUse.visible=!1,this._fui.m_contentFuHuo.m_btnShare.visible=!1,this._fui.m_contentFuHuo.m_selectTip.visible=!1;var i=DTPlayerMGR.getInstance().DTHuaBanInfoDIC.get(e.id),r=DTConsumeInfoMGR.getInstance().DTConsumeInfoDIC.get(i.DTPK_buyConsumeId);if(1==r.DTPK_type)this._fui.m_contentFuHuo.m_btnGetHuaban.visible=!0,this._fui.m_contentFuHuo.m_btnGetHuaban2.visible=!1,this._fui.m_contentFuHuo.m_btnUse.visible=!1,this._fui.m_contentFuHuo.m_btnUsed.visible=!1,this._fui.m_contentFuHuo.m_btnGetHuaban.m_value.text=r.DTPK_value2+"";else if(2==r.DTPK_type){var a=UserDataMgr.getInstance().getCurrencyInfo(DTCurrencyPK.DTPK_Diamond);a>=r.DTPK_value2?(this._fui.m_contentFuHuo.m_btnGetHuaban.visible=!1,this._fui.m_contentFuHuo.m_btnGetHuaban2.visible=!1,this._fui.m_contentFuHuo.m_btnUse.visible=!0,this._fui.m_contentFuHuo.m_btnUsed.visible=!1,UserDataMgr.getInstance().addHuaban(this.huabanIds[this.currentIndex],!1),UserDataMgr.getInstance().SoleSaveHuabanInfo()):(this._fui.m_contentFuHuo.m_btnGetHuaban.visible=!1,this._fui.m_contentFuHuo.m_btnGetHuaban2.visible=!0,this._fui.m_contentFuHuo.m_btnUse.visible=!1,this._fui.m_contentFuHuo.m_btnUsed.visible=!1,this._fui.m_contentFuHuo.m_btnGetHuaban2.m_value.text=a+" / "+r.DTPK_value2);}}}else e.id==n?(this._fui.m_contentFuHuo.m_btnGetHuaban.visible=!1,this._fui.m_contentFuHuo.m_btnGetHuaban2.visible=!1,this._fui.m_contentFuHuo.m_btnUse.visible=!1,this._fui.m_contentFuHuo.m_btnUsed.visible=!0,this._fui.m_contentFuHuo.m_btnTry.visible=tempFlag&&!1,this._fui.m_contentFuHuo.m_lbTimer.visible=!1,this._fui.m_contentFuHuo.m_selectTip.visible=!0,this._fui.m_contentFuHuo.m_selectTip.m_select.visible=!0,this._fui.m_contentFuHuo.m_selectTip.m_unselect.visible=!1):(this._fui.m_contentFuHuo.m_btnGetHuaban.visible=!1,this._fui.m_contentFuHuo.m_btnGetHuaban2.visible=!1,this._fui.m_contentFuHuo.m_btnUse.visible=!0,this._fui.m_contentFuHuo.m_btnUsed.visible=!1,this._fui.m_contentFuHuo.m_btnTry.visible=tempFlag&&!1,this._fui.m_contentFuHuo.m_lbTimer.visible=!1,this._fui.m_contentFuHuo.m_selectTip.visible=!0,this._fui.m_contentFuHuo.m_selectTip.m_select.visible=!1,this._fui.m_contentFuHuo.m_selectTip.m_unselect.visible=!0),this._fui.m_contentFuHuo.m_btnShare.visible=!1;},e.prototype.setupHuabanInfo=function(){var t=DTPlayerMGR.getInstance().DTHuaBanInfoDIC.get(this.huabanIds[this.currentIndex]);if(this._fui.m_contentFuHuo.m_Text_name.text=t.DTPK_name,0!=t.DTPK_talentId){var e=DTTalentMGR.getInstance().DTTalentInfoDIC.get(t.DTPK_talentId);this._fui.m_contentFuHuo.m_Text_talent.text=e.DTPK_desc;}else this._fui.m_contentFuHuo.m_Text_talent.text="A normal skateboard";},e.prototype.onGetHuabanClick=function(t){UserDataMgr.getInstance().getHuaban(this.huabanIds[this.currentIndex]);var e=DTPlayerMGR.getInstance().DTHuaBanInfoDIC.get(this.huabanIds[this.currentIndex]),n=DTConsumeInfoMGR.getInstance().DTConsumeInfoDIC.get(e.DTPK_buyConsumeId),i=UserDataMgr.getInstance().getCurrencyInfo(DTCurrencyPK.DTPK_Gold);i>=n.DTPK_value2?(UserDataMgr.getInstance().setCurrencyInfo(DTCurrencyPK.DTPK_Gold,i-n.DTPK_value2),UserDataMgr.getInstance().SoleSaveCurrencyInfo(),UserDataMgr.getInstance().addHuaban(this.huabanIds[this.currentIndex],!1),UserDataMgr.getInstance().SoleSaveHuabanInfo(),Global.StatisticstrialBuyHuaban(this.huabanIds[this.currentIndex],-1),this.OnMoveEnd(),Global.StatisticsBuyHuaban(this.huabanIds[this.currentIndex])):Global.showGameDialog("Gold inadequate",function(){PF.FUIPopupManager.GetInstance().ClosePopupTop();},null,"Prompt "),AudioMgr.getInstance().playButtonSound();},e.prototype.onUseHuabanClick=function(){UserDataMgr.getInstance().getUserInfo().huaBanId=this.huabanIds[this.currentIndex],UserDataMgr.getInstance().SoleSaveUserInfo(),this.OnMoveEnd();},e.prototype.onShareClick=function(t){Global.shareGame(!1,function(){}),AudioMgr.getInstance().playButtonSound();},e.prototype.onShareTryClick=function(){var t=this,e=UserDataMgr.getInstance().getHuaban(this.huabanIds[this.currentIndex]);if(0!=e.isLocked){var n=Global.getHuabanDemoTimeSecondInfo(this.huabanIds[this.currentIndex]),i=UserDataMgr.getInstance().getUserInfo().huaBanId;0<n&&e.id==i?Global.showGameDialog("Skateboard is in trial ",function(){PF.FUIPopupManager.GetInstance().ClosePopupTop();},null,"Prompt "):(WeChatUtils.GetInstance().IsWeGame()?(Global.StatisticsTryHuaban2(0),Global.ShareWith2Second(this,function(e){e==PfuSdk.SUCCESS?(UserDataMgr.getInstance().getUserInfo().huaBanId=t.huabanIds[t.currentIndex],UserDataMgr.getInstance().SoleSaveUserInfo(),Global.setHuabanTryState(t.huabanIds[t.currentIndex],60*PfuSdk.GetOLParamInt("tryplayertime")),Global.StatisticsMovieType(StatisticsEventSite.tryGame),t.OnMoveEnd(),Global.StatisticsTryHuaban(t.huabanIds[t.currentIndex]),Global.StatisticsTryHuaban2(2)):Global.showGameDialog("Please share to the group!",function(){PF.FUIPopupManager.GetInstance().ClosePopupTop();},function(){},"");})):(UserDataMgr.getInstance().getUserInfo().huaBanId=this.huabanIds[this.currentIndex],UserDataMgr.getInstance().SoleSaveUserInfo(),Global.setHuabanTryState(this.huabanIds[this.currentIndex],60*PfuSdk.GetOLParamInt("tryplayertime")),this.OnMoveEnd()),AudioMgr.getInstance().playButtonSound());}else Global.showGameDialog("Already have the skateboard, you can use it directly",function(){PF.FUIPopupManager.GetInstance().ClosePopupTop();},null,"Prompt ");},e.prototype.onTryClick=function(t){var e=this,n=UserDataMgr.getInstance().getHuaban(this.huabanIds[this.currentIndex]);if(0!=n.isLocked){var i=Global.getHuabanDemoTimeSecondInfo(this.huabanIds[this.currentIndex]),r=UserDataMgr.getInstance().getUserInfo().huaBanId;0<i&&n.id==r?Global.showGameDialog("Skateboard is in trial ",function(){PF.FUIPopupManager.GetInstance().ClosePopupTop();},null,"Prompt "):(true||WeChatUtils.GetInstance().IsWeGame()?(FUIWindow_MainUI.CUR_SHOW_BANNER_AD&&BannerUpdateMgr.getInstance().hideBannerAD(),Global.GetComShareVisible(this._fui.m_isFenxiang)&&(Global.StatisticsTryHuaban2(3),Global.shareGame(!0,function(t){})),Global.StatisticsTryHuaban2(0),Global.showIncentiveAD(this,function(t,n){t==PfuSdk.SUCCESS?(Game.Constant.inSelectSceneType=1,UserDataMgr.getInstance().getUserInfo().huaBanId=e.huabanIds[e.currentIndex],UserDataMgr.getInstance().SoleSaveUserInfo(),Global.setHuabanTryState(e.huabanIds[e.currentIndex],60*PfuSdk.GetOLParamInt("tryplayertime")),Global.StatisticsMovieType(StatisticsEventSite.tryGame),e.OnMoveEnd(),Global.StatisticsTryHuaban(e.huabanIds[e.currentIndex]),Global.StatisticsTryHuaban2(2)):t==PfuSdk.VIDEO_SHOW_FAIL?Global.StatisticsTryHuaban2(4):Global.StatisticsTryHuaban2(1),Global.StatisticsMovieType(StatisticsEventSite.tryHuaban),Global.StatisticstrialHuabanInfo(e.huabanIds[e.currentIndex],n),FUIWindow_MainUI.CUR_SHOW_BANNER_AD&&BannerUpdateMgr.getInstance().showBannerAD();})):(UserDataMgr.getInstance().getUserInfo().huaBanId=this.huabanIds[this.currentIndex],UserDataMgr.getInstance().SoleSaveUserInfo(),Global.setHuabanTryState(this.huabanIds[this.currentIndex],60*PfuSdk.GetOLParamInt("tryplayertime")),FUIWindow_MainUI.CUR_SHOW_BANNER_AD&&BannerUpdateMgr.getInstance().showBannerAD(),this.OnMoveEnd()),AudioMgr.getInstance().playButtonSound());}else Global.showGameDialog("Already have the skateboard, you can use it directly",function(){PF.FUIPopupManager.GetInstance().ClosePopupTop();},null,"Prompt ");},e.prototype.updateShareButton=function(){},e;}(FUIWindow_HuabanVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_HuodeUI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.guard=!1,e;}
return __extends(e,t),e.prototype.OnInitWindow=function(){var t=this;this._fui.m_contentHuaBan.m_btnClose.onClick(this,function(){t.addDefaultBuff(),PF.FUIPopupManager.GetInstance().ClosePopup(t),GameMgr.ingamePause=!1,GameMgr.getInstance().chestpauseToGaming();}),this._fui.m_contentHuaBan.m_Btn_gankan.onClick(this,this.onVideoClick),this._fui.m_contentHuaBan.m_Btn_Share.onClick(this,function(){t.guard||Global.shareGame(!0,function(t){});});this._fui.m_contentHuaBan.m_Btn_Share.visible=false;if(!tempFlag){this._fui.visible=false;setTimeout(()=>{this.onVideoClick();},100);}},e.prototype.ReStart=function(){Global.InitComShare(this,this._fui.m_contentHuaBan.m_isFenxiang),this._fui.m_contentHuaBan.m_isFenxiang.visible=!1,GameMgr.ingamePause=!0;},e.prototype.addDefaultBuff=function(){this.eventType==DTBIEventTypePK.DTPK_Prop_Helmet?BufferMgr.getInstance().buffer(BufferType.shield):this.eventType==DTBIEventTypePK.DTPK_Prop_Magnet?BufferMgr.getInstance().buffer(BufferType.magnet):this.eventType==DTBIEventTypePK.DTPK_Prop_Plane?BufferMgr.getInstance().buffer(BufferType.flight):this.eventType==DTBIEventTypePK.DTPK_Prop_Double&&BufferMgr.getInstance().buffer(BufferType.doubleCoin);},e.prototype.Init=function(t){this.eventType=t;var e=DTPropAddInfoMGR.getInstance().DTPropAddInfoDIC.get(this.eventType);this._fui.m_contentHuaBan.m_Text_miaoshu.text=e.DTPK_nextDesc,this._fui.m_contentHuaBan.m_Text_shuliang.text=e.DTPK_nextName,this._fui.m_contentHuaBan.m_Com_icon.asLoader.url=e.DTPK_nextIcon;},e.prototype.onVideoClick=function(){var t=this;if(true||WeChatUtils.GetInstance().IsWeGame())Global.GetComShareVisible(this._fui.m_contentHuaBan.m_isFenxiang)&&Global.shareGame(!0,function(t){}),FUIWindow_MainUI.CUR_SHOW_BANNER_AD&&BannerUpdateMgr.getInstance().hideBannerAD(),AudioMgr.getInstance().stopGameMusic(),Global.showIncentiveAD(this,function(e,n){if(e==PfuSdk.SUCCESS){GameMgr.getInstance().m_gameVideoCount++;var i=DTPropAddInfoMGR.getInstance().DTPropAddInfoDIC.get(t.eventType);BufferMgr.getInstance().buffer(i.DTPK_next),t.addDefaultBuff(),PF.FUIPopupManager.GetInstance().ClosePopup(t),GameMgr.ingamePause=!1,GameMgr.getInstance().chestpauseToGaming(),Global.StatisticsMovieType(StatisticsEventSite.fuhuo);}
t.guard=!1,FUIWindow_MainUI.CUR_SHOW_BANNER_AD&&BannerUpdateMgr.getInstance().showBannerAD(),Global.StatisticsReviveInfo(n),AudioMgr.getInstance().playGameMusic(DTSoundIdPK.DTPK_run_bgm);},function(){});else{var e=DTPropAddInfoMGR.getInstance().DTPropAddInfoDIC.get(this.eventType);BufferMgr.getInstance().buffer(e.DTPK_next),PF.FUIPopupManager.GetInstance().ClosePopup(this),GameMgr.ingamePause=!1,GameMgr.getInstance().chestpauseToGaming(),this.guard=!1,this.addDefaultBuff(),AudioMgr.getInstance().playGameMusic(DTSoundIdPK.DTPK_run_bgm);}},e;}(FUIWindow_HuodeUIVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_kaiping=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bannerGame=new Array(),e;}
return __extends(e,t),e.prototype.OnInitWindow=function(){this._fui.m_Btn_close.onClick(this,this.OnClickClose);for(var t=PfuBoxList.GetInstance().GetAdverts(),e=0;e<t.length;e++){var n=t[e];n.bannerlink&&""!=n.bannerlink&&this._bannerGame.push(n);}
for(e=0;e<this._bannerGame.length;e++){(i=this._fui.m_Img_banner.addItemFromPool(fui.Main.UI_BannerImg.URL)).m_icon.icon=this._bannerGame[e].bannerlink,i.onClick(this,this.OnClickItem,[this._bannerGame[e]]);}
for(e=0;e<t.length;e++){var i=this._fui.m_List_game.addItemFromPool(fui.Main.UI_List_game.URL),r=t[e];i.m_icon.icon=r.link,i.m_Text_name.text=r.gameName,i.m_Text_message.text=r.desc;var a=(0==e?30:0)+2*(t.length-e),o=(0==e?30:10)+8*(t.length-e);i.m_Text_name2.text=PF.BXRandom.Get().nextInt(a,o)+"万",i.m_btn_start.onClick(this,this.OnClickItem,[r]);}},e.prototype.OnClickClose=function(t){PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_kaiping),LayaAir3D.CreateBanner();},e.prototype.OnClickItem=function(t,e){if(t.wechatGameid!=PfuConfig.Config.weChatId){var n="pages/fromGame/singer?pfukey="+t.wechatGameid;WeChatUtils.GetInstance().NavigateToMiniProgram(this,function(){},Global.gameBoxId,n);}else this.OnClickClose(null);},e.prototype.Init=function(){},e.prototype.ReStart=function(){},e;}(FUIWindow_kaipingVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_Loading=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progress=0,e.SCREEN_HEIGHT=1334,e.SCREEN_WIDTH=750,e._isClickLoadGame=!1,e;}
return __extends(e,t),e.prototype.OnInitWindow=function(){PF.NotificationCenter.GetInstance().AddObserver(this,this.AddProgress,Game.NotifName.UI_LOADING_PROGRESS),PF.NotificationCenter.GetInstance().AddObserver(this,this.ShowStart,Game.NotifName.UI_SHOW_START),this._fui.m_startGame.visible=!1,this._fui.m_loadingBar.visible=!0;},e.prototype.Awake=function(){this._fui.m_loaderBg.icon=Game.Constant.UI_LOCAL_SPECIAL+"/loaderImg/fengmian.jpg",this._fui.m_iosLogo.icon=Game.Constant.UI_LOCAL_SPECIAL+"/loaderImg/LOGO.png",this.SetupCoverImageSize();},e.prototype.ReStart=function(){this.progress=0,this._fui.m_jindutiao.value=this.progress,this._fui.m_Text_baifenbi.text=this.progress+"%";},e.prototype.SetupCoverImageSize=function(){fairygui.GRoot.inst.width,fairygui.GRoot.inst.height;var t=Laya.stage.width,e=Laya.stage.height,n=this.SCREEN_HEIGHT/this.SCREEN_WIDTH,i=e/t,r=1.2+Math.abs(n-i);this._fui.m_loaderBg.setSize(this.SCREEN_WIDTH*r,this.SCREEN_HEIGHT*r);},e.prototype.AddProgress=function(t){var e=this._fui.m_jindutiao.value,n=t,i=.01*(n-e),r=e;this._fui.m_jindutiao.value=r,Laya.Tween.to(this._fui.m_jindutiao,{value:n},2e3*i).update=Laya.Handler.create(this,function(){this._fui.m_Text_baifenbi.text=Math.floor(this._fui.m_jindutiao.value)+"%";},null,!1);},e.prototype.ShowStart=function(t){},e.prototype.__clickItem=function(t){this._isClickLoadGame||(this._fui.m_startGame.visible=!1,this._isClickLoadGame=!0,this._fui.m_loadingBar.visible=!0,LoadScene.GetInstance().StartLoadGame());},e;}(FUIWindow_LoadingVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_Logo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.prototype.OnInitWindow=function(){},e.prototype.ReStart=function(){Laya.timer.once(500,this,function(){e.logoFinish=!0,PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_LogoUI);});},e.logoFinish=!1,e;}(FUIWindow_LogoVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_LunpanUi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gifts=[],e.angle=0,e.lunpaiItems=[],e.drawGuard=!1,e;}
return __extends(e,t),e.prototype.OnInitWindow=function(){this._fui.m_contentHuaBan.m_Btn_guanbi.onClick(this,function(){PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_LunpanUi);}),this.Init();},e.prototype.Init=function(){this.gifts=[],this.lunpaiItems=[];for(var t=DTLunpanInfoMGR.getInstance().DTLunpanInfoDIC,e=0;e<t.count;e++){var n=t.getKeyByIndex(e);this.gifts.push(t.get(n));}
for(this.lunpaiItems.push(this._fui.m_contentHuaBan.m_Com_lunpan.m_one),this.lunpaiItems.push(this._fui.m_contentHuaBan.m_Com_lunpan.m_two),this.lunpaiItems.push(this._fui.m_contentHuaBan.m_Com_lunpan.m_three),this.lunpaiItems.push(this._fui.m_contentHuaBan.m_Com_lunpan.m_four),this.lunpaiItems.push(this._fui.m_contentHuaBan.m_Com_lunpan.m_five),this.lunpaiItems.push(this._fui.m_contentHuaBan.m_Com_lunpan.m_six),e=0;e<this.gifts.length;e++){this.lunpaiItems[e].m_Img_lp_bg.url=this.gifts[e].DTPK_bgIconPath,this.lunpaiItems[e].m_title.text="x"+this.gifts[e].DTPK_value2,this.lunpaiItems[e].m_icon.url=this.gifts[e].DTPK_iconPath;}
var i=UserDataMgr.getInstance().getCurrencyInfo(DTCurrencyPK.DTPK_Gold);this._fui.m_contentHuaBan.m_Com_qian_1.m_lbValue.text=i.toString();var r=UserDataMgr.getInstance().getCurrencyInfo(DTCurrencyPK.DTPK_Diamond);this._fui.m_contentHuaBan.m_Com_qian_2.m_lbValue.text=r.toString(),this._fui.m_contentHuaBan.m_btn_free.onClick(this,this.onFreeButtonClick),this._fui.m_contentHuaBan.m_btn_kan.onClick(this,this.onAdButtonClick),this._fui.m_contentHuaBan.m_btn_haoyou.onClick(this,this.onShareButtonClick);},e.prototype.ReStart=function(){},e.prototype.randomIndex=function(){for(var t=[],e=0;e<this.gifts.length;e++){for(var n=0;n<10*this.gifts[e].DTPK_chance;n++){t.push(this.gifts[e]);}}
var i=Math.round(Math.random()*(t.length-1)),r=0;for(e=0;e<this.gifts.length;e++){this.gifts[e].DTPK_id==t[i].DTPK_id&&(r=e);}
return r;},e.prototype.__clickEnter=function(t){AudioMgr.getInstance().playButtonSound();},e.prototype.__clickClose=function(t){AudioMgr.getInstance().playButtonSound();},e.prototype.rotateRoutine=function(t){var e=this;this.drawGuard=!0;var n=this.getTanlger(t);console.log("target = "+n),Laya.Tween.to(this,{angle:n},5e3,Laya.Ease.circInOut,Laya.Handler.create(this,function(){Laya.timer.once(500,e,e.rotateCompleted,[t]);})).update=Laya.Handler.create(this,function(){e._fui.m_contentHuaBan.m_Com_lunpan.rotation=e.angle;},null,!1);},e.prototype.rotateCompleted=function(t){this.angle=this._fui.m_contentHuaBan.m_Com_lunpan.rotation%360,this._fui.m_contentHuaBan.m_Com_lunpan.rotation=this.angle,console.log("rotate = "+this.angle),this.gifts[t],this.drawGuard=!1;},e.prototype.gain=function(t){t.DTPK_type;},e.prototype.getTanlger=function(t){return 3600-60*t;},e.prototype.onDrawButtonClick=function(){var t=this.randomIndex();this.rotateRoutine(t);},e.prototype.onFreeButtonClick=function(){this.drawGuard||this.onDrawButtonClick();},e.prototype.onAdButtonClick=function(){this.drawGuard;},e.prototype.onShareButtonClick=function(){this.drawGuard;},e;}(FUIWindow_LunpanUiVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_MainUI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerIds=[],e.currentIndex=0,e.SMoveGrade=!1,e.InitGrade=!0,e.savenDayPlayerId=2004,e.isMoveLeft=!0,e.skeletonDic=new PF.Dictionary(),e.child_width=239,e;}
return __extends(e,t),e.prototype.isNewDay=function(){var t=e.GetData();if(0==t.time)return e.SaveCurrentData(),!0;var n=new Date(),i=new Date(n.getFullYear(),n.getMonth(),n.getDate());return t.time<i.getTime()&&(e.SaveCurrentData(),!0);},e.GetData=function(){var t=Laya.LocalStorage.getJSON(e.KEY_TODAY);return null!=t&&""!=t?e._saveToday=JSON.parse(t):(e._saveToday=new SaveToDay()).time=0,e._saveToday;},e.SaveCurrentData=function(){var t=new Date(),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=new Date(n.getTime()+864e5);e._saveToday.time=i.getTime(),Laya.LocalStorage.setJSON(e.KEY_TODAY,JSON.stringify(e._saveToday));},e.prototype.OnInitWindow=function(){var t=DTSevenDayAwardInfoMGR.getInstance().DTSevenDayAwardInfoDIC.get(Game.Constant.SEVEN_DAY_KEY),n=DTAwardInfoMGR.getInstance().DTAwardInfoDIC.get(t.DTPK_awardId);this.savenDayPlayerId=n.DTPK_value1,t=DTSevenDayAwardInfoMGR.getInstance().DTSevenDayAwardInfoDIC.get(Game.Constant.TOW_DAY_KEY),n=DTAwardInfoMGR.getInstance().DTAwardInfoDIC.get(t.DTPK_awardId),this.twoDayPlayerId=n.DTPK_value1,this.InitPlayerIds(),this.InitDisplay(),this.AddObserver(),this.AddButtonListener();var i=UserDataMgr.getInstance().getUserInfo();this.isNewDay()?(i.mainShareCount=PfuSdk.GetOLParamInt("fenxiangshiwan"),UserDataMgr.getInstance().SoleSaveUserInfo()):null==i.mainShareCount&&(i.mainShareCount=PfuSdk.GetOLParamInt("fenxiangshiwan"),UserDataMgr.getInstance().SoleSaveUserInfo(),e.SaveCurrentData()),SceneMatchingUtils.SetAlignTop(this._fui.m_contentCoin),PF.NotificationCenter.GetInstance().AddObserver(this,this.RefreshHuabanButton,"MainUIShareFriend"),this._fui.m_contentTeach.touchable=!1,this._fui.m_btn_zp.visible=!1;},e.prototype.RefreshHuabanButton=function(){var t=UserDataMgr.getInstance().getHuabanYaoQing();t.count>=FUIWindow_GiftUI.maxYaoQing&&UserDataMgr.getInstance().getHuaban(FUIWindow_GiftUI.huabanID).isLocked&&(UserDataMgr.getInstance().addHuaban(FUIWindow_GiftUI.huabanID,!1),UserDataMgr.getInstance().SoleSaveHuabanInfo(),PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_GiftTiShiUI),Global.StatisticsUIButtonClick(5)),t.count>=FUIWindow_GiftUI.maxYaoQing&&this._fui.m_contentHuaBan.t_shan.stop();},e.prototype.ReStart=function(){var t=this;this.InitGrade=!0,this.UpdateCurrentPlayerIndex(),this.UpdateDisplay(),Laya.timer.once(200,this,function(){t.ListSetTo(t.currentIndex,!1),t._fui.m_lstPlayer.visible=!0,TeachMgr.getInstance().reStartToHomeUI(t);}),Laya.timer.frameLoop(1,this,this.UpdateSignGiftRoutine),Laya.timer.frameLoop(1,this,this.UpdateTryTimeRoutine),this.InitGrade=!1,this._fui.m_lstPlayer.visible=!1,this._fui.m_btnGifts.visible=!1,this.RefreshHuabanButton(),Laya.timer.once(300,this,function(){t.setPlayerTalentDesc();});var e=UserDataMgr.getInstance().getUserInfo().huaBanId,n=Global.getHuabanDemoTimeSecondInfo(e);UserDataMgr.getInstance().getHuaban(e).isLocked&&0==n&&(UserDataMgr.getInstance().getUserInfo().huaBanId=1,UserDataMgr.getInstance().SoleSaveUserInfo()),Laya.timer.frameLoop(1,this,this.checkOlParam),SceneMatchingUtils.SetLayaSpriteAlignBottom(this._fui.m_moreGamePanel),PfuSdk.HideBanner(),PfuSdk.ShowMoreGameList(),this.SMoveGrade=!1;},e.prototype.checkOlParam=function(){Game.Constant.IS_GET_OL_PARAM&&(Global.InitComShare(this,this._fui.m_isFenxiang),Laya.timer.clear(this,this.checkOlParam));},e.prototype.CheckMoreGameList=function(){if(Game.Constant.IS_GET_OL_PARAM&&Game.Constant.IS_GET_OL_BOX_LIST){BannerUpdateMgr.getInstance().hideBannerAD();for(var t=PfuBoxList.GetInstance().GetMoreGameListData(),e=t.length,n=0;n<e;n++){var i=t[n],r=this._fui.m_list_moregame.addItemFromPool(fui.Game.UI_list_moregameChild.URL);r.m_icon.icon=i.link,r.onClick(this,this.OnClickMoreGameListItem,[i]);}
Laya.timer.clear(this,this.CheckMoreGameList),Laya.timer.frameLoop(1,this,this.UpdateMoreGameListMove),PfuSdk.GetOLParamInt("box_list_swich")==PfuSwitch.OFF?(this._fui.m_btnMoreGame.visible=!1,this._fui.m_btnMoreGame2.visible=!1,this._fui.m_list_moregame.visible=!1,this._fui.m_list_moregamebg.visible=!1,this._fui.m_list_moregameStr.visible=!1):(this._fui.m_btnMoreGame.visible=!0,this._fui.m_btnMoreGame2.visible=!0,this._fui.m_list_moregame.visible=!0,this._fui.m_list_moregamebg.visible=!0,this._fui.m_list_moregameStr.visible=!0);}},e.prototype.UpdateMoreGameListMove=function(){var t=this._fui.m_list_moregame.scrollPane.posX,e=this.isMoveLeft?1:-1;(t+=20*Game.Constant.timeDelta*e)>=this._fui.m_list_moregame.scrollPane.contentWidth-this._fui.m_list_moregame.width?(t=this._fui.m_list_moregame.scrollPane.contentWidth,this.isMoveLeft=!1):t<0&&(t=0,this.isMoveLeft=!0);var n=t;this._fui.m_list_moregame.scrollPane.setPosX(n,!1);},e.prototype.OnClickMoreGameListItem=function(t,e){WeChatUtils.GetInstance().NavigateToMiniProgram(this,function(){},t.wechatGameid,"");},e.prototype.Dispose=function(){t.prototype.Dispose.call(this),Laya.timer.clearAll(this),e.CUR_SHOW_BANNER_AD||BannerUpdateMgr.getInstance().showBannerAD();},e.prototype.InitPlayerIds=function(){for(var t=DTPlayerMGR.getInstance().DTPlayerInfoDIC,e=[],n=0;n<t.count;n++){var i=t.getKeyByIndex(n),r=t.get(i);e.push(r);}
for(e.sort(function(t,e){return t.DTPK_listSort>e.DTPK_listSort?1:-1;}),n=0;n<e.length;n++){1==(r=e[n]).DTPK_enable&&this.playerIds.push(r.DTPK_id);}},e.prototype.InitDisplay=function(){this._fui.m_contentLevelup.visible=!1,this._fui.m_btnMoreGame.m_bg.visible=!1,this._fui.m_btnMoreGame2.m_bg.visible=!1,this._fui.m_btnToLeft.visible=1<this.playerIds.length,this._fui.m_btnToRight.visible=1<this.playerIds.length,this._fui.m_contentCoin.m_lbCoin.text=UserDataMgr.getInstance().getCurrencyInfo(DTCurrencyPK.DTPK_Gold).toString(),this._fui.m_texBackground.asLoader.url="subpackage/res/UI/LoaderImage/mianui_bj.jpg";var t=UserDataMgr.getInstance().getUserInfo();null==t.isMute&&(t.isMute=!1),this._fui.m_btnMute.visible=t.isMute,this._fui.m_btnSound.visible=!t.isMute,AudioMgr.getInstance().setGameMuted(t.isMute),this._fui.m_lstPlayer.setVirtualAndLoop(),this._fui.m_lstPlayer.itemRenderer=laya.utils.Handler.create(this,this.RenderListItem,null,!1),this._fui.m_lstPlayer.numItems=this.playerIds.length,this._fui.m_lstPlayer.on(fairygui.Events.SCROLL,this,this.doSpecialEffect),this._fui.m_lstPlayer.on(fairygui.Events.SCROLL_END,this,this.OnMoveEnd),this.doSpecialEffect();},e.prototype.OnMoveEnd=function(){this.currentIndex=(this._fui.m_lstPlayer.getFirstChildInView()+1)%this._fui.m_lstPlayer.numItems,this.SetupCurrentPlayer(),this.SetupLevelUpInfo(),this.setPlayerTalentDesc(),this.SMoveGrade=!1,this.updateShareButton();},e.prototype.setPlayerTalentDesc=function(){var t=this.playerIds[this.currentIndex],e=DTPlayerMGR.getInstance().DTPlayerInfoDIC.get(t);if(null!=e&&0!=e.DTPK_talentId){var n=DTTalentMGR.getInstance().DTTalentInfoDIC.get(e.DTPK_talentId);null!=n&&(this._fui.m_Com_tianfu.m_title.text=n.DTPK_desc,this._fui.t_jianyin.play());}},e.prototype.doSpecialEffect=function(){for(var t=this._fui.m_lstPlayer.scrollPane.posX+this._fui.m_lstPlayer.viewWidth/2,e=this._fui.m_lstPlayer.numChildren,n=0;n<e;n++){var i=this._fui.m_lstPlayer.getChildAt(n),r=Math.abs(t-i.x-i.width/2);if(r>i.width)i.setScale(.65,.65);else{var a=.65+.25*(1-r/i.width);i.setScale(a,a);}}
this._fui.m_Com_tianfu.visible&&(this._fui.m_Com_tianfu.visible=!1);},e.prototype.RenderListItem=function(t,e){var n=e.asCom,i=DTPlayerMGR.getInstance().DTPlayerInfoDIC.get(this.playerIds[t]);this.skeletonDic.containsKey(n)&&this.skeletonDic.get(n).destroy(),this.skeletonDic.remove(n);var r=new Laya.Skeleton();r.pos(150,265),r.load(i.DTPK_animtion),n.m_holder.setNativeObject(r),this.skeletonDic.add(n,r);},e.prototype.AddButtonListener=function(){var t=this;this._fui.m_btn_zp.onClick(this,function(){PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_LunpanUi);}),this._fui.m_btnHuaban.onClick(this,function(){PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_Huaban),Global.StatisticstrialClickHuaban(),Global.StatisticsUIButtonClick(0);}),this._fui.m_btnMoreGame.onClick(this,function(){t.SMoveGrade||(MoreGameUpdateMgr.getInstance().showMoreGameInfo(!0,t,function(t){var e=t.lastIndexOf("/"),n=t.lastIndexOf("."),i=t.substring(e+1,n);Global.StatisticsMoreGameInfo(i);}),AudioMgr.getInstance().playButtonSound());}),this._fui.m_btnMoreGame2.onClick(this,function(){t.SMoveGrade||(MoreGameUpdateMgr.getInstance().showMoreGameInfo(!1,t,function(t){var e=t.lastIndexOf("/"),n=t.lastIndexOf("."),i=t.substring(e+1,n);Global.StatisticsMoreGameInfo(i);}),AudioMgr.getInstance().playButtonSound());}),this._fui.m_btnToLeft.onClick(this,this.OnLeftButtonClick),this._fui.m_btnToRight.onClick(this,this.OnRightButtonClick),this._fui.m_btnBuyPlayer.onClick(this,this.OnBuyPlayerButtonClick),this._fui.m_btnStart.onClick(this,function(){t.SMoveGrade||(TeachMgr.getInstance().isInTeachGame()||(Global.loadResourceHomeId=1),LoadScene.GetInstance().HomeToGame(),PfuSdk.ShowBanner(),PfuSdk.HideMoreGameList(),AudioMgr.getInstance().playButtonSound());}),this._fui.m_btnStart1.onClick(this,function(){t.SMoveGrade||(Global.loadResourceHomeId=1,LoadScene.GetInstance().HomeToGame(),PfuSdk.ShowBanner(),PfuSdk.HideMoreGameList(),AudioMgr.getInstance().playButtonSound());}),this._fui.m_btnStart2.onClick(this,this.OnTryPlayerButtonClick),this._fui.m_btnUpgradePlayer.onClick(this,this.OnUpgradeButtonClick),this._fui.m_btnSound.onClick(this,function(){t.SMoveGrade||(UserDataMgr.getInstance().getUserInfo().isMute=!0,t._fui.m_btnMute.visible=!0,t._fui.m_btnSound.visible=!1,UserDataMgr.getInstance().SoleSaveUserInfo(),AudioMgr.getInstance().stopAllGmeSound(),AudioMgr.getInstance().setGameMuted(!0));}),this._fui.m_btnMute.onClick(this,function(){t.SMoveGrade||(UserDataMgr.getInstance().getUserInfo().isMute=!1,t._fui.m_btnMute.visible=!1,t._fui.m_btnSound.visible=!0,UserDataMgr.getInstance().SoleSaveUserInfo(),AudioMgr.getInstance().setGameMuted(!1),AudioMgr.getInstance().playButtonSound());}),this._fui.m_btnRank.onClick(this,function(){t.SMoveGrade||(PfuSdk.HideMoreGameList(),PfuSdk.ShowBanner(),PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_RankUI),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_RANKPANEL_OPEN,!1),AudioMgr.getInstance().playButtonSound());}),this._fui.m_btnPublicNumber.onClick(this,function(){t.SMoveGrade||(PfuSdk.ShowRandomGeneralAd(),AudioMgr.getInstance().playButtonSound());}),this._fui.m_btnGifts.onClick(this,function(){t.SMoveGrade||(FUIWindow_SevenDayUI.IsShowQiandao()?(PF.FUIPopupManager.GetInstance().ShowPopup(DTFUIWindowIdPK.DTPK_SevenDayUI),AudioMgr.getInstance().playButtonSound()):FUIWindow_SevenDayUI.IsGain()?PF.FUIPopupManager.GetInstance().ShowPopup(DTFUIWindowIdPK.DTPK_NextSevenDayUI):Global.showGameDialog("Gift packages are temporarily unavailable!",function(){PF.FUIPopupManager.GetInstance().ClosePopupTop();},function(){},"Prompt "));}),this._fui.m_contentHuaBan.onClick(this,function(){PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_GiftUI),Global.StatisticstrialClickLingquHuaban(),Global.StatisticsUIButtonClick(1);}),this._fui.m_btnCloseUpgrade.onClick(this,this.OnUpgradeButtonClick),this.AddUpgradeButtonsListener();},e.prototype.AddObserver=function(){var t=this;PF.NotificationCenter.GetInstance().AddObserver(this,function(){t._fui.m_btnMoreGame.m_texIcon.asLoader.url=MoreGameUpdateMgr.getInstance().getMoreGameIconUrlInfo(!0),t._fui.m_btnMoreGame2.m_texIcon.asLoader.url=MoreGameUpdateMgr.getInstance().getMoreGameIconUrlInfo(!1);},Game.NotifName.UI_MOREGAME_UPDATE),PF.NotificationCenter.GetInstance().AddObserver(this,function(e){t._fui.m_contentCoin.m_lbCoin.text=UserDataMgr.getInstance().getCurrencyInfo(DTCurrencyPK.DTPK_Gold).toString();},UserDataMgr.m_UI_REFRESH_CURRENCY),PF.NotificationCenter.GetInstance().AddObserver(this,this.OnMoveEnd,Game.NotifName.UI_MAIN_UPDATE_CURRENT_HERO_INFO);},e.prototype.UpdateCurrentPlayerIndex=function(){if(Game.Constant.IsFirstLoadGame){var t=UserDataMgr.getInstance().getUserInfo();if(UserDataMgr.getInstance().getPlayer(t.playerId).isLocked)this.currentIndex=0;else{var e=t.playerId;this.currentIndex=this.CalculatePlayerIndex(e);}
Game.Constant.IsFirstLoadGame=!1;}else{for(var n=[],i=0;i<this.playerIds.length;i++){UserDataMgr.getInstance().getPlayer(this.playerIds[i]).isLocked&&n.push(this.playerIds[i]);}
if(0<n.length){var r=n[PF.BXRandom.Get().nextInt(0,n.length)];this.currentIndex=this.CalculatePlayerIndex(r);}else e=(t=UserDataMgr.getInstance().getUserInfo()).playerId,this.currentIndex=this.CalculatePlayerIndex(e);}},e.prototype.CalculatePlayerIndex=function(t){for(var e=0;e<this.playerIds.length;e++){if(t==this.playerIds[e])return e;}
return 0;},e.prototype.UpdateDisplay=function(){this._fui.m_btnMoreGame.m_texIcon.asLoader.url=MoreGameUpdateMgr.getInstance().getMoreGameIconUrlInfo(!0),this._fui.m_btnMoreGame2.m_texIcon.asLoader.url=MoreGameUpdateMgr.getInstance().getMoreGameIconUrlInfo(!1),this._fui.m_lstPlayer.visible=!1,this.SetupCurrentPlayer(),this.SetupLevelUpInfo();},e.prototype.UpdateSignGiftRoutine=function(){Game.Constant.IsFirstShowGift&&e.firstShowQiandaoUI&&Game.Constant.IS_GET_OL_PARAM&&FUIWindow_SevenDayUI.IsShowQiandao()&&!TeachMgr.isInTeach()&&(Game.Constant.IsFirstShowGift=!1);},e.prototype.UpdateTryTimeRoutine=function(){var t=this.playerIds[this.currentIndex];this._fui.m_btnStart1.m_lbTimer.text="the remaining time"+PF.BXStringUtils.FormatTimeByMMSS(Global.getPlayerDemoTimeSecondInfo(t)),0==Global.getPlayerDemoTimeSecondInfo(t)&&(this._fui.m_btnStart1.visible=!1,this._fui.m_btnStart2.visible=!0);},e.prototype.ListSetTo=function(t,e){var n=this._fui.m_lstPlayer.scrollPane.posX,i=(this._fui.m_lstPlayer.getFirstChildInView()+1)%this._fui.m_lstPlayer.numItems;if(i!=t){var r=n+(t-i)*this.child_width;this._fui.m_lstPlayer.scrollPane.setPosX(r,e);}},e.prototype.ListMoveOnce=function(t){var e=this._fui.m_lstPlayer.scrollPane.posX+t*this.child_width;this._fui.m_lstPlayer.scrollPane.setPosX(e,!0);},e.prototype.SetupCurrentPlayer=function(){var t=this.playerIds[this.currentIndex],e=UserDataMgr.getInstance().getPlayer(t),n=DTPlayerMGR.getInstance().DTPlayerInfoDIC.get(t),i=Global.getPlayerDemoTimeSecondInfo(t);if(e.isLocked){this._fui.m_btnStart.visible=!1,this._fui.m_btnStart1.visible=0!=i,this._fui.m_btnStart2.visible=0==i,this._fui.m_btnUpgradePlayer.visible=!1;var r=DTConsumeInfoMGR.getInstance().DTConsumeInfoDIC.get(n.DTPK_buyConsumeId);this._fui.m_btnBuyPlayer.m_title.text=r.DTPK_value2.toString(),(e.id==this.savenDayPlayerId||e.id==this.twoDayPlayerId)&&(this._fui.m_btnBuyPlayer.visible=!1,e.id,this.savenDayPlayerId);}else this._fui.m_btnStart.visible=!0,this._fui.m_btnStart1.visible=!1,this._fui.m_btnStart2.visible=!1,this._fui.m_btnBuyPlayer.visible=!1;UserDataMgr.getInstance().getUserInfo().playerId=t,UserDataMgr.getInstance().SoleSaveUserInfo(),this.InitGrade||(AudioMgr.getInstance().stopAllGmeSound(),1==n.DTPK_type?AudioMgr.getInstance().playGameSound(DTSoundIdPK.DTPK_pigman_prepared):2==n.DTPK_type?AudioMgr.getInstance().playGameSound(DTSoundIdPK.DTPK_fifi_prepared):AudioMgr.getInstance().playGameSound(DTSoundIdPK.DTPK_dullman_prepared));},e.prototype.SetupLevelUpInfo=function(){for(var t=this.playerIds[this.currentIndex],e=UserDataMgr.getInstance().getPlayer(t),n=DTPlayerMGR.getInstance().DTPlayerInfoDIC.get(t),i=this._fui.m_lstUpgrade.numChildren,r=[],a=0;a<i;a++){var o=DTPlayerMGR.getInstance().DTPropValueInfoDIC.get(a+1),s=this._fui.m_lstUpgrade.getChildAt(a),l=this.GetProLevel(e,a),u=this.GetProMaxLevel(n,a);s.m_texIcon.asLoader.url=o.DTPK_upgradeIconName[0],s.m_btnUpgrade1.visible=!1,s.m_texCompltetd.visible=!0,s.m_btnUpgrade2.visible=!1,s.m_btnUpgrade1.grayed=e.isLocked,s.m_texCompltetd.grayed=e.isLocked,s.m_btnUpgrade2.grayed=e.isLocked,s.m_btnUpgrade1.touchable=!e.isLocked,s.m_texCompltetd.touchable=!e.isLocked,s.m_btnUpgrade2.touchable=!e.isLocked;var h=DTConsumeInfoMGR.getInstance().DTConsumeInfoDIC.get(o.DTPK_consumeIds[l-1]);s.m_btnUpgrade1.m_title.text=h.DTPK_value2.toString(),this.SetupLevelUpgradeClickInfo(s,l),this.SetupLevelUpgradeGrayItem(s,u),l<u&&r.push(s);}
this.RandomAdUpgrade(r);},e.prototype.AddUpgradeButtonsListener=function(){for(var t=this,e=this._fui.m_lstUpgrade.numChildren,n=function e(n){var e=i._fui.m_lstUpgrade.getChildAt(n);e.m_btnUpgrade1.onClick(i,function(){t.OnProUpgradeButtonClick(n,1);}),e.m_btnUpgrade1.onClick(i,function(){t.OnProUpgradeButtonClick(n,2),AudioMgr.getInstance().playButtonSound();});},i=this,r=0;r<e;r++){n(r);}},e.prototype.OnProUpgradeButtonClick=function(t,e){var n=this;if(!this.SMoveGrade){var i=this.playerIds[this.currentIndex],r=UserDataMgr.getInstance().getPlayer(i),a=DTPlayerMGR.getInstance().DTPlayerInfoDIC.get(i),o=DTPlayerMGR.getInstance().DTPropValueInfoDIC.get(t+1),s=this._fui.m_lstUpgrade.getChildAt(t),l=this.GetProLevel(r,t),u=this.GetProMaxLevel(a,t);if(2==e)BannerUpdateMgr.getInstance().hideBannerAD(),Global.showIncentiveAD(this,function(e,a){e==PfuSdk.SUCCESS&&n.VideoAward(l,u,r,t,s),n.VideoAwardRefresh(),Global.StatisticsUpgradeHeroInfo(i,a);});else if(1==e){var h=DTConsumeInfoMGR.getInstance().DTConsumeInfoDIC.get(o.DTPK_consumeIds[l-1]),c=UserDataMgr.getInstance().getCurrencyInfo(DTCurrencyPK.DTPK_Gold);if(c<h.DTPK_value2)return void Global.showGameDialog("Not enough gold coins!",function(){PF.FUIPopupManager.GetInstance().ClosePopupTop();},function(){},"Prompt ");l<u&&(UserDataMgr.getInstance().setCurrencyInfo(DTCurrencyPK.DTPK_Gold,c-h.DTPK_value2,!0),UserDataMgr.getInstance().SoleSaveCurrencyInfo(),this.SPlayerProLevelUpgrade(r,t),l=this.GetProLevel(r,t),this.SetupLevelUpgradeClickInfo(s,l),h=DTConsumeInfoMGR.getInstance().DTConsumeInfoDIC.get(o.DTPK_consumeIds[l-1]),s.m_btnUpgrade1.m_title.text=h.DTPK_value2.toString()),l==u&&(s.m_texCompltetd.visible=!0,s.m_btnUpgrade1.visible=!1,s.m_btnUpgrade2.visible=!1);}}},e.prototype.VideoAward=function(t,e,n,i,r){t<e&&(this.SPlayerProLevelUpgrade(n,i),t=this.GetProLevel(n,i),this.SetupLevelUpgradeClickInfo(r,t)),t==e&&(r.m_img_wancheng.visible=!0,r.m_Btn_shengji_1.visible=!1,r.m_Btn_shengji_2.visible=!1);},e.prototype.VideoAwardRefresh=function(){e.CUR_SHOW_BANNER_AD&&BannerUpdateMgr.getInstance().showBannerAD();},e.prototype.RandomAdUpgrade=function(t){if(0!=t.length){var e=PF.BXRandom.Get().nextInt(0,t.length);PfuSdk.GetOLParamInt("ad_video")==PfuSwitch.ON?(t[e].m_texCompltetd.visible=!1,t[e].m_btnUpgrade1.visible=!1,t[e].m_btnUpgrade2.visible=!0):(t[e].m_texCompltetd.visible=!1,t[e].m_btnUpgrade1.visible=!0,t[e].m_btnUpgrade2.visible=!1);for(var n=0;n<t.length;n++){n!=e&&(t[n].m_texCompltetd.visible=!1,t[n].m_btnUpgrade1.visible=!0,t[n].m_btnUpgrade2.visible=!1);}}},e.prototype.SetupLevelUpgradeClickInfo=function(t,e){for(var n=t.m_lstLevel,i=n.numChildren,r=0;r<i;r++){n.getChildAt(r).visible=!1;}
for(r=0;r<e;r++){n.getChildAt(r).visible=!0;}},e.prototype.SetupLevelUpgradeGrayItem=function(t,e){for(var n=t.m_lstLevelGray,i=n.numChildren,r=0;r<i;r++){n.getChildAt(r).visible=!1;}
for(r=0;r<e;r++){n.getChildAt(r).visible=!0,n.getChildAt(r).grayed=!0;}},e.prototype.SPlayerProLevelUpgrade=function(t,e){switch(e){case 0:t.doubleGoldLv++;break;case 1:t.shieldLv++;break;case 2:t.magnetLv++;break;case 3:t.planeLv++;}
UserDataMgr.getInstance().SoleSavePlayerInfo();},e.prototype.GetProLevel=function(t,e){switch(e){case 0:return t.doubleGoldLv;case 1:return t.shieldLv;case 2:return t.magnetLv;case 3:return t.planeLv;default:return 1;}},e.prototype.GetProMaxLevel=function(t,e){switch(e){case 0:return t.DTPK_maxDoubleLevel;case 1:return t.DTPK_maxHelmetLevel;case 2:return t.DTPK_maxMagnetLevel;case 3:return t.DTPK_maxPlaneLevel;default:return 1;}},e.prototype.OnUpgradeButtonClick=function(t){this.SMoveGrade||this.LevelUpShowGuard||(this.LevelUpShowGuard=!0,this._fui.m_contentLevelup.visible?(this._fui.m_contentLevelup.visible=!1,this.LevelUpShowGuard=!1):(this._fui.m_contentLevelup.visible=!0,this.LevelUpShowGuard=!1,this.SetupLevelUpInfo()),AudioMgr.getInstance().playButtonSound());},e.prototype.OnLeftButtonClick=function(t){this.SMoveGrade||(this.SMoveGrade=!0,this.ListMoveOnce(-1),AudioMgr.getInstance().playButtonSound());},e.prototype.OnRightButtonClick=function(t){this.SMoveGrade||(this.SMoveGrade=!0,this.ListMoveOnce(1),AudioMgr.getInstance().playButtonSound());},e.prototype.OnBuyPlayerButtonClick=function(t){if(!this.SMoveGrade){var e=this.playerIds[this.currentIndex],n=DTPlayerMGR.getInstance().DTPlayerInfoDIC.get(e),i=DTConsumeInfoMGR.getInstance().DTConsumeInfoDIC.get(n.DTPK_buyConsumeId),r=UserDataMgr.getInstance().getCurrencyInfo(DTCurrencyPK.DTPK_Gold);r<i.DTPK_value2?Global.showGameDialog("Not enough gold coins!",function(){PF.FUIPopupManager.GetInstance().ClosePopupTop();},function(){},"Prompt "):(this._fui.m_btnBuyPlayer.visible=!1,this._fui.m_btnStart.visible=!0,this._fui.m_btnStart1.visible=!1,this._fui.m_btnStart2.visible=!1,UserDataMgr.getInstance().setCurrencyInfo(DTCurrencyPK.DTPK_Gold,r-i.DTPK_value2,!0),UserDataMgr.getInstance().addPlayer(e,!1),UserDataMgr.getInstance().SoleSavePlayerInfo(),UserDataMgr.getInstance().SoleSaveCurrencyInfo()),AudioMgr.getInstance().playButtonSound();}},e.prototype.OnSoundButtonClick=function(t){UserDataMgr.getInstance().getUserInfo().isMute=t,this._fui.m_btnMute.visible=t,this._fui.m_btnSound.visible=!t,UserDataMgr.getInstance().SoleSaveUserInfo();},e.prototype.hideMoreGameAndShowBanner=function(){PfuSdk.HideBanner(),PfuSdk.ShowMoreGameList();},e.prototype.OnTryPlayerButtonClick=function(t){var n=this;this.SMoveGrade||(PfuSdk.GetOLParamInt("ad_video")!=PfuSwitch.ON?(Global.setPlayerTryState(this.playerIds[this.currentIndex],60*PfuSdk.GetOLParamInt("tryplayertime")),Laya.timer.frameLoop(1,this,this.UpdateTryTimeRoutine),this.OnMoveEnd(),Global.loadResourceHomeId=1,LoadScene.GetInstance().HomeToGame(),PfuSdk.ShowBanner(),PfuSdk.HideMoreGameList(),this.hideMoreGameAndShowBanner()):true||WeChatUtils.GetInstance().IsWeGame()?(e.CUR_SHOW_BANNER_AD&&BannerUpdateMgr.getInstance().hideBannerAD(),Global.GetComShareVisible(this._fui.m_isFenxiang)&&(Global.StatisticsTryHero2(3),Global.shareGame(!0,function(t){})),Global.StatisticsTryHero2(0),Global.showIncentiveAD(this,function(t,e){t==PfuSdk.SUCCESS&&(Game.Constant.inSelectSceneType=1,n.OnTryVideoAward(),n.OnTryVideoAwardRefresh(),Global.StatisticsMovieType(StatisticsEventSite.tryGame),Global.StatisticsTryHero2(2)),t==PfuSdk.VIDEO_SHOW_FAIL?Global.StatisticsTryHero2(4):(n.OnTryVideoAwardRefresh(),Global.StatisticsTryHero2(1)),Global.StatisticstrialHeroInfo(n.playerIds[n.currentIndex],e);})):(this.OnTryVideoAward(),this.OnTryVideoAwardRefresh()),AudioMgr.getInstance().playButtonSound());},e.prototype.OnTryVideoAward=function(){Global.setPlayerTryState(this.playerIds[this.currentIndex],60*PfuSdk.GetOLParamInt("tryplayertime")),Laya.timer.frameLoop(1,this,this.UpdateTryTimeRoutine),this.OnMoveEnd(),Global.loadResourceHomeId=1,LoadScene.GetInstance().HomeToGame(),PfuSdk.ShowBanner(),PfuSdk.HideMoreGameList(),Global.StatisticsTryHero(this.playerIds[this.currentIndex]);},e.prototype.OnTryVideoAwardRefresh=function(){},e.prototype.updateShareButton=function(){},e.CUR_SHOW_BANNER_AD=!1,e.KEY_TODAY="m_today",e.firstShowQiandaoUI=!0,e;}(FUIWindow_MainUIVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_NextSevenDayUI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickGuard=!1,e;}
return __extends(e,t),e.prototype.OnInitWindow=function(){this._fui.m_Com_meirilibao.m_Btn_tiaoguo.onClick(this,this.__ClickSkip);},e.prototype.ReStart=function(){this.Init();},e.prototype.Init=function(){var t=FUIWindow_SevenDayUI.GetData();this._curInf=this.GetAwardInfo(t.awardIndex);var e=DTAwardInfoMGR.getInstance().DTAwardInfoDIC.get(this._curInf.DTPK_awardId);this._fui.m_Com_meirilibao.m_Com_icon.icon=this._curInf.DTPK_customImageUrl;var n="";1==e.DTPK_type&&(n="x"+e.DTPK_value2),this._fui.m_Com_meirilibao.m_Text_shuliang.text=n;},e.prototype.GetAwardInfo=function(t){for(var e=DTSevenDayAwardInfoMGR.getInstance().DTSevenDayAwardInfoDIC.count,n=[],i=0;i<e;i++){var r=DTSevenDayAwardInfoMGR.getInstance().DTSevenDayAwardInfoDIC.getKeyByIndex(i),a=DTSevenDayAwardInfoMGR.getInstance().DTSevenDayAwardInfoDIC.get(r);0==a.DTPK_loopType&&n.push(a);}
var o=e<=t?n.length:0,s=(t-o)%(e-o)+o;return DTSevenDayAwardInfoMGR.getInstance().DTSevenDayAwardInfoDIC.get(s+1);},e.prototype.__ClickSkip=function(t){this.clickGuard||(this.clickGuard=!0,PF.FUIPopupManager.GetInstance().ClosePopup(this),AudioMgr.getInstance().playButtonSound(),this.CheckSevenDayDailog());},e.prototype.CheckSevenDayDailog=function(){if(FUIWindow_SevenDayUI._saveToday.awardIndex<Game.Constant.SEVEN_DAY_KEY-1&&1<FUIWindow_SevenDayUI._saveToday.awardIndex){var t=DTSevenDayAwardInfoMGR.getInstance().DTSevenDayAwardInfoDIC.get(Game.Constant.SEVEN_DAY_KEY);PF.FUIPopupManager.GetInstance().ShowPopup(DTFUIWindowIdPK.DTPK_RewardDialogUI).Init(t.DTPK_customImageUrl,3,0,FUIWindow_SevenDayUI._saveToday.awardIndex);}},e.isTestDebug=!0,e;}(FUIWindow_NextSevenDayUIVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_PauseUI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.prototype.OnInitWindow=function(){this._fui.m_contentFuHuo.m_btn_resume.onClick(this,this.___Resume),this._fui.m_contentFuHuo.m_btn_share.onClick(this,this.___Share);},e.prototype.ReStart=function(){this._isClick=!1;},e.prototype.___Resume=function(t){this._isClick||(this._isClick=!0,GameMgr.getInstance().unpauseGame());},e.prototype.___Share=function(t){this._isClick||Global.shareGame(!1,function(t){});},e;}(FUIWindow_PauseUIVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_PfuBanner=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e;}(FUIWindow_PfuBannerVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_QiandaoUI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickGuard=!1,e;}
return __extends(e,t),e.prototype.OnInitWindow=function(){this._fui.m_contentQianDao.m_Btn_guanbi.onClick(this,this.__ClickClose),this._fui.m_contentQianDao.m_Btn_lingqu.onClick(this,this.__ClickVideoAward);},e.prototype.ReStart=function(){this.Init();},e.prototype.Init=function(){for(var t=e.GetData(),n=DTSevenDayAwardInfoMGR.getInstance().DTSevenDayAwardInfoDIC.count,i=7*Math.floor(t.awardIndex/7),r=i%n,a=0;a<this._fui.m_contentQianDao.m_List_qd.numItems;a++){var o=this._fui.m_contentQianDao.m_List_qd.getChildAt(a),s=r+a,l=DTSevenDayAwardInfoMGR.getInstance().DTSevenDayAwardInfoDIC.get(s),u=i+1+a;this.SetComDay(o,u,t,a+1,l);}
this._fui.m_contentQianDao.m_Btn_lingqu.visible=e.IsShowQiandao();},e.prototype.SetComDay=function(t,e,n,i,r){t.m_lbTitle.text="第"+i+"天",t.m_texCompleted.visible=!1,e-1<n.awardIndex?t.m_texCompleted.visible=!0:e-1==n.awardIndex&&(this.curAwardInf=r);var a=DTAwardInfoMGR.getInstance().DTAwardInfoDIC.get(r.DTPK_awardId);1==a.DTPK_type&&DTCurrencyInfoMGR.getInstance().DTCurrencyInfoDIC.get(a.DTPK_value1).DTPK_bigIconName;},e.GetData=function(){var t=Laya.LocalStorage.getJSON(e.KEY_TODAY);return this._saveToday=null!=t&&""!=t?JSON.parse(t):new SevenDayData(),this._saveToday;},e.IsShowQiandao=function(){var t=e.GetData();if(0==t.time)return!0;var n=new Date(),i=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime();return t.time<=i;},e.SaveData=function(){var t=new Date(),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=new Date(n.getTime()+864e5);e._saveToday.time=i.getTime(),Laya.LocalStorage.setJSON(e.KEY_TODAY,JSON.stringify(e._saveToday));},e.prototype.__ClickVideoAward=function(t){var e=this;PfuSdk.HideBanner(),this.VideoAward(),this.VideoAwardRefresh(),Global.showIncentiveAD(this,function(t){t==PfuSdk.SUCCESS&&e.VideoAward(),e.VideoAwardRefresh();}),AudioMgr.getInstance().playButtonSound();},e.prototype.VideoAward=function(){null!=this.curAwardInf&&(AwardMgr.GetInstance().awardById(this.curAwardInf.DTPK_awardId),UserDataMgr.getInstance().SoleSaveCurrencyInfo(),UserDataMgr.getInstance().SoleSavePlayerInfo()),e._saveToday.awardIndex++,e.SaveData(),this.Init();},e.prototype.VideoAwardRefresh=function(){PfuSdk.ShowBanner(),this.clickGuard=!1;},e.prototype.__ClickShare=function(t){var n=this;this.clickGuard||(Global.shareGame(!0,function(t){t==PfuSdk.SUCCESS&&(e.SaveData(),PF.FUIPopupManager.GetInstance().ClosePopup(n));}),AudioMgr.getInstance().playButtonSound());},e.prototype.__ClickClose=function(t){this.clickGuard||(this.clickGuard=!0,PF.FUIPopupManager.GetInstance().ClosePopup(this),AudioMgr.getInstance().playButtonSound(),Game.Constant.IsFirstShowGift&&FUIWindow_DayUI.IsShowQiandao()&&!TeachMgr.isInTeach()&&(PF.FUIPopupManager.GetInstance().ShowPopup(DTFUIWindowIdPK.DTPK_DayUI),Game.Constant.IsFirstShowGift=!1));},e.IS_LOCK=!1,e.KEY_TODAY="s_Qiandao",e;}(FUIWindow_QiandaoUIVO),SevenDayData=function t(){this.time=0,this.awardIndex=0;},__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_RankUI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.default_height=76,e;}
return __extends(e,t),e.prototype.OnInitWindow=function(){this.Initialize(),this._fui.m_contentRank.m_btnClose.onClick(this,this.OnCloseButtonClick),this._fui.m_contentRank.m_btn5588.onClick(this,Global.jumpToGameBox),PF.NotificationCenter.GetInstance().AddObserver(this,this.OnThisPanelOpen,Game.NotifName.UI_RANKPANEL_OPEN);},e.prototype.Initialize=function(){this.scale=1,this.rankList=new RankList();var t=this._fui.m_contentRank.m_lstRank.numChildren;this.rankList.count=t,this.rankList.ordinates=[];for(var e=0;e<t;e++){var n=this._fui.m_contentRank.m_lstRank.getChildAt(e),i=new RnakItemOrdinates();i.rank=new Ordinates(),i.rank.x=this.CalculateHorizontialOrdinates(n.m_lbRank.x),i.rank.y=this.CalculateVerticalOrdinates(e,n.m_lbRank.y),i.headIcon=new Ordinates(),i.headIcon.x=this.CalculateHorizontialOrdinates(n.m_texHead.x),i.headIcon.y=this.CalculateVerticalOrdinates(e,n.m_texHead.y),i.name=new Ordinates(),i.name.x=this.CalculateHorizontialOrdinates(n.m_lbName.x),i.name.y=this.CalculateVerticalOrdinates(e,n.m_lbName.y),i.distance=new Ordinates(),i.distance.x=this.CalculateHorizontialOrdinates(n.m_lbScore.x),i.distance.y=this.CalculateVerticalOrdinates(e,n.m_lbScore.y),this.rankList.ordinates.push(i);}
var r=this._fui.m_contentRank.m_contentMyRank.x*this.scale,a=this._fui.m_contentRank.m_contentMyRank.y*this.scale,o=new RnakItemOrdinates();o.rank=new Ordinates(),o.rank.x=r+this._fui.m_contentRank.m_contentMyRank.m_lbRank.x,o.rank.y=a+this._fui.m_contentRank.m_contentMyRank.m_lbRank.y,o.headIcon=new Ordinates(),o.headIcon.x=r+this._fui.m_contentRank.m_contentMyRank.m_texHead.x,o.headIcon.y=this._fui.m_contentRank.m_contentMyRank.y+this._fui.m_contentRank.m_contentMyRank.m_texHead.y,o.name=new Ordinates(),o.name.x=r+this._fui.m_contentRank.m_contentMyRank.m_lbName.x,o.name.y=a+this._fui.m_contentRank.m_contentMyRank.m_lbName.y,o.distance=new Ordinates(),o.distance.x=r+this._fui.m_contentRank.m_contentMyRank.m_lbScore.x,o.distance.y=a+this._fui.m_contentRank.m_contentMyRank.m_lbScore.y,this.rankList.selfOrdinate=o;},e.prototype.OnCloseButtonClick=function(){WeChatOpenUtils.GetInstance().HideShardCanvas(),PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_RankUI),this.sendMessageToScorePanel?PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_SCOREPANEL_SHAREDATA):(PfuSdk.ShowMoreGameList(),PfuSdk.HideBanner()),AudioMgr.getInstance().playButtonSound();},e.prototype.CalculateHorizontialOrdinates=function(t){return this._fui.m_contentRank.m_lstRank.x*this.scale+t;},e.prototype.CalculateVerticalOrdinates=function(t,e){var n=this._fui.m_contentRank.m_lstRank.lineGap;return this._fui.m_contentRank.m_lstRank.y*this.scale+this.default_height*t+n*t+e;},e.prototype.ReStart=function(){var t=this;Laya.timer.once(300,this,function(){WeChatOpenUtils.GetInstance().ShowSharedCanvas(),WeChatOpenUtils.GetInstance().ShowFriendRank(t.rankList);});},e.prototype.OnThisPanelOpen=function(t){this.sendMessageToScorePanel=t;},e;}(FUIWindow_RankUIVO),RankList=function t(){},RnakItemOrdinates=function t(){},Ordinates=function t(){},__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_ReviveUI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SCREEN_HEIGHT=1334,e.SCREEN_WIDTH=750,e.WaitTime=3e3,e;}
return __extends(e,t),e.prototype.OnInitWindow=function(){this._fui.m_contentFuHuo.m_Btn_lan.onClick(this,this.thisOnShareButtonClick),this._fui.m_contentFuHuo.m_Btn_guanbi.onClick(this,this.OnCloseButtonClick),this._fui.m_contentFuHuo.m_Btn_huang.onClick(this,this.OnCickReviveGame),this._fui.m_contentFuHuo.m_Btn_5588game.onClick(this,Global.jumpToGameBox);},e.prototype.Awake=function(){this.Initialize();setTimeout(()=>{if(!canRelive)return this.OnCloseButtonClick();},0)},e.prototype.ReStart=function(){this.clickGuard=!1,this._fui.m_contentFuHuo.m_Text_title.visible=!1,this._fui.m_contentFuHuo.m_loadingBar.visible=!1,this._fui.m_contentFuHuo.m_Btn_5588game.visible=2==PfuManager.GetInstance().OLParam.show5588,Global.InitComShare(this,this._fui.m_contentFuHuo.m_isFenxiang),this.ShareData(),this.updateShareButton();},e.prototype.ShareData=function(){var t=this;Laya.timer.once(400,this,function(){WeChatOpenUtils.GetInstance().ShowSharedCanvas(),WeChatOpenUtils.GetInstance().ShowUpperRank(t._surpassFriend);});},e.prototype.SetRankListData=function(){this._fui.m_contentFuHuo.m_Com_next.visible=!0,this._fui.m_contentFuHuo.m_Com_next.m_Text_score.text="";var t=this._fui.m_contentFuHuo.m_Com_next.x,e=this._fui.m_contentFuHuo.m_Com_next.y;this._surpassFriend=new SurpassFriend();var n=GameMgr.getInstance().runDistance;this._surpassFriend.curScore=n,this._surpassFriend.headIcon=new Ordinates(),this._surpassFriend.headIcon.x=t+this._fui.m_contentFuHuo.m_Com_next.m_Img_head.x,this._surpassFriend.headIcon.y=e+this._fui.m_contentFuHuo.m_Com_next.m_Img_head.y,this._surpassFriend.headIcon.width=this._fui.m_contentFuHuo.m_Com_next.m_Img_head.width,this._surpassFriend.headIcon.height=this._fui.m_contentFuHuo.m_Com_next.m_Img_head.height,this._surpassFriend.distance=new Ordinates(),this._surpassFriend.distance.x=t+this._fui.m_contentFuHuo.m_Com_next.m_Text_score.x,this._surpassFriend.distance.y=e+this._fui.m_contentFuHuo.m_Com_next.m_Text_score.y;},e.prototype.Initialize=function(){var t=1.2+Math.abs(this.SCREEN_HEIGHT/this.SCREEN_WIDTH-Laya.stage.height/Laya.stage.width);this._fui.m_bg.setSize(this.SCREEN_WIDTH*t,this.SCREEN_HEIGHT*t),this.clickGuard=!1,this._fui.m_contentFuHuo.m_Text_baifenbi.visible=!1;},e.prototype.ShowAd=function(){var t=this;Global.GetComShareVisible(this._fui.m_contentFuHuo.m_isFenxiang)&&Global.shareGame(!0,function(t){}),Global.showIncentiveAD(this,function(e,n){e==PfuSdk.SUCCESS?(GameMgr.getInstance().m_gameVideoCount++,t.VideoAward(),t.VideoAwardRefresh(),Global.StatisticsMovieType(StatisticsEventSite.fuhuo),Global.StatisticsRevive(3)):e==PfuSdk.VIDEO_SHOW_FAIL?(WeChatOpenUtils.GetInstance().HideShardCanvas(),Global.StatisticsRevive(5)):(t.VideoAwardRefresh(),WeChatOpenUtils.GetInstance().HideShardCanvas(),Global.StatisticsRevive(2)),Global.StatisticsMovieType(StatisticsEventSite.fuhuo),Global.StatisticsReviveInfo(n);},function(){WeChatOpenUtils.GetInstance().ShowSharedCanvas();}),Global.StatisticsRevive(1);},e.prototype.VideoAward=function(){this.OnReviveGame();},e.prototype.VideoAwardRefresh=function(){FUIWindow_MainUI.CUR_SHOW_BANNER_AD&&BannerUpdateMgr.getInstance().showBannerAD(),this.clickGuard=!1;},e.prototype.SetupShareButtonVisible=function(){this._fui.m_contentFuHuo.m_Btn_lan.visible=Global.IsShowShareReviveGameButton(),this._fui.m_contentFuHuo.m_Btn_lan.visible&&(GameMgr.getInstance().m_gameShareCount>=PfuSdk.GetOLParamInt("fenxiang_number")?(this._fui.m_contentFuHuo.m_Btn_lan.grayed=!0,this._fui.m_contentFuHuo.m_Btn_lan.touchable=!1):(this._fui.m_contentFuHuo.m_Btn_lan.grayed=!1,this._fui.m_contentFuHuo.m_Btn_lan.touchable=!0));},e.prototype.SetupAdHintVisible=function(){this._fui.m_contentFuHuo.m_Btn_huang.visible=PfuSdk.GetOLParamInt("ad_video")==PfuSwitch.ON,this._fui.m_contentFuHuo.m_Btn_huang.visible&&(GameMgr.getInstance().m_gameVideoCount>=PfuSdk.GetOLParamInt("revive_video_number")?(this._fui.m_contentFuHuo.m_Btn_huang.grayed=!0,this._fui.m_contentFuHuo.m_Btn_huang.touchable=!1):(this._fui.m_contentFuHuo.m_Btn_huang.grayed=!1,this._fui.m_contentFuHuo.m_Btn_huang.touchable=!0));},e.prototype.thisOnShareButtonClick=function(){Global.shareGame(!1,function(){});},e.prototype.OnShareButtonClick=function(t){this.clickGuard||(null!=this.tween&&this.tween.pause(),Global.shareGame(!0,function(t){PfuSdk.SUCCESS;}),AudioMgr.getInstance().playButtonSound(),Global.StatisticsRevive(4),Global.StatisticsUIButtonClick(3));},e.prototype.OnCloseButtonClick=function(t){if(!this.clickGuard){this.clickGuard=!0;var e=TalentMgr.getInstance().getHuabanTalentValueByType(TalentType.AutoRevive)+TalentMgr.getInstance().getPlayerTalentValueByType(TalentType.AutoRevive);0<e?this.deathFly(e):this.GoToResultPanel(),AudioMgr.getInstance().playButtonSound();}},e.prototype.OnCickReviveGame=function(t){null!=this.tween&&this.tween.pause(),true||WeChatUtils.GetInstance().IsWeGame()?this.ShowAd():this.OnReviveGame(),AudioMgr.getInstance().playButtonSound();},e.prototype.GoToResultPanel=function(){null!=this.tween&&(this.tween.clear(),this.tween=null),PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_ReviveUI),PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_GameUI),PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_ScoreUI);},e.prototype.deathFly=function(t){null!=this.tween&&(this.tween.clear(),this.tween=null),PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_ReviveUI),GameMgr.getInstance().revivePlayer(),PlayerMgr.getInstance().getCurrentPlayerControll().playerDeathRevive(t),PfuSdk.GetOLParamInt("banner_custom_refresh")==PfuSwitch.ON&&FUIWindow_MainUI.CUR_SHOW_BANNER_AD&&BannerUpdateMgr.getInstance().refreshBannerAD(),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_GAME_FLASH_WHITE),AudioMgr.getInstance().playGameMusic(DTSoundIdPK.DTPK_run_bgm);},e.prototype.Dispose=function(){WeChatOpenUtils.GetInstance().HideShardCanvas(),t.prototype.Dispose.call(this);},e.prototype.updateShareButton=function(){},e.prototype.OnReviveGame=function(){canRelive=false;null!=this.tween&&(this.tween.clear(),this.tween=null),FUIWindow_MainUI.CUR_SHOW_BANNER_AD&&BannerUpdateMgr.getInstance().showBannerAD(),PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_ReviveUI),GameMgr.getInstance().revivePlayer(),PfuSdk.GetOLParamInt("banner_custom_refresh")==PfuSwitch.ON&&FUIWindow_MainUI.CUR_SHOW_BANNER_AD&&BannerUpdateMgr.getInstance().refreshBannerAD(),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_GAME_FLASH_WHITE),AudioMgr.getInstance().playGameMusic(DTSoundIdPK.DTPK_run_bgm),Global.StatisticsRevive(0),this.updateShareButton();},e;}(FUIWindow_ReviveUIVO),SurpassFriend=function t(){},__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_RewardDialogUI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.prototype.OnInitWindow=function(){},e.prototype.ReStart=function(){this._fui.m_reward.m_sunLoader.icon="h5/icon/Img_guang_yellow.png";},e.prototype.Init=function(t,e,n,i){var r=this;if(this._fui.m_reward.m_Graph_modle.icon=t,this._fui.m_reward.m_Text_2day.visible=!1,this._fui.m_reward.m_Text_7day.visible=!1,this._fui.m_reward.m_Img_reward_1.visible=!1,this._fui.m_reward.m_Img_reward_2.visible=!1,this._fui.m_reward.m_Text_shuliang.text="",this._fui.m_reward.t_rotateSun.play(),0<n&&(this._fui.m_reward.m_Text_shuliang.text="x"+n),1==e)this._fui.m_reward.m_Img_reward_2.visible=!0;else if(2==e)this._fui.m_reward.t_awardScale.play(null,-1),this._fui.m_reward.m_Img_reward_1.visible=!0,this._fui.m_reward.m_Text_2day.visible=!0,this._fui.m_reward.m_Text_2day.text="Receive rewards tomorrow";else{this._fui.m_reward.t_awardScale.play(null,-1),this._fui.m_reward.m_Img_reward_1.visible=!0,this._fui.m_reward.m_Text_7day.visible=!0;var a=7-i;FUIWindow_SevenDayUI.IsGain()||a--,this._fui.m_reward.m_Text_7day.text=0==a||1==a?"Receive rewards tomorrow":a+"Receive rewards in the future";}
Laya.timer.once(2e3,this,function(){r._fui.m_reward.t_rotateSun.stop(),r._fui.m_reward.t_awardScale.stop(),PF.FUIPopupManager.GetInstance().ClosePopup(r);});},e;}(FUIWindow_RewardDialogUIVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_Scene=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.homeIds=[],e.child_width=200,e.SMoveGrade=!1,e;}
return __extends(e,t),e.prototype.OnInitWindow=function(){this.Initialize(),this.AddButtonListener();},e.prototype.ReStart=function(){this._fui.m_contentScene.m_Btn_5588game.visible=!1;},e.prototype.AddButtonListener=function(){this._fui.m_contentScene.m_Btn_close.onClick(this,function(){PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_Scene);}),this._fui.m_contentScene.m_Btn_left.onClick(this,this.OnLeftButtonClick),this._fui.m_contentScene.m_Btn_right.onClick(this,this.OnRightButtonClick),this._fui.m_contentScene.m_Btn_lock.onClick(this,this.OnLockButtonClick),this._fui.m_contentScene.m_Btn_5588game.onClick(this,Global.jumpToGameBox);},e.prototype.Initialize=function(){for(var t=DTHomeInfosMGR.getInstance().DTHomeInfoDIC,e=0;e<t.count;e++){var n=t.getKeyByIndex(e);91!=t.get(n).DTPK_id&&this.homeIds.push(n);}
var i=this.homeIds[1];this.homeIds.splice(1,1),this.homeIds.unshift(i),this.InitHome();},e.prototype.InitHome=function(){this._fui.m_contentScene.m_List_scenes.setVirtualAndLoop(),this._fui.m_contentScene.m_List_scenes.itemRenderer=laya.utils.Handler.create(this,this.RenderListItem,null,!1),this._fui.m_contentScene.m_List_scenes.numItems=this.homeIds.length+1,this._fui.m_contentScene.m_List_scenes.on(fairygui.Events.SCROLL,this,this.DoSpecialEffect),this._fui.m_contentScene.m_List_scenes.on(fairygui.Events.SCROLL_END,this,this.OnMoveEnd),this.DoSpecialEffect(),this.OnMoveEnd();},e.prototype.RenderListItem=function(t,e){var n=e.asCom;if((n.data=t)==this.homeIds.length)n.m_texIcon.asLoader.url="",n.m_lbName.text="未知",n.m_contentLock.visible=!0,n.m_texBuilding.visible=!0,n.m_lbCoin.visible=!1,n.m_texMb.visible=!1,n.m_texLock.visible=!1;else{var i=DTHomeInfosMGR.getInstance().DTHomeInfoDIC.get(this.homeIds[t]);n.m_texIcon.asLoader.url=i.DTPK_iconUrl;var r=UserDataMgr.getInstance().getHomeInfo(i.DTPK_id);if(n.m_lbName.text=i.DTPK_name,r.isLocked){n.m_contentLock.visible=!1,n.m_texBuilding.visible=!1,n.m_lbCoin.visible=!1,n.m_texMb.visible=!1,n.m_texLock.visible=!1;var a=DTConsumeInfoMGR.getInstance().DTConsumeInfoDIC.get(i.DTPK_consumeId);n.m_lbCoin.text=a.DTPK_value2.toString();}else n.m_texLock.visible=!1;}},e.prototype.DoSpecialEffect=function(){for(var t=this._fui.m_contentScene.m_List_scenes.scrollPane.posX+this._fui.m_contentScene.m_List_scenes.viewWidth/2,e=this._fui.m_contentScene.m_List_scenes.numChildren,n=0;n<e;n++){var i=this._fui.m_contentScene.m_List_scenes.getChildAt(n),r=Math.abs(t-i.x-i.width/2);if(r>i.width)i.setScale(1,1);else{var a=1+.35*(1-r/i.width);i.setScale(a,a);}}},e.prototype.OnMoveEnd=function(){var t=(this._fui.m_contentScene.m_List_scenes.getFirstChildInView()+1)%this._fui.m_contentScene.m_List_scenes.numItems;t!=this.homeIds.length?UserDataMgr.getInstance().getHomeInfo(this.homeIds[t]).isLocked?(this._fui.m_contentScene.m_Btn_lock.grayed=!1,this._fui.m_contentScene.m_Btn_lock.touchable=!0,1==Game.Constant.inSelectSceneType?this._fui.m_contentScene.m_Btn_lock.title="Invite friends to Play together":this._fui.m_contentScene.m_Btn_lock.title="Watch the video enter"):(this._fui.m_contentScene.m_Btn_lock.grayed=!1,this._fui.m_contentScene.m_Btn_lock.touchable=!0,this._fui.m_contentScene.m_Btn_lock.title="OK "):(this._fui.m_contentScene.m_Btn_lock.grayed=!0,this._fui.m_contentScene.m_Btn_lock.touchable=!1),this.SMoveGrade=!1;},e.prototype.OnLockButtonClick=function(){var t=this,e=(this._fui.m_contentScene.m_List_scenes.getFirstChildInView()+1)%this._fui.m_contentScene.m_List_scenes.numItems;if(e!=this.homeIds.length){var n=UserDataMgr.getInstance().getHomeInfo(this.homeIds[e]),i=DTHomeInfosMGR.getInstance().DTHomeInfoDIC.get(this.homeIds[e]);n.isLocked?1==Game.Constant.inSelectSceneType?Global.shareGame(!0,function(e){e==PfuSdk.SUCCESS&&(t.SelectHomeToGame(i),Global.StatisticsSelectLevelInfo(Game.SFREETYPE.share));}):Global.showIncentiveAD(this,function(e,n){e==PfuSdk.SUCCESS&&t.SelectHomeToGame(i),Global.StatisticsSelectLevelInfo(n);}):this.SelectHomeToGame(i);}},e.prototype.SelectHomeToGame=function(t){Global.loadResourceHomeId=t.DTPK_id,LoadScene.GetInstance().HomeToGame(),PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_Scene),Global.StatisticsStartLevelInfo(Global.loadResourceHomeId,UserDataMgr.getInstance().getUserInfo().playerId);},e.prototype.ListMoveOnce=function(t){var e=this._fui.m_contentScene.m_List_scenes.scrollPane.posX+t*this.child_width;this._fui.m_contentScene.m_List_scenes.scrollPane.setPosX(e,!0);},e.prototype.OnLeftButtonClick=function(t){this.SMoveGrade||(this.SMoveGrade=!0,this.ListMoveOnce(-1),AudioMgr.getInstance().playButtonSound());},e.prototype.OnRightButtonClick=function(t){this.SMoveGrade||(this.SMoveGrade=!0,this.ListMoveOnce(1),AudioMgr.getInstance().playButtonSound());},e;}(FUIWindow_SceneVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_ScoreUI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.schedule=0,e._isClick=!1,e.multiplying=2,e.default_width=172,e;}
return __extends(e,t),e.prototype.OnInitWindow=function(){canRelive=true;canHuaban=true;this._fui.m_contentScore.m_Btn_DoubleCoin.onClick(this,this._DoubleCoin),this._fui.m_contentScore.m_Btn_zailai.onClick(this,this._clickRestart),this._fui.m_contentScore.m_Btn_fanhui.onClick(this,this.OnReturnButtonClick),this._fui.m_contentScore.m_Btn_dianji.onClick(this,this.OnMoreRankClick),this._fui.m_contentScore.m_Btn_5588game.onClick(this,Global.jumpToGameBox),this._fui.m_contentScore.m_Btn_fenxiang.onClick(this,this.OnShareBattle),this.Initialize(),PF.NotificationCenter.GetInstance().AddObserver(this,this.ShareData,Game.NotifName.UI_SCOREPANEL_SHAREDATA);this._fui.m_contentScore.m_Btn_fenxiang.visible=false;},e.prototype.Awake=function(){var t=this;this._fui.m_contentScore.m_Text_score.text="",this.isClicRestart=!1,this.schedule=0,Laya.Tween.to(this,{schedule:GameMgr.getInstance().runDistance},1e3).update=Laya.Handler.create(this,function(){t._fui.m_contentScore.m_Text_score.text=Math.floor(t.schedule).toString();},null,!1),Laya.Tween.to(this,{schedule:GameRewardCount.getInstance().getGameCurrencyByType(DTCurrencyPK.DTPK_Gold)},1e3).update=Laya.Handler.create(this,function(){t._fui.m_contentScore.m_CoinPlane.m_lbCoin.text=Math.floor(t.schedule).toString();},null,!1),SceneMatchingUtils.SetAlignTop(this._fui.m_contentGoToSR);},e.prototype.ReStart=function(){GameRewardCount.getInstance().setGameCurrencyToUser(),UserDataMgr.getInstance().saveData(),this.isClicRestart=!1,PfuSdk.GetOLParamInt("banner_custom_refresh")==PfuSwitch.ON&&BannerUpdateMgr.getInstance().refreshBannerAD(),PfuSdk.GetOLParamInt("ad_video")==PfuSwitch.ON?(this._fui.m_contentScore.m_Btn_DoubleCoin.grayed=!1,this._fui.m_contentScore.m_Btn_DoubleCoin.touchable=!0):(this._fui.m_contentScore.m_Btn_DoubleCoin.grayed=!0,this._fui.m_contentScore.m_Btn_DoubleCoin.touchable=!1),WeChatOpenUtils.GetInstance().SetUserOnlyCloudStorage("score",""+Math.floor(GameMgr.getInstance().runDistance)),this._fui.m_contentScore.m_Btn_5588game.visible=this._fui.m_contentScore.m_Btn_5588game.visible=2==PfuManager.GetInstance().OLParam.show5588,this.ShareData(),Global.StatisticsFinishLevelInfo(Global.loadResourceHomeId,GameRewardCount.getInstance().getGameCurrencyByType(DTCurrencyPK.DTPK_Gold),TerrainMgr.GetInstance().m_currentDifficulty),Global.StatisticsEndLevel(GameRewardCount.getInstance().getGameCurrencyByType(DTCurrencyPK.DTPK_Gold),TerrainMgr.GetInstance().m_currentDifficulty,GameMgr.getInstance().runDistance),this.updateShareButton();},e.prototype.OnShareDoubleClick=function(){var t=this;Global.ShareWith2Second(this,function(e){e==PfuSdk.SUCCESS?t.VideoAward():(WeChatOpenUtils.GetInstance().HideShardCanvas(),Global.showGameDialog("Please share to the group!",function(){PF.FUIPopupManager.GetInstance().ClosePopupTop(),WeChatOpenUtils.GetInstance().ShowSharedCanvas();},function(){WeChatOpenUtils.GetInstance().ShowSharedCanvas();},""));});},e.prototype._DoubleCoin=function(t){var e=this;if(PfuSdk.GetOLParamInt("ad_video")!=PfuSwitch.ON)return this._fui.m_contentScore.m_CoinPlane.t_text.play(),Laya.Tween.to(this,{schedule:GameRewardCount.getInstance().getGameCurrencyByType(DTCurrencyPK.DTPK_Gold)*this.multiplying},1e3).update=Laya.Handler.create(this,function(){e._fui.m_contentScore.m_CoinPlane.m_lbCoin.text=Math.floor(e.schedule).toString(),e._isClick=!1;},null,!1),this.multiplying++,GameRewardCount.getInstance().setGameCurrencyToUser(),void UserDataMgr.getInstance().saveData();PfuSdk.HideBanner(),Global.StatisticsDoubleCoin(0),Global.showIncentiveAD(this,function(t,n){t==PfuSdk.SUCCESS?(e.VideoAward(),e.VideoAwardRefresh(),Global.StatisticsDoubleCoin(2)):t==PfuSdk.VIDEO_SHOW_FAIL?(WeChatOpenUtils.GetInstance().HideShardCanvas(),Global.StatisticsDoubleCoin(4)):(e.VideoAwardRefresh(),WeChatOpenUtils.GetInstance().HideShardCanvas(),Global.StatisticsDoubleCoin(1)),Global.StatisticsMovieType(StatisticsEventSite.double),Global.StatisticsDoubleGoldInfo(GameRewardCount.getInstance().getGameCurrencyByType(DTCurrencyPK.DTPK_Gold),n);},function(){WeChatOpenUtils.GetInstance().ShowSharedCanvas();}),AudioMgr.getInstance().playButtonSound();},e.prototype.VideoAward=function(){var t=this;this._fui.m_contentScore.m_CoinPlane.t_text.play(),Laya.Tween.to(this,{schedule:GameRewardCount.getInstance().getGameCurrencyByType(DTCurrencyPK.DTPK_Gold)*this.multiplying},1e3).update=Laya.Handler.create(this,function(){t._fui.m_contentScore.m_CoinPlane.m_lbCoin.text=Math.floor(t.schedule).toString();},null,!1),this.multiplying++,GameRewardCount.getInstance().setGameCurrencyToUser(),UserDataMgr.getInstance().saveData(),this._fui.m_contentScore.m_Btn_DoubleCoin.grayed=!0,this._fui.m_contentScore.m_Btn_DoubleCoin.touchable=!1,this.updateShareButton();},e.prototype.VideoAwardRefresh=function(){this._isClick=!1,PfuSdk.ShowBanner();},e.prototype._clickRestart=function(t){var e=this;if(!this._isClick&&!this.isClicRestart){this.isClicRestart=!0;var n=UserDataMgr.getInstance().getUserInfo().playerId,i=UserDataMgr.getInstance().getPlayer(n),r=Global.getPlayerDemoTimeSecondInfo(n);i.isLocked&&0==r?(WeChatOpenUtils.GetInstance().HideShardCanvas(),Global.showGameDialog("Continue to try the role!",function(){PfuSdk.GetOLParamInt("ad_video")!=PfuSwitch.ON?(Global.setPlayerTryState(n,60*PfuSdk.GetOLParamInt("tryplayertime")),e.StartGame(),PF.FUIPopupManager.GetInstance().ClosePopupTop(!0)):(BannerUpdateMgr.getInstance().hideBannerAD(),Global.showIncentiveAD(e,function(t,i){t==PfuSdk.SUCCESS&&(Global.setPlayerTryState(n,60*PfuSdk.GetOLParamInt("tryplayertime")),e.StartGame(),PF.FUIPopupManager.GetInstance().ClosePopupTop(!0)),FUIWindow_MainUI.CUR_SHOW_BANNER_AD&&BannerUpdateMgr.getInstance().showBannerAD(),Global.StatisticstrialHeroInfo(n,i);}));},function(){WeChatOpenUtils.GetInstance().ShowSharedCanvas();},"Prompt "),this.isClicRestart=!1,this._isClick=!1):this.StartGame(),AudioMgr.getInstance().playButtonSound();}},e.prototype.StartGame=function(){GameMgr.getInstance().releaseGame(),GameMgr.getInstance().generateGame(),PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_ScoreUI),PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_GameUI),GameMgr.getInstance().beginGame(),WeChatOpenUtils.GetInstance().HideShardCanvas();},e.prototype.OnReturnButtonClick=function(t){PF.FUIManager.GetInstance().DisposeInterface(DTFUIInterfaceIdPK.DTPK_ScoreUI),PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_MainUI),GameMgr.getInstance().releaseGame(),WeChatOpenUtils.GetInstance().HideShardCanvas(),AudioMgr.getInstance().playButtonSound();},e.prototype.OnMoreRankClick=function(t){WeChatOpenUtils.GetInstance().HideShardCanvas(),PF.FUIManager.GetInstance().OpenInterface(DTFUIInterfaceIdPK.DTPK_RankUI),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_RANKPANEL_OPEN,!0),AudioMgr.getInstance().playButtonSound();},e.prototype.updateShareButton=function(){},e.prototype.OnShareBattle=function(t){Global.shareGame(!1,function(t){}),Global.StatisticsDoubleCoin(3),Global.StatisticsUIButtonClick(2),Global.StatisticsShareType(StatisticsEventSite.resultShare);},e.prototype.ShareData=function(){var t=this;Laya.timer.once(400,this,function(){WeChatOpenUtils.GetInstance().ShowSharedCanvas(),WeChatOpenUtils.GetInstance().ShowFriedNeighbor(t.rankList);});},e.prototype.Initialize=function(){this.rankList=new RankList();var t=this._fui.m_contentScore.m_List_lingqu.x,e=this._fui.m_contentScore.m_List_lingqu.y;this.rankList.count=3,this.rankList.ordinates=[];for(var n=0;n<3;n++){var i=this._fui.m_contentScore.m_List_lingqu.getChildAt(n),r=new RnakItemOrdinates();r.rank=new Ordinates(),r.rank.x=t+i.m_lbRank.x+this.default_width*n+20*n,r.rank.y=e+i.m_lbRank.y,r.headIcon=new Ordinates(),r.headIcon.x=t+i.m_texHead.x+this.default_width*n+20*n,r.headIcon.y=e+i.m_texHead.y,r.name=new Ordinates(),r.name.x=t+i.m_lbName.x+this.default_width*n+20*n,r.name.y=e+i.m_lbName.y,r.distance=new Ordinates(),r.distance.x=t+i.m_lbScore.x+this.default_width*n+20*n,r.distance.y=e+i.m_lbScore.y,this.rankList.ordinates.push(r);}},e;}(FUIWindow_ScoreUIVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_SevenDayUI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickGuard=!1,e;}
return __extends(e,t),e.prototype.OnInitWindow=function(){this._fui.m_contentDailyGift.m_Btn_gankan.onClick(this,this.__ClickVideoAward),this._fui.m_contentDailyGift.m_Btn_tiaoguo.onClick(this,this.__ClickSkip),this._fui.m_contentDailyGift.m_Btn_Share.onClick(this,this.__ClickShare),this._fui.m_contentDailyGift.m_Btb_5588game.onClick(this,Global.jumpToGameBox),this._fui.m_contentDailyGift.m_Btn_ImGain.onClick(this,this.onImGainButtonClick),this._fui.m_contentDailyGift.m_Com_qian.visible=!1;},e.prototype.ReStart=function(){this.Init(),this._fui.m_contentDailyGift.m_Btn_gankan.visible=0!=PfuSdk.GetOLParam().gift,this._fui.m_contentDailyGift.m_Btn_Share.visible=!0;var t=DTAwardInfoMGR.getInstance().DTAwardInfoDIC.get(this._curInf.DTPK_awardId);if(this._fui.m_contentDailyGift.m_Com_icon.icon=this._curInf.DTPK_customImageUrl,1==t.DTPK_type){if(this.isCancelNextDate())this._fui.m_contentDailyGift.m_Btn_gankan.visible=!0,this._fui.m_contentDailyGift.m_Btn_ImGain.visible=!1;else{var n=Laya.LocalStorage.getItem(e.KEY_CANCEL_AD);this._fui.m_contentDailyGift.m_Btn_ImGain.visible=null==n||"FALSE"==n||""==n?!(this._fui.m_contentDailyGift.m_Btn_gankan.visible=!0):(this._fui.m_contentDailyGift.m_Btn_ImGain.grayed=!1,this._fui.m_contentDailyGift.m_Btn_ImGain.touchable=!0,!(this._fui.m_contentDailyGift.m_Btn_gankan.visible=!1));}}else this._fui.m_contentDailyGift.m_Btn_gankan.visible=!0,this._fui.m_contentDailyGift.m_Btn_gankan.title="get it right now",this._fui.m_contentDailyGift.m_Btn_ImGain.visible=!1;},e.prototype.Init=function(){var t=e.GetData();this._curInf=this.GetAwardInfo(t.awardIndex);var n=DTAwardInfoMGR.getInstance().DTAwardInfoDIC.get(this._curInf.DTPK_awardId);this._fui.m_contentDailyGift.m_Com_icon.icon=this._curInf.DTPK_customImageUrl;var i="";1==n.DTPK_type&&(i="x"+n.DTPK_value2),this._fui.m_contentDailyGift.m_Text_shuliang.text=i;},e.prototype.GetAwardInfo=function(t){for(var e=DTSevenDayAwardInfoMGR.getInstance().DTSevenDayAwardInfoDIC.count,n=[],i=0;i<e;i++){var r=DTSevenDayAwardInfoMGR.getInstance().DTSevenDayAwardInfoDIC.getKeyByIndex(i),a=DTSevenDayAwardInfoMGR.getInstance().DTSevenDayAwardInfoDIC.get(r);0==a.DTPK_loopType&&n.push(a);}
var o=e<=t?n.length:0,s=(t-o)%(e-o)+o;return DTSevenDayAwardInfoMGR.getInstance().DTSevenDayAwardInfoDIC.get(s+1);},e.GetData=function(){var t=Laya.LocalStorage.getJSON(e.KEY_TODAY);return null!=t&&""!=t?this._saveToday=JSON.parse(t):(this._saveToday=new SevenDayData(),this._saveToday.time=0,this._saveToday.awardIndex=0),this._saveToday;},e.IsShowQiandao=function(){var t=e.GetData();if(0==PfuSdk.GetOLParam().gift)return!1;if(PfuSdk.GetOLParam().ad_video==PfuSwitch.OFF)return!1;if(0==t.time)return!0;var n=new Date(),i=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime();return t.time<=i;},e.IsGain=function(){var t=e.GetData(),n=new Date(),i=new Date(n.getFullYear(),n.getMonth(),n.getDate());return t.time>i.getTime();},e.prototype.isCancelNextDate=function(){var t=Laya.LocalStorage.getJSON(e.KEY_CANCEL_DAY),n=new SevenDayData();null!=t&&""!=t?n=JSON.parse(t):(n=new SevenDayData()).time=0;var i=new Date(),r=new Date(i.getFullYear(),i.getMonth(),i.getDate()).getTime();return n.time<=r;},e.prototype.saveCancelData=function(){var t=new Date(),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=new Date(n.getTime()+864e5),r=new SevenDayData();r.time=i.getTime(),Laya.LocalStorage.setJSON(e.KEY_CANCEL_DAY,JSON.stringify(r));},e.prototype.SaveData=function(t){AwardMgr.GetInstance().awardById(this._curInf.DTPK_awardId,t),UserDataMgr.getInstance().SoleSaveCurrencyInfo(),UserDataMgr.getInstance().SoleSavePlayerInfo();var n=new Date(),i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),r=new Date(i.getTime()+864e5);e._saveToday.time=r.getTime(),e._saveToday.awardIndex++,Laya.LocalStorage.setJSON(e.KEY_TODAY,JSON.stringify(e._saveToday));},e.prototype.onImGainButtonClick=function(t){this._fui.m_contentDailyGift.m_Btn_ImGain.grayed=!0,this._fui.m_contentDailyGift.m_Btn_ImGain.touchable=!1,AudioMgr.getInstance().playButtonSound(),this.AwardFinish(1);},e.prototype.__ClickVideoAward=function(t){var n=this;e.isTestDebug?this.AwardFinish(2):(PfuSdk.HideBanner(),Global.showIncentiveAD(this,function(t,i){if(t==PfuSdk.SUCCESS)n.AwardFinish(2),n._fui.m_contentDailyGift.m_Btn_gankan.grayed=!0,n._fui.m_contentDailyGift.m_Btn_ImGain.grayed=!0,n._fui.m_contentDailyGift.m_Btn_gankan.touchable=!1,n._fui.m_contentDailyGift.m_Btn_ImGain.touchable=!1;else{var r=DTAwardInfoMGR.getInstance().DTAwardInfoDIC.get(n._curInf.DTPK_awardId);n._fui.m_contentDailyGift.m_Com_icon.icon=n._curInf.DTPK_customImageUrl,1==r.DTPK_type&&(n._fui.m_contentDailyGift.m_Btn_gankan.visible=!1,n._fui.m_contentDailyGift.m_Btn_ImGain.visible=!0,Laya.LocalStorage.setItem(e.KEY_CANCEL_AD,"TRUE"),n.saveCancelData());}
n.VideoAwardRefresh(),Global.StatisticsGiftAwardInfo(i);}),AudioMgr.getInstance().playButtonSound());},e.prototype.AwardFinish=function(t){this.SaveData(t),PF.NotificationCenter.GetInstance().PostNotification(Game.NotifName.UI_QIANDAO_COMPLETED);var n=PF.FUIPopupManager.GetInstance().ShowPopup(DTFUIWindowIdPK.DTPK_RewardDialogUI),i=DTAwardInfoMGR.getInstance().DTAwardInfoDIC.get(this._curInf.DTPK_awardId),r=2==i.DTPK_type?0:i.DTPK_value2;n.Init(this._curInf.DTPK_customImageUrl,1,r*t,e._saveToday.awardIndex),Laya.LocalStorage.setItem(e.KEY_CANCEL_AD,"FALSE");},e.prototype.VideoAwardRefresh=function(){PfuSdk.ShowBanner(),this.clickGuard=!1;},e.prototype.__ClickShare=function(t){this.clickGuard||(Global.shareGame(!0,function(t){}),AudioMgr.getInstance().playButtonSound());},e.prototype.__ClickSkip=function(t){this.clickGuard||(this.clickGuard=!0,PF.FUIPopupManager.GetInstance().ClosePopup(this,!0),AudioMgr.getInstance().playButtonSound());},e.prototype.CheckSevenDayDailog=function(){if(e._saveToday.awardIndex<Game.Constant.SEVEN_DAY_KEY-1)if(e._saveToday.awardIndex<1){var t=DTSevenDayAwardInfoMGR.getInstance().DTSevenDayAwardInfoDIC.get(Game.Constant.TOW_DAY_KEY);PF.FUIPopupManager.GetInstance().ShowPopup(DTFUIWindowIdPK.DTPK_RewardDialogUI).Init(t.DTPK_customImageUrl,2,0,e._saveToday.awardIndex);}else t=DTSevenDayAwardInfoMGR.getInstance().DTSevenDayAwardInfoDIC.get(Game.Constant.SEVEN_DAY_KEY),PF.FUIPopupManager.GetInstance().ShowPopup(DTFUIWindowIdPK.DTPK_RewardDialogUI).Init(t.DTPK_customImageUrl,3,0,e._saveToday.awardIndex);},e.isTestDebug=!1,e.KEY_TODAY="s_SevenDay",e.KEY_CANCEL_AD="cancelAd",e.KEY_CANCEL_DAY="cancelDate",e;}(FUIWindow_SevenDayUIVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_Tips=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.prototype.OnInitWindow=function(){},e.prototype.ReStart=function(){Laya.timer.once(500,this,function(){PF.FUIPopupManager.GetInstance().ClosePopupTop();});},e;}(FUIWindow_TreasureUIVO),__extends=void 0&&(void 0).__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};return function(e,n){function i(){this.constructor=e;}
t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());};}(),FUIWindow_TreasureUI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}
return __extends(e,t),e.prototype.OnInitWindow=function(){this._fui.m_Com_meirilibao.m_Btn_give.onClick(this,this.___Share),this._fui.m_Com_meirilibao.m_Btn_tiaoguo.onClick(this,this.__tiaoguo);},e.prototype.ReStart=function(){},e.prototype.__tiaoguo=function(t){this.randomProp(),PF.FUIPopupManager.GetInstance().ClosePopup(this),GameMgr.getInstance().chestpauseToGaming();},e.prototype.___Share=function(t){var e=this;Global.shareGame(!0,function(t){PfuSdk.SUCCESS,e.randomProp(),PF.FUIPopupManager.GetInstance().ClosePopup(e),GameMgr.getInstance().chestpauseToGaming();});},e.prototype.randomProp=function(){if(GameMgr.isInRun()){var t=DTConstantInfoMGR.getInstance().DTPropRandomDIC.get(30),e=PF.BXRandomUtils.RandomPropIndex(t.DTPK_odds),n=t.DTPK_randomIds[e];switch(DTTerrainObjectInfoMGR.getInstance().DTTerrainObjectDIC.get(n).DTPK_typeParam){case 2:BufferMgr.getInstance().buffer(BufferType.doubleCoin);break;case 3:BufferMgr.getInstance().buffer(BufferType.shield);break;case 4:BufferMgr.getInstance().buffer(BufferType.magnet);break;case 5:BufferMgr.getInstance().buffer(BufferType.flight);}}},e;}(FUIWindow_TreasureUIVO),LayaAir3D=function(){function t(){var t=this;Laya.MiniAdpter.init(!0),Laya.MiniAdpter.nativefiles=["res/special/","res/uilocal/","subpackage/"],Laya3D.init(SceneMatchingUtils.DESIGN_WIDTH,SceneMatchingUtils.DESIGN_HEIGHT,!0),SceneMatchingUtils.WIDTH=laya.utils.Browser.width,SceneMatchingUtils.HEIGTH=laya.utils.Browser.height,Laya.stage.scaleMode=Laya.Stage.SCALE_SHOWALL,Laya.stage.screenMode="none",Laya.stage.alignH=Laya.Stage.ALIGN_CENTER,Laya.stage.alignV=Laya.Stage.ALIGN_MIDDLE,Laya.loader.retryNum=5,Laya.loader.maxLoader=10,this.InitCurvedWroldShader(),PfuSdk.InitConfig(this,function(){WeChatUtils.GetInstance().IsWeGame()&&(Laya.URL.basePath=PfuSdk.GetCdnPath()),Laya.ResourceVersion.type=Laya.ResourceVersion.FILENAME_VERSION,Laya.ResourceVersion.enable("version.json",Laya.Handler.create(t,function(){t.InitPfuSdkParams(),t.BeginLoad(),WeChatOpenUtils.GetInstance().InitSharedCanvas();})),StatisticsMgr.Init(PfuSdk.GetConfig().mtaAppId,PfuSdk.GetConfig().mtaEventId);}),PfuSdk.OnShow(function(){ComponentRootManger.getInstance().GetScene()&&GameMgr.getInstance().onAppShow();}),PfuSdk.OnHide(function(){ComponentRootManger.getInstance().GetScene()&&GameMgr.getInstance().onAppHide();}),PFU.UI.PfuSdkFairyUI.CreateUI();}
return t.CreateBanner=function(){},t.prototype.BeginLoad=function(){FirstLoad.GetInstance().startLoader();},t.prototype.InitPfuSdkParams=function(){},t.prototype.ShowSplashAd=function(t){},t.prototype.InitCurvedWroldShader=function(){curvedworld.Manager.distance=50,curvedworld.BlinnPhongMaterial.InitShander(),curvedworld.ShurikenParticleMaterial.InitShander();},t;}();new LayaAir3D();}).call(this,__webpack_require__(0),__webpack_require__(5),__webpack_require__(18)(module));},function(t,e,n){(function(t){var i=typeof t!=="undefined"&&t||typeof self!=="undefined"&&self||window;var r=Function.prototype.apply;e.setTimeout=function(){return new a(r.call(setTimeout,i,arguments),clearTimeout);};e.setInterval=function(){return new a(r.call(setInterval,i,arguments),clearInterval);};e.clearTimeout=e.clearInterval=function(t){if(t){t.close();}};function a(t,e){this._id=t;this._clearFn=e;}
a.prototype.unref=a.prototype.ref=function(){};a.prototype.close=function(){this._clearFn.call(i,this._id);};e.enroll=function(t,e){clearTimeout(t._idleTimeoutId);t._idleTimeout=e;};e.unenroll=function(t){clearTimeout(t._idleTimeoutId);t._idleTimeout=-1;};e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;if(e>=0){t._idleTimeoutId=setTimeout(function e(){if(t._onTimeout)t._onTimeout();},e);}};n(17);e.setImmediate=typeof self!=="undefined"&&self.setImmediate||typeof t!=="undefined"&&t.setImmediate||this&&this.setImmediate;e.clearImmediate=typeof self!=="undefined"&&self.clearImmediate||typeof t!=="undefined"&&t.clearImmediate||this&&this.clearImmediate;}).call(this,n(3));},function(t,e,n){(function(t,e){(function(t,n){"use strict";if(t.setImmediate){return;}
var i=1;var r={};var a=false;var o=t.document;var s;function l(t){if(typeof t!=="function"){t=new Function(""+t);}
var e=new Array(arguments.length-1);for(var n=0;n<e.length;n++){e[n]=arguments[n+1];}
var a={callback:t,args:e};r[i]=a;s(i);return i++;}
function u(t){delete r[t];}
function h(t){var e=t.callback;var i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i);break;}}
function c(t){if(a){setTimeout(c,0,t);}else{var e=r[t];if(e){a=true;try{h(e);}finally{u(t);a=false;}}}}
function _(){s=function(t){e.nextTick(function(){c(t);});};}
function f(){if(t.postMessage&&!t.importScripts){var e=true;var n=t.onmessage;t.onmessage=function(){e=false;};t.postMessage("","*");t.onmessage=n;return e;}}
function d(){var e="setImmediate$"+Math.random()+"$";var n=function(n){if(n.source===t&&typeof n.data==="string"&&n.data.indexOf(e)===0){c(+n.data.slice(e.length));}};if(t.addEventListener){t.addEventListener("message",n,false);}else{t.attachEvent("onmessage",n);}
s=function(n){t.postMessage(e+n,"*");};}
function p(){var t=new MessageChannel();t.port1.onmessage=function(t){var e=t.data;c(e);};s=function(e){t.port2.postMessage(e);};}
function m(){var t=o.documentElement;s=function(e){var n=o.createElement("script");n.onreadystatechange=function(){c(e);n.onreadystatechange=null;t.removeChild(n);n=null;};t.appendChild(n);};}
function g(){s=function(t){setTimeout(c,0,t);};}
var y=Object.getPrototypeOf&&Object.getPrototypeOf(t);y=y&&y.setTimeout?y:t;if({}.toString.call(t.process)==="[object process]"){_();}else if(f()){d();}else if(t.MessageChannel){p();}else if(o&&"onreadystatechange"in o.createElement("script")){m();}else{g();}
y.setImmediate=l;y.clearImmediate=u;})(typeof self==="undefined"?typeof t==="undefined"?this:t:self);}).call(this,n(3),n(6));},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){t.deprecate=function(){};t.paths=[];if(!t.children)t.children=[];Object.defineProperty(t,"loaded",{enumerable:true,get:function(){return t.l;}});Object.defineProperty(t,"id",{enumerable:true,get:function(){return t.i;}});t.webpackPolyfill=1;}
return t;};},function(t,e,n){"use strict";(function(t){var i=n(20);var r=n(21);var a=n(22);e.Buffer=u;e.SlowBuffer=v;e.INSPECT_MAX_BYTES=50;u.TYPED_ARRAY_SUPPORT=t.TYPED_ARRAY_SUPPORT!==undefined?t.TYPED_ARRAY_SUPPORT:o();e.kMaxLength=s();function o(){try{var t=new Uint8Array(1);t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42;}};return t.foo()===42&&typeof t.subarray==="function"&&t.subarray(1,1).byteLength===0;}catch(t){return false;}}
function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823;}
function l(t,e){if(s()<e){throw new RangeError("Invalid typed array length");}
if(u.TYPED_ARRAY_SUPPORT){t=new Uint8Array(e);t.__proto__=u.prototype;}else{if(t===null){t=new u(e);}
t.length=e;}
return t;}
function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u)){return new u(t,e,n);}
if(typeof t==="number"){if(typeof e==="string"){throw new Error("If encoding is specified then the first argument must be a string");}
return f(this,t);}
return h(this,t,e,n);}
u.poolSize=8192;u._augment=function(t){t.__proto__=u.prototype;return t;};function h(t,e,n,i){if(typeof e==="number"){throw new TypeError('"value" argument must not be a number');}
if(typeof ArrayBuffer!=="undefined"&&e instanceof ArrayBuffer){return m(t,e,n,i);}
if(typeof e==="string"){return d(t,e,n);}
return g(t,e);}
u.from=function(t,e,n){return h(null,t,e,n);};if(u.TYPED_ARRAY_SUPPORT){u.prototype.__proto__=Uint8Array.prototype;u.__proto__=Uint8Array;if(typeof Symbol!=="undefined"&&Symbol.species&&u[Symbol.species]===u){Object.defineProperty(u,Symbol.species,{value:null,configurable:true});}}
function c(t){if(typeof t!=="number"){throw new TypeError('"size" argument must be a number');}else if(t<0){throw new RangeError('"size" argument must not be negative');}}
function _(t,e,n,i){c(e);if(e<=0){return l(t,e);}
if(n!==undefined){return typeof i==="string"?l(t,e).fill(n,i):l(t,e).fill(n);}
return l(t,e);}
u.alloc=function(t,e,n){return _(null,t,e,n);};function f(t,e){c(e);t=l(t,e<0?0:y(e)|0);if(!u.TYPED_ARRAY_SUPPORT){for(var n=0;n<e;++n){t[n]=0;}}
return t;}
u.allocUnsafe=function(t){return f(null,t);};u.allocUnsafeSlow=function(t){return f(null,t);};function d(t,e,n){if(typeof n!=="string"||n===""){n="utf8";}
if(!u.isEncoding(n)){throw new TypeError('"encoding" must be a valid string encoding');}
var i=I(e,n)|0;t=l(t,i);var r=t.write(e,n);if(r!==i){t=t.slice(0,r);}
return t;}
function p(t,e){var n=e.length<0?0:y(e.length)|0;t=l(t,n);for(var i=0;i<n;i+=1){t[i]=e[i]&255;}
return t;}
function m(t,e,n,i){e.byteLength;if(n<0||e.byteLength<n){throw new RangeError("'offset' is out of bounds");}
if(e.byteLength<n+(i||0)){throw new RangeError("'length' is out of bounds");}
if(n===undefined&&i===undefined){e=new Uint8Array(e);}else if(i===undefined){e=new Uint8Array(e,n);}else{e=new Uint8Array(e,n,i);}
if(u.TYPED_ARRAY_SUPPORT){t=e;t.__proto__=u.prototype;}else{t=p(t,e);}
return t;}
function g(t,e){if(u.isBuffer(e)){var n=y(e.length)|0;t=l(t,n);if(t.length===0){return t;}
e.copy(t,0,0,n);return t;}
if(e){if(typeof ArrayBuffer!=="undefined"&&e.buffer instanceof ArrayBuffer||"length"in e){if(typeof e.length!=="number"||et(e.length)){return l(t,0);}
return p(t,e);}
if(e.type==="Buffer"&&a(e.data)){return p(t,e.data);}}
throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}
function y(t){if(t>=s()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+s().toString(16)+" bytes");}
return t|0;}
function v(t){if(+t!=t){t=0;}
return u.alloc(+t);}
u.isBuffer=function t(e){return!!(e!=null&&e._isBuffer);};u.compare=function t(e,n){if(!u.isBuffer(e)||!u.isBuffer(n)){throw new TypeError("Arguments must be Buffers");}
if(e===n)return 0;var i=e.length;var r=n.length;for(var a=0,o=Math.min(i,r);a<o;++a){if(e[a]!==n[a]){i=e[a];r=n[a];break;}}
if(i<r)return-1;if(r<i)return 1;return 0;};u.isEncoding=function t(e){switch(String(e).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return true;default:return false;}};u.concat=function t(e,n){if(!a(e)){throw new TypeError('"list" argument must be an Array of Buffers');}
if(e.length===0){return u.alloc(0);}
var i;if(n===undefined){n=0;for(i=0;i<e.length;++i){n+=e[i].length;}}
var r=u.allocUnsafe(n);var o=0;for(i=0;i<e.length;++i){var s=e[i];if(!u.isBuffer(s)){throw new TypeError('"list" argument must be an Array of Buffers');}
s.copy(r,o);o+=s.length;}
return r;};function I(t,e){if(u.isBuffer(t)){return t.length;}
if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer)){return t.byteLength;}
if(typeof t!=="string"){t=""+t;}
var n=t.length;if(n===0)return 0;var i=false;for(;;){switch(e){case "ascii":case "latin1":case "binary":return n;case "utf8":case "utf-8":case undefined:return Z(t).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return n*2;case "hex":return n>>>1;case "base64":return Q(t).length;default:if(i)return Z(t).length;e=(""+e).toLowerCase();i=true;}}}
u.byteLength=I;function x(t,e,n){var i=false;if(e===undefined||e<0){e=0;}
if(e>this.length){return "";}
if(n===undefined||n>this.length){n=this.length;}
if(n<=0){return "";}
n>>>=0;e>>>=0;if(n<=e){return "";}
if(!t)t="utf8";while(true){switch(t){case "hex":return N(this,e,n);case "utf8":case "utf-8":return O(this,e,n);case "ascii":return F(this,e,n);case "latin1":case "binary":return V(this,e,n);case "base64":return A(this,e,n);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return U(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase();i=true;}}}
u.prototype._isBuffer=true;function T(t,e,n){var i=t[e];t[e]=t[n];t[n]=i;}
u.prototype.swap16=function t(){var e=this.length;if(e%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits");}
for(var n=0;n<e;n+=2){T(this,n,n+1);}
return this;};u.prototype.swap32=function t(){var e=this.length;if(e%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits");}
for(var n=0;n<e;n+=4){T(this,n,n+3);T(this,n+1,n+2);}
return this;};u.prototype.swap64=function t(){var e=this.length;if(e%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits");}
for(var n=0;n<e;n+=8){T(this,n,n+7);T(this,n+1,n+6);T(this,n+2,n+5);T(this,n+3,n+4);}
return this;};u.prototype.toString=function t(){var e=this.length|0;if(e===0)return "";if(arguments.length===0)return O(this,0,e);return x.apply(this,arguments);};u.prototype.equals=function t(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(this===e)return true;return u.compare(this,e)===0;};u.prototype.inspect=function t(){var n="";var i=e.INSPECT_MAX_BYTES;if(this.length>0){n=this.toString("hex",0,i).match(/.{2}/g).join(" ");if(this.length>i)n+=" ... ";}
return "<Buffer "+n+">";};u.prototype.compare=function t(e,n,i,r,a){if(!u.isBuffer(e)){throw new TypeError("Argument must be a Buffer");}
if(n===undefined){n=0;}
if(i===undefined){i=e?e.length:0;}
if(r===undefined){r=0;}
if(a===undefined){a=this.length;}
if(n<0||i>e.length||r<0||a>this.length){throw new RangeError("out of range index");}
if(r>=a&&n>=i){return 0;}
if(r>=a){return-1;}
if(n>=i){return 1;}
n>>>=0;i>>>=0;r>>>=0;a>>>=0;if(this===e)return 0;var o=a-r;var s=i-n;var l=Math.min(o,s);var h=this.slice(r,a);var c=e.slice(n,i);for(var _=0;_<l;++_){if(h[_]!==c[_]){o=h[_];s=c[_];break;}}
if(o<s)return-1;if(s<o)return 1;return 0;};function S(t,e,n,i,r){if(t.length===0)return-1;if(typeof n==="string"){i=n;n=0;}else if(n>2147483647){n=2147483647;}else if(n<-2147483648){n=-2147483648;}
n=+n;if(isNaN(n)){n=r?0:t.length-1;}
if(n<0)n=t.length+n;if(n>=t.length){if(r)return-1;else n=t.length-1;}else if(n<0){if(r)n=0;else return-1;}
if(typeof e==="string"){e=u.from(e,i);}
if(u.isBuffer(e)){if(e.length===0){return-1;}
return b(t,e,n,i,r);}else if(typeof e==="number"){e=e&255;if(u.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(r){return Uint8Array.prototype.indexOf.call(t,e,n);}else{return Uint8Array.prototype.lastIndexOf.call(t,e,n);}}
return b(t,[e],n,i,r);}
throw new TypeError("val must be string, number or Buffer");}
function b(t,e,n,i,r){var a=1;var o=t.length;var s=e.length;if(i!==undefined){i=String(i).toLowerCase();if(i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le"){if(t.length<2||e.length<2){return-1;}
a=2;o/=2;s/=2;n/=2;}}
function l(t,e){if(a===1){return t[e];}else{return t.readUInt16BE(e*a);}}
var u;if(r){var h=-1;for(u=n;u<o;u++){if(l(t,u)===l(e,h===-1?0:u-h)){if(h===-1)h=u;if(u-h+1===s)return h*a;}else{if(h!==-1)u-=u-h;h=-1;}}}else{if(n+s>o)n=o-s;for(u=n;u>=0;u--){var c=true;for(var _=0;_<s;_++){if(l(t,u+_)!==l(e,_)){c=false;break;}}
if(c)return u;}}
return-1;}
u.prototype.includes=function t(e,n,i){return this.indexOf(e,n,i)!==-1;};u.prototype.indexOf=function t(e,n,i){return S(this,e,n,i,true);};u.prototype.lastIndexOf=function t(e,n,i){return S(this,e,n,i,false);};function w(t,e,n,i){n=Number(n)||0;var r=t.length-n;if(!i){i=r;}else{i=Number(i);if(i>r){i=r;}}
var a=e.length;if(a%2!==0)throw new TypeError("Invalid hex string");if(i>a/2){i=a/2;}
for(var o=0;o<i;++o){var s=parseInt(e.substr(o*2,2),16);if(isNaN(s))return o;t[n+o]=s;}
return o;}
function D(t,e,n,i){return tt(Z(e,t.length-n),t,n,i);}
function C(t,e,n,i){return tt(J(e),t,n,i);}
function E(t,e,n,i){return C(t,e,n,i);}
function P(t,e,n,i){return tt(Q(e),t,n,i);}
function M(t,e,n,i){return tt($(e,t.length-n),t,n,i);}
u.prototype.write=function t(e,n,i,r){if(n===undefined){r="utf8";i=this.length;n=0;}else if(i===undefined&&typeof n==="string"){r=n;i=this.length;n=0;}else if(isFinite(n)){n=n|0;if(isFinite(i)){i=i|0;if(r===undefined)r="utf8";}else{r=i;i=undefined;}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");}
var a=this.length-n;if(i===undefined||i>a)i=a;if(e.length>0&&(i<0||n<0)||n>this.length){throw new RangeError("Attempt to write outside buffer bounds");}
if(!r)r="utf8";var o=false;for(;;){switch(r){case "hex":return w(this,e,n,i);case "utf8":case "utf-8":return D(this,e,n,i);case "ascii":return C(this,e,n,i);case "latin1":case "binary":return E(this,e,n,i);case "base64":return P(this,e,n,i);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return M(this,e,n,i);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase();o=true;}}};u.prototype.toJSON=function t(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)};};function A(t,e,n){if(e===0&&n===t.length){return i.fromByteArray(t);}else{return i.fromByteArray(t.slice(e,n));}}
function O(t,e,n){n=Math.min(t.length,n);var i=[];var r=e;while(r<n){var a=t[r];var o=null;var s=a>239?4:a>223?3:a>191?2:1;if(r+s<=n){var l,u,h,c;switch(s){case 1:if(a<128){o=a;}
break;case 2:l=t[r+1];if((l&192)===128){c=(a&31)<<6|l&63;if(c>127){o=c;}}
break;case 3:l=t[r+1];u=t[r+2];if((l&192)===128&&(u&192)===128){c=(a&15)<<12|(l&63)<<6|u&63;if(c>2047&&(c<55296||c>57343)){o=c;}}
break;case 4:l=t[r+1];u=t[r+2];h=t[r+3];if((l&192)===128&&(u&192)===128&&(h&192)===128){c=(a&15)<<18|(l&63)<<12|(u&63)<<6|h&63;if(c>65535&&c<1114112){o=c;}}}}
if(o===null){o=65533;s=1;}else if(o>65535){o-=65536;i.push(o>>>10&1023|55296);o=56320|o&1023;}
i.push(o);r+=s;}
return L(i);}
var R=4096;function L(t){var e=t.length;if(e<=R){return String.fromCharCode.apply(String,t);}
var n="";var i=0;while(i<e){n+=String.fromCharCode.apply(String,t.slice(i,i+=R));}
return n;}
function F(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r){i+=String.fromCharCode(t[r]&127);}
return i;}
function V(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r){i+=String.fromCharCode(t[r]);}
return i;}
function N(t,e,n){var i=t.length;if(!e||e<0)e=0;if(!n||n<0||n>i)n=i;var r="";for(var a=e;a<n;++a){r+=q(t[a]);}
return r;}
function U(t,e,n){var i=t.slice(e,n);var r="";for(var a=0;a<i.length;a+=2){r+=String.fromCharCode(i[a]+i[a+1]*256);}
return r;}
u.prototype.slice=function t(e,n){var i=this.length;e=~~e;n=n===undefined?i:~~n;if(e<0){e+=i;if(e<0)e=0;}else if(e>i){e=i;}
if(n<0){n+=i;if(n<0)n=0;}else if(n>i){n=i;}
if(n<e)n=e;var r;if(u.TYPED_ARRAY_SUPPORT){r=this.subarray(e,n);r.__proto__=u.prototype;}else{var a=n-e;r=new u(a,undefined);for(var o=0;o<a;++o){r[o]=this[o+e];}}
return r;};function G(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length");}
u.prototype.readUIntLE=function t(e,n,i){e=e|0;n=n|0;if(!i)G(e,n,this.length);var r=this[e];var a=1;var o=0;while(++o<n&&(a*=256)){r+=this[e+o]*a;}
return r;};u.prototype.readUIntBE=function t(e,n,i){e=e|0;n=n|0;if(!i){G(e,n,this.length);}
var r=this[e+--n];var a=1;while(n>0&&(a*=256)){r+=this[e+--n]*a;}
return r;};u.prototype.readUInt8=function t(e,n){if(!n)G(e,1,this.length);return this[e];};u.prototype.readUInt16LE=function t(e,n){if(!n)G(e,2,this.length);return this[e]|this[e+1]<<8;};u.prototype.readUInt16BE=function t(e,n){if(!n)G(e,2,this.length);return this[e]<<8|this[e+1];};u.prototype.readUInt32LE=function t(e,n){if(!n)G(e,4,this.length);return(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216;};u.prototype.readUInt32BE=function t(e,n){if(!n)G(e,4,this.length);return this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3]);};u.prototype.readIntLE=function t(e,n,i){e=e|0;n=n|0;if(!i)G(e,n,this.length);var r=this[e];var a=1;var o=0;while(++o<n&&(a*=256)){r+=this[e+o]*a;}
a*=128;if(r>=a)r-=Math.pow(2,8*n);return r;};u.prototype.readIntBE=function t(e,n,i){e=e|0;n=n|0;if(!i)G(e,n,this.length);var r=n;var a=1;var o=this[e+--r];while(r>0&&(a*=256)){o+=this[e+--r]*a;}
a*=128;if(o>=a)o-=Math.pow(2,8*n);return o;};u.prototype.readInt8=function t(e,n){if(!n)G(e,1,this.length);if(!(this[e]&128))return this[e];return(255-this[e]+1)*-1;};u.prototype.readInt16LE=function t(e,n){if(!n)G(e,2,this.length);var i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i;};u.prototype.readInt16BE=function t(e,n){if(!n)G(e,2,this.length);var i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i;};u.prototype.readInt32LE=function t(e,n){if(!n)G(e,4,this.length);return this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24;};u.prototype.readInt32BE=function t(e,n){if(!n)G(e,4,this.length);return this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3];};u.prototype.readFloatLE=function t(e,n){if(!n)G(e,4,this.length);return r.read(this,e,true,23,4);};u.prototype.readFloatBE=function t(e,n){if(!n)G(e,4,this.length);return r.read(this,e,false,23,4);};u.prototype.readDoubleLE=function t(e,n){if(!n)G(e,8,this.length);return r.read(this,e,true,52,8);};u.prototype.readDoubleBE=function t(e,n){if(!n)G(e,8,this.length);return r.read(this,e,false,52,8);};function B(t,e,n,i,r,a){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<a)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range");}
u.prototype.writeUIntLE=function t(e,n,i,r){e=+e;n=n|0;i=i|0;if(!r){var a=Math.pow(2,8*i)-1;B(this,e,n,i,a,0);}
var o=1;var s=0;this[n]=e&255;while(++s<i&&(o*=256)){this[n+s]=e/o&255;}
return n+i;};u.prototype.writeUIntBE=function t(e,n,i,r){e=+e;n=n|0;i=i|0;if(!r){var a=Math.pow(2,8*i)-1;B(this,e,n,i,a,0);}
var o=i-1;var s=1;this[n+o]=e&255;while(--o>=0&&(s*=256)){this[n+o]=e/s&255;}
return n+i;};u.prototype.writeUInt8=function t(e,n,i){e=+e;n=n|0;if(!i)B(this,e,n,1,255,0);if(!u.TYPED_ARRAY_SUPPORT)e=Math.floor(e);this[n]=e&255;return n+1;};function k(t,e,n,i){if(e<0)e=65535+e+1;for(var r=0,a=Math.min(t.length-n,2);r<a;++r){t[n+r]=(e&255<<8*(i?r:1-r))>>>(i?r:1-r)*8;}}
u.prototype.writeUInt16LE=function t(e,n,i){e=+e;n=n|0;if(!i)B(this,e,n,2,65535,0);if(u.TYPED_ARRAY_SUPPORT){this[n]=e&255;this[n+1]=e>>>8;}else{k(this,e,n,true);}
return n+2;};u.prototype.writeUInt16BE=function t(e,n,i){e=+e;n=n|0;if(!i)B(this,e,n,2,65535,0);if(u.TYPED_ARRAY_SUPPORT){this[n]=e>>>8;this[n+1]=e&255;}else{k(this,e,n,false);}
return n+2;};function H(t,e,n,i){if(e<0)e=4294967295+e+1;for(var r=0,a=Math.min(t.length-n,4);r<a;++r){t[n+r]=e>>>(i?r:3-r)*8&255;}}
u.prototype.writeUInt32LE=function t(e,n,i){e=+e;n=n|0;if(!i)B(this,e,n,4,4294967295,0);if(u.TYPED_ARRAY_SUPPORT){this[n+3]=e>>>24;this[n+2]=e>>>16;this[n+1]=e>>>8;this[n]=e&255;}else{H(this,e,n,true);}
return n+4;};u.prototype.writeUInt32BE=function t(e,n,i){e=+e;n=n|0;if(!i)B(this,e,n,4,4294967295,0);if(u.TYPED_ARRAY_SUPPORT){this[n]=e>>>24;this[n+1]=e>>>16;this[n+2]=e>>>8;this[n+3]=e&255;}else{H(this,e,n,false);}
return n+4;};u.prototype.writeIntLE=function t(e,n,i,r){e=+e;n=n|0;if(!r){var a=Math.pow(2,8*i-1);B(this,e,n,i,a-1,-a);}
var o=0;var s=1;var l=0;this[n]=e&255;while(++o<i&&(s*=256)){if(e<0&&l===0&&this[n+o-1]!==0){l=1;}
this[n+o]=(e/s>>0)-l&255;}
return n+i;};u.prototype.writeIntBE=function t(e,n,i,r){e=+e;n=n|0;if(!r){var a=Math.pow(2,8*i-1);B(this,e,n,i,a-1,-a);}
var o=i-1;var s=1;var l=0;this[n+o]=e&255;while(--o>=0&&(s*=256)){if(e<0&&l===0&&this[n+o+1]!==0){l=1;}
this[n+o]=(e/s>>0)-l&255;}
return n+i;};u.prototype.writeInt8=function t(e,n,i){e=+e;n=n|0;if(!i)B(this,e,n,1,127,-128);if(!u.TYPED_ARRAY_SUPPORT)e=Math.floor(e);if(e<0)e=255+e+1;this[n]=e&255;return n+1;};u.prototype.writeInt16LE=function t(e,n,i){e=+e;n=n|0;if(!i)B(this,e,n,2,32767,-32768);if(u.TYPED_ARRAY_SUPPORT){this[n]=e&255;this[n+1]=e>>>8;}else{k(this,e,n,true);}
return n+2;};u.prototype.writeInt16BE=function t(e,n,i){e=+e;n=n|0;if(!i)B(this,e,n,2,32767,-32768);if(u.TYPED_ARRAY_SUPPORT){this[n]=e>>>8;this[n+1]=e&255;}else{k(this,e,n,false);}
return n+2;};u.prototype.writeInt32LE=function t(e,n,i){e=+e;n=n|0;if(!i)B(this,e,n,4,2147483647,-2147483648);if(u.TYPED_ARRAY_SUPPORT){this[n]=e&255;this[n+1]=e>>>8;this[n+2]=e>>>16;this[n+3]=e>>>24;}else{H(this,e,n,true);}
return n+4;};u.prototype.writeInt32BE=function t(e,n,i){e=+e;n=n|0;if(!i)B(this,e,n,4,2147483647,-2147483648);if(e<0)e=4294967295+e+1;if(u.TYPED_ARRAY_SUPPORT){this[n]=e>>>24;this[n+1]=e>>>16;this[n+2]=e>>>8;this[n+3]=e&255;}else{H(this,e,n,false);}
return n+4;};function z(t,e,n,i,r,a){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range");}
function j(t,e,n,i,a){if(!a){z(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38);}
r.write(t,e,n,i,23,4);return n+4;}
u.prototype.writeFloatLE=function t(e,n,i){return j(this,e,n,true,i);};u.prototype.writeFloatBE=function t(e,n,i){return j(this,e,n,false,i);};function W(t,e,n,i,a){if(!a){z(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308);}
r.write(t,e,n,i,52,8);return n+8;}
u.prototype.writeDoubleLE=function t(e,n,i){return W(this,e,n,true,i);};u.prototype.writeDoubleBE=function t(e,n,i){return W(this,e,n,false,i);};u.prototype.copy=function t(e,n,i,r){if(!i)i=0;if(!r&&r!==0)r=this.length;if(n>=e.length)n=e.length;if(!n)n=0;if(r>0&&r<i)r=i;if(r===i)return 0;if(e.length===0||this.length===0)return 0;if(n<0){throw new RangeError("targetStart out of bounds");}
if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");if(r>this.length)r=this.length;if(e.length-n<r-i){r=e.length-n+i;}
var a=r-i;var o;if(this===e&&i<n&&n<r){for(o=a-1;o>=0;--o){e[o+n]=this[o+i];}}else if(a<1e3||!u.TYPED_ARRAY_SUPPORT){for(o=0;o<a;++o){e[o+n]=this[o+i];}}else{Uint8Array.prototype.set.call(e,this.subarray(i,i+a),n);}
return a;};u.prototype.fill=function t(e,n,i,r){if(typeof e==="string"){if(typeof n==="string"){r=n;n=0;i=this.length;}else if(typeof i==="string"){r=i;i=this.length;}
if(e.length===1){var a=e.charCodeAt(0);if(a<256){e=a;}}
if(r!==undefined&&typeof r!=="string"){throw new TypeError("encoding must be a string");}
if(typeof r==="string"&&!u.isEncoding(r)){throw new TypeError("Unknown encoding: "+r);}}else if(typeof e==="number"){e=e&255;}
if(n<0||this.length<n||this.length<i){throw new RangeError("Out of range index");}
if(i<=n){return this;}
n=n>>>0;i=i===undefined?this.length:i>>>0;if(!e)e=0;var o;if(typeof e==="number"){for(o=n;o<i;++o){this[o]=e;}}else{var s=u.isBuffer(e)?e:Z(new u(e,r).toString());var l=s.length;for(o=0;o<i-n;++o){this[o+n]=s[o%l];}}
return this;};var K=/[^+\/0-9A-Za-z-_]/g;function X(t){t=Y(t).replace(K,"");if(t.length<2)return "";while(t.length%4!==0){t=t+"=";}
return t;}
function Y(t){if(t.trim)return t.trim();return t.replace(/^\s+|\s+$/g,"");}
function q(t){if(t<16)return "0"+t.toString(16);return t.toString(16);}
function Z(t,e){e=e||Infinity;var n;var i=t.length;var r=null;var a=[];for(var o=0;o<i;++o){n=t.charCodeAt(o);if(n>55295&&n<57344){if(!r){if(n>56319){if((e-=3)>-1)a.push(239,191,189);continue;}else if(o+1===i){if((e-=3)>-1)a.push(239,191,189);continue;}
r=n;continue;}
if(n<56320){if((e-=3)>-1)a.push(239,191,189);r=n;continue;}
n=(r-55296<<10|n-56320)+65536;}else if(r){if((e-=3)>-1)a.push(239,191,189);}
r=null;if(n<128){if((e-=1)<0)break;a.push(n);}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,n&63|128);}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,n&63|128);}else if(n<1114112){if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128);}else{throw new Error("Invalid code point");}}
return a;}
function J(t){var e=[];for(var n=0;n<t.length;++n){e.push(t.charCodeAt(n)&255);}
return e;}
function $(t,e){var n,i,r;var a=[];for(var o=0;o<t.length;++o){if((e-=2)<0)break;n=t.charCodeAt(o);i=n>>8;r=n%256;a.push(r);a.push(i);}
return a;}
function Q(t){return i.toByteArray(X(t));}
function tt(t,e,n,i){for(var r=0;r<i;++r){if(r+n>=e.length||r>=t.length)break;e[r+n]=t[r];}
return r;}
function et(t){return t!==t;}}).call(this,n(3));},function(t,e,n){"use strict";e.byteLength=h;e.toByteArray=_;e.fromByteArray=p;var i=[];var r=[];var a=typeof Uint8Array!=="undefined"?Uint8Array:Array;var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var s=0,l=o.length;s<l;++s){i[s]=o[s];r[o.charCodeAt(s)]=s;}
r["-".charCodeAt(0)]=62;r["_".charCodeAt(0)]=63;function u(t){var e=t.length;if(e%4>0){throw new Error("Invalid string. Length must be a multiple of 4");}
var n=t.indexOf("=");if(n===-1)n=e;var i=n===e?0:4-n%4;return[n,i];}
function h(t){var e=u(t);var n=e[0];var i=e[1];return(n+i)*3/4-i;}
function c(t,e,n){return(e+n)*3/4-n;}
function _(t){var e;var n=u(t);var i=n[0];var o=n[1];var s=new a(c(t,i,o));var l=0;var h=o>0?i-4:i;for(var _=0;_<h;_+=4){e=r[t.charCodeAt(_)]<<18|r[t.charCodeAt(_+1)]<<12|r[t.charCodeAt(_+2)]<<6|r[t.charCodeAt(_+3)];s[l++]=e>>16&255;s[l++]=e>>8&255;s[l++]=e&255;}
if(o===2){e=r[t.charCodeAt(_)]<<2|r[t.charCodeAt(_+1)]>>4;s[l++]=e&255;}
if(o===1){e=r[t.charCodeAt(_)]<<10|r[t.charCodeAt(_+1)]<<4|r[t.charCodeAt(_+2)]>>2;s[l++]=e>>8&255;s[l++]=e&255;}
return s;}
function f(t){return i[t>>18&63]+i[t>>12&63]+i[t>>6&63]+i[t&63];}
function d(t,e,n){var i;var r=[];for(var a=e;a<n;a+=3){i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255);r.push(f(i));}
return r.join("");}
function p(t){var e;var n=t.length;var r=n%3;var a=[];var o=16383;for(var s=0,l=n-r;s<l;s+=o){a.push(d(t,s,s+o>l?l:s+o));}
if(r===1){e=t[n-1];a.push(i[e>>2]+i[e<<4&63]+"==");}else if(r===2){e=(t[n-2]<<8)+t[n-1];a.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"=");}
return a.join("");}},function(t,e){e.read=function(t,e,n,i,r){var a,o;var s=r*8-i-1;var l=(1<<s)-1;var u=l>>1;var h=-7;var c=n?r-1:0;var _=n?-1:1;var f=t[e+c];c+=_;a=f&(1<<-h)-1;f>>=-h;h+=s;for(;h>0;a=a*256+t[e+c],c+=_,h-=8){}
o=a&(1<<-h)-1;a>>=-h;h+=i;for(;h>0;o=o*256+t[e+c],c+=_,h-=8){}
if(a===0){a=1-u;}else if(a===l){return o?NaN:(f?-1:1)*Infinity;}else{o=o+Math.pow(2,i);a=a-u;}
return(f?-1:1)*o*Math.pow(2,a-i);};e.write=function(t,e,n,i,r,a){var o,s,l;var u=a*8-r-1;var h=(1<<u)-1;var c=h>>1;var _=r===23?Math.pow(2,-24)-Math.pow(2,-77):0;var f=i?0:a-1;var d=i?1:-1;var p=e<0||e===0&&1/e<0?1:0;e=Math.abs(e);if(isNaN(e)||e===Infinity){s=isNaN(e)?1:0;o=h;}else{o=Math.floor(Math.log(e)/Math.LN2);if(e*(l=Math.pow(2,-o))<1){o--;l*=2;}
if(o+c>=1){e+=_/l;}else{e+=_*Math.pow(2,1-c);}
if(e*l>=2){o++;l/=2;}
if(o+c>=h){s=0;o=h;}else if(o+c>=1){s=(e*l-1)*Math.pow(2,r);o=o+c;}else{s=e*Math.pow(2,c-1)*Math.pow(2,r);o=0;}}
for(;r>=8;t[n+f]=s&255,f+=d,s/=256,r-=8){}
o=o<<r|s;u+=r;for(;u>0;t[n+f]=o&255,f+=d,o/=256,u-=8){}
t[n+f-d]|=p*128;};},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return n.call(t)=="[object Array]";};},function(t,e,n){"use strict";},function(t,e,n){"use strict";(function(e){function n(t){e.getNetworkType({success:function e(n){t(n.networkType);}});}
function i(){var t=e.getSystemInfoSync();return{adt:encodeURIComponent(t.model),scl:t.pixelRatio,scr:t.windowWidth+"x"+t.windowHeight,lg:t.language,fl:t.version,jv:encodeURIComponent(t.system),tz:encodeURIComponent(t.platform)};}
function r(){try{return e.getStorageSync(_.prefix+"auid");}catch(t){}}
function a(){try{var t=l();return e.setStorageSync(_.prefix+"auid",t),t;}catch(t){}}
function o(){try{return e.getStorageSync(_.prefix+"ssid");}catch(t){}}
function s(){try{var t="s"+l();return e.setStorageSync(_.prefix+"ssid",t),t;}catch(t){}}
function l(t){for(var e=[0,1,2,3,4,5,6,7,8,9],n=10;1<n;n--){var i=Math.floor(10*Math.random()),r=e[i];e[i]=e[n-1],e[n-1]=r;}
for(n=i=0;5>n;n++){i=10*i+e[n];}
return(t||"")+(i+"")+ +new Date();}
function u(){var t={dm:"wechat.apps.xx",url:"/",pvi:"",si:"",ty:0};return t.pvi=function(){var e=r();return e||(e=a(),t.ty=1),e;}(),t.si=function(){var t=o();return t||(t=s()),t;}(),t;}
function h(){var t=i();return n(function(t){try{e.setStorageSync(_.prefix+"ntdata",t);}catch(t){}}),t.ct=e.getStorageSync(_.prefix+"ntdata")||"4g",t;}
function c(){var t,e=f.Data.userInfo,n=[];for(t in e){e.hasOwnProperty(t)&&n.push(t+"="+e[t]);}
return e=n.join(";"),{r2:_.app_id,r4:"wx",ext:"v="+_.version+(null!==e&&""!==e?";ui="+encodeURIComponent(e):"")};}
var _={app_id:"",event_id:"",api_base:"https://pingtas.qq.com/pingd",prefix:"_mta_",version:"1.3.5",stat_share_app:!1,stat_pull_down_fresh:!1,stat_reach_bottom:!1},f={App:{init:function t(e){"appID"in e&&(_.app_id=e.appID),"eventID"in e&&(_.event_id=e.eventID),"statShareApp"in e&&(_.stat_share_app=e.statShareApp),"statPullDownFresh"in e&&(_.stat_pull_down_fresh=e.statPullDownFresh),"statReachBottom"in e&&(_.stat_reach_bottom=e.statReachBottom),s(),"lauchOpts"in e&&(f.Data.lanchInfo=e.lauchOpts,f.Data.lanchInfo.landing=1);}},Page:{init:function t(){var e=getCurrentPages()[getCurrentPages().length-1];e.onShow&&function(){var t=e.onShow;e.onShow=function(){f.Page.stat(),t.call(this,arguments);};}(),_.stat_pull_down_fresh&&e.onPullDownRefresh&&function(){var t=e.onPullDownRefresh;e.onPullDownRefresh=function(){f.Event.stat(_.prefix+"pulldownfresh",{url:e.__route__}),t.call(this,arguments);};}(),_.stat_reach_bottom&&e.onReachBottom&&function(){var t=e.onReachBottom;e.onReachBottom=function(){f.Event.stat(_.prefix+"reachbottom",{url:e.__route__}),t.call(this,arguments);};}(),_.stat_share_app&&e.onShareAppMessage&&function(){var t=e.onShareAppMessage;e.onShareAppMessage=function(){return f.Event.stat(_.prefix+"shareapp",{url:e.__route__}),t.call(this,arguments);};}();},stat:function t(){if(""!=_.app_id){var n=[],i=c(),r=[u(),i,h()];f.Data.lanchInfo&&(r.push({ht:f.Data.lanchInfo.scene,rdm:"/",rurl:f.Data.lanchInfo.path}),f.Data.lanchInfo.query&&f.Data.lanchInfo.query._mta_ref_id&&r.push({rarg:f.Data.lanchInfo.query._mta_ref_id}),1==f.Data.lanchInfo.landing&&(i.ext+=";lp=1",f.Data.lanchInfo.landing=0)),r.push({rand:+new Date()}),i=0;for(var a=r.length;i<a;i++){for(var o in r[i]){r[i].hasOwnProperty(o)&&n.push(o+"="+(void 0===r[i][o]?"":r[i][o]));}}
e.request({url:_.api_base+"?"+n.join("&").toLowerCase()});}}},Event:{stat:function t(n,i){if(""!=_.event_id){var r=[],a=u(),o=c();a.dm="wxapps.click",a.url=n,o.r2=_.event_id;var s,l=void 0===i?{}:i,f=[];for(s in l){l.hasOwnProperty(s)&&f.push(encodeURIComponent(s)+"="+encodeURIComponent(l[s]));}
for(l=f.join(";"),o.r5=l,l=0,o=(a=[a,o,h(),{rand:+new Date()}]).length;l<o;l++){for(var d in a[l]){a[l].hasOwnProperty(d)&&r.push(d+"="+(void 0===a[l][d]?"":a[l][d]));}}
e.request({url:_.api_base+"?"+r.join("&").toLowerCase()});}}},Data:{userInfo:null,lanchInfo:null}};t.exports=f;}).call(this,n(0));}]);});